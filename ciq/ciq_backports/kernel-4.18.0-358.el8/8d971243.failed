iommu/dma: Remove redundant "!dev" checks

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-358.el8
commit-author Robin Murphy <robin.murphy@arm.com>
commit 8d971243a9a7d73a410450951a21f298f1394dc7
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-358.el8/8d971243.failed

iommu_dma_init_domain() is now only called from iommu_setup_dma_ops(),
which has already assumed dev to be non-NULL.

	Reviewed-by: John Garry <john.garry@huawei.com>
	Reviewed-by: Lu Baolu <baolu.lu@linux.intel.com>
	Signed-off-by: Robin Murphy <robin.murphy@arm.com>
Link: https://lore.kernel.org/r/06024523c080364390016550065e3cfe8031367e.1628682049.git.robin.murphy@arm.com
	Signed-off-by: Joerg Roedel <jroedel@suse.de>
(cherry picked from commit 8d971243a9a7d73a410450951a21f298f1394dc7)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/iommu/dma-iommu.c
diff --cc drivers/iommu/dma-iommu.c
index 5a746c247042,afaa1f9b5935..000000000000
--- a/drivers/iommu/dma-iommu.c
+++ b/drivers/iommu/dma-iommu.c
@@@ -386,9 -370,8 +386,14 @@@ static int iommu_dma_init_domain(struc
  
  	init_iova_domain(iovad, 1UL << order, base_pfn);
  
++<<<<<<< HEAD
 +	if (!cookie->fq_domain && (!dev || !dev_is_untrusted(dev)) &&
 +	    !iommu_domain_get_attr(domain, DOMAIN_ATTR_DMA_USE_FLUSH_QUEUE, &attr) &&
 +	    attr) {
++=======
+ 	if (!cookie->fq_domain && !dev_is_untrusted(dev) &&
+ 	    domain->ops->flush_iotlb_all && !iommu_get_dma_strict(domain)) {
++>>>>>>> 8d971243a9a7 (iommu/dma: Remove redundant "!dev" checks)
  		if (init_iova_flush_queue(iovad, iommu_dma_flush_iotlb_all,
  					  iommu_dma_entry_dtor))
  			pr_warn("iova flush queue initialization failed\n");
* Unmerged path drivers/iommu/dma-iommu.c
