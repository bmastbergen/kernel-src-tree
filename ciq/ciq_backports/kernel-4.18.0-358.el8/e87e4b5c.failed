net: bridge: multicast: handle block pg delete for all cases

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-358.el8
commit-author Nikolay Aleksandrov <nikolay@nvidia.com>
commit e87e4b5caa5db4ab14508e75ec5926a1c05020ac
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-358.el8/e87e4b5c.failed

A block report can result in empty source and host sets for both include
and exclude groups so if there are no hosts left we can safely remove
the group. Pull the block group handling so it can cover both cases and
add a check if EHT requires the delete.

	Signed-off-by: Nikolay Aleksandrov <nikolay@nvidia.com>
	Signed-off-by: Jakub Kicinski <kuba@kernel.org>
(cherry picked from commit e87e4b5caa5db4ab14508e75ec5926a1c05020ac)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/bridge/br_multicast.c
diff --cc net/bridge/br_multicast.c
index 4eaac3b4a6ea,47afb1e11daf..000000000000
--- a/net/bridge/br_multicast.c
+++ b/net/bridge/br_multicast.c
@@@ -1755,8 -2207,10 +1755,12 @@@ static void __grp_src_block_incl(struc
  	if (to_send)
  		__grp_src_query_marked_and_rexmit(pg);
  
++<<<<<<< HEAD
 +	if (pg->filter_mode == MCAST_INCLUDE && hlist_empty(&pg->src_list))
 +		br_multicast_find_del_pg(pg->port->br, pg);
++=======
+ 	return changed;
++>>>>>>> e87e4b5caa5d (net: bridge: multicast: handle block pg delete for all cases)
  }
  
  /* State          Msg type      New state                Actions
* Unmerged path net/bridge/br_multicast.c
