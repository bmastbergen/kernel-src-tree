firmware: smccc: Add function to fetch SMCCC version

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-358.el8
commit-author Sudeep Holla <sudeep.holla@arm.com>
commit a4fb17465182c9fc13104e4df04d050892055205
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-358.el8/a4fb1746.failed

For backward compatibility reasons, PSCI maintains SMCCC version as
SMCCC didn't provide ARM_SMCCC_VERSION_FUNC_ID until v1.1.

PSCI initialises both the SMCCC version and conduit. Similar to the
conduit, let us provide accessors to fetch the SMCCC version also so
that other SMCCC v1.1+ features can use it.

	Signed-off-by: Sudeep Holla <sudeep.holla@arm.com>
	Tested-by: Etienne Carriere <etienne.carriere@st.com>
	Reviewed-by: Steven Price <steven.price@arm.com>
	Reviewed-by: Etienne Carriere <etienne.carriere@st.com>
	Acked-by: Mark Rutland <mark.rutland@arm.com>
Link: https://lore.kernel.org/r/20200518091222.27467-7-sudeep.holla@arm.com
	Signed-off-by: Will Deacon <will@kernel.org>
(cherry picked from commit a4fb17465182c9fc13104e4df04d050892055205)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/firmware/smccc/smccc.c
* Unmerged path drivers/firmware/smccc/smccc.c
* Unmerged path drivers/firmware/smccc/smccc.c
diff --git a/include/linux/arm-smccc.h b/include/linux/arm-smccc.h
index d4631a54d0a1..be38b6b99fff 100644
--- a/include/linux/arm-smccc.h
+++ b/include/linux/arm-smccc.h
@@ -133,6 +133,17 @@ enum arm_smccc_conduit {
  */
 enum arm_smccc_conduit arm_smccc_1_1_get_conduit(void);
 
+/**
+ * arm_smccc_get_version()
+ *
+ * Returns the version to be used for SMCCCv1.1 or later.
+ *
+ * When SMCCCv1.1 or above is not present, returns SMCCCv1.0, but this
+ * does not imply the presence of firmware or a valid conduit. Caller
+ * handling SMCCCv1.0 must determine the conduit by other means.
+ */
+u32 arm_smccc_get_version(void);
+
 /**
  * struct arm_smccc_res - Result from SMC/HVC call
  * @a0-a3 result values from registers 0 to 3
