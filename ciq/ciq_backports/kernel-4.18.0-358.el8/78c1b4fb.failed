bridge: mrp: Extend br_mrp for MRP interconnect

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-358.el8
commit-author Horatiu Vultur <horatiu.vultur@microchip.com>
commit 78c1b4fb0e3ed6907955abf3fc8eea74704fe072
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-358.el8/78c1b4fb.failed

This patch extends the 'struct br_mrp' to contain information regarding
the MRP interconnect. It contains the following:
- the interconnect port 'i_port', which is NULL if the node doesn't have
  a interconnect role
- the interconnect id, which is similar with the ring id, but this field
  is also part of the MRP_InTest frames.
- the interconnect role, which can be MIM or MIC.
- the interconnect state, which can be open or closed.
- the interconnect delayed_work for sending MRP_InTest frames and check
  for lost of continuity.

	Signed-off-by: Horatiu Vultur <horatiu.vultur@microchip.com>
	Acked-by: Nikolay Aleksandrov <nikolay@cumulusnetworks.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 78c1b4fb0e3ed6907955abf3fc8eea74704fe072)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/bridge/br_private_mrp.h
diff --cc net/bridge/br_private_mrp.h
index a0f53cc3ab85,8841ba847fb2..000000000000
--- a/net/bridge/br_private_mrp.h
+++ b/net/bridge/br_private_mrp.h
@@@ -12,8 -12,11 +12,14 @@@ struct br_mrp 
  
  	struct net_bridge_port __rcu	*p_port;
  	struct net_bridge_port __rcu	*s_port;
+ 	struct net_bridge_port __rcu	*i_port;
  
  	u32				ring_id;
++<<<<<<< HEAD
++=======
+ 	u16				in_id;
+ 	u16				prio;
++>>>>>>> 78c1b4fb0e3e (bridge: mrp: Extend br_mrp for MRP interconnect)
  
  	enum br_mrp_ring_role_type	ring_role;
  	u8				ring_role_offloaded;
@@@ -25,7 -33,14 +36,13 @@@
  	unsigned long			test_end;
  	u32				test_count_miss;
  	u32				test_max_miss;
 -	bool				test_monitor;
  
+ 	struct delayed_work		in_test_work;
+ 	u32				in_test_interval;
+ 	unsigned long			in_test_end;
+ 	u32				in_test_count_miss;
+ 	u32				in_test_max_miss;
+ 
  	u32				seq_id;
  
  	struct rcu_head			rcu;
* Unmerged path net/bridge/br_private_mrp.h
