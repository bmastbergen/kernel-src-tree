torture: Remove "Failed to add ttynull console" false positive

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-358.el8
commit-author Paul E. McKenney <paulmck@kernel.org>
commit 546eee2d931b3d76357a9c813778203001375fe1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-358.el8/546eee2d.failed

Commit 757055ae8ded ("init/console: Use ttynull as a fallback when
there is no console") results in the string "Warning: Failed to add
ttynull console. No stdin, stdout, and stderr for the init process!"
appearing on the console, which the rcutorture scripting interprets as
a warning, which causes every rcutorture run to be flagged.  However,
the rcutorture init process never attempts to do any I/O, and thus does
not care that it has no stdin, stdout, or stderr.

This commit therefore causes the rcutorture scripting to ignore this
message.

	Signed-off-by: Paul E. McKenney <paulmck@kernel.org>
(cherry picked from commit 546eee2d931b3d76357a9c813778203001375fe1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/testing/selftests/rcutorture/bin/console-badness.sh
diff --cc tools/testing/selftests/rcutorture/bin/console-badness.sh
index 0e4c0b2eb7f0,e6a132df6172..000000000000
--- a/tools/testing/selftests/rcutorture/bin/console-badness.sh
+++ b/tools/testing/selftests/rcutorture/bin/console-badness.sh
@@@ -13,4 -13,6 +13,10 @@@
  egrep 'Badness|WARNING:|Warn|BUG|===========|Call Trace:|Oops:|detected stalls on CPUs/tasks:|self-detected stall on CPU|Stall ended before state dump start|\?\?\? Writer stall state|rcu_.*kthread starved for|!!!' |
  grep -v 'ODEBUG: ' |
  grep -v 'This means that this is a DEBUG kernel and it is' |
++<<<<<<< HEAD
 +grep -v 'Warning: unable to open an initial console'
++=======
+ grep -v 'Warning: unable to open an initial console' |
+ grep -v 'Warning: Failed to add ttynull console. No stdin, stdout, and stderr.*the init process!' |
+ grep -v 'NOHZ tick-stop error: Non-RCU local softirq work is pending, handler'
++>>>>>>> 546eee2d931b (torture: Remove "Failed to add ttynull console" false positive)
* Unmerged path tools/testing/selftests/rcutorture/bin/console-badness.sh
diff --git a/tools/testing/selftests/rcutorture/bin/parse-console.sh b/tools/testing/selftests/rcutorture/bin/parse-console.sh
index e03338091a06..7dac9fbc8d5d 100755
--- a/tools/testing/selftests/rcutorture/bin/parse-console.sh
+++ b/tools/testing/selftests/rcutorture/bin/parse-console.sh
@@ -128,7 +128,7 @@ then
 	then
 		summary="$summary  Badness: $n_badness"
 	fi
-	n_warn=`grep -v 'Warning: unable to open an initial console' $file | egrep -c 'WARNING:|Warn'`
+	n_warn=`grep -v 'Warning: unable to open an initial console' $file | grep -v 'Warning: Failed to add ttynull console. No stdin, stdout, and stderr for the init process' | egrep -c 'WARNING:|Warn'`
 	if test "$n_warn" -ne 0
 	then
 		summary="$summary  Warnings: $n_warn"
