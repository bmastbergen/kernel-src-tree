nvme: factor out a nvme_ns_ioctl helper

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-358.el8
commit-author Christoph Hellwig <hch@lst.de>
commit a5d737f10022bd5d2acf5127935ff813fc832f6e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-358.el8/a5d737f1.failed

Factor out a helper for the namespace based ioctls.

	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Reviewed-by: Keith Busch <kbusch@kernel.org>
	Reviewed-by: Javier Gonz√°lez <javier.gonz@samsung.com>
	Reviewed-by: Chaitanya Kulkarni <chaitanya.kulkarni@wdc.com>
(cherry picked from commit a5d737f10022bd5d2acf5127935ff813fc832f6e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/nvme/host/core.c
diff --cc drivers/nvme/host/core.c
index dce7e949ffac,85acb9f608cd..000000000000
--- a/drivers/nvme/host/core.c
+++ b/drivers/nvme/host/core.c
@@@ -1849,27 -1823,7 +1869,31 @@@ static int nvme_ioctl(struct block_devi
  	if (is_ctrl_ioctl(cmd))
  		return nvme_handle_ctrl_ioctl(ns, cmd, argp, head, srcu_idx);
  
++<<<<<<< HEAD
 +	switch (cmd) {
 +	case NVME_IOCTL_ID:
 +		force_successful_syscall_return();
 +		ret = ns->head->ns_id;
 +		break;
 +	case NVME_IOCTL_IO_CMD:
 +		ret = nvme_user_cmd(ns->ctrl, ns, argp);
 +		break;
 +	case NVME_IOCTL_SUBMIT_IO:
 +		ret = nvme_submit_io(ns, argp);
 +		break;
 +	case NVME_IOCTL_IO64_CMD:
 +		ret = nvme_user_cmd64(ns->ctrl, ns, argp);
 +		break;
 +	default:
 +		if (ns->ndev)
 +			ret = nvme_nvm_ioctl(ns, cmd, arg);
 +		else
 +			ret = -ENOTTY;
 +	}
 +
++=======
+ 	ret = nvme_ns_ioctl(ns, cmd, argp);
++>>>>>>> a5d737f10022 (nvme: factor out a nvme_ns_ioctl helper)
  	nvme_put_ns_from_disk(head, srcu_idx);
  	return ret;
  }
* Unmerged path drivers/nvme/host/core.c
