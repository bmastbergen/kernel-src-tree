svcrdma: Remove unused sc_pages field

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-358.el8
commit-author Chuck Lever <chuck.lever@oracle.com>
commit 579900670ac770a547ff607a60c02c56a7d27bd7
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-358.el8/57990067.failed

Clean up. This significantly reduces the size of struct
svc_rdma_send_ctxt.

	Signed-off-by: Chuck Lever <chuck.lever@oracle.com>

(cherry picked from commit 579900670ac770a547ff607a60c02c56a7d27bd7)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/sunrpc/xprtrdma/svc_rdma_sendto.c
diff --cc net/sunrpc/xprtrdma/svc_rdma_sendto.c
index e6fab5dd20d0,f093c9b536ff..000000000000
--- a/net/sunrpc/xprtrdma/svc_rdma_sendto.c
+++ b/net/sunrpc/xprtrdma/svc_rdma_sendto.c
@@@ -793,25 -786,6 +787,28 @@@ int svc_rdma_map_reply_msg(struct svcxp
  				       svc_rdma_xb_dma_map, &args);
  }
  
++<<<<<<< HEAD
 +/* The svc_rqst and all resources it owns are released as soon as
 + * svc_rdma_sendto returns. Transfer pages under I/O to the ctxt
 + * so they are released by the Send completion handler.
 + */
 +static void svc_rdma_save_io_pages(struct svc_rqst *rqstp,
 +				   struct svc_rdma_send_ctxt *ctxt)
 +{
 +	int i, pages = rqstp->rq_next_page - rqstp->rq_respages;
 +
 +	ctxt->sc_page_count += pages;
 +	for (i = 0; i < pages; i++) {
 +		ctxt->sc_pages[i] = rqstp->rq_respages[i];
 +		rqstp->rq_respages[i] = NULL;
 +	}
 +
 +	/* Prevent svc_xprt_release from releasing pages in rq_pages */
 +	rqstp->rq_next_page = rqstp->rq_respages;
 +}
 +
++=======
++>>>>>>> 579900670ac7 (svcrdma: Remove unused sc_pages field)
  /* Prepare the portion of the RPC Reply that will be transmitted
   * via RDMA Send. The RPC-over-RDMA transport header is prepared
   * in sc_sges[0], and the RPC xdr_buf is prepared in following sges.
diff --git a/include/linux/sunrpc/svc_rdma.h b/include/linux/sunrpc/svc_rdma.h
index 9c4cf3614de1..e81903871712 100644
--- a/include/linux/sunrpc/svc_rdma.h
+++ b/include/linux/sunrpc/svc_rdma.h
@@ -168,9 +168,8 @@ struct svc_rdma_send_ctxt {
 	struct xdr_buf		sc_hdrbuf;
 	struct xdr_stream	sc_stream;
 	void			*sc_xprt_buf;
-	int			sc_page_count;
 	int			sc_cur_sge_no;
-	struct page		*sc_pages[RPCSVC_MAXPAGES];
+
 	struct ib_sge		sc_sges[];
 };
 
* Unmerged path net/sunrpc/xprtrdma/svc_rdma_sendto.c
