selftests/bpf: Add docs target as all dependency

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-358.el8
commit-author Jiri Olsa <jolsa@kernel.org>
commit d044d9fc1380b66917dcb418ef4ec7e59dd6e597
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-358.el8/d044d9fc.failed

Currently docs target is make dependency for TEST_GEN_FILES,
which makes tests to be rebuilt every time you run make.

Adding docs as all target dependency, so when running make
on top of built selftests it will show just:

  $ make
  make[1]: Nothing to be done for 'docs'.

After cleaning docs, only docs is rebuilt:

  $ make docs-clean
  CLEAN    eBPF_helpers-manpage
  CLEAN    eBPF_syscall-manpage
  $ make
  GEN      ...selftests/bpf/bpf-helpers.rst
  GEN      ...selftests/bpf/bpf-helpers.7
  GEN      ...selftests/bpf/bpf-syscall.rst
  GEN      ...selftests/bpf/bpf-syscall.2
  $ make
  make[1]: Nothing to be done for 'docs'.

Fixes: a01d935b2e09 ("tools/bpf: Remove bpf-helpers from bpftool docs")
	Signed-off-by: Jiri Olsa <jolsa@kernel.org>
	Signed-off-by: Andrii Nakryiko <andrii@kernel.org>
Link: https://lore.kernel.org/bpf/20210420132428.15710-1-jolsa@kernel.org
(cherry picked from commit d044d9fc1380b66917dcb418ef4ec7e59dd6e597)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/testing/selftests/bpf/Makefile
diff --cc tools/testing/selftests/bpf/Makefile
index 2b97e7462c9b,c5bcdb3d4b12..000000000000
--- a/tools/testing/selftests/bpf/Makefile
+++ b/tools/testing/selftests/bpf/Makefile
@@@ -206,11 -208,18 +206,26 @@@ $(DEFAULT_BPFTOOL): $(wildcard $(BPFTOO
  		    EXTRA_CFLAGS='-g -Og'				       \
  		    OUTPUT=$(HOST_BUILD_DIR)/bpftool/			       \
  		    prefix= DESTDIR=$(HOST_SCRATCH_DIR)/ install
++<<<<<<< HEAD
 +	$(Q)mkdir -p $(BUILD_DIR)/bpftool/Documentation
 +	$(Q)RST2MAN_OPTS="--exit-status=1" $(MAKE) $(submake_extras)	       \
 +		    -C $(BPFTOOLDIR)/Documentation			       \
 +		    OUTPUT=$(BUILD_DIR)/bpftool/Documentation/		       \
 +		    prefix= DESTDIR=$(SCRATCH_DIR)/ install
++=======
+ 
+ all: docs
+ 
+ docs:
+ 	$(Q)RST2MAN_OPTS="--exit-status=1" $(MAKE) $(submake_extras)	\
+ 	            -f Makefile.docs					\
+ 	            prefix= OUTPUT=$(OUTPUT)/ DESTDIR=$(OUTPUT)/ $@
+ 
+ docs-clean:
+ 	$(Q)$(MAKE) $(submake_extras)					\
+ 	            -f Makefile.docs					\
+ 	            prefix= OUTPUT=$(OUTPUT)/ DESTDIR=$(OUTPUT)/ $@
++>>>>>>> d044d9fc1380 (selftests/bpf: Add docs target as all dependency)
  
  $(BPFOBJ): $(wildcard $(BPFDIR)/*.[ch] $(BPFDIR)/Makefile)		       \
  	   ../../../include/uapi/linux/bpf.h                                   \
* Unmerged path tools/testing/selftests/bpf/Makefile
