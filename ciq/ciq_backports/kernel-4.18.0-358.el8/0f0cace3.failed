mm, memcg: mark cgroup_memory_nosocket, nokmem and noswap as __ro_after_init

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-358.el8
commit-author Roman Gushchin <guro@fb.com>
commit 0f0cace35fa655d383b64b4fce83a44d530c9aaf
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-358.el8/0f0cace3.failed

cgroup_memory_nosocket, cgroup_memory_nokmem and cgroup_memory_noswap
are initialized during the kernel initialization and never change
their value afterwards.

cgroup_memory_nosocket, cgroup_memory_nokmem are written only from
cgroup_memory(), which is marked as __init.

cgroup_memory_noswap is written from setup_swap_account() and
mem_cgroup_swap_init(), both are marked as __init.

Mark all three variables as __ro_after_init.

	Signed-off-by: Roman Gushchin <guro@fb.com>
	Signed-off-by: Dennis Zhou <dennis@kernel.org>
(cherry picked from commit 0f0cace35fa655d383b64b4fce83a44d530c9aaf)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	mm/memcontrol.c
diff --cc mm/memcontrol.c
index a59fd41a5b6a,e6203ee24a11..000000000000
--- a/mm/memcontrol.c
+++ b/mm/memcontrol.c
@@@ -80,10 -80,10 +80,14 @@@ struct mem_cgroup *root_mem_cgroup __re
  DEFINE_PER_CPU(struct mem_cgroup *, int_active_memcg);
  
  /* Socket memory accounting disabled? */
- static bool cgroup_memory_nosocket;
+ static bool cgroup_memory_nosocket __ro_after_init;
  
  /* Kernel memory accounting disabled? */
++<<<<<<< HEAD
 +bool cgroup_memory_nokmem;
++=======
+ static bool cgroup_memory_nokmem __ro_after_init;
++>>>>>>> 0f0cace35fa6 (mm, memcg: mark cgroup_memory_nosocket, nokmem and noswap as __ro_after_init)
  
  /* Whether the swap controller is active */
  #ifdef CONFIG_MEMCG_SWAP
* Unmerged path mm/memcontrol.c
