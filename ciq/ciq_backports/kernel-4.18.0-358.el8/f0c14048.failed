perf: Constify static struct attribute_group

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-358.el8
commit-author Rikard Falkeborn <rikard.falkeborn@gmail.com>
commit f0c140481d1b807217cacdcf11d24cfa407a7a53
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-358.el8/f0c14048.failed

The only usage is to put their addresses in an array of pointers to
const struct attribute group. Make them const to allow the compiler
to put them in read-only memory.

	Signed-off-by: Rikard Falkeborn <rikard.falkeborn@gmail.com>
Link: https://lore.kernel.org/r/20210117212847.21319-5-rikard.falkeborn@gmail.com
	Signed-off-by: Will Deacon <will@kernel.org>
(cherry picked from commit f0c140481d1b807217cacdcf11d24cfa407a7a53)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/perf/arm_dmc620_pmu.c
#	drivers/perf/arm_smmuv3_pmu.c
diff --cc drivers/perf/arm_smmuv3_pmu.c
index c711673086b5,8ff7a67f691c..000000000000
--- a/drivers/perf/arm_smmuv3_pmu.c
+++ b/drivers/perf/arm_smmuv3_pmu.c
@@@ -536,6 -554,40 +536,43 @@@ static const struct attribute_group smm
  	.is_visible = smmu_pmu_event_is_visible,
  };
  
++<<<<<<< HEAD
++=======
+ static ssize_t smmu_pmu_identifier_attr_show(struct device *dev,
+ 					struct device_attribute *attr,
+ 					char *page)
+ {
+ 	struct smmu_pmu *smmu_pmu = to_smmu_pmu(dev_get_drvdata(dev));
+ 
+ 	return snprintf(page, PAGE_SIZE, "0x%08x\n", smmu_pmu->iidr);
+ }
+ 
+ static umode_t smmu_pmu_identifier_attr_visible(struct kobject *kobj,
+ 						struct attribute *attr,
+ 						int n)
+ {
+ 	struct device *dev = kobj_to_dev(kobj);
+ 	struct smmu_pmu *smmu_pmu = to_smmu_pmu(dev_get_drvdata(dev));
+ 
+ 	if (!smmu_pmu->iidr)
+ 		return 0;
+ 	return attr->mode;
+ }
+ 
+ static struct device_attribute smmu_pmu_identifier_attr =
+ 	__ATTR(identifier, 0444, smmu_pmu_identifier_attr_show, NULL);
+ 
+ static struct attribute *smmu_pmu_identifier_attrs[] = {
+ 	&smmu_pmu_identifier_attr.attr,
+ 	NULL
+ };
+ 
+ static const struct attribute_group smmu_pmu_identifier_group = {
+ 	.attrs = smmu_pmu_identifier_attrs,
+ 	.is_visible = smmu_pmu_identifier_attr_visible,
+ };
+ 
++>>>>>>> f0c140481d1b (perf: Constify static struct attribute_group)
  /* Formats */
  PMU_FORMAT_ATTR(event,		   "config:0-15");
  PMU_FORMAT_ATTR(filter_stream_id,  "config1:0-31");
* Unmerged path drivers/perf/arm_dmc620_pmu.c
diff --git a/drivers/perf/arm-cci.c b/drivers/perf/arm-cci.c
index ec93fcfc463f..65c73fc4c8dd 100644
--- a/drivers/perf/arm-cci.c
+++ b/drivers/perf/arm-cci.c
@@ -1376,7 +1376,7 @@ static struct attribute *pmu_attrs[] = {
 	NULL,
 };
 
-static struct attribute_group pmu_attr_group = {
+static const struct attribute_group pmu_attr_group = {
 	.attrs = pmu_attrs,
 };
 
diff --git a/drivers/perf/arm-cmn.c b/drivers/perf/arm-cmn.c
index 46defb1dcf86..1328159fe564 100644
--- a/drivers/perf/arm-cmn.c
+++ b/drivers/perf/arm-cmn.c
@@ -616,7 +616,7 @@ static struct attribute *arm_cmn_cpumask_attrs[] = {
 	NULL,
 };
 
-static struct attribute_group arm_cmn_cpumask_attr_group = {
+static const struct attribute_group arm_cmn_cpumask_attr_group = {
 	.attrs = arm_cmn_cpumask_attrs,
 };
 
* Unmerged path drivers/perf/arm_dmc620_pmu.c
diff --git a/drivers/perf/arm_pmu.c b/drivers/perf/arm_pmu.c
index eec75b97e7ea..e59c2fec0ca5 100644
--- a/drivers/perf/arm_pmu.c
+++ b/drivers/perf/arm_pmu.c
@@ -500,7 +500,7 @@ static struct attribute *armpmu_common_attrs[] = {
 	NULL,
 };
 
-static struct attribute_group armpmu_common_attr_group = {
+static const struct attribute_group armpmu_common_attr_group = {
 	.attrs = armpmu_common_attrs,
 };
 
* Unmerged path drivers/perf/arm_smmuv3_pmu.c
diff --git a/drivers/perf/arm_spe_pmu.c b/drivers/perf/arm_spe_pmu.c
index 1749de5146ae..b16d1ae8b76d 100644
--- a/drivers/perf/arm_spe_pmu.c
+++ b/drivers/perf/arm_spe_pmu.c
@@ -157,7 +157,7 @@ static struct attribute *arm_spe_pmu_cap_attr[] = {
 	NULL,
 };
 
-static struct attribute_group arm_spe_pmu_cap_group = {
+static const struct attribute_group arm_spe_pmu_cap_group = {
 	.name	= "caps",
 	.attrs	= arm_spe_pmu_cap_attr,
 };
@@ -238,7 +238,7 @@ static struct attribute *arm_spe_pmu_formats_attr[] = {
 	NULL,
 };
 
-static struct attribute_group arm_spe_pmu_format_group = {
+static const struct attribute_group arm_spe_pmu_format_group = {
 	.name	= "format",
 	.attrs	= arm_spe_pmu_formats_attr,
 };
@@ -258,7 +258,7 @@ static struct attribute *arm_spe_pmu_attrs[] = {
 	NULL,
 };
 
-static struct attribute_group arm_spe_pmu_group = {
+static const struct attribute_group arm_spe_pmu_group = {
 	.attrs	= arm_spe_pmu_attrs,
 };
 
