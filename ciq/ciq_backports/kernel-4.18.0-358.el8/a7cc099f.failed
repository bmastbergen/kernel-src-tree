KVM: x86/mmu: kvm_faultin_pfn has to return false if pfh is returned

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-358.el8
commit-author Andrei Vagin <avagin@gmail.com>
commit a7cc099f2ec3117678adeb69749bef7e9dde3148
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-358.el8/a7cc099f.failed

This looks like a typo in 8f32d5e563cb. This change didn't intend to do
any functional changes.

The problem was caught by gVisor tests.

Fixes: 8f32d5e563cb ("KVM: x86/mmu: allow kvm_faultin_pfn to return page fault handling code")
	Cc: Maxim Levitsky <mlevitsk@redhat.com>
	Cc: Paolo Bonzini <pbonzini@redhat.com>
	Signed-off-by: Andrei Vagin <avagin@gmail.com>
Message-Id: <20211015163221.472508-1-avagin@gmail.com>
	Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>
(cherry picked from commit a7cc099f2ec3117678adeb69749bef7e9dde3148)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/kvm/mmu/mmu.c
diff --cc arch/x86/kvm/mmu/mmu.c
index 1b2d72b71c56,29e7a4bb26e9..000000000000
--- a/arch/x86/kvm/mmu/mmu.c
+++ b/arch/x86/kvm/mmu/mmu.c
@@@ -3924,8 -3876,10 +3924,15 @@@ static bool kvm_faultin_pfn(struct kvm_
  			goto out_retry;
  	}
  
++<<<<<<< HEAD
 +	*pfn = __gfn_to_pfn_memslot(slot, gfn, false, NULL,
 +				    write, writable, hva);
++=======
+ 	fault->pfn = __gfn_to_pfn_memslot(slot, fault->gfn, false, NULL,
+ 					  fault->write, &fault->map_writable,
+ 					  &fault->hva);
+ 	return false;
++>>>>>>> a7cc099f2ec3 (KVM: x86/mmu: kvm_faultin_pfn has to return false if pfh is returned)
  
  out_retry:
  	*r = RET_PF_RETRY;
* Unmerged path arch/x86/kvm/mmu/mmu.c
