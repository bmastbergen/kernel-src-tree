sysfs: Fix regression when adding a file to an existing group

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-358.el8
commit-author Tyler Hicks <tyhicks@canonical.com>
commit d1753390274f7760e5b593cb657ea34f0617e559
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-358.el8/d1753390.failed

Commit 5f81880d5204 ("sysfs, kobject: allow creating kobject belonging
to arbitrary users") incorrectly changed the argument passed as the
parent parameter when calling sysfs_add_file_mode_ns(). This caused some
sysfs attribute files to not be added correctly to certain groups.

Fixes: 5f81880d5204 ("sysfs, kobject: allow creating kobject belonging to arbitrary users")
	Signed-off-by: Tyler Hicks <tyhicks@canonical.com>
	Reported-by: Heiner Kallweit <hkallweit1@gmail.com>
	Tested-by: Heiner Kallweit <hkallweit1@gmail.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit d1753390274f7760e5b593cb657ea34f0617e559)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/sysfs/file.c
diff --cc fs/sysfs/file.c
index b7acae7a668a,052e5ad9a4d2..000000000000
--- a/fs/sysfs/file.c
+++ b/fs/sysfs/file.c
@@@ -372,7 -372,9 +372,13 @@@ int sysfs_add_file_to_group(struct kobj
  	if (!parent)
  		return -ENOENT;
  
++<<<<<<< HEAD
 +	error = sysfs_add_file(parent, attr, false);
++=======
+ 	kobject_get_ownership(kobj, &uid, &gid);
+ 	error = sysfs_add_file_mode_ns(parent, attr, false,
+ 				       attr->mode, uid, gid, NULL);
++>>>>>>> d1753390274f (sysfs: Fix regression when adding a file to an existing group)
  	kernfs_put(parent);
  
  	return error;
* Unmerged path fs/sysfs/file.c
