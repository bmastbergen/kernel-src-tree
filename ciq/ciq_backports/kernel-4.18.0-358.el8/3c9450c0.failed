powerpc/perf: Fix missing is_sier_aviable() during build

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-358.el8
commit-author Madhavan Srinivasan <maddy@linux.ibm.com>
commit 3c9450c053f88e525b2db1e6990cdf34d14e7696
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-358.el8/3c9450c0.failed

Compilation error:
  arch/powerpc/perf/perf_regs.c:80:undefined reference to `.is_sier_available'

Currently is_sier_available() is part of core-book3s.c, which is added
to build based on CONFIG_PPC_PERF_CTRS.

A config with CONFIG_PERF_EVENTS and without CONFIG_PPC_PERF_CTRS will
have a build break because of missing is_sier_available().

In practice it only breaks when CONFIG_FSL_EMB_PERF_EVENT=n because
that also guards the usage of is_sier_available(). That only happens
with CONFIG_PPC_BOOK3E_64=y and CONFIG_FSL_SOC_BOOKE=n.

Patch adds is_sier_available() in asm/perf_event.h to fix the build
break for configs missing CONFIG_PPC_PERF_CTRS.

Fixes: 333804dc3b7a ("powerpc/perf: Update perf_regs structure to include SIER")
	Reported-by: Aneesh Kumar K.V <aneesh.kumar@linux.ibm.com>
	Signed-off-by: Madhavan Srinivasan <maddy@linux.ibm.com>
[mpe: Add detail about CONFIG_FSL_SOC_BOOKE]
	Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
Link: https://lore.kernel.org/r/20200614083604.302611-1-maddy@linux.ibm.com
(cherry picked from commit 3c9450c053f88e525b2db1e6990cdf34d14e7696)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/powerpc/include/asm/perf_event.h
diff --cc arch/powerpc/include/asm/perf_event.h
index 5c518366dab6,1e8b2e1ec1db..000000000000
--- a/arch/powerpc/include/asm/perf_event.h
+++ b/arch/powerpc/include/asm/perf_event.h
@@@ -17,7 -13,7 +17,11 @@@
  #ifdef CONFIG_PPC_PERF_CTRS
  #include <asm/perf_event_server.h>
  #else
++<<<<<<< HEAD
 +static inline unsigned long get_pmcs_ext_regs(int idx) { return 0; }
++=======
+ static inline bool is_sier_available(void) { return false; }
++>>>>>>> 3c9450c053f8 (powerpc/perf: Fix missing is_sier_aviable() during build)
  #endif
  
  #ifdef CONFIG_FSL_EMB_PERF_EVENT
* Unmerged path arch/powerpc/include/asm/perf_event.h
