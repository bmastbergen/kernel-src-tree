RDMA/core: Remove the kobject_uevent() NOP

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-358.el8
commit-author Jason Gunthorpe <jgg@nvidia.com>
commit d89eb509aaa36a08f983eac58b9fccd61ff3d375
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-358.el8/d89eb509.failed

This call does nothing because the ib_port kobj is nested under a struct
device kobject and the dev_uevent_filter() function of the struct device
blocks uevents for any children kobj's that are not also struct devices.

A uevent for the struct device will be triggered after
ib_setup_port_attrs() returns which causes udev to pick up all the deep
"attributes" which are implemented as kobjects nested under a struct
device and assign them to the udev object for the struct device:

 $ udevadm info -a /sys/class/infiniband/ibp0s9
     ATTR{ports/1/counters/excessive_buffer_overrun_errors}=="0"

Link: https://lore.kernel.org/r/49231c92c7d4c60686de18f7e20932d0c82160ee.1623427137.git.leonro@nvidia.com
	Signed-off-by: Leon Romanovsky <leonro@nvidia.com>
	Signed-off-by: Jason Gunthorpe <jgg@nvidia.com>
(cherry picked from commit d89eb509aaa36a08f983eac58b9fccd61ff3d375)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/core/sysfs.c
diff --cc drivers/infiniband/core/sysfs.c
index 1ae9eecb09be,14b838863b5d..000000000000
--- a/drivers/infiniband/core/sysfs.c
+++ b/drivers/infiniband/core/sysfs.c
@@@ -1372,12 -1398,31 +1372,32 @@@ int ib_setup_port_attrs(struct ib_core_
  	if (!coredev->ports_kobj)
  		return -ENOMEM;
  
 -	rdma_for_each_port (device, port_num) {
 -		struct ib_port_attr attr;
 -		struct ib_port *port;
 -
 -		ret = ib_query_port(device, port_num, &attr);
 +	rdma_for_each_port (device, port) {
 +		ret = add_port(coredev, port);
  		if (ret)
  			goto err_put;
++<<<<<<< HEAD
++=======
+ 
+ 		port = setup_port(coredev, port_num, &attr);
+ 		if (IS_ERR(port)) {
+ 			ret = PTR_ERR(port);
+ 			goto err_put;
+ 		}
+ 
+ 		ret = setup_gid_attrs(port, &attr);
+ 		if (ret)
+ 			goto err_put;
+ 
+ 		if (device->ops.init_port && is_full_dev) {
+ 			ret = device->ops.init_port(device, port_num,
+ 						    &port->kobj);
+ 			if (ret)
+ 				goto err_put;
+ 		}
++>>>>>>> d89eb509aaa3 (RDMA/core: Remove the kobject_uevent() NOP)
  	}
 +
  	return 0;
  
  err_put:
* Unmerged path drivers/infiniband/core/sysfs.c
