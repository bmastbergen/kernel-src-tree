scsi: qla2xxx: Fix use after free in debug code

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-358.el8
commit-author Dan Carpenter <dan.carpenter@oracle.com>
commit e3d2612f583ba6e234cb7fe4559132c8f28905f1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-358.el8/e3d2612f.failed

The sp->free(sp); call frees "sp" and then the debug code dereferences
it on the next line.  Swap the order.

Link: https://lore.kernel.org/r/20210803155625.GA22735@kili
Fixes: 84318a9f01ce ("scsi: qla2xxx: edif: Add send, receive, and accept for auth_els")
	Reviewed-by: Ewan D. Milne <emilne@redhat.com>
	Reviewed-by: Himanshu Madhani <himanshu.madhani@oracle.com>
	Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit e3d2612f583ba6e234cb7fe4559132c8f28905f1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/qla2xxx/qla_bsg.c
diff --cc drivers/scsi/qla2xxx/qla_bsg.c
index 921f5a78b4d1,4b5d28d89d69..000000000000
--- a/drivers/scsi/qla2xxx/qla_bsg.c
+++ b/drivers/scsi/qla2xxx/qla_bsg.c
@@@ -26,6 -25,10 +26,13 @@@ void qla2x00_bsg_job_done(srb_t *sp, in
  	struct bsg_job *bsg_job = sp->u.bsg_job;
  	struct fc_bsg_reply *bsg_reply = bsg_job->reply;
  
++<<<<<<< HEAD
++=======
+ 	ql_dbg(ql_dbg_user, sp->vha, 0x7009,
+ 	    "%s: sp hdl %x, result=%x bsg ptr %p\n",
+ 	    __func__, sp->handle, res, bsg_job);
+ 
++>>>>>>> e3d2612f583b (scsi: qla2xxx: Fix use after free in debug code)
  	sp->free(sp);
  
  	bsg_reply->result = res;
* Unmerged path drivers/scsi/qla2xxx/qla_bsg.c
