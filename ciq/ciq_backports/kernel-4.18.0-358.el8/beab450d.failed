NFS: Fix fscache invalidation in nfs_set_cache_invalid()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-358.el8
commit-author Trond Myklebust <trond.myklebust@hammerspace.com>
commit beab450d8ea93cdf4c6cb7714bdc31a9e0f34738
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-358.el8/beab450d.failed

Ensure that we invalidate the fscache before we strip the
NFS_INO_INVALID_DATA flag.

	Signed-off-by: Trond Myklebust <trond.myklebust@hammerspace.com>
(cherry picked from commit beab450d8ea93cdf4c6cb7714bdc31a9e0f34738)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/nfs/inode.c
diff --cc fs/nfs/inode.c
index de72d90fb089,ff737be559dc..000000000000
--- a/fs/nfs/inode.c
+++ b/fs/nfs/inode.c
@@@ -208,6 -221,10 +208,13 @@@ void nfs_set_cache_invalid(struct inod
  				| NFS_INO_INVALID_XATTR);
  	}
  
++<<<<<<< HEAD
++=======
+ 	if (!nfs_has_xattr_cache(nfsi))
+ 		flags &= ~NFS_INO_INVALID_XATTR;
+ 	if (flags & NFS_INO_INVALID_DATA)
+ 		nfs_fscache_invalidate(inode);
++>>>>>>> beab450d8ea9 (NFS: Fix fscache invalidation in nfs_set_cache_invalid())
  	if (inode->i_mapping->nrpages == 0)
  		flags &= ~(NFS_INO_INVALID_DATA|NFS_INO_DATA_INVAL_DEFER);
  	nfsi->cache_validity |= flags;
* Unmerged path fs/nfs/inode.c
