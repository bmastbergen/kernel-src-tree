cpuidle-haltpoll: return -ENODEV on modinit failure

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1127.el7
commit-author Joao Martins <joao.m.martins@oracle.com>
commit 5cc59f597c0666c6a7e1c67aac9063895949fd56
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1127.el7/5cc59f59.failed

When a user loads cpuidle-haltpoll on a non KVM guest the module will
successfully load, even though idle driver registration didn't take
place.

We should instead return -ENODEV signaling the user that the driver can't
be loaded, like other error paths in haltpoll_init().  An example of such
error paths is when we return -EBUSY when attempting to register an idle
driver when it had one already (e.g. intel_idle loads at boot and then we
attempt to insert module cpuidle-haltpoll).

Fixes: fa86ee90eb11 ("add cpuidle-haltpoll driver")
	Signed-off-by: Joao Martins <joao.m.martins@oracle.com>
	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit 5cc59f597c0666c6a7e1c67aac9063895949fd56)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/cpuidle/cpuidle-haltpoll.c
* Unmerged path drivers/cpuidle/cpuidle-haltpoll.c
* Unmerged path drivers/cpuidle/cpuidle-haltpoll.c
