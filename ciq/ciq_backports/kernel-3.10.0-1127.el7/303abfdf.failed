percpu: fix early calls for spinlock in pcpu_stats

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1127.el7
commit-author Dennis Zhou <dennisz@fb.com>
commit 303abfdf76ea41c228e8b3da73ed3807121a9ca6
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1127.el7/303abfdf.failed

From 2c06e795162cb306c9707ec51d3e1deadb37f573 Mon Sep 17 00:00:00 2001
From: Dennis Zhou <dennisz@fb.com>
Date: Wed, 21 Jun 2017 10:17:09 -0700

Commit 30a5b5367ef9 ("percpu: expose statistics about percpu memory via
debugfs") introduces percpu memory statistics. pcpu_stats_chunk_alloc
takes the spin lock and disables/enables irqs on creation of a chunk. Irqs
are not enabled when the first chunk is initialized and thus kernels are
failing to boot with kernel debugging enabled. Fixed by changing _irq to
_irqsave and _irqrestore.

Fixes: 30a5b5367ef9 ("percpu: expose statistics about percpu memory via debugfs")
	Signed-off-by: Dennis Zhou <dennisz@fb.com>
	Reported-by: Alexander Levin <alexander.levin@verizon.com>
	Signed-off-by: Tejun Heo <tj@kernel.org>
(cherry picked from commit 303abfdf76ea41c228e8b3da73ed3807121a9ca6)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	mm/percpu-internal.h
* Unmerged path mm/percpu-internal.h
* Unmerged path mm/percpu-internal.h
