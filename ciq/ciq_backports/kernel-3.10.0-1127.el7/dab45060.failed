netfilter: nf_tables: fix race when create new element in dynset

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1127.el7
commit-author Liping Zhang <zlpnobody@gmail.com>
commit dab45060a56a9732b027d2031c1b6100bc75eea2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1127.el7/dab45060.failed

Packets may race when create the new element in nft_hash_update:
       CPU0                 CPU1
  lookup_fast - fail     lookup_fast - fail
       new - ok             new - ok
     insert - ok         insert - fail(EEXIST)

So when race happened, we reuse the existing element. Otherwise,
these *racing* packets will not be handled properly.

Fixes: 22fe54d5fefc ("netfilter: nf_tables: add support for dynamic set updates")
	Signed-off-by: Liping Zhang <zlpnobody@gmail.com>
	Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org>
(cherry picked from commit dab45060a56a9732b027d2031c1b6100bc75eea2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/netfilter/nft_set_hash.c
* Unmerged path net/netfilter/nft_set_hash.c
* Unmerged path net/netfilter/nft_set_hash.c
