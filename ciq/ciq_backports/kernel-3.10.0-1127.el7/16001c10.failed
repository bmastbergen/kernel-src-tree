nvme: fix NULL pointer dereference in nvme_init_subsystem

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1127.el7
commit-author Israel Rukshin <israelr@mellanox.com>
commit 16001c10725e11b73b8518f42e414506bf73c291
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1127.el7/16001c10.failed

When using nvme-pci driver the nvmf_ctrl_options is NULL.
There is no need to check for discovery_nqn flag at non-fabrics controller.

Fixes: 181303d0 ("nvme-fabrics: allow duplicate connections to the discovery controller")
	Signed-off-by: Israel Rukshin <israelr@mellanox.com>
	Reviewed-by: Max Gurtovoy <maxg@mellanox.com>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
(cherry picked from commit 16001c10725e11b73b8518f42e414506bf73c291)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/nvme/host/core.c
diff --cc drivers/nvme/host/core.c
index 6b1fdef4a984,d6ca4598c027..000000000000
--- a/drivers/nvme/host/core.c
+++ b/drivers/nvme/host/core.c
@@@ -1979,7 -2208,8 +1979,12 @@@ static int nvme_init_subsystem(struct n
  		 * Verify that the subsystem actually supports multiple
  		 * controllers, else bail out.
  		 */
++<<<<<<< HEAD
 +		if (nvme_active_ctrls(found) && !(id->cmic & (1 << 1))) {
++=======
+ 		if (!(ctrl->opts && ctrl->opts->discovery_nqn) &&
+ 		    nvme_active_ctrls(found) && !(id->cmic & (1 << 1))) {
++>>>>>>> 16001c10725e (nvme: fix NULL pointer dereference in nvme_init_subsystem)
  			dev_err(ctrl->device,
  				"ignoring ctrl due to duplicate subnqn (%s).\n",
  				found->subnqn);
* Unmerged path drivers/nvme/host/core.c
