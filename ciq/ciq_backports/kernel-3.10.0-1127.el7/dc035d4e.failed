scsi: qla2xxx: Avoid that qla2x00_mem_free() crashes if called twice

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1127.el7
commit-author Bart Van Assche <bvanassche@acm.org>
commit dc035d4e934e586a663cbef0cf7ea3900e12bb7d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1127.el7/dc035d4e.failed

Clear each pointer after having freed memory such that it becomes safe to
call qla2x00_mem_free() twice.

	Cc: Himanshu Madhani <hmadhani@marvell.com>
	Cc: Giridhar Malavali <gmalavali@marvell.com>
	Signed-off-by: Bart Van Assche <bvanassche@acm.org>
	Acked-by: Himanshu Madhani <hmadhani@marvell.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit dc035d4e934e586a663cbef0cf7ea3900e12bb7d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/qla2xxx/qla_os.c
diff --cc drivers/scsi/qla2xxx/qla_os.c
index 60e3100ba93c,6d5dfe12760e..000000000000
--- a/drivers/scsi/qla2xxx/qla_os.c
+++ b/drivers/scsi/qla2xxx/qla_os.c
@@@ -4769,6 -4712,12 +4769,15 @@@ qla2x00_mem_free(struct qla_hw_data *ha
  		    ha->sfp_data_dma);
  	ha->sfp_data = NULL;
  
++<<<<<<< HEAD
++=======
+ 	if (ha->flt)
+ 		dma_free_coherent(&ha->pdev->dev, SFP_DEV_SIZE,
+ 		    ha->flt, ha->flt_dma);
+ 	ha->flt = NULL;
+ 	ha->flt_dma = 0;
+ 
++>>>>>>> dc035d4e934e (scsi: qla2xxx: Avoid that qla2x00_mem_free() crashes if called twice)
  	if (ha->ms_iocb)
  		dma_pool_free(ha->s_dma_pool, ha->ms_iocb, ha->ms_iocb_dma);
  	ha->ms_iocb = NULL;
* Unmerged path drivers/scsi/qla2xxx/qla_os.c
