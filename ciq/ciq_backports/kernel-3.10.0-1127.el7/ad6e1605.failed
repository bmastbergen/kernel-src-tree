EDAC, skx_edac: Add address translation for non-volatile DIMMs

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1127.el7
commit-author Qiuxu Zhuo <qiuxu.zhuo@intel.com>
commit ad6e16059d8e00de0887885db11d87cba0bd1512
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1127.el7/ad6e1605.failed

Currently, this driver doesn't support address translation for
non-volatile DIMMs.

The ACPI ADXL DSM method provides address translation for both volatile
and non-volatile DIMMs. Enable it to use the ACPI DSM methods if they
are supported and there are non-volatile DIMMs populated on the system.

Co-developed-by: Tony Luck <tony.luck@intel.com>
	Signed-off-by: Qiuxu Zhuo <qiuxu.zhuo@intel.com>
	Signed-off-by: Borislav Petkov <bp@suse.de>
CC: Mauro Carvalho Chehab <mchehab@kernel.org>
CC: arozansk@redhat.com
CC: linux-edac <linux-edac@vger.kernel.org>
Link: http://lkml.kernel.org/r/1540106336-5212-1-git-send-email-qiuxu.zhuo@intel.com
(cherry picked from commit ad6e16059d8e00de0887885db11d87cba0bd1512)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/edac/skx_edac.c
diff --cc drivers/edac/skx_edac.c
index d8e46bcf175b,a99ea61dad32..000000000000
--- a/drivers/edac/skx_edac.c
+++ b/drivers/edac/skx_edac.c
@@@ -32,9 -33,10 +33,14 @@@
  #include <asm/processor.h>
  #include <asm/mce.h>
  
 -#include "edac_module.h"
 +#include "edac_core.h"
  
++<<<<<<< HEAD
 +#define SKX_REVISION    " Ver: 1.0 "
++=======
+ #define EDAC_MOD_STR    "skx_edac"
+ #define MSG_SIZE	1024
++>>>>>>> ad6e16059d8e (EDAC, skx_edac: Add address translation for non-volatile DIMMs)
  
  /*
   * Debug macros
diff --git a/drivers/edac/Kconfig b/drivers/edac/Kconfig
index c0b5f019764b..55d034ed9618 100644
--- a/drivers/edac/Kconfig
+++ b/drivers/edac/Kconfig
@@ -265,6 +265,7 @@ config EDAC_SKX
 	depends on EDAC_MM_EDAC && PCI && X86_64 && X86_MCE_INTEL
 	depends on PCI_MMCONFIG
 	select DMI
+	select ACPI_ADXL
 	help
 	  Support for error detection and correction the Intel
 	  Skylake server Integrated Memory Controllers. If your
* Unmerged path drivers/edac/skx_edac.c
