x86/ptrace: run seccomp after ptrace

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1127.el7
commit-author Kees Cook <keescook@chromium.org>
commit 93e35efb8de45393cf61ed07f7b407629bf698ea
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1127.el7/93e35efb.failed

This moves seccomp after ptrace on x86 to that seccomp can catch changes
made by ptrace. Emulation should skip the rest of processing too.

We can get rid of test_thread_flag because there's no longer any
opportunity for seccomp to mess with ptrace state before invoking
ptrace.

	Suggested-by: Andy Lutomirski <luto@kernel.org>
	Signed-off-by: Kees Cook <keescook@chromium.org>
	Cc: x86@kernel.org
	Cc: Andy Lutomirski <luto@kernel.org>
(cherry picked from commit 93e35efb8de45393cf61ed07f7b407629bf698ea)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/entry/common.c
* Unmerged path arch/x86/entry/common.c
* Unmerged path arch/x86/entry/common.c
