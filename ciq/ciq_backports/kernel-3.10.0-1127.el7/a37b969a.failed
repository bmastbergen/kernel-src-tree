cpuidle: poll_state: Add time limit to poll_idle()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1127.el7
commit-author Rafael J. Wysocki <rafael.j.wysocki@intel.com>
commit a37b969a61c1efcd16da9c9ab3b237235c48560c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1127.el7/a37b969a.failed

If poll_idle() is allowed to spin until need_resched() returns 'true',
it may actually spin for a much longer time than expected by the idle
governor, since set_tsk_need_resched() is not always called by the
timer interrupt handler.  If that happens, the CPU may spend much
more time than anticipated in the "polling" state.

To prevent that from happening, limit the time of the spinning loop
in poll_idle().

	Suggested-by: Peter Zijlstra <peterz@infradead.org>
	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
	Tested-by: Doug Smythies <dsmythies@telus.net>
(cherry picked from commit a37b969a61c1efcd16da9c9ab3b237235c48560c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/cpuidle/poll_state.c
* Unmerged path drivers/cpuidle/poll_state.c
* Unmerged path drivers/cpuidle/poll_state.c
