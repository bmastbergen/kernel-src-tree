net/mlx5e: Take common TIR context settings into a function

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1127.el7
Rebuild_CHGLOG: - [netdrv] mlx5e: Take common TIR context settings into a function (Alaa Hleihel) [1710423]
Rebuild_FUZZ: 96.49%
commit-author Tariq Toukan <tariqt@mellanox.com>
commit 7306c274e7297307aceae99a8cb7f2a341b484e1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1127.el7/7306c274.failed

Many TIR context settings are common to different TIR types,
take them into a common function.

	Signed-off-by: Tariq Toukan <tariqt@mellanox.com>
	Reviewed-by: Aya Levin <ayal@mellanox.com>
	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
(cherry picked from commit 7306c274e7297307aceae99a8cb7f2a341b484e1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/en_main.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/en_main.c
index f8d193e3057c,d713ab2e7a2d..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_main.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_main.c
@@@ -2770,22 -2674,6 +2770,25 @@@ free_in
  	return err;
  }
  
++<<<<<<< HEAD
 +static void mlx5e_build_inner_indir_tir_ctx(struct mlx5e_priv *priv,
 +					    enum mlx5e_traffic_types tt,
 +					    u32 *tirc)
 +{
 +	MLX5_SET(tirc, tirc, transport_domain, priv->mdev->mlx5e_res.td.tdn);
 +
 +	mlx5e_build_tir_ctx_lro(&priv->channels.params, tirc);
 +
 +	MLX5_SET(tirc, tirc, disp_type, MLX5_TIRC_DISP_TYPE_INDIRECT);
 +	MLX5_SET(tirc, tirc, indirect_table, priv->indir_rqt.rqtn);
 +	MLX5_SET(tirc, tirc, tunneled_offload_en, 0x1);
 +
 +	mlx5e_build_indir_tir_ctx_hash(&priv->channels.params,
 +				       &tirc_default_config[tt], tirc, true);
 +}
 +
++=======
++>>>>>>> 7306c274e729 (net/mlx5e: Take common TIR context settings into a function)
  static int mlx5e_set_mtu(struct mlx5_core_dev *mdev,
  			 struct mlx5e_params *params, u16 mtu)
  {
@@@ -3173,14 -3108,8 +3186,19 @@@ static void mlx5e_build_indir_tir_ctx(s
  				      enum mlx5e_traffic_types tt,
  				      u32 *tirc)
  {
++<<<<<<< HEAD
 +	MLX5_SET(tirc, tirc, transport_domain, priv->mdev->mlx5e_res.td.tdn);
 +
 +	mlx5e_build_tir_ctx_lro(&priv->channels.params, tirc);
 +
 +	MLX5_SET(tirc, tirc, disp_type, MLX5_TIRC_DISP_TYPE_INDIRECT);
 +	MLX5_SET(tirc, tirc, indirect_table, priv->indir_rqt.rqtn);
 +
 +	mlx5e_build_indir_tir_ctx_hash(&priv->channels.params,
++=======
+ 	mlx5e_build_indir_tir_ctx_common(priv, priv->indir_rqt.rqtn, tirc);
+ 	mlx5e_build_indir_tir_ctx_hash(&priv->rss_params,
++>>>>>>> 7306c274e729 (net/mlx5e: Take common TIR context settings into a function)
  				       &tirc_default_config[tt], tirc, false);
  }
  
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en_main.c
