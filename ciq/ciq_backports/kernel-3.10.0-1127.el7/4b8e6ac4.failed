virtio_net: fix error return code in virtnet_probe()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1127.el7
commit-author Wei Yongjun <weiyongjun1@huawei.com>
commit 4b8e6ac41a594ea67ded6af6af5935f03221ea4c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1127.el7/4b8e6ac4.failed

Fix to return a negative error code from the failover create fail error
handling case instead of 0, as done elsewhere in this function.

Fixes: ba5e4426e80e ("virtio_net: Extend virtio to use VF datapath when available")
	Signed-off-by: Wei Yongjun <weiyongjun1@huawei.com>
	Acked-by: Jason Wang <jasowang@redhat.com>
	Acked-by: Michael S. Tsirkin <mst@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 4b8e6ac41a594ea67ded6af6af5935f03221ea4c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/virtio_net.c
diff --cc drivers/net/virtio_net.c
index 5660f4230ca4,2d55e2af7cb6..000000000000
--- a/drivers/net/virtio_net.c
+++ b/drivers/net/virtio_net.c
@@@ -1676,6 -2927,20 +1676,19 @@@ static int virtnet_probe(struct virtio_
  	netif_set_real_num_tx_queues(dev, vi->curr_queue_pairs);
  	netif_set_real_num_rx_queues(dev, vi->curr_queue_pairs);
  
++<<<<<<< HEAD
++=======
+ 	virtnet_init_settings(dev);
+ 
+ 	if (virtio_has_feature(vdev, VIRTIO_NET_F_STANDBY)) {
+ 		vi->failover = net_failover_create(vi->dev);
+ 		if (IS_ERR(vi->failover)) {
+ 			err = PTR_ERR(vi->failover);
+ 			goto free_vqs;
+ 		}
+ 	}
+ 
++>>>>>>> 4b8e6ac41a59 (virtio_net: fix error return code in virtnet_probe())
  	err = register_netdev(dev);
  	if (err) {
  		pr_debug("virtio_net: registering device failed\n");
* Unmerged path drivers/net/virtio_net.c
