scsi: qla2xxx: Fix different size DMA Alloc/Unmap

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1127.el7
commit-author Quinn Tran <qutran@marvell.com>
commit d376dbda187317d06d3a2d495b43a7983e4a3250
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1127.el7/d376dbda.failed

[   17.177276] qla2xxx 0000:05:00.0: DMA-API: device driver frees DMA memory
    with different size [device address=0x00000006198b0000] [map size=32784 bytes]
    [unmap size=8208 bytes]
[   17.177390] RIP: 0010:check_unmap+0x7a2/0x1750
[   17.177425] Call Trace:
[   17.177438]  debug_dma_free_coherent+0x1b5/0x2d5
[   17.177470]  dma_free_attrs+0x7f/0x140
[   17.177489]  qla24xx_sp_unmap+0x1e2/0x610 [qla2xxx]
[   17.177509]  qla24xx_async_gnnft_done+0x9c6/0x17d0 [qla2xxx]
[   17.177535]  qla2x00_do_work+0x514/0x2200 [qla2xxx]

Fixes: b5f3bc39a0e8 ("scsi: qla2xxx: Fix inconsistent DMA mem alloc/free")
	Signed-off-by: Quinn Tran <qutran@marvell.com>
	Signed-off-by: Himanshu Madhani <hmadhani@marvell.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit d376dbda187317d06d3a2d495b43a7983e4a3250)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/qla2xxx/qla_gs.c
diff --cc drivers/scsi/qla2xxx/qla_gs.c
index 9f8e2fb16d5e,ebf223cfebbc..000000000000
--- a/drivers/scsi/qla2xxx/qla_gs.c
+++ b/drivers/scsi/qla2xxx/qla_gs.c
@@@ -4173,10 -4148,11 +4173,18 @@@ int qla24xx_async_gpnft(scsi_qla_host_
  			((vha->hw->max_fibre_devices - 1) *
  			    sizeof(struct ct_sns_gpn_ft_data));
  
++<<<<<<< HEAD
 +		sp->u.iocb_cmd.u.ctarg.rsp = dma_zalloc_coherent(
 +			&vha->hw->pdev->dev, rspsz,
 +			&sp->u.iocb_cmd.u.ctarg.rsp_dma, GFP_KERNEL);
 +		sp->u.iocb_cmd.u.ctarg.rsp_allocated_size = sizeof(struct ct_sns_pkt);
++=======
+ 		sp->u.iocb_cmd.u.ctarg.rsp = dma_alloc_coherent(&vha->hw->pdev->dev,
+ 								rspsz,
+ 								&sp->u.iocb_cmd.u.ctarg.rsp_dma,
+ 								GFP_KERNEL);
+ 		sp->u.iocb_cmd.u.ctarg.rsp_allocated_size = rspsz;
++>>>>>>> d376dbda1873 (scsi: qla2xxx: Fix different size DMA Alloc/Unmap)
  		if (!sp->u.iocb_cmd.u.ctarg.rsp) {
  			ql_log(ql_log_warn, vha, 0xffff,
  			    "Failed to allocate ct_sns request.\n");
* Unmerged path drivers/scsi/qla2xxx/qla_gs.c
