scsi: lpfc: Correct __lpfc_sli_issue_iocb_s4 lockdep check

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1127.el7
commit-author James Smart <jsmart2021@gmail.com>
commit cda7fa18653c47865d2a048d5bfa211d464b23e1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1127.el7/cda7fa18.failed

The outer routine lpfc_sli_issue_iocb(), which decomposes into the
SLI3 (s3) or SLI4 (s4) subroutines takes out the locks. For s3, it takes
out the hbalock. For s4, it takes out the ring_lock. The lockdep check in
the s3 and s4 subroutines both check hbalock, which is incorrect for s4.

Revise the s4 subroutine to lockdep check the ring_lock.

	Reported-by: Bart Van Assche <bvanassche@acm.org>
	Signed-off-by: Dick Kennedy <dick.kennedy@broadcom.com>
	Signed-off-by: James Smart <jsmart2021@gmail.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit cda7fa18653c47865d2a048d5bfa211d464b23e1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/lpfc/lpfc_sli.c
diff --cc drivers/scsi/lpfc/lpfc_sli.c
index 5cf82ec784e9,f29f7cbb959d..000000000000
--- a/drivers/scsi/lpfc/lpfc_sli.c
+++ b/drivers/scsi/lpfc/lpfc_sli.c
@@@ -9847,6 -9881,8 +9847,11 @@@ __lpfc_sli_issue_iocb_s4(struct lpfc_hb
  	 * The WQE can be either 64 or 128 bytes,
  	 */
  
++<<<<<<< HEAD
++=======
+ 	lockdep_assert_held(&pring->ring_lock);
+ 
++>>>>>>> cda7fa18653c (scsi: lpfc: Correct __lpfc_sli_issue_iocb_s4 lockdep check)
  	if (piocb->sli4_xritag == NO_XRI) {
  		if (piocb->iocb.ulpCommand == CMD_ABORT_XRI_CN ||
  		    piocb->iocb.ulpCommand == CMD_CLOSE_XRI_CN)
* Unmerged path drivers/scsi/lpfc/lpfc_sli.c
