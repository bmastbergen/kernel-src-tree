virtio_scsi: support multi hw queue of blk-mq

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1127.el7
commit-author Ming Lei <ming.lei@canonical.com>
commit ccbedf117f015d4f415130069b47d63c359bc110
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1127.el7/ccbedf11.failed

Since virtio_scsi has supported multi virtqueue already,
it is natural to map the virtque to hw-queue of blk-mq.

	Signed-off-by: Ming Lei <ming.lei@canonical.com>
	Reviewed-by: Paolo Bonzini <pbonzini@redhat.com>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
(cherry picked from commit ccbedf117f015d4f415130069b47d63c359bc110)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/virtio_scsi.c
diff --cc drivers/scsi/virtio_scsi.c
index 3143e3e78035,8e40347da0a8..000000000000
--- a/drivers/scsi/virtio_scsi.c
+++ b/drivers/scsi/virtio_scsi.c
@@@ -995,6 -995,17 +1009,20 @@@ static int virtscsi_probe(struct virtio
  	shost->max_id = num_targets;
  	shost->max_channel = 0;
  	shost->max_cmd_len = VIRTIO_SCSI_CDB_SIZE;
++<<<<<<< HEAD
++=======
+ 	shost->nr_hw_queues = num_queues;
+ 
+ 	if (virtio_has_feature(vdev, VIRTIO_SCSI_F_T10_PI)) {
+ 		host_prot = SHOST_DIF_TYPE1_PROTECTION | SHOST_DIF_TYPE2_PROTECTION |
+ 			    SHOST_DIF_TYPE3_PROTECTION | SHOST_DIX_TYPE1_PROTECTION |
+ 			    SHOST_DIX_TYPE2_PROTECTION | SHOST_DIX_TYPE3_PROTECTION;
+ 
+ 		scsi_host_set_prot(shost, host_prot);
+ 		scsi_host_set_guard(shost, SHOST_DIX_GUARD_CRC);
+ 	}
+ 
++>>>>>>> ccbedf117f01 (virtio_scsi: support multi hw queue of blk-mq)
  	err = scsi_add_host(shost, &vdev->dev);
  	if (err)
  		goto scsi_add_host_failed;
* Unmerged path drivers/scsi/virtio_scsi.c
