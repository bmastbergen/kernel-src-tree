intel_th: msu: Release resources on read error

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1127.el7
commit-author Laurent FERT <laurent.fert@intel.com>
commit 2bed074aade2caa9c350121837c55189a8fd197e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1127.el7/2bed074a.failed

Right now, reading from msc character device will leak its's user count
on read error.

This patch makes sure resources are released when there is no data left
to read from the buffer.

	Signed-off-by: Laurent FERT <laurent.fert@intel.com>
	Signed-off-by: Alexander Shishkin <alexander.shishkin@linux.intel.com>
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 2bed074aade2caa9c350121837c55189a8fd197e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/hwtracing/intel_th/msu.c
* Unmerged path drivers/hwtracing/intel_th/msu.c
* Unmerged path drivers/hwtracing/intel_th/msu.c
