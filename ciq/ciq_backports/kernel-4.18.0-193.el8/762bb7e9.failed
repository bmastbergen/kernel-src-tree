NFS/flexfiles: Fix up sparse RCU annotations

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Trond Myklebust <trond.myklebust@hammerspace.com>
commit 762bb7e97351b37c6267509d5806b4c151250ab1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/762bb7e9.failed

	Signed-off-by: Trond Myklebust <trond.myklebust@hammerspace.com>
(cherry picked from commit 762bb7e97351b37c6267509d5806b4c151250ab1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/nfs/flexfilelayout/flexfilelayout.c
diff --cc fs/nfs/flexfilelayout/flexfilelayout.c
index e36367f79c13,244a03c22b31..000000000000
--- a/fs/nfs/flexfilelayout/flexfilelayout.c
+++ b/fs/nfs/flexfilelayout/flexfilelayout.c
@@@ -411,9 -409,8 +411,13 @@@ ff_layout_alloc_lseg(struct pnfs_layout
  
  	for (i = 0; i < fls->mirror_array_cnt; i++) {
  		struct nfs4_ff_layout_mirror *mirror;
 +		struct auth_cred acred = {};
 +		struct rpc_cred	__rcu *cred;
  		struct cred *kcred;
++<<<<<<< HEAD
++=======
+ 		const struct cred __rcu *cred;
++>>>>>>> 762bb7e97351 (NFS/flexfiles: Fix up sparse RCU annotations)
  		kuid_t uid;
  		kgid_t gid;
  		u32 ds_count, fh_count, id;
@@@ -504,15 -501,7 +508,19 @@@
  			goto out_err_free;
  		kcred->fsuid = uid;
  		kcred->fsgid = gid;
++<<<<<<< HEAD
 +		acred.cred = kcred;
 +
 +		/* find the cred for it */
 +		rcu_assign_pointer(cred, rpc_lookup_generic_cred(&acred, 0, gfp_flags));
 +		put_cred(kcred);
 +		if (IS_ERR(cred)) {
 +			rc = PTR_ERR(cred);
 +			goto out_err_free;
 +		}
++=======
+ 		cred = RCU_INITIALIZER(kcred);
++>>>>>>> 762bb7e97351 (NFS/flexfiles: Fix up sparse RCU annotations)
  
  		if (lgr->range.iomode == IOMODE_READ)
  			rcu_assign_pointer(fls->mirror_array[i]->ro_cred, cred);
* Unmerged path fs/nfs/flexfilelayout/flexfilelayout.c
