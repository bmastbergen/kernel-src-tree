selftests: bpf: don't depend on hardcoded perf sample_freq

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Stanislav Fomichev <sdf@google.com>
commit b4b6aa83433ea4675d4ba1be56774623db81f14f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/b4b6aa83.failed

When running stacktrace_build_id_nmi, try to query
kernel.perf_event_max_sample_rate sysctl and use it as a sample_freq.
If there was an error reading sysctl, fallback to 5000.

kernel.perf_event_max_sample_rate sysctl can drift and/or can be
adjusted by the perf tool, so assuming a fixed number might be
problematic on a long running machine.

	Signed-off-by: Stanislav Fomichev <sdf@google.com>
	Signed-off-by: Alexei Starovoitov <ast@kernel.org>
(cherry picked from commit b4b6aa83433ea4675d4ba1be56774623db81f14f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/testing/selftests/bpf/prog_tests/stacktrace_build_id_nmi.c
* Unmerged path tools/testing/selftests/bpf/prog_tests/stacktrace_build_id_nmi.c
* Unmerged path tools/testing/selftests/bpf/prog_tests/stacktrace_build_id_nmi.c
