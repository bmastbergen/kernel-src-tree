init/Kconfig: add CONFIG_CC_CAN_LINK

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Masahiro Yamada <yamada.masahiro@socionext.com>
commit 1a927fd347ebb3c02046150ee489d4fe4e6b9e81
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/1a927fd3.failed

Currently, scripts/cc-can-link.sh is run just for BPFILTER_UMH, but
defining CC_CAN_LINK will be useful in other places.

	Signed-off-by: Masahiro Yamada <yamada.masahiro@socionext.com>
(cherry picked from commit 1a927fd347ebb3c02046150ee489d4fe4e6b9e81)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	init/Kconfig
diff --cc init/Kconfig
index 3db8649315f8,2e9813daa2c1..000000000000
--- a/init/Kconfig
+++ b/init/Kconfig
@@@ -23,6 -24,28 +23,31 @@@ config CLANG_VERSIO
  	int
  	default $(shell,$(srctree)/scripts/clang-version.sh $(CC))
  
++<<<<<<< HEAD
++=======
+ config CC_CAN_LINK
+ 	def_bool $(success,$(srctree)/scripts/cc-can-link.sh $(CC))
+ 
+ config CC_HAS_ASM_GOTO
+ 	def_bool $(success,$(srctree)/scripts/gcc-goto.sh $(CC))
+ 
+ config CC_HAS_WARN_MAYBE_UNINITIALIZED
+ 	def_bool $(cc-option,-Wmaybe-uninitialized)
+ 	help
+ 	  GCC >= 4.7 supports this option.
+ 
+ config CC_DISABLE_WARN_MAYBE_UNINITIALIZED
+ 	bool
+ 	depends on CC_HAS_WARN_MAYBE_UNINITIALIZED
+ 	default CC_IS_GCC && GCC_VERSION < 40900  # unreliable for GCC < 4.9
+ 	help
+ 	  GCC's -Wmaybe-uninitialized is not reliable by definition.
+ 	  Lots of false positive warnings are produced in some cases.
+ 
+ 	  If this option is enabled, -Wno-maybe-uninitialzed is passed
+ 	  to the compiler to suppress maybe-uninitialized warnings.
+ 
++>>>>>>> 1a927fd347eb (init/Kconfig: add CONFIG_CC_CAN_LINK)
  config CONSTRUCTORS
  	bool
  	depends on !UML
* Unmerged path init/Kconfig
diff --git a/net/bpfilter/Kconfig b/net/bpfilter/Kconfig
index e558b46596c4..ef8e73709cd8 100644
--- a/net/bpfilter/Kconfig
+++ b/net/bpfilter/Kconfig
@@ -8,7 +8,7 @@ menuconfig BPFILTER
 if BPFILTER
 config BPFILTER_UMH
 	tristate "bpfilter kernel module with user mode helper"
-	depends on $(success,$(srctree)/scripts/cc-can-link.sh $(CC))
+	depends on CC_CAN_LINK
 	default m
 	help
 	  This builds bpfilter kernel module with embedded user mode helper
