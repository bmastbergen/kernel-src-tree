selftests/bpf: switch BPF_ANNOTATE_KV_PAIR tests to BTF-defined maps

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Andrii Nakryiko <andriin@fb.com>
commit f654407481e9bbba7039e939163ef60f9d5e43ba
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/f6544074.failed

Switch tests that already rely on BTF to BTF-defined map definitions.

	Signed-off-by: Andrii Nakryiko <andriin@fb.com>
	Acked-by: Song Liu <songliubraving@fb.com>
	Signed-off-by: Daniel Borkmann <daniel@iogearbox.net>
(cherry picked from commit f654407481e9bbba7039e939163ef60f9d5e43ba)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/testing/selftests/bpf/progs/test_map_lock.c
#	tools/testing/selftests/bpf/progs/test_send_signal_kern.c
#	tools/testing/selftests/bpf/progs/test_sock_fields_kern.c
#	tools/testing/selftests/bpf/progs/test_spin_lock.c
* Unmerged path tools/testing/selftests/bpf/progs/test_map_lock.c
* Unmerged path tools/testing/selftests/bpf/progs/test_send_signal_kern.c
* Unmerged path tools/testing/selftests/bpf/progs/test_sock_fields_kern.c
* Unmerged path tools/testing/selftests/bpf/progs/test_spin_lock.c
diff --git a/tools/testing/selftests/bpf/netcnt_prog.c b/tools/testing/selftests/bpf/netcnt_prog.c
index 9f741e69cebe..a25c82a5b7c8 100644
--- a/tools/testing/selftests/bpf/netcnt_prog.c
+++ b/tools/testing/selftests/bpf/netcnt_prog.c
@@ -10,24 +10,22 @@
 #define REFRESH_TIME_NS	100000000
 #define NS_PER_SEC	1000000000
 
-struct bpf_map_def SEC("maps") percpu_netcnt = {
+struct {
+	__u32 type;
+	struct bpf_cgroup_storage_key *key;
+	struct percpu_net_cnt *value;
+} percpu_netcnt SEC(".maps") = {
 	.type = BPF_MAP_TYPE_PERCPU_CGROUP_STORAGE,
-	.key_size = sizeof(struct bpf_cgroup_storage_key),
-	.value_size = sizeof(struct percpu_net_cnt),
 };
 
-BPF_ANNOTATE_KV_PAIR(percpu_netcnt, struct bpf_cgroup_storage_key,
-		     struct percpu_net_cnt);
-
-struct bpf_map_def SEC("maps") netcnt = {
+struct {
+	__u32 type;
+	struct bpf_cgroup_storage_key *key;
+	struct net_cnt *value;
+} netcnt SEC(".maps") = {
 	.type = BPF_MAP_TYPE_CGROUP_STORAGE,
-	.key_size = sizeof(struct bpf_cgroup_storage_key),
-	.value_size = sizeof(struct net_cnt),
 };
 
-BPF_ANNOTATE_KV_PAIR(netcnt, struct bpf_cgroup_storage_key,
-		     struct net_cnt);
-
 SEC("cgroup/skb")
 int bpf_nextcnt(struct __sk_buff *skb)
 {
* Unmerged path tools/testing/selftests/bpf/progs/test_map_lock.c
* Unmerged path tools/testing/selftests/bpf/progs/test_send_signal_kern.c
* Unmerged path tools/testing/selftests/bpf/progs/test_sock_fields_kern.c
* Unmerged path tools/testing/selftests/bpf/progs/test_spin_lock.c
