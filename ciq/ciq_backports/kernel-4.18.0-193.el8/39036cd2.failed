arch: add pidfd and io_uring syscalls everywhere

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Arnd Bergmann <arnd@arndb.de>
commit 39036cd2727395c3369b1051005da74059a85317
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/39036cd2.failed

Add the io_uring and pidfd_send_signal system calls to all architectures.

These system calls are designed to handle both native and compat tasks,
so all entries are the same across architectures, only arm-compat and
the generic tale still use an old format.

	Acked-by: Michael Ellerman <mpe@ellerman.id.au> (powerpc)
	Acked-by: Heiko Carstens <heiko.carstens@de.ibm.com> (s390)
	Acked-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Arnd Bergmann <arnd@arndb.de>
(cherry picked from commit 39036cd2727395c3369b1051005da74059a85317)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/alpha/kernel/syscalls/syscall.tbl
#	arch/arm/tools/syscall.tbl
#	arch/arm64/include/asm/unistd.h
#	arch/arm64/include/asm/unistd32.h
#	arch/ia64/kernel/syscalls/syscall.tbl
#	arch/m68k/kernel/syscalls/syscall.tbl
#	arch/microblaze/kernel/syscalls/syscall.tbl
#	arch/mips/kernel/syscalls/syscall_n32.tbl
#	arch/mips/kernel/syscalls/syscall_n64.tbl
#	arch/mips/kernel/syscalls/syscall_o32.tbl
#	arch/parisc/kernel/syscalls/syscall.tbl
#	arch/powerpc/kernel/syscalls/syscall.tbl
#	arch/s390/kernel/syscalls/syscall.tbl
#	arch/sh/kernel/syscalls/syscall.tbl
#	arch/sparc/kernel/syscalls/syscall.tbl
#	arch/xtensa/kernel/syscalls/syscall.tbl
diff --cc arch/arm/tools/syscall.tbl
index fbc74b5fa3ed,0393917eaa57..000000000000
--- a/arch/arm/tools/syscall.tbl
+++ b/arch/arm/tools/syscall.tbl
@@@ -413,3 -413,31 +413,34 @@@
  396	common	pkey_free		sys_pkey_free
  397	common	statx			sys_statx
  398	common	rseq			sys_rseq
++<<<<<<< HEAD
++=======
+ 399	common	io_pgetevents		sys_io_pgetevents_time32
+ 400	common	migrate_pages		sys_migrate_pages
+ 401	common	kexec_file_load		sys_kexec_file_load
+ # 402 is unused
+ 403	common	clock_gettime64			sys_clock_gettime
+ 404	common	clock_settime64			sys_clock_settime
+ 405	common	clock_adjtime64			sys_clock_adjtime
+ 406	common	clock_getres_time64		sys_clock_getres
+ 407	common	clock_nanosleep_time64		sys_clock_nanosleep
+ 408	common	timer_gettime64			sys_timer_gettime
+ 409	common	timer_settime64			sys_timer_settime
+ 410	common	timerfd_gettime64		sys_timerfd_gettime
+ 411	common	timerfd_settime64		sys_timerfd_settime
+ 412	common	utimensat_time64		sys_utimensat
+ 413	common	pselect6_time64			sys_pselect6
+ 414	common	ppoll_time64			sys_ppoll
+ 416	common	io_pgetevents_time64		sys_io_pgetevents
+ 417	common	recvmmsg_time64			sys_recvmmsg
+ 418	common	mq_timedsend_time64		sys_mq_timedsend
+ 419	common	mq_timedreceive_time64		sys_mq_timedreceive
+ 420	common	semtimedop_time64		sys_semtimedop
+ 421	common	rt_sigtimedwait_time64		sys_rt_sigtimedwait
+ 422	common	futex_time64			sys_futex
+ 423	common	sched_rr_get_interval_time64	sys_sched_rr_get_interval
+ 424	common	pidfd_send_signal		sys_pidfd_send_signal
+ 425	common	io_uring_setup			sys_io_uring_setup
+ 426	common	io_uring_enter			sys_io_uring_enter
+ 427	common	io_uring_register		sys_io_uring_register
++>>>>>>> 39036cd27273 (arch: add pidfd and io_uring syscalls everywhere)
diff --cc arch/arm64/include/asm/unistd.h
index e0d0f5b856e7,f2a83ff6b73c..000000000000
--- a/arch/arm64/include/asm/unistd.h
+++ b/arch/arm64/include/asm/unistd.h
@@@ -40,10 -40,11 +40,14 @@@
   * The following SVCs are ARM private.
   */
  #define __ARM_NR_COMPAT_BASE		0x0f0000
 -#define __ARM_NR_compat_cacheflush	(__ARM_NR_COMPAT_BASE + 2)
 -#define __ARM_NR_compat_set_tls		(__ARM_NR_COMPAT_BASE + 5)
 -#define __ARM_NR_COMPAT_END		(__ARM_NR_COMPAT_BASE + 0x800)
 +#define __ARM_NR_compat_cacheflush	(__ARM_NR_COMPAT_BASE+2)
 +#define __ARM_NR_compat_set_tls		(__ARM_NR_COMPAT_BASE+5)
  
++<<<<<<< HEAD
 +#define __NR_compat_syscalls		399
++=======
+ #define __NR_compat_syscalls		428
++>>>>>>> 39036cd27273 (arch: add pidfd and io_uring syscalls everywhere)
  #endif
  
  #define __ARCH_WANT_SYS_CLONE
diff --cc arch/arm64/include/asm/unistd32.h
index 2cd6dcf8d246,23f1a44acada..000000000000
--- a/arch/arm64/include/asm/unistd32.h
+++ b/arch/arm64/include/asm/unistd32.h
@@@ -819,6 -819,61 +819,64 @@@ __SYSCALL(__NR_pkey_free, sys_pkey_free
  __SYSCALL(__NR_statx, sys_statx)
  #define __NR_rseq 398
  __SYSCALL(__NR_rseq, sys_rseq)
++<<<<<<< HEAD
++=======
+ #define __NR_io_pgetevents 399
+ __SYSCALL(__NR_io_pgetevents, compat_sys_io_pgetevents)
+ #define __NR_migrate_pages 400
+ __SYSCALL(__NR_migrate_pages, compat_sys_migrate_pages)
+ #define __NR_kexec_file_load 401
+ __SYSCALL(__NR_kexec_file_load, sys_kexec_file_load)
+ /* 402 is unused */
+ #define __NR_clock_gettime64 403
+ __SYSCALL(__NR_clock_gettime64, sys_clock_gettime)
+ #define __NR_clock_settime64 404
+ __SYSCALL(__NR_clock_settime64, sys_clock_settime)
+ #define __NR_clock_adjtime64 405
+ __SYSCALL(__NR_clock_adjtime64, sys_clock_adjtime)
+ #define __NR_clock_getres_time64 406
+ __SYSCALL(__NR_clock_getres_time64, sys_clock_getres)
+ #define __NR_clock_nanosleep_time64 407
+ __SYSCALL(__NR_clock_nanosleep_time64, sys_clock_nanosleep)
+ #define __NR_timer_gettime64 408
+ __SYSCALL(__NR_timer_gettime64, sys_timer_gettime)
+ #define __NR_timer_settime64 409
+ __SYSCALL(__NR_timer_settime64, sys_timer_settime)
+ #define __NR_timerfd_gettime64 410
+ __SYSCALL(__NR_timerfd_gettime64, sys_timerfd_gettime)
+ #define __NR_timerfd_settime64 411
+ __SYSCALL(__NR_timerfd_settime64, sys_timerfd_settime)
+ #define __NR_utimensat_time64 412
+ __SYSCALL(__NR_utimensat_time64, sys_utimensat)
+ #define __NR_pselect6_time64 413
+ __SYSCALL(__NR_pselect6_time64, compat_sys_pselect6_time64)
+ #define __NR_ppoll_time64 414
+ __SYSCALL(__NR_ppoll_time64, compat_sys_ppoll_time64)
+ #define __NR_io_pgetevents_time64 416
+ __SYSCALL(__NR_io_pgetevents_time64, sys_io_pgetevents)
+ #define __NR_recvmmsg_time64 417
+ __SYSCALL(__NR_recvmmsg_time64, compat_sys_recvmmsg_time64)
+ #define __NR_mq_timedsend_time64 418
+ __SYSCALL(__NR_mq_timedsend_time64, sys_mq_timedsend)
+ #define __NR_mq_timedreceive_time64 419
+ __SYSCALL(__NR_mq_timedreceive_time64, sys_mq_timedreceive)
+ #define __NR_semtimedop_time64 420
+ __SYSCALL(__NR_semtimedop_time64, sys_semtimedop)
+ #define __NR_rt_sigtimedwait_time64 421
+ __SYSCALL(__NR_rt_sigtimedwait_time64, compat_sys_rt_sigtimedwait_time64)
+ #define __NR_futex_time64 422
+ __SYSCALL(__NR_futex_time64, sys_futex)
+ #define __NR_sched_rr_get_interval_time64 423
+ __SYSCALL(__NR_sched_rr_get_interval_time64, sys_sched_rr_get_interval)
+ #define __NR_pidfd_send_signal 424
+ __SYSCALL(__NR_pidfd_send_signal, sys_pidfd_send_signal)
+ #define __NR_io_uring_setup 425
+ __SYSCALL(__NR_io_uring_setup, sys_io_uring_setup)
+ #define __NR_io_uring_enter 426
+ __SYSCALL(__NR_io_uring_enter, sys_io_uring_enter)
+ #define __NR_io_uring_register 427
+ __SYSCALL(__NR_io_uring_register, sys_io_uring_register)
++>>>>>>> 39036cd27273 (arch: add pidfd and io_uring syscalls everywhere)
  
  /*
   * Please add new compat syscalls above this comment and update
diff --cc arch/s390/kernel/syscalls/syscall.tbl
index 022fc099b628,061418f787c3..000000000000
--- a/arch/s390/kernel/syscalls/syscall.tbl
+++ b/arch/s390/kernel/syscalls/syscall.tbl
@@@ -381,13 -381,52 +381,56 @@@
  371  common	recvfrom		sys_recvfrom			compat_sys_recvfrom
  372  common	recvmsg			sys_recvmsg			compat_sys_recvmsg
  373  common	shutdown		sys_shutdown			sys_shutdown
 -374  common	mlock2			sys_mlock2			sys_mlock2
 -375  common	copy_file_range		sys_copy_file_range		sys_copy_file_range
 +374  common	mlock2			sys_mlock2			compat_sys_mlock2
 +375  common	copy_file_range		sys_copy_file_range		compat_sys_copy_file_range
  376  common	preadv2			sys_preadv2			compat_sys_preadv2
  377  common	pwritev2		sys_pwritev2			compat_sys_pwritev2
 -378  common	s390_guarded_storage	sys_s390_guarded_storage	sys_s390_guarded_storage
 -379  common	statx			sys_statx			sys_statx
 -380  common	s390_sthyi		sys_s390_sthyi			sys_s390_sthyi
 -381  common	kexec_file_load		sys_kexec_file_load		sys_kexec_file_load
 +378  common	s390_guarded_storage	sys_s390_guarded_storage	compat_sys_s390_guarded_storage
 +379  common	statx			sys_statx			compat_sys_statx
 +380  common	s390_sthyi		sys_s390_sthyi			compat_sys_s390_sthyi
 +381  common	kexec_file_load		sys_kexec_file_load		compat_sys_kexec_file_load
  382  common	io_pgetevents		sys_io_pgetevents		compat_sys_io_pgetevents
++<<<<<<< HEAD
 +383  common	rseq			sys_rseq			compat_sys_rseq
++=======
+ 383  common	rseq			sys_rseq			sys_rseq
+ 384  common	pkey_mprotect		sys_pkey_mprotect		sys_pkey_mprotect
+ 385  common	pkey_alloc		sys_pkey_alloc			sys_pkey_alloc
+ 386  common	pkey_free		sys_pkey_free			sys_pkey_free
+ # room for arch specific syscalls
+ 392	64	semtimedop		sys_semtimedop			-
+ 393  common	semget			sys_semget			sys_semget
+ 394  common	semctl			sys_semctl			compat_sys_semctl
+ 395  common	shmget			sys_shmget			sys_shmget
+ 396  common	shmctl			sys_shmctl			compat_sys_shmctl
+ 397  common	shmat			sys_shmat			compat_sys_shmat
+ 398  common	shmdt			sys_shmdt 			sys_shmdt
+ 399  common	msgget			sys_msgget			sys_msgget
+ 400  common	msgsnd			sys_msgsnd			compat_sys_msgsnd
+ 401  common	msgrcv			sys_msgrcv			compat_sys_msgrcv
+ 402  common	msgctl			sys_msgctl			compat_sys_msgctl
+ 403	32	clock_gettime64		-				sys_clock_gettime
+ 404	32	clock_settime64		-				sys_clock_settime
+ 405	32	clock_adjtime64		-				sys_clock_adjtime
+ 406	32	clock_getres_time64	-				sys_clock_getres
+ 407	32	clock_nanosleep_time64	-				sys_clock_nanosleep
+ 408	32	timer_gettime64		-				sys_timer_gettime
+ 409	32	timer_settime64		-				sys_timer_settime
+ 410	32	timerfd_gettime64	-				sys_timerfd_gettime
+ 411	32	timerfd_settime64	-				sys_timerfd_settime
+ 412	32	utimensat_time64	-				sys_utimensat
+ 413	32	pselect6_time64		-				compat_sys_pselect6_time64
+ 414	32	ppoll_time64		-				compat_sys_ppoll_time64
+ 416	32	io_pgetevents_time64	-				sys_io_pgetevents
+ 417	32	recvmmsg_time64		-				compat_sys_recvmmsg_time64
+ 418	32	mq_timedsend_time64	-				sys_mq_timedsend
+ 419	32	mq_timedreceive_time64	-				sys_mq_timedreceive
+ 420	32	semtimedop_time64	-				sys_semtimedop
+ 421	32	rt_sigtimedwait_time64	-				compat_sys_rt_sigtimedwait_time64
+ 422	32	futex_time64		-				sys_futex
+ 423	32	sched_rr_get_interval_time64	-			sys_sched_rr_get_interval
+ 424  common	pidfd_send_signal	sys_pidfd_send_signal		sys_pidfd_send_signal
+ 425  common	io_uring_setup		sys_io_uring_setup              sys_io_uring_setup
+ 426  common	io_uring_enter		sys_io_uring_enter              sys_io_uring_enter
+ 427  common	io_uring_register	sys_io_uring_register           sys_io_uring_register
++>>>>>>> 39036cd27273 (arch: add pidfd and io_uring syscalls everywhere)
* Unmerged path arch/alpha/kernel/syscalls/syscall.tbl
* Unmerged path arch/ia64/kernel/syscalls/syscall.tbl
* Unmerged path arch/m68k/kernel/syscalls/syscall.tbl
* Unmerged path arch/microblaze/kernel/syscalls/syscall.tbl
* Unmerged path arch/mips/kernel/syscalls/syscall_n32.tbl
* Unmerged path arch/mips/kernel/syscalls/syscall_n64.tbl
* Unmerged path arch/mips/kernel/syscalls/syscall_o32.tbl
* Unmerged path arch/parisc/kernel/syscalls/syscall.tbl
* Unmerged path arch/powerpc/kernel/syscalls/syscall.tbl
* Unmerged path arch/sh/kernel/syscalls/syscall.tbl
* Unmerged path arch/sparc/kernel/syscalls/syscall.tbl
* Unmerged path arch/xtensa/kernel/syscalls/syscall.tbl
* Unmerged path arch/alpha/kernel/syscalls/syscall.tbl
* Unmerged path arch/arm/tools/syscall.tbl
* Unmerged path arch/arm64/include/asm/unistd.h
* Unmerged path arch/arm64/include/asm/unistd32.h
* Unmerged path arch/ia64/kernel/syscalls/syscall.tbl
* Unmerged path arch/m68k/kernel/syscalls/syscall.tbl
* Unmerged path arch/microblaze/kernel/syscalls/syscall.tbl
* Unmerged path arch/mips/kernel/syscalls/syscall_n32.tbl
* Unmerged path arch/mips/kernel/syscalls/syscall_n64.tbl
* Unmerged path arch/mips/kernel/syscalls/syscall_o32.tbl
* Unmerged path arch/parisc/kernel/syscalls/syscall.tbl
* Unmerged path arch/powerpc/kernel/syscalls/syscall.tbl
* Unmerged path arch/s390/kernel/syscalls/syscall.tbl
* Unmerged path arch/sh/kernel/syscalls/syscall.tbl
* Unmerged path arch/sparc/kernel/syscalls/syscall.tbl
* Unmerged path arch/xtensa/kernel/syscalls/syscall.tbl
