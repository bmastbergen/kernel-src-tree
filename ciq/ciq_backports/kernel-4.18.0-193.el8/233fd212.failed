net/mlx5e: Simplify get_route_and_out_devs helper function

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
Rebuild_CHGLOG: - [netdrv] mlx5e: Simplify get_route_and_out_devs helper function (Alaa Hleihel) [1663231 1724336]
Rebuild_FUZZ: 96.43%
commit-author Eli Britstein <elibr@mellanox.com>
commit 233fd21211bd0c77109460811eefa8d10dcfc5e7
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/233fd212.failed

The helper function has "if" branches that do the same. Merge them to
simplify the code.

	Signed-off-by: Eli Britstein <elibr@mellanox.com>
	Reviewed-by: Roi Dayan <roid@mellanox.com>
	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
(cherry picked from commit 233fd21211bd0c77109460811eefa8d10dcfc5e7)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun.c
index 6987b1dc695a,ae439d95f5a3..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun.c
@@@ -38,19 -40,15 +38,31 @@@ static int get_route_and_out_devs(struc
  	/* if the egress device isn't on the same HW e-switch or
  	 * it's a LAG device, use the uplink
  	 */
++<<<<<<< HEAD
 +	if (!switchdev_port_same_parent_id(priv->netdev, dev) ||
 +	    dst_is_lag_dev) {
 +		*route_dev = uplink_dev;
 +		*out_dev = *route_dev;
 +	} else {
 +		*route_dev = dev;
 +		if (is_vlan_dev(*route_dev))
 +			*out_dev = uplink_dev;
 +		else if (mlx5e_eswitch_rep(dev))
 +			*out_dev = *route_dev;
 +		else
 +			return -EOPNOTSUPP;
 +	}
++=======
+ 	*route_dev = dev;
+ 	if (!netdev_port_same_parent_id(priv->netdev, real_dev) ||
+ 	    dst_is_lag_dev || is_vlan_dev(*route_dev))
+ 		*out_dev = uplink_dev;
+ 	else if (mlx5e_eswitch_rep(dev) &&
+ 		 mlx5e_is_valid_eswitch_fwd_dev(priv, dev))
+ 		*out_dev = *route_dev;
+ 	else
+ 		return -EOPNOTSUPP;
++>>>>>>> 233fd21211bd (net/mlx5e: Simplify get_route_and_out_devs helper function)
  
  	if (!(mlx5e_eswitch_rep(*out_dev) &&
  	      mlx5e_is_uplink_rep(netdev_priv(*out_dev))))
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun.c
