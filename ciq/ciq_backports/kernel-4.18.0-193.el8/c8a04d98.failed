mt76: move beacon_mask in mt76_dev

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Lorenzo Bianconi <lorenzo@kernel.org>
commit c8a04d985481b6e00534c6a47a8e85a62e8992ca
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/c8a04d98.failed

Move beacon_mask in mt76_dev data structure since it is used by
all drivers

	Signed-off-by: Lorenzo Bianconi <lorenzo@kernel.org>
	Signed-off-by: Felix Fietkau <nbd@nbd.name>
(cherry picked from commit c8a04d985481b6e00534c6a47a8e85a62e8992ca)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/wireless/mediatek/mt76/mt7603/beacon.c
#	drivers/net/wireless/mediatek/mt76/mt76x02_usb_core.c
diff --cc drivers/net/wireless/mediatek/mt76/mt7603/beacon.c
index 4dcb465095d1,f3e7406e731f..000000000000
--- a/drivers/net/wireless/mediatek/mt76/mt7603/beacon.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7603/beacon.c
@@@ -135,7 -133,8 +135,12 @@@ void mt7603_pre_tbtt_tasklet(unsigned l
  
  out:
  	mt76_queue_tx_cleanup(dev, MT_TXQ_BEACON, false);
++<<<<<<< HEAD
 +	if (dev->mt76.q_tx[MT_TXQ_BEACON].queued > hweight8(dev->beacon_mask))
++=======
+ 	if (dev->mt76.q_tx[MT_TXQ_BEACON].q->queued >
+ 	    hweight8(dev->mt76.beacon_mask))
++>>>>>>> c8a04d985481 (mt76: move beacon_mask in mt76_dev)
  		dev->beacon_check++;
  }
  
diff --cc drivers/net/wireless/mediatek/mt76/mt76x02_usb_core.c
index 5e4f3a8c5784,5b6ac1b364e1..000000000000
--- a/drivers/net/wireless/mediatek/mt76/mt76x02_usb_core.c
+++ b/drivers/net/wireless/mediatek/mt76/mt76x02_usb_core.c
@@@ -183,9 -176,6 +183,12 @@@ static void mt76x02u_pre_tbtt_work(stru
  	int i, nbeacons;
  
  	if (!dev->mt76.beacon_mask)
++<<<<<<< HEAD
 +		return;
 +
 +	if (mt76_hw(dev)->conf.flags & IEEE80211_CONF_OFFCHANNEL)
++=======
++>>>>>>> c8a04d985481 (mt76: move beacon_mask in mt76_dev)
  		return;
  
  	mt76x02_resync_beacon_timer(dev);
* Unmerged path drivers/net/wireless/mediatek/mt76/mt7603/beacon.c
diff --git a/drivers/net/wireless/mediatek/mt76/mt7603/mt7603.h b/drivers/net/wireless/mediatek/mt76/mt7603/mt7603.h
index 10ced8d17526..514763532637 100644
--- a/drivers/net/wireless/mediatek/mt76/mt7603/mt7603.h
+++ b/drivers/net/wireless/mediatek/mt76/mt7603/mt7603.h
@@ -126,8 +126,6 @@ struct mt7603_dev {
 
 	s8 sensitivity;
 
-	u8 beacon_mask;
-
 	u8 beacon_check;
 	u8 tx_hang_check;
 	u8 tx_dma_check;
* Unmerged path drivers/net/wireless/mediatek/mt76/mt76x02_usb_core.c
