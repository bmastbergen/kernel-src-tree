ASoC: soc-core: merge snd_soc_initialize_card_lists()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
Rebuild_CHGLOG: - [sound] ALSA: ASoC: soc-core: merge snd_soc_initialize_card_lists() (Jaroslav Kysela) [1738610]
Rebuild_FUZZ: 94.64%
commit-author Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
commit b03bfaec1d52123d5d941488f71e06964535e471
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/b03bfaec.failed

snd_soc_initialize_card_lists() is doing card related
INIT_LIST_HEAD(), but, it is already doing at
snd_soc_register_card(). We don't need to do it separately.
This patch merges these.

	Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
	Reviewed-by: Ranjani Sridharan <ranjani.sridharan@linux.intel.com>
Link: https://lore.kernel.org/r/877e781ldq.wl-kuninori.morimoto.gx@renesas.com
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit b03bfaec1d52123d5d941488f71e06964535e471)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/sound/soc.h
diff --cc include/sound/soc.h
index 3e7f85b8ffb3,f264c6509f00..000000000000
--- a/include/sound/soc.h
+++ b/include/sound/soc.h
@@@ -1536,27 -1220,6 +1536,30 @@@ static inline void *snd_soc_card_get_dr
  	return card->drvdata;
  }
  
++<<<<<<< HEAD
 +static inline void snd_soc_component_set_drvdata(struct snd_soc_component *c,
 +		void *data)
 +{
 +	dev_set_drvdata(c->dev, data);
 +}
 +
 +static inline void *snd_soc_component_get_drvdata(struct snd_soc_component *c)
 +{
 +	return dev_get_drvdata(c->dev);
 +}
 +
 +static inline void snd_soc_initialize_card_lists(struct snd_soc_card *card)
 +{
 +	INIT_LIST_HEAD(&card->widgets);
 +	INIT_LIST_HEAD(&card->paths);
 +	INIT_LIST_HEAD(&card->dapm_list);
 +	INIT_LIST_HEAD(&card->aux_comp_list);
 +	INIT_LIST_HEAD(&card->component_dev_list);
 +	INIT_LIST_HEAD(&card->list);
 +}
 +
++=======
++>>>>>>> b03bfaec1d52 (ASoC: soc-core: merge snd_soc_initialize_card_lists())
  static inline bool snd_soc_volsw_is_stereo(struct soc_mixer_control *mc)
  {
  	if (mc->reg == mc->rreg && mc->shift == mc->rshift)
* Unmerged path include/sound/soc.h
diff --git a/sound/soc/soc-core.c b/sound/soc/soc-core.c
index f47f0d3a4b5d..fc5a59bb87e5 100644
--- a/sound/soc/soc-core.c
+++ b/sound/soc/soc-core.c
@@ -2831,15 +2831,18 @@ int snd_soc_register_card(struct snd_soc_card *card)
 
 	dev_set_drvdata(card->dev, card);
 
-	snd_soc_initialize_card_lists(card);
-
+	INIT_LIST_HEAD(&card->widgets);
+	INIT_LIST_HEAD(&card->paths);
+	INIT_LIST_HEAD(&card->dapm_list);
+	INIT_LIST_HEAD(&card->aux_comp_list);
+	INIT_LIST_HEAD(&card->component_dev_list);
+	INIT_LIST_HEAD(&card->list);
 	INIT_LIST_HEAD(&card->dai_link_list);
-
 	INIT_LIST_HEAD(&card->rtd_list);
-	card->num_rtd = 0;
-
 	INIT_LIST_HEAD(&card->dapm_dirty);
 	INIT_LIST_HEAD(&card->dobj_list);
+
+	card->num_rtd = 0;
 	card->instantiated = 0;
 	mutex_init(&card->mutex);
 	mutex_init(&card->dapm_mutex);
