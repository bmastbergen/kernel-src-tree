tcp: clear tp->data_segs{in|out} in tcp_disconnect()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Eric Dumazet <edumazet@google.com>
commit db7ffee6f3eb3683cdcaeddecc0a630a14546fe3
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/db7ffee6.failed

tp->data_segs_in and tp->data_segs_out need to be cleared
in tcp_disconnect().

tcp_disconnect() is rarely used, but it is worth fixing it.

Fixes: a44d6eacdaf5 ("tcp: Add RFC4898 tcpEStatsPerfDataSegsOut/In")
	Signed-off-by: Eric Dumazet <edumazet@google.com>
	Cc: Martin KaFai Lau <kafai@fb.com>
	Cc: Yuchung Cheng <ycheng@google.com>
	Cc: Neal Cardwell <ncardwell@google.com>
	Acked-by: Neal Cardwell <ncardwell@google.com>
	Signed-off-by: Jakub Kicinski <kuba@kernel.org>
(cherry picked from commit db7ffee6f3eb3683cdcaeddecc0a630a14546fe3)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv4/tcp.c
diff --cc net/ipv4/tcp.c
index 60983ad5fe35,3b601823f69a..000000000000
--- a/net/ipv4/tcp.c
+++ b/net/ipv4/tcp.c
@@@ -2614,8 -2639,34 +2614,36 @@@ int tcp_disconnect(struct sock *sk, in
  	sk->sk_rx_dst = NULL;
  	tcp_saved_syn_free(tp);
  	tp->compressed_ack = 0;
 -	tp->bytes_sent = 0;
  	tp->bytes_acked = 0;
  	tp->bytes_received = 0;
++<<<<<<< HEAD
++=======
+ 	tp->bytes_retrans = 0;
+ 	tp->data_segs_in = 0;
+ 	tp->data_segs_out = 0;
+ 	tp->duplicate_sack[0].start_seq = 0;
+ 	tp->duplicate_sack[0].end_seq = 0;
+ 	tp->dsack_dups = 0;
+ 	tp->reord_seen = 0;
+ 	tp->retrans_out = 0;
+ 	tp->sacked_out = 0;
+ 	tp->tlp_high_seq = 0;
+ 	tp->last_oow_ack_time = 0;
+ 	/* There's a bubble in the pipe until at least the first ACK. */
+ 	tp->app_limited = ~0U;
+ 	tp->rack.mstamp = 0;
+ 	tp->rack.advanced = 0;
+ 	tp->rack.reo_wnd_steps = 1;
+ 	tp->rack.last_delivered = 0;
+ 	tp->rack.reo_wnd_persist = 0;
+ 	tp->rack.dsack_seen = 0;
+ 	tp->syn_data_acked = 0;
+ 	tp->rx_opt.saw_tstamp = 0;
+ 	tp->rx_opt.dsack = 0;
+ 	tp->rx_opt.num_sacks = 0;
+ 	tp->rcv_ooopack = 0;
+ 
++>>>>>>> db7ffee6f3eb (tcp: clear tp->data_segs{in|out} in tcp_disconnect())
  
  	/* Clean up fastopen related fields */
  	tcp_free_fastopen_req(tp);
* Unmerged path net/ipv4/tcp.c
