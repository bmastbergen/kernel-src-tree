drm/amd/display: Handle virtual signal type in disable_link()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Martin Tsai <martin.tsai@amd.com>
commit 616f5b65f1c02d3d6ae370644670d14c57de2fd8
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/616f5b65.failed

[Why]
The new implementation changed the behavior to allow process setMode
to DAL when DAL returns empty mode query for unplugged display.
This will trigger additional disable_link().
When unplug HDMI from MST dock, driver will update stream->signal to
"Virtual". disable_link() will call disable_output() if the signal type
is not DP and induce other displays on MST dock show black screen.

[How]
Don't need to process disable_output() if the signal type is virtual.

	Signed-off-by: Martin Tsai <martin.tsai@amd.com>
	Reviewed-by: Charlene Liu <Charlene.Liu@amd.com>
	Acked-by: Leo Li <sunpeng.li@amd.com>
	Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
(cherry picked from commit 616f5b65f1c02d3d6ae370644670d14c57de2fd8)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/amd/display/dc/core/dc_link.c
diff --cc drivers/gpu/drm/amd/display/dc/core/dc_link.c
index 6072636da388,15b149878d3e..000000000000
--- a/drivers/gpu/drm/amd/display/dc/core/dc_link.c
+++ b/drivers/gpu/drm/amd/display/dc/core/dc_link.c
@@@ -2071,8 -2160,18 +2071,23 @@@ static void disable_link(struct dc_lin
  			dp_disable_link_phy(link, signal);
  		else
  			dp_disable_link_phy_mst(link, signal);
++<<<<<<< HEAD
 +	} else
 +		link->link_enc->funcs->disable_output(link->link_enc, signal);
++=======
+ #ifdef CONFIG_DRM_AMD_DC_DSC_SUPPORT
+ 
+ 		if (dc_is_dp_sst_signal(signal) ||
+ 				link->mst_stream_alloc_table.stream_count == 0) {
+ 			dp_set_fec_enable(link, false);
+ 			dp_set_fec_ready(link, false);
+ 		}
+ #endif
+ 	} else {
+ 		if (signal != SIGNAL_TYPE_VIRTUAL)
+ 			link->link_enc->funcs->disable_output(link->link_enc, signal);
+ 	}
++>>>>>>> 616f5b65f1c0 (drm/amd/display: Handle virtual signal type in disable_link())
  
  	if (signal == SIGNAL_TYPE_DISPLAY_PORT_MST) {
  		/* MST disable link only when no stream use the link */
* Unmerged path drivers/gpu/drm/amd/display/dc/core/dc_link.c
