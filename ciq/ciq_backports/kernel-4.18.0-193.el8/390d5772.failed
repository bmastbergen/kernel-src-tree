RDMA/core: Make rdma_counter.h compile stand alone

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Jason Gunthorpe <jgg@ziepe.ca>
commit 390d57728d8e6f7283030cb20d3b5459771a32f1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/390d5772.failed

5.4-rc1 will have new compile time debugging to test that headers can be
compiled stand alone. Many rdma headers are already broken and excluded
from the mechanism, however to avoid compile failures during the merge
window fix enough so that the newly added header compiles clean.

Fixes: 413d3347503b ("RDMA/counter: Add set/clear per-port auto mode support")
	Reported-by: Stephen Rothwell <sfr@canb.auug.org.au>
	Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
	Signed-off-by: Mark Zhang <markz@mellanox.com>
(cherry picked from commit 390d57728d8e6f7283030cb20d3b5459771a32f1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/rdma/rdma_counter.h
#	include/rdma/restrack.h
diff --cc include/rdma/restrack.h
index 7e9d9a881f70,b0fc6b26bdf5..000000000000
--- a/include/rdma/restrack.h
+++ b/include/rdma/restrack.h
@@@ -13,7 -12,11 +13,10 @@@
  #include <linux/completion.h>
  #include <linux/sched/task.h>
  #include <uapi/rdma/rdma_netlink.h>
 -#include <linux/xarray.h>
  
+ struct ib_device;
+ struct sk_buff;
+ 
  /**
   * enum rdma_restrack_type - HW objects to track
   */
@@@ -48,32 -55,6 +51,35 @@@ enum rdma_restrack_type 
  	RDMA_RESTRACK_MAX
  };
  
++<<<<<<< HEAD
 +#define RDMA_RESTRACK_HASH_BITS	8
 +struct ib_device;
 +struct rdma_restrack_entry;
 +
 +/**
 + * struct rdma_restrack_root - main resource tracking management
 + * entity, per-device
 + */
 +struct rdma_restrack_root {
 +	/*
 +	 * @rwsem: Read/write lock to protect lists
 +	 */
 +	struct rw_semaphore	rwsem;
 +	/**
 +	 * @hash: global database for all resources per-device
 +	 */
 +	DECLARE_HASHTABLE(hash, RDMA_RESTRACK_HASH_BITS);
 +	/**
 +	 * @fill_res_entry: driver-specific fill function
 +	 *
 +	 * Allows rdma drivers to add their own restrack attributes.
 +	 */
 +	int (*fill_res_entry)(struct sk_buff *msg,
 +			      struct rdma_restrack_entry *entry);
 +};
 +
++=======
++>>>>>>> 390d57728d8e (RDMA/core: Make rdma_counter.h compile stand alone)
  /**
   * struct rdma_restrack_entry - metadata per-entry
   */
* Unmerged path include/rdma/rdma_counter.h
* Unmerged path include/rdma/rdma_counter.h
* Unmerged path include/rdma/restrack.h
