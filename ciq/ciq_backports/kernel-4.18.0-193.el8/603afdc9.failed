arm64: Allow CAVIUM_TX2_ERRATUM_219 to be selected

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
Rebuild_CHGLOG: - [arm64] Allow CAVIUM_TX2_ERRATUM_219 to be selected (Auger Eric) [1771633]
Rebuild_FUZZ: 92.47%
commit-author Marc Zyngier <marc.zyngier@arm.com>
commit 603afdc9438ac546181e843f807253d75d3dbc45
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/603afdc9.failed

Allow the user to select the workaround for TX2-219, and update
the silicon-errata.rst file to reflect this.

	Cc: <stable@vger.kernel.org>
	Signed-off-by: Marc Zyngier <marc.zyngier@arm.com>
	Signed-off-by: Will Deacon <will@kernel.org>
(cherry picked from commit 603afdc9438ac546181e843f807253d75d3dbc45)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	Documentation/arm64/silicon-errata.rst
* Unmerged path Documentation/arm64/silicon-errata.rst
* Unmerged path Documentation/arm64/silicon-errata.rst
diff --git a/arch/arm64/Kconfig b/arch/arm64/Kconfig
index fbf3261cea96..a97447e51cee 100644
--- a/arch/arm64/Kconfig
+++ b/arch/arm64/Kconfig
@@ -578,6 +578,23 @@ config CAVIUM_ERRATUM_30115
 
 	  If unsure, say Y.
 
+config CAVIUM_TX2_ERRATUM_219
+	bool "Cavium ThunderX2 erratum 219: PRFM between TTBR change and ISB fails"
+	default y
+	help
+	  On Cavium ThunderX2, a load, store or prefetch instruction between a
+	  TTBR update and the corresponding context synchronizing operation can
+	  cause a spurious Data Abort to be delivered to any hardware thread in
+	  the CPU core.
+
+	  Work around the issue by avoiding the problematic code sequence and
+	  trapping KVM guest TTBRx_EL1 writes to EL2 when SMT is enabled. The
+	  trap handler performs the corresponding register access, skips the
+	  instruction and ensures context synchronization by virtue of the
+	  exception return.
+
+	  If unsure, say Y.
+
 config QCOM_FALKOR_ERRATUM_1003
 	bool "Falkor E1003: Incorrect translation due to ASID change"
 	default y
