net/mlx5: fix missing assignment of variable err

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
Rebuild_CHGLOG: - [netdrv] mlx5: fix missing assignment of variable err (Alaa Hleihel) [1724327 1724336]
Rebuild_FUZZ: 95.65%
commit-author Colin Ian King <colin.king@canonical.com>
commit e53e665558eea32e76585c3d3a5786e7298045ad
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/e53e6655.failed

The error return from a call to mlx5_flow_namespace_set_peer is not
being assigned to variable err and hence the error check following
the call is currently not working.  Fix this by assigning ret as
intended.

Addresses-Coverity: ("Logically dead code")
Fixes: 8463daf17e80 ("net/mlx5: Add support to use SMFS in switchdev mode")
	Signed-off-by: Colin Ian King <colin.king@canonical.com>
	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
(cherry picked from commit e53e665558eea32e76585c3d3a5786e7298045ad)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c
index 2a02050a09e7,00d71db15f22..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c
@@@ -1321,6 -1635,35 +1321,38 @@@ static void mlx5_esw_offloads_unpair(st
  	esw_del_fdb_peer_miss_rules(esw);
  }
  
++<<<<<<< HEAD
++=======
+ static int mlx5_esw_offloads_set_ns_peer(struct mlx5_eswitch *esw,
+ 					 struct mlx5_eswitch *peer_esw,
+ 					 bool pair)
+ {
+ 	struct mlx5_flow_root_namespace *peer_ns;
+ 	struct mlx5_flow_root_namespace *ns;
+ 	int err;
+ 
+ 	peer_ns = peer_esw->dev->priv.steering->fdb_root_ns;
+ 	ns = esw->dev->priv.steering->fdb_root_ns;
+ 
+ 	if (pair) {
+ 		err = mlx5_flow_namespace_set_peer(ns, peer_ns);
+ 		if (err)
+ 			return err;
+ 
+ 		err = mlx5_flow_namespace_set_peer(peer_ns, ns);
+ 		if (err) {
+ 			mlx5_flow_namespace_set_peer(ns, NULL);
+ 			return err;
+ 		}
+ 	} else {
+ 		mlx5_flow_namespace_set_peer(ns, NULL);
+ 		mlx5_flow_namespace_set_peer(peer_ns, NULL);
+ 	}
+ 
+ 	return 0;
+ }
+ 
++>>>>>>> e53e665558ee (net/mlx5: fix missing assignment of variable err)
  static int mlx5_esw_offloads_devcom_event(int event,
  					  void *my_data,
  					  void *event_data)
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c
