bpf: fix sysctl.c warning

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Arnd Bergmann <arnd@arndb.de>
commit 78c3aff834f7939d1a2570e366e33f2a880d4d9e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/78c3aff8.failed

When CONFIG_BPF_SYSCALL or CONFIG_SYSCTL is disabled, we get
a warning about an unused function:

kernel/sysctl.c:3331:12: error: 'proc_dointvec_minmax_bpf_stats' defined but not used [-Werror=unused-function]
 static int proc_dointvec_minmax_bpf_stats(struct ctl_table *table, int write,

The CONFIG_BPF_SYSCALL check was already handled, but the SYSCTL check
is needed on top.

Fixes: 492ecee892c2 ("bpf: enable program stats")
	Signed-off-by: Arnd Bergmann <arnd@arndb.de>
	Reviewed-by: Kees Cook <keescook@chromium.org>
	Reviewed-by: Christian Brauner <christian@brauner.io>
	Acked-by: Song Liu <songliubraving@fb.com>
	Signed-off-by: Daniel Borkmann <daniel@iogearbox.net>
(cherry picked from commit 78c3aff834f7939d1a2570e366e33f2a880d4d9e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	kernel/sysctl.c
diff --cc kernel/sysctl.c
index 04c2181c0df5,2322b12cb4cf..000000000000
--- a/kernel/sysctl.c
+++ b/kernel/sysctl.c
@@@ -3281,6 -3274,29 +3281,32 @@@ int proc_doulongvec_ms_jiffies_minmax(s
  
  #endif /* CONFIG_PROC_SYSCTL */
  
++<<<<<<< HEAD
++=======
+ #if defined(CONFIG_BPF_SYSCALL) && defined(CONFIG_SYSCTL)
+ static int proc_dointvec_minmax_bpf_stats(struct ctl_table *table, int write,
+ 					  void __user *buffer, size_t *lenp,
+ 					  loff_t *ppos)
+ {
+ 	int ret, bpf_stats = *(int *)table->data;
+ 	struct ctl_table tmp = *table;
+ 
+ 	if (write && !capable(CAP_SYS_ADMIN))
+ 		return -EPERM;
+ 
+ 	tmp.data = &bpf_stats;
+ 	ret = proc_dointvec_minmax(&tmp, write, buffer, lenp, ppos);
+ 	if (write && !ret) {
+ 		*(int *)table->data = bpf_stats;
+ 		if (bpf_stats)
+ 			static_branch_enable(&bpf_stats_enabled_key);
+ 		else
+ 			static_branch_disable(&bpf_stats_enabled_key);
+ 	}
+ 	return ret;
+ }
+ #endif
++>>>>>>> 78c3aff834f7 (bpf: fix sysctl.c warning)
  /*
   * No sense putting this after each symbol definition, twice,
   * exception granted :-)
* Unmerged path kernel/sysctl.c
