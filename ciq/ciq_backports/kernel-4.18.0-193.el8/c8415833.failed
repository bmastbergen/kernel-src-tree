ASoC: codec2codec: fix missing return of error return code

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
Rebuild_CHGLOG: - [sound] ALSA: ASoC: codec2codec: fix missing return of error return code (Jaroslav Kysela) [1738610]
Rebuild_FUZZ: 95.08%
commit-author Colin Ian King <colin.king@canonical.com>
commit c8415833ec242b9ddf73bf9e1057e12f9b0fcd16
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/c8415833.failed

Currently in function snd_soc_dai_link_event_pre_pmu the error return
code in variable err is being set but this is not actually being returned,
the function just returns zero even when there are failures. Fix this by
returning the error return code.

Addresses-Coverity: ("Unused value")
Fixes: 3dcfb397dad2 ("ASoC: codec2codec: deal with params when necessary")
	Signed-off-by: Colin Ian King <colin.king@canonical.com>
Link: https://lore.kernel.org/r/20190726123327.10467-1-colin.king@canonical.com
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit c8415833ec242b9ddf73bf9e1057e12f9b0fcd16)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/soc-dapm.c
diff --cc sound/soc/soc-dapm.c
index 7874989d43fc,2d183e2d23de..000000000000
--- a/sound/soc/soc-dapm.c
+++ b/sound/soc/soc-dapm.c
@@@ -3833,6 -3841,47 +3833,50 @@@ static int snd_soc_dai_link_event(struc
  	hw_param_interval(params, SNDRV_PCM_HW_PARAM_CHANNELS)->max
  		= config->channels_max;
  
++<<<<<<< HEAD
++=======
+ 	substream->stream = SNDRV_PCM_STREAM_CAPTURE;
+ 	snd_soc_dapm_widget_for_each_source_path(w, path) {
+ 		source = path->source->priv;
+ 
+ 		ret = snd_soc_dai_hw_params(source, substream, params);
+ 		if (ret < 0)
+ 			goto out;
+ 
+ 		dapm_update_dai_unlocked(substream, params, source);
+ 	}
+ 
+ 	substream->stream = SNDRV_PCM_STREAM_PLAYBACK;
+ 	snd_soc_dapm_widget_for_each_sink_path(w, path) {
+ 		sink = path->sink->priv;
+ 
+ 		ret = snd_soc_dai_hw_params(sink, substream, params);
+ 		if (ret < 0)
+ 			goto out;
+ 
+ 		dapm_update_dai_unlocked(substream, params, sink);
+ 	}
+ 
+ out:
+ 	kfree(params);
+ 	return ret;
+ }
+ 
+ static int snd_soc_dai_link_event(struct snd_soc_dapm_widget *w,
+ 				  struct snd_kcontrol *kcontrol, int event)
+ {
+ 	struct snd_soc_dapm_path *path;
+ 	struct snd_soc_dai *source, *sink;
+ 	struct snd_soc_pcm_runtime *rtd = w->priv;
+ 	struct snd_pcm_substream substream;
+ 	struct snd_pcm_runtime *runtime = NULL;
+ 	int ret = 0;
+ 
+ 	if (WARN_ON(list_empty(&w->edges[SND_SOC_DAPM_DIR_OUT]) ||
+ 		    list_empty(&w->edges[SND_SOC_DAPM_DIR_IN])))
+ 		return -EINVAL;
+ 
++>>>>>>> c8415833ec24 (ASoC: codec2codec: fix missing return of error return code)
  	memset(&substream, 0, sizeof(substream));
  
  	/* Allocate a dummy snd_pcm_runtime for startup() and other ops() */
* Unmerged path sound/soc/soc-dapm.c
