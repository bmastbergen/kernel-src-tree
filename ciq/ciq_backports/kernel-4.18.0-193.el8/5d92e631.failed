net/tls: partially revert fix transition through disconnect with close

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
Rebuild_CHGLOG: - [net] tls: partially revert fix transition through disconnect with close (Sabrina Dubroca) [1760375]
Rebuild_FUZZ: 97.06%
commit-author Jakub Kicinski <jakub.kicinski@netronome.com>
commit 5d92e631b8be8965a90c144320f06e096081a551
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/5d92e631.failed

Looks like we were slightly overzealous with the shutdown()
cleanup. Even though the sock->sk_state can reach CLOSED again,
socket->state will not got back to SS_UNCONNECTED once
connections is ESTABLISHED. Meaning we will see EISCONN if
we try to reconnect, and EINVAL if we try to listen.

Only listen sockets can be shutdown() and reused, but since
ESTABLISHED sockets can never be re-connected() or used for
listen() we don't need to try to clean up the ULP state early.

Fixes: 32857cf57f92 ("net/tls: fix transition through disconnect with close")
	Signed-off-by: Jakub Kicinski <jakub.kicinski@netronome.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 5d92e631b8be8965a90c144320f06e096081a551)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	Documentation/networking/tls-offload.rst
* Unmerged path Documentation/networking/tls-offload.rst
* Unmerged path Documentation/networking/tls-offload.rst
