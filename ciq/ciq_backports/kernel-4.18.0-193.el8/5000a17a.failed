powerpc/fadump: process architected register state data provided by firmware

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Hari Bathini <hbathini@linux.vnet.ibm.com>
commit 5000a17afbd56b4e58b7f72ac77eabb92c418412
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/5000a17a.failed

Firmware provides architected register state data at the time of crash.
Process this data and build CPU notes to append to ELF core. In case
this data is missing or in unsupported format, at least append crashing
CPU's register data, to have something to work with in the vmcore file.

	Signed-off-by: Hari Bathini <hbathini@linux.vnet.ibm.com>
	Signed-off-by: Vasant Hegde <hegdevasant@linux.vnet.ibm.com>
	Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
Link: https://lore.kernel.org/r/156821367702.5656.5546683836236508389.stgit@hbathini.in.ibm.com
(cherry picked from commit 5000a17afbd56b4e58b7f72ac77eabb92c418412)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/powerpc/platforms/powernv/opal-fadump.c
#	arch/powerpc/platforms/powernv/opal-fadump.h
* Unmerged path arch/powerpc/platforms/powernv/opal-fadump.c
* Unmerged path arch/powerpc/platforms/powernv/opal-fadump.h
diff --git a/arch/powerpc/include/asm/fadump-internal.h b/arch/powerpc/include/asm/fadump-internal.h
index f8097510e03f..39da3aba5d0c 100644
--- a/arch/powerpc/include/asm/fadump-internal.h
+++ b/arch/powerpc/include/asm/fadump-internal.h
@@ -85,6 +85,10 @@ struct fw_dump {
 	unsigned long	reserve_bootvar;
 
 	unsigned long	cpu_state_data_size;
+	u64		cpu_state_dest_vaddr;
+	u32		cpu_state_data_version;
+	u32		cpu_state_entry_size;
+
 	unsigned long	hpte_region_size;
 	unsigned long	boot_memory_size;
 
* Unmerged path arch/powerpc/platforms/powernv/opal-fadump.c
* Unmerged path arch/powerpc/platforms/powernv/opal-fadump.h
