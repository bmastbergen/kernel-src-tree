s390/qeth: add wrapper for IP table access

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Julian Wiedmann <jwi@linux.ibm.com>
commit 05a17851341c053421b9430db36d365da8283bc7
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/05a17851.failed

Extract a little helper, so that high-level callers can manipulate the
IP table without worrying about the locking. This will make it easier
to convert the code to a different locking primitive later on.

	Signed-off-by: Julian Wiedmann <jwi@linux.ibm.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 05a17851341c053421b9430db36d365da8283bc7)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/s390/net/qeth_l3_main.c
diff --cc drivers/s390/net/qeth_l3_main.c
index 8322b3859bdf,509871b78313..000000000000
--- a/drivers/s390/net/qeth_l3_main.c
+++ b/drivers/s390/net/qeth_l3_main.c
@@@ -268,6 -268,30 +268,33 @@@ static int qeth_l3_add_ip(struct qeth_c
  	return rc;
  }
  
++<<<<<<< HEAD
++=======
+ static int qeth_l3_modify_ip(struct qeth_card *card, struct qeth_ipaddr *addr,
+ 			     bool add)
+ {
+ 	int rc;
+ 
+ 	spin_lock_bh(&card->ip_lock);
+ 	rc = add ? qeth_l3_add_ip(card, addr) : qeth_l3_delete_ip(card, addr);
+ 	spin_unlock_bh(&card->ip_lock);
+ 
+ 	return rc;
+ }
+ 
+ static void qeth_l3_drain_rx_mode_cache(struct qeth_card *card)
+ {
+ 	struct qeth_ipaddr *addr;
+ 	struct hlist_node *tmp;
+ 	int i;
+ 
+ 	hash_for_each_safe(card->ip_mc_htable, i, tmp, addr, hnode) {
+ 		hash_del(&addr->hnode);
+ 		kfree(addr);
+ 	}
+ }
+ 
++>>>>>>> 05a17851341c (s390/qeth: add wrapper for IP table access)
  static void qeth_l3_clear_ip_htable(struct qeth_card *card, int recover)
  {
  	struct qeth_ipaddr *addr;
* Unmerged path drivers/s390/net/qeth_l3_main.c
