NFS: Fix handling of reply page vector

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Chuck Lever <chuck.lever@oracle.com>
commit 29e7ca715f2a0b6c0a99b1aec1b0956d1f271955
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/29e7ca71.failed

NFSv4 GETACL and FS_LOCATIONS requests stopped working in v5.1-rc.

These two need the extra padding to be added directly to the reply
length.

	Reported-by: Olga Kornievskaia <aglo@umich.edu>
Fixes: 02ef04e432ba ("NFS: Account for XDR pad of buf->pages")
	Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
	Tested-by: Olga Kornievskaia <aglo@umich.edu>
	Signed-off-by: Trond Myklebust <trond.myklebust@hammerspace.com>
(cherry picked from commit 29e7ca715f2a0b6c0a99b1aec1b0956d1f271955)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/nfs/nfs4xdr.c
diff --cc fs/nfs/nfs4xdr.c
index 021bbe2ed74f,602446158bfb..000000000000
--- a/fs/nfs/nfs4xdr.c
+++ b/fs/nfs/nfs4xdr.c
@@@ -2591,9 -2588,8 +2591,14 @@@ static void nfs4_xdr_enc_getacl(struct 
  	encode_getattr(xdr, nfs4_acl_bitmap, NULL,
  			ARRAY_SIZE(nfs4_acl_bitmap), &hdr);
  
++<<<<<<< HEAD
 +	xdr_inline_pages(&req->rq_rcv_buf, replen << 2,
 +		args->acl_pages, 0, args->acl_len);
 +
++=======
+ 	rpc_prepare_reply_pages(req, args->acl_pages, 0,
+ 				args->acl_len, replen + 1);
++>>>>>>> 29e7ca715f2a (NFS: Fix handling of reply page vector)
  	encode_nops(&hdr);
  }
  
@@@ -2814,9 -2810,8 +2819,14 @@@ static void nfs4_xdr_enc_fs_locations(s
  		encode_fs_locations(xdr, args->bitmask, &hdr);
  	}
  
++<<<<<<< HEAD
 +	/* Set up reply kvec to capture returned fs_locations array. */
 +	xdr_inline_pages(&req->rq_rcv_buf, replen << 2,
 +			 (struct page **)&args->page, 0, PAGE_SIZE);
++=======
+ 	rpc_prepare_reply_pages(req, (struct page **)&args->page, 0,
+ 				PAGE_SIZE, replen + 1);
++>>>>>>> 29e7ca715f2a (NFS: Fix handling of reply page vector)
  	encode_nops(&hdr);
  }
  
* Unmerged path fs/nfs/nfs4xdr.c
