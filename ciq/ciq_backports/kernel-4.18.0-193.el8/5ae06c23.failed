cpufreq: powernv: fix missing check of return value in init_powernv_pstates()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
Rebuild_CHGLOG: - [cpufreq] powernv: fix missing check of return value in init_powernv_pstates() (Al Stone) [1739729 1725581]
Rebuild_FUZZ: 93.79%
commit-author Yangtao Li <tiny.windzz@gmail.com>
commit 5ae06c237fd05a1e9acf6f35891cfd85de792521
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/5ae06c23.failed

kmalloc() could fail, so insert a check of its return value. And
if it fails, returns -ENOMEM.

And remove (struct pstate_idx_revmap_data *) to fix coccinelle WARNING
by the way.

WARNING: casting value returned by memory allocation function to (struct
pstate_idx_revmap_data *) is useless.

	Signed-off-by: Yangtao Li <tiny.windzz@gmail.com>
	Signed-off-by: Viresh Kumar <viresh.kumar@linaro.org>
(cherry picked from commit 5ae06c237fd05a1e9acf6f35891cfd85de792521)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/cpufreq/powernv-cpufreq.c
diff --cc drivers/cpufreq/powernv-cpufreq.c
index 9a3756b76de4,d2230812fa4b..000000000000
--- a/drivers/cpufreq/powernv-cpufreq.c
+++ b/drivers/cpufreq/powernv-cpufreq.c
@@@ -342,7 -356,12 +346,13 @@@ next
  
  	/* End of list marker entry */
  	powernv_freqs[i].frequency = CPUFREQ_TABLE_END;
 -
 -	of_node_put(power_mgt);
  	return 0;
++<<<<<<< HEAD
++=======
+ out:
+ 	of_node_put(power_mgt);
+ 	return rc;
++>>>>>>> 5ae06c237fd0 (cpufreq: powernv: fix missing check of return value in init_powernv_pstates())
  }
  
  /* Returns the CPU frequency corresponding to the pstate_id. */
* Unmerged path drivers/cpufreq/powernv-cpufreq.c
