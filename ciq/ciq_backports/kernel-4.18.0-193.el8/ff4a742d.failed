s390/kernel: convert SYSCALL and PGM_CHECK handlers to .quad

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Gerald Schaefer <gerald.schaefer@de.ibm.com>
commit ff4a742dde3c4b80a91cdd754fed3bc576df28c9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/ff4a742d.failed

With a relocatable kernel that could reside at any place in memory, the
storage size for the SYSCALL and PGM_CHECK handlers needs to be
increased from .long to .quad.

	Signed-off-by: Gerald Schaefer <gerald.schaefer@de.ibm.com>
	Reviewed-by: Philipp Rudo <prudo@linux.ibm.com>
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
(cherry picked from commit ff4a742dde3c4b80a91cdd754fed3bc576df28c9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/s390/kernel/entry.S
diff --cc arch/s390/kernel/entry.S
index 95a52e7334f6,baa67e434b46..000000000000
--- a/arch/s390/kernel/entry.S
+++ b/arch/s390/kernel/entry.S
@@@ -1493,7 -1512,7 +1493,11 @@@ cleanup_critical
  	.quad   .Lsie_skip - .Lsie_entry
  #endif
  	.section .rodata, "a"
++<<<<<<< HEAD
 +#define SYSCALL(esame,emu)	.long esame
++=======
+ #define SYSCALL(esame,emu)	.quad __s390x_ ## esame
++>>>>>>> ff4a742dde3c (s390/kernel: convert SYSCALL and PGM_CHECK handlers to .quad)
  	.globl	sys_call_table
  sys_call_table:
  #include "asm/syscall_table.h"
@@@ -1501,7 -1520,7 +1505,11 @@@
  
  #ifdef CONFIG_COMPAT
  
++<<<<<<< HEAD
 +#define SYSCALL(esame,emu)	.long emu
++=======
+ #define SYSCALL(esame,emu)	.quad __s390_ ## emu
++>>>>>>> ff4a742dde3c (s390/kernel: convert SYSCALL and PGM_CHECK handlers to .quad)
  	.globl	sys_call_table_emu
  sys_call_table_emu:
  #include "asm/syscall_table.h"
diff --git a/arch/s390/include/asm/syscall.h b/arch/s390/include/asm/syscall.h
index 96f9a9151fde..8f77bb4293f9 100644
--- a/arch/s390/include/asm/syscall.h
+++ b/arch/s390/include/asm/syscall.h
@@ -14,13 +14,8 @@
 #include <linux/err.h>
 #include <asm/ptrace.h>
 
-/*
- * The syscall table always contains 32 bit pointers since we know that the
- * address of the function to be called is (way) below 4GB.  So the "int"
- * type here is what we want [need] for both 32 bit and 64 bit systems.
- */
-extern const unsigned int sys_call_table[];
-extern const unsigned int sys_call_table_emu[];
+extern const unsigned long sys_call_table[];
+extern const unsigned long sys_call_table_emu[];
 
 static inline long syscall_get_nr(struct task_struct *task,
 				  struct pt_regs *regs)
* Unmerged path arch/s390/kernel/entry.S
diff --git a/arch/s390/kernel/pgm_check.S b/arch/s390/kernel/pgm_check.S
index 3e62aae34ea3..59dee9d3bebf 100644
--- a/arch/s390/kernel/pgm_check.S
+++ b/arch/s390/kernel/pgm_check.S
@@ -7,7 +7,7 @@
 
 #include <linux/linkage.h>
 
-#define PGM_CHECK(handler)	.long handler
+#define PGM_CHECK(handler)	.quad handler
 #define PGM_CHECK_DEFAULT	PGM_CHECK(default_trap_handler)
 
 /*
