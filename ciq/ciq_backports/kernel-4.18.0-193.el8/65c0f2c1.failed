net/mlx5: Introduce vport metadata matching bits and enum constants

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
Rebuild_CHGLOG: - [kernel] mlx5: Introduce vport metadata matching bits and enum constants (Alaa Hleihel) [1724336]
Rebuild_FUZZ: 96.92%
commit-author Jianbo Liu <jianbol@mellanox.com>
commit 65c0f2c1663649217455a73d48b1c303f133180a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/65c0f2c1.failed

When a dual-port VHCA sends a RoCE packet on its non-native port, and
the packet arrives to its affiliated vport FDB, a mismatch might occur
on the rules that match the packet source vport. So we replace the
match on source port with the match on metadata that was configured in
ingress ACL, and that metadata will be passed further also to the NIC
RX table of the eswitch manager.

Introduce vport metadata matching bits and enum constants as a pre-step
towards metadata matching.
    o metadata type C registers in the misc parameters 2 fields.
    o esw_uplink_ingress_acl bit in esw cap. If it set, the device supports
      ingress ACL for the uplink vport.
    o fdb_to_vport_reg_* bits in flow table cap and esw vport context, to
      support propagating the metadata to the nic rx through the loopback
      path.
    o flow_source in flow context, to indicate the known origin of packets.
    o enum constants, to support the above bits.

	Signed-off-by: Jianbo Liu <jianbol@mellanox.com>
	Reviewed-by: Eli Britstein <elibr@mellanox.com>
	Reviewed-by: Roi Dayan <roid@mellanox.com>
	Reviewed-by: Mark Bloch <markb@mellanox.com>
	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
(cherry picked from commit 65c0f2c1663649217455a73d48b1c303f133180a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/linux/mlx5/mlx5_ifc.h
diff --cc include/linux/mlx5/mlx5_ifc.h
index 4c1b5622ece1,d4409654f760..000000000000
--- a/include/linux/mlx5/mlx5_ifc.h
+++ b/include/linux/mlx5/mlx5_ifc.h
@@@ -665,7 -693,12 +693,16 @@@ struct mlx5_ifc_e_switch_cap_bits 
  	u8         vport_svlan_insert[0x1];
  	u8         vport_cvlan_insert_if_not_exist[0x1];
  	u8         vport_cvlan_insert_overwrite[0x1];
++<<<<<<< HEAD
 +	u8         reserved_at_5[0x17];
++=======
+ 	u8         reserved_at_5[0x3];
+ 	u8         esw_uplink_ingress_acl[0x1];
+ 	u8         reserved_at_9[0x10];
+ 	u8         esw_functions_changed[0x1];
+ 	u8         reserved_at_1a[0x1];
+ 	u8         ecpf_vport_exists[0x1];
++>>>>>>> 65c0f2c16636 (net/mlx5: Introduce vport metadata matching bits and enum constants)
  	u8         counter_eswitch_affinity[0x1];
  	u8         merged_eswitch[0x1];
  	u8         nic_vport_node_guid_modify[0x1];
* Unmerged path include/linux/mlx5/mlx5_ifc.h
