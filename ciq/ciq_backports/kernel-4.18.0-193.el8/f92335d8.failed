bnxt_en: Send FUNC_RESOURCE_QCAPS command in bnxt_resume()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Vasundhara Volam <vasundhara-v.volam@broadcom.com>
commit f92335d830059f3f9db950f0af49405d287924d5
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/f92335d8.failed

After driver unregister, firmware is erasing the information that
driver supports new resource management. Send FUNC_RESOURCE_QCAPS
command to inform the firmware that driver supports new resource
management while resuming from hibernation.  Otherwise, we fallback
to the older resource allocation scheme.

Also, move driver register after sending FUNC_RESOURCE_QCAPS command
to be consistent with the normal initialization sequence.

	Signed-off-by: Vasundhara Volam <vasundhara-v.volam@broadcom.com>
	Signed-off-by: Michael Chan <michael.chan@broadcom.com>
	Signed-off-by: Jakub Kicinski <jakub.kicinski@netronome.com>
(cherry picked from commit f92335d830059f3f9db950f0af49405d287924d5)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/broadcom/bnxt/bnxt.c
diff --cc drivers/net/ethernet/broadcom/bnxt/bnxt.c
index f7c9d57ddad5,69d7ab1d01db..000000000000
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt.c
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt.c
@@@ -11025,7 -11934,7 +11025,11 @@@ static int bnxt_resume(struct device *d
  		goto resume_exit;
  	}
  	pci_set_master(bp->pdev);
++<<<<<<< HEAD
 +	if (bnxt_hwrm_ver_get(bp) || bnxt_hwrm_func_drv_rgtr(bp)) {
++=======
+ 	if (bnxt_hwrm_ver_get(bp)) {
++>>>>>>> f92335d83005 (bnxt_en: Send FUNC_RESOURCE_QCAPS command in bnxt_resume())
  		rc = -ENODEV;
  		goto resume_exit;
  	}
* Unmerged path drivers/net/ethernet/broadcom/bnxt/bnxt.c
