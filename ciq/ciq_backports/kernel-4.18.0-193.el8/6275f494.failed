clocksource/drivers/tcb_clksrc: Move Kconfig option

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Alexandre Belloni <alexandre.belloni@bootlin.com>
commit 6275f4947e2f13a13a509d9fec4e1e5b15152680
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/6275f494.failed

Move the ATMEL_TCB_CLKSRC option to drivers/clocksource and make it silent
if COMPILE_TEST is not selected.

	Cc: Arnd Bergmann <arnd@arndb.de>
	Signed-off-by: Alexandre Belloni <alexandre.belloni@bootlin.com>
	Signed-off-by: Daniel Lezcano <daniel.lezcano@linaro.org>
(cherry picked from commit 6275f4947e2f13a13a509d9fec4e1e5b15152680)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/misc/Kconfig
diff --cc drivers/misc/Kconfig
index 3726eacdf65d,c84033909395..000000000000
--- a/drivers/misc/Kconfig
+++ b/drivers/misc/Kconfig
@@@ -59,30 -59,6 +59,33 @@@ config ATMEL_TCLI
  	  blocks found on many Atmel processors.  This facilitates using
  	  these blocks by different drivers despite processor differences.
  
++<<<<<<< HEAD
 +config ATMEL_TCB_CLKSRC
 +	bool "TC Block Clocksource"
 +	depends on ATMEL_TCLIB
 +	default y
 +	help
 +	  Select this to get a high precision clocksource based on a
 +	  TC block with a 5+ MHz base clock rate.  Two timer channels
 +	  are combined to make a single 32-bit timer.
 +
 +	  When GENERIC_CLOCKEVENTS is defined, the third timer channel
 +	  may be used as a clock event device supporting oneshot mode
 +	  (delays of up to two seconds) based on the 32 KiHz clock.
 +
 +config ATMEL_TCB_CLKSRC_BLOCK
 +	int
 +	depends on ATMEL_TCB_CLKSRC
 +	default 0
 +	range 0 1
 +	help
 +	  Some chips provide more than one TC block, so you have the
 +	  choice of which one to use for the clock framework.  The other
 +	  TC can be used for other purposes, such as PWM generation and
 +	  interval timing.
 +
++=======
++>>>>>>> 6275f4947e2f (clocksource/drivers/tcb_clksrc: Move Kconfig option)
  config DUMMY_IRQ
  	tristate "Dummy IRQ handler"
  	default n
diff --git a/drivers/clocksource/Kconfig b/drivers/clocksource/Kconfig
index dec0dd88ec15..01fe2178d0fe 100644
--- a/drivers/clocksource/Kconfig
+++ b/drivers/clocksource/Kconfig
@@ -403,6 +403,13 @@ config ATMEL_ST
 	help
 	  Support for the Atmel ST timer.
 
+config ATMEL_TCB_CLKSRC
+	bool "Atmel TC Block timer driver" if COMPILE_TEST
+	depends on HAS_IOMEM
+	select TIMER_OF if OF
+	help
+	  Support for Timer Counter Blocks on Atmel SoCs.
+
 config CLKSRC_EXYNOS_MCT
 	bool "Exynos multi core timer driver" if COMPILE_TEST
 	depends on ARM || ARM64
* Unmerged path drivers/misc/Kconfig
