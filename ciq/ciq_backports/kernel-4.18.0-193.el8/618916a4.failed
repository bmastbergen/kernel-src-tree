kbuild: replace BASH-specific ${@:2} with shift and ${@}

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Andrii Nakryiko <andriin@fb.com>
commit 618916a4bf169450e4680173a4b105a1816a7d6d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/618916a4.failed

${@:2} is BASH-specific extension, which makes link-vmlinux.sh rely on
BASH. Use shift and ${@} instead to fix this issue.

	Reported-by: Stephen Rothwell <sfr@canb.auug.org.au>
Fixes: 341dfcf8d78e ("btf: expose BTF info through sysfs")
	Cc: Stephen Rothwell <sfr@canb.auug.org.au>
	Cc: Masahiro Yamada <yamada.masahiro@socionext.com>
	Signed-off-by: Andrii Nakryiko <andriin@fb.com>
	Acked-by: Yonghong Song <yhs@fb.com>
	Reviewed-by: Masahiro Yamada <yamada.masahiro@socionext.com>
	Signed-off-by: Alexei Starovoitov <ast@kernel.org>
(cherry picked from commit 618916a4bf169450e4680173a4b105a1816a7d6d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	scripts/link-vmlinux.sh
diff --cc scripts/link-vmlinux.sh
index 4b776595ffb3,8c59970a09dc..000000000000
--- a/scripts/link-vmlinux.sh
+++ b/scripts/link-vmlinux.sh
@@@ -79,23 -56,28 +79,39 @@@ modpost_link(
  }
  
  # Link of vmlinux
++<<<<<<< HEAD
 +# ${1} - optional extra .o files
 +# ${2} - output file
++=======
+ # ${1} - output file
+ # ${2}, ${3}, ... - optional extra .o files
++>>>>>>> 618916a4bf16 (kbuild: replace BASH-specific ${@:2} with shift and ${@})
  vmlinux_link()
  {
  	local lds="${objtree}/${KBUILD_LDS}"
+ 	local output=${1}
  	local objects
  
+ 	# skip output file argument
+ 	shift
+ 
  	if [ "${SRCARCH}" != "um" ]; then
  		objects="--whole-archive			\
 -			${KBUILD_VMLINUX_OBJS}			\
 +			built-in.a				\
  			--no-whole-archive			\
  			--start-group				\
  			${KBUILD_VMLINUX_LIBS}			\
  			--end-group				\
++<<<<<<< HEAD
 +			${1}"
 +
 +		${LD} ${LDFLAGS} ${LDFLAGS_vmlinux} -o ${2}	\
++=======
+ 			${@}"
+ 
+ 		${LD} ${KBUILD_LDFLAGS} ${LDFLAGS_vmlinux}	\
+ 			-o ${output}				\
++>>>>>>> 618916a4bf16 (kbuild: replace BASH-specific ${@:2} with shift and ${@})
  			-T ${lds} ${objects}
  	else
  		objects="-Wl,--whole-archive			\
@@@ -104,9 -86,10 +120,16 @@@
  			-Wl,--start-group			\
  			${KBUILD_VMLINUX_LIBS}			\
  			-Wl,--end-group				\
++<<<<<<< HEAD
 +			${1}"
 +
 +		${CC} ${CFLAGS_vmlinux} -o ${2}			\
++=======
+ 			${@}"
+ 
+ 		${CC} ${CFLAGS_vmlinux}				\
+ 			-o ${output}				\
++>>>>>>> 618916a4bf16 (kbuild: replace BASH-specific ${@:2} with shift and ${@})
  			-Wl,-T,${lds}				\
  			${objects}				\
  			-lutil -lrt -lpthread
* Unmerged path scripts/link-vmlinux.sh
