bnxt_en: Fix the size of devlink MSIX parameters.

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
Rebuild_CHGLOG: - [netdrv] bnxt_en: Fix the size of devlink MSIX parameters (Jonathan Toppins) [1773724]
Rebuild_FUZZ: 98.97%
commit-author Vasundhara Volam <vasundhara-v.volam@broadcom.com>
commit c329230ce886f449a6e559b636096b75ab00d18a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/c329230c.failed

The current code that rounds up the NVRAM parameter bit size to the next
byte size for the devlink parameter is not always correct.  The MSIX
devlink parameters are 4 bytes and we don't get the correct size
using this method.

Fix it by adding a new dl_num_bytes member to the bnxt_dl_nvm_param
structure which statically provides bytesize information according
to the devlink parameter type definition.

Fixes: 782a624d00fa ("bnxt_en: Add bnxt_en initial port params table and register it")
	Cc: Jiri Pirko <jiri@mellanox.com>
	Signed-off-by: Vasundhara Volam <vasundhara-v.volam@broadcom.com>
	Signed-off-by: Michael Chan <michael.chan@broadcom.com>
	Signed-off-by: Jakub Kicinski <jakub.kicinski@netronome.com>
(cherry picked from commit c329230ce886f449a6e559b636096b75ab00d18a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c
diff --cc drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c
index 336fbceafb45,68f74f52fe88..000000000000
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c
@@@ -86,8 -271,8 +85,13 @@@ static int bnxt_hwrm_nvm_req(struct bnx
  		return -EFAULT;
  	}
  
++<<<<<<< HEAD
 +	data_addr = dma_zalloc_coherent(&bp->pdev->dev, bytesize,
 +					&data_dma_addr, GFP_KERNEL);
++=======
+ 	data_addr = dma_alloc_coherent(&bp->pdev->dev, nvm_param.dl_num_bytes,
+ 				       &data_dma_addr, GFP_KERNEL);
++>>>>>>> c329230ce886 (bnxt_en: Fix the size of devlink MSIX parameters.)
  	if (!data_addr)
  		return -ENOMEM;
  
* Unmerged path drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c
diff --git a/drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.h b/drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.h
index 5b6b2c7d97cf..177f3137d998 100644
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.h
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.h
@@ -52,7 +52,8 @@ struct bnxt_dl_nvm_param {
 	u16 id;
 	u16 offset;
 	u16 dir_type;
-	u16 num_bits;
+	u16 nvm_num_bits;
+	u8 dl_num_bytes;
 };
 
 int bnxt_dl_register(struct bnxt *bp);
