perf session: Replace MAX_NR_CPUS with perf_env::nr_cpus_online

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Kyle Meyer <meyerk@hpe.com>
commit 7df4e36a4785618f0c63f3dc2bacb164780ab0f6
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/7df4e36a.failed

nr_cpus, the number of CPUs online during a record session bound by
MAX_NR_CPUS, can be used as a dynamic alternative for MAX_NR_CPUS in
perf_session__cpu_bitmap.

	Signed-off-by: Kyle Meyer <kyle.meyer@hpe.com>
	Reviewed-by: Jiri Olsa <jolsa@redhat.com>
	Cc: Alexander Shishkin <alexander.shishkin@linux.intel.com>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Peter Zijlstra <peterz@infradead.org>
	Cc: Russ Anderson <russ.anderson@hpe.com>
Link: http://lore.kernel.org/lkml/20190827214352.94272-5-meyerk@stormcage.eag.rdlabs.hpecorp.net
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 7df4e36a4785618f0c63f3dc2bacb164780ab0f6)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/util/session.c
diff --cc tools/perf/util/session.c
index 5456c84c7dd1,13486bcf74a0..000000000000
--- a/tools/perf/util/session.c
+++ b/tools/perf/util/session.c
@@@ -2052,10 -2291,11 +2052,15 @@@ int perf_session__cpu_bitmap(struct per
  			     const char *cpu_list, unsigned long *cpu_bitmap)
  {
  	int i, err = -1;
++<<<<<<< HEAD
 +	struct cpu_map *map;
++=======
+ 	struct perf_cpu_map *map;
+ 	int nr_cpus = min(session->header.env.nr_cpus_online, MAX_NR_CPUS);
++>>>>>>> 7df4e36a4785 (perf session: Replace MAX_NR_CPUS with perf_env::nr_cpus_online)
  
  	for (i = 0; i < PERF_TYPE_MAX; ++i) {
 -		struct evsel *evsel;
 +		struct perf_evsel *evsel;
  
  		evsel = perf_session__find_first_evtype(session, i);
  		if (!evsel)
* Unmerged path tools/perf/util/session.c
