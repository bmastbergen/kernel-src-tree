net_sched: fix backward compatibility for TCA_ACT_KIND

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Cong Wang <xiyou.wangcong@gmail.com>
commit 4b793feccae3b06764268377a4030eb774ed924e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/4b793fec.failed

For TCA_ACT_KIND, we have to keep the backward compatibility too,
and rely on nla_strlcpy() to check and terminate the string with
a NUL.

Note for TC actions, nla_strcmp() is already used to compare kind
strings, so we don't need to fix other places.

Fixes: 199ce850ce11 ("net_sched: add policy validation for action attributes")
	Reported-by: Marcelo Ricardo Leitner <marcelo.leitner@gmail.com>
	Cc: Jamal Hadi Salim <jhs@mojatatu.com>
	Cc: Jiri Pirko <jiri@resnulli.us>
	Signed-off-by: Cong Wang <xiyou.wangcong@gmail.com>
	Reviewed-by: Marcelo Ricardo Leitner <marcelo.leitner@gmail.com>
	Signed-off-by: Jakub Kicinski <jakub.kicinski@netronome.com>
(cherry picked from commit 4b793feccae3b06764268377a4030eb774ed924e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/sched/act_api.c
diff --cc net/sched/act_api.c
index d35eb0b8379b,4e7429c6f864..000000000000
--- a/net/sched/act_api.c
+++ b/net/sched/act_api.c
@@@ -837,6 -831,14 +837,17 @@@ static struct tc_cookie *nla_memdup_coo
  	return c;
  }
  
++<<<<<<< HEAD
++=======
+ static const struct nla_policy tcf_action_policy[TCA_ACT_MAX + 1] = {
+ 	[TCA_ACT_KIND]		= { .type = NLA_STRING },
+ 	[TCA_ACT_INDEX]		= { .type = NLA_U32 },
+ 	[TCA_ACT_COOKIE]	= { .type = NLA_BINARY,
+ 				    .len = TC_COOKIE_MAX_SIZE },
+ 	[TCA_ACT_OPTIONS]	= { .type = NLA_NESTED },
+ };
+ 
++>>>>>>> 4b793feccae3 (net_sched: fix backward compatibility for TCA_ACT_KIND)
  struct tc_action *tcf_action_init_1(struct net *net, struct tcf_proto *tp,
  				    struct nlattr *nla, struct nlattr *est,
  				    char *name, int ovr, int bind,
* Unmerged path net/sched/act_api.c
