bnxt_en: Return proper error code for non-existent NVM variable

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Vasundhara Volam <vasundhara-v.volam@broadcom.com>
commit 05069dd4c577f9b143dfd243d55834333c4470c5
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/05069dd4.failed

For NVM params that are not supported in the current NVM
configuration, return the error as -EOPNOTSUPP.

	Signed-off-by: Vasundhara Volam <vasundhara-v.volam@broadcom.com>
	Signed-off-by: Michael Chan <michael.chan@broadcom.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 05069dd4c577f9b143dfd243d55834333c4470c5)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c
diff --cc drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c
index 336fbceafb45,707827176231..000000000000
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c
@@@ -104,11 -335,19 +104,25 @@@ static int bnxt_hwrm_nvm_req(struct bnx
  	} else {
  		rc = hwrm_send_message_silent(bp, msg, msg_len,
  					      HWRM_CMD_TIMEOUT);
++<<<<<<< HEAD
++=======
+ 		if (!rc) {
+ 			bnxt_copy_from_nvm_data(val, data,
+ 						nvm_param.nvm_num_bits,
+ 						nvm_param.dl_num_bytes);
+ 		} else {
+ 			struct hwrm_err_output *resp = bp->hwrm_cmd_resp_addr;
+ 
+ 			if (resp->cmd_err ==
+ 				NVM_GET_VARIABLE_CMD_ERR_CODE_VAR_NOT_EXIST)
+ 				rc = -EOPNOTSUPP;
+ 		}
++>>>>>>> 05069dd4c577 (bnxt_en: Return proper error code for non-existent NVM variable)
  	}
 -	dma_free_coherent(&bp->pdev->dev, sizeof(*data), data, data_dma_addr);
 +	if (!rc && req->req_type == cpu_to_le16(HWRM_NVM_GET_VARIABLE))
 +		memcpy(buf, data_addr, bytesize);
 +
 +	dma_free_coherent(&bp->pdev->dev, bytesize, data_addr, data_dma_addr);
  	if (rc == -EACCES)
  		netdev_err(bp->dev, "PF does not have admin privileges to modify NVM config\n");
  	return rc;
* Unmerged path drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c
