tcp: clear tp->segs_{in|out} in tcp_disconnect()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Eric Dumazet <edumazet@google.com>
commit 784f8344de750a41344f4bbbebb8507a730fc99c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/784f8344.failed

tp->segs_in and tp->segs_out need to be cleared in tcp_disconnect().

tcp_disconnect() is rarely used, but it is worth fixing it.

Fixes: 2efd055c53c0 ("tcp: add tcpi_segs_in and tcpi_segs_out to tcp_info")
	Signed-off-by: Eric Dumazet <edumazet@google.com>
	Cc: Marcelo Ricardo Leitner <mleitner@redhat.com>
	Cc: Yuchung Cheng <ycheng@google.com>
	Cc: Neal Cardwell <ncardwell@google.com>
	Acked-by: Neal Cardwell <ncardwell@google.com>
	Signed-off-by: Jakub Kicinski <kuba@kernel.org>
(cherry picked from commit 784f8344de750a41344f4bbbebb8507a730fc99c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv4/tcp.c
diff --cc net/ipv4/tcp.c
index 60983ad5fe35,eb2d80519f8e..000000000000
--- a/net/ipv4/tcp.c
+++ b/net/ipv4/tcp.c
@@@ -2614,8 -2639,36 +2614,14 @@@ int tcp_disconnect(struct sock *sk, in
  	sk->sk_rx_dst = NULL;
  	tcp_saved_syn_free(tp);
  	tp->compressed_ack = 0;
++<<<<<<< HEAD
++=======
+ 	tp->segs_in = 0;
+ 	tp->segs_out = 0;
+ 	tp->bytes_sent = 0;
++>>>>>>> 784f8344de75 (tcp: clear tp->segs_{in|out} in tcp_disconnect())
  	tp->bytes_acked = 0;
  	tp->bytes_received = 0;
 -	tp->bytes_retrans = 0;
 -	tp->data_segs_in = 0;
 -	tp->data_segs_out = 0;
 -	tp->duplicate_sack[0].start_seq = 0;
 -	tp->duplicate_sack[0].end_seq = 0;
 -	tp->dsack_dups = 0;
 -	tp->reord_seen = 0;
 -	tp->retrans_out = 0;
 -	tp->sacked_out = 0;
 -	tp->tlp_high_seq = 0;
 -	tp->last_oow_ack_time = 0;
 -	/* There's a bubble in the pipe until at least the first ACK. */
 -	tp->app_limited = ~0U;
 -	tp->rack.mstamp = 0;
 -	tp->rack.advanced = 0;
 -	tp->rack.reo_wnd_steps = 1;
 -	tp->rack.last_delivered = 0;
 -	tp->rack.reo_wnd_persist = 0;
 -	tp->rack.dsack_seen = 0;
 -	tp->syn_data_acked = 0;
 -	tp->rx_opt.saw_tstamp = 0;
 -	tp->rx_opt.dsack = 0;
 -	tp->rx_opt.num_sacks = 0;
 -	tp->rcv_ooopack = 0;
 -
  
  	/* Clean up fastopen related fields */
  	tcp_free_fastopen_req(tp);
* Unmerged path net/ipv4/tcp.c
