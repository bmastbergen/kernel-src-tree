IB/rdmavt: Fix variable shadowing issue in rvt_create_cq

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Nathan Chancellor <natechancellor@gmail.com>
commit 4d2b8517ba1f3aba9a952ebf153ec972a127c80c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/4d2b8517.failed

clang warns:

drivers/infiniband/sw/rdmavt/cq.c:260:7: warning: variable 'err' is used
uninitialized whenever 'if' condition is true
[-Wsometimes-uninitialized]
                if (err)
                    ^~~
drivers/infiniband/sw/rdmavt/cq.c:310:9: note: uninitialized use occurs
here
        return err;
               ^~~
drivers/infiniband/sw/rdmavt/cq.c:260:3: note: remove the 'if' if its
condition is always false
                if (err)
                ^~~~~~~~
drivers/infiniband/sw/rdmavt/cq.c:253:7: warning: variable 'err' is used
uninitialized whenever 'if' condition is true
[-Wsometimes-uninitialized]
                if (!cq->ip) {
                    ^~~~~~~
drivers/infiniband/sw/rdmavt/cq.c:310:9: note: uninitialized use occurs
here
        return err;
               ^~~
drivers/infiniband/sw/rdmavt/cq.c:253:3: note: remove the 'if' if its
condition is always false
                if (!cq->ip) {
                ^~~~~~~~~~~~~~
drivers/infiniband/sw/rdmavt/cq.c:211:9: note: initialize the variable
'err' to silence this warning
        int err;
               ^
                = 0
2 warnings generated.

The function scoped err variable is uninitialized when the flow jumps into
the if statement. The if scoped err variable shadows the function scoped
err variable, preventing the err assignments within the if statement to be
reflected at the function level, which will cause uninitialized use when
the goto statements are taken.

Just remove the if scoped err declaration so that there is only one copy
of the err variable for this function.

Fixes: 239b0e52d8aa ("IB/hfi1: Move rvt_cq_wc struct into uapi directory")
Link: https://github.com/ClangBuiltLinux/linux/issues/594
	Reviewed-by: Nick Desaulniers <ndesaulniers@google.com>
	Signed-off-by: Nathan Chancellor <natechancellor@gmail.com>
	Acked-by: Mike Marciniszyn <mike.marciniszyn@intel.com>
	Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
(cherry picked from commit 4d2b8517ba1f3aba9a952ebf153ec972a127c80c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/sw/rdmavt/cq.c
diff --cc drivers/infiniband/sw/rdmavt/cq.c
index 4f1544ad4aff,a85571a4cf57..000000000000
--- a/drivers/infiniband/sw/rdmavt/cq.c
+++ b/drivers/infiniband/sw/rdmavt/cq.c
@@@ -230,11 -247,9 +230,15 @@@ struct ib_cq *rvt_create_cq(struct ib_d
  	 * See rvt_mmap() for details.
  	 */
  	if (udata && udata->outlen >= sizeof(__u64)) {
++<<<<<<< HEAD
 +		int err;
 +
 +		cq->ip = rvt_create_mmap_info(rdi, sz, context, wc);
++=======
+ 		cq->ip = rvt_create_mmap_info(rdi, sz, udata, u_wc);
++>>>>>>> 4d2b8517ba1f (IB/rdmavt: Fix variable shadowing issue in rvt_create_cq)
  		if (!cq->ip) {
 -			err = -ENOMEM;
 +			ret = ERR_PTR(-ENOMEM);
  			goto bail_wc;
  		}
  
* Unmerged path drivers/infiniband/sw/rdmavt/cq.c
