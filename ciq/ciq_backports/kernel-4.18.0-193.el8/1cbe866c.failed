IB/core: Fix wrong iterating on ports

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Mohamad Heib <mohamadh@mellanox.com>
commit 1cbe866cbcb53338de33cf67262e73f9315a9725
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/1cbe866c.failed

rdma_for_each_port is already incrementing the iterator's value it
receives therefore, after the first iteration the iterator is increased by
2 which eventually causing wrong queries and possible traces.

Fix the above by removing the old redundant incrementation that was used
before rdma_for_each_port() macro.

	Cc: <stable@vger.kernel.org>
Fixes: ea1075edcbab ("RDMA: Add and use rdma_for_each_port")
Link: https://lore.kernel.org/r/20191002122127.17571-1-leon@kernel.org
	Signed-off-by: Mohamad Heib <mohamadh@mellanox.com>
	Reviewed-by: Erez Alfasi <ereza@mellanox.com>
	Signed-off-by: Leon Romanovsky <leonro@mellanox.com>
	Reviewed-by: Jason Gunthorpe <jgg@mellanox.com>
	Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
(cherry picked from commit 1cbe866cbcb53338de33cf67262e73f9315a9725)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/core/security.c
diff --cc drivers/infiniband/core/security.c
index dad6a94a43f3,6eb6d2717ca5..000000000000
--- a/drivers/infiniband/core/security.c
+++ b/drivers/infiniband/core/security.c
@@@ -426,8 -425,11 +426,16 @@@ int ib_create_qp_security(struct ib_qp 
  	bool is_ib = false;
  	int ret;
  
++<<<<<<< HEAD
 +	while (i <= rdma_end_port(dev) && !is_ib)
 +		is_ib = rdma_protocol_ib(dev, i++);
++=======
+ 	rdma_for_each_port (dev, i) {
+ 		is_ib = rdma_protocol_ib(dev, i);
+ 		if (is_ib)
+ 			break;
+ 	}
++>>>>>>> 1cbe866cbcb5 (IB/core: Fix wrong iterating on ports)
  
  	/* If this isn't an IB device don't create the security context */
  	if (!is_ib)
* Unmerged path drivers/infiniband/core/security.c
