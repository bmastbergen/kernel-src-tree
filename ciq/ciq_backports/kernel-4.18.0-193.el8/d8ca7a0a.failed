ASoC: soc-core: call snd_soc_dapm_debugfs_init() at soc_init_card_debugfs()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
Rebuild_CHGLOG: - [sound] ALSA: ASoC: soc-core: call snd_soc_dapm_debugfs_init() at soc_init_card_debugfs() (Jaroslav Kysela) [1738610]
Rebuild_FUZZ: 96.15%
commit-author Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
commit d8ca7a0a8583fc491b625450580c4092879af3dd
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/d8ca7a0a.failed

We have 2 soc_init_card_debugfs() implementations for with/without DEBUG_FS.
But, snd_soc_instantiate_card() calls snd_soc_dapm_debugfs_init() under
ifdef DEBUG_FS after soc_init_card_debugfs(). This is very strange.
We can call snd_soc_dapm_debugfs_init() under soc_init_card_debugfs().

	#ifdef CONFIG_DEBUG_FS
=>	static void soc_init_card_debugfs(...)
	{
		...
	}
	...
	#else
=>	static inline void soc_init_card_debugfs(...)
	{
		...
	}
	#endif

	static int snd_soc_instantiate_card(struct snd_soc_card *card)
	{
		...
=>		soc_init_card_debugfs(card);

*	#ifdef CONFIG_DEBUG_FS
*		snd_soc_dapm_debugfs_init(&card->dapm, card->debugfs_card_root);
*	#endif
	}

	Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
Link: https://lore.kernel.org/r/87a7clahob.wl-kuninori.morimoto.gx@renesas.com
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit d8ca7a0a8583fc491b625450580c4092879af3dd)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/soc-core.c
diff --cc sound/soc/soc-core.c
index 0a604d7c59ca,cf3d967d731e..000000000000
--- a/sound/soc/soc-core.c
+++ b/sound/soc/soc-core.c
@@@ -217,23 -211,13 +217,30 @@@ DEFINE_SHOW_ATTRIBUTE(component_list)
  
  static void soc_init_card_debugfs(struct snd_soc_card *card)
  {
 +	if (!snd_soc_debugfs_root)
 +		return;
 +
  	card->debugfs_card_root = debugfs_create_dir(card->name,
  						     snd_soc_debugfs_root);
 +	if (!card->debugfs_card_root) {
 +		dev_warn(card->dev,
 +			 "ASoC: Failed to create card debugfs directory\n");
 +		return;
 +	}
  
++<<<<<<< HEAD
 +	card->debugfs_pop_time = debugfs_create_u32("dapm_pop_time", 0644,
 +						    card->debugfs_card_root,
 +						    &card->pop_time);
 +	if (!card->debugfs_pop_time)
 +		dev_warn(card->dev,
 +			 "ASoC: Failed to create pop time debugfs file\n");
++=======
+ 	debugfs_create_u32("dapm_pop_time", 0644, card->debugfs_card_root,
+ 			   &card->pop_time);
+ 
+ 	snd_soc_dapm_debugfs_init(&card->dapm, card->debugfs_card_root);
++>>>>>>> d8ca7a0a8583 (ASoC: soc-core: call snd_soc_dapm_debugfs_init() at soc_init_card_debugfs())
  }
  
  static void soc_cleanup_card_debugfs(struct snd_soc_card *card)
* Unmerged path sound/soc/soc-core.c
