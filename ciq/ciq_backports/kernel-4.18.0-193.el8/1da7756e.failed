net: phy: realtek: Change TX-delay setting for RGMII modes only

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
Rebuild_CHGLOG: - [netdrv] phy: realtek: Change TX-delay setting for RGMII modes only (Petr Oros) [1772010]
Rebuild_FUZZ: 95.87%
commit-author Serge Semin <fancer.lancer@gmail.com>
commit 1da7756e6616c7795c8a104fde0a66f212ef659d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/1da7756e.failed

It's prone to problems if delay is cleared out for other than RGMII
modes. So lets set/clear the TX-delay in the config register only
if actually RGMII-like interface mode is requested. This only
concerns rtl8211f chips.

	Signed-off-by: Serge Semin <fancer.lancer@gmail.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 1da7756e6616c7795c8a104fde0a66f212ef659d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/phy/realtek.c
diff --cc drivers/net/phy/realtek.c
index 8040b7f82f98,761ce3b1e7bd..000000000000
--- a/drivers/net/phy/realtek.c
+++ b/drivers/net/phy/realtek.c
@@@ -159,17 -161,23 +159,36 @@@ static int rtl8211c_config_init(struct 
  
  static int rtl8211f_config_init(struct phy_device *phydev)
  {
++<<<<<<< HEAD
 +	int ret;
 +	u16 val = 0;
 +
 +	ret = genphy_config_init(phydev);
 +	if (ret < 0)
 +		return ret;
 +
 +	/* enable TX-delay for rgmii-id and rgmii-txid, otherwise disable it */
 +	if (phydev->interface == PHY_INTERFACE_MODE_RGMII_ID ||
 +	    phydev->interface == PHY_INTERFACE_MODE_RGMII_TXID)
++=======
+ 	u16 val;
+ 
+ 	/* enable TX-delay for rgmii-{id,txid}, and disable it for rgmii and
+ 	 * rgmii-rxid. The RX-delay can be enabled by the external RXDLY pin.
+ 	 */
+ 	switch (phydev->interface) {
+ 	case PHY_INTERFACE_MODE_RGMII:
+ 	case PHY_INTERFACE_MODE_RGMII_RXID:
+ 		val = 0;
+ 		break;
+ 	case PHY_INTERFACE_MODE_RGMII_ID:
+ 	case PHY_INTERFACE_MODE_RGMII_TXID:
++>>>>>>> 1da7756e6616 (net: phy: realtek: Change TX-delay setting for RGMII modes only)
  		val = RTL8211F_TX_DELAY;
+ 		break;
+ 	default: /* the rest of the modes imply leaving delay as is. */
+ 		return 0;
+ 	}
  
  	return phy_modify_paged(phydev, 0xd08, 0x11, RTL8211F_TX_DELAY, val);
  }
* Unmerged path drivers/net/phy/realtek.c
