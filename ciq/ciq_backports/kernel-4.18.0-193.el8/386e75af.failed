net/mlx5: Rename mlx5_pci_dev_type to mlx5_coredev_type

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
Rebuild_CHGLOG: - [kernel] mlx5: Rename mlx5_pci_dev_type to mlx5_coredev_type (Alaa Hleihel) [1724336]
Rebuild_FUZZ: 96.23%
commit-author Huy Nguyen <huyn@mellanox.com>
commit 386e75af995c3aec475a2185b919bf46af396bfc
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/386e75af.failed

Rename mlx5_pci_dev_type to mlx5_coredev_type to distinguish different mlx5
device types.

mlx5_coredev_type represents mlx5_core_dev instance type. Hence keep
mlx5_coredev_type in mlx5_core_dev structure.

	Signed-off-by: Huy Nguyen <huyn@mellanox.com>
	Signed-off-by: Vu Pham <vuhuong@mellanox.com>
	Signed-off-by: Parav Pandit <parav@mellanox.com>
	Reviewed-by: Parav Pandit <parav@mellanox.com>
	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
(cherry picked from commit 386e75af995c3aec475a2185b919bf46af396bfc)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/main.c
#	include/linux/mlx5/driver.h
diff --cc drivers/net/ethernet/mellanox/mlx5/core/main.c
index ea5e5990b832,e5f9df7f7e34..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/main.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/main.c
@@@ -1334,9 -1284,58 +1334,54 @@@ static int init_one(struct pci_dev *pde
  	if (err)
  		goto err_pagealloc_init;
  
++<<<<<<< HEAD
 +	err = mlx5_load_one(dev, priv, true);
++=======
+ 	return 0;
+ 
+ err_pagealloc_init:
+ 	mlx5_health_cleanup(dev);
+ err_health_init:
+ 	debugfs_remove(dev->priv.dbg_root);
+ 
+ 	return err;
+ }
+ 
+ static void mlx5_mdev_uninit(struct mlx5_core_dev *dev)
+ {
+ 	mlx5_pagealloc_cleanup(dev);
+ 	mlx5_health_cleanup(dev);
+ 	debugfs_remove_recursive(dev->priv.dbg_root);
+ }
+ 
+ #define MLX5_IB_MOD "mlx5_ib"
+ static int init_one(struct pci_dev *pdev, const struct pci_device_id *id)
+ {
+ 	struct mlx5_core_dev *dev;
+ 	struct devlink *devlink;
+ 	int err;
+ 
+ 	devlink = devlink_alloc(&mlx5_devlink_ops, sizeof(*dev));
+ 	if (!devlink) {
+ 		dev_err(&pdev->dev, "kzalloc failed\n");
+ 		return -ENOMEM;
+ 	}
+ 
+ 	dev = devlink_priv(devlink);
+ 	dev->device = &pdev->dev;
+ 	dev->pdev = pdev;
+ 
+ 	dev->coredev_type = id->driver_data & MLX5_PCI_DEV_IS_VF ?
+ 			 MLX5_COREDEV_VF : MLX5_COREDEV_PF;
+ 
+ 	err = mlx5_mdev_init(dev, prof_sel);
+ 	if (err)
+ 		goto mdev_init_err;
+ 
+ 	err = mlx5_pci_init(dev, pdev, id);
++>>>>>>> 386e75af995c (net/mlx5: Rename mlx5_pci_dev_type to mlx5_coredev_type)
  	if (err) {
 -		mlx5_core_err(dev, "mlx5_pci_init failed with error code %d\n",
 -			      err);
 -		goto pci_init_err;
 -	}
 -
 -	err = mlx5_load_one(dev, true);
 -	if (err) {
 -		mlx5_core_err(dev, "mlx5_load_one failed with error code %d\n",
 -			      err);
 +		dev_err(&pdev->dev, "mlx5_load_one failed with error code %d\n", err);
  		goto err_load_one;
  	}
  
diff --cc include/linux/mlx5/driver.h
index 27d72405e39f,155b8cbe1cc9..000000000000
--- a/include/linux/mlx5/driver.h
+++ b/include/linux/mlx5/driver.h
@@@ -561,7 -572,7 +566,11 @@@ struct mlx5_priv 
  	struct mlx5_core_sriov	sriov;
  	struct mlx5_lag		*lag;
  	struct mlx5_devcom	*devcom;
++<<<<<<< HEAD
 +	unsigned long		pci_dev_data;
++=======
+ 	struct mlx5_core_roce	roce;
++>>>>>>> 386e75af995c (net/mlx5: Rename mlx5_pci_dev_type to mlx5_coredev_type)
  	struct mlx5_fc_stats		fc_stats;
  	struct mlx5_rl_table            rl_table;
  
@@@ -634,12 -645,12 +643,17 @@@ struct mlx5_clock 
  	struct mlx5_pps            pps_info;
  };
  
 -struct mlx5_fw_tracer;
  struct mlx5_vxlan;
 +struct mlx5_geneve;
 +
 +struct mlx5_fw_tracer;
  
  struct mlx5_core_dev {
++<<<<<<< HEAD
++=======
+ 	struct device *device;
+ 	enum mlx5_coredev_type coredev_type;
++>>>>>>> 386e75af995c (net/mlx5: Rename mlx5_pci_dev_type to mlx5_coredev_type)
  	struct pci_dev	       *pdev;
  	/* sync pci state */
  	struct mutex		pci_status_mutex;
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/main.c
* Unmerged path include/linux/mlx5/driver.h
