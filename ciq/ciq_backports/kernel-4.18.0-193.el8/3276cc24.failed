arm64: Update silicon-errata.txt for Neoverse-N1 #1349291

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
Rebuild_CHGLOG: - [arm64] Update silicon-errata.txt for Neoverse-N1 #1349291 (Auger Eric) [1749501]
Rebuild_FUZZ: 93.46%
commit-author James Morse <james.morse@arm.com>
commit 3276cc2489641f7f37e9558f5fe9d6ae17a25528
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/3276cc24.failed

Neoverse-N1 affected by #1349291 may report an Uncontained RAS Error
as Unrecoverable. The kernel's architecture code already considers
Unrecoverable errors as fatal as without kernel-first support no
further error-handling is possible.

Now that KVM attributes SError to the host/guest more precisely
the host's architecture code will always handle host errors that
become pending during world-switch.
Errors misclassified by this errata that affected the guest will be
re-injected to the guest as an implementation-defined SError, which can
be uncontained.

Until kernel-first support is implemented, no workaround is needed
for this issue.

	Signed-off-by: James Morse <james.morse@arm.com>
	Signed-off-by: Marc Zyngier <marc.zyngier@arm.com>
(cherry picked from commit 3276cc2489641f7f37e9558f5fe9d6ae17a25528)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	Documentation/arm64/silicon-errata.txt
diff --cc Documentation/arm64/silicon-errata.txt
index e311dab9df6a,51d506a1f8dc..000000000000
--- a/Documentation/arm64/silicon-errata.txt
+++ b/Documentation/arm64/silicon-errata.txt
@@@ -56,11 -58,15 +56,19 @@@ stable kernels
  | ARM            | Cortex-A72      | #853709         | N/A                         |
  | ARM            | Cortex-A73      | #858921         | ARM64_ERRATUM_858921        |
  | ARM            | Cortex-A55      | #1024718        | ARM64_ERRATUM_1024718       |
 -| ARM            | Cortex-A76      | #1188873,1418040| ARM64_ERRATUM_1418040       |
 +| ARM            | Cortex-A76      | #1188873        | ARM64_ERRATUM_1188873       |
  | ARM            | Cortex-A76      | #1165522        | ARM64_ERRATUM_1165522       |
++<<<<<<< HEAD
 +| ARM            | MMU-500         | #841119,#826419 | N/A                         |
++=======
+ | ARM            | Cortex-A76      | #1286807        | ARM64_ERRATUM_1286807       |
+ | ARM            | Cortex-A76      | #1463225        | ARM64_ERRATUM_1463225       |
+ | ARM            | Neoverse-N1     | #1188873,1418040| ARM64_ERRATUM_1418040       |
+ | ARM            | Neoverse-N1     | #1349291        | N/A                         |
+ | ARM            | MMU-500         | #841119,826419  | N/A                         |
++>>>>>>> 3276cc248964 (arm64: Update silicon-errata.txt for Neoverse-N1 #1349291)
  |                |                 |                 |                             |
 -| Cavium         | ThunderX ITS    | #22375,24313    | CAVIUM_ERRATUM_22375        |
 +| Cavium         | ThunderX ITS    | #22375, #24313  | CAVIUM_ERRATUM_22375        |
  | Cavium         | ThunderX ITS    | #23144          | CAVIUM_ERRATUM_23144        |
  | Cavium         | ThunderX GICv3  | #23154          | CAVIUM_ERRATUM_23154        |
  | Cavium         | ThunderX Core   | #27456          | CAVIUM_ERRATUM_27456        |
* Unmerged path Documentation/arm64/silicon-errata.txt
diff --git a/arch/arm64/kernel/traps.c b/arch/arm64/kernel/traps.c
index f935d727537a..91727c5a015c 100644
--- a/arch/arm64/kernel/traps.c
+++ b/arch/arm64/kernel/traps.c
@@ -702,6 +702,10 @@ bool arm64_is_fatal_ras_serror(struct pt_regs *regs, unsigned int esr)
 		/*
 		 * The CPU can't make progress. The exception may have
 		 * been imprecise.
+		 *
+		 * Neoverse-N1 #1349291 means a non-KVM SError reported as
+		 * Unrecoverable should be treated as Uncontainable. We
+		 * call arm64_serror_panic() in both cases.
 		 */
 		return true;
 
