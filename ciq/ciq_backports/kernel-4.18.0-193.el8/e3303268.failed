ASoC: soc-core: don't use soc_find_component() at snd_soc_find_dai()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
Rebuild_CHGLOG: - [sound] ALSA: ASoC: soc-core: don't use soc_find_component() at snd_soc_find_dai() (Jaroslav Kysela) [1738610]
Rebuild_FUZZ: 95.77%
commit-author Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
commit e3303268f9cfa4eb7c2217df471417d4327109fd
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/e3303268.failed

commit b9f2e25c599bb ("ASoC: soc-core: use soc_find_component() at
snd_soc_find_dai()") used soc_find_component() at snd_soc_find_dai(),
but, some CPU driver has CPU component for DAI and Platform component,
for example generic DMAEngine component.
In such case, CPU component and Platform component have same
of_node / name.

Here soc_find_component() returns *1st* found component.
Thus, we shouldn't use soc_find_component() at snd_soc_find_dai().
This patch fixup this it, and add comment to indicate this limitation.

Fixes: commit b9f2e25c599bb ("ASoC: soc-core: use soc_find_component() at snd_soc_find_dai()")
	Reported-by: Dmitry Osipenko <digetx@gmail.com>
	Reported-by: Jon Hunter <jonathanh@nvidia.com>
	Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
	Tested-by: Jon Hunter <jonathanh@nvidia.com>
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit e3303268f9cfa4eb7c2217df471417d4327109fd)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/soc-core.c
diff --cc sound/soc/soc-core.c
index 6ec5bd173a99,8ccaf63e428c..000000000000
--- a/sound/soc/soc-core.c
+++ b/sound/soc/soc-core.c
@@@ -794,6 -779,28 +794,31 @@@ static int snd_soc_is_matching_componen
  	return 1;
  }
  
++<<<<<<< HEAD
++=======
+ static struct snd_soc_component *soc_find_component(
+ 	const struct snd_soc_dai_link_component *dlc)
+ {
+ 	struct snd_soc_component *component;
+ 
+ 	lockdep_assert_held(&client_mutex);
+ 
+ 	/*
+ 	 * NOTE
+ 	 *
+ 	 * It returns *1st* found component, but some driver
+ 	 * has few components by same of_node/name
+ 	 * ex)
+ 	 *	CPU component and generic DMAEngine component
+ 	 */
+ 	for_each_component(component)
+ 		if (snd_soc_is_matching_component(dlc, component))
+ 			return component;
+ 
+ 	return NULL;
+ }
+ 
++>>>>>>> e3303268f9cf (ASoC: soc-core: don't use soc_find_component() at snd_soc_find_dai())
  /**
   * snd_soc_find_dai - Find a registered DAI
   *
* Unmerged path sound/soc/soc-core.c
