bnxt: set devlink port type after registration

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Jiri Pirko <jiri@mellanox.com>
commit d0d54e8c359399a8d07656779d5b6ddae68ef3c7
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/d0d54e8c.failed

Move the type set of devlink port after it is registered.

	Signed-off-by: Jiri Pirko <jiri@mellanox.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit d0d54e8c359399a8d07656779d5b6ddae68ef3c7)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c
diff --cc drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c
index 5c786cbe162c,ab6fd05c462b..000000000000
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c
@@@ -226,6 -229,22 +226,25 @@@ int bnxt_dl_register(struct bnxt *bp
  		goto err_dl_unreg;
  	}
  
++<<<<<<< HEAD
++=======
+ 	devlink_port_attrs_set(&bp->dl_port, DEVLINK_PORT_FLAVOUR_PHYSICAL,
+ 			       bp->pf.port_id, false, 0);
+ 	rc = devlink_port_register(dl, &bp->dl_port, bp->pf.port_id);
+ 	if (rc) {
+ 		netdev_err(bp->dev, "devlink_port_register failed");
+ 		goto err_dl_param_unreg;
+ 	}
+ 	devlink_port_type_eth_set(&bp->dl_port, bp->dev);
+ 
+ 	rc = devlink_port_params_register(&bp->dl_port, bnxt_dl_port_params,
+ 					  ARRAY_SIZE(bnxt_dl_port_params));
+ 	if (rc) {
+ 		netdev_err(bp->dev, "devlink_port_params_register failed");
+ 		goto err_dl_port_unreg;
+ 	}
+ 
++>>>>>>> d0d54e8c3593 (bnxt: set devlink port type after registration)
  	devlink_params_publish(dl);
  
  	return 0;
* Unmerged path drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c
