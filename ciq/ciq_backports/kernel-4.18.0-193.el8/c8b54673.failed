xfs: factor out two helpers from xfs_bmapi_write

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Christoph Hellwig <hch@lst.de>
commit c8b54673b30a9668d626a9e48d1659c21300f2a4
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/c8b54673.failed

We want to be able to reuse them for the upcoming dedidcated delalloc
convert routine.

	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Reviewed-by: Brian Foster <bfoster@redhat.com>
	Reviewed-by: Darrick J. Wong <darrick.wong@oracle.com>
	Signed-off-by: Darrick J. Wong <darrick.wong@oracle.com>
(cherry picked from commit c8b54673b30a9668d626a9e48d1659c21300f2a4)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/xfs/libxfs/xfs_bmap.c
diff --cc fs/xfs/libxfs/xfs_bmap.c
index d6292444734b,0ba1ade4b822..000000000000
--- a/fs/xfs/libxfs/xfs_bmap.c
+++ b/fs/xfs/libxfs/xfs_bmap.c
@@@ -4312,6 -4321,11 +4341,14 @@@ xfs_bmapi_write
  		eof = true;
  	if (!xfs_iext_peek_prev_extent(ifp, &bma.icur, &bma.prev))
  		bma.prev.br_startoff = NULLFILEOFF;
++<<<<<<< HEAD
++=======
+ 	bma.tp = tp;
+ 	bma.ip = ip;
+ 	bma.total = total;
+ 	bma.datatype = 0;
+ 	bma.minleft = xfs_bmapi_minleft(tp, ip, whichfork);
++>>>>>>> c8b54673b30a (xfs: factor out two helpers from xfs_bmapi_write)
  
  	/*
  	 * The delalloc flag means the caller wants to allocate the entire
* Unmerged path fs/xfs/libxfs/xfs_bmap.c
