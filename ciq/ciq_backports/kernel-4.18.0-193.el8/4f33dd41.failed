RDMA/uverbs: Initialize uverbs_attr_bundle ucontext in ib_uverbs_get_context

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
commit-author Shamir Rabinovitch <shamir.rabinovitch@oracle.com>
commit 4f33dd41b24c1e3494a6ea6c7839ea068343f809
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/4f33dd41.failed

ib_uverbs_get_context does not have a uobject so it does not call the
rdma_lookup_get_uobject which is used to set up the uverbs_attr_bundle
ucontext. For ib_uverbs_get_context we need to set up this manually before
we send the uverbs_attr_bundle down to the driver layer.

This completes the change that was done in commit 70f06b26f07e ("IB:
ucontext should be set properly for all cmd & ioctl paths")

	Signed-off-by: Shamir Rabinovitch <shamir.rabinovitch@oracle.com>
	Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
(cherry picked from commit 4f33dd41b24c1e3494a6ea6c7839ea068343f809)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/core/uverbs_cmd.c
diff --cc drivers/infiniband/core/uverbs_cmd.c
index 4aa2231ad8ef,76ac113d1da5..000000000000
--- a/drivers/infiniband/core/uverbs_cmd.c
+++ b/drivers/infiniband/core/uverbs_cmd.c
@@@ -230,6 -230,9 +230,12 @@@ static int ib_uverbs_get_context(struc
  		goto err_alloc;
  	}
  
++<<<<<<< HEAD
++=======
+ 	attrs->context = ucontext;
+ 
+ 	ucontext->res.type = RDMA_RESTRACK_CTX;
++>>>>>>> 4f33dd41b24c (RDMA/uverbs: Initialize uverbs_attr_bundle ucontext in ib_uverbs_get_context)
  	ucontext->device = ib_dev;
  	ucontext->cg_obj = cg_obj;
  	/* ufile is required when some objects are released */
* Unmerged path drivers/infiniband/core/uverbs_cmd.c
