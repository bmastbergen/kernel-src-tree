cpuidle: menu: Avoid computations when result will be discarded

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-193.el8
Rebuild_CHGLOG: - [cpuidle] menu: Avoid computations when result will be discarded (Al Stone) [1725618]
Rebuild_FUZZ: 92.31%
commit-author Rafael J. Wysocki <rafael.j.wysocki@intel.com>
commit f1c8e410cdac5df42a7806e49efde2859a10fecd
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-193.el8/f1c8e410.failed

If the minimum interval taken into account in the average computation
loop in get_typical_interval() is less than the expected idle
duration determined so far, the resultant average cannot be greater
than that value as well and the entire return result of the function
is going to be discarded anyway going forward.

In that case, it is a waste of time to carry out the remaining
computations in get_typical_interval(), so avoid that by returning
early if the minimum interval is not below the expected idle duration.

No intentional changes of behavior.

	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit f1c8e410cdac5df42a7806e49efde2859a10fecd)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/cpuidle/governors/menu.c
diff --cc drivers/cpuidle/governors/menu.c
index 471076599073,575a68f31761..000000000000
--- a/drivers/cpuidle/governors/menu.c
+++ b/drivers/cpuidle/governors/menu.c
@@@ -326,7 -338,7 +339,11 @@@ static int menu_select(struct cpuidle_d
  	/*
  	 * Use the lowest expected idle interval to pick the idle state.
  	 */
++<<<<<<< HEAD
 +	predicted_us = min(predicted_us, expected_interval);
++=======
+ 	predicted_us = min(predicted_us, get_typical_interval(data, predicted_us));
++>>>>>>> f1c8e410cdac (cpuidle: menu: Avoid computations when result will be discarded)
  
  	if (tick_nohz_tick_stopped()) {
  		/*
* Unmerged path drivers/cpuidle/governors/menu.c
