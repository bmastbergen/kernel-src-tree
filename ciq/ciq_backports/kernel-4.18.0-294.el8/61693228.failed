perf beauty mmap_flags: Conditionaly define the mmap flags

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Arnaldo Carvalho de Melo <acme@redhat.com>
commit 61693228b6e3f9de1c07bfec10b3204e69495fb1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/61693228.failed

So that in older systems we get it in the mmap flags scnprintf routines:

  $ tools/perf/trace/beauty/mmap_flags.sh  | head -9 2> /dev/null
  static const char *mmap_flags[] = {
  	[ilog2(0x40) + 1] = "32BIT",
  #ifndef MAP_32BIT
  #define MAP_32BIT 0x40
  #endif
  	[ilog2(0x01) + 1] = "SHARED",
  #ifndef MAP_SHARED
  #define MAP_SHARED 0x01
  #endif
  $

	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: Ian Rogers <irogers@google.com>
	Cc: Jiri Olsa <jolsa@kernel.org>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 61693228b6e3f9de1c07bfec10b3204e69495fb1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/trace/beauty/mmap_flags.sh
diff --cc tools/perf/trace/beauty/mmap_flags.sh
index 32bac9c0d694,39eb2595983b..000000000000
--- a/tools/perf/trace/beauty/mmap_flags.sh
+++ b/tools/perf/trace/beauty/mmap_flags.sh
@@@ -18,8 -21,13 +18,18 @@@ printf "static const char *mmap_flags[
  regex='^[[:space:]]*#[[:space:]]*define[[:space:]]+MAP_([[:alnum:]_]+)[[:space:]]+(0x[[:xdigit:]]+)[[:space:]]*.*'
  egrep -q $regex ${arch_mman} && \
  (egrep $regex ${arch_mman} | \
++<<<<<<< HEAD
 +	sed -r "s/$regex/\2 \1/g"	| \
 +	xargs printf "\t[ilog2(%s) + 1] = \"%s\",\n")
++=======
+ 	sed -r "s/$regex/\2 \1 \1 \1 \2/g"	| \
+ 	xargs printf "\t[ilog2(%s) + 1] = \"%s\",\n#ifndef MAP_%s\n#define MAP_%s %s\n#endif\n")
+ egrep -q $regex ${linux_mman} && \
+ (egrep $regex ${linux_mman} | \
+ 	egrep -vw 'MAP_(UNINITIALIZED|TYPE|SHARED_VALIDATE)' | \
+ 	sed -r "s/$regex/\2 \1 \1 \1 \2/g" | \
+ 	xargs printf "\t[ilog2(%s) + 1] = \"%s\",\n#ifndef MAP_%s\n#define MAP_%s %s\n#endif\n")
++>>>>>>> 61693228b6e3 (perf beauty mmap_flags: Conditionaly define the mmap flags)
  ([ ! -f ${arch_mman} ] || egrep -q '#[[:space:]]*include[[:space:]]+<uapi/asm-generic/mman.*' ${arch_mman}) &&
  (egrep $regex ${header_dir}/mman-common.h | \
  	egrep -vw 'MAP_(UNINITIALIZED|TYPE|SHARED_VALIDATE)' | \
* Unmerged path tools/perf/trace/beauty/mmap_flags.sh
