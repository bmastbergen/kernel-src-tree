powerpc/pmem: Update ppc64 to use the new barrier instruction.

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
Rebuild_CHGLOG: - [powerpc] powerpc/pmem: Update ppc64 to use the new barrier instruction (Desnes Augusto Nunes do Rosario) [1878632]
Rebuild_FUZZ: 99.19%
commit-author Aneesh Kumar K.V <aneesh.kumar@linux.ibm.com>
commit 76e6c73f33d4e1cc4de4f25c0bf66d59e42113c4
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/76e6c73f.failed

pmem on POWER10 can now use phwsync instead of hwsync to ensure
all previous writes are architecturally visible for the platform
buffer flush.

	Signed-off-by: Aneesh Kumar K.V <aneesh.kumar@linux.ibm.com>
	Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
Link: https://lore.kernel.org/r/20200701072235.223558-6-aneesh.kumar@linux.ibm.com
(cherry picked from commit 76e6c73f33d4e1cc4de4f25c0bf66d59e42113c4)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/powerpc/include/asm/barrier.h
diff --cc arch/powerpc/include/asm/barrier.h
index 449474f667c4,35c1b8f3aa68..000000000000
--- a/arch/powerpc/include/asm/barrier.h
+++ b/arch/powerpc/include/asm/barrier.h
@@@ -5,6 -5,12 +5,15 @@@
  #ifndef _ASM_POWERPC_BARRIER_H
  #define _ASM_POWERPC_BARRIER_H
  
++<<<<<<< HEAD
++=======
+ #include <asm/asm-const.h>
+ 
+ #ifndef __ASSEMBLY__
+ #include <asm/ppc-opcode.h>
+ #endif
+ 
++>>>>>>> 76e6c73f33d4 (powerpc/pmem: Update ppc64 to use the new barrier instruction.)
  /*
   * Memory barrier.
   * The sync instruction guarantees that all memory accesses initiated
* Unmerged path arch/powerpc/include/asm/barrier.h
