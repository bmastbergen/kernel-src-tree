perf/amd/uncore: Inform the user how many counters each uncore PMU has

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Kim Phillips <kim.phillips@amd.com>
commit 9ed9647dc0671486f9e998b7258f75167a9c4697
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/9ed9647d.failed

Previously, the uncore driver would say "NB counters detected" on F17h
machines, which don't have NorthBridge (NB) counters.  They have Data
Fabric (DF) counters.  Just use the pmu.name to inform users which pmu
to use and its associated counter count.

F17h dmesg BEFORE:

amd_uncore: AMD NB counters detected
amd_uncore: AMD LLC counters detected

F17h dmesg AFTER:

amd_uncore: 4 amd_df counters detected
amd_uncore: 6 amd_l3 counters detected

	Signed-off-by: Kim Phillips <kim.phillips@amd.com>
	Signed-off-by: Peter Zijlstra (Intel) <peterz@infradead.org>
Link: https://lkml.kernel.org/r/20200921144330.6331-5-kim.phillips@amd.com
(cherry picked from commit 9ed9647dc0671486f9e998b7258f75167a9c4697)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/events/amd/uncore.c
diff --cc arch/x86/events/amd/uncore.c
index ee69c016ed61,7f014d450bc2..000000000000
--- a/arch/x86/events/amd/uncore.c
+++ b/arch/x86/events/amd/uncore.c
@@@ -596,7 -595,10 +596,14 @@@ static int __init amd_uncore_init(void
  		if (ret)
  			goto fail_nb;
  
++<<<<<<< HEAD
 +		pr_info("AMD NB counters detected\n");
++=======
+ 		pr_info("%d %s %s counters detected\n", num_counters_nb,
+ 			boot_cpu_data.x86_vendor == X86_VENDOR_HYGON ?  "HYGON" : "",
+ 			amd_nb_pmu.name);
+ 
++>>>>>>> 9ed9647dc067 (perf/amd/uncore: Inform the user how many counters each uncore PMU has)
  		ret = 0;
  	}
  
@@@ -625,7 -627,9 +632,13 @@@
  		if (ret)
  			goto fail_llc;
  
++<<<<<<< HEAD
 +		pr_info("AMD LLC counters detected\n");
++=======
+ 		pr_info("%d %s %s counters detected\n", num_counters_llc,
+ 			boot_cpu_data.x86_vendor == X86_VENDOR_HYGON ?  "HYGON" : "",
+ 			amd_llc_pmu.name);
++>>>>>>> 9ed9647dc067 (perf/amd/uncore: Inform the user how many counters each uncore PMU has)
  		ret = 0;
  	}
  
* Unmerged path arch/x86/events/amd/uncore.c
