firmware: dcdbas: Move dcdbas to drivers/platform/x86

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Stuart Hayes <stuart.w.hayes@gmail.com>
commit 8e5cddd1262cdee59257d554440cc9a80e5fcb7b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/8e5cddd1.failed

Move dcdbas to the more appropriate directory drivers/platform/x86.

	Signed-off-by: Stuart Hayes <stuart.w.hayes@gmail.com>
	Signed-off-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
(cherry picked from commit 8e5cddd1262cdee59257d554440cc9a80e5fcb7b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/firmware/Kconfig
#	drivers/firmware/Makefile
diff --cc drivers/firmware/Kconfig
index 07a82df4702e,6d0c28fd3bad..000000000000
--- a/drivers/firmware/Kconfig
+++ b/drivers/firmware/Kconfig
@@@ -145,34 -145,6 +145,37 @@@ config EFI_PCD
  	  See DIG64_HCDPv20_042804.pdf available from
  	  <http://www.dig64.org/specifications/> 
  
++<<<<<<< HEAD
 +config DELL_RBU
 +	tristate "BIOS update support for DELL systems via sysfs"
 +	depends on X86
 +	select FW_LOADER
 +	select FW_LOADER_USER_HELPER
 +	help
 +	 Say m if you want to have the option of updating the BIOS for your
 +	 DELL system. Note you need a Dell OpenManage or Dell Update package (DUP)
 +	 supporting application to communicate with the BIOS regarding the new
 +	 image for the image update to take effect.
 +	 See <file:Documentation/dell_rbu.txt> for more details on the driver.
 +
 +config DCDBAS
 +	tristate "Dell Systems Management Base Driver"
 +	depends on X86
 +	help
 +	  The Dell Systems Management Base Driver provides a sysfs interface
 +	  for systems management software to perform System Management
 +	  Interrupts (SMIs) and Host Control Actions (system power cycle or
 +	  power off after OS shutdown) on certain Dell systems.
 +
 +	  See <file:Documentation/dcdbas.txt> for more details on the driver
 +	  and the Dell systems on which Dell systems management software makes
 +	  use of this driver.
 +
 +	  Say Y or M here to enable the driver for use by Dell systems
 +	  management software such as Dell OpenManage.
 +
++=======
++>>>>>>> 8e5cddd1262c (firmware: dcdbas: Move dcdbas to drivers/platform/x86)
  config DMIID
      bool "Export DMI identification via sysfs to userspace"
      depends on DMI
diff --cc drivers/firmware/Makefile
index 0648ce52832e,edda4206d8fc..000000000000
--- a/drivers/firmware/Makefile
+++ b/drivers/firmware/Makefile
@@@ -11,11 -11,7 +11,14 @@@ obj-$(CONFIG_DMI)		+= dmi_scan.
  obj-$(CONFIG_DMI_SYSFS)		+= dmi-sysfs.o
  obj-$(CONFIG_EDD)		+= edd.o
  obj-$(CONFIG_EFI_PCDP)		+= pcdp.o
++<<<<<<< HEAD
 +obj-$(CONFIG_DELL_RBU)          += dell_rbu.o
 +obj-$(CONFIG_DCDBAS)		+= dcdbas.o
++=======
++>>>>>>> 8e5cddd1262c (firmware: dcdbas: Move dcdbas to drivers/platform/x86)
  obj-$(CONFIG_DMIID)		+= dmi-id.o
 +obj-$(CONFIG_INTEL_STRATIX10_SERVICE)	+= stratix10-svc.o
 +obj-$(CONFIG_INTEL_STRATIX10_RSU)	+= stratix10-rsu.o
  obj-$(CONFIG_ISCSI_IBFT_FIND)	+= iscsi_ibft_find.o
  obj-$(CONFIG_ISCSI_IBFT)	+= iscsi_ibft.o
  obj-$(CONFIG_FIRMWARE_MEMMAP)	+= memmap.o
* Unmerged path drivers/firmware/Kconfig
* Unmerged path drivers/firmware/Makefile
diff --git a/drivers/platform/x86/Kconfig b/drivers/platform/x86/Kconfig
index 231f336d823d..9ca4279ee6cf 100644
--- a/drivers/platform/x86/Kconfig
+++ b/drivers/platform/x86/Kconfig
@@ -105,6 +105,22 @@ config ASUS_LAPTOP
 
 	  If you have an ACPI-compatible ASUS laptop, say Y or M here.
 
+config DCDBAS
+	tristate "Dell Systems Management Base Driver"
+	depends on X86
+	help
+	  The Dell Systems Management Base Driver provides a sysfs interface
+	  for systems management software to perform System Management
+	  Interrupts (SMIs) and Host Control Actions (system power cycle or
+	  power off after OS shutdown) on certain Dell systems.
+
+	  See <file:Documentation/dcdbas.txt> for more details on the driver
+	  and the Dell systems on which Dell systems management software makes
+	  use of this driver.
+
+	  Say Y or M here to enable the driver for use by Dell systems
+	  management software such as Dell OpenManage.
+
 #
 # The DELL_SMBIOS driver depends on ACPI_WMI and/or DCDBAS if those
 # backends are selected. The "depends" line prevents a configuration
diff --git a/drivers/platform/x86/Makefile b/drivers/platform/x86/Makefile
index cb11b5021ed3..17313f275e64 100644
--- a/drivers/platform/x86/Makefile
+++ b/drivers/platform/x86/Makefile
@@ -12,6 +12,7 @@ obj-$(CONFIG_EEEPC_WMI)		+= eeepc-wmi.o
 obj-$(CONFIG_MSI_LAPTOP)	+= msi-laptop.o
 obj-$(CONFIG_ACPI_CMPC)		+= classmate-laptop.o
 obj-$(CONFIG_COMPAL_LAPTOP)	+= compal-laptop.o
+obj-$(CONFIG_DCDBAS)		+= dcdbas.o
 obj-$(CONFIG_DELL_SMBIOS)	+= dell-smbios.o
 dell-smbios-objs		:= dell-smbios-base.o
 dell-smbios-$(CONFIG_DELL_SMBIOS_WMI)	+= dell-smbios-wmi.o
diff --git a/drivers/firmware/dcdbas.c b/drivers/platform/x86/dcdbas.c
similarity index 100%
rename from drivers/firmware/dcdbas.c
rename to drivers/platform/x86/dcdbas.c
diff --git a/drivers/firmware/dcdbas.h b/drivers/platform/x86/dcdbas.h
similarity index 100%
rename from drivers/firmware/dcdbas.h
rename to drivers/platform/x86/dcdbas.h
diff --git a/drivers/platform/x86/dell-smbios-smm.c b/drivers/platform/x86/dell-smbios-smm.c
index e9e9da556318..46b7ee4f7e53 100644
--- a/drivers/platform/x86/dell-smbios-smm.c
+++ b/drivers/platform/x86/dell-smbios-smm.c
@@ -18,7 +18,7 @@
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/platform_device.h>
-#include "../../firmware/dcdbas.h"
+#include "dcdbas.h"
 #include "dell-smbios.h"
 
 static int da_command_address;
