Revert "iommu/arm-smmu: Make arm-smmu-v3 explicitly non-modular"

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Will Deacon <will@kernel.org>
commit 6e8fa7404c13ca0497f3ad40e0f37bf08bf6795c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/6e8fa740.failed

This reverts commit c07b6426df922d21a13a959cf785d46e9c531941.

Let's get the SMMUv3 driver building as a module, which means putting
back some dead code that we used to carry.

	Signed-off-by: Will Deacon <will@kernel.org>
	Tested-by: John Garry <john.garry@huawei.com> # smmu v3
	Reviewed-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
	Signed-off-by: Joerg Roedel <jroedel@suse.de>
(cherry picked from commit 6e8fa7404c13ca0497f3ad40e0f37bf08bf6795c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/iommu/arm-smmu-v3.c
diff --cc drivers/iommu/arm-smmu-v3.c
index d076622e2dd4,68163b1d680d..000000000000
--- a/drivers/iommu/arm-smmu-v3.c
+++ b/drivers/iommu/arm-smmu-v3.c
@@@ -3701,11 -3702,13 +3704,19 @@@ static struct platform_driver arm_smmu_
  	.driver	= {
  		.name		= "arm-smmu-v3",
  		.of_match_table	= of_match_ptr(arm_smmu_of_match),
- 		.suppress_bind_attrs = true,
  	},
  	.probe	= arm_smmu_device_probe,
+ 	.remove	= arm_smmu_device_remove,
  	.shutdown = arm_smmu_device_shutdown,
  };
++<<<<<<< HEAD
 +
 +IOMMU_OF_DECLARE(arm_smmuv3, "arm,smmu-v3");
 +builtin_platform_driver(arm_smmu_driver);
++=======
+ module_platform_driver(arm_smmu_driver);
+ 
+ MODULE_DESCRIPTION("IOMMU API for ARM architected SMMUv3 implementations");
+ MODULE_AUTHOR("Will Deacon <will.deacon@arm.com>");
+ MODULE_LICENSE("GPL v2");
++>>>>>>> 6e8fa7404c13 (Revert "iommu/arm-smmu: Make arm-smmu-v3 explicitly non-modular")
* Unmerged path drivers/iommu/arm-smmu-v3.c
