vfs: Convert aio to use the new mount API

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author David Howells <dhowells@redhat.com>
commit 52db59df17c0cd3ee4071a75a8509287a662abac
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/52db59df.failed

Convert the aio filesystem to the new internal mount API as the old
one will be obsoleted and removed.  This allows greater flexibility in
communication of mount parameters between userspace, the VFS and the
filesystem.

See Documentation/filesystems/mount_api.txt for more information.

	Signed-off-by: David Howells <dhowells@redhat.com>
cc: Benjamin LaHaise <bcrl@kvack.org>
cc: linux-aio@kvack.org
	Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
(cherry picked from commit 52db59df17c0cd3ee4071a75a8509287a662abac)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/aio.c
diff --cc fs/aio.c
index e81c8583e055,17f4441fd583..000000000000
--- a/fs/aio.c
+++ b/fs/aio.c
@@@ -219,15 -250,12 +220,21 @@@ static struct file *aio_private_file(st
  	return file;
  }
  
- static struct dentry *aio_mount(struct file_system_type *fs_type,
- 				int flags, const char *dev_name, void *data)
+ static int aio_init_fs_context(struct fs_context *fc)
  {
++<<<<<<< HEAD
 +	struct dentry *root = mount_pseudo(fs_type, "aio:", NULL, NULL,
 +					   AIO_RING_MAGIC);
 +
 +	if (!IS_ERR(root))
 +		root->d_sb->s_iflags |= SB_I_NOEXEC;
 +	return root;
++=======
+ 	if (!init_pseudo(fc, AIO_RING_MAGIC))
+ 		return -ENOMEM;
+ 	fc->s_iflags |= SB_I_NOEXEC;
+ 	return 0;
++>>>>>>> 52db59df17c0 (vfs: Convert aio to use the new mount API)
  }
  
  /* aio_setup
* Unmerged path fs/aio.c
