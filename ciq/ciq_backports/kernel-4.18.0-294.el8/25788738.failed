mm: fix compile error due to COMPACTION_HPAGE_ORDER

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Nitin Gupta <nigupta@nvidia.com>
commit 25788738eb9ce46fe6a0fd84a3ceef5c795d41f0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/25788738.failed

Fix compile error when COMPACTION_HPAGE_ORDER is assigned to
HUGETLB_PAGE_ORDER.  The correct way to check if this constant is defined
is to check for CONFIG_HUGETLBFS.

	Reported-by: Nathan Chancellor <natechancellor@gmail.com>
	Signed-off-by: Nitin Gupta <nigupta@nvidia.com>
	Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
	Tested-by: Nathan Chancellor <natechancellor@gmail.com>
	Cc: Stephen Rothwell <sfr@canb.auug.org.au>
Link: http://lkml.kernel.org/r/20200623064544.25766-1-nigupta@nvidia.com
	Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
(cherry picked from commit 25788738eb9ce46fe6a0fd84a3ceef5c795d41f0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	mm/compaction.c
diff --cc mm/compaction.c
index 35fc5ff5f321,ed8ea1511634..000000000000
--- a/mm/compaction.c
+++ b/mm/compaction.c
@@@ -50,6 -50,24 +50,27 @@@ static inline void count_compact_events
  #define pageblock_start_pfn(pfn)	block_start_pfn(pfn, pageblock_order)
  #define pageblock_end_pfn(pfn)		block_end_pfn(pfn, pageblock_order)
  
++<<<<<<< HEAD
++=======
+ /*
+  * Fragmentation score check interval for proactive compaction purposes.
+  */
+ static const int HPAGE_FRAG_CHECK_INTERVAL_MSEC = 500;
+ 
+ /*
+  * Page order with-respect-to which proactive compaction
+  * calculates external fragmentation, which is used as
+  * the "fragmentation score" of a node/zone.
+  */
+ #if defined CONFIG_TRANSPARENT_HUGEPAGE
+ #define COMPACTION_HPAGE_ORDER	HPAGE_PMD_ORDER
+ #elif defined CONFIG_HUGETLBFS
+ #define COMPACTION_HPAGE_ORDER	HUGETLB_PAGE_ORDER
+ #else
+ #define COMPACTION_HPAGE_ORDER	(PMD_SHIFT - PAGE_SHIFT)
+ #endif
+ 
++>>>>>>> 25788738eb9c (mm: fix compile error due to COMPACTION_HPAGE_ORDER)
  static unsigned long release_freepages(struct list_head *freelist)
  {
  	struct page *page, *next;
* Unmerged path mm/compaction.c
