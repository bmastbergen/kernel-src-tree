nvme: remove ns->disk checks

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Christoph Hellwig <hch@lst.de>
commit 3913f4f3a65ca9ed6ba7e4678fff10a6e7b42dbd
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/3913f4f3.failed

By the time a namespace is added to ctrl->namespaces list and thus
can be looked up ns->disk has been assigned, and it it never cleared.

Remove all the checks for ns->disk being NULL.

	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Reviewed-by: Keith Busch <kbusch@kernel.org>
	Reviewed-by: Chaitanya Kulkarni <chaitanya.kulkarni@wdc.com>
(cherry picked from commit 3913f4f3a65ca9ed6ba7e4678fff10a6e7b42dbd)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/nvme/host/core.c
diff --cc drivers/nvme/host/core.c
index 3f621198b05c,3d00ea4e7146..000000000000
--- a/drivers/nvme/host/core.c
+++ b/drivers/nvme/host/core.c
@@@ -1431,8 -1429,17 +1431,12 @@@ static void nvme_update_formats(struct 
  
  	down_read(&ctrl->namespaces_rwsem);
  	list_for_each_entry(ns, &ctrl->namespaces, list)
++<<<<<<< HEAD
 +		if (ns->disk && nvme_revalidate_disk(ns->disk))
++=======
+ 		if (_nvme_revalidate_disk(ns->disk))
++>>>>>>> 3913f4f3a65c (nvme: remove ns->disk checks)
  			nvme_set_queue_dying(ns);
 -		else if (blk_queue_is_zoned(ns->disk->queue)) {
 -			/*
 -			 * IO commands are required to fully revalidate a zoned
 -			 * device. Force the command effects to trigger rescan
 -			 * work so report zones can run in a context with
 -			 * unfrozen IO queues.
 -			 */
 -			*effects |= NVME_CMD_EFFECTS_NCC;
 -		}
  	up_read(&ctrl->namespaces_rwsem);
  }
  
* Unmerged path drivers/nvme/host/core.c
