net: stmmac: xgmac: Correct RAVSEL field interpretation

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Jose Abreu <Jose.Abreu@synopsys.com>
commit c2b69474d63b62e7a1898faf86d096ad132e7baa
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/c2b69474.failed

RAVSEL means that only RX side is available for AVB features. As we use
both TX and RX features we need to check if RAVSEL is selected and
disable AVB if only RX side is available.

	Signed-off-by: Jose Abreu <joabreu@synopsys.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit c2b69474d63b62e7a1898faf86d096ad132e7baa)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/stmicro/stmmac/dwxgmac2_dma.c
diff --cc drivers/net/ethernet/stmicro/stmmac/dwxgmac2_dma.c
index e77eb0ddf9b5,53c4a40d8386..000000000000
--- a/drivers/net/ethernet/stmicro/stmmac/dwxgmac2_dma.c
+++ b/drivers/net/ethernet/stmicro/stmmac/dwxgmac2_dma.c
@@@ -369,7 -369,8 +369,12 @@@ static void dwxgmac2_get_hw_feature(voi
  	dma_cap->eee = (hw_cap & XGMAC_HWFEAT_EEESEL) >> 13;
  	dma_cap->atime_stamp = (hw_cap & XGMAC_HWFEAT_TSSEL) >> 12;
  	dma_cap->av = (hw_cap & XGMAC_HWFEAT_AVSEL) >> 11;
++<<<<<<< HEAD
 +	dma_cap->av &= (hw_cap & XGMAC_HWFEAT_RAVSEL) >> 10;
++=======
+ 	dma_cap->av &= !(hw_cap & XGMAC_HWFEAT_RAVSEL) >> 10;
+ 	dma_cap->arpoffsel = (hw_cap & XGMAC_HWFEAT_ARPOFFSEL) >> 9;
++>>>>>>> c2b69474d63b (net: stmmac: xgmac: Correct RAVSEL field interpretation)
  	dma_cap->rmon = (hw_cap & XGMAC_HWFEAT_MMCSEL) >> 8;
  	dma_cap->pmt_magic_frame = (hw_cap & XGMAC_HWFEAT_MGKSEL) >> 7;
  	dma_cap->pmt_remote_wake_up = (hw_cap & XGMAC_HWFEAT_RWKSEL) >> 6;
* Unmerged path drivers/net/ethernet/stmicro/stmmac/dwxgmac2_dma.c
