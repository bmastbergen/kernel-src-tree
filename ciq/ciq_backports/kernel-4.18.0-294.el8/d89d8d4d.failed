net: ena: Fix using plain integer as NULL pointer in ena_init_napi_in_range

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Wang Hai <wanghai38@huawei.com>
commit d89d8d4db48b42d22c5b0e0e8a3f82dd00262c44
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/d89d8d4d.failed

Fix sparse build warning:

drivers/net/ethernet/amazon/ena/ena_netdev.c:2193:34: warning:
 Using plain integer as NULL pointer

	Reported-by: Hulk Robot <hulkci@huawei.com>
	Signed-off-by: Wang Hai <wanghai38@huawei.com>
	Suggested-by: Joe Perches <joe@perches.com>
	Acked-by: Shay Agroskin <shayagr@amazon.com>
	Acked-by: Shay Agroskin <shayagr@amazon.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit d89d8d4db48b42d22c5b0e0e8a3f82dd00262c44)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/amazon/ena/ena_netdev.c
diff --cc drivers/net/ethernet/amazon/ena/ena_netdev.c
index 081e61da3092,3eb63b12dd68..000000000000
--- a/drivers/net/ethernet/amazon/ena/ena_netdev.c
+++ b/drivers/net/ethernet/amazon/ena/ena_netdev.c
@@@ -1703,24 -2176,36 +1703,35 @@@ static void ena_del_napi(struct ena_ada
  {
  	int i;
  
 -	for (i = first_index; i < first_index + count; i++) {
 -		/* Check if napi was initialized before */
 -		if (!ENA_IS_XDP_INDEX(adapter, i) ||
 -		    adapter->ena_napi[i].xdp_ring)
 -			netif_napi_del(&adapter->ena_napi[i].napi);
 -		else
 -			WARN_ON(ENA_IS_XDP_INDEX(adapter, i) &&
 -				adapter->ena_napi[i].xdp_ring);
 -	}
 +	for (i = 0; i < adapter->num_io_queues; i++)
 +		netif_napi_del(&adapter->ena_napi[i].napi);
  }
  
 -static void ena_init_napi_in_range(struct ena_adapter *adapter,
 -				   int first_index, int count)
 +static void ena_init_napi(struct ena_adapter *adapter)
  {
++<<<<<<< HEAD
 +	struct ena_napi *napi;
 +	int i;
 +
 +	for (i = 0; i < adapter->num_io_queues; i++) {
 +		napi = &adapter->ena_napi[i];
 +
 +		netif_napi_add(adapter->netdev,
 +			       &adapter->ena_napi[i].napi,
 +			       ena_io_poll,
++=======
+ 	int i;
+ 
+ 	for (i = first_index; i < first_index + count; i++) {
+ 		struct ena_napi *napi = &adapter->ena_napi[i];
+ 
+ 		netif_napi_add(adapter->netdev,
+ 			       &napi->napi,
+ 			       ENA_IS_XDP_INDEX(adapter, i) ? ena_xdp_io_poll : ena_io_poll,
++>>>>>>> d89d8d4db48b (net: ena: Fix using plain integer as NULL pointer in ena_init_napi_in_range)
  			       ENA_NAPI_BUDGET);
 -
 -		if (!ENA_IS_XDP_INDEX(adapter, i)) {
 -			napi->rx_ring = &adapter->rx_ring[i];
 -			napi->tx_ring = &adapter->tx_ring[i];
 -		} else {
 -			napi->xdp_ring = &adapter->tx_ring[i];
 -		}
 +		napi->rx_ring = &adapter->rx_ring[i];
 +		napi->tx_ring = &adapter->tx_ring[i];
  		napi->qid = i;
  	}
  }
* Unmerged path drivers/net/ethernet/amazon/ena/ena_netdev.c
