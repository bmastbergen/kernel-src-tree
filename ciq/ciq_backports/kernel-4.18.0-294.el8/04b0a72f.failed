powerpc/32: use patch_site_addr() in machine_init()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Christophe Leroy <christophe.leroy@c-s.fr>
commit 04b0a72f2807ba40b155fc1689e38569779527ca
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/04b0a72f.failed

Use patch_site_addr() instead of hardcoding the
address calculation in machine_init()

	Signed-off-by: Christophe Leroy <christophe.leroy@c-s.fr>
	Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
(cherry picked from commit 04b0a72f2807ba40b155fc1689e38569779527ca)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/powerpc/kernel/setup_32.c
diff --cc arch/powerpc/kernel/setup_32.c
index 9036d0eeafa6,be6ee8dec98d..000000000000
--- a/arch/powerpc/kernel/setup_32.c
+++ b/arch/powerpc/kernel/setup_32.c
@@@ -94,11 -99,9 +94,15 @@@ notrace unsigned long __init early_init
   * We do the initial parsing of the flat device-tree and prepares
   * for the MMU to be fully initialized.
   */
 +extern unsigned int memset_nocache_branch; /* Insn to be replaced by NOP */
 +
  notrace void __init machine_init(u64 dt_ptr)
  {
++<<<<<<< HEAD
 +	unsigned int *addr = &memset_nocache_branch;
++=======
+ 	unsigned int *addr = (unsigned int *)patch_site_addr(&patch__memset_nocache);
++>>>>>>> 04b0a72f2807 (powerpc/32: use patch_site_addr() in machine_init())
  	unsigned long insn;
  
  	/* Configure static keys first, now that we're relocated. */
* Unmerged path arch/powerpc/kernel/setup_32.c
