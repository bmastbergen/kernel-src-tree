blktrace: Report pid with note messages

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Jan Kara <jack@suse.cz>
commit 870c153cf0e6df1b8b5226af41b19945e8e0d143
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/870c153c.failed

Currently informational messages within block trace do not have PID
information of the process reporting the message included. With BFQ it
is sometimes useful to have the information and there's no good reason
to omit the information from the trace. So just fill in pid information
when generating note message.

	Signed-off-by: Jan Kara <jack@suse.cz>
	Reviewed-by: Chaitanya Kulkarni <chaitanya.kulkarni@wdc.com>
	Acked-by: Paolo Valente <paolo.valente@linaro.org>
	Signed-off-by: Jens Axboe <axboe@kernel.dk>
(cherry picked from commit 870c153cf0e6df1b8b5226af41b19945e8e0d143)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	kernel/trace/blktrace.c
diff --cc kernel/trace/blktrace.c
index 36e9e639e081,ea47f2084087..000000000000
--- a/kernel/trace/blktrace.c
+++ b/kernel/trace/blktrace.c
@@@ -186,10 -170,10 +186,17 @@@ void __trace_note_message(struct blk_tr
  	if (!(blk_tracer_flags.val & TRACE_BLK_OPT_CGROUP))
  		blkcg = NULL;
  #ifdef CONFIG_BLK_CGROUP
++<<<<<<< HEAD
 +	trace_note(bt, 0, BLK_TN_MESSAGE, buf, n,
 +		blkcg ? cgroup_get_kernfs_id(blkcg->css.cgroup) : NULL);
 +#else
 +	trace_note(bt, 0, BLK_TN_MESSAGE, buf, n, NULL);
++=======
+ 	trace_note(bt, current->pid, BLK_TN_MESSAGE, buf, n,
+ 		   blkcg ? cgroup_id(blkcg->css.cgroup) : 1);
+ #else
+ 	trace_note(bt, current->pid, BLK_TN_MESSAGE, buf, n, 0);
++>>>>>>> 870c153cf0e6 (blktrace: Report pid with note messages)
  #endif
  	local_irq_restore(flags);
  }
* Unmerged path kernel/trace/blktrace.c
