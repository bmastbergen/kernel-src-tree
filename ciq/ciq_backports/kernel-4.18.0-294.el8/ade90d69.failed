net/udpgso_bench.sh add UDP GSO audit tests

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Fred Klassen <fklassen@appneta.com>
commit ade90d69ffefd99e5e655ec6d976a96f010bb5b3
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/ade90d69.failed

Audit tests count the total number of messages sent and compares
with total number of CMSG received on error queue. Example:

    udp gso zerocopy timestamp audit
    udp rx:   1599 MB/s  1166414 calls/s
    udp tx:   1615 MB/s    27395 calls/s  27395 msg/s
    udp rx:   1634 MB/s  1192261 calls/s
    udp tx:   1633 MB/s    27699 calls/s  27699 msg/s
    udp rx:   1633 MB/s  1191358 calls/s
    udp tx:   1631 MB/s    27678 calls/s  27678 msg/s
    Summary over 4.000 seconds...
    sum udp tx:   1665 MB/s      82772 calls (27590/s)      82772 msgs (27590/s)
    Tx Timestamps:               82772 received                 0 errors
    Zerocopy acks:               82772 received

Errors are thrown if CMSG count does not equal send count,
example:

    Summary over 4.000 seconds...
    sum tcp tx:   7451 MB/s     493706 calls (123426/s)     493706 msgs (123426/s)
    ./udpgso_bench_tx: Unexpected number of Zerocopy completions:    493706 expected    493704 received

Also reduce individual test time from 4 to 3 seconds so that
overall test time does not increase significantly.

v3: Enhancements as per Willem de Bruijn <willemb@google.com>
    - document -P option for TCP audit

	Signed-off-by: Fred Klassen <fklassen@appneta.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit ade90d69ffefd99e5e655ec6d976a96f010bb5b3)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/testing/selftests/net/udpgso_bench.sh
diff --cc tools/testing/selftests/net/udpgso_bench.sh
index 99e537ab5ad9,d4d831dfd44d..000000000000
--- a/tools/testing/selftests/net/udpgso_bench.sh
+++ b/tools/testing/selftests/net/udpgso_bench.sh
@@@ -34,7 -34,22 +34,26 @@@ run_udp() 
  	run_in_netns ${args}
  
  	echo "udp gso"
++<<<<<<< HEAD
 +	run_in_netns ${args} -S
++=======
+ 	run_in_netns ${args} -S 0
+ 
+ 	echo "udp gso zerocopy"
+ 	run_in_netns ${args} -S 0 -z
+ 
+ 	echo "udp gso timestamp"
+ 	run_in_netns ${args} -S 0 -T
+ 
+ 	echo "udp gso zerocopy audit"
+ 	run_in_netns ${args} -S 0 -z -a
+ 
+ 	echo "udp gso timestamp audit"
+ 	run_in_netns ${args} -S 0 -T -a
+ 
+ 	echo "udp gso zerocopy timestamp audit"
+ 	run_in_netns ${args} -S 0 -T -z -a
++>>>>>>> ade90d69ffef (net/udpgso_bench.sh add UDP GSO audit tests)
  }
  
  run_tcp() {
* Unmerged path tools/testing/selftests/net/udpgso_bench.sh
