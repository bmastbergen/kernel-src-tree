lib/vdso: Let do_coarse() return 0 to simplify the callsite

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Christophe Leroy <christophe.leroy@c-s.fr>
commit 8463cf80529d0fd80b84cd5ab8b9b952b01c7eb9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/8463cf80.failed

do_coarse() is similar to do_hres() except that it never fails.

Change its type to int instead of void and let it always return success (0)
to simplify the call site.

	Signed-off-by: Christophe Leroy <christophe.leroy@c-s.fr>
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
Link: https://lore.kernel.org/r/21e8afa38c02ca8672c2690307383507fe63b454.1577111367.git.christophe.leroy@c-s.fr


(cherry picked from commit 8463cf80529d0fd80b84cd5ab8b9b952b01c7eb9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	lib/vdso/gettimeofday.c
diff --cc lib/vdso/gettimeofday.c
index b30c5801ec9b,5a5ec899a21a..000000000000
--- a/lib/vdso/gettimeofday.c
+++ b/lib/vdso/gettimeofday.c
@@@ -85,17 -98,24 +87,22 @@@ __cvdso_clock_gettime(clockid_t clock, 
  	 * clocks are handled in the VDSO directly.
  	 */
  	msk = 1U << clock;
- 	if (likely(msk & VDSO_HRES)) {
+ 	if (likely(msk & VDSO_HRES))
  		return do_hres(&vd[CS_HRES_COARSE], clock, ts);
- 	} else if (msk & VDSO_COARSE) {
- 		do_coarse(&vd[CS_HRES_COARSE], clock, ts);
- 		return 0;
- 	} else if (msk & VDSO_RAW) {
+ 	else if (msk & VDSO_COARSE)
+ 		return do_coarse(&vd[CS_HRES_COARSE], clock, ts);
+ 	else if (msk & VDSO_RAW)
  		return do_hres(&vd[CS_RAW], clock, ts);
++<<<<<<< HEAD
 +	}
++=======
+ 
+ 	return -1;
+ }
++>>>>>>> 8463cf80529d (lib/vdso: Let do_coarse() return 0 to simplify the callsite)
  
 -static __maybe_unused int
 -__cvdso_clock_gettime(clockid_t clock, struct __kernel_timespec *ts)
 -{
 -	int ret = __cvdso_clock_gettime_common(clock, ts);
 -
 -	if (unlikely(ret))
 -		return clock_gettime_fallback(clock, ts);
 -	return 0;
 +fallback:
 +	return clock_gettime_fallback(clock, ts);
  }
  
  #ifdef BUILD_VDSO32
* Unmerged path lib/vdso/gettimeofday.c
