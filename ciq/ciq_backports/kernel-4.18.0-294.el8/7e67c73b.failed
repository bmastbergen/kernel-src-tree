powerpc/test_emulate_step: Add negative tests for prefixed addi

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Balamuruhan S <bala24@linux.ibm.com>
commit 7e67c73b939b25d4ad18a536e52282aa35d8ee56
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/7e67c73b.failed

testcases for `paddi` instruction to cover the negative case,
if R is equal to 1 and RA is not equal to 0, the instruction
form is invalid.

	Signed-off-by: Balamuruhan S <bala24@linux.ibm.com>
	Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
Link: https://lore.kernel.org/r/20200626095158.1031507-3-bala24@linux.ibm.com
(cherry picked from commit 7e67c73b939b25d4ad18a536e52282aa35d8ee56)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/powerpc/lib/test_emulate_step.c
diff --cc arch/powerpc/lib/test_emulate_step.c
index 36931d06bd76,7d11ab5ef86c..000000000000
--- a/arch/powerpc/lib/test_emulate_step.c
+++ b/arch/powerpc/lib/test_emulate_step.c
@@@ -843,6 -1017,131 +843,134 @@@ static struct compute_test compute_test
  				}
  			}
  		}
++<<<<<<< HEAD
++=======
+ 	},
+ 	{
+ 		.mnemonic = "paddi",
+ 		.cpu_feature = CPU_FTR_ARCH_31,
+ 		.subtests = {
+ 			{
+ 				.descr = "RA = LONG_MIN, SI = SI_MIN, R = 0",
+ 				.instr = TEST_PADDI(21, 22, SI_MIN, 0),
+ 				.regs = {
+ 					.gpr[21] = 0,
+ 					.gpr[22] = LONG_MIN,
+ 				}
+ 			},
+ 			{
+ 				.descr = "RA = LONG_MIN, SI = SI_MAX, R = 0",
+ 				.instr = TEST_PADDI(21, 22, SI_MAX, 0),
+ 				.regs = {
+ 					.gpr[21] = 0,
+ 					.gpr[22] = LONG_MIN,
+ 				}
+ 			},
+ 			{
+ 				.descr = "RA = LONG_MAX, SI = SI_MAX, R = 0",
+ 				.instr = TEST_PADDI(21, 22, SI_MAX, 0),
+ 				.regs = {
+ 					.gpr[21] = 0,
+ 					.gpr[22] = LONG_MAX,
+ 				}
+ 			},
+ 			{
+ 				.descr = "RA = ULONG_MAX, SI = SI_UMAX, R = 0",
+ 				.instr = TEST_PADDI(21, 22, SI_UMAX, 0),
+ 				.regs = {
+ 					.gpr[21] = 0,
+ 					.gpr[22] = ULONG_MAX,
+ 				}
+ 			},
+ 			{
+ 				.descr = "RA = ULONG_MAX, SI = 0x1, R = 0",
+ 				.instr = TEST_PADDI(21, 22, 0x1, 0),
+ 				.regs = {
+ 					.gpr[21] = 0,
+ 					.gpr[22] = ULONG_MAX,
+ 				}
+ 			},
+ 			{
+ 				.descr = "RA = INT_MIN, SI = SI_MIN, R = 0",
+ 				.instr = TEST_PADDI(21, 22, SI_MIN, 0),
+ 				.regs = {
+ 					.gpr[21] = 0,
+ 					.gpr[22] = INT_MIN,
+ 				}
+ 			},
+ 			{
+ 				.descr = "RA = INT_MIN, SI = SI_MAX, R = 0",
+ 				.instr = TEST_PADDI(21, 22, SI_MAX, 0),
+ 				.regs = {
+ 					.gpr[21] = 0,
+ 					.gpr[22] = INT_MIN,
+ 				}
+ 			},
+ 			{
+ 				.descr = "RA = INT_MAX, SI = SI_MAX, R = 0",
+ 				.instr = TEST_PADDI(21, 22, SI_MAX, 0),
+ 				.regs = {
+ 					.gpr[21] = 0,
+ 					.gpr[22] = INT_MAX,
+ 				}
+ 			},
+ 			{
+ 				.descr = "RA = UINT_MAX, SI = 0x1, R = 0",
+ 				.instr = TEST_PADDI(21, 22, 0x1, 0),
+ 				.regs = {
+ 					.gpr[21] = 0,
+ 					.gpr[22] = UINT_MAX,
+ 				}
+ 			},
+ 			{
+ 				.descr = "RA = UINT_MAX, SI = SI_MAX, R = 0",
+ 				.instr = TEST_PADDI(21, 22, SI_MAX, 0),
+ 				.regs = {
+ 					.gpr[21] = 0,
+ 					.gpr[22] = UINT_MAX,
+ 				}
+ 			},
+ 			{
+ 				.descr = "RA is r0, SI = SI_MIN, R = 0",
+ 				.instr = TEST_PADDI(21, 0, SI_MIN, 0),
+ 				.regs = {
+ 					.gpr[21] = 0x0,
+ 				}
+ 			},
+ 			{
+ 				.descr = "RA = 0, SI = SI_MIN, R = 0",
+ 				.instr = TEST_PADDI(21, 22, SI_MIN, 0),
+ 				.regs = {
+ 					.gpr[21] = 0x0,
+ 					.gpr[22] = 0x0,
+ 				}
+ 			},
+ 			{
+ 				.descr = "RA is r0, SI = 0, R = 1",
+ 				.instr = TEST_PADDI(21, 0, 0, 1),
+ 				.regs = {
+ 					.gpr[21] = 0,
+ 				}
+ 			},
+ 			{
+ 				.descr = "RA is r0, SI = SI_MIN, R = 1",
+ 				.instr = TEST_PADDI(21, 0, SI_MIN, 1),
+ 				.regs = {
+ 					.gpr[21] = 0,
+ 				}
+ 			},
+ 			/* Invalid instruction form with R = 1 and RA != 0 */
+ 			{
+ 				.descr = "RA = R22(0), SI = 0, R = 1",
+ 				.instr = TEST_PADDI(21, 22, 0, 1),
+ 				.flags = NEGATIVE_TEST,
+ 				.regs = {
+ 					.gpr[21] = 0,
+ 					.gpr[22] = 0,
+ 				}
+ 			}
+ 		}
++>>>>>>> 7e67c73b939b (powerpc/test_emulate_step: Add negative tests for prefixed addi)
  	}
  };
  
* Unmerged path arch/powerpc/lib/test_emulate_step.c
