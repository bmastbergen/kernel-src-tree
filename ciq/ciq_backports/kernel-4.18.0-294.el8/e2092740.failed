kasan: Makefile: Replace -pg with CC_FLAGS_FTRACE

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Torsten Duwe <duwe@lst.de>
commit e2092740b72384e95b9c8a418536b35d628a1642
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/e2092740.failed

In preparation for arm64 supporting ftrace built on other compiler
options, let's have Makefiles remove the $(CC_FLAGS_FTRACE) flags,
whatever these may be, rather than assuming '-pg'.

There should be no functional change as a result of this patch.

	Reviewed-by: Mark Rutland <mark.rutland@arm.com>
	Acked-by: Andrey Ryabinin <aryabinin@virtuozzo.com>
	Signed-off-by: Torsten Duwe <duwe@suse.de>
	Signed-off-by: Will Deacon <will.deacon@arm.com>
(cherry picked from commit e2092740b72384e95b9c8a418536b35d628a1642)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	mm/kasan/Makefile
diff --cc mm/kasan/Makefile
index 3289db38bc87,f06ee820d356..000000000000
--- a/mm/kasan/Makefile
+++ b/mm/kasan/Makefile
@@@ -1,11 -1,21 +1,18 @@@
  # SPDX-License-Identifier: GPL-2.0
  KASAN_SANITIZE := n
 -UBSAN_SANITIZE_common.o := n
 -UBSAN_SANITIZE_generic.o := n
 -UBSAN_SANITIZE_tags.o := n
 +UBSAN_SANITIZE_kasan.o := n
  KCOV_INSTRUMENT := n
  
++<<<<<<< HEAD
 +CFLAGS_REMOVE_kasan.o = -pg
++=======
+ CFLAGS_REMOVE_common.o = $(CC_FLAGS_FTRACE)
+ CFLAGS_REMOVE_generic.o = $(CC_FLAGS_FTRACE)
+ CFLAGS_REMOVE_tags.o = $(CC_FLAGS_FTRACE)
+ 
++>>>>>>> e2092740b723 (kasan: Makefile: Replace -pg with CC_FLAGS_FTRACE)
  # Function splitter causes unnecessary splits in __asan_load1/__asan_store1
  # see: https://gcc.gnu.org/bugzilla/show_bug.cgi?id=63533
 +CFLAGS_kasan.o := $(call cc-option, -fno-conserve-stack -fno-stack-protector)
  
 -CFLAGS_common.o := $(call cc-option, -fno-conserve-stack -fno-stack-protector)
 -CFLAGS_generic.o := $(call cc-option, -fno-conserve-stack -fno-stack-protector)
 -CFLAGS_tags.o := $(call cc-option, -fno-conserve-stack -fno-stack-protector)
 -
 -obj-$(CONFIG_KASAN) := common.o init.o report.o
 -obj-$(CONFIG_KASAN_GENERIC) += generic.o generic_report.o quarantine.o
 -obj-$(CONFIG_KASAN_SW_TAGS) += tags.o tags_report.o
 +obj-y := kasan.o report.o kasan_init.o quarantine.o
* Unmerged path mm/kasan/Makefile
