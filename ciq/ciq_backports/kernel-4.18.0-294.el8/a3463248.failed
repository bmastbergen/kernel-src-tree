drm/nouveau/bios/ga10[024]: initial support

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
Rebuild_CHGLOG: - [drm] drm/nouveau/bios/ga10: initial support (Ben Skeggs) [1916583]
Rebuild_FUZZ: 93.83%
commit-author Ben Skeggs <bskeggs@redhat.com>
commit a34632482f1ea768429a9d4c79a10d12f5093405
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/a3463248.failed

Forcing PRAMIN-shadowing off for GA100, as it requires display, and we don't
know if/where the fuse register for detecting its presence is.

	Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
(cherry picked from commit a34632482f1ea768429a9d4c79a10d12f5093405)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/nouveau/nvkm/engine/device/base.c
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/device/base.c
index 52406e010cbb,7c35c32cdf73..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/device/base.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/device/base.c
@@@ -2652,6 -2652,27 +2652,30 @@@ nv168_chipset = 
  	.sec2 = tu102_sec2_new,
  };
  
++<<<<<<< HEAD
++=======
+ static const struct nvkm_device_chip
+ nv170_chipset = {
+ 	.name = "GA100",
+ 	.bios = nvkm_bios_new,
+ 	.pci = gp100_pci_new,
+ };
+ 
+ static const struct nvkm_device_chip
+ nv172_chipset = {
+ 	.name = "GA102",
+ 	.bios = nvkm_bios_new,
+ 	.pci = gp100_pci_new,
+ };
+ 
+ static const struct nvkm_device_chip
+ nv174_chipset = {
+ 	.name = "GA104",
+ 	.bios = nvkm_bios_new,
+ 	.pci = gp100_pci_new,
+ };
+ 
++>>>>>>> a34632482f1e (drm/nouveau/bios/ga10[024]: initial support)
  static int
  nvkm_device_event_ctor(struct nvkm_object *object, void *data, u32 size,
  		       struct nvkm_notify *notify)
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/device/base.c
diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/bios/shadowramin.c b/drivers/gpu/drm/nouveau/nvkm/subdev/bios/shadowramin.c
index 3634cd0630b8..023ddc7c5399 100644
--- a/drivers/gpu/drm/nouveau/nvkm/subdev/bios/shadowramin.c
+++ b/drivers/gpu/drm/nouveau/nvkm/subdev/bios/shadowramin.c
@@ -64,6 +64,9 @@ pramin_init(struct nvkm_bios *bios, const char *name)
 		return NULL;
 
 	/* we can't get the bios image pointer without PDISP */
+	if (device->card_type >= GA100)
+		addr = device->chipset == 0x170; /*XXX: find the fuse reg for this */
+	else
 	if (device->card_type >= GM100)
 		addr = nvkm_rd32(device, 0x021c04);
 	else
