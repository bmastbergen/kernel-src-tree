x86/platform/uv: Remove uv bios and efi code related to EFI_UV1_MEMMAP

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author steve.wahl@hpe.com <steve.wahl@hpe.com>
commit 6aa3baabe106fa1182f904107244147395902a09
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/6aa3baab.failed

With UV1 removed, EFI_UV1_MEMMAP is not longer used.  Remove the code used
by it and the related code in EFI.

	Signed-off-by: Steve Wahl <steve.wahl@hpe.com>
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Reviewed-by: Ard Biesheuvel <ardb@kernel.org>
Link: https://lkml.kernel.org/r/20200713212955.902592618@hpe.com

(cherry picked from commit 6aa3baabe106fa1182f904107244147395902a09)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/platform/efi/efi.c
#	arch/x86/platform/uv/bios_uv.c
diff --cc arch/x86/platform/efi/efi.c
index 0204ffe2d898,f6ea8f1a9d57..000000000000
--- a/arch/x86/platform/efi/efi.c
+++ b/arch/x86/platform/efi/efi.c
@@@ -551,6 -496,8 +551,11 @@@ void __init efi_init(void
  		efi_print_memmap();
  }
  
++<<<<<<< HEAD
++=======
+ #if defined(CONFIG_X86_32)
+ 
++>>>>>>> 6aa3baabe106 (x86/platform/uv: Remove uv bios and efi code related to EFI_UV1_MEMMAP)
  void __init efi_set_executable(efi_memory_desc_t *md, bool executable)
  {
  	u64 addr, npages;
diff --cc arch/x86/platform/uv/bios_uv.c
index 6fbaf03c6d74,a6e5f2c1805d..000000000000
--- a/arch/x86/platform/uv/bios_uv.c
+++ b/arch/x86/platform/uv/bios_uv.c
@@@ -41,17 -30,7 +41,21 @@@ static s64 __uv_bios_call(enum uv_bios_
  		 */
  		return BIOS_STATUS_UNIMPLEMENTED;
  
++<<<<<<< HEAD
 +	/*
 +	 * If EFI_OLD_MEMMAP is set, we need to fall back to using our old EFI
 +	 * callback method, which uses efi_call() directly, with the kernel page tables:
 +	 */
 +	if (unlikely(efi_enabled(EFI_OLD_MEMMAP))) {
 +		kernel_fpu_begin();
 +		ret = efi_call((void *)__va(tab->function), (u64)which, a1, a2, a3, a4, a5);
 +		kernel_fpu_end();
 +	} else {
 +		ret = efi_call_virt_pointer(tab, function, (u64)which, a1, a2, a3, a4, a5);
 +	}
++=======
+ 	ret = efi_call_virt_pointer(tab, function, (u64)which, a1, a2, a3, a4, a5);
++>>>>>>> 6aa3baabe106 (x86/platform/uv: Remove uv bios and efi code related to EFI_UV1_MEMMAP)
  
  	return ret;
  }
@@@ -221,4 -199,3 +225,7 @@@ int uv_bios_init(void
  	pr_info("UV: UVsystab: Revision:%x\n", uv_systab->revision);
  	return 0;
  }
++<<<<<<< HEAD
 +#endif
++=======
++>>>>>>> 6aa3baabe106 (x86/platform/uv: Remove uv bios and efi code related to EFI_UV1_MEMMAP)
* Unmerged path arch/x86/platform/efi/efi.c
* Unmerged path arch/x86/platform/uv/bios_uv.c
