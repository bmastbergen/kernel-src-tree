block: account merge of two requests

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Konstantin Khlebnikov <khlebnikov@yandex-team.ru>
commit b9c54f5660e7eff10dd2ddd1eae554573105b15d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/b9c54f56.failed

Also rename blk_account_io_merge() into blk_account_io_merge_request() to
distinguish it from merging request and bio.

[hch: rebased]

	Signed-off-by: Konstantin Khlebnikov <khlebnikov@yandex-team.ru>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Jens Axboe <axboe@kernel.dk>
(cherry picked from commit b9c54f5660e7eff10dd2ddd1eae554573105b15d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	block/blk-merge.c
diff --cc block/blk-merge.c
index 96b6e62209ca,c3beae5c1be7..000000000000
--- a/block/blk-merge.c
+++ b/block/blk-merge.c
@@@ -662,17 -669,12 +662,20 @@@ void blk_rq_set_mixed_merge(struct requ
  	rq->rq_flags |= RQF_MIXED_MERGE;
  }
  
- static void blk_account_io_merge(struct request *req)
+ static void blk_account_io_merge_request(struct request *req)
  {
  	if (blk_do_io_stat(req)) {
- 		struct hd_struct *part;
- 
  		part_stat_lock();
++<<<<<<< HEAD
 +		part = req->part;
 +
 +		part_dec_in_flight(req->q, part, rq_data_dir(req));
 +
 +		hd_struct_put(part);
++=======
+ 		part_stat_inc(req->part, merges[op_stat_group(req_op(req))]);
+ 		hd_struct_put(req->part);
++>>>>>>> b9c54f5660e7 (block: account merge of two requests)
  		part_stat_unlock();
  	}
  }
* Unmerged path block/blk-merge.c
