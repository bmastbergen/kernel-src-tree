xfs: Add the missed xfs_perag_put() for xfs_ifree_cluster()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Chuhong Yuan <hslester96@gmail.com>
commit 8cc0072469723459dc6bd7beff81b2b3149f4cf4
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/8cc00724.failed

xfs_ifree_cluster() calls xfs_perag_get() at the beginning, but forgets to
call xfs_perag_put() in one failed path.
Add the missed function call to fix it.

Fixes: ce92464c180b ("xfs: make xfs_trans_get_buf return an error code")
	Signed-off-by: Chuhong Yuan <hslester96@gmail.com>
	Reviewed-by: Darrick J. Wong <darrick.wong@oracle.com>
	Signed-off-by: Darrick J. Wong <darrick.wong@oracle.com>
(cherry picked from commit 8cc0072469723459dc6bd7beff81b2b3149f4cf4)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/xfs/xfs_inode.c
diff --cc fs/xfs/xfs_inode.c
index 206d17ab52c7,88a9e4964802..000000000000
--- a/fs/xfs/xfs_inode.c
+++ b/fs/xfs/xfs_inode.c
@@@ -2566,12 -2631,13 +2566,22 @@@ xfs_ifree_cluster
  		 * complete before we get a lock on it, and hence we may fail
  		 * to mark all the active inodes on the buffer stale.
  		 */
++<<<<<<< HEAD
 +		bp = xfs_trans_get_buf(tp, mp->m_ddev_targp, blkno,
 +					mp->m_bsize * igeo->blocks_per_cluster,
 +					XBF_UNMAPPED);
 +
 +		if (!bp)
 +			return -ENOMEM;
++=======
+ 		error = xfs_trans_get_buf(tp, mp->m_ddev_targp, blkno,
+ 				mp->m_bsize * igeo->blocks_per_cluster,
+ 				XBF_UNMAPPED, &bp);
+ 		if (error) {
+ 			xfs_perag_put(pag);
+ 			return error;
+ 		}
++>>>>>>> 8cc007246972 (xfs: Add the missed xfs_perag_put() for xfs_ifree_cluster())
  
  		/*
  		 * This buffer may not have been correctly initialised as we
* Unmerged path fs/xfs/xfs_inode.c
