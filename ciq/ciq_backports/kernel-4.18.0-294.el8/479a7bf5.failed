x86/sev-es: Handle DR7 read/write events

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
Rebuild_CHGLOG: - [x86] sev-es: Handle DR7 read/write events (Vitaly Kuznetsov) [1868080]
Rebuild_FUZZ: 94.74%
commit-author Tom Lendacky <thomas.lendacky@amd.com>
commit 479a7bf5c1f7f14eb37c6d6aeb401562efc1fcad
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/479a7bf5.failed

Add code to handle #VC exceptions on DR7 register reads and writes.
This is needed early because show_regs() reads DR7 to print it out.

Under SEV-ES, there is currently no support for saving/restoring the
DRx registers but software expects to be able to write to the DR7
register. For now, cache the value written to DR7 and return it on
read attempts, but do not touch the real hardware DR7.

	Signed-off-by: Tom Lendacky <thomas.lendacky@amd.com>
[ jroedel@suse.de: - Adapt to #VC handling framework
                   - Support early usage ]
Co-developed-by: Joerg Roedel <jroedel@suse.de>
	Signed-off-by: Joerg Roedel <jroedel@suse.de>
	Signed-off-by: Borislav Petkov <bp@suse.de>
Link: https://lkml.kernel.org/r/20200907131613.12703-53-joro@8bytes.org
(cherry picked from commit 479a7bf5c1f7f14eb37c6d6aeb401562efc1fcad)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/kernel/sev-es.c
* Unmerged path arch/x86/kernel/sev-es.c
* Unmerged path arch/x86/kernel/sev-es.c
