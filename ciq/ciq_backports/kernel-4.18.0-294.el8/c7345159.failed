dma-direct: avoid a forward declaration for phys_to_dma

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Christoph Hellwig <hch@lst.de>
commit c7345159f7db6fb69ec1c3b3f8f28cd05c731be2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/c7345159.failed

Move dma_capable down a bit so that we don't need a forward declaration
for phys_to_dma.

	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Reviewed-by: Nicolas Saenz Julienne <nsaenzjulienne@suse.de>
(cherry picked from commit c7345159f7db6fb69ec1c3b3f8f28cd05c731be2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/linux/dma-direct.h
diff --cc include/linux/dma-direct.h
index 1628fb6087ec,f8959f75e496..000000000000
--- a/include/linux/dma-direct.h
+++ b/include/linux/dma-direct.h
@@@ -6,10 -6,6 +6,13 @@@
  #include <linux/memblock.h> /* for min_low_pfn */
  #include <linux/mem_encrypt.h>
  
++<<<<<<< HEAD
 +static inline dma_addr_t phys_to_dma(struct device *dev, phys_addr_t paddr);
 +
 +extern unsigned int zone_dma_bits;
 +
++=======
++>>>>>>> c7345159f7db (dma-direct: avoid a forward declaration for phys_to_dma)
  #ifdef CONFIG_ARCH_HAS_PHYS_TO_DMA
  #include <asm/dma-direct.h>
  #else
@@@ -28,21 -24,6 +31,24 @@@ static inline phys_addr_t __dma_to_phys
  }
  #endif /* !CONFIG_ARCH_HAS_PHYS_TO_DMA */
  
++<<<<<<< HEAD
 +static inline bool dma_capable(struct device *dev, dma_addr_t addr, size_t size,
 +		bool is_ram)
 +{
 +	dma_addr_t end = addr + size - 1;
 +
 +	if (!dev->dma_mask)
 +		return false;
 +
 +	if (is_ram && !IS_ENABLED(CONFIG_ARCH_DMA_ADDR_T_64BIT) &&
 +	    min(addr, end) < phys_to_dma(dev, PFN_PHYS(min_low_pfn)))
 +		return false;
 +
 +	return end <= min_not_zero(*dev->dma_mask, dev->bus_dma_limit);
 +}
 +
++=======
++>>>>>>> c7345159f7db (dma-direct: avoid a forward declaration for phys_to_dma)
  #ifdef CONFIG_ARCH_HAS_FORCE_DMA_UNENCRYPTED
  bool force_dma_unencrypted(struct device *dev);
  #else
* Unmerged path include/linux/dma-direct.h
