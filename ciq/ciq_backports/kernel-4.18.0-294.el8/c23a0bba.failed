convenience helper: get_tree_single()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Al Viro <viro@zeniv.linux.org.uk>
commit c23a0bbab30cc1714b6b1d6a1c153a5ccab3f0d8
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/c23a0bba.failed

counterpart of mount_single(); switch fusectl to it

	Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
(cherry picked from commit c23a0bbab30cc1714b6b1d6a1c153a5ccab3f0d8)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/fuse/control.c
#	include/linux/fs_context.h
diff --cc fs/fuse/control.c
index fe80bea4ad89,c23f6f243ad4..000000000000
--- a/fs/fuse/control.c
+++ b/fs/fuse/control.c
@@@ -343,10 -344,19 +343,24 @@@ static int fuse_ctl_fill_super(struct s
  	return 0;
  }
  
 -static int fuse_ctl_get_tree(struct fs_context *fc)
 +static struct dentry *fuse_ctl_mount(struct file_system_type *fs_type,
 +			int flags, const char *dev_name, void *raw_data)
  {
++<<<<<<< HEAD
 +	return mount_single(fs_type, flags, raw_data, fuse_ctl_fill_super);
++=======
+ 	return get_tree_single(fc, fuse_ctl_fill_super);
+ }
+ 
+ static const struct fs_context_operations fuse_ctl_context_ops = {
+ 	.get_tree	= fuse_ctl_get_tree,
+ };
+ 
+ static int fuse_ctl_init_fs_context(struct fs_context *fc)
+ {
+ 	fc->ops = &fuse_ctl_context_ops;
+ 	return 0;
++>>>>>>> c23a0bbab30c (convenience helper: get_tree_single())
  }
  
  static void fuse_ctl_kill_sb(struct super_block *sb)
* Unmerged path include/linux/fs_context.h
* Unmerged path fs/fuse/control.c
diff --git a/fs/super.c b/fs/super.c
index 72596c26684f..9faafd37e379 100644
--- a/fs/super.c
+++ b/fs/super.c
@@ -1084,6 +1084,14 @@ struct dentry *mount_ns(struct file_system_type *fs_type,
 
 EXPORT_SYMBOL(mount_ns);
 
+int get_tree_single(struct fs_context *fc,
+		  int (*fill_super)(struct super_block *sb,
+				    struct fs_context *fc))
+{
+	return vfs_get_super(fc, vfs_get_single_super, fill_super);
+}
+EXPORT_SYMBOL(get_tree_single);
+
 #ifdef CONFIG_BLOCK
 static int set_bdev_super(struct super_block *s, void *data)
 {
* Unmerged path include/linux/fs_context.h
