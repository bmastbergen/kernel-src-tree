efi/libstub/x86: Fix unused-variable warning

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Arnd Bergmann <arnd@arndb.de>
commit bd1d7093a8086df37d260bd1f1d896c0922d34ef
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/bd1d7093.failed

The only users of these got removed, so they also need to be
removed to avoid warnings:

  arch/x86/boot/compressed/eboot.c: In function 'setup_efi_pci':
  arch/x86/boot/compressed/eboot.c:117:16: error: unused variable 'nr_pci' [-Werror=unused-variable]
    unsigned long nr_pci;
                  ^~~~~~
  arch/x86/boot/compressed/eboot.c: In function 'setup_uga':
  arch/x86/boot/compressed/eboot.c:244:16: error: unused variable 'nr_ugas' [-Werror=unused-variable]
    unsigned long nr_ugas;
                  ^~~~~~~

Fixes: 2732ea0d5c0a ("efi/libstub: Use a helper to iterate over a EFI handle array")
	Signed-off-by: Arnd Bergmann <arnd@arndb.de>
	Signed-off-by: Ard Biesheuvel <ardb@kernel.org>
	Signed-off-by: Ingo Molnar <mingo@kernel.org>
Link: https://lore.kernel.org/r/20200113172245.27925-4-ardb@kernel.org
(cherry picked from commit bd1d7093a8086df37d260bd1f1d896c0922d34ef)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/boot/compressed/eboot.c
diff --cc arch/x86/boot/compressed/eboot.c
index 10bf056d4aae,82e26d0ff075..000000000000
--- a/arch/x86/boot/compressed/eboot.c
+++ b/arch/x86/boot/compressed/eboot.c
@@@ -286,18 -118,19 +286,24 @@@ static void setup_efi_pci(struct boot_p
  	void **pci_handle = NULL;
  	efi_guid_t pci_proto = EFI_PCI_IO_PROTOCOL_GUID;
  	unsigned long size = 0;
++<<<<<<< HEAD
++=======
+ 	struct setup_data *data;
+ 	efi_handle_t h;
+ 	int i;
++>>>>>>> bd1d7093a808 (efi/libstub/x86: Fix unused-variable warning)
  
 -	status = efi_bs_call(locate_handle, EFI_LOCATE_BY_PROTOCOL,
 -			     &pci_proto, NULL, &size, pci_handle);
 +	status = efi_call_early(locate_handle,
 +				EFI_LOCATE_BY_PROTOCOL,
 +				&pci_proto, NULL, &size, pci_handle);
  
  	if (status == EFI_BUFFER_TOO_SMALL) {
 -		status = efi_bs_call(allocate_pool, EFI_LOADER_DATA, size,
 -				     (void **)&pci_handle);
 +		status = efi_call_early(allocate_pool,
 +					EFI_LOADER_DATA,
 +					size, (void **)&pci_handle);
  
  		if (status != EFI_SUCCESS) {
 -			efi_printk("Failed to allocate memory for 'pci_handle'\n");
 +			efi_printk(sys_table, "Failed to alloc mem for pci_handle\n");
  			return;
  		}
  
@@@ -392,11 -244,11 +398,15 @@@ static efi_status_t setup_uga(struct sc
  	u32 width, height;
  	void **uga_handle = NULL;
  	efi_uga_draw_protocol_t *uga = NULL, *first_uga;
++<<<<<<< HEAD
 +	unsigned long nr_ugas;
++=======
+ 	efi_handle_t handle;
++>>>>>>> bd1d7093a808 (efi/libstub/x86: Fix unused-variable warning)
  	int i;
  
 -	status = efi_bs_call(allocate_pool, EFI_LOADER_DATA, size,
 -			     (void **)&uga_handle);
 +	status = efi_call_early(allocate_pool, EFI_LOADER_DATA,
 +				size, (void **)&uga_handle);
  	if (status != EFI_SUCCESS)
  		return status;
  
* Unmerged path arch/x86/boot/compressed/eboot.c
