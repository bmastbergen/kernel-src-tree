lib/vdso: Remove checks on return value for 32 bit vDSO

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Vincenzo Frascino <vincenzo.frascino@arm.com>
commit a279235ddbe975670afe2267162028ec0a312293
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/a279235d.failed

Since all the architectures that support the generic vDSO library have
been converted to support the 32 bit fallbacks it is not required
anymore to check the return value of __cvdso_clock_get*time32_common()
before updating the old_timespec fields.

Remove the related checks from the generic vdso library.

References: c60a32ea4f45 ("lib/vdso/32: Provide legacy syscall fallbacks")
	Signed-off-by: Vincenzo Frascino <vincenzo.frascino@arm.com>
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
Link: https://lore.kernel.org/r/20190830135902.20861-6-vincenzo.frascino@arm.com


(cherry picked from commit a279235ddbe975670afe2267162028ec0a312293)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	lib/vdso/gettimeofday.c
diff --cc lib/vdso/gettimeofday.c
index b30c5801ec9b,b676a9845def..000000000000
--- a/lib/vdso/gettimeofday.c
+++ b/lib/vdso/gettimeofday.c
@@@ -105,12 -124,14 +105,21 @@@ __cvdso_clock_gettime32(clockid_t clock
  	struct __kernel_timespec ts;
  	int ret;
  
 -	ret = __cvdso_clock_gettime_common(clock, &ts);
 +	ret = __cvdso_clock_gettime(clock, &ts);
  
++<<<<<<< HEAD
 +	if (ret == 0) {
 +		res->tv_sec = ts.tv_sec;
 +		res->tv_nsec = ts.tv_nsec;
 +	}
++=======
+ 	if (unlikely(ret))
+ 		return clock_gettime32_fallback(clock, res);
+ 
+ 	/* For ret == 0 */
+ 	res->tv_sec = ts.tv_sec;
+ 	res->tv_nsec = ts.tv_nsec;
++>>>>>>> a279235ddbe9 (lib/vdso: Remove checks on return value for 32 bit vDSO)
  
  	return ret;
  }
@@@ -205,9 -235,12 +214,16 @@@ __cvdso_clock_getres_time32(clockid_t c
  	struct __kernel_timespec ts;
  	int ret;
  
 -	ret = __cvdso_clock_getres_common(clock, &ts);
 +	ret = __cvdso_clock_getres(clock, &ts);
  
++<<<<<<< HEAD
 +	if (ret == 0) {
++=======
+ 	if (unlikely(ret))
+ 		return clock_getres32_fallback(clock, res);
+ 
+ 	if (likely(res)) {
++>>>>>>> a279235ddbe9 (lib/vdso: Remove checks on return value for 32 bit vDSO)
  		res->tv_sec = ts.tv_sec;
  		res->tv_nsec = ts.tv_nsec;
  	}
* Unmerged path lib/vdso/gettimeofday.c
