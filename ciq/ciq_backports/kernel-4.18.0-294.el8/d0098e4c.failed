net/ipv6: remove the old peer route if change it to a new one

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Hangbin Liu <liuhangbin@gmail.com>
commit d0098e4c6b83e502cc1cd96d67ca86bc79a6c559
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/d0098e4c.failed

When we modify the peer route and changed it to a new one, we should
remove the old route first. Before the fix:

+ ip addr add dev dummy1 2001:db8::1 peer 2001:db8::2
+ ip -6 route show dev dummy1
2001:db8::1 proto kernel metric 256 pref medium
2001:db8::2 proto kernel metric 256 pref medium
+ ip addr change dev dummy1 2001:db8::1 peer 2001:db8::3
+ ip -6 route show dev dummy1
2001:db8::1 proto kernel metric 256 pref medium
2001:db8::2 proto kernel metric 256 pref medium

After the fix:
+ ip addr change dev dummy1 2001:db8::1 peer 2001:db8::3
+ ip -6 route show dev dummy1
2001:db8::1 proto kernel metric 256 pref medium
2001:db8::3 proto kernel metric 256 pref medium

This patch depend on the previous patch "net/ipv6: need update peer route
when modify metric" to update new peer route after delete old one.

	Signed-off-by: Hangbin Liu <liuhangbin@gmail.com>
	Reviewed-by: David Ahern <dsahern@gmail.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit d0098e4c6b83e502cc1cd96d67ca86bc79a6c559)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv6/addrconf.c
diff --cc net/ipv6/addrconf.c
index 38f8f311e149,e6e1290ea06f..000000000000
--- a/net/ipv6/addrconf.c
+++ b/net/ipv6/addrconf.c
@@@ -1232,10 -1231,9 +1233,16 @@@ cleanup_prefix_route(struct inet6_ifadd
  {
  	struct fib6_info *f6i;
  
++<<<<<<< HEAD
 +	f6i = addrconf_get_prefix_route(&ifp->addr,
 +				       ifp->prefix_len,
 +				       ifp->idev->dev,
 +				       0, RTF_GATEWAY | RTF_DEFAULT);
++=======
+ 	f6i = addrconf_get_prefix_route(del_peer ? &ifp->peer_addr : &ifp->addr,
+ 					ifp->prefix_len,
+ 					ifp->idev->dev, 0, RTF_DEFAULT, true);
++>>>>>>> d0098e4c6b83 (net/ipv6: remove the old peer route if change it to a new one)
  	if (f6i) {
  		if (del_rt)
  			ip6_del_rt(dev_net(ifp->idev->dev), f6i);
* Unmerged path net/ipv6/addrconf.c
