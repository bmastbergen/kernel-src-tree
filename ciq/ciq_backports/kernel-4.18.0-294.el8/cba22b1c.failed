Replace HTTP links with HTTPS ones: CIFS

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Alexander A. Klimov <grandmaster@al2klimov.de>
commit cba22b1c5945696d01635ffb001443974f98bcd4
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/cba22b1c.failed

Rationale:
Reduces attack surface on kernel devs opening the links for MITM
as HTTPS traffic is much harder to manipulate.

Deterministic algorithm:
For each file:
  If not .svg:
    For each line:
      If doesn't contain `\bxmlns\b`:
        For each link, `\bhttp://[^# \t\r\n]*(?:\w|/)`:
          If both the HTTP and HTTPS versions
          return 200 OK and serve the same content:
            Replace HTTP with HTTPS.

	Signed-off-by: Alexander A. Klimov <grandmaster@al2klimov.de>
	Reviewed-by: Aurelien Aptel <aaptel@suse.com>
Link: https://lore.kernel.org/r/20200627103125.71828-1-grandmaster@al2klimov.de
	Signed-off-by: Jonathan Corbet <corbet@lwn.net>
(cherry picked from commit cba22b1c5945696d01635ffb001443974f98bcd4)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	Documentation/filesystems/cifs/README
#	Documentation/filesystems/cifs/TODO
diff --cc Documentation/filesystems/cifs/README
index 99ce3d25003d,4abaea40dfd1..000000000000
--- a/Documentation/filesystems/cifs/README
+++ b/Documentation/filesystems/cifs/README
@@@ -11,9 -15,9 +11,15 @@@ Information Foundation.  CIFS and now S
  standard for interoperating between Macs and Windows and major NAS appliances.
  
  Please see
++<<<<<<< HEAD:Documentation/filesystems/cifs/README
 +  MS-SMB2 (for detailed SMB2/SMB3/SMB3.1.1 protocol specification)
 +  http://protocolfreedom.org/ and
 +  http://samba.org/samba/PFIF/
++=======
+ MS-SMB2 (for detailed SMB2/SMB3/SMB3.1.1 protocol specification)
+ http://protocolfreedom.org/ and
+ https://samba.org/samba/PFIF/
++>>>>>>> cba22b1c5945 (Replace HTTP links with HTTPS ones: CIFS):Documentation/admin-guide/cifs/usage.rst
  for more details.
  
  
@@@ -22,12 -27,14 +28,19 @@@ For questions or bug reports please con
  
  See the project page at: https://wiki.samba.org/index.php/LinuxCIFS_utils
  
 -Build instructions
 +Build instructions:
  ==================
 -
  For Linux:
++<<<<<<< HEAD:Documentation/filesystems/cifs/README
 +1) Download the kernel (e.g. from http://www.kernel.org)
 +and change directory into the top of the kernel directory tree
 +(e.g. /usr/src/linux-2.5.73)
++=======
+ 
+ 1) Download the kernel (e.g. from https://www.kernel.org)
+    and change directory into the top of the kernel directory tree
+    (e.g. /usr/src/linux-2.5.73)
++>>>>>>> cba22b1c5945 (Replace HTTP links with HTTPS ones: CIFS):Documentation/admin-guide/cifs/usage.rst
  2) make menuconfig (or make xconfig)
  3) select cifs from within the network filesystem choices
  4) save and exit
diff --cc Documentation/filesystems/cifs/TODO
index 9267f3fb131f,25f11576e7b9..000000000000
--- a/Documentation/filesystems/cifs/TODO
+++ b/Documentation/filesystems/cifs/TODO
@@@ -70,21 -81,24 +70,25 @@@ or unsupported feature errors
  r) updating cifs documentation, and user guide.
  
  s) Addressing bugs found by running a broader set of xfstests in standard
 -   file system xfstest suite.
 +file system xfstest suite.
  
  t) split cifs and smb3 support into separate modules so legacy (and less
 -   secure) CIFS dialect can be disabled in environments that don't need it
 -   and simplify the code.
 +secure) CIFS dialect can be disabled in environments that don't need it
 +and simplify the code.
  
  v) POSIX Extensions for SMB3.1.1 (started, create and mkdir support added
 -   so far).
 +so far).
  
  w) Add support for additional strong encryption types, and additional spnego
 -   authentication mechanisms (see MS-SMB2)
 -
 -x) Finish support for SMB3.1.1 compression
 -
 -Known Bugs
 -==========
 +authentication mechanisms (see MS-SMB2)
  
++<<<<<<< HEAD:Documentation/filesystems/cifs/TODO
 +KNOWN BUGS
 +====================================
 +See http://bugzilla.samba.org - search on product "CifsVFS" for
++=======
+ See https://bugzilla.samba.org - search on product "CifsVFS" for
++>>>>>>> cba22b1c5945 (Replace HTTP links with HTTPS ones: CIFS):Documentation/admin-guide/cifs/todo.rst
  current bug list.  Also check http://bugzilla.kernel.org (Product = File System, Component = CIFS)
  
  1) existing symbolic links (Windows reparse points) are recognized but
* Unmerged path Documentation/filesystems/cifs/README
* Unmerged path Documentation/filesystems/cifs/TODO
diff --git a/Documentation/filesystems/cifs/winucase_convert.pl b/Documentation/filesystems/cifs/winucase_convert.pl
index 322a9c833f23..993186beea20 100755
--- a/Documentation/filesystems/cifs/winucase_convert.pl
+++ b/Documentation/filesystems/cifs/winucase_convert.pl
@@ -16,7 +16,7 @@
 #   GNU General Public License for more details.
 #
 #   You should have received a copy of the GNU General Public License
-#   along with this program.  If not, see <http://www.gnu.org/licenses/>.
+#   along with this program.  If not, see <https://www.gnu.org/licenses/>.
 #
 
 while(<>) {
diff --git a/fs/cifs/cifsacl.c b/fs/cifs/cifsacl.c
index 6025d7fc7bbf..fcff14ef1c70 100644
--- a/fs/cifs/cifsacl.c
+++ b/fs/cifs/cifsacl.c
@@ -49,7 +49,7 @@ static const struct cifs_sid sid_unix_groups = { 1, 1, {0, 0, 0, 0, 0, 22},
 		{cpu_to_le32(2), 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0} };
 
 /*
- * See http://technet.microsoft.com/en-us/library/hh509017(v=ws.10).aspx
+ * See https://technet.microsoft.com/en-us/library/hh509017(v=ws.10).aspx
  */
 
 /* S-1-5-88 MS NFS and Apple style UID/GID/mode */
@@ -825,7 +825,7 @@ unsigned int setup_authusers_ACE(struct cifs_ace *pntace)
 
 /*
  * Fill in the special SID based on the mode. See
- * http://technet.microsoft.com/en-us/library/hh509017(v=ws.10).aspx
+ * https://technet.microsoft.com/en-us/library/hh509017(v=ws.10).aspx
  */
 unsigned int setup_special_mode_ACE(struct cifs_ace *pntace, __u64 nmode)
 {
diff --git a/fs/cifs/cifsglob.h b/fs/cifs/cifsglob.h
index fad37d61910a..f4b88cd02662 100644
--- a/fs/cifs/cifsglob.h
+++ b/fs/cifs/cifsglob.h
@@ -928,7 +928,7 @@ compare_mid(__u16 mid, const struct smb_hdr *smb)
  *
  * Citation:
  *
- * http://blogs.msdn.com/b/openspecification/archive/2009/04/10/smb-maximum-transmit-buffer-size-and-performance-tuning.aspx
+ * https://blogs.msdn.com/b/openspecification/archive/2009/04/10/smb-maximum-transmit-buffer-size-and-performance-tuning.aspx
  */
 #define CIFS_DEFAULT_NON_POSIX_RSIZE (60 * 1024)
 #define CIFS_DEFAULT_NON_POSIX_WSIZE (65536)
diff --git a/fs/cifs/winucase.c b/fs/cifs/winucase.c
index 1506d4fddb2c..10ceafeba915 100644
--- a/fs/cifs/winucase.c
+++ b/fs/cifs/winucase.c
@@ -22,7 +22,7 @@
  *
  * 3.1.5.3 Mapping UTF-16 Strings to Upper Case:
  *
- * http://msdn.microsoft.com/en-us/library/hh877830.aspx
+ * https://msdn.microsoft.com/en-us/library/hh877830.aspx
  * http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=10921
  *
  * In particular, the table in "Windows 8 Upper Case Mapping Table.txt" was
