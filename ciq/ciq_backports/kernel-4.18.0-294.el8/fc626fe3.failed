fs/ext4: Change EXT4_MOUNT_DAX to EXT4_MOUNT_DAX_ALWAYS

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Ira Weiny <ira.weiny@intel.com>
commit fc626fe322f13ecdfac58cbfa6cfea797ed22623
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/fc626fe3.failed

In prep for the new tri-state mount option which then introduces
EXT4_MOUNT_DAX_NEVER.

	Reviewed-by: Jan Kara <jack@suse.cz>
	Signed-off-by: Ira Weiny <ira.weiny@intel.com>

Link: https://lore.kernel.org/r/20200528150003.828793-4-ira.weiny@intel.com
	Signed-off-by: Theodore Ts'o <tytso@mit.edu>
(cherry picked from commit fc626fe322f13ecdfac58cbfa6cfea797ed22623)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/ext4/super.c
diff --cc fs/ext4/super.c
index 45de20b6730f,7b99c44d0a91..000000000000
--- a/fs/ext4/super.c
+++ b/fs/ext4/super.c
@@@ -4016,8 -4092,7 +4016,12 @@@ static int ext4_fill_super(struct super
  		goto failed_mount;
  	}
  
++<<<<<<< HEAD
 +	if (sbi->s_mount_opt & EXT4_MOUNT_DAX) {
 +		static bool printed = false;
++=======
+ 	if (sbi->s_mount_opt & EXT4_MOUNT_DAX_ALWAYS) {
++>>>>>>> fc626fe322f1 (fs/ext4: Change EXT4_MOUNT_DAX to EXT4_MOUNT_DAX_ALWAYS)
  		if (ext4_has_feature_inline_data(sb)) {
  			ext4_msg(sb, KERN_ERR, "Cannot use DAX on a filesystem"
  					" that may contain inline data");
diff --git a/fs/ext4/ext4.h b/fs/ext4/ext4.h
index 3fa62516bbdb..d35b3136fb8f 100644
--- a/fs/ext4/ext4.h
+++ b/fs/ext4/ext4.h
@@ -1106,9 +1106,9 @@ struct ext4_inode_info {
 #define EXT4_MOUNT_MINIX_DF		0x00080	/* Mimics the Minix statfs */
 #define EXT4_MOUNT_NOLOAD		0x00100	/* Don't use existing journal*/
 #ifdef CONFIG_FS_DAX
-#define EXT4_MOUNT_DAX			0x00200	/* Direct Access */
+#define EXT4_MOUNT_DAX_ALWAYS		0x00200	/* Direct Access */
 #else
-#define EXT4_MOUNT_DAX			0
+#define EXT4_MOUNT_DAX_ALWAYS		0
 #endif
 #define EXT4_MOUNT_DATA_FLAGS		0x00C00	/* Mode for data writes: */
 #define EXT4_MOUNT_JOURNAL_DATA		0x00400	/* Write data to journal */
diff --git a/fs/ext4/inode.c b/fs/ext4/inode.c
index 8e7de233296c..3a3801cbcfc3 100644
--- a/fs/ext4/inode.c
+++ b/fs/ext4/inode.c
@@ -4726,7 +4726,7 @@ int ext4_get_inode_loc(struct inode *inode, struct ext4_iloc *iloc)
 
 static bool ext4_should_use_dax(struct inode *inode)
 {
-	if (!test_opt(inode->i_sb, DAX))
+	if (!test_opt(inode->i_sb, DAX_ALWAYS))
 		return false;
 	if (!S_ISREG(inode->i_mode))
 		return false;
* Unmerged path fs/ext4/super.c
