net: atlantic: broken link status on old fw

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Igor Russkikh <irusskikh@marvell.com>
commit ac70957ee19f198a3884e6f506d75b3f6d8a7dc9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/ac70957e.failed

Last code/checkpatch cleanup did a copy paste error where code from
firmware 3 API logic was moved to firmware 1 logic.

This resulted in FW1.x users would never see the link state as active.

Fixes: 7b0c342f1f67 ("net: atlantic: code style cleanup")
	Signed-off-by: Igor Russkikh <irusskikh@marvell.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit ac70957ee19f198a3884e6f506d75b3f6d8a7dc9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/aquantia/atlantic/hw_atl/hw_atl_utils.c
diff --cc drivers/net/ethernet/aquantia/atlantic/hw_atl/hw_atl_utils.c
index 3fc41da39a0a,f547baa6c954..000000000000
--- a/drivers/net/ethernet/aquantia/atlantic/hw_atl/hw_atl_utils.c
+++ b/drivers/net/ethernet/aquantia/atlantic/hw_atl/hw_atl_utils.c
@@@ -602,14 -662,17 +602,21 @@@ err_exit
  
  int hw_atl_utils_mpi_get_link_status(struct aq_hw_s *self)
  {
 +	u32 cp0x036C = hw_atl_utils_mpi_get_state(self);
 +	u32 link_speed_mask = cp0x036C >> HW_ATL_MPI_SPEED_SHIFT;
  	struct aq_hw_link_status_s *link_status = &self->aq_link_status;
 -	u32 mpi_state;
 -	u32 speed;
  
++<<<<<<< HEAD
 +	if (!link_speed_mask) {
++=======
+ 	mpi_state = hw_atl_utils_mpi_get_state(self);
+ 	speed = mpi_state >> HW_ATL_MPI_SPEED_SHIFT;
+ 
+ 	if (!speed) {
++>>>>>>> ac70957ee19f (net: atlantic: broken link status on old fw)
  		link_status->mbps = 0U;
  	} else {
 -		switch (speed) {
 +		switch (link_speed_mask) {
  		case HAL_ATLANTIC_RATE_10G:
  			link_status->mbps = 10000U;
  			break;
* Unmerged path drivers/net/ethernet/aquantia/atlantic/hw_atl/hw_atl_utils.c
