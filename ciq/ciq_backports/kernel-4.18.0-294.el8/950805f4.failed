powerpc/book3s64/radix: Make radix_mem_block_size 64bit

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Aneesh Kumar K.V <aneesh.kumar@linux.ibm.com>
commit 950805f4d90eda14325ceab56b0f00d034baa8bc
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/950805f4.failed

Similar to commit 89c140bbaeee ("pseries: Fix 64 bit logical memory block panic")
make sure different variables tracking lmb_size are updated to be 64 bit.

Fixes: af9d00e93a4f ("powerpc/mm/radix: Create separate mappings for hot-plugged memory")
	Signed-off-by: Aneesh Kumar K.V <aneesh.kumar@linux.ibm.com>
	Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
Link: https://lore.kernel.org/r/20201007114836.282468-4-aneesh.kumar@linux.ibm.com
(cherry picked from commit 950805f4d90eda14325ceab56b0f00d034baa8bc)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/powerpc/include/asm/book3s/64/mmu.h
#	arch/powerpc/mm/book3s64/radix_pgtable.c
diff --cc arch/powerpc/include/asm/book3s/64/mmu.h
index ef9857030db5,e0b52940e43c..000000000000
--- a/arch/powerpc/include/asm/book3s/64/mmu.h
+++ b/arch/powerpc/include/asm/book3s/64/mmu.h
@@@ -66,6 -67,11 +66,14 @@@ extern unsigned int mmu_pid_bits
  /* Base PID to allocate from */
  extern unsigned int mmu_base_pid;
  
++<<<<<<< HEAD
++=======
+ /*
+  * memory block size used with radix translation.
+  */
+ extern unsigned long __ro_after_init radix_mem_block_size;
+ 
++>>>>>>> 950805f4d90e (powerpc/book3s64/radix: Make radix_mem_block_size 64bit)
  #define PRTB_SIZE_SHIFT	(mmu_pid_bits + 4)
  #define PRTB_ENTRIES	(1ul << mmu_pid_bits)
  
diff --cc arch/powerpc/mm/book3s64/radix_pgtable.c
index c27ff2daed34,78c5afe98359..000000000000
--- a/arch/powerpc/mm/book3s64/radix_pgtable.c
+++ b/arch/powerpc/mm/book3s64/radix_pgtable.c
@@@ -35,19 -34,7 +35,23 @@@
  
  unsigned int mmu_pid_bits;
  unsigned int mmu_base_pid;
++<<<<<<< HEAD
 +
 +static int native_register_process_table(unsigned long base, unsigned long pg_sz,
 +					 unsigned long table_size)
 +{
 +	unsigned long patb0, patb1;
 +
 +	patb0 = be64_to_cpu(partition_tb[0].patb0);
 +	patb1 = base | table_size | PATB_GR;
 +
 +	mmu_partition_table_set_entry(0, patb0, patb1);
 +
 +	return 0;
 +}
++=======
+ unsigned long radix_mem_block_size __ro_after_init;
++>>>>>>> 950805f4d90e (powerpc/book3s64/radix: Make radix_mem_block_size 64bit)
  
  static __ref void *early_alloc_pgtable(unsigned long size, int nid,
  			unsigned long region_start, unsigned long region_end)
* Unmerged path arch/powerpc/include/asm/book3s/64/mmu.h
* Unmerged path arch/powerpc/mm/book3s64/radix_pgtable.c
