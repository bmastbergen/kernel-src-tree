vfs: Convert ocxlflash to use the new mount API

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author David Howells <dhowells@redhat.com>
commit 219e69639070438c969e7da282f513595b00f9d8
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/219e6963.failed

Convert the ocxlflash filesystem to the new internal mount API as the old
one will be obsoleted and removed.  This allows greater flexibility in
communication of mount parameters between userspace, the VFS and the
filesystem.

See Documentation/filesystems/mount_api.txt for more information.

	Signed-off-by: David Howells <dhowells@redhat.com>
	Acked-by: Matthew R. Ochs <mrochs@linux.vnet.ibm.com>
cc: "Manoj N. Kumar" <manoj@linux.ibm.com>
cc: Uma Krishnan <ukrishn@linux.ibm.com>
cc: "James E.J. Bottomley" <jejb@linux.ibm.com>
cc: "Martin K. Petersen" <martin.petersen@oracle.com>
cc: linux-scsi@vger.kernel.org
	Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
(cherry picked from commit 219e69639070438c969e7da282f513595b00f9d8)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/cxlflash/ocxl_hw.c
diff --cc drivers/scsi/cxlflash/ocxl_hw.c
index c2786077c547,e5af37ee9b6e..000000000000
--- a/drivers/scsi/cxlflash/ocxl_hw.c
+++ b/drivers/scsi/cxlflash/ocxl_hw.c
@@@ -35,21 -36,9 +36,14 @@@
  static int ocxlflash_fs_cnt;
  static struct vfsmount *ocxlflash_vfs_mount;
  
- /*
-  * ocxlflash_fs_mount() - mount the pseudo-filesystem
-  * @fs_type:	File system type.
-  * @flags:	Flags for the filesystem.
-  * @dev_name:	Device name associated with the filesystem.
-  * @data:	Data pointer.
-  *
-  * Return: pointer to the directory entry structure
-  */
- static struct dentry *ocxlflash_fs_mount(struct file_system_type *fs_type,
- 					 int flags, const char *dev_name,
- 					 void *data)
+ static int ocxlflash_fs_init_fs_context(struct fs_context *fc)
  {
++<<<<<<< HEAD
 +	return mount_pseudo(fs_type, "ocxlflash:", NULL, NULL,
 +			    OCXLFLASH_FS_MAGIC);
++=======
+ 	return init_pseudo(fc, OCXLFLASH_FS_MAGIC) ? 0 : -ENOMEM;
++>>>>>>> 219e69639070 (vfs: Convert ocxlflash to use the new mount API)
  }
  
  static struct file_system_type ocxlflash_fs_type = {
* Unmerged path drivers/scsi/cxlflash/ocxl_hw.c
