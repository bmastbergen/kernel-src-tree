powerpc/powernv/idle: Rename pnv_first_spr_loss_level variable

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Pratik Rajesh Sampat <psampat@linux.ibm.com>
commit dcbbfa6b05daca94ebcdbce80a7cf05c717d2942
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/dcbbfa6b.failed

Replace the variable name from using "pnv_first_spr_loss_level" to
"deep_spr_loss_state".

pnv_first_spr_loss_level is supposed to be the earliest state that
has OPAL_PM_LOSE_FULL_CONTEXT set, in other places the kernel uses the
"deep" states as terminology. Hence renaming the variable to be coherent
to its semantics.

	Signed-off-by: Pratik Rajesh Sampat <psampat@linux.ibm.com>
	Acked-by: Gautham R. Shenoy <ego@linux.vnet.ibm.com>
	Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
Link: https://lore.kernel.org/r/20200721153708.89057-3-psampat@linux.ibm.com
(cherry picked from commit dcbbfa6b05daca94ebcdbce80a7cf05c717d2942)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/powerpc/platforms/powernv/idle.c
diff --cc arch/powerpc/platforms/powernv/idle.c
index 889a90e9f172,ed09f1fe16fe..000000000000
--- a/arch/powerpc/platforms/powernv/idle.c
+++ b/arch/powerpc/platforms/powernv/idle.c
@@@ -661,7 -658,22 +661,26 @@@ static unsigned long power9_idle_stop(u
  		  */
  		mmcr0		= mfspr(SPRN_MMCR0);
  	}
++<<<<<<< HEAD
 +	if ((psscr & PSSCR_RL_MASK) >= pnv_first_spr_loss_level) {
++=======
+ 
+ 	if (cpu_has_feature(CPU_FTR_ARCH_31)) {
+ 		/*
+ 		 * POWER10 uses MMCRA (BHRBRD) as BHRB disable bit.
+ 		 * If the user hasn't asked for the BHRB to be
+ 		 * written, the value of MMCRA[BHRBRD] is 1.
+ 		 * On wakeup from stop, MMCRA[BHRBD] will be 0,
+ 		 * since it is previleged resource and will be lost.
+ 		 * Thus, if we do not save and restore the MMCRA[BHRBD],
+ 		 * hardware will be needlessly writing to the BHRB
+ 		 * in problem mode.
+ 		 */
+ 		mmcra		= mfspr(SPRN_MMCRA);
+ 	}
+ 
+ 	if ((psscr & PSSCR_RL_MASK) >= deep_spr_loss_state) {
++>>>>>>> dcbbfa6b05da (powerpc/powernv/idle: Rename pnv_first_spr_loss_level variable)
  		sprs.lpcr	= mfspr(SPRN_LPCR);
  		sprs.hfscr	= mfspr(SPRN_HFSCR);
  		sprs.fscr	= mfspr(SPRN_FSCR);
* Unmerged path arch/powerpc/platforms/powernv/idle.c
