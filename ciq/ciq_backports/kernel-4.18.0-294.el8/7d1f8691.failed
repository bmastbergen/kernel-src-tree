Revert "KVM: Check the allocation of pv cpu mask"

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Vitaly Kuznetsov <vkuznets@redhat.com>
commit 7d1f8691ccffe88cec70a6e4044adf1b9bbd8a7c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/7d1f8691.failed

The commit 0f990222108d ("KVM: Check the allocation of pv cpu mask") we
have in 5.9-rc5 has two issue:
1) Compilation fails for !CONFIG_SMP, see:
   https://bugzilla.kernel.org/show_bug.cgi?id=209285

2) This commit completely disables PV TLB flush, see
   https://lore.kernel.org/kvm/87y2lrnnyf.fsf@vitty.brq.redhat.com/

The allocation problem is likely a theoretical one, if we don't
have memory that early in boot process we're likely doomed anyway.
Let's solve it properly later.

This reverts commit 0f990222108d214a0924d920e6095b58107d7b59.

	Signed-off-by: Vitaly Kuznetsov <vkuznets@redhat.com>
	Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>
(cherry picked from commit 7d1f8691ccffe88cec70a6e4044adf1b9bbd8a7c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/kernel/kvm.c
diff --cc arch/x86/kernel/kvm.c
index 9b0b1b406854,9663ba31347c..000000000000
--- a/arch/x86/kernel/kvm.c
+++ b/arch/x86/kernel/kvm.c
@@@ -655,8 -652,8 +655,13 @@@ static void __init kvm_guest_init(void
  	}
  
  	if (pv_tlb_flush_supported()) {
++<<<<<<< HEAD
 +		pv_mmu_ops.flush_tlb_others = kvm_flush_tlb_others;
 +		pv_mmu_ops.tlb_remove_table = tlb_remove_table;
++=======
+ 		pv_ops.mmu.flush_tlb_others = kvm_flush_tlb_others;
+ 		pv_ops.mmu.tlb_remove_table = tlb_remove_table;
++>>>>>>> 7d1f8691ccff (Revert "KVM: Check the allocation of pv cpu mask")
  		pr_info("KVM setup pv remote TLB flush\n");
  	}
  
* Unmerged path arch/x86/kernel/kvm.c
