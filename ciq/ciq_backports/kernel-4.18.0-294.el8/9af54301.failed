USB: rename USB OTG hub configuration option

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Greg Kroah-Hartman <gregkh@linuxfoundation.org>
commit 9af54301b643eca4544970037409efc986a47a9c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/9af54301.failed

The USB OTG code has the ability to disable external hubs, but the
configuration option for it is oddly named.  Rename it to be more
obvious as to what it does.

	Cc: Thomas Bogendoerfer <tsbogend@alpha.franken.de>
	Cc: Bin Liu <b-liu@ti.com>
	Cc: Paul Cercueil <paul@crapouillou.net>
	Cc: Alan Stern <stern@rowland.harvard.edu>
	Cc: Eugeniu Rosca <erosca@de.adit-jv.com>
	Cc: Kai-Heng Feng <kai.heng.feng@canonical.com>
	Cc: David Heinzelmann <heinzelmann.david@gmail.com>
	Cc: "Lee, Chiasheng" <chiasheng.lee@intel.com>
	Cc: Keiya Nobuta <nobuta.keiya@fujitsu.com>
	Cc: Hardik Gajjar <hgajjar@de.adit-jv.com>
Link: https://lore.kernel.org/r/20200618094300.1887727-3-gregkh@linuxfoundation.org
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 9af54301b643eca4544970037409efc986a47a9c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/mips/configs/gcw0_defconfig
#	drivers/usb/musb/Kconfig
diff --cc arch/mips/configs/gcw0_defconfig
index 99ac1fa3b35f,4994749b9eaa..000000000000
--- a/arch/mips/configs/gcw0_defconfig
+++ b/arch/mips/configs/gcw0_defconfig
@@@ -20,8 -56,97 +20,13 @@@ CONFIG_SERIAL_8250=
  # CONFIG_SERIAL_8250_DEPRECATED_OPTIONS is not set
  CONFIG_SERIAL_8250_CONSOLE=y
  CONFIG_SERIAL_8250_INGENIC=y
 -CONFIG_HW_RANDOM=y
 -CONFIG_I2C_GPIO=y
 -CONFIG_SPI=y
 -CONFIG_SPI_GPIO=y
 -CONFIG_POWER_SUPPLY=y
 -# CONFIG_HWMON is not set
 -CONFIG_WATCHDOG=y
 -CONFIG_JZ4740_WDT=y
 -CONFIG_REGULATOR=y
 -CONFIG_REGULATOR_FIXED_VOLTAGE=y
 -CONFIG_REGULATOR_ACT8865=y
 -CONFIG_DRM=y
 -CONFIG_DRM_FBDEV_OVERALLOC=300
 -CONFIG_DRM_PANEL_NOVATEK_NT39016=y
 -CONFIG_DRM_INGENIC=y
 -CONFIG_DRM_ETNAVIV=y
 -CONFIG_BACKLIGHT_CLASS_DEVICE=y
 -# CONFIG_BACKLIGHT_GENERIC is not set
 -CONFIG_BACKLIGHT_PWM=y
 -# CONFIG_VGA_CONSOLE is not set
 -CONFIG_FRAMEBUFFER_CONSOLE=y
 -CONFIG_LOGO=y
 -# CONFIG_LOGO_LINUX_MONO is not set
 -# CONFIG_LOGO_LINUX_VGA16 is not set
 -CONFIG_SOUND=y
 -CONFIG_SND=y
 -# CONFIG_SND_SUPPORT_OLD_API is not set
 -# CONFIG_SND_PROC_FS is not set
 -# CONFIG_SND_DRIVERS is not set
 -# CONFIG_SND_SPI is not set
 -# CONFIG_SND_MIPS is not set
 -# CONFIG_SND_USB is not set
 -CONFIG_SND_SOC=y
 -CONFIG_SND_JZ4740_SOC_I2S=y
 -CONFIG_SND_SOC_JZ4770_CODEC=y
 -CONFIG_SND_SOC_SIMPLE_AMPLIFIER=y
 -CONFIG_SND_SIMPLE_CARD=y
 -CONFIG_USB_CONN_GPIO=y
  CONFIG_USB=y
++<<<<<<< HEAD
++=======
+ CONFIG_USB_OTG=y
+ CONFIG_USB_OTG_DISABLE_EXTERNAL_HUB=y
++>>>>>>> 9af54301b643 (USB: rename USB OTG hub configuration option)
  CONFIG_USB_OHCI_HCD=y
  CONFIG_USB_OHCI_HCD_PLATFORM=y
 -CONFIG_USB_MUSB_HDRC=y
 -CONFIG_USB_MUSB_GADGET=y
 -CONFIG_USB_MUSB_JZ4740=y
 -CONFIG_USB_INVENTRA_DMA=y
 -CONFIG_JZ4770_PHY=y
 -CONFIG_USB_GADGET=y
 -CONFIG_USB_GADGET_VBUS_DRAW=500
 -CONFIG_USB_ETH=y
 -CONFIG_MMC=y
 -# CONFIG_PWRSEQ_EMMC is not set
 -# CONFIG_PWRSEQ_SIMPLE is not set
 -CONFIG_MMC_JZ4740=y
 -CONFIG_NEW_LEDS=y
 -CONFIG_LEDS_CLASS=y
 -CONFIG_LEDS_GPIO=y
 -CONFIG_LEDS_TRIGGERS=y
 -CONFIG_LEDS_TRIGGER_TIMER=y
 -CONFIG_LEDS_TRIGGER_DEFAULT_ON=y
 -CONFIG_LEDS_TRIGGER_PANIC=y
 -CONFIG_RTC_CLASS=y
 -# CONFIG_RTC_NVMEM is not set
 -CONFIG_RTC_DRV_JZ4740=y
 -CONFIG_DMADEVICES=y
 -CONFIG_DMA_JZ4780=y
 -# CONFIG_VIRTIO_MENU is not set
 -CONFIG_STAGING=y
 -CONFIG_R8188EU=m
 -CONFIG_INGENIC_OST=y
 -# CONFIG_IOMMU_SUPPORT is not set
 -CONFIG_IIO=y
 -CONFIG_IIO_BUFFER=y
 -CONFIG_IIO_BUFFER_CB=y
 -CONFIG_IIO_KFIFO_BUF=y
 -CONFIG_MXC6255=m
 -CONFIG_INGENIC_ADC=y
 -CONFIG_PWM=y
 -CONFIG_PWM_JZ4740=y
 -CONFIG_EXT4_FS=y
 -CONFIG_VFAT_FS=y
 -CONFIG_SQUASHFS=y
 -CONFIG_SQUASHFS_FILE_DIRECT=y
 -CONFIG_SQUASHFS_DECOMP_MULTI=y
 -# CONFIG_NETWORK_FILESYSTEMS is not set
 -CONFIG_NLS_CODEPAGE_437=y
 -CONFIG_NLS_ISO8859_1=y
 -CONFIG_NLS_UTF8=y
 -CONFIG_LSM="lockdown,yama,loadpin,safesetid,integrity"
 -CONFIG_CRYPTO_ECHAINIV=y
 -CONFIG_FONTS=y
 -CONFIG_FONT_6x10=y
 -CONFIG_DEBUG_FS=y
 +CONFIG_NOP_USB_XCEIV=y
 +CONFIG_TMPFS=y
diff --cc drivers/usb/musb/Kconfig
index 52f8e2b57ad5,8de143807c1a..000000000000
--- a/drivers/usb/musb/Kconfig
+++ b/drivers/usb/musb/Kconfig
@@@ -111,13 -110,18 +111,18 @@@ config USB_MUSB_UX50
  
  config USB_MUSB_JZ4740
  	tristate "JZ4740"
 -	depends on OF
 +	depends on NOP_USB_XCEIV
  	depends on MIPS || COMPILE_TEST
  	depends on USB_MUSB_GADGET
++<<<<<<< HEAD
 +	depends on USB=n || USB_OTG_BLACKLIST_HUB
++=======
+ 	depends on USB=n || USB_OTG_DISABLE_EXTERNAL_HUB
+ 	select USB_ROLE_SWITCH
++>>>>>>> 9af54301b643 (USB: rename USB OTG hub configuration option)
  
 -config USB_MUSB_MEDIATEK
 -	tristate "MediaTek platforms"
 -	depends on ARCH_MEDIATEK || COMPILE_TEST
 -	depends on NOP_USB_XCEIV
 -	depends on GENERIC_PHY
 -	select USB_ROLE_SWITCH
 +config USB_MUSB_AM335X_CHILD
 +	tristate
  
  comment "MUSB DMA mode"
  
* Unmerged path arch/mips/configs/gcw0_defconfig
diff --git a/drivers/usb/core/Kconfig b/drivers/usb/core/Kconfig
index ecaacc8ed311..06bae55860e4 100644
--- a/drivers/usb/core/Kconfig
+++ b/drivers/usb/core/Kconfig
@@ -66,7 +66,7 @@ config USB_OTG_WHITELIST
 	  "Targeted Peripherals List".  "Embedded Hosts" are likewise
 	  allowed to support only a limited number of peripherals.
 
-config USB_OTG_BLACKLIST_HUB
+config USB_OTG_DISABLE_EXTERNAL_HUB
 	bool "Disable external hubs"
 	depends on USB_OTG || EXPERT
 	help
diff --git a/drivers/usb/core/hub.c b/drivers/usb/core/hub.c
index b1e14beaac5f..ab26ac0147f7 100644
--- a/drivers/usb/core/hub.c
+++ b/drivers/usb/core/hub.c
@@ -1834,7 +1834,7 @@ static int hub_probe(struct usb_interface *intf, const struct usb_device_id *id)
 		return -E2BIG;
 	}
 
-#ifdef	CONFIG_USB_OTG_BLACKLIST_HUB
+#ifdef	CONFIG_USB_OTG_DISABLE_EXTERNAL_HUB
 	if (hdev->parent) {
 		dev_warn(&intf->dev, "ignoring external hub\n");
 		return -ENODEV;
* Unmerged path drivers/usb/musb/Kconfig
diff --git a/drivers/usb/musb/musb_core.c b/drivers/usb/musb/musb_core.c
index 9f5a4819a744..7244a5b2bc22 100644
--- a/drivers/usb/musb/musb_core.c
+++ b/drivers/usb/musb/musb_core.c
@@ -1498,8 +1498,8 @@ static int musb_core_init(u16 musb_type, struct musb *musb)
 		musb->is_multipoint = 0;
 		type = "";
 		if (IS_ENABLED(CONFIG_USB) &&
-		    !IS_ENABLED(CONFIG_USB_OTG_BLACKLIST_HUB)) {
-			pr_err("%s: kernel must blacklist external hubs\n",
+		    !IS_ENABLED(CONFIG_USB_OTG_DISABLE_EXTERNAL_HUB)) {
+			pr_err("%s: kernel must disable external hubs, please fix the configuration\n",
 			       musb_driver_name);
 		}
 	}
