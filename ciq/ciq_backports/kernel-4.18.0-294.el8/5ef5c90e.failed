selftests: move timestamping selftests to net folder

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Jian Yang <jianyang@google.com>
commit 5ef5c90e3cb3ae1ce7bebddaeb8e8f44309950f7
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/5ef5c90e.failed

For historical reasons, there are several timestamping selftest targets
in selftests/networking/timestamping. Move them to the standard
directory for networking tests: selftests/net.

	Signed-off-by: Jian Yang <jianyang@google.com>
	Acked-by: Willem de Bruijn <willemb@google.com>
	Acked-by: Jakub Kicinski <kuba@kernel.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 5ef5c90e3cb3ae1ce7bebddaeb8e8f44309950f7)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/testing/selftests/net/.gitignore
#	tools/testing/selftests/net/Makefile
#	tools/testing/selftests/net/config
diff --cc tools/testing/selftests/net/.gitignore
index 78b24cf76f40,997c65dcad68..000000000000
--- a/tools/testing/selftests/net/.gitignore
+++ b/tools/testing/selftests/net/.gitignore
@@@ -14,3 -15,16 +14,19 @@@ udpgso_bench_r
  udpgso_bench_tx
  tcp_inq
  tls
++<<<<<<< HEAD
++=======
+ txring_overwrite
+ ip_defrag
+ ipv6_flowlabel
+ ipv6_flowlabel_mgr
+ so_txtime
+ tcp_fastopen_backup_key
+ nettest
+ fin_ack_lat
+ reuseaddr_ports_exhausted
+ hwtstamp_config
+ rxtimestamp
+ timestamping
+ txtimestamp
++>>>>>>> 5ef5c90e3cb3 (selftests: move timestamping selftests to net folder)
diff --cc tools/testing/selftests/net/Makefile
index c47204c6dada,3f386eb9e7d7..000000000000
--- a/tools/testing/selftests/net/Makefile
+++ b/tools/testing/selftests/net/Makefile
@@@ -5,18 -5,27 +5,34 @@@ CFLAGS =  -Wall -Wl,--no-as-needed -O2 
  CFLAGS += -I../../../../usr/include/
  
  TEST_PROGS := run_netsocktests run_afpackettests test_bpf.sh netdevice.sh \
 -	      rtnetlink.sh xfrm_policy.sh test_blackhole_dev.sh
 +	      rtnetlink.sh xfrm_policy.sh
  TEST_PROGS += fib_tests.sh fib-onlink-tests.sh pmtu.sh udpgso.sh ip_defrag.sh
  TEST_PROGS += udpgso_bench.sh fib_rule_tests.sh msg_zerocopy.sh psock_snd.sh
 -TEST_PROGS += udpgro_bench.sh udpgro.sh test_vxlan_under_vrf.sh reuseport_addr_any.sh
  TEST_PROGS += test_vxlan_fdb_changelink.sh so_txtime.sh ipv6_flowlabel.sh
++<<<<<<< HEAD
 +TEST_PROGS += fcnal-test.sh l2tp.sh traceroute.sh
 +TEST_PROGS += vrf-xfrm-tests.sh
++=======
+ TEST_PROGS += tcp_fastopen_backup_key.sh fcnal-test.sh l2tp.sh traceroute.sh
+ TEST_PROGS += fin_ack_lat.sh fib_nexthop_multiprefix.sh fib_nexthops.sh
+ TEST_PROGS += altnames.sh icmp_redirect.sh ip6_gre_headroom.sh
+ TEST_PROGS += route_localnet.sh
+ TEST_PROGS += reuseaddr_ports_exhausted.sh
+ TEST_PROGS += txtimestamp.sh
++>>>>>>> 5ef5c90e3cb3 (selftests: move timestamping selftests to net folder)
  TEST_PROGS_EXTENDED := in_netns.sh
  TEST_GEN_FILES =  socket nettest
 -TEST_GEN_FILES += psock_fanout psock_tpacket msg_zerocopy reuseport_addr_any
 +TEST_GEN_FILES += psock_fanout psock_tpacket msg_zerocopy
  TEST_GEN_FILES += tcp_mmap tcp_inq psock_snd txring_overwrite
  TEST_GEN_FILES += udpgso udpgso_bench_tx udpgso_bench_rx ip_defrag
  TEST_GEN_FILES += so_txtime ipv6_flowlabel ipv6_flowlabel_mgr
++<<<<<<< HEAD
++=======
+ TEST_GEN_FILES += tcp_fastopen_backup_key
+ TEST_GEN_FILES += fin_ack_lat
+ TEST_GEN_FILES += reuseaddr_ports_exhausted
+ TEST_GEN_FILES += hwtstamp_config rxtimestamp timestamping txtimestamp
++>>>>>>> 5ef5c90e3cb3 (selftests: move timestamping selftests to net folder)
  TEST_GEN_PROGS = reuseport_bpf reuseport_bpf_cpu reuseport_bpf_numa
  TEST_GEN_PROGS += reuseport_dualstack reuseaddr_conflict tls
  
diff --cc tools/testing/selftests/net/config
index e896a7cf9384,3b42c06b5985..000000000000
--- a/tools/testing/selftests/net/config
+++ b/tools/testing/selftests/net/config
@@@ -12,6 -12,22 +12,27 @@@ CONFIG_IPV6_VTI=
  CONFIG_DUMMY=y
  CONFIG_BRIDGE=y
  CONFIG_VLAN_8021Q=y
++<<<<<<< HEAD
 +CONFIG_NET_SCH_FQ=m
 +CONFIG_NET_SCH_ETF=m
++=======
+ CONFIG_IFB=y
+ CONFIG_NETFILTER=y
+ CONFIG_NETFILTER_ADVANCED=y
+ CONFIG_NF_CONNTRACK=m
+ CONFIG_NF_NAT=m
+ CONFIG_IP6_NF_IPTABLES=m
+ CONFIG_IP_NF_IPTABLES=m
+ CONFIG_IP6_NF_NAT=m
+ CONFIG_IP_NF_NAT=m
+ CONFIG_NF_TABLES=m
+ CONFIG_NF_TABLES_IPV6=y
+ CONFIG_NF_TABLES_IPV4=y
+ CONFIG_NFT_CHAIN_NAT_IPV6=m
+ CONFIG_NFT_CHAIN_NAT_IPV4=m
+ CONFIG_NET_SCH_FQ=m
+ CONFIG_NET_SCH_ETF=m
+ CONFIG_NET_SCH_NETEM=y
+ CONFIG_TEST_BLACKHOLE_DEV=m
++>>>>>>> 5ef5c90e3cb3 (selftests: move timestamping selftests to net folder)
  CONFIG_KALLSYMS=y
diff --git a/tools/testing/selftests/Makefile b/tools/testing/selftests/Makefile
index 8f309f1fdb8f..4d1c07b481f0 100644
--- a/tools/testing/selftests/Makefile
+++ b/tools/testing/selftests/Makefile
@@ -29,7 +29,6 @@ TARGETS += net
 TARGETS += net/forwarding
 TARGETS += net/mptcp
 TARGETS += netfilter
-TARGETS += networking/timestamping
 TARGETS += nsfs
 TARGETS += powerpc
 TARGETS += proc
* Unmerged path tools/testing/selftests/net/.gitignore
* Unmerged path tools/testing/selftests/net/Makefile
* Unmerged path tools/testing/selftests/net/config
diff --git a/tools/testing/selftests/networking/timestamping/hwtstamp_config.c b/tools/testing/selftests/net/hwtstamp_config.c
similarity index 100%
rename from tools/testing/selftests/networking/timestamping/hwtstamp_config.c
rename to tools/testing/selftests/net/hwtstamp_config.c
diff --git a/tools/testing/selftests/networking/timestamping/rxtimestamp.c b/tools/testing/selftests/net/rxtimestamp.c
similarity index 100%
rename from tools/testing/selftests/networking/timestamping/rxtimestamp.c
rename to tools/testing/selftests/net/rxtimestamp.c
diff --git a/tools/testing/selftests/networking/timestamping/timestamping.c b/tools/testing/selftests/net/timestamping.c
similarity index 100%
rename from tools/testing/selftests/networking/timestamping/timestamping.c
rename to tools/testing/selftests/net/timestamping.c
diff --git a/tools/testing/selftests/networking/timestamping/txtimestamp.c b/tools/testing/selftests/net/txtimestamp.c
similarity index 100%
rename from tools/testing/selftests/networking/timestamping/txtimestamp.c
rename to tools/testing/selftests/net/txtimestamp.c
diff --git a/tools/testing/selftests/networking/timestamping/txtimestamp.sh b/tools/testing/selftests/net/txtimestamp.sh
similarity index 98%
rename from tools/testing/selftests/networking/timestamping/txtimestamp.sh
rename to tools/testing/selftests/net/txtimestamp.sh
index 70a8cda7fd53..eea6f5193693 100755
--- a/tools/testing/selftests/networking/timestamping/txtimestamp.sh
+++ b/tools/testing/selftests/net/txtimestamp.sh
@@ -76,7 +76,7 @@ main() {
 }
 
 if [[ "$(ip netns identify)" == "root" ]]; then
-	../../net/in_netns.sh $0 $@
+	./in_netns.sh $0 $@
 else
 	main $@
 fi
diff --git a/tools/testing/selftests/networking/timestamping/.gitignore b/tools/testing/selftests/networking/timestamping/.gitignore
deleted file mode 100644
index d9355035e746..000000000000
--- a/tools/testing/selftests/networking/timestamping/.gitignore
+++ /dev/null
@@ -1,4 +0,0 @@
-timestamping
-rxtimestamp
-txtimestamp
-hwtstamp_config
diff --git a/tools/testing/selftests/networking/timestamping/Makefile b/tools/testing/selftests/networking/timestamping/Makefile
deleted file mode 100644
index 1de8bd8ccf5d..000000000000
--- a/tools/testing/selftests/networking/timestamping/Makefile
+++ /dev/null
@@ -1,11 +0,0 @@
-# SPDX-License-Identifier: GPL-2.0
-CFLAGS += -I../../../../../usr/include
-
-TEST_GEN_FILES := hwtstamp_config rxtimestamp timestamping txtimestamp
-TEST_PROGS := txtimestamp.sh
-
-all: $(TEST_PROGS)
-
-top_srcdir = ../../../../..
-KSFT_KHDR_INSTALL := 1
-include ../../lib.mk
diff --git a/tools/testing/selftests/networking/timestamping/config b/tools/testing/selftests/networking/timestamping/config
deleted file mode 100644
index a13e3169b0a4..000000000000
--- a/tools/testing/selftests/networking/timestamping/config
+++ /dev/null
@@ -1,2 +0,0 @@
-CONFIG_IFB=y
-CONFIG_NET_SCH_NETEM=y
