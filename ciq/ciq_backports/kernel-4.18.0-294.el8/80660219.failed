ethtool: provide UAPI for PHY Signal Quality Index (SQI)

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Oleksij Rempel <o.rempel@pengutronix.de>
commit 8066021915924f58ed338bf38208215f5a7355f6
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/80660219.failed

Signal Quality Index is a mandatory value required by "OPEN Alliance
SIG" for the 100Base-T1 PHYs [1]. This indicator can be used for cable
integrity diagnostic and investigating other noise sources and
implement by at least two vendors: NXP[2] and TI[3].

[1] http://www.opensig.org/download/document/218/Advanced_PHY_features_for_automotive_Ethernet_V1.0.pdf
[2] https://www.nxp.com/docs/en/data-sheet/TJA1100.pdf
[3] https://www.ti.com/product/DP83TC811R-Q1

	Signed-off-by: Oleksij Rempel <o.rempel@pengutronix.de>
	Reviewed-by: Andrew Lunn <andrew@lunn.ch>
	Reviewed-by: Michal Kubecek <mkubecek@suse.cz>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 8066021915924f58ed338bf38208215f5a7355f6)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	Documentation/networking/ethtool-netlink.rst
#	include/linux/phy.h
#	include/uapi/linux/ethtool_netlink.h
#	net/ethtool/linkstate.c
diff --cc include/linux/phy.h
index 78b47fefadd5,2bcdf19ed3b4..000000000000
--- a/include/linux/phy.h
+++ b/include/linux/phy.h
@@@ -714,15 -723,8 +714,20 @@@ struct phy_driver 
  			    struct ethtool_tunable *tuna,
  			    const void *data);
  	int (*set_loopback)(struct phy_device *dev, bool enable);
++<<<<<<< HEAD
 +
 +        /*
 +         * Probe the hardware to determine what abilities it has.
 +         * Should only set phydev->supported.
 +         */
 +	RH_KABI_BROKEN_INSERT(int (*get_features)(struct phy_device *phydev))
 +
 +	/* Override default interrupt handling */
 +        RH_KABI_BROKEN_INSERT(int (*handle_interrupt)(struct phy_device *phydev))
++=======
+ 	int (*get_sqi)(struct phy_device *dev);
+ 	int (*get_sqi_max)(struct phy_device *dev);
++>>>>>>> 806602191592 (ethtool: provide UAPI for PHY Signal Quality Index (SQI))
  };
  #define to_phy_driver(d) container_of(to_mdio_common_driver(d),		\
  				      struct phy_driver, mdiodrv)
* Unmerged path Documentation/networking/ethtool-netlink.rst
* Unmerged path include/uapi/linux/ethtool_netlink.h
* Unmerged path net/ethtool/linkstate.c
* Unmerged path Documentation/networking/ethtool-netlink.rst
* Unmerged path include/linux/phy.h
* Unmerged path include/uapi/linux/ethtool_netlink.h
* Unmerged path net/ethtool/linkstate.c
