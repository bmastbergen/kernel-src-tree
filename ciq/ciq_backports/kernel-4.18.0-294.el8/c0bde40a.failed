tools headers API: Update close_range affected files

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-294.el8
commit-author Arnaldo Carvalho de Melo <acme@redhat.com>
commit c0bde40ae0104c1fe13055b5e208053ea7729176
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-294.el8/c0bde40a.failed

To pick the changes from:

  55db9c0e8534 ("net: remove compat_sys_{get,set}sockopt")
  9b4feb630e8e ("arch: wire-up close_range()")

That automagically add the 'close_range' syscall to tools such as 'perf
trace'.

Before:

  # perf trace -e close_range
  event syntax error: 'close_range'
                       \___ parser error
  Run 'perf list' for a list of valid events

   Usage: perf trace [<options>] [<command>]
      or: perf trace [<options>] -- <command> [<options>]
      or: perf trace record [<options>] [<command>]
      or: perf trace record [<options>] -- <command> [<options>]

      -e, --event <event>   event/syscall selector. use 'perf list' to list available events
  #

After, system wide strace like tracing for this syscall:

  # perf trace -e close_range
  ^C#

No calls, I need some test proggie :-)

	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: Christian Brauner <christian.brauner@ubuntu.com>
	Cc: Christoph Hellwig <hch@lst.de>
	Cc: David S. Miller <davem@davemloft.net>
	Cc: Jiri Olsa <jolsa@kernel.org>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit c0bde40ae0104c1fe13055b5e208053ea7729176)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/include/uapi/asm-generic/unistd.h
#	tools/perf/arch/x86/entry/syscalls/syscall_64.tbl
diff --cc tools/include/uapi/asm-generic/unistd.h
index 1e12b3d704e7,995b36c2ea7d..000000000000
--- a/tools/include/uapi/asm-generic/unistd.h
+++ b/tools/include/uapi/asm-generic/unistd.h
@@@ -802,9 -844,24 +802,27 @@@ __SYSCALL(__NR_fsconfig, sys_fsconfig
  __SYSCALL(__NR_fsmount, sys_fsmount)
  #define __NR_fspick 433
  __SYSCALL(__NR_fspick, sys_fspick)
++<<<<<<< HEAD
++=======
+ #define __NR_pidfd_open 434
+ __SYSCALL(__NR_pidfd_open, sys_pidfd_open)
+ #ifdef __ARCH_WANT_SYS_CLONE3
+ #define __NR_clone3 435
+ __SYSCALL(__NR_clone3, sys_clone3)
+ #endif
+ #define __NR_close_range 436
+ __SYSCALL(__NR_close_range, sys_close_range)
+ 
+ #define __NR_openat2 437
+ __SYSCALL(__NR_openat2, sys_openat2)
+ #define __NR_pidfd_getfd 438
+ __SYSCALL(__NR_pidfd_getfd, sys_pidfd_getfd)
+ #define __NR_faccessat2 439
+ __SYSCALL(__NR_faccessat2, sys_faccessat2)
++>>>>>>> c0bde40ae010 (tools headers API: Update close_range affected files)
  
  #undef __NR_syscalls
 -#define __NR_syscalls 440
 +#define __NR_syscalls 434
  
  /*
   * 32 bit systems traditionally used different
diff --cc tools/perf/arch/x86/entry/syscalls/syscall_64.tbl
index b4e6f9e6204a,9d82078c949a..000000000000
--- a/tools/perf/arch/x86/entry/syscalls/syscall_64.tbl
+++ b/tools/perf/arch/x86/entry/syscalls/syscall_64.tbl
@@@ -194,167 -194,173 +194,186 @@@
  183	common	afs_syscall
  184	common	tuxcall
  185	common	security
 -186	common	gettid			sys_gettid
 -187	common	readahead		sys_readahead
 -188	common	setxattr		sys_setxattr
 -189	common	lsetxattr		sys_lsetxattr
 -190	common	fsetxattr		sys_fsetxattr
 -191	common	getxattr		sys_getxattr
 -192	common	lgetxattr		sys_lgetxattr
 -193	common	fgetxattr		sys_fgetxattr
 -194	common	listxattr		sys_listxattr
 -195	common	llistxattr		sys_llistxattr
 -196	common	flistxattr		sys_flistxattr
 -197	common	removexattr		sys_removexattr
 -198	common	lremovexattr		sys_lremovexattr
 -199	common	fremovexattr		sys_fremovexattr
 -200	common	tkill			sys_tkill
 -201	common	time			sys_time
 -202	common	futex			sys_futex
 -203	common	sched_setaffinity	sys_sched_setaffinity
 -204	common	sched_getaffinity	sys_sched_getaffinity
 +186	common	gettid			__x64_sys_gettid
 +187	common	readahead		__x64_sys_readahead
 +188	common	setxattr		__x64_sys_setxattr
 +189	common	lsetxattr		__x64_sys_lsetxattr
 +190	common	fsetxattr		__x64_sys_fsetxattr
 +191	common	getxattr		__x64_sys_getxattr
 +192	common	lgetxattr		__x64_sys_lgetxattr
 +193	common	fgetxattr		__x64_sys_fgetxattr
 +194	common	listxattr		__x64_sys_listxattr
 +195	common	llistxattr		__x64_sys_llistxattr
 +196	common	flistxattr		__x64_sys_flistxattr
 +197	common	removexattr		__x64_sys_removexattr
 +198	common	lremovexattr		__x64_sys_lremovexattr
 +199	common	fremovexattr		__x64_sys_fremovexattr
 +200	common	tkill			__x64_sys_tkill
 +201	common	time			__x64_sys_time
 +202	common	futex			__x64_sys_futex
 +203	common	sched_setaffinity	__x64_sys_sched_setaffinity
 +204	common	sched_getaffinity	__x64_sys_sched_getaffinity
  205	64	set_thread_area
 -206	64	io_setup		sys_io_setup
 -207	common	io_destroy		sys_io_destroy
 -208	common	io_getevents		sys_io_getevents
 -209	64	io_submit		sys_io_submit
 -210	common	io_cancel		sys_io_cancel
 +206	64	io_setup		__x64_sys_io_setup
 +207	common	io_destroy		__x64_sys_io_destroy
 +208	common	io_getevents		__x64_sys_io_getevents
 +209	64	io_submit		__x64_sys_io_submit
 +210	common	io_cancel		__x64_sys_io_cancel
  211	64	get_thread_area
 -212	common	lookup_dcookie		sys_lookup_dcookie
 -213	common	epoll_create		sys_epoll_create
 +212	common	lookup_dcookie		__x64_sys_lookup_dcookie
 +213	common	epoll_create		__x64_sys_epoll_create
  214	64	epoll_ctl_old
  215	64	epoll_wait_old
 -216	common	remap_file_pages	sys_remap_file_pages
 -217	common	getdents64		sys_getdents64
 -218	common	set_tid_address		sys_set_tid_address
 -219	common	restart_syscall		sys_restart_syscall
 -220	common	semtimedop		sys_semtimedop
 -221	common	fadvise64		sys_fadvise64
 -222	64	timer_create		sys_timer_create
 -223	common	timer_settime		sys_timer_settime
 -224	common	timer_gettime		sys_timer_gettime
 -225	common	timer_getoverrun	sys_timer_getoverrun
 -226	common	timer_delete		sys_timer_delete
 -227	common	clock_settime		sys_clock_settime
 -228	common	clock_gettime		sys_clock_gettime
 -229	common	clock_getres		sys_clock_getres
 -230	common	clock_nanosleep		sys_clock_nanosleep
 -231	common	exit_group		sys_exit_group
 -232	common	epoll_wait		sys_epoll_wait
 -233	common	epoll_ctl		sys_epoll_ctl
 -234	common	tgkill			sys_tgkill
 -235	common	utimes			sys_utimes
 +216	common	remap_file_pages	__x64_sys_remap_file_pages
 +217	common	getdents64		__x64_sys_getdents64
 +218	common	set_tid_address		__x64_sys_set_tid_address
 +219	common	restart_syscall		__x64_sys_restart_syscall
 +220	common	semtimedop		__x64_sys_semtimedop
 +221	common	fadvise64		__x64_sys_fadvise64
 +222	64	timer_create		__x64_sys_timer_create
 +223	common	timer_settime		__x64_sys_timer_settime
 +224	common	timer_gettime		__x64_sys_timer_gettime
 +225	common	timer_getoverrun	__x64_sys_timer_getoverrun
 +226	common	timer_delete		__x64_sys_timer_delete
 +227	common	clock_settime		__x64_sys_clock_settime
 +228	common	clock_gettime		__x64_sys_clock_gettime
 +229	common	clock_getres		__x64_sys_clock_getres
 +230	common	clock_nanosleep		__x64_sys_clock_nanosleep
 +231	common	exit_group		__x64_sys_exit_group
 +232	common	epoll_wait		__x64_sys_epoll_wait
 +233	common	epoll_ctl		__x64_sys_epoll_ctl
 +234	common	tgkill			__x64_sys_tgkill
 +235	common	utimes			__x64_sys_utimes
  236	64	vserver
 -237	common	mbind			sys_mbind
 -238	common	set_mempolicy		sys_set_mempolicy
 -239	common	get_mempolicy		sys_get_mempolicy
 -240	common	mq_open			sys_mq_open
 -241	common	mq_unlink		sys_mq_unlink
 -242	common	mq_timedsend		sys_mq_timedsend
 -243	common	mq_timedreceive		sys_mq_timedreceive
 -244	64	mq_notify		sys_mq_notify
 -245	common	mq_getsetattr		sys_mq_getsetattr
 -246	64	kexec_load		sys_kexec_load
 -247	64	waitid			sys_waitid
 -248	common	add_key			sys_add_key
 -249	common	request_key		sys_request_key
 -250	common	keyctl			sys_keyctl
 -251	common	ioprio_set		sys_ioprio_set
 -252	common	ioprio_get		sys_ioprio_get
 -253	common	inotify_init		sys_inotify_init
 -254	common	inotify_add_watch	sys_inotify_add_watch
 -255	common	inotify_rm_watch	sys_inotify_rm_watch
 -256	common	migrate_pages		sys_migrate_pages
 -257	common	openat			sys_openat
 -258	common	mkdirat			sys_mkdirat
 -259	common	mknodat			sys_mknodat
 -260	common	fchownat		sys_fchownat
 -261	common	futimesat		sys_futimesat
 -262	common	newfstatat		sys_newfstatat
 -263	common	unlinkat		sys_unlinkat
 -264	common	renameat		sys_renameat
 -265	common	linkat			sys_linkat
 -266	common	symlinkat		sys_symlinkat
 -267	common	readlinkat		sys_readlinkat
 -268	common	fchmodat		sys_fchmodat
 -269	common	faccessat		sys_faccessat
 -270	common	pselect6		sys_pselect6
 -271	common	ppoll			sys_ppoll
 -272	common	unshare			sys_unshare
 -273	64	set_robust_list		sys_set_robust_list
 -274	64	get_robust_list		sys_get_robust_list
 -275	common	splice			sys_splice
 -276	common	tee			sys_tee
 -277	common	sync_file_range		sys_sync_file_range
 -278	64	vmsplice		sys_vmsplice
 -279	64	move_pages		sys_move_pages
 -280	common	utimensat		sys_utimensat
 -281	common	epoll_pwait		sys_epoll_pwait
 -282	common	signalfd		sys_signalfd
 -283	common	timerfd_create		sys_timerfd_create
 -284	common	eventfd			sys_eventfd
 -285	common	fallocate		sys_fallocate
 -286	common	timerfd_settime		sys_timerfd_settime
 -287	common	timerfd_gettime		sys_timerfd_gettime
 -288	common	accept4			sys_accept4
 -289	common	signalfd4		sys_signalfd4
 -290	common	eventfd2		sys_eventfd2
 -291	common	epoll_create1		sys_epoll_create1
 -292	common	dup3			sys_dup3
 -293	common	pipe2			sys_pipe2
 -294	common	inotify_init1		sys_inotify_init1
 -295	64	preadv			sys_preadv
 -296	64	pwritev			sys_pwritev
 -297	64	rt_tgsigqueueinfo	sys_rt_tgsigqueueinfo
 -298	common	perf_event_open		sys_perf_event_open
 -299	64	recvmmsg		sys_recvmmsg
 -300	common	fanotify_init		sys_fanotify_init
 -301	common	fanotify_mark		sys_fanotify_mark
 -302	common	prlimit64		sys_prlimit64
 -303	common	name_to_handle_at	sys_name_to_handle_at
 -304	common	open_by_handle_at	sys_open_by_handle_at
 -305	common	clock_adjtime		sys_clock_adjtime
 -306	common	syncfs			sys_syncfs
 -307	64	sendmmsg		sys_sendmmsg
 -308	common	setns			sys_setns
 -309	common	getcpu			sys_getcpu
 -310	64	process_vm_readv	sys_process_vm_readv
 -311	64	process_vm_writev	sys_process_vm_writev
 -312	common	kcmp			sys_kcmp
 -313	common	finit_module		sys_finit_module
 -314	common	sched_setattr		sys_sched_setattr
 -315	common	sched_getattr		sys_sched_getattr
 -316	common	renameat2		sys_renameat2
 -317	common	seccomp			sys_seccomp
 -318	common	getrandom		sys_getrandom
 -319	common	memfd_create		sys_memfd_create
 -320	common	kexec_file_load		sys_kexec_file_load
 -321	common	bpf			sys_bpf
 -322	64	execveat		sys_execveat
 -323	common	userfaultfd		sys_userfaultfd
 -324	common	membarrier		sys_membarrier
 -325	common	mlock2			sys_mlock2
 -326	common	copy_file_range		sys_copy_file_range
 -327	64	preadv2			sys_preadv2
 -328	64	pwritev2		sys_pwritev2
 -329	common	pkey_mprotect		sys_pkey_mprotect
 -330	common	pkey_alloc		sys_pkey_alloc
 -331	common	pkey_free		sys_pkey_free
 -332	common	statx			sys_statx
 -333	common	io_pgetevents		sys_io_pgetevents
 -334	common	rseq			sys_rseq
 +237	common	mbind			__x64_sys_mbind
 +238	common	set_mempolicy		__x64_sys_set_mempolicy
 +239	common	get_mempolicy		__x64_sys_get_mempolicy
 +240	common	mq_open			__x64_sys_mq_open
 +241	common	mq_unlink		__x64_sys_mq_unlink
 +242	common	mq_timedsend		__x64_sys_mq_timedsend
 +243	common	mq_timedreceive		__x64_sys_mq_timedreceive
 +244	64	mq_notify		__x64_sys_mq_notify
 +245	common	mq_getsetattr		__x64_sys_mq_getsetattr
 +246	64	kexec_load		__x64_sys_kexec_load
 +247	64	waitid			__x64_sys_waitid
 +248	common	add_key			__x64_sys_add_key
 +249	common	request_key		__x64_sys_request_key
 +250	common	keyctl			__x64_sys_keyctl
 +251	common	ioprio_set		__x64_sys_ioprio_set
 +252	common	ioprio_get		__x64_sys_ioprio_get
 +253	common	inotify_init		__x64_sys_inotify_init
 +254	common	inotify_add_watch	__x64_sys_inotify_add_watch
 +255	common	inotify_rm_watch	__x64_sys_inotify_rm_watch
 +256	common	migrate_pages		__x64_sys_migrate_pages
 +257	common	openat			__x64_sys_openat
 +258	common	mkdirat			__x64_sys_mkdirat
 +259	common	mknodat			__x64_sys_mknodat
 +260	common	fchownat		__x64_sys_fchownat
 +261	common	futimesat		__x64_sys_futimesat
 +262	common	newfstatat		__x64_sys_newfstatat
 +263	common	unlinkat		__x64_sys_unlinkat
 +264	common	renameat		__x64_sys_renameat
 +265	common	linkat			__x64_sys_linkat
 +266	common	symlinkat		__x64_sys_symlinkat
 +267	common	readlinkat		__x64_sys_readlinkat
 +268	common	fchmodat		__x64_sys_fchmodat
 +269	common	faccessat		__x64_sys_faccessat
 +270	common	pselect6		__x64_sys_pselect6
 +271	common	ppoll			__x64_sys_ppoll
 +272	common	unshare			__x64_sys_unshare
 +273	64	set_robust_list		__x64_sys_set_robust_list
 +274	64	get_robust_list		__x64_sys_get_robust_list
 +275	common	splice			__x64_sys_splice
 +276	common	tee			__x64_sys_tee
 +277	common	sync_file_range		__x64_sys_sync_file_range
 +278	64	vmsplice		__x64_sys_vmsplice
 +279	64	move_pages		__x64_sys_move_pages
 +280	common	utimensat		__x64_sys_utimensat
 +281	common	epoll_pwait		__x64_sys_epoll_pwait
 +282	common	signalfd		__x64_sys_signalfd
 +283	common	timerfd_create		__x64_sys_timerfd_create
 +284	common	eventfd			__x64_sys_eventfd
 +285	common	fallocate		__x64_sys_fallocate
 +286	common	timerfd_settime		__x64_sys_timerfd_settime
 +287	common	timerfd_gettime		__x64_sys_timerfd_gettime
 +288	common	accept4			__x64_sys_accept4
 +289	common	signalfd4		__x64_sys_signalfd4
 +290	common	eventfd2		__x64_sys_eventfd2
 +291	common	epoll_create1		__x64_sys_epoll_create1
 +292	common	dup3			__x64_sys_dup3
 +293	common	pipe2			__x64_sys_pipe2
 +294	common	inotify_init1		__x64_sys_inotify_init1
 +295	64	preadv			__x64_sys_preadv
 +296	64	pwritev			__x64_sys_pwritev
 +297	64	rt_tgsigqueueinfo	__x64_sys_rt_tgsigqueueinfo
 +298	common	perf_event_open		__x64_sys_perf_event_open
 +299	64	recvmmsg		__x64_sys_recvmmsg
 +300	common	fanotify_init		__x64_sys_fanotify_init
 +301	common	fanotify_mark		__x64_sys_fanotify_mark
 +302	common	prlimit64		__x64_sys_prlimit64
 +303	common	name_to_handle_at	__x64_sys_name_to_handle_at
 +304	common	open_by_handle_at	__x64_sys_open_by_handle_at
 +305	common	clock_adjtime		__x64_sys_clock_adjtime
 +306	common	syncfs			__x64_sys_syncfs
 +307	64	sendmmsg		__x64_sys_sendmmsg
 +308	common	setns			__x64_sys_setns
 +309	common	getcpu			__x64_sys_getcpu
 +310	64	process_vm_readv	__x64_sys_process_vm_readv
 +311	64	process_vm_writev	__x64_sys_process_vm_writev
 +312	common	kcmp			__x64_sys_kcmp
 +313	common	finit_module		__x64_sys_finit_module
 +314	common	sched_setattr		__x64_sys_sched_setattr
 +315	common	sched_getattr		__x64_sys_sched_getattr
 +316	common	renameat2		__x64_sys_renameat2
 +317	common	seccomp			__x64_sys_seccomp
 +318	common	getrandom		__x64_sys_getrandom
 +319	common	memfd_create		__x64_sys_memfd_create
 +320	common	kexec_file_load		__x64_sys_kexec_file_load
 +321	common	bpf			__x64_sys_bpf
 +322	64	execveat		__x64_sys_execveat/ptregs
 +323	common	userfaultfd		__x64_sys_userfaultfd
 +324	common	membarrier		__x64_sys_membarrier
 +325	common	mlock2			__x64_sys_mlock2
 +326	common	copy_file_range		__x64_sys_copy_file_range
 +327	64	preadv2			__x64_sys_preadv2
 +328	64	pwritev2		__x64_sys_pwritev2
 +329	common	pkey_mprotect		__x64_sys_pkey_mprotect
 +330	common	pkey_alloc		__x64_sys_pkey_alloc
 +331	common	pkey_free		__x64_sys_pkey_free
 +332	common	statx			__x64_sys_statx
 +333	common	io_pgetevents		__x64_sys_io_pgetevents
 +334	common	rseq			__x64_sys_rseq
  # don't use numbers 387 through 423, add new calls after the last
  # 'common' entry
++<<<<<<< HEAD
 +424	common	pidfd_send_signal	__x64_sys_pidfd_send_signal
 +425	common	io_uring_setup		__x64_sys_io_uring_setup
 +426	common	io_uring_enter		__x64_sys_io_uring_enter
 +427	common	io_uring_register	__x64_sys_io_uring_register
 +428	common	open_tree		__x64_sys_open_tree
 +429	common	move_mount		__x64_sys_move_mount
 +430	common	fsopen			__x64_sys_fsopen
 +431	common	fsconfig		__x64_sys_fsconfig
 +432	common	fsmount			__x64_sys_fsmount
 +433	common	fspick			__x64_sys_fspick
++=======
+ 424	common	pidfd_send_signal	sys_pidfd_send_signal
+ 425	common	io_uring_setup		sys_io_uring_setup
+ 426	common	io_uring_enter		sys_io_uring_enter
+ 427	common	io_uring_register	sys_io_uring_register
+ 428	common	open_tree		sys_open_tree
+ 429	common	move_mount		sys_move_mount
+ 430	common	fsopen			sys_fsopen
+ 431	common	fsconfig		sys_fsconfig
+ 432	common	fsmount			sys_fsmount
+ 433	common	fspick			sys_fspick
+ 434	common	pidfd_open		sys_pidfd_open
+ 435	common	clone3			sys_clone3
+ 436	common	close_range		sys_close_range
+ 437	common	openat2			sys_openat2
+ 438	common	pidfd_getfd		sys_pidfd_getfd
+ 439	common	faccessat2		sys_faccessat2
++>>>>>>> c0bde40ae010 (tools headers API: Update close_range affected files)
  
  #
  # x32-specific system call numbers start at 512 to avoid cache impact
* Unmerged path tools/include/uapi/asm-generic/unistd.h
* Unmerged path tools/perf/arch/x86/entry/syscalls/syscall_64.tbl
