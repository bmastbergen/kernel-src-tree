pstore: Add pstore type id for PPC64 opal nvram partition

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Hari Bathini <hbathini@linux.vnet.ibm.com>
commit ae011d2e48d2e6c2ae29fd8aab439caf2fbfb5a8
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/ae011d2e.failed

This patch adds a new PPC64 partition type to be used for opal
specific nvram partition. A new partition type is needed as none
of the existing type matches this partition type.

	Signed-off-by: Hari Bathini <hbathini@linux.vnet.ibm.com>
	Reviewed-by: Kees Cook <keescook@chromium.org>
	Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
(cherry picked from commit ae011d2e48d2e6c2ae29fd8aab439caf2fbfb5a8)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/linux/pstore.h
diff --cc include/linux/pstore.h
index abd437d0a8a7,8e7a25b068b0..000000000000
--- a/include/linux/pstore.h
+++ b/include/linux/pstore.h
@@@ -39,6 -39,8 +39,11 @@@ enum pstore_type_id 
  	PSTORE_TYPE_PPC_RTAS	= 4,
  	PSTORE_TYPE_PPC_OF	= 5,
  	PSTORE_TYPE_PPC_COMMON	= 6,
++<<<<<<< HEAD
++=======
+ 	PSTORE_TYPE_PMSG	= 7,
+ 	PSTORE_TYPE_PPC_OPAL	= 8,
++>>>>>>> ae011d2e48d2 (pstore: Add pstore type id for PPC64 opal nvram partition)
  	PSTORE_TYPE_UNKNOWN	= 255
  };
  
diff --git a/fs/pstore/inode.c b/fs/pstore/inode.c
index 71bf5f4ae84c..808c88d636e2 100644
--- a/fs/pstore/inode.c
+++ b/fs/pstore/inode.c
@@ -335,6 +335,9 @@ int pstore_mkfile(enum pstore_type_id type, char *psname, u64 id, int count,
 	case PSTORE_TYPE_PPC_COMMON:
 		sprintf(name, "powerpc-common-%s-%lld", psname, id);
 		break;
+	case PSTORE_TYPE_PPC_OPAL:
+		sprintf(name, "powerpc-opal-%s-%lld", psname, id);
+		break;
 	case PSTORE_TYPE_UNKNOWN:
 		sprintf(name, "unknown-%s-%lld", psname, id);
 		break;
* Unmerged path include/linux/pstore.h
