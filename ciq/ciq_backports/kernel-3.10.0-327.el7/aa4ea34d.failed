intel_pstate: add kernel parameter to force loading

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Ethan Zhao <ethan.zhao@oracle.com>
commit aa4ea34da9e7a2bc0fb98f5add3e4e52872b7d45
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/aa4ea34d.failed

To force loading on Oracle Sun X86 servers, provide one kernel command line
parameter

  intel_pstate = force

For those who are aware of the risk of no power capping capabily working
and try to get better performance with this driver.

	Signed-off-by: Ethan Zhao <ethan.zhao@oracle.com>
	Tested-by: Alexey Kodanev <alexey.kodanev@oracle.com>
	Reviewed-by: Linda Knippers <linda.knippers@hp.com>
	Acked-by: Kristen Carlson Accardi <kristen@linux.intel.com>
	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit aa4ea34da9e7a2bc0fb98f5add3e4e52872b7d45)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	Documentation/kernel-parameters.txt
#	drivers/cpufreq/intel_pstate.c
diff --cc Documentation/kernel-parameters.txt
index ce43fea91f93,d006bb22f3ca..000000000000
--- a/Documentation/kernel-parameters.txt
+++ b/Documentation/kernel-parameters.txt
@@@ -1238,6 -1446,18 +1238,21 @@@ bytes respectively. Such letter suffixe
  		       disable
  		         Do not enable intel_pstate as the default
  		         scaling driver for the supported processors
++<<<<<<< HEAD
++=======
+ 		       force
+ 			 Enable intel_pstate on systems that prohibit it by default
+ 			 in favor of acpi-cpufreq. Forcing the intel_pstate driver
+ 			 instead of acpi-cpufreq may disable platform features, such
+ 			 as thermal controls and power capping, that rely on ACPI
+ 			 P-States information being indicated to OSPM and therefore
+ 			 should be used with caution. This option does not work with
+ 			 processors that aren't supported by the intel_pstate driver
+ 			 or on platforms that use pcc-cpufreq instead of acpi-cpufreq.
+ 		       no_hwp
+ 		         Do not enable hardware P state control (HWP)
+ 			 if available.
++>>>>>>> aa4ea34da9e7 (intel_pstate: add kernel parameter to force loading)
  
  	intremap=	[X86-64, Intel-IOMMU]
  			on	enable Interrupt Remapping (default)
diff --cc drivers/cpufreq/intel_pstate.c
index a3892ae3819f,0e841eecb743..000000000000
--- a/drivers/cpufreq/intel_pstate.c
+++ b/drivers/cpufreq/intel_pstate.c
@@@ -866,6 -947,8 +866,11 @@@ static struct cpufreq_driver intel_psta
  };
  
  static int __initdata no_load;
++<<<<<<< HEAD
++=======
+ static int __initdata no_hwp;
+ static unsigned int force_load;
++>>>>>>> aa4ea34da9e7 (intel_pstate: add kernel parameter to force loading)
  
  static int intel_pstate_msrs_not_valid(void)
  {
@@@ -1078,6 -1175,10 +1084,13 @@@ static int __init intel_pstate_setup(ch
  
  	if (!strcmp(str, "disable"))
  		no_load = 1;
++<<<<<<< HEAD
++=======
+ 	if (!strcmp(str, "no_hwp"))
+ 		no_hwp = 1;
+ 	if (!strcmp(str, "force"))
+ 		force_load = 1;
++>>>>>>> aa4ea34da9e7 (intel_pstate: add kernel parameter to force loading)
  	return 0;
  }
  early_param("intel_pstate", intel_pstate_setup);
* Unmerged path Documentation/kernel-parameters.txt
* Unmerged path drivers/cpufreq/intel_pstate.c
