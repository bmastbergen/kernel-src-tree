ipmi: Update timespec usage to timespec64

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author John Stultz <john.stultz@linaro.org>
commit 48862ea2ce86370b708614506d93f07ed09b066f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/48862ea2.failed

As part of the internal y2038 cleanup, this patch removes
timespec usage in the ipmi driver, replacing it timespec64

	Cc: openipmi-developer@lists.sourceforge.net
	Cc: Arnd Bergmann <arnd@arndb.de>
	Signed-off-by: John Stultz <john.stultz@linaro.org>
	Signed-off-by: Corey Minyard <minyard@mvista.com>
(cherry picked from commit 48862ea2ce86370b708614506d93f07ed09b066f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/char/ipmi/ipmi_si_intf.c
diff --cc drivers/char/ipmi/ipmi_si_intf.c
index cdfc62bd1d70,fd6110f9589d..000000000000
--- a/drivers/char/ipmi/ipmi_si_intf.c
+++ b/drivers/char/ipmi/ipmi_si_intf.c
@@@ -315,6 -321,18 +315,21 @@@ static int try_smi_init(struct smi_inf
  static void cleanup_one_si(struct smi_info *to_clean);
  static void cleanup_ipmi_si(void);
  
++<<<<<<< HEAD
++=======
+ #ifdef DEBUG_TIMING
+ void debug_timestamp(char *msg)
+ {
+ 	struct timespec64 t;
+ 
+ 	getnstimeofday64(&t);
+ 	pr_debug("**%s: %lld.%9.9ld\n", msg, (long long) t.tv_sec, t.tv_nsec);
+ }
+ #else
+ #define debug_timestamp(x)
+ #endif
+ 
++>>>>>>> 48862ea2ce86 (ipmi: Update timespec usage to timespec64)
  static ATOMIC_NOTIFIER_HEAD(xaction_notifier_list);
  static int register_xaction_notifier(struct notifier_block *nb)
  {
@@@ -968,9 -994,9 +983,15 @@@ static inline int ipmi_si_is_busy(struc
  	return ts->tv_nsec != -1;
  }
  
++<<<<<<< HEAD
 +static int ipmi_thread_busy_wait(enum si_sm_result smi_result,
 +				 const struct smi_info *smi_info,
 +				 struct timespec *busy_until)
++=======
+ static inline int ipmi_thread_busy_wait(enum si_sm_result smi_result,
+ 					const struct smi_info *smi_info,
+ 					struct timespec64 *busy_until)
++>>>>>>> 48862ea2ce86 (ipmi: Update timespec usage to timespec64)
  {
  	unsigned int max_busy_us = 0;
  
@@@ -1007,10 -1034,10 +1029,10 @@@ static int ipmi_thread(void *data
  	struct smi_info *smi_info = data;
  	unsigned long flags;
  	enum si_sm_result smi_result;
- 	struct timespec busy_until;
+ 	struct timespec64 busy_until;
  
  	ipmi_si_set_not_busy(&busy_until);
 -	set_user_nice(current, MAX_NICE);
 +	set_user_nice(current, 19);
  	while (!kthread_should_stop()) {
  		int busy_wait;
  
* Unmerged path drivers/char/ipmi/ipmi_si_intf.c
