vxlan: remove net arg from vxlan[6]_xmit_skb()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Nicolas Dichtel <nicolas.dichtel@6wind.com>
commit 117961878cc1386923cfddcdd9016b777827c8dd
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/11796187.failed

This argument is not used, let's remove it.

	Signed-off-by: Nicolas Dichtel <nicolas.dichtel@6wind.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 117961878cc1386923cfddcdd9016b777827c8dd)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/openvswitch/vport-vxlan.c
diff --cc net/openvswitch/vport-vxlan.c
index 64e0d2e57017,a481c03e2861..000000000000
--- a/net/openvswitch/vport-vxlan.c
+++ b/net/openvswitch/vport-vxlan.c
@@@ -172,13 -173,15 +172,20 @@@ static int vxlan_tnl_send(struct vport 
  
  	skb->local_df = 1;
  
 -	inet_get_local_port_range(&port_min, &port_max);
 -	src_port = vxlan_src_port(port_min, port_max, skb);
 +	src_port = udp_flow_src_port(net, skb, 0, 0, true);
  
++<<<<<<< HEAD
 +	err = vxlan_xmit_skb(net, vxlan_port->vs, rt, skb,
 +			     fl.saddr, tun_key->ipv4_dst,
 +			     tun_key->ipv4_tos, tun_key->ipv4_ttl, df,
++=======
+ 	err = vxlan_xmit_skb(vxlan_port->vs, rt, skb,
+ 			     fl.saddr, OVS_CB(skb)->tun_key->ipv4_dst,
+ 			     OVS_CB(skb)->tun_key->ipv4_tos,
+ 			     OVS_CB(skb)->tun_key->ipv4_ttl, df,
++>>>>>>> 117961878cc1 (vxlan: remove net arg from vxlan[6]_xmit_skb())
  			     src_port, dst_port,
 -			     htonl(be64_to_cpu(OVS_CB(skb)->tun_key->tun_id) << 8));
 +			     htonl(be64_to_cpu(tun_key->tun_id) << 8));
  	if (err < 0)
  		ip_rt_put(rt);
  error:
diff --git a/drivers/net/vxlan.c b/drivers/net/vxlan.c
index 64bf7960a2bd..bb4fe6209918 100644
--- a/drivers/net/vxlan.c
+++ b/drivers/net/vxlan.c
@@ -1559,7 +1559,7 @@ static inline struct sk_buff *vxlan_handle_offloads(struct sk_buff *skb,
 }
 
 #if IS_ENABLED(CONFIG_IPV6)
-static int vxlan6_xmit_skb(struct net *net, struct vxlan_sock *vs,
+static int vxlan6_xmit_skb(struct vxlan_sock *vs,
 			   struct dst_entry *dst, struct sk_buff *skb,
 			   struct net_device *dev, struct in6_addr *saddr,
 			   struct in6_addr *daddr, __u8 prio, __u8 ttl,
@@ -1634,7 +1634,7 @@ static int vxlan6_xmit_skb(struct net *net, struct vxlan_sock *vs,
 }
 #endif
 
-int vxlan_xmit_skb(struct net *net, struct vxlan_sock *vs,
+int vxlan_xmit_skb(struct vxlan_sock *vs,
 		   struct rtable *rt, struct sk_buff *skb,
 		   __be32 src, __be32 dst, __u8 tos, __u8 ttl, __be16 df,
 		   __be16 src_port, __be16 dst_port, __be32 vni)
@@ -1808,7 +1808,7 @@ static void vxlan_xmit_one(struct sk_buff *skb, struct net_device *dev,
 		tos = ip_tunnel_ecn_encap(tos, old_iph, skb);
 		ttl = ttl ? : ip4_dst_hoplimit(&rt->dst);
 
-		err = vxlan_xmit_skb(dev_net(dev), vxlan->vn_sock, rt, skb,
+		err = vxlan_xmit_skb(vxlan->vn_sock, rt, skb,
 				     fl4.saddr, dst->sin.sin_addr.s_addr,
 				     tos, ttl, df, src_port, dst_port,
 				     htonl(vni << 8));
@@ -1861,7 +1861,7 @@ static void vxlan_xmit_one(struct sk_buff *skb, struct net_device *dev,
 
 		ttl = ttl ? : ip6_dst_hoplimit(ndst);
 
-		err = vxlan6_xmit_skb(dev_net(dev), vxlan->vn_sock, ndst, skb,
+		err = vxlan6_xmit_skb(vxlan->vn_sock, ndst, skb,
 				      dev, &fl6.saddr, &fl6.daddr, 0, ttl,
 				      src_port, dst_port, htonl(vni << 8));
 #endif
diff --git a/include/net/vxlan.h b/include/net/vxlan.h
index 1ddc74769f81..782e8d53bddb 100644
--- a/include/net/vxlan.h
+++ b/include/net/vxlan.h
@@ -40,7 +40,7 @@ struct vxlan_sock *vxlan_sock_add(struct net *net, __be16 port,
 
 void vxlan_sock_release(struct vxlan_sock *vs);
 
-int vxlan_xmit_skb(struct net *net, struct vxlan_sock *vs,
+int vxlan_xmit_skb(struct vxlan_sock *vs,
 		   struct rtable *rt, struct sk_buff *skb,
 		   __be32 src, __be32 dst, __u8 tos, __u8 ttl, __be16 df,
 		   __be16 src_port, __be16 dst_port, __be32 vni);
* Unmerged path net/openvswitch/vport-vxlan.c
