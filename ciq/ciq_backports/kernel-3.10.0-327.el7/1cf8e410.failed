tun: drop broken IFF_VNET_LE

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Michael S. Tsirkin <mst@redhat.com>
commit 1cf8e410b6d3906aa1ecacdd15dd9b448c9ce111
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/1cf8e410.failed

Use TUNSETVNETLE/TUNGETVNETLE instead.

	Signed-off-by: Michael S. Tsirkin <mst@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 1cf8e410b6d3906aa1ecacdd15dd9b448c9ce111)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/tun.c
diff --cc drivers/net/tun.c
index 598e92640d18,8c8dc16839a7..000000000000
--- a/drivers/net/tun.c
+++ b/drivers/net/tun.c
@@@ -107,12 -110,8 +107,17 @@@ do {								
   * overload it to mean fasync when stored there.
   */
  #define TUN_FASYNC	IFF_ATTACH_QUEUE
++<<<<<<< HEAD
 +#define TUN_NO_PI	IFF_NO_PI
 +/* This flag has no real effect */
 +#define TUN_ONE_QUEUE	IFF_ONE_QUEUE
 +#define TUN_PERSIST 	IFF_PERSIST
 +#define TUN_VNET_HDR 	IFF_VNET_HDR
 +#define TUN_TAP_MQ      IFF_MULTI_QUEUE
++=======
+ /* High bits in flags field are unused. */
+ #define TUN_VNET_LE     0x80000000
++>>>>>>> 1cf8e410b6d3 (tun: drop broken IFF_VNET_LE)
  
  #define TUN_FEATURES (IFF_NO_PI | IFF_ONE_QUEUE | IFF_VNET_HDR | \
  		      IFF_MULTI_QUEUE)
@@@ -205,6 -208,16 +210,19 @@@ struct tun_struct 
  	u32 flow_count;
  };
  
++<<<<<<< HEAD
++=======
+ static inline u16 tun16_to_cpu(struct tun_struct *tun, __virtio16 val)
+ {
+ 	return __virtio16_to_cpu(tun->flags & TUN_VNET_LE, val);
+ }
+ 
+ static inline __virtio16 cpu_to_tun16(struct tun_struct *tun, u16 val)
+ {
+ 	return __cpu_to_virtio16(tun->flags & TUN_VNET_LE, val);
+ }
+ 
++>>>>>>> 1cf8e410b6d3 (tun: drop broken IFF_VNET_LE)
  static inline u32 tun_hashfn(u32 rxhash)
  {
  	return rxhash & 0x3ff;
@@@ -1905,6 -1844,8 +1923,11 @@@ static long __tun_chr_ioctl(struct fil
  	kgid_t group;
  	int sndbuf;
  	int vnet_hdr_sz;
++<<<<<<< HEAD
++=======
+ 	unsigned int ifindex;
+ 	int le;
++>>>>>>> 1cf8e410b6d3 (tun: drop broken IFF_VNET_LE)
  	int ret;
  
  	if (cmd == TUNSETIFF || cmd == TUNSETQUEUE || _IOC_TYPE(cmd) == 0x89) {
* Unmerged path drivers/net/tun.c
