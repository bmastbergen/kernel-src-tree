xfs: kill VN_DIRTY()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Dave Chinner <dchinner@redhat.com>
commit eac152b4742ec5f1ed04d73d699ae2be3607d56b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/eac152b4.failed

Only one user of the macro and the dirty mapping check is redundant
so just get rid of it.

	Signed-off-by: Dave Chinner <dchinner@redhat.com>
	Reviewed-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Dave Chinner <david@fromorbit.com>

(cherry picked from commit eac152b4742ec5f1ed04d73d699ae2be3607d56b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/xfs/xfs_inode.c
diff --cc fs/xfs/xfs_inode.c
index 4a2cda2c661c,fea3c92fb3f0..000000000000
--- a/fs/xfs/xfs_inode.c
+++ b/fs/xfs/xfs_inode.c
@@@ -1606,8 -1635,8 +1606,13 @@@ xfs_release
  		truncated = xfs_iflags_test_and_clear(ip, XFS_ITRUNCATED);
  		if (truncated) {
  			xfs_iflags_clear(ip, XFS_IDIRTY_RELEASE);
++<<<<<<< HEAD
 +			if (VN_DIRTY(VFS_I(ip)) && ip->i_delayed_blks > 0) {
 +				error = -filemap_flush(VFS_I(ip)->i_mapping);
++=======
+ 			if (ip->i_delayed_blks > 0) {
+ 				error = filemap_flush(VFS_I(ip)->i_mapping);
++>>>>>>> eac152b4742e (xfs: kill VN_DIRTY())
  				if (error)
  					return error;
  			}
* Unmerged path fs/xfs/xfs_inode.c
diff --git a/fs/xfs/xfs_vnode.h b/fs/xfs/xfs_vnode.h
index e8a77383c0d5..07b475aa896c 100644
--- a/fs/xfs/xfs_vnode.h
+++ b/fs/xfs/xfs_vnode.h
@@ -39,8 +39,6 @@ struct attrlist_cursor_kern;
  */
 #define VN_MAPPED(vp)	mapping_mapped(vp->i_mapping)
 #define VN_CACHED(vp)	(vp->i_mapping->nrpages)
-#define VN_DIRTY(vp)	mapping_tagged(vp->i_mapping, \
-					PAGECACHE_TAG_DIRTY)
 
 
 #endif	/* __XFS_VNODE_H__ */
