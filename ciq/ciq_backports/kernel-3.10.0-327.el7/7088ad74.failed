inet: remove old fragmentation hash initializing

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Hannes Frederic Sowa <hannes@stressinduktion.org>
commit 7088ad74e6e710d0c80ea2cead9500f47a2a5d58
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/7088ad74.failed

All fragmentation hash secrets now get initialized by their
corresponding hash function with net_get_random_once. Thus we can
eliminate the initial seeding.

Also provide a comment that hash secret seeding happens at the first
call to the corresponding hashing function.

	Cc: David S. Miller <davem@davemloft.net>
	Cc: Eric Dumazet <edumazet@google.com>
	Signed-off-by: Hannes Frederic Sowa <hannes@stressinduktion.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 7088ad74e6e710d0c80ea2cead9500f47a2a5d58)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv4/inet_fragment.c
diff --cc net/ipv4/inet_fragment.c
index af02a39175e3,bb075fc9a14f..000000000000
--- a/net/ipv4/inet_fragment.c
+++ b/net/ipv4/inet_fragment.c
@@@ -93,9 -93,6 +93,12 @@@ void inet_frags_init(struct inet_frags 
  	}
  	rwlock_init(&f->lock);
  
++<<<<<<< HEAD
 +	f->rnd = (u32) ((num_physpages ^ (num_physpages>>7)) ^
 +				   (jiffies ^ (jiffies >> 6)));
 +
++=======
++>>>>>>> 7088ad74e6e7 (inet: remove old fragmentation hash initializing)
  	setup_timer(&f->secret_timer, inet_frag_secret_rebuild,
  			(unsigned long)f);
  	f->secret_timer.expires = jiffies + f->secret_interval;
diff --git a/include/net/inet_frag.h b/include/net/inet_frag.h
index bfcbc0017950..6f59de98dabd 100644
--- a/include/net/inet_frag.h
+++ b/include/net/inet_frag.h
@@ -64,6 +64,10 @@ struct inet_frags {
 	rwlock_t		lock ____cacheline_aligned_in_smp;
 	int			secret_interval;
 	struct timer_list	secret_timer;
+
+	/* The first call to hashfn is responsible to initialize
+	 * rnd. This is best done with net_get_random_once.
+	 */
 	u32			rnd;
 	int			qsize;
 
* Unmerged path net/ipv4/inet_fragment.c
