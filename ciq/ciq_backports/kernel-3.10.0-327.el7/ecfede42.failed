bonding: alb: clean bond->lock

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Nikolay Aleksandrov <nikolay@redhat.com>
commit ecfede424e95b211050f777c3ae96356926ed1c4
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/ecfede42.failed

We can remove the lock/unlock as it's no longer necessary since
RTNL should be held while calling bond_alb_set_mac_address().

	Signed-off-by: Nikolay Aleksandrov <nikolay@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit ecfede424e95b211050f777c3ae96356926ed1c4)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/bonding/bond_alb.c
diff --cc drivers/net/bonding/bond_alb.c
index 06a8df1ef842,028496205f39..000000000000
--- a/drivers/net/bonding/bond_alb.c
+++ b/drivers/net/bonding/bond_alb.c
@@@ -1743,18 -1885,17 +1738,22 @@@ int bond_alb_set_mac_address(struct net
  	swap_slave = bond_slave_has_mac(bond, bond_dev->dev_addr);
  
  	if (swap_slave) {
 -		alb_swap_mac_addr(swap_slave, curr_active);
 -		alb_fasten_mac_swap(bond, swap_slave, curr_active);
 +		alb_swap_mac_addr(swap_slave, bond->curr_active_slave);
 +		alb_fasten_mac_swap(bond, swap_slave, bond->curr_active_slave);
  	} else {
 -		alb_set_slave_mac_addr(curr_active, bond_dev->dev_addr);
 +		alb_set_slave_mac_addr(bond->curr_active_slave, bond_dev->dev_addr);
  
++<<<<<<< HEAD
 +		read_lock(&bond->lock);
 +		alb_send_learning_packets(bond->curr_active_slave, bond_dev->dev_addr);
++=======
+ 		alb_send_learning_packets(curr_active,
+ 					  bond_dev->dev_addr, false);
++>>>>>>> ecfede424e95 (bonding: alb: clean bond->lock)
  		if (bond->alb_info.rlb_enabled) {
  			/* inform clients mac address has changed */
 -			rlb_req_update_slave_clients(bond, curr_active);
 +			rlb_req_update_slave_clients(bond, bond->curr_active_slave);
  		}
- 		read_unlock(&bond->lock);
  	}
  
  	return 0;
* Unmerged path drivers/net/bonding/bond_alb.c
