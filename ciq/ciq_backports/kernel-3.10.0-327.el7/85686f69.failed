scsi: add SPC-3 command definitions

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [scsi] add SPC-3 command definitions (Andy Grover) [1136558 1185396]
Rebuild_FUZZ: 90.62%
commit-author Hannes Reinecke <hare@suse.de>
commit 85686f696d81a4bcfa5e51ee9ee2b6aae5531c6f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/85686f69.failed

SPC-3 defines SERVICE ACTION IN(12), SERVICE_ACTION OUT(12),
SERVICE ACTION OUT(16), and SERVICE ACTION BIDIRECTIONAL.
And READ MEDIA SERIAL NUMBER has long since been deprecated.
So update callers to refer to the new cdb name.

	Signed-off-by: Hannes Reinecke <hare@suse.de>
	Tested-by: Robert Elliott <elliott@hp.com>
	Reviewed-by: Robert Elliott <elliott@hp.com>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
(cherry picked from commit 85686f696d81a4bcfa5e51ee9ee2b6aae5531c6f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/constants.c
#	include/scsi/scsi.h
#	tools/lib/traceevent/plugin_scsi.c
diff --cc drivers/scsi/constants.c
index cd7131c88f5d,aee62f60b43d..000000000000
--- a/drivers/scsi/constants.c
+++ b/drivers/scsi/constants.c
@@@ -21,11 -21,6 +21,14 @@@
  
  
  /* Commands with service actions that change the command name */
++<<<<<<< HEAD
 +#define SERVICE_ACTION_IN_12 0xab
 +#define SERVICE_ACTION_OUT_12 0xa9
 +#define SERVICE_ACTION_BIDIRECTIONAL 0x9d
 +#define SERVICE_ACTION_IN_16 0x9e
 +#define SERVICE_ACTION_OUT_16 0x9f
++=======
++>>>>>>> 85686f696d81 (scsi: add SPC-3 command definitions)
  #define THIRD_PARTY_COPY_OUT 0x83
  #define THIRD_PARTY_COPY_IN 0x84
  
diff --cc include/scsi/scsi.h
index 66d42edfb3fc,8a7f8ad58aac..000000000000
--- a/include/scsi/scsi.h
+++ b/include/scsi/scsi.h
@@@ -151,7 -153,9 +153,13 @@@ enum scsi_timeouts 
  #define VERIFY_16	      0x8f
  #define SYNCHRONIZE_CACHE_16  0x91
  #define WRITE_SAME_16	      0x93
++<<<<<<< HEAD
 +#define SERVICE_ACTION_IN     0x9e
++=======
+ #define SERVICE_ACTION_BIDIRECTIONAL 0x9d
+ #define SERVICE_ACTION_IN_16  0x9e
+ #define SERVICE_ACTION_OUT_16 0x9f
++>>>>>>> 85686f696d81 (scsi: add SPC-3 command definitions)
  /* values for service action in */
  #define	SAI_READ_CAPACITY_16  0x10
  #define SAI_GET_LBA_STATUS    0x12
diff --cc tools/lib/traceevent/plugin_scsi.c
index eda326fc8620,3727de48c8d5..000000000000
--- a/tools/lib/traceevent/plugin_scsi.c
+++ b/tools/lib/traceevent/plugin_scsi.c
@@@ -107,7 -108,9 +108,13 @@@ typedef unsigned int u32
  #define VERIFY_16			0x8f
  #define SYNCHRONIZE_CACHE_16		0x91
  #define WRITE_SAME_16			0x93
++<<<<<<< HEAD
 +#define SERVICE_ACTION_IN		0x9e
++=======
+ #define SERVICE_ACTION_BIDIRECTIONAL	0x9d
+ #define SERVICE_ACTION_IN_16		0x9e
+ #define SERVICE_ACTION_OUT_16		0x9f
++>>>>>>> 85686f696d81 (scsi: add SPC-3 command definitions)
  /* values for service action in */
  #define	SAI_READ_CAPACITY_16		0x10
  #define SAI_GET_LBA_STATUS		0x12
* Unmerged path drivers/scsi/constants.c
diff --git a/drivers/target/target_core_pr.c b/drivers/target/target_core_pr.c
index 04a74938bb43..1afa4481ff8c 100644
--- a/drivers/target/target_core_pr.c
+++ b/drivers/target/target_core_pr.c
@@ -449,7 +449,7 @@ static int core_scsi3_pr_seq_non_holder(
 	case ACCESS_CONTROL_OUT:
 	case INQUIRY:
 	case LOG_SENSE:
-	case READ_MEDIA_SERIAL_NUMBER:
+	case SERVICE_ACTION_IN_12:
 	case REPORT_LUNS:
 	case REQUEST_SENSE:
 	case PERSISTENT_RESERVE_IN:
* Unmerged path include/scsi/scsi.h
* Unmerged path tools/lib/traceevent/plugin_scsi.c
