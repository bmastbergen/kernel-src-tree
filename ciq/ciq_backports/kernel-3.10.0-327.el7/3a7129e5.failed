bonding: add option lp_interval for loading module

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author dingtianhong <dingtianhong@huawei.com>
commit 3a7129e52766f015f0d4035ac9c7c9408829b9a1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/3a7129e5.failed

The bond driver could set the lp_interval when loading module.

	Suggested-by: Scott Feldman <sfeldma@cumulusnetworks.com>
	Signed-off-by: Ding Tianhong <dingtianhong@huawei.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 3a7129e52766f015f0d4035ac9c7c9408829b9a1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/bonding/bond_main.c
diff --cc drivers/net/bonding/bond_main.c
index ab67050d61a5,8c973398fef6..000000000000
--- a/drivers/net/bonding/bond_main.c
+++ b/drivers/net/bonding/bond_main.c
@@@ -109,6 -112,8 +109,11 @@@ static char *fail_over_mac
  static int all_slaves_active;
  static struct bond_params bonding_defaults;
  static int resend_igmp = BOND_DEFAULT_RESEND_IGMP;
++<<<<<<< HEAD
++=======
+ static int packets_per_slave = 1;
+ static int lp_interval = BOND_ALB_DEFAULT_LP_INTERVAL;
++>>>>>>> 3a7129e52766 (bonding: add option lp_interval for loading module)
  
  module_param(max_bonds, int, 0);
  MODULE_PARM_DESC(max_bonds, "Max number of bonded devices");
@@@ -180,6 -186,14 +185,17 @@@ MODULE_PARM_DESC(all_slaves_active, "Ke
  module_param(resend_igmp, int, 0);
  MODULE_PARM_DESC(resend_igmp, "Number of IGMP membership reports to send on "
  			      "link failure");
++<<<<<<< HEAD
++=======
+ module_param(packets_per_slave, int, 0);
+ MODULE_PARM_DESC(packets_per_slave, "Packets to send per slave in balance-rr "
+ 				    "mode; 0 for a random slave, 1 packet per "
+ 				    "slave (default), >1 packets per slave.");
+ module_param(lp_interval, uint, 0);
+ MODULE_PARM_DESC(lp_interval, "The number of seconds between instances where "
+ 			      "the bonding driver sends learning packets to "
+ 			      "each slaves peer switch. The default is 1.");
++>>>>>>> 3a7129e52766 (bonding: add option lp_interval for loading module)
  
  /*----------------------------- Global variables ----------------------------*/
  
@@@ -4647,8 -4301,11 +4669,16 @@@ static int bond_check_params(struct bon
  	params->all_slaves_active = all_slaves_active;
  	params->resend_igmp = resend_igmp;
  	params->min_links = min_links;
++<<<<<<< HEAD
 +	params->lp_interval = BOND_ALB_DEFAULT_LP_INTERVAL;
 +
++=======
+ 	params->lp_interval = lp_interval;
+ 	if (packets_per_slave > 1)
+ 		params->packets_per_slave = reciprocal_value(packets_per_slave);
+ 	else
+ 		params->packets_per_slave = packets_per_slave;
++>>>>>>> 3a7129e52766 (bonding: add option lp_interval for loading module)
  	if (primary) {
  		strncpy(params->primary, primary, IFNAMSIZ);
  		params->primary[IFNAMSIZ - 1] = 0;
* Unmerged path drivers/net/bonding/bond_main.c
