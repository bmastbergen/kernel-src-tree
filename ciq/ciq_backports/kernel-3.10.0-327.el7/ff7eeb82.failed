ceph: show non-default options only

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Ilya Dryomov <idryomov@gmail.com>
commit ff7eeb82cc16f25203b69f817cbbb85845c817fe
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/ff7eeb82.failed

Don't pollute /proc/mounts with default options (presently these are
dcache, nofsc and acl).  Leave the acl/noacl however - it's a bit of
a special case due to CONFIG_CEPH_FS_POSIX_ACL.

	Signed-off-by: Ilya Dryomov <idryomov@gmail.com>
(cherry picked from commit ff7eeb82cc16f25203b69f817cbbb85845c817fe)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/ceph/super.c
diff --cc fs/ceph/super.c
index 9d7ff1352ca0,e463ebd69a9c..000000000000
--- a/fs/ceph/super.c
+++ b/fs/ceph/super.c
@@@ -411,10 -432,17 +411,20 @@@ static int ceph_show_options(struct seq
  		seq_puts(m, ",norbytes");
  	if (fsopt->flags & CEPH_MOUNT_OPT_NOASYNCREADDIR)
  		seq_puts(m, ",noasyncreaddir");
- 	if (fsopt->flags & CEPH_MOUNT_OPT_DCACHE)
- 		seq_puts(m, ",dcache");
- 	else
+ 	if ((fsopt->flags & CEPH_MOUNT_OPT_DCACHE) == 0)
  		seq_puts(m, ",nodcache");
++<<<<<<< HEAD
++=======
+ 	if (fsopt->flags & CEPH_MOUNT_OPT_FSCACHE)
+ 		seq_puts(m, ",fsc");
+ 
+ #ifdef CONFIG_CEPH_FS_POSIX_ACL
+ 	if (fsopt->sb_flags & MS_POSIXACL)
+ 		seq_puts(m, ",acl");
+ 	else
+ 		seq_puts(m, ",noacl");
+ #endif
++>>>>>>> ff7eeb82cc16 (ceph: show non-default options only)
  
  	if (fsopt->wsize)
  		seq_printf(m, ",wsize=%d", fsopt->wsize);
* Unmerged path fs/ceph/super.c
