perf tools: Allow to force redirect pr_debug to stderr.

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [perf] tools: Allow to force redirect pr_debug to stderr (Jiri Olsa) [1209607]
Rebuild_FUZZ: 94.23%
commit-author Andi Kleen <ak@linux.intel.com>
commit f78eaef0e0493f6068777a246b9c4d9d5cf2b7aa
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/f78eaef0.failed

When debugging the tui browser I find it useful to redirect the debug
log into a file. Currently it's always forced to the message line.

Add an option to force it to stderr. Then it can be easily redirected.

Example:

  [root@zoo ~]# perf --debug stderr report -vv 2> /tmp/debug
  [root@zoo ~]# tail /tmp/debug
  dso open failed, mmap: No such file or directory
  dso open failed, mmap: No such file or directory
  dso open failed, mmap: No such file or directory
  dso open failed, mmap: No such file or directory
  dso open failed, mmap: No such file or directory
  Using /root/.debug/.build-id/4e/841948927029fb650132253642d5dbb2c1fb93 for symbols
  Failed to open /tmp/perf-8831.map, continuing without symbols
  Failed to open /tmp/perf-12721.map, continuing without symbols
  Failed to open /tmp/perf-6966.map, continuing without symbols
  Failed to open /tmp/perf-8802.map, continuing without symbols
  [root@zoo ~]#

	Signed-off-by: Andi Kleen <ak@linux.intel.com>
	Cc: Jiri Olsa <jolsa@redhat.com>
	Cc: Namhyung Kim <namhyung@kernel.org>
Link: http://lkml.kernel.org/r/1416605880-25055-2-git-send-email-andi@firstfloor.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit f78eaef0e0493f6068777a246b9c4d9d5cf2b7aa)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/util/debug.c
diff --cc tools/perf/util/debug.c
index 71d419362634,ad60b2f20258..000000000000
--- a/tools/perf/util/debug.c
+++ b/tools/perf/util/debug.c
@@@ -13,8 -13,13 +13,13 @@@
  #include "util.h"
  #include "target.h"
  
 -#define NSECS_PER_SEC  1000000000ULL
 -#define NSECS_PER_USEC 1000ULL
 -
  int verbose;
  bool dump_trace = false, quiet = false;
++<<<<<<< HEAD
++=======
+ int debug_ordered_events;
+ static int redirect_to_stderr;
++>>>>>>> f78eaef0e049 (perf tools: Allow to force redirect pr_debug to stderr.)
  
  static int _eprintf(int level, int var, const char *fmt, va_list args)
  {
@@@ -110,7 -144,9 +115,13 @@@ static struct debug_variable 
  	const char *name;
  	int *ptr;
  } debug_variables[] = {
++<<<<<<< HEAD
 +	{ .name = "verbose", .ptr = &verbose },
++=======
+ 	{ .name = "verbose",		.ptr = &verbose },
+ 	{ .name = "ordered-events",	.ptr = &debug_ordered_events},
+ 	{ .name = "stderr",		.ptr = &redirect_to_stderr},
++>>>>>>> f78eaef0e049 (perf tools: Allow to force redirect pr_debug to stderr.)
  	{ .name = NULL, }
  };
  
* Unmerged path tools/perf/util/debug.c
