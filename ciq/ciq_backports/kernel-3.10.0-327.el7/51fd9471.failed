tlan: use msecs_to_jiffies for conversion

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [alsa] line6: use msecs_to_jiffies for conversion (Jaroslav Kysela) [1197064]
Rebuild_FUZZ: 93.98%
commit-author Nicholas Mc Guire <hofrat@osadl.org>
commit 51fd9471492adecaebae199a6b18ff929062620a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/51fd9471.failed

This is only an API consolidation and should make things more readable
it replaces var * HZ / 1000 by msecs_to_jiffies(var).

	Signed-off-by: Nicholas Mc Guire <hofrat@osadl.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 51fd9471492adecaebae199a6b18ff929062620a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/ti/tlan.c
diff --cc drivers/net/ethernet/ti/tlan.c
index 60c400f6d01f,1f722c99afb9..000000000000
--- a/drivers/net/ethernet/ti/tlan.c
+++ b/drivers/net/ethernet/ti/tlan.c
@@@ -2693,10 -2725,7 +2693,14 @@@ static void tlan_phy_finish_auto_neg(st
  	    (priv->adapter->flags & TLAN_ADAPTER_USE_INTERN_10) &&
  	    (priv->phy_num != 0)) {
  		priv->phy_num = 0;
++<<<<<<< HEAD
 +		data = TLAN_NET_CFG_1FRAG | TLAN_NET_CFG_1CHAN
 +			| TLAN_NET_CFG_PHY_EN;
 +		tlan_dio_write16(dev->base_addr, TLAN_NET_CONFIG, data);
 +		tlan_set_timer(dev, (400*HZ/1000), TLAN_TIMER_PHY_PDOWN);
++=======
+ 		tlan_set_timer(dev, msecs_to_jiffies(400), TLAN_TIMER_PHY_PDOWN);
++>>>>>>> 51fd9471492a (tlan: use msecs_to_jiffies for conversion)
  		return;
  	}
  
@@@ -2752,13 -2780,26 +2756,31 @@@ void tlan_phy_monitor(struct net_devic
  
  	/* Check if link has been lost */
  	if (!(phy_status & MII_GS_LINK)) {
 -		if (netif_carrier_ok(dev)) {
 +		if (priv->link) {
 +			priv->link = 0;
  			printk(KERN_DEBUG "TLAN: %s has lost link\n",
  			       dev->name);
 -			tlan_dio_write8(dev->base_addr, TLAN_LED_REG, 0);
  			netif_carrier_off(dev);
++<<<<<<< HEAD
 +			tlan_set_timer(dev, (2*HZ), TLAN_TIMER_LINK_BEAT);
 +			return;
++=======
+ 			if (priv->adapter->flags & TLAN_ADAPTER_USE_INTERN_10) {
+ 				/* power down internal PHY */
+ 				u16 data = MII_GC_PDOWN | MII_GC_LOOPBK |
+ 					   MII_GC_ISOLATE;
+ 
+ 				tlan_mii_sync(dev->base_addr);
+ 				tlan_mii_write_reg(dev, priv->phy[0],
+ 						   MII_GEN_CTL, data);
+ 				/* set to external PHY */
+ 				priv->phy_num = 1;
+ 				/* restart autonegotiation */
+ 				tlan_set_timer(dev, msecs_to_jiffies(400),
+ 					       TLAN_TIMER_PHY_PDOWN);
+ 				return;
+ 			}
++>>>>>>> 51fd9471492a (tlan: use msecs_to_jiffies for conversion)
  		}
  	}
  
* Unmerged path drivers/net/ethernet/ti/tlan.c
