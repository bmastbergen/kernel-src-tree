percpu: allocation size should be even

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Al Viro <viro@ZenIV.linux.org.uk>
commit 2f69fa829cb4ca062aaffee9ab9eb44484db75b1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/2f69fa82.failed

723ad1d90b56 ("percpu: store offsets instead of lengths in ->map[]")
updated percpu area allocator to use the lowest bit, instead of sign,
to signify whether the area is occupied and forced min align to 2;
unfortunately, it forgot to force the allocation size to be even
causing malfunctions for the very rare odd-sized allocations.

Always force the allocations to be even sized.

tj: Wrote patch description.

Original-patch-by: Al Viro <viro@zeniv.linux.org.uk>
	Signed-off-by: Tejun Heo <tj@kernel.org>
(cherry picked from commit 2f69fa829cb4ca062aaffee9ab9eb44484db75b1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	mm/percpu.c
diff --cc mm/percpu.c
index 89e586173340,202e104df8a7..000000000000
--- a/mm/percpu.c
+++ b/mm/percpu.c
@@@ -744,6 -711,10 +744,13 @@@ static void __percpu *pcpu_alloc(size_
  	unsigned long flags;
  	void __percpu *ptr;
  
++<<<<<<< HEAD
++=======
+ 	/*
+ 	 * We want the lowest bit of offset available for in-use/free
+ 	 * indicator, so force >= 16bit alignment and make size even.
+ 	 */
++>>>>>>> 2f69fa829cb4 (percpu: allocation size should be even)
  	if (unlikely(align < 2))
  		align = 2;
  
* Unmerged path mm/percpu.c
