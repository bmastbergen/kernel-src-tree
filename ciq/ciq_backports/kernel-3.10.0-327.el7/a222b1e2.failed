scsi: fixup logging messages in scsi_error.c

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [scsi] fixup logging messages in scsi_error.c (Ewan Milne) [1124082]
Rebuild_FUZZ: 92.68%
commit-author Hannes Reinecke <hare@suse.de>
commit a222b1e2fe4299a01c86ea8ccafbf0a05aeaa5a1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/a222b1e2.failed

Use the matching scope for logging messages to allow for
better command tracing.

	Signed-off-by: Hannes Reinecke <hare@suse.de>
	Suggested-by: Robert Elliott <elliott@hp.com>
	Reviewed-by: Robert Elliott <elliott@hp.com>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
(cherry picked from commit a222b1e2fe4299a01c86ea8ccafbf0a05aeaa5a1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/scsi_error.c
diff --cc drivers/scsi/scsi_error.c
index 4ad9c19ca10c,c2bef46e90e0..000000000000
--- a/drivers/scsi/scsi_error.c
+++ b/drivers/scsi/scsi_error.c
@@@ -1265,9 -1265,9 +1265,15 @@@ static int scsi_eh_test_devices(struct 
  				/* Push items back onto work_q */
  				list_splice_init(cmd_list, work_q);
  				SCSI_LOG_ERROR_RECOVERY(3,
++<<<<<<< HEAD
 +					shost_printk(KERN_INFO, sdev->host,
 +						    "skip %s, past eh deadline\n",
 +						     __func__));
++=======
+ 					sdev_printk(KERN_INFO, sdev,
+ 						    "%s: skip test device, past eh deadline",
+ 						    current->comm));
++>>>>>>> a222b1e2fe42 (scsi: fixup logging messages in scsi_error.c)
  				break;
  			}
  		}
diff --git a/drivers/scsi/hosts.c b/drivers/scsi/hosts.c
index 0632eee82620..ced70c909c68 100644
--- a/drivers/scsi/hosts.c
+++ b/drivers/scsi/hosts.c
@@ -460,8 +460,8 @@ struct Scsi_Host *scsi_host_alloc(struct scsi_host_template *sht, int privsize)
 					    WQ_UNBOUND | WQ_MEM_RECLAIM,
 					   1, shost->host_no);
 	if (!shost->tmf_work_q) {
-		printk(KERN_WARNING "scsi%d: failed to create tmf workq\n",
-		       shost->host_no);
+		shost_printk(KERN_WARNING, shost,
+			     "failed to create tmf workq\n");
 		goto fail_kthread;
 	}
 	scsi_proc_hostdir_add(shost->hostt);
* Unmerged path drivers/scsi/scsi_error.c
