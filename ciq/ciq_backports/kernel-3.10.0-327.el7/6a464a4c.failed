ALSA: hda/tegra - Improve error reporting

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [alsa] hda/tegra - Improve error reporting (Jaroslav Kysela) [1197064]
Rebuild_FUZZ: 92.11%
commit-author Thierry Reding <treding@nvidia.com>
commit 6a464a4ccb674a61eeec296bcc9b999b9252247f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/6a464a4c.failed

When probing, provide accurate error messages to help with debugging
failures.

	Signed-off-by: Thierry Reding <treding@nvidia.com>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit 6a464a4ccb674a61eeec296bcc9b999b9252247f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/pci/hda/hda_tegra.c
diff --cc sound/pci/hda/hda_tegra.c
index e1e5f7675886,477742cb70a2..000000000000
--- a/sound/pci/hda/hda_tegra.c
+++ b/sound/pci/hda/hda_tegra.c
@@@ -326,12 -336,14 +332,14 @@@ static int hda_tegra_init_chip(struct a
  	if (IS_ERR(hda->regs))
  		return PTR_ERR(hda->regs);
  
 -	bus->remap_addr = hda->regs + HDA_BAR0;
 -	bus->addr = res->start + HDA_BAR0;
 +	chip->remap_addr = hda->regs + HDA_BAR0;
 +	chip->addr = res->start + HDA_BAR0;
  
  	err = hda_tegra_enable_clocks(hda);
- 	if (err)
+ 	if (err) {
+ 		dev_err(dev, "failed to get enable clocks\n");
  		return err;
+ 	}
  
  	hda_tegra_init(hda);
  
@@@ -388,18 -390,21 +396,31 @@@ static int hda_tegra_first_init(struct 
  	chip->capture_index_offset = 0;
  	chip->playback_index_offset = chip->capture_streams;
  	chip->num_streams = chip->playback_streams + chip->capture_streams;
++<<<<<<< HEAD
 +	chip->azx_dev = devm_kcalloc(card->dev, chip->num_streams,
 +				     sizeof(*chip->azx_dev), GFP_KERNEL);
 +	if (!chip->azx_dev)
 +		return -ENOMEM;
++=======
+ 
+ 	/* initialize streams */
+ 	err = azx_init_streams(chip);
+ 	if (err < 0) {
+ 		dev_err(card->dev, "failed to initialize streams: %d\n", err);
+ 		return err;
+ 	}
++>>>>>>> 6a464a4ccb67 (ALSA: hda/tegra - Improve error reporting)
  
  	err = azx_alloc_stream_pages(chip);
- 	if (err < 0)
+ 	if (err < 0) {
+ 		dev_err(card->dev, "failed to allocate stream pages: %d\n",
+ 			err);
  		return err;
+ 	}
  
 +	/* initialize streams */
 +	azx_init_stream(chip);
 +
  	/* initialize chip */
  	azx_init_chip(chip, 1);
  
* Unmerged path sound/pci/hda/hda_tegra.c
