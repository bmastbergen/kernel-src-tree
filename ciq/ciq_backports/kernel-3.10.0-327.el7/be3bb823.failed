ALSA: control: Add sanity checks for user ctl id name string

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [alsa] control: Add sanity checks for user ctl id name string (Jaroslav Kysela) [1197064]
Rebuild_FUZZ: 94.74%
commit-author Takashi Iwai <tiwai@suse.de>
commit be3bb8236db2d0fcd705062ae2e2a9d75131222f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/be3bb823.failed

There was no check about the id string of user control elements, so we
accepted even a control element with an empty string, which is
obviously bogus.  This patch adds more sanity checks of id strings.

	Cc: <stable@vger.kernel.org>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit be3bb8236db2d0fcd705062ae2e2a9d75131222f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/core/control.c
diff --cc sound/core/control.c
index 8a5327e7a5e7,eeb691d1911f..000000000000
--- a/sound/core/control.c
+++ b/sound/core/control.c
@@@ -1205,11 -1166,22 +1205,28 @@@ static int snd_ctl_elem_add(struct snd_
  	unsigned int access;
  	long private_size;
  	struct user_element *ue;
++<<<<<<< HEAD
 +	int err;
++=======
+ 	int idx, err;
+ 
+ 	if (info->count < 1)
+ 		return -EINVAL;
+ 	if (!*info->id.name)
+ 		return -EINVAL;
+ 	if (strnlen(info->id.name, sizeof(info->id.name)) >= sizeof(info->id.name))
+ 		return -EINVAL;
+ 	access = info->access == 0 ? SNDRV_CTL_ELEM_ACCESS_READWRITE :
+ 		(info->access & (SNDRV_CTL_ELEM_ACCESS_READWRITE|
+ 				 SNDRV_CTL_ELEM_ACCESS_INACTIVE|
+ 				 SNDRV_CTL_ELEM_ACCESS_TLV_READWRITE));
+ 	info->id.numid = 0;
+ 	memset(&kctl, 0, sizeof(kctl));
++>>>>>>> be3bb8236db2 (ALSA: control: Add sanity checks for user ctl id name string)
  
 +	/* Delete a control to replace them if needed. */
  	if (replace) {
 +		info->id.numid = 0;
  		err = snd_ctl_remove_user_ctl(file, &info->id);
  		if (err)
  			return err;
* Unmerged path sound/core/control.c
