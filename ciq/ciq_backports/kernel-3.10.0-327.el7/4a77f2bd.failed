powerpc/msi: Use WARN_ON() in msi bitmap selftests

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [powerpc] msi: Use WARN_ON() in msi bitmap selftests (Steve Best) [1241612]
Rebuild_FUZZ: 91.30%
commit-author Michael Ellerman <mpe@ellerman.id.au>
commit 4a77f2bdbdef289a02bd02fac483a9350e039705
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/4a77f2bd.failed

As demonstrated in the previous commit, the failure message from the msi
bitmap selftests is a bit subtle, it's easy to miss a failure in a busy
boot log.

So drop our check() macro and use WARN_ON() instead. This necessitates
inverting all the conditions as well.

	Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
(cherry picked from commit 4a77f2bdbdef289a02bd02fac483a9350e039705)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/powerpc/sysdev/msi_bitmap.c
diff --cc arch/powerpc/sysdev/msi_bitmap.c
index 399d77d03b02,73b64c73505b..000000000000
--- a/arch/powerpc/sysdev/msi_bitmap.c
+++ b/arch/powerpc/sysdev/msi_bitmap.c
@@@ -145,10 -145,7 +145,14 @@@ void msi_bitmap_free(struct msi_bitmap 
  
  #ifdef CONFIG_MSI_BITMAP_SELFTEST
  
++<<<<<<< HEAD
 +#define check(x)	\
 +	if (!(x)) printk("msi_bitmap: test failed at line %d\n", __LINE__);
 +
 +void __init test_basics(void)
++=======
+ static void __init test_basics(void)
++>>>>>>> 4a77f2bdbdef (powerpc/msi: Use WARN_ON() in msi bitmap selftests)
  {
  	struct msi_bitmap bmp;
  	int rc, i, size = 512;
* Unmerged path arch/powerpc/sysdev/msi_bitmap.c
