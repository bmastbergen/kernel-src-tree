ALSA: hda - Reenable tracepoints for controller

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [alsa] hda - Reenable tracepoints for controller (Jaroslav Kysela) [1197064]
Rebuild_FUZZ: 93.18%
commit-author Takashi Iwai <tiwai@suse.de>
commit 43db4a59ce0ad83bca5c938c1d94e21b278de24c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/43db4a59.failed

After correcting the fields to point the right members, tracepoints
can be reenabled again for the legacy controller code.

	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit 43db4a59ce0ad83bca5c938c1d94e21b278de24c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/pci/hda/hda_controller.c
diff --cc sound/pci/hda/hda_controller.c
index 0d7233e1e418,0e43f79e1d9b..000000000000
--- a/sound/pci/hda/hda_controller.c
+++ b/sound/pci/hda/hda_controller.c
@@@ -563,6 -233,12 +563,15 @@@ static int azx_pcm_trigger(struct snd_p
  
  	azx_dev = get_azx_dev(substream);
  	trace_azx_pcm_trigger(chip, azx_dev, cmd);
++<<<<<<< HEAD
++=======
+ 
+ 	hstr = azx_stream(azx_dev);
+ 	if (chip->driver_caps & AZX_DCAPS_OLD_SSYNC)
+ 		sync_reg = AZX_REG_OLD_SSYNC;
+ 	else
+ 		sync_reg = AZX_REG_SSYNC;
++>>>>>>> 43db4a59ce0a (ALSA: hda - Reenable tracepoints for controller)
  
  	if (dsp_is_locked(azx_dev) || !azx_dev->prepared)
  		return -EPIPE;
* Unmerged path sound/pci/hda/hda_controller.c
diff --git a/sound/pci/hda/hda_intel_trace.h b/sound/pci/hda/hda_intel_trace.h
index 7b5e4c2cf9d5..ae004737d0fd 100644
--- a/sound/pci/hda/hda_intel_trace.h
+++ b/sound/pci/hda/hda_intel_trace.h
@@ -24,7 +24,7 @@ TRACE_EVENT(azx_pcm_trigger,
 
 	TP_fast_assign(
 		__entry->card = (chip)->card->number;
-		__entry->idx = (dev)->index;
+		__entry->idx = (dev)->core.index;
 		__entry->cmd = cmd;
 	),
 
@@ -46,7 +46,7 @@ TRACE_EVENT(azx_get_position,
 
 	TP_fast_assign(
 		__entry->card = (chip)->card->number;
-		__entry->idx = (dev)->index;
+		__entry->idx = (dev)->core.index;
 		__entry->pos = pos;
 		__entry->delay = delay;
 	),
