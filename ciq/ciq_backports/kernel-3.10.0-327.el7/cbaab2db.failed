simpler calling conventions for filename_mountpoint()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [fs] namei: simpler calling conventions for filename_mountpoint() (Paul Moore) [1155208]
Rebuild_FUZZ: 93.81%
commit-author Al Viro <viro@zeniv.linux.org.uk>
commit cbaab2db9103cc6727c7166d2fda9f64038c828c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/cbaab2db.failed

a) make it accept ERR_PTR() as filename (and return its PTR_ERR() in that case)
b) make it putname() the sucker in the end otherwise

simplifies life for callers...

	Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
(cherry picked from commit cbaab2db9103cc6727c7166d2fda9f64038c828c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/namei.c
diff --cc fs/namei.c
index 72c9894b9e82,5ec3515162e6..000000000000
--- a/fs/namei.c
+++ b/fs/namei.c
@@@ -2368,8 -2412,7 +2366,12 @@@ in
  kern_path_mountpoint(int dfd, const char *name, struct path *path,
  			unsigned int flags)
  {
++<<<<<<< HEAD
 +	struct filename s = {.name = name};
 +	return filename_mountpoint(dfd, &s, path, flags);
++=======
+ 	return filename_mountpoint(dfd, getname_kernel(name), path, flags);
++>>>>>>> cbaab2db9103 (simpler calling conventions for filename_mountpoint())
  }
  EXPORT_SYMBOL(kern_path_mountpoint);
  
* Unmerged path fs/namei.c
