EDAC: Use static attribute groups for managing sysfs entries

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [edac] Use static attribute groups for managing sysfs entries (Seth Jennings) [1240814]
Rebuild_FUZZ: 94.74%
commit-author Takashi Iwai <tiwai@suse.de>
commit 2c1946b6d6290c74c6ad8d0915590d64f33a034d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/2c1946b6.failed

Instead of manual calls of device_create_file() and
device_remove_file(), use static attribute groups with proper
is_visible callbacks for managing the sysfs entries.

This simplifies the code a lot and avoids the possible races.

	Signed-off-by: Takashi Iwai <tiwai@suse.de>
Link: http://lkml.kernel.org/r/1423046938-18111-2-git-send-email-tiwai@suse.de
	Signed-off-by: Borislav Petkov <bp@suse.de>
(cherry picked from commit 2c1946b6d6290c74c6ad8d0915590d64f33a034d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/edac/edac_mc_sysfs.c
diff --cc drivers/edac/edac_mc_sysfs.c
index 6fed32091cac,0bcd64234a03..000000000000
--- a/drivers/edac/edac_mc_sysfs.c
+++ b/drivers/edac/edac_mc_sysfs.c
@@@ -370,9 -403,7 +403,13 @@@ static inline int nr_pages_per_csrow(st
  static int edac_create_csrow_object(struct mem_ctl_info *mci,
  				    struct csrow_info *csrow, int index)
  {
++<<<<<<< HEAD
 +	int err, chan;
 +
 +	if (csrow->nr_channels >= EDAC_NR_CHANNELS)
++=======
+ 	if (csrow->nr_channels > EDAC_NR_CHANNELS)
++>>>>>>> 2c1946b6d629 (EDAC: Use static attribute groups for managing sysfs entries)
  		return -ENODEV;
  
  	csrow->dev.type = &csrow_attr_type;
* Unmerged path drivers/edac/edac_mc_sysfs.c
