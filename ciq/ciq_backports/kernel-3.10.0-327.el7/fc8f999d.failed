ipv4 tunnels: use net_eq() helper to check netns

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [net] ip_tunnel: use net_eq() helper to check netns (Marcelo Leitner) [1206570]
Rebuild_FUZZ: 94.62%
commit-author Nicolas Dichtel <nicolas.dichtel@6wind.com>
commit fc8f999daa10a5c5c19562b88be96a9b2bacd9b7
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/fc8f999d.failed

It's better to use available helpers for these tests.

	Signed-off-by: Nicolas Dichtel <nicolas.dichtel@6wind.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit fc8f999daa10a5c5c19562b88be96a9b2bacd9b7)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv4/ip_tunnel.c
#	net/ipv6/sit.c
diff --cc net/ipv4/ip_tunnel.c
index 97e997263ac1,a351a003ee6b..000000000000
--- a/net/ipv4/ip_tunnel.c
+++ b/net/ipv4/ip_tunnel.c
@@@ -466,6 -460,10 +466,13 @@@ int ip_tunnel_rcv(struct ip_tunnel *tun
  	} else {
  		skb->dev = tunnel->dev;
  	}
++<<<<<<< HEAD
++=======
+ 
+ 	if (!net_eq(tunnel->net, dev_net(tunnel->dev)))
+ 		skb_scrub_packet(skb);
+ 
++>>>>>>> fc8f999daa10 (ipv4 tunnels: use net_eq() helper to check netns)
  	gro_cells_receive(&tunnel->gro_cells, skb);
  	return 0;
  
@@@ -616,8 -614,8 +623,13 @@@ void ip_tunnel_xmit(struct sk_buff *skb
  		goto tx_error;
  	}
  
++<<<<<<< HEAD
 +	if (tunnel->net != dev_net(dev))
 +		skb_scrub_packet(skb, true);
++=======
+ 	if (!net_eq(tunnel->net, dev_net(dev)))
+ 		skb_scrub_packet(skb);
++>>>>>>> fc8f999daa10 (ipv4 tunnels: use net_eq() helper to check netns)
  
  	if (tunnel->err_count > 0) {
  		if (time_before(jiffies,
diff --cc net/ipv6/sit.c
index 04b859234833,f18f842ac893..000000000000
--- a/net/ipv6/sit.c
+++ b/net/ipv6/sit.c
@@@ -621,8 -621,8 +621,13 @@@ static int ipip6_rcv(struct sk_buff *sk
  		tstats->rx_packets++;
  		tstats->rx_bytes += skb->len;
  
++<<<<<<< HEAD
 +		if (tunnel->net != dev_net(tunnel->dev))
 +			skb_scrub_packet(skb, true);
++=======
+ 		if (!net_eq(tunnel->net, dev_net(tunnel->dev)))
+ 			skb_scrub_packet(skb);
++>>>>>>> fc8f999daa10 (ipv4 tunnels: use net_eq() helper to check netns)
  		netif_rx(skb);
  
  		return 0;
@@@ -858,8 -860,8 +863,13 @@@ static netdev_tx_t ipip6_tunnel_xmit(st
  			tunnel->err_count = 0;
  	}
  
++<<<<<<< HEAD
 +	if (tunnel->net != dev_net(dev))
 +		skb_scrub_packet(skb, true);
++=======
+ 	if (!net_eq(tunnel->net, dev_net(dev)))
+ 		skb_scrub_packet(skb);
++>>>>>>> fc8f999daa10 (ipv4 tunnels: use net_eq() helper to check netns)
  
  	/*
  	 * Okay, now see if we can stuff it in the buffer as-is.
* Unmerged path net/ipv4/ip_tunnel.c
* Unmerged path net/ipv6/sit.c
