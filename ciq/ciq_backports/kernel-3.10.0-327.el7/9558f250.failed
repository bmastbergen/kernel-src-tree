nfsd: add fh_fsid_match helper

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Christoph Hellwig <hch@lst.de>
commit 9558f2500a2028ffc05cfd8fceaa0fe0a0a3804e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/9558f250.failed

Add a helper to check that the fsid parts of two file handles match.

	Signed-off-by: Christoph Hellwig <hch@lst.de>
(cherry picked from commit 9558f2500a2028ffc05cfd8fceaa0fe0a0a3804e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/nfsd/nfsfh.h
diff --cc fs/nfsd/nfsfh.h
index 08236d70c667,84cae2079d21..000000000000
--- a/fs/nfsd/nfsfh.h
+++ b/fs/nfsd/nfsfh.h
@@@ -187,6 -187,24 +187,27 @@@ fh_init(struct svc_fh *fhp, int maxsize
  	return fhp;
  }
  
++<<<<<<< HEAD
++=======
+ static inline bool fh_match(struct knfsd_fh *fh1, struct knfsd_fh *fh2)
+ {
+ 	if (fh1->fh_size != fh2->fh_size)
+ 		return false;
+ 	if (memcmp(fh1->fh_base.fh_pad, fh2->fh_base.fh_pad, fh1->fh_size) != 0)
+ 		return false;
+ 	return true;
+ }
+ 
+ static inline bool fh_fsid_match(struct knfsd_fh *fh1, struct knfsd_fh *fh2)
+ {
+ 	if (fh1->fh_fsid_type != fh2->fh_fsid_type)
+ 		return false;
+ 	if (memcmp(fh1->fh_fsid, fh2->fh_fsid, key_len(fh1->fh_fsid_type) != 0))
+ 		return false;
+ 	return true;
+ }
+ 
++>>>>>>> 9558f2500a20 (nfsd: add fh_fsid_match helper)
  #ifdef CONFIG_NFSD_V3
  /*
   * The wcc data stored in current_fh should be cleared
* Unmerged path fs/nfsd/nfsfh.h
