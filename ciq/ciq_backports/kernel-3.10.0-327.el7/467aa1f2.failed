x86/kvm/tracing: Use helper function trace_seq_buffer_ptr()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Steven Rostedt (Red Hat) <rostedt@goodmis.org>
commit 467aa1f276a0cf7445a1f4b9600f03d949b76251
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/467aa1f2.failed

To allow for the restructiong of the trace_seq code, we need users
of it to use the helper functions instead of accessing the internals
of the trace_seq structure itself.

Link: http://lkml.kernel.org/r/20141104160221.585025609@goodmis.org

	Tested-by: Jiri Kosina <jkosina@suse.cz>
	Acked-by: Jiri Kosina <jkosina@suse.cz>
	Acked-by: Paolo Bonzini <pbonzini@redhat.com>
	Acked-by: Mark Rustad <mark.d.rustad@intel.com>
	Reviewed-by: Petr Mladek <pmladek@suse.cz>
	Cc: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
	Signed-off-by: Steven Rostedt <rostedt@goodmis.org>
(cherry picked from commit 467aa1f276a0cf7445a1f4b9600f03d949b76251)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/kvm/mmutrace.h
diff --cc arch/x86/kvm/mmutrace.h
index 9d2e0ffcb190,ce463a9cc8fb..000000000000
--- a/arch/x86/kvm/mmutrace.h
+++ b/arch/x86/kvm/mmutrace.h
@@@ -22,7 -22,7 +22,11 @@@
  	__entry->unsync = sp->unsync;
  
  #define KVM_MMU_PAGE_PRINTK() ({				        \
++<<<<<<< HEAD
 +	const char *ret = p->buffer + p->len;				\
++=======
+ 	const char *saved_ptr = trace_seq_buffer_ptr(p);		\
++>>>>>>> 467aa1f276a0 (x86/kvm/tracing: Use helper function trace_seq_buffer_ptr())
  	static const char *access_str[] = {			        \
  		"---", "--x", "w--", "w-x", "-u-", "-ux", "wu-", "wux"  \
  	};							        \
@@@ -41,7 -41,7 +45,11 @@@
  			 role.nxe ? "" : "!",				\
  			 __entry->root_count,				\
  			 __entry->unsync ? "unsync" : "sync", 0);	\
++<<<<<<< HEAD
 +	ret;								\
++=======
+ 	saved_ptr;							\
++>>>>>>> 467aa1f276a0 (x86/kvm/tracing: Use helper function trace_seq_buffer_ptr())
  		})
  
  #define kvm_mmu_trace_pferr_flags       \
* Unmerged path arch/x86/kvm/mmutrace.h
