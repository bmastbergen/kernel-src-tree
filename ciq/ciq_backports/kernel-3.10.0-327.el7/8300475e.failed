xfs: fix simple_return.cocci warning in xfs_file_readdir

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author kbuild test robot <fengguang.wu@intel.com>
commit 8300475ebf03a54ec3c56b6b808ccbd9e1bc320d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/8300475e.failed

fs/xfs/xfs_file.c:919:1-6: WARNING: end returns can be simpified and declaration on line 902 can be dropped

 Simplify a trivial if-return sequence.  Possibly combine with a
 preceding function call.
Generated by: scripts/coccinelle/misc/simple_return.cocci

	Signed-off-by: Fengguang Wu <fengguang.wu@intel.com>
	Reviewed-by: Dave Chinner <dchinner@redhat.com>
	Signed-off-by: Dave Chinner <david@fromorbit.com>

(cherry picked from commit 8300475ebf03a54ec3c56b6b808ccbd9e1bc320d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/xfs/xfs_file.c
diff --cc fs/xfs/xfs_file.c
index 91b548987ce6,5f467cf21c26..000000000000
--- a/fs/xfs/xfs_file.c
+++ b/fs/xfs/xfs_file.c
@@@ -965,13 -928,11 +965,12 @@@ xfs_file_release
  
  STATIC int
  xfs_file_readdir(
 -	struct file	*file,
 -	struct dir_context *ctx)
 +	struct file	*filp,
 +	void		*dirent,
 +	filldir_t	filldir)
  {
 -	struct inode	*inode = file_inode(file);
 +	struct inode	*inode = file_inode(filp);
  	xfs_inode_t	*ip = XFS_I(inode);
- 	int		error;
  	size_t		bufsize;
  
  	/*
@@@ -988,11 -949,7 +987,15 @@@
  	 */
  	bufsize = (size_t)min_t(loff_t, 32768, ip->i_d.di_size);
  
++<<<<<<< HEAD
 +	error = xfs_readdir(ip, dirent, bufsize,
 +				(xfs_off_t *)&filp->f_pos, filldir);
 +	if (error)
 +		return -error;
 +	return 0;
++=======
+ 	return xfs_readdir(ip, ctx, bufsize);
++>>>>>>> 8300475ebf03 (xfs: fix simple_return.cocci warning in xfs_file_readdir)
  }
  
  STATIC int
* Unmerged path fs/xfs/xfs_file.c
