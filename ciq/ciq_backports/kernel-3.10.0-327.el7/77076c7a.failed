ACPI / i915: Update the condition to ignore firmware backlight change request

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [acpi] i915: Update the condition to ignore firmware backlight change request (Benjamin Tissoires) [1218354]
Rebuild_FUZZ: 95.24%
commit-author Aaron Lu <aaron.lu@intel.com>
commit 77076c7aac0184cae2d8a358cf6e6ed1f195fe3f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/77076c7a.failed

Some of the Thinkpads' firmware will issue a backlight change request
through i915 operation region unconditionally on AC plug/unplug, the
backlight level used is arbitrary and thus should be ignored. This is
handled by commit 0b9f7d93ca61 (ACPI / i915: ignore firmware requests
for backlight change). Then there is a Dell laptop whose vendor backlight
interface also makes use of operation region to change backlight level
and with the above commit, that interface no long works. The condition
used to ignore the backlight change request from firmware is thus
changed to: if the vendor backlight interface is not in use and the ACPI
backlight interface is broken, we ignore the requests; oterwise, we keep
processing them.

Fixes: 0b9f7d93ca61 (ACPI / i915: ignore firmware requests for backlight change)
Link: https://lkml.org/lkml/2014/9/23/854
Reported-and-tested-by: Pali Roh√°r <pali.rohar@gmail.com>
	Cc: 3.16+ <stable@vger.kernel.org> # 3.16+
	Signed-off-by: Aaron Lu <aaron.lu@intel.com>
	Acked-by: Daniel Vetter <daniel@ffwll.ch>
	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit 77076c7aac0184cae2d8a358cf6e6ed1f195fe3f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/intel_opregion.c
diff --cc drivers/gpu/drm/i915/intel_opregion.c
index f5801a36d392,d8de1d5140a7..000000000000
--- a/drivers/gpu/drm/i915/intel_opregion.c
+++ b/drivers/gpu/drm/i915/intel_opregion.c
@@@ -410,6 -414,11 +420,14 @@@ static u32 asle_set_backlight(struct dr
  
  	DRM_DEBUG_DRIVER("bclp = 0x%08x\n", bclp);
  
++<<<<<<< HEAD
++=======
+ 	if (should_ignore_backlight_request()) {
+ 		DRM_DEBUG_KMS("opregion backlight request ignored\n");
+ 		return 0;
+ 	}
+ 
++>>>>>>> 77076c7aac01 (ACPI / i915: Update the condition to ignore firmware backlight change request)
  	if (!(bclp & ASLE_BCLP_VALID))
  		return ASLC_BACKLIGHT_FAILED;
  
* Unmerged path drivers/gpu/drm/i915/intel_opregion.c
