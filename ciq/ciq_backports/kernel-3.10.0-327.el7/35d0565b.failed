ACPI / video: update condition to check if device is in _DOD list

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [acpi] video: update condition to check if device is in _DOD list (Benjamin Tissoires) [1218354]
Rebuild_FUZZ: 94.31%
commit-author Aaron Lu <aaron.lu@intel.com>
commit 35d0565b95547ec12d025dc9b1394f22968d113d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/35d0565b.failed

Commit 0b8db271f159 ("ACPI / video: check _DOD list when creating
backlight devices") checks if the video device is in the bind devices
list to decide if we should create backlight device for it, that causes
problem for one Dell Latitude E6410, where none of the video output
devices are properly bound due to the way how we did the comparing
between its _ADR and the _DOD's values. Solve this problem by comparing
the lower 12 bits of both the device's _ADR and the _DOD's values instead
of relying on bind result.

Fixes: 0b8db271f159 ("ACPI / video: check _DOD list when creating backlight devices")
Reported-and-tested-by: Brian Norris <computersforpeace@gmail.com>
	Signed-off-by: Aaron Lu <aaron.lu@intel.com>
	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit 35d0565b95547ec12d025dc9b1394f22968d113d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/acpi/video.c
diff --cc drivers/acpi/video.c
index 3fbd8b48e19e,9d75ead2a1f9..000000000000
--- a/drivers/acpi/video.c
+++ b/drivers/acpi/video.c
@@@ -1265,6 -1154,24 +1265,27 @@@ acpi_video_device_bind(struct acpi_vide
  	}
  }
  
++<<<<<<< HEAD
++=======
+ static bool acpi_video_device_in_dod(struct acpi_video_device *device)
+ {
+ 	struct acpi_video_bus *video = device->video;
+ 	int i;
+ 
+ 	/* If we have a broken _DOD, no need to test */
+ 	if (!video->attached_count)
+ 		return true;
+ 
+ 	for (i = 0; i < video->attached_count; i++) {
+ 		if ((video->attached_array[i].value.int_val & 0xfff) ==
+ 		    (device->device_id & 0xfff))
+ 			return true;
+ 	}
+ 
+ 	return false;
+ }
+ 
++>>>>>>> 35d0565b9554 (ACPI / video: update condition to check if device is in _DOD list)
  /*
   *  Arg:
   *	video	: video bus device
* Unmerged path drivers/acpi/video.c
