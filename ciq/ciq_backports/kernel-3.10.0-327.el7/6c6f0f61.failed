tools build: Add feature check for lzma library

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Jiri Olsa <jolsa@kernel.org>
commit 6c6f0f6164fbf7a1667378496ee36ae48c18a9d6
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/6c6f0f61.failed

Will be used to decompress 'xz' objects. The check detects
the liblzma.so devel library normally delivered by xz package.

	Signed-off-by: Jiri Olsa <jolsa@kernel.org>
	Acked-by: Namhyung Kim <namhyung@kernel.org>
	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: Arnaldo Carvalho de Melo <acme@redhat.com>
	Cc: Corey Ashford <cjashfor@linux.vnet.ibm.com>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Frederic Weisbecker <fweisbec@gmail.com>
	Cc: Ingo Molnar <mingo@kernel.org>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Paul Mackerras <paulus@samba.org>
	Cc: Peter Zijlstra <a.p.zijlstra@chello.nl>
	Cc: Stephane Eranian <eranian@google.com>
(cherry picked from commit 6c6f0f6164fbf7a1667378496ee36ae48c18a9d6)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/build/Makefile.feature
#	tools/perf/config/feature-checks/Makefile
#	tools/perf/config/feature-checks/test-all.c
#	tools/perf/config/feature-checks/test-lzma.c
diff --cc tools/perf/config/feature-checks/Makefile
index 8fe067864957,463ed8f2a267..000000000000
--- a/tools/perf/config/feature-checks/Makefile
+++ b/tools/perf/config/feature-checks/Makefile
@@@ -44,7 -46,7 +45,11 @@@ BUILD = $(CC) $(CFLAGS) -Wall -Werror -
  ###############################
  
  test-all.bin:
++<<<<<<< HEAD:tools/perf/config/feature-checks/Makefile
 +	$(BUILD) -fstack-protector-all -O2 -D_FORTIFY_SOURCE=2 -ldw -lelf -lnuma -lelf -laudit -I/usr/include/slang -lslang $(shell $(PKG_CONFIG) --libs --cflags gtk+-2.0 2>/dev/null) $(FLAGS_PERL_EMBED) $(FLAGS_PYTHON_EMBED) -DPACKAGE='"perf"' -lbfd -ldl -lz -lbabeltrace
++=======
+ 	$(BUILD) -fstack-protector-all -O2 -D_FORTIFY_SOURCE=2 -ldw -lelf -lnuma -lelf -laudit -I/usr/include/slang -lslang $(shell $(PKG_CONFIG) --libs --cflags gtk+-2.0 2>/dev/null) $(FLAGS_PERL_EMBED) $(FLAGS_PYTHON_EMBED) -DPACKAGE='"perf"' -lbfd -ldl -lz -llzma
++>>>>>>> 6c6f0f6164fb (tools build: Add feature check for lzma library):tools/build/feature/Makefile
  
  test-hello.bin:
  	$(BUILD)
diff --cc tools/perf/config/feature-checks/test-all.c
index e9ab677070a3,84689a67814a..000000000000
--- a/tools/perf/config/feature-checks/test-all.c
+++ b/tools/perf/config/feature-checks/test-all.c
@@@ -108,7 -104,19 +108,11 @@@
  #define main main_test_libbabeltrace
  # include "test-libbabeltrace.c"
  #undef main
 -#endif
  
+ #define main main_test_lzma
+ # include "test-lzma.c"
+ #undef main
+ 
  int main(int argc, char *argv[])
  {
  	main_test_libpython();
@@@ -134,7 -142,7 +138,11 @@@
  	main_test_sync_compare_and_swap(argc, argv);
  	main_test_zlib();
  	main_test_pthread_attr_setaffinity_np();
++<<<<<<< HEAD:tools/perf/config/feature-checks/test-all.c
 +	main_test_libbabeltrace();
++=======
+ 	main_test_lzma();
++>>>>>>> 6c6f0f6164fb (tools build: Add feature check for lzma library):tools/build/feature/test-all.c
  
  	return 0;
  }
* Unmerged path tools/build/Makefile.feature
* Unmerged path tools/perf/config/feature-checks/test-lzma.c
* Unmerged path tools/build/Makefile.feature
* Unmerged path tools/perf/config/feature-checks/Makefile
* Unmerged path tools/perf/config/feature-checks/test-all.c
* Unmerged path tools/perf/config/feature-checks/test-lzma.c
