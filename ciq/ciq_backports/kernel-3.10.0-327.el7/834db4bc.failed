bonding: ust micro BOND_NO_USE_ARP to simplify the mode check

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author dingtianhong <dingtianhong@huawei.com>
commit 834db4bcdf937b9f06122a633672ee5acd77085b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/834db4bc.failed

The bond 3ad and TLB/ALB has the same check path, so combine them.

	Signed-off-by: Ding Tianhong <dingtianhong@huawei.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 834db4bcdf937b9f06122a633672ee5acd77085b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/bonding/bond_main.c
diff --cc drivers/net/bonding/bond_main.c
index ab67050d61a5,06f3a9f344b3..000000000000
--- a/drivers/net/bonding/bond_main.c
+++ b/drivers/net/bonding/bond_main.c
@@@ -4459,14 -4101,10 +4459,21 @@@ static int bond_check_params(struct bon
  		resend_igmp = BOND_DEFAULT_RESEND_IGMP;
  	}
  
++<<<<<<< HEAD
 +	/* reset values for TLB/ALB */
 +	if ((bond_mode == BOND_MODE_TLB) ||
 +	    (bond_mode == BOND_MODE_ALB)) {
 +		if (!miimon) {
 +			pr_warning("Warning: miimon must be specified, otherwise bonding will not detect link failure and link speed which are essential for TLB/ALB load balancing\n");
 +			pr_warning("Forcing miimon to 100msec\n");
 +			miimon = 100;
 +		}
++=======
+ 	if (packets_per_slave < 0 || packets_per_slave > USHRT_MAX) {
+ 		pr_warn("Warning: packets_per_slave (%d) should be between 0 and %u resetting to 1\n",
+ 			packets_per_slave, USHRT_MAX);
+ 		packets_per_slave = 1;
++>>>>>>> 834db4bcdf93 (bonding: ust micro BOND_NO_USE_ARP to simplify the mode check)
  	}
  
  	if (bond_mode == BOND_MODE_ALB) {
* Unmerged path drivers/net/bonding/bond_main.c
