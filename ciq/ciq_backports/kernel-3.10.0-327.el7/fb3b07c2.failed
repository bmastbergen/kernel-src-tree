ALSA: hda - Merge codec and controller helpers

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [alsa] hda - Merge codec and controller helpers (Jaroslav Kysela) [1197064]
Rebuild_FUZZ: 93.02%
commit-author Takashi Iwai <tiwai@suse.de>
commit fb3b07c289fc972e1e2a7d7b7a809239b71f1f3c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/fb3b07c2.failed

There is no much merit to keep the HD-audio codec and controller
helper codes in separate modules any longer.  Let's merge them into a
single helper module.

This patch just changes Makefile entries to merge two individual
modules to one.  The only code change is the removal of superfluous
MODULE_*() macros in one side.

	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit fb3b07c289fc972e1e2a7d7b7a809239b71f1f3c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/pci/hda/hda_controller.c
diff --cc sound/pci/hda/hda_controller.c
index 0d7233e1e418,6b39f2e8c820..000000000000
--- a/sound/pci/hda/hda_controller.c
+++ b/sound/pci/hda/hda_controller.c
@@@ -1983,31 -1966,3 +1983,34 @@@ int azx_init_stream(struct azx *chip
  	return 0;
  }
  EXPORT_SYMBOL_GPL(azx_init_stream);
++<<<<<<< HEAD
 +
 +/*
 + * reboot notifier for hang-up problem at power-down
 + */
 +static int azx_halt(struct notifier_block *nb, unsigned long event, void *buf)
 +{
 +	struct azx *chip = container_of(nb, struct azx, reboot_notifier);
 +	snd_hda_bus_reboot_notify(chip->bus);
 +	azx_stop_chip(chip);
 +	return NOTIFY_OK;
 +}
 +
 +void azx_notifier_register(struct azx *chip)
 +{
 +	chip->reboot_notifier.notifier_call = azx_halt;
 +	register_reboot_notifier(&chip->reboot_notifier);
 +}
 +EXPORT_SYMBOL_GPL(azx_notifier_register);
 +
 +void azx_notifier_unregister(struct azx *chip)
 +{
 +	if (chip->reboot_notifier.notifier_call)
 +		unregister_reboot_notifier(&chip->reboot_notifier);
 +}
 +EXPORT_SYMBOL_GPL(azx_notifier_unregister);
 +
 +MODULE_LICENSE("GPL");
 +MODULE_DESCRIPTION("Common HDA driver functions");
++=======
++>>>>>>> fb3b07c289fc (ALSA: hda - Merge codec and controller helpers)
diff --git a/sound/pci/hda/Makefile b/sound/pci/hda/Makefile
index 96caaebfc19d..ce091c9f9122 100644
--- a/sound/pci/hda/Makefile
+++ b/sound/pci/hda/Makefile
@@ -1,10 +1,10 @@
 snd-hda-intel-objs := hda_intel.o
-snd-hda-controller-objs := hda_controller.o
 snd-hda-tegra-objs := hda_tegra.o
 # for haswell power well
 snd-hda-intel-$(CONFIG_SND_HDA_I915) +=	hda_i915.o
 
 snd-hda-codec-y := hda_bind.o hda_codec.o hda_jack.o hda_auto_parser.o hda_sysfs.o
+snd-hda-codec-y += hda_controller.o
 snd-hda-codec-$(CONFIG_PROC_FS) += hda_proc.o
 snd-hda-codec-$(CONFIG_SND_HDA_HWDEP) += hda_hwdep.o
 snd-hda-codec-$(CONFIG_SND_HDA_INPUT_BEEP) += hda_beep.o
@@ -28,7 +28,6 @@ snd-hda-codec-hdmi-objs :=	patch_hdmi.o hda_eld.o
 
 # common driver
 obj-$(CONFIG_SND_HDA) := snd-hda-codec.o
-obj-$(CONFIG_SND_HDA) += snd-hda-controller.o
 
 # codec drivers
 obj-$(CONFIG_SND_HDA_GENERIC) += snd-hda-codec-generic.o
* Unmerged path sound/pci/hda/hda_controller.c
