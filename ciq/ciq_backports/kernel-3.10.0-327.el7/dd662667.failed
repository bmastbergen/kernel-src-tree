ovl: add mutli-layer infrastructure

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Miklos Szeredi <mszeredi@suse.cz>
commit dd662667e6d3e55b42798a6e6e7f37dddc639460
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/dd662667.failed

Add multiple lower layers to 'struct ovl_fs' and 'struct ovl_entry'.

ovl_entry will have an array of paths, instead of just the dentry.  This
allows a compact array containing just the layers which exist at current
point in the tree (which is expected to be a small number for the majority
of dentries).

The number of layers is not limited by this infrastructure.

	Signed-off-by: Miklos Szeredi <mszeredi@suse.cz>
(cherry picked from commit dd662667e6d3e55b42798a6e6e7f37dddc639460)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/overlayfs/super.c
diff --cc fs/overlayfs/super.c
index febb3ea50093,460d866b97a2..000000000000
--- a/fs/overlayfs/super.c
+++ b/fs/overlayfs/super.c
@@@ -641,8 -660,8 +660,13 @@@ static int ovl_fill_super(struct super_
  	struct ovl_entry *oe;
  	struct ovl_fs *ufs;
  	struct kstatfs statfs;
++<<<<<<< HEAD
 +	const int *upper_stack_depth, *lower_stack_depth;
 +	int *overlay_stack_depth;
++=======
+ 	struct vfsmount *mnt;
+ 	unsigned int i;
++>>>>>>> dd662667e6d3 (ovl: add mutli-layer infrastructure)
  	int err;
  
  	err = -ENOMEM;
* Unmerged path fs/overlayfs/super.c
