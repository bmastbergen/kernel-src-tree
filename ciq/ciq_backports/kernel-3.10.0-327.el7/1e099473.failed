vhost: fix error handling for memory region alloc

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [vhost] fix error handling for memory region alloc (Igor Mammedov) [1152962]
Rebuild_FUZZ: 92.31%
commit-author Igor Mammedov <imammedo@redhat.com>
commit 1e0994730f772580ff98754eb5595190cdf371ef
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/1e099473.failed

callers of vhost_kvzalloc() expect the same behaviour on
allocation error as from kmalloc/vmalloc i.e. NULL return
value. So just return vzmalloc() returned value instead of
returning ERR_PTR(-ENOMEM)

Fixes: 4de7255f7d2be5 ("vhost: extend memory regions allocation to vmalloc")

Spotted-by: Dan Carpenter <dan.carpenter@oracle.com>
	Suggested-by: Julia Lawall <julia.lawall@lip6.fr>
	Signed-off-by: Igor Mammedov <imammedo@redhat.com>
	Signed-off-by: Michael S. Tsirkin <mst@redhat.com>
(cherry picked from commit 1e0994730f772580ff98754eb5595190cdf371ef)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/vhost/vhost.c
diff --cc drivers/vhost/vhost.c
index 87cb46103e8c,eec2f11809ff..000000000000
--- a/drivers/vhost/vhost.c
+++ b/drivers/vhost/vhost.c
@@@ -606,6 -679,15 +606,18 @@@ static int vhost_memory_reg_sort_cmp(co
  	return 0;
  }
  
++<<<<<<< HEAD
++=======
+ static void *vhost_kvzalloc(unsigned long size)
+ {
+ 	void *n = kzalloc(size, GFP_KERNEL | __GFP_NOWARN | __GFP_REPEAT);
+ 
+ 	if (!n)
+ 		n = vzalloc(size);
+ 	return n;
+ }
+ 
++>>>>>>> 1e0994730f77 (vhost: fix error handling for memory region alloc)
  static long vhost_set_memory(struct vhost_dev *d, struct vhost_memory __user *m)
  {
  	struct vhost_memory mem, *newmem, *oldmem;
* Unmerged path drivers/vhost/vhost.c
