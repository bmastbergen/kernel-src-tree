ixgbe: ethtool DCB registers dump for 82599 and x540

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Leonardo Potenza <leonardo.potenza@intel.com>
commit 51e409f106cb890b11fe78a5c2e3cab36b5947ac
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/51e409f1.failed

Added support for DCB registers dump using ethtool -d option both for
82599 and x540 ethernet controllers

	Signed-off-by: Leonardo Potenza <leonardo.potenza@intel.com>
	Signed-off-by: Maryam Tahhan <maryam.tahhan@intel.com>
	Acked-by: John Fastabend <john.r.fastabend@intel.com>
	Tested-by: Phil Schmitt <phillip.j.schmitt@intel.com>
	Tested-by: Jack Morgan <jack.morgan@intel.com>
	Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 51e409f106cb890b11fe78a5c2e3cab36b5947ac)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/intel/ixgbe/ixgbe_ethtool.c
diff --cc drivers/net/ethernet/intel/ixgbe/ixgbe_ethtool.c
index 03337d9d3c62,27c2032effc4..000000000000
--- a/drivers/net/ethernet/intel/ixgbe/ixgbe_ethtool.c
+++ b/drivers/net/ethernet/intel/ixgbe/ixgbe_ethtool.c
@@@ -620,8 -624,6 +620,11 @@@ static void ixgbe_get_regs(struct net_d
  		break;
  	case ixgbe_mac_82599EB:
  	case ixgbe_mac_X540:
++<<<<<<< HEAD
 +	case ixgbe_mac_X550:
 +	case ixgbe_mac_X550EM_x:
++=======
++>>>>>>> 51e409f106cb (ixgbe: ethtool DCB registers dump for 82599 and x540)
  		regs_buff[830] = IXGBE_READ_REG(hw, IXGBE_RTTDCS);
  		regs_buff[832] = IXGBE_READ_REG(hw, IXGBE_RTRPCS);
  		for (i = 0; i < 8; i++)
@@@ -642,9 -644,11 +645,17 @@@
  	}
  
  	for (i = 0; i < 8; i++)
++<<<<<<< HEAD
 +		regs_buff[865 + i] = IXGBE_READ_REG(hw, IXGBE_TDPT2TCCR(i));
 +	for (i = 0; i < 8; i++)
 +		regs_buff[873 + i] = IXGBE_READ_REG(hw, IXGBE_TDPT2TCSR(i));
++=======
+ 		regs_buff[865 + i] =
+ 		IXGBE_READ_REG(hw, IXGBE_TDPT2TCCR(i)); /* same as RTTPT2C */
+ 	for (i = 0; i < 8; i++)
+ 		regs_buff[873 + i] =
+ 		IXGBE_READ_REG(hw, IXGBE_TDPT2TCSR(i)); /* same as RTTPT2S */
++>>>>>>> 51e409f106cb (ixgbe: ethtool DCB registers dump for 82599 and x540)
  
  	/* Statistics */
  	regs_buff[881] = IXGBE_GET_STAT(adapter, crcerrs);
* Unmerged path drivers/net/ethernet/intel/ixgbe/ixgbe_ethtool.c
diff --git a/drivers/net/ethernet/intel/ixgbe/ixgbe_type.h b/drivers/net/ethernet/intel/ixgbe/ixgbe_type.h
index 952d61a42f60..9e5c4348353f 100644
--- a/drivers/net/ethernet/intel/ixgbe/ixgbe_type.h
+++ b/drivers/net/ethernet/intel/ixgbe/ixgbe_type.h
@@ -589,6 +589,10 @@ struct ixgbe_thermal_sensor_data {
 #define IXGBE_RTTDQSEL    0x04904
 #define IXGBE_RTTDT1C     0x04908
 #define IXGBE_RTTDT1S     0x0490C
+#define IXGBE_RTTQCNCR    0x08B00
+#define IXGBE_RTTQCNTG    0x04A90
+#define IXGBE_RTTBCNRD    0x0498C
+#define IXGBE_RTTQCNRR    0x0498C
 #define IXGBE_RTTDTECC    0x04990
 #define IXGBE_RTTDTECC_NO_BCN   0x00000100
 #define IXGBE_RTTBCNRC    0x04984
@@ -598,6 +602,7 @@ struct ixgbe_thermal_sensor_data {
 #define IXGBE_RTTBCNRC_RF_INT_MASK	\
 	(IXGBE_RTTBCNRC_RF_DEC_MASK << IXGBE_RTTBCNRC_RF_INT_SHIFT)
 #define IXGBE_RTTBCNRM    0x04980
+#define IXGBE_RTTQCNRM    0x04980
 
 /* FCoE DMA Context Registers */
 #define IXGBE_FCPTRL    0x02410 /* FC User Desc. PTR Low */
