userfaultfd: add missing mmput() in error path

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Eric Biggers <ebiggers3@gmail.com>
commit c03e946fdd653c4a23e242aca83da7e9838f5b00
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/c03e946f.failed

This fixes a memleak if anon_inode_getfile() fails in userfaultfd().

	Signed-off-by: Eric Biggers <ebiggers3@gmail.com>
	Signed-off-by: Andrea Arcangeli <aarcange@redhat.com>
	Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
	Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
(cherry picked from commit c03e946fdd653c4a23e242aca83da7e9838f5b00)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/userfaultfd.c
diff --cc fs/userfaultfd.c
index 6a34033d3189,f9aeb40a7197..000000000000
--- a/fs/userfaultfd.c
+++ b/fs/userfaultfd.c
@@@ -1174,8 -1287,10 +1174,15 @@@ static struct file *userfaultfd_file_cr
  
  	file = anon_inode_getfile("[userfaultfd]", &userfaultfd_fops, ctx,
  				  O_RDWR | (flags & UFFD_SHARED_FCNTL_FLAGS));
++<<<<<<< HEAD
 +	if (IS_ERR(file))
 +		kfree(ctx);
++=======
+ 	if (IS_ERR(file)) {
+ 		mmput(ctx->mm);
+ 		kmem_cache_free(userfaultfd_ctx_cachep, ctx);
+ 	}
++>>>>>>> c03e946fdd65 (userfaultfd: add missing mmput() in error path)
  out:
  	return file;
  }
* Unmerged path fs/userfaultfd.c
