pwm: drop owner assignment from platform_drivers

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [char] tpm: drop owner assignment from platform_drivers (Jarod Wilson) [1182709]
Rebuild_FUZZ: 97.92%
commit-author Wolfram Sang <wsa@the-dreams.de>
commit f05fae14a10ca0c07f176e680ef9ff9d348e7153
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/f05fae14.failed

A platform_driver does not need to set an owner, it will be populated by the
driver core.

	Signed-off-by: Wolfram Sang <wsa@the-dreams.de>
(cherry picked from commit f05fae14a10ca0c07f176e680ef9ff9d348e7153)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/pwm/pwm-clps711x.c
#	drivers/pwm/pwm-imx.c
#	drivers/pwm/pwm-lp3943.c
#	drivers/pwm/pwm-lpc32xx.c
#	drivers/pwm/pwm-mxs.c
#	drivers/pwm/pwm-pxa.c
#	drivers/pwm/pwm-renesas-tpu.c
#	drivers/pwm/pwm-samsung.c
diff --cc drivers/pwm/pwm-imx.c
index c938bae18812,11af7b4403f8..000000000000
--- a/drivers/pwm/pwm-imx.c
+++ b/drivers/pwm/pwm-imx.c
@@@ -295,7 -295,7 +295,11 @@@ static int imx_pwm_remove(struct platfo
  static struct platform_driver imx_pwm_driver = {
  	.driver		= {
  		.name	= "imx-pwm",
++<<<<<<< HEAD
 +		.of_match_table = of_match_ptr(imx_pwm_dt_ids),
++=======
+ 		.of_match_table = imx_pwm_dt_ids,
++>>>>>>> f05fae14a10c (pwm: drop owner assignment from platform_drivers)
  	},
  	.probe		= imx_pwm_probe,
  	.remove		= imx_pwm_remove,
diff --cc drivers/pwm/pwm-lpc32xx.c
index 8272883c0d05,9fde60ce8e7b..000000000000
--- a/drivers/pwm/pwm-lpc32xx.c
+++ b/drivers/pwm/pwm-lpc32xx.c
@@@ -171,7 -168,7 +171,11 @@@ MODULE_DEVICE_TABLE(of, lpc32xx_pwm_dt_
  static struct platform_driver lpc32xx_pwm_driver = {
  	.driver = {
  		.name = "lpc32xx-pwm",
++<<<<<<< HEAD
 +		.of_match_table = of_match_ptr(lpc32xx_pwm_dt_ids),
++=======
+ 		.of_match_table = lpc32xx_pwm_dt_ids,
++>>>>>>> f05fae14a10c (pwm: drop owner assignment from platform_drivers)
  	},
  	.probe = lpc32xx_pwm_probe,
  	.remove = lpc32xx_pwm_remove,
diff --cc drivers/pwm/pwm-mxs.c
index 3febdddf71f9,f75ecb09d97d..000000000000
--- a/drivers/pwm/pwm-mxs.c
+++ b/drivers/pwm/pwm-mxs.c
@@@ -188,7 -189,7 +188,11 @@@ MODULE_DEVICE_TABLE(of, mxs_pwm_dt_ids)
  static struct platform_driver mxs_pwm_driver = {
  	.driver = {
  		.name = "mxs-pwm",
++<<<<<<< HEAD
 +		.of_match_table = of_match_ptr(mxs_pwm_dt_ids),
++=======
+ 		.of_match_table = mxs_pwm_dt_ids,
++>>>>>>> f05fae14a10c (pwm: drop owner assignment from platform_drivers)
  	},
  	.probe = mxs_pwm_probe,
  	.remove = mxs_pwm_remove,
diff --cc drivers/pwm/pwm-pxa.c
index dc9717551d39,cb2f7024cf68..000000000000
--- a/drivers/pwm/pwm-pxa.c
+++ b/drivers/pwm/pwm-pxa.c
@@@ -175,7 -225,7 +175,11 @@@ static int pwm_remove(struct platform_d
  static struct platform_driver pwm_driver = {
  	.driver		= {
  		.name	= "pxa25x-pwm",
++<<<<<<< HEAD
 +		.owner	= THIS_MODULE,
++=======
+ 		.of_match_table = pwm_of_match,
++>>>>>>> f05fae14a10c (pwm: drop owner assignment from platform_drivers)
  	},
  	.probe		= pwm_probe,
  	.remove		= pwm_remove,
diff --cc drivers/pwm/pwm-samsung.c
index a0ece50d70bb,3e9b5835a4af..000000000000
--- a/drivers/pwm/pwm-samsung.c
+++ b/drivers/pwm/pwm-samsung.c
@@@ -318,36 -595,20 +318,42 @@@ static int s3c_pwm_resume(struct devic
  }
  #endif
  
 -static SIMPLE_DEV_PM_OPS(pwm_samsung_pm_ops, pwm_samsung_suspend,
 -			 pwm_samsung_resume);
 +static SIMPLE_DEV_PM_OPS(s3c_pwm_pm_ops, s3c_pwm_suspend,
 +			s3c_pwm_resume);
  
 -static struct platform_driver pwm_samsung_driver = {
 +static struct platform_driver s3c_pwm_driver = {
  	.driver		= {
++<<<<<<< HEAD
 +		.name	= "s3c24xx-pwm",
 +		.owner	= THIS_MODULE,
 +		.pm	= &s3c_pwm_pm_ops,
++=======
+ 		.name	= "samsung-pwm",
+ 		.pm	= &pwm_samsung_pm_ops,
+ 		.of_match_table = of_match_ptr(samsung_pwm_matches),
++>>>>>>> f05fae14a10c (pwm: drop owner assignment from platform_drivers)
  	},
 -	.probe		= pwm_samsung_probe,
 -	.remove		= pwm_samsung_remove,
 +	.probe		= s3c_pwm_probe,
 +	.remove		= s3c_pwm_remove,
  };
 -module_platform_driver(pwm_samsung_driver);
  
 -MODULE_LICENSE("GPL");
 -MODULE_AUTHOR("Tomasz Figa <tomasz.figa@gmail.com>");
 -MODULE_ALIAS("platform:samsung-pwm");
 +static int __init pwm_init(void)
 +{
 +	int ret;
 +
 +	clk_scaler[0] = clk_get(NULL, "pwm-scaler0");
 +	clk_scaler[1] = clk_get(NULL, "pwm-scaler1");
 +
 +	if (IS_ERR(clk_scaler[0]) || IS_ERR(clk_scaler[1])) {
 +		pr_err("failed to get scaler clocks\n");
 +		return -EINVAL;
 +	}
 +
 +	ret = platform_driver_register(&s3c_pwm_driver);
 +	if (ret)
 +		pr_err("failed to add pwm driver\n");
 +
 +	return ret;
 +}
 +
 +arch_initcall(pwm_init);
* Unmerged path drivers/pwm/pwm-clps711x.c
* Unmerged path drivers/pwm/pwm-lp3943.c
* Unmerged path drivers/pwm/pwm-renesas-tpu.c
diff --git a/drivers/pwm/pwm-ab8500.c b/drivers/pwm/pwm-ab8500.c
index 1d07a6f99375..3d28006ee120 100644
--- a/drivers/pwm/pwm-ab8500.c
+++ b/drivers/pwm/pwm-ab8500.c
@@ -138,7 +138,6 @@ static int ab8500_pwm_remove(struct platform_device *pdev)
 static struct platform_driver ab8500_pwm_driver = {
 	.driver = {
 		.name = "ab8500-pwm",
-		.owner = THIS_MODULE,
 	},
 	.probe = ab8500_pwm_probe,
 	.remove = ab8500_pwm_remove,
* Unmerged path drivers/pwm/pwm-clps711x.c
* Unmerged path drivers/pwm/pwm-imx.c
diff --git a/drivers/pwm/pwm-jz4740.c b/drivers/pwm/pwm-jz4740.c
index 0a2ede3c3932..d8f43b944093 100644
--- a/drivers/pwm/pwm-jz4740.c
+++ b/drivers/pwm/pwm-jz4740.c
@@ -208,7 +208,6 @@ static int jz4740_pwm_remove(struct platform_device *pdev)
 static struct platform_driver jz4740_pwm_driver = {
 	.driver = {
 		.name = "jz4740-pwm",
-		.owner = THIS_MODULE,
 	},
 	.probe = jz4740_pwm_probe,
 	.remove = jz4740_pwm_remove,
* Unmerged path drivers/pwm/pwm-lp3943.c
* Unmerged path drivers/pwm/pwm-lpc32xx.c
* Unmerged path drivers/pwm/pwm-mxs.c
* Unmerged path drivers/pwm/pwm-pxa.c
* Unmerged path drivers/pwm/pwm-renesas-tpu.c
* Unmerged path drivers/pwm/pwm-samsung.c
diff --git a/drivers/pwm/pwm-tiecap.c b/drivers/pwm/pwm-tiecap.c
index 72ca42dfa733..4b653567512d 100644
--- a/drivers/pwm/pwm-tiecap.c
+++ b/drivers/pwm/pwm-tiecap.c
@@ -340,7 +340,6 @@ static SIMPLE_DEV_PM_OPS(ecap_pwm_pm_ops, ecap_pwm_suspend, ecap_pwm_resume);
 static struct platform_driver ecap_pwm_driver = {
 	.driver = {
 		.name	= "ecap",
-		.owner	= THIS_MODULE,
 		.of_match_table = ecap_of_match,
 		.pm	= &ecap_pwm_pm_ops,
 	},
diff --git a/drivers/pwm/pwm-tiehrpwm.c b/drivers/pwm/pwm-tiehrpwm.c
index 48a485c2e422..aec65bbc8f0b 100644
--- a/drivers/pwm/pwm-tiehrpwm.c
+++ b/drivers/pwm/pwm-tiehrpwm.c
@@ -598,7 +598,6 @@ static SIMPLE_DEV_PM_OPS(ehrpwm_pwm_pm_ops, ehrpwm_pwm_suspend,
 static struct platform_driver ehrpwm_pwm_driver = {
 	.driver = {
 		.name	= "ehrpwm",
-		.owner	= THIS_MODULE,
 		.of_match_table = ehrpwm_of_match,
 		.pm	= &ehrpwm_pwm_pm_ops,
 	},
diff --git a/drivers/pwm/pwm-tipwmss.c b/drivers/pwm/pwm-tipwmss.c
index 3b119bc2c3c6..b84df47e9710 100644
--- a/drivers/pwm/pwm-tipwmss.c
+++ b/drivers/pwm/pwm-tipwmss.c
@@ -121,7 +121,6 @@ static SIMPLE_DEV_PM_OPS(pwmss_pm_ops, pwmss_suspend, pwmss_resume);
 static struct platform_driver pwmss_driver = {
 	.driver	= {
 		.name	= "pwmss",
-		.owner	= THIS_MODULE,
 		.pm	= &pwmss_pm_ops,
 		.of_match_table	= pwmss_of_match,
 	},
diff --git a/drivers/pwm/pwm-vt8500.c b/drivers/pwm/pwm-vt8500.c
index 323125abf3f4..d1df441b8722 100644
--- a/drivers/pwm/pwm-vt8500.c
+++ b/drivers/pwm/pwm-vt8500.c
@@ -268,7 +268,6 @@ static struct platform_driver vt8500_pwm_driver = {
 	.remove		= vt8500_pwm_remove,
 	.driver		= {
 		.name	= "vt8500-pwm",
-		.owner	= THIS_MODULE,
 		.of_match_table = vt8500_pwm_dt_ids,
 	},
 };
