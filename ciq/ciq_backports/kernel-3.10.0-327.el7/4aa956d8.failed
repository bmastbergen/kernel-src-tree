ipv6: tcp_ipv6 do some cleanup

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Wang Yufen <wangyufen@huawei.com>
commit 4aa956d801470c9d338f6095e2cf9a5b58909337
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/4aa956d8.failed

	Signed-off-by: Wang Yufen <wangyufen@huawei.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 4aa956d801470c9d338f6095e2cf9a5b58909337)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv6/tcp_ipv6.c
diff --cc net/ipv6/tcp_ipv6.c
index b4c95c9ecc4a,10b7c0478830..000000000000
--- a/net/ipv6/tcp_ipv6.c
+++ b/net/ipv6/tcp_ipv6.c
@@@ -1283,6 -1290,25 +1282,28 @@@ out
  	return NULL;
  }
  
++<<<<<<< HEAD
++=======
+ static __sum16 tcp_v6_checksum_init(struct sk_buff *skb)
+ {
+ 	if (skb->ip_summed == CHECKSUM_COMPLETE) {
+ 		if (!tcp_v6_check(skb->len, &ipv6_hdr(skb)->saddr,
+ 				  &ipv6_hdr(skb)->daddr, skb->csum)) {
+ 			skb->ip_summed = CHECKSUM_UNNECESSARY;
+ 			return 0;
+ 		}
+ 	}
+ 
+ 	skb->csum = ~csum_unfold(tcp_v6_check(skb->len,
+ 					      &ipv6_hdr(skb)->saddr,
+ 					      &ipv6_hdr(skb)->daddr, 0));
+ 
+ 	if (skb->len <= 76)
+ 		return __skb_checksum_complete(skb);
+ 	return 0;
+ }
+ 
++>>>>>>> 4aa956d80147 (ipv6: tcp_ipv6 do some cleanup)
  /* The socket must have it's spinlock held when we get
   * here.
   *
* Unmerged path net/ipv6/tcp_ipv6.c
