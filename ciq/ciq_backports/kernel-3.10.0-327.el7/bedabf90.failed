bonding: simplify the slave_do_arp_validate_only()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author dingtianhong <dingtianhong@huawei.com>
commit bedabf903d9b1a056ba58dac1c89760d5adca2a3
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/bedabf90.failed

The argument slave is not used for slave_do_arp_validate_only(), so no need
to keep it, make the function more simple.

	Cc: Jay Vosburgh <j.vosburgh@gmail.com>
	Cc: Veaceslav Falico <vfalico@gmail.com>
	Cc: Andy Gospodarek <andy@greyhouse.net>
	Signed-off-by: Ding Tianhong <dingtianhong@huawei.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit bedabf903d9b1a056ba58dac1c89760d5adca2a3)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/bonding/bond_main.c
#	drivers/net/bonding/bonding.h
diff --cc drivers/net/bonding/bond_main.c
index d0eec7c786f0,a1741cb23100..000000000000
--- a/drivers/net/bonding/bond_main.c
+++ b/drivers/net/bonding/bond_main.c
@@@ -2567,9 -2291,9 +2567,15 @@@ int bond_arp_rcv(const struct sk_buff *
  	int alen, is_arp = skb->protocol == __cpu_to_be16(ETH_P_ARP);
  
  	if (!slave_do_arp_validate(bond, slave)) {
++<<<<<<< HEAD
 +		if ((slave_do_arp_validate_only(bond, slave) && is_arp) ||
 +		    !slave_do_arp_validate_only(bond, slave))
 +			slave->last_arp_rx = jiffies;
++=======
+ 		if ((slave_do_arp_validate_only(bond) && is_arp) ||
+ 		    !slave_do_arp_validate_only(bond))
+ 			slave->last_rx = jiffies;
++>>>>>>> bedabf903d9b (bonding: simplify the slave_do_arp_validate_only())
  		return RX_HANDLER_ANOTHER;
  	} else if (!is_arp) {
  		return RX_HANDLER_ANOTHER;
diff --cc drivers/net/bonding/bonding.h
index e1ca02f0b074,1befc256f31c..000000000000
--- a/drivers/net/bonding/bonding.h
+++ b/drivers/net/bonding/bonding.h
@@@ -334,6 -396,11 +334,14 @@@ static inline int slave_do_arp_validate
  	return bond->params.arp_validate & (1 << bond_slave_state(slave));
  }
  
++<<<<<<< HEAD
++=======
+ static inline int slave_do_arp_validate_only(struct bonding *bond)
+ {
+ 	return bond->params.arp_validate & BOND_ARP_FILTER;
+ }
+ 
++>>>>>>> bedabf903d9b (bonding: simplify the slave_do_arp_validate_only())
  /* Get the oldest arp which we've received on this slave for bond's
   * arp_targets.
   */
* Unmerged path drivers/net/bonding/bond_main.c
* Unmerged path drivers/net/bonding/bonding.h
