ALSA: hda - Mute headphone pin on suspend on XPS13 9333

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [alsa] hda - Mute headphone pin on suspend on XPS13 9333 (Jaroslav Kysela) [1197064]
Rebuild_FUZZ: 94.23%
commit-author Gabriele Mazzotta <gabriele.mzt@gmail.com>
commit 9476d369d7b39348945c297da5f2935904229813
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/9476d369.failed

Muting the headphone output pin right before the codec suspension
prevents pop noises when headphones are plugged in (except for a
barely audible click noise).
This solution allows to truly save some power when headphones are
plugged in unlike the previous solution (033b0a7ca9c:
"ALSA: hda - Pop noises fix for XPS13 9333")

	Signed-off-by: Gabriele Mazzotta <gabriele.mzt@gmail.com>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit 9476d369d7b39348945c297da5f2935904229813)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/pci/hda/patch_realtek.c
diff --cc sound/pci/hda/patch_realtek.c
index ec9d77bce4f1,231d0e4b9a95..000000000000
--- a/sound/pci/hda/patch_realtek.c
+++ b/sound/pci/hda/patch_realtek.c
@@@ -4178,17 -4176,15 +4178,23 @@@ static void alc_fixup_disable_aamix(str
  	}
  }
  
- static unsigned int alc_power_filter_xps13(struct hda_codec *codec,
- 				hda_nid_t nid,
- 				unsigned int power_state)
+ static void alc_shutup_dell_xps13(struct hda_codec *codec)
  {
  	struct alc_spec *spec = codec->spec;
+ 	int hp_pin = spec->gen.autocfg.hp_pins[0];
  
++<<<<<<< HEAD
 +	/* Avoid pop noises when headphones are plugged in */
 +	if (spec->gen.hp_jack_present)
 +		if (nid == codec->afg || nid == 0x02 || nid == 0x15)
 +			return AC_PWRST_D0;
 +	return snd_hda_gen_path_power_filter(codec, nid, power_state);
++=======
+ 	/* Prevent pop noises when headphones are plugged in */
+ 	snd_hda_codec_write(codec, hp_pin, 0,
+ 			    AC_VERB_SET_AMP_GAIN_MUTE, AMP_OUT_MUTE);
+ 	msleep(20);
++>>>>>>> 9476d369d7b3 (ALSA: hda - Mute headphone pin on suspend on XPS13 9333)
  }
  
  static void alc_fixup_dell_xps13(struct hda_codec *codec,
* Unmerged path sound/pci/hda/patch_realtek.c
