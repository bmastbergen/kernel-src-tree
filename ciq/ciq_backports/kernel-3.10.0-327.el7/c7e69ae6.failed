ALSA: hda: fix possible NULL dereference

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [alsa] hda: fix possible null dereference (Jaroslav Kysela) [1197064]
Rebuild_FUZZ: 91.89%
commit-author Markus Osterhoff <linux-kernel@k-raum.org>
commit c7e69ae6b4ff49edf50180c0a32f3dd9d7967e31
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/c7e69ae6.failed

After a for-loop was replaced by list_for_each_entry, see
Commit bbbc7e8502c9 ("ALSA: hda - Allocate hda_pcm objects dynamically"),
Commit 751e2216899c ("ALSA: hda: fix possible null dereference"),
a possible NULL pointer dereference has been introduced; this patch adds
the NULL check on pcm->pcm, while leaving a potentially superfluous
check on pcm itself untouched.

	Signed-off-by: Markus Osterhoff <linux-kernel@k-raum.org>
	Cc: <stable@vger.kernel.org> #v4.1+
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit c7e69ae6b4ff49edf50180c0a32f3dd9d7967e31)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/pci/hda/hda_codec.c
diff --cc sound/pci/hda/hda_codec.c
index 05cb5f57659a,d1a2cb65e27c..000000000000
--- a/sound/pci/hda/hda_codec.c
+++ b/sound/pci/hda/hda_codec.c
@@@ -4051,9 -3172,8 +4051,14 @@@ static int add_std_chmaps(struct hda_co
  			struct snd_pcm_chmap *chmap;
  			const struct snd_pcm_chmap_elem *elem;
  
++<<<<<<< HEAD
 +			if (pcm->own_chmap)
 +				continue;
 +			if (!pcm || !hinfo->substreams)
++=======
+ 			if (!pcm || !pcm->pcm || pcm->own_chmap ||
+ 			    !hinfo->substreams)
++>>>>>>> c7e69ae6b4ff (ALSA: hda: fix possible NULL dereference)
  				continue;
  			elem = hinfo->chmap ? hinfo->chmap : snd_pcm_std_chmaps;
  			err = snd_pcm_add_chmap_ctls(pcm->pcm, str, elem,
* Unmerged path sound/pci/hda/hda_codec.c
