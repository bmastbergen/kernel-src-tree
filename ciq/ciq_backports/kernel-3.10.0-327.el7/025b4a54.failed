i40e: Add FW check to disable DCB and wrap autoneg workaround with FW check

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Anjali Singhai Jain <anjali.singhai@intel.com>
commit 025b4a545fc4ef99fb44b32842c6bc30d3690a3f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/025b4a54.failed

For FW < 4.33 DCB should be disabled.
Also Autoneg workaround to avoid Rx stall is still needed for FW < 4.33.

Change-ID: Iff36ad86be2f597e7701096014d6d094332a9a21
	Signed-off-by: Anjali Singhai Jain <anjali.singhai@intel.com>
	Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
(cherry picked from commit 025b4a545fc4ef99fb44b32842c6bc30d3690a3f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/intel/i40e/i40e_main.c
diff --cc drivers/net/ethernet/intel/i40e/i40e_main.c
index b3a0e64e7870,4fb05b4c02b3..000000000000
--- a/drivers/net/ethernet/intel/i40e/i40e_main.c
+++ b/drivers/net/ethernet/intel/i40e/i40e_main.c
@@@ -4532,7 -4551,9 +4532,13 @@@ static int i40e_init_pf_dcb(struct i40e
  	struct i40e_hw *hw = &pf->hw;
  	int err = 0;
  
++<<<<<<< HEAD
 +	if (pf->hw.func_caps.npar_enable)
++=======
+ 	/* Do not enable DCB for SW1 and SW2 images even if the FW is capable */
+ 	if (((pf->hw.aq.fw_maj_ver == 4) && (pf->hw.aq.fw_min_ver < 33)) ||
+ 	    (pf->hw.aq.fw_maj_ver < 4))
++>>>>>>> 025b4a545fc4 (i40e: Add FW check to disable DCB and wrap autoneg workaround with FW check)
  		goto out;
  
  	/* Get the initial DCB configuration */
* Unmerged path drivers/net/ethernet/intel/i40e/i40e_main.c
