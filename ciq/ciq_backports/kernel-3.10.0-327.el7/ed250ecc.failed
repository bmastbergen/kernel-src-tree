i40evf: ethtool RSS fixes

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Mitch Williams <mitch.a.williams@intel.com>
commit ed250ecc5546649e0d8a1b8f000594314a666547
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/ed250ecc.failed

Add an extra check to make sure that the indirection table pointer is
valid before dereferencing it.

Change-ID: I698adbf3daff03081d01f489dc95a9f1ad8b12f1
	Reported-by: Ben Hutchings <ben@decadent.org.uk>
	Signed-off-by: Mitch Williams <mitch.a.williams@intel.com>
	Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
(cherry picked from commit ed250ecc5546649e0d8a1b8f000594314a666547)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/intel/i40evf/i40evf_ethtool.c
diff --cc drivers/net/ethernet/intel/i40evf/i40evf_ethtool.c
index 1cccf7f2dca7,681a5d4b4f6a..000000000000
--- a/drivers/net/ethernet/intel/i40evf/i40evf_ethtool.c
+++ b/drivers/net/ethernet/intel/i40evf/i40evf_ethtool.c
@@@ -635,12 -637,19 +635,28 @@@ static int i40evf_get_rxfh_indir(struc
  	u32 hlut_val;
  	int i, j;
  
++<<<<<<< HEAD
 +	for (i = 0, j = 0; i <= I40E_VFQF_HLUT_MAX_INDEX; i++) {
 +		hlut_val = rd32(hw, I40E_VFQF_HLUT(i));
 +		indir[j++] = hlut_val & 0xff;
 +		indir[j++] = (hlut_val >> 8) & 0xff;
 +		indir[j++] = (hlut_val >> 16) & 0xff;
 +		indir[j++] = (hlut_val >> 24) & 0xff;
++=======
+ 	if (hfunc)
+ 		*hfunc = ETH_RSS_HASH_TOP;
+ 	if (!indir)
+ 		return 0;
+ 
+ 	if (indir) {
+ 		for (i = 0, j = 0; i <= I40E_VFQF_HLUT_MAX_INDEX; i++) {
+ 			hlut_val = rd32(hw, I40E_VFQF_HLUT(i));
+ 			indir[j++] = hlut_val & 0xff;
+ 			indir[j++] = (hlut_val >> 8) & 0xff;
+ 			indir[j++] = (hlut_val >> 16) & 0xff;
+ 			indir[j++] = (hlut_val >> 24) & 0xff;
+ 		}
++>>>>>>> ed250ecc5546 (i40evf: ethtool RSS fixes)
  	}
  	return 0;
  }
* Unmerged path drivers/net/ethernet/intel/i40evf/i40evf_ethtool.c
