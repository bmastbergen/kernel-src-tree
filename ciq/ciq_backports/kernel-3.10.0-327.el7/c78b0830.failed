ACPI / LPSS: custom power domain for LPSS

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [acpi] lpss: custom power domain for LPSS (Prarit Bhargava) [1178891]
Rebuild_FUZZ: 90.67%
commit-author Heikki Krogerus <heikki.krogerus@linux.intel.com>
commit c78b0830667a7e7c1f0ca65b76b33166a84806b3
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/c78b0830.failed

A power domain where we save the context of the additional
LPSS registers. We need to do this or all LPSS devices are
left in reset state when resuming from D3 on some Baytrails.
The devices with the fractional clock divider also have
zeros for N and M values after resuming unless they are
reset.

Li Aubrey found the root cause for the issue. The idea of
using power domain for LPSS came from Mika Westerberg.

	Reported-by: Jin Yao <yao.jin@linux.intel.com>
	Suggested-by: Li Aubrey <aubrey.li@linux.intel.com>
	Suggested-by: Mika Westerberg <mika.westerberg@linux.intel.com>
	Tested-by: Mika Westerberg <mika.westerberg@linux.intel.com>
	Signed-off-by: Heikki Krogerus <heikki.krogerus@linux.intel.com>
[rjw: Added the .complete() callback to the PM domain, fixed build
 warning on 32-bit.]
	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit c78b0830667a7e7c1f0ca65b76b33166a84806b3)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/acpi/acpi_lpss.c
diff --cc drivers/acpi/acpi_lpss.c
index ed5dc78f528a,a01d4d1343dd..000000000000
--- a/drivers/acpi/acpi_lpss.c
+++ b/drivers/acpi/acpi_lpss.c
@@@ -109,6 -114,17 +114,20 @@@ static struct lpss_device_desc lpt_sdio
  	.ltr_required = true,
  };
  
++<<<<<<< HEAD
++=======
+ static struct lpss_shared_clock pwm_clock = {
+ 	.name = "pwm_clk",
+ 	.rate = 25000000,
+ };
+ 
+ static struct lpss_device_desc byt_pwm_dev_desc = {
+ 	.clk_required = true,
+ 	.save_ctx = true,
+ 	.shared_clock = &pwm_clock,
+ };
+ 
++>>>>>>> c78b0830667a (ACPI / LPSS: custom power domain for LPSS)
  static struct lpss_shared_clock uart_clock = {
  	.name = "uart_clk",
  	.rate = 44236800,
* Unmerged path drivers/acpi/acpi_lpss.c
