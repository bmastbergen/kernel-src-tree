x86/irq: Hide 'HYP:' line in /proc/interrupts when not on Xen/Hyper-V

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [x86] irq: hide HYP in /proc/interrupts when not on Xen/Hyper-V (Vitaly Kuznetsov) [1238596 1238599]
Rebuild_FUZZ: 90.48%
commit-author Vitaly Kuznetsov <vkuznets@redhat.com>
commit 9d87cd61a6b71ee00b7576a3ebc10208becdbea1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/9d87cd61.failed

Hypervisor callback interrupts are only accounted on
Xen/Hyper-V. There is no point in having always-zero HYP: line
on other hypervisors or bare metal. Print the line only if
HYPERVISOR_CALLBACK_VECTOR was allocated.

	Reported-by: Radim Krčmář <rkrcmar@redhat.com>
	Signed-off-by: Vitaly Kuznetsov <vkuznets@redhat.com>
	Cc: Andrew Jones <drjones@redhat.com>
	Cc: Linus Torvalds <torvalds@linux-foundation.org>
	Cc: Peter Zijlstra <peterz@infradead.org>
	Cc: Thomas Gleixner <tglx@linutronix.de>
Link: http://lkml.kernel.org/r/1436286373-11908-1-git-send-email-vkuznets@redhat.com
	Signed-off-by: Ingo Molnar <mingo@kernel.org>
(cherry picked from commit 9d87cd61a6b71ee00b7576a3ebc10208becdbea1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/kernel/irq.c
diff --cc arch/x86/kernel/irq.c
index 84dc06e6c065,5b537479de83..000000000000
--- a/arch/x86/kernel/irq.c
+++ b/arch/x86/kernel/irq.c
@@@ -123,13 -136,16 +123,24 @@@ int arch_show_interrupts(struct seq_fil
  	seq_printf(p, "%*s: ", prec, "MCP");
  	for_each_online_cpu(j)
  		seq_printf(p, "%10u ", per_cpu(mce_poll_count, j));
 -	seq_puts(p, "  Machine check polls\n");
 +	seq_printf(p, "  Machine check polls\n");
  #endif
++<<<<<<< HEAD
 +#if defined(CONFIG_HYPERV) || defined(CONFIG_XEN)
 +	seq_printf(p, "%*s: ", prec, "THR");
 +	for_each_online_cpu(j)
 +		seq_printf(p, "%10u ", irq_stats(j)->irq_hv_callback_count);
 +	seq_printf(p, "  Hypervisor callback interrupts\n");
++=======
+ #if IS_ENABLED(CONFIG_HYPERV) || defined(CONFIG_XEN)
+ 	if (test_bit(HYPERVISOR_CALLBACK_VECTOR, used_vectors)) {
+ 		seq_printf(p, "%*s: ", prec, "HYP");
+ 		for_each_online_cpu(j)
+ 			seq_printf(p, "%10u ",
+ 				   irq_stats(j)->irq_hv_callback_count);
+ 		seq_puts(p, "  Hypervisor callback interrupts\n");
+ 	}
++>>>>>>> 9d87cd61a6b7 (x86/irq: Hide 'HYP:' line in /proc/interrupts when not on Xen/Hyper-V)
  #endif
  	seq_printf(p, "%*s: %10u\n", prec, "ERR", atomic_read(&irq_err_count));
  #if defined(CONFIG_X86_IO_APIC)
* Unmerged path arch/x86/kernel/irq.c
