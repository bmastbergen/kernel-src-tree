bonding: call slave_last_rx() only once per slave

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Veaceslav Falico <vfalico@redhat.com>
commit def4460cdb171d64309c927907c18c4efcb0204b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/def4460c.failed

Simple cleanup to not call slave_last_rx() on every time function. It won't
give any measurable boost - but looks cleaner and easier to understand.

There are no time-consuming functions in between these calls, so it's safe
to call it in the beginning only once.

CC: Jay Vosburgh <fubar@us.ibm.com>
CC: Andy Gospodarek <andy@greyhouse.net>
	Signed-off-by: Veaceslav Falico <vfalico@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit def4460cdb171d64309c927907c18c4efcb0204b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/bonding/bond_main.c
diff --cc drivers/net/bonding/bond_main.c
index ef8213746e65,cc13bfeac449..000000000000
--- a/drivers/net/bonding/bond_main.c
+++ b/drivers/net/bonding/bond_main.c
@@@ -2846,10 -2764,10 +2846,14 @@@ re_arm
   */
  static int bond_ab_arp_inspect(struct bonding *bond, int delta_in_ticks)
  {
++<<<<<<< HEAD
++=======
+ 	unsigned long trans_start, last_rx;
++>>>>>>> def4460cdb17 (bonding: call slave_last_rx() only once per slave)
  	struct slave *slave;
 +	int i, commit = 0;
 +	unsigned long trans_start;
  	int extra_ticks;
 -	int commit = 0;
  
  	/* All the time comparisons below need some extra time. Otherwise, on
  	 * fast networks the ARP probe/reply may arrive within the same jiffy
@@@ -2858,8 -2776,9 +2862,9 @@@
  	 */
  	extra_ticks = delta_in_ticks / 2;
  
 -	bond_for_each_slave(bond, slave) {
 +	bond_for_each_slave(bond, slave, i) {
  		slave->new_link = BOND_LINK_NOCHANGE;
+ 		last_rx = slave_last_rx(bond, slave);
  
  		if (slave->link != BOND_LINK_UP) {
  			if (time_in_range(jiffies,
* Unmerged path drivers/net/bonding/bond_main.c
