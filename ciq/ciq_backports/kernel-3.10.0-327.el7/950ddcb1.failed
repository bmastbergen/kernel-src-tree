bonding: simple code refactor

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Mahesh Bandewar <maheshb@google.com>
commit 950ddcb1c13f86a08896b48e2c1f1527263d4130
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/950ddcb1.failed

Remove duplicate code.

	Signed-off-by: Mahesh Bandewar <maheshb@google.com>
	Signed-off-by: Andy Gospodarek <gospo@cumulusnetworks.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 950ddcb1c13f86a08896b48e2c1f1527263d4130)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/bonding/bond_main.c
diff --cc drivers/net/bonding/bond_main.c
index 723c3d160745,675b082283d6..000000000000
--- a/drivers/net/bonding/bond_main.c
+++ b/drivers/net/bonding/bond_main.c
@@@ -3122,15 -2900,21 +3122,31 @@@ static int bond_slave_netdev_event(unsi
  			if (old_duplex != slave->duplex)
  				bond_3ad_adapter_duplex_changed(slave);
  		}
++<<<<<<< HEAD
 +		break;
 +	case NETDEV_DOWN:
 +		/*
 +		 * ... Or is it this?
 +		 */
 +		break;
++=======
+ 		/* Fallthrough */
+ 	case NETDEV_DOWN:
+ 		/* Refresh slave-array if applicable!
+ 		 * If the setup does not use miimon or arpmon (mode-specific!),
+ 		 * then these events will not cause the slave-array to be
+ 		 * refreshed. This will cause xmit to use a slave that is not
+ 		 * usable. Avoid such situation by refeshing the array at these
+ 		 * events. If these (miimon/arpmon) parameters are configured
+ 		 * then array gets refreshed twice and that should be fine!
+ 		 */
+ 		if (bond_mode_uses_xmit_hash(bond))
+ 			bond_update_slave_arr(bond, NULL);
+ 		break;
++>>>>>>> 950ddcb1c13f (bonding: simple code refactor)
  	case NETDEV_CHANGEMTU:
 -		/* TODO: Should slaves be allowed to
 +		/*
 +		 * TODO: Should slaves be allowed to
  		 * independently alter their MTU?  For
  		 * an active-backup bond, slaves need
  		 * not be the same type of device, so
* Unmerged path drivers/net/bonding/bond_main.c
