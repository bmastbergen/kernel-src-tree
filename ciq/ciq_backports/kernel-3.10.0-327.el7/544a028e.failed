bonding: use bond_for_each_slave() in bond_uninit()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Veaceslav Falico <vfalico@redhat.com>
commit 544a028e65a9dadc13c3d12fb009b4bcd5338a9f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/544a028e.failed

We're safe agains removal there, cause we use neighbours primitives.

CC: Jay Vosburgh <fubar@us.ibm.com>
CC: Andy Gospodarek <andy@greyhouse.net>
	Signed-off-by: Veaceslav Falico <vfalico@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 544a028e65a9dadc13c3d12fb009b4bcd5338a9f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/bonding/bond_main.c
diff --cc drivers/net/bonding/bond_main.c
index 05a57077bb1c,85e99aedabb1..000000000000
--- a/drivers/net/bonding/bond_main.c
+++ b/drivers/net/bonding/bond_main.c
@@@ -4349,13 -4090,14 +4349,23 @@@ static void bond_setup(struct net_devic
  static void bond_uninit(struct net_device *bond_dev)
  {
  	struct bonding *bond = netdev_priv(bond_dev);
++<<<<<<< HEAD
 +	struct vlan_entry *vlan, *tmp;
++=======
+ 	struct list_head *iter;
+ 	struct slave *slave;
++>>>>>>> 544a028e65a9 (bonding: use bond_for_each_slave() in bond_uninit())
  
  	bond_netpoll_cleanup(bond_dev);
  
  	/* Release the bonded slaves */
++<<<<<<< HEAD
 +	while (bond->first_slave != NULL)
 +		__bond_release_one(bond_dev, bond->first_slave->dev, true);
++=======
+ 	bond_for_each_slave(bond, slave, iter)
+ 		__bond_release_one(bond_dev, slave->dev, true);
++>>>>>>> 544a028e65a9 (bonding: use bond_for_each_slave() in bond_uninit())
  	pr_info("%s: released all slaves\n", bond_dev->name);
  
  	list_del(&bond->bond_list);
* Unmerged path drivers/net/bonding/bond_main.c
