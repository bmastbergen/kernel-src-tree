ACPI: move models with win8 brightness problems from win8 blacklist to use_native_backlight

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [acpi] move models with win8 brightness problems from win8 blacklist to use_native_backlight (Benjamin Tissoires) [1218354]
Rebuild_FUZZ: 96.59%
commit-author Hans de Goede <hdegoede@redhat.com>
commit 6d6b20b2e9498371573c3b24a3e6b4ee1343359b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/6d6b20b2.failed

When the windows8 related backlight problems became evident, 2 approaches
were follow in parallel, one was to stop claiming to be windows 8 / 2012,
the other was to tell acpi_video to stop registering a backlight driver.

I've read all the threads and it seems that which approach ended up being
applied to which model laptop was never really a concious decision (AFAIK):

https://bugzilla.kernel.org/show_bug.cgi?id=51231
https://bugzilla.kernel.org/show_bug.cgi?id=60682

So lets move all the models which are only on the win8 blacklist because of
brightness issues to the use_native_backlight list, which is the smaller
hammer to use to solve the backlight issues.

Making this change is esp. attractive now that 3.16 has
video.use_native_brightness=1 by default. If that new default does not get
reverted because of regressions, then we can drop all the models
with a use_native_backlight quirk, greatly reducing the number of models we've
a quirk for.

Link: https://bugzilla.kernel.org/show_bug.cgi?id=51231
Link: https://bugzilla.kernel.org/show_bug.cgi?id=60682
	Signed-off-by: Hans de Goede <hdegoede@redhat.com>
	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit 6d6b20b2e9498371573c3b24a3e6b4ee1343359b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/acpi/blacklist.c
#	drivers/acpi/video.c
diff --cc drivers/acpi/blacklist.c
index dc3bc3d27546,36eb42e3b0bb..000000000000
--- a/drivers/acpi/blacklist.c
+++ b/drivers/acpi/blacklist.c
@@@ -253,78 -252,6 +253,81 @@@ static struct dmi_system_id acpi_osi_dm
  	 */
  	{
  	.callback = dmi_disable_osi_win8,
++<<<<<<< HEAD
 +	.ident = "ASUS Zenbook Prime UX31A",
 +	.matches = {
 +		     DMI_MATCH(DMI_SYS_VENDOR, "ASUSTeK COMPUTER INC."),
 +		     DMI_MATCH(DMI_PRODUCT_NAME, "UX31A"),
 +		},
 +	},
 +	{
 +	.callback = dmi_disable_osi_win8,
 +	.ident = "Dell Inspiron 15R SE",
 +	.matches = {
 +		     DMI_MATCH(DMI_SYS_VENDOR, "Dell Inc."),
 +		     DMI_MATCH(DMI_PRODUCT_NAME, "Inspiron 7520"),
 +		},
 +	},
 +	{
 +	.callback = dmi_disable_osi_win8,
 +	.ident = "ThinkPad Edge E530",
 +	.matches = {
 +		     DMI_MATCH(DMI_SYS_VENDOR, "LENOVO"),
 +		     DMI_MATCH(DMI_PRODUCT_VERSION, "3259A2G"),
 +		},
 +	},
 +	{
 +	.callback = dmi_disable_osi_win8,
 +	.ident = "ThinkPad Edge E530",
 +	.matches = {
 +		     DMI_MATCH(DMI_SYS_VENDOR, "LENOVO"),
 +		     DMI_MATCH(DMI_PRODUCT_VERSION, "3259CTO"),
 +		},
 +	},
 +	{
 +	.callback = dmi_disable_osi_win8,
 +	.ident = "ThinkPad Edge E530",
 +	.matches = {
 +		     DMI_MATCH(DMI_SYS_VENDOR, "LENOVO"),
 +		     DMI_MATCH(DMI_PRODUCT_VERSION, "3259HJG"),
 +		},
 +	},
 +	{
 +	.callback = dmi_disable_osi_win8,
 +	.ident = "Acer Aspire V5-573G",
 +	.matches = {
 +		     DMI_MATCH(DMI_SYS_VENDOR, "Acer Aspire"),
 +		     DMI_MATCH(DMI_PRODUCT_VERSION, "V5-573G/Dazzle_HW"),
 +		},
 +	},
 +	{
 +	.callback = dmi_disable_osi_win8,
 +	.ident = "Acer Aspire V5-572G",
 +	.matches = {
 +		     DMI_MATCH(DMI_SYS_VENDOR, "Acer Aspire"),
 +		     DMI_MATCH(DMI_PRODUCT_VERSION, "V5-572G/Dazzle_CX"),
 +		},
 +	},
 +	{
 +	.callback = dmi_disable_osi_win8,
 +	.ident = "ThinkPad T431s",
 +	.matches = {
 +		     DMI_MATCH(DMI_SYS_VENDOR, "LENOVO"),
 +		     DMI_MATCH(DMI_PRODUCT_VERSION, "20AACTO1WW"),
 +		},
 +	},
 +	{
 +	.callback = dmi_disable_osi_win8,
 +	.ident = "ThinkPad T430",
 +	.matches = {
 +		     DMI_MATCH(DMI_SYS_VENDOR, "LENOVO"),
 +		     DMI_MATCH(DMI_PRODUCT_VERSION, "2349D15"),
 +		},
 +	},
 +	{
 +	.callback = dmi_disable_osi_win8,
++=======
++>>>>>>> 6d6b20b2e949 (ACPI: move models with win8 brightness problems from win8 blacklist to use_native_backlight)
  	.ident = "Dell Inspiron 7737",
  	.matches = {
  		    DMI_MATCH(DMI_SYS_VENDOR, "Dell Inc."),
diff --cc drivers/acpi/video.c
index 81c28f7441f2,18c0e6920eb4..000000000000
--- a/drivers/acpi/video.c
+++ b/drivers/acpi/video.c
@@@ -439,19 -462,59 +439,72 @@@ static struct dmi_system_id video_dmi_t
  		},
  	},
  	{
++<<<<<<< HEAD
 +	 .callback = video_ignore_initial_backlight,
 +	 .ident = "HP Folio 13-2000",
++=======
+ 	 .callback = video_set_use_native_backlight,
+ 	 .ident = "ThinkPad X230",
+ 	 .matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "LENOVO"),
+ 		DMI_MATCH(DMI_PRODUCT_VERSION, "ThinkPad X230"),
+ 		},
+ 	},
+ 	{
+ 	 .callback = video_set_use_native_backlight,
+ 	 .ident = "ThinkPad T430 and T430s",
++>>>>>>> 6d6b20b2e949 (ACPI: move models with win8 brightness problems from win8 blacklist to use_native_backlight)
  	 .matches = {
 -		DMI_MATCH(DMI_SYS_VENDOR, "LENOVO"),
 -		DMI_MATCH(DMI_PRODUCT_VERSION, "ThinkPad T430"),
 +		DMI_MATCH(DMI_BOARD_VENDOR, "Hewlett-Packard"),
 +		DMI_MATCH(DMI_PRODUCT_NAME, "HP Folio 13 - 2000 Notebook PC"),
  		},
  	},
  	{
++<<<<<<< HEAD
 +	 .callback = video_ignore_initial_backlight,
 +	 .ident = "Fujitsu E753",
 +	 .matches = {
 +		DMI_MATCH(DMI_BOARD_VENDOR, "FUJITSU"),
 +		DMI_MATCH(DMI_PRODUCT_NAME, "LIFEBOOK E753"),
++=======
+ 	 .callback = video_set_use_native_backlight,
+ 	 .ident = "ThinkPad T430",
+ 	 .matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "LENOVO"),
+ 		DMI_MATCH(DMI_PRODUCT_VERSION, "2349D15"),
+ 		},
+ 	},
+ 	{
+ 	 .callback = video_set_use_native_backlight,
+ 	 .ident = "ThinkPad T431s",
+ 	 .matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "LENOVO"),
+ 		DMI_MATCH(DMI_PRODUCT_VERSION, "20AACTO1WW"),
+ 		},
+ 	},
+ 	{
+ 	 .callback = video_set_use_native_backlight,
+ 	 .ident = "ThinkPad Edge E530",
+ 	 .matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "LENOVO"),
+ 		DMI_MATCH(DMI_PRODUCT_VERSION, "3259A2G"),
+ 		},
+ 	},
+ 	{
+ 	 .callback = video_set_use_native_backlight,
+ 	 .ident = "ThinkPad Edge E530",
+ 	 .matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "LENOVO"),
+ 		DMI_MATCH(DMI_PRODUCT_VERSION, "3259CTO"),
+ 		},
+ 	},
+ 	{
+ 	 .callback = video_set_use_native_backlight,
+ 	 .ident = "ThinkPad Edge E530",
+ 	 .matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "LENOVO"),
+ 		DMI_MATCH(DMI_PRODUCT_VERSION, "3259HJG"),
++>>>>>>> 6d6b20b2e949 (ACPI: move models with win8 brightness problems from win8 blacklist to use_native_backlight)
  		},
  	},
  	{
@@@ -479,11 -550,165 +532,162 @@@
  		},
  	},
  	{
 -	.callback = video_set_use_native_backlight,
 -	.ident = "Thinkpad Helix",
 -	.matches = {
 -		DMI_MATCH(DMI_SYS_VENDOR, "LENOVO"),
 -		DMI_MATCH(DMI_PRODUCT_VERSION, "ThinkPad Helix"),
 -		},
 -	},
 -	{
 -	 .callback = video_set_use_native_backlight,
 -	 .ident = "Dell Inspiron 7520",
 +	 .callback = video_ignore_initial_backlight,
 +	 .ident = "HP Pavilion m4",
  	 .matches = {
++<<<<<<< HEAD
 +		DMI_MATCH(DMI_BOARD_VENDOR, "Hewlett-Packard"),
 +		DMI_MATCH(DMI_PRODUCT_NAME, "HP Pavilion m4 Notebook PC"),
++=======
+ 		DMI_MATCH(DMI_SYS_VENDOR, "Dell Inc."),
+ 		DMI_MATCH(DMI_PRODUCT_NAME, "Inspiron 7520"),
+ 		},
+ 	},
+ 	{
+ 	 .callback = video_set_use_native_backlight,
+ 	 .ident = "Acer Aspire 5733Z",
+ 	 .matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "Acer"),
+ 		DMI_MATCH(DMI_PRODUCT_NAME, "Aspire 5733Z"),
+ 		},
+ 	},
+ 	{
+ 	 .callback = video_set_use_native_backlight,
+ 	 .ident = "Acer Aspire 5742G",
+ 	 .matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "Acer"),
+ 		DMI_MATCH(DMI_PRODUCT_NAME, "Aspire 5742G"),
+ 		},
+ 	},
+ 	{
+ 	 .callback = video_set_use_native_backlight,
+ 	 .ident = "Acer Aspire V5-171",
+ 	 .matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "Acer"),
+ 		DMI_MATCH(DMI_PRODUCT_NAME, "V5-171"),
+ 		},
+ 	},
+ 	{
+ 	 .callback = video_set_use_native_backlight,
+ 	 .ident = "Acer Aspire V5-431",
+ 	 .matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "Acer"),
+ 		DMI_MATCH(DMI_PRODUCT_NAME, "Aspire V5-431"),
+ 		},
+ 	},
+ 	{
+ 	 .callback = video_set_use_native_backlight,
+ 	 .ident = "Acer Aspire V5-471G",
+ 	 .matches = {
+ 		DMI_MATCH(DMI_BOARD_VENDOR, "Acer"),
+ 		DMI_MATCH(DMI_PRODUCT_NAME, "Aspire V5-471G"),
+ 		},
+ 	},
+ 	{
+ 	 .callback = video_set_use_native_backlight,
+ 	 .ident = "Acer TravelMate B113",
+ 	 .matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "Acer"),
+ 		DMI_MATCH(DMI_PRODUCT_NAME, "TravelMate B113"),
+ 		},
+ 	},
+ 	{
+ 	 .callback = video_set_use_native_backlight,
+ 	 .ident = "Acer Aspire V5-572G",
+ 	 .matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "Acer Aspire"),
+ 		DMI_MATCH(DMI_PRODUCT_VERSION, "V5-572G/Dazzle_CX"),
+ 		},
+ 	},
+ 	{
+ 	 .callback = video_set_use_native_backlight,
+ 	 .ident = "Acer Aspire V5-573G",
+ 	 .matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "Acer Aspire"),
+ 		DMI_MATCH(DMI_PRODUCT_VERSION, "V5-573G/Dazzle_HW"),
+ 		},
+ 	},
+ 	{
+ 	 .callback = video_set_use_native_backlight,
+ 	 .ident = "ASUS Zenbook Prime UX31A",
+ 	 .matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "ASUSTeK COMPUTER INC."),
+ 		DMI_MATCH(DMI_PRODUCT_NAME, "UX31A"),
+ 		},
+ 	},
+ 	{
+ 	.callback = video_set_use_native_backlight,
+ 	.ident = "HP ProBook 4340s",
+ 	.matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "Hewlett-Packard"),
+ 		DMI_MATCH(DMI_PRODUCT_VERSION, "HP ProBook 4340s"),
+ 		},
+ 	},
+ 	{
+ 	.callback = video_set_use_native_backlight,
+ 	.ident = "HP ProBook 4540s",
+ 	.matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "Hewlett-Packard"),
+ 		DMI_MATCH(DMI_PRODUCT_VERSION, "HP ProBook 4540s"),
+ 		},
+ 	},
+ 	{
+ 	.callback = video_set_use_native_backlight,
+ 	.ident = "HP ProBook 2013 models",
+ 	.matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "Hewlett-Packard"),
+ 		DMI_MATCH(DMI_PRODUCT_NAME, "HP ProBook "),
+ 		DMI_MATCH(DMI_PRODUCT_NAME, " G1"),
+ 		},
+ 	},
+ 	{
+ 	.callback = video_set_use_native_backlight,
+ 	.ident = "HP EliteBook 2013 models",
+ 	.matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "Hewlett-Packard"),
+ 		DMI_MATCH(DMI_PRODUCT_NAME, "HP EliteBook "),
+ 		DMI_MATCH(DMI_PRODUCT_NAME, " G1"),
+ 		},
+ 	},
+ 	{
+ 	.callback = video_set_use_native_backlight,
+ 	.ident = "HP ZBook 14",
+ 	.matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "Hewlett-Packard"),
+ 		DMI_MATCH(DMI_PRODUCT_NAME, "HP ZBook 14"),
+ 		},
+ 	},
+ 	{
+ 	.callback = video_set_use_native_backlight,
+ 	.ident = "HP ZBook 15",
+ 	.matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "Hewlett-Packard"),
+ 		DMI_MATCH(DMI_PRODUCT_NAME, "HP ZBook 15"),
+ 		},
+ 	},
+ 	{
+ 	.callback = video_set_use_native_backlight,
+ 	.ident = "HP ZBook 17",
+ 	.matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "Hewlett-Packard"),
+ 		DMI_MATCH(DMI_PRODUCT_NAME, "HP ZBook 17"),
+ 		},
+ 	},
+ 	{
+ 	.callback = video_set_use_native_backlight,
+ 	.ident = "HP EliteBook 8470p",
+ 	.matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "Hewlett-Packard"),
+ 		DMI_MATCH(DMI_PRODUCT_NAME, "HP EliteBook 8470p"),
+ 		},
+ 	},
+ 	{
+ 	.callback = video_set_use_native_backlight,
+ 	.ident = "HP EliteBook 8780w",
+ 	.matches = {
+ 		DMI_MATCH(DMI_SYS_VENDOR, "Hewlett-Packard"),
+ 		DMI_MATCH(DMI_PRODUCT_NAME, "HP EliteBook 8780w"),
++>>>>>>> 6d6b20b2e949 (ACPI: move models with win8 brightness problems from win8 blacklist to use_native_backlight)
  		},
  	},
  	{}
* Unmerged path drivers/acpi/blacklist.c
* Unmerged path drivers/acpi/video.c
