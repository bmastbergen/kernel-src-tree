ixgbe: remove wait loop on autoneg for copper devices

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Emil Tantilov <emil.s.tantilov@intel.com>
commit 340c5203bc3158d6991dfe280f62ba7bd9584d62
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/340c5203.failed

This patch removes couple of wait loops on autoneg that are not needed.

During validation we noticed that the loops always time out, so there
should be no user impact.

	Signed-off-by: Emil Tantilov <emil.s.tantilov@intel.com>
	Tested-by: Phil Schmitt <phillip.j.schmitt@intel.com>
	Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
(cherry picked from commit 340c5203bc3158d6991dfe280f62ba7bd9584d62)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/intel/ixgbe/ixgbe_phy.c
diff --cc drivers/net/ethernet/intel/ixgbe/ixgbe_phy.c
index 32455da40d21,d47b19f27c35..000000000000
--- a/drivers/net/ethernet/intel/ixgbe/ixgbe_phy.c
+++ b/drivers/net/ethernet/intel/ixgbe/ixgbe_phy.c
@@@ -705,25 -512,6 +703,28 @@@ s32 ixgbe_setup_phy_link_generic(struc
  	hw->phy.ops.write_reg(hw, MDIO_CTRL1,
  			      MDIO_MMD_AN, autoneg_reg);
  
++<<<<<<< HEAD
 +	/* Wait for autonegotiation to finish */
 +	for (time_out = 0; time_out < max_time_out; time_out++) {
 +		udelay(10);
 +		/* Restart PHY autonegotiation and wait for completion */
 +		status = hw->phy.ops.read_reg(hw, MDIO_STAT1,
 +					      MDIO_MMD_AN,
 +					      &autoneg_reg);
 +
 +		autoneg_reg &= MDIO_AN_STAT1_COMPLETE;
 +		if (autoneg_reg == MDIO_AN_STAT1_COMPLETE) {
 +			break;
 +		}
 +	}
 +
 +	if (time_out == max_time_out) {
 +		status = IXGBE_ERR_LINK_SETUP;
 +		hw_dbg(hw, "ixgbe_setup_phy_link_generic: time out\n");
 +	}
 +
++=======
++>>>>>>> 340c5203bc31 (ixgbe: remove wait loop on autoneg for copper devices)
  	return status;
  }
  
@@@ -854,9 -635,7 +855,13 @@@ s32 ixgbe_check_phy_link_tnx(struct ixg
   **/
  s32 ixgbe_setup_phy_link_tnx(struct ixgbe_hw *hw)
  {
++<<<<<<< HEAD
 +	s32 status = 0;
 +	u32 time_out;
 +	u32 max_time_out = 10;
++=======
+ 	s32 status;
++>>>>>>> 340c5203bc31 (ixgbe: remove wait loop on autoneg for copper devices)
  	u16 autoneg_reg = IXGBE_MII_AUTONEG_REG;
  	bool autoneg = false;
  	ixgbe_link_speed speed;
@@@ -922,24 -701,6 +927,27 @@@
  	hw->phy.ops.write_reg(hw, MDIO_CTRL1,
  			      MDIO_MMD_AN, autoneg_reg);
  
++<<<<<<< HEAD
 +	/* Wait for autonegotiation to finish */
 +	for (time_out = 0; time_out < max_time_out; time_out++) {
 +		udelay(10);
 +		/* Restart PHY autonegotiation and wait for completion */
 +		status = hw->phy.ops.read_reg(hw, MDIO_STAT1,
 +					      MDIO_MMD_AN,
 +					      &autoneg_reg);
 +
 +		autoneg_reg &= MDIO_AN_STAT1_COMPLETE;
 +		if (autoneg_reg == MDIO_AN_STAT1_COMPLETE)
 +			break;
 +	}
 +
 +	if (time_out == max_time_out) {
 +		status = IXGBE_ERR_LINK_SETUP;
 +		hw_dbg(hw, "ixgbe_setup_phy_link_tnx: time out\n");
 +	}
 +
++=======
++>>>>>>> 340c5203bc31 (ixgbe: remove wait loop on autoneg for copper devices)
  	return status;
  }
  
* Unmerged path drivers/net/ethernet/intel/ixgbe/ixgbe_phy.c
