cxgb4: Firmware macro changes for fw verison 1.13.32.0

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Hariprasad Shenai <hariprasad@chelsio.com>
commit 7ef65a42111270f343b26673c10e48180871326b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/7ef65a42.failed

Adds new macro and few macro changes for fw version 1.13.32.0 also
changes version string in driver to match 1.13.32.0

	Signed-off-by: Hariprasad Shenai <hariprasad@chelsio.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 7ef65a42111270f343b26673c10e48180871326b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/chelsio/cxgb4/t4fw_api.h
#	drivers/net/ethernet/mellanox/mlx5/core/vport.h
diff --cc drivers/net/ethernet/chelsio/cxgb4/t4fw_api.h
index 6e8a06e7cea8,a4a19e0ec7f5..000000000000
--- a/drivers/net/ethernet/chelsio/cxgb4/t4fw_api.h
+++ b/drivers/net/ethernet/chelsio/cxgb4/t4fw_api.h
@@@ -2271,4 -3061,117 +2273,120 @@@ enum fw_hdr_flags 
  	FW_HDR_FLAGS_RESET_HALT = 0x00000001,
  };
  
++<<<<<<< HEAD
++=======
+ /* length of the formatting string  */
+ #define FW_DEVLOG_FMT_LEN	192
+ 
+ /* maximum number of the formatting string parameters */
+ #define FW_DEVLOG_FMT_PARAMS_NUM 8
+ 
+ /* priority levels */
+ enum fw_devlog_level {
+ 	FW_DEVLOG_LEVEL_EMERG	= 0x0,
+ 	FW_DEVLOG_LEVEL_CRIT	= 0x1,
+ 	FW_DEVLOG_LEVEL_ERR	= 0x2,
+ 	FW_DEVLOG_LEVEL_NOTICE	= 0x3,
+ 	FW_DEVLOG_LEVEL_INFO	= 0x4,
+ 	FW_DEVLOG_LEVEL_DEBUG	= 0x5,
+ 	FW_DEVLOG_LEVEL_MAX	= 0x5,
+ };
+ 
+ /* facilities that may send a log message */
+ enum fw_devlog_facility {
+ 	FW_DEVLOG_FACILITY_CORE		= 0x00,
+ 	FW_DEVLOG_FACILITY_CF		= 0x01,
+ 	FW_DEVLOG_FACILITY_SCHED	= 0x02,
+ 	FW_DEVLOG_FACILITY_TIMER	= 0x04,
+ 	FW_DEVLOG_FACILITY_RES		= 0x06,
+ 	FW_DEVLOG_FACILITY_HW		= 0x08,
+ 	FW_DEVLOG_FACILITY_FLR		= 0x10,
+ 	FW_DEVLOG_FACILITY_DMAQ		= 0x12,
+ 	FW_DEVLOG_FACILITY_PHY		= 0x14,
+ 	FW_DEVLOG_FACILITY_MAC		= 0x16,
+ 	FW_DEVLOG_FACILITY_PORT		= 0x18,
+ 	FW_DEVLOG_FACILITY_VI		= 0x1A,
+ 	FW_DEVLOG_FACILITY_FILTER	= 0x1C,
+ 	FW_DEVLOG_FACILITY_ACL		= 0x1E,
+ 	FW_DEVLOG_FACILITY_TM		= 0x20,
+ 	FW_DEVLOG_FACILITY_QFC		= 0x22,
+ 	FW_DEVLOG_FACILITY_DCB		= 0x24,
+ 	FW_DEVLOG_FACILITY_ETH		= 0x26,
+ 	FW_DEVLOG_FACILITY_OFLD		= 0x28,
+ 	FW_DEVLOG_FACILITY_RI		= 0x2A,
+ 	FW_DEVLOG_FACILITY_ISCSI	= 0x2C,
+ 	FW_DEVLOG_FACILITY_FCOE		= 0x2E,
+ 	FW_DEVLOG_FACILITY_FOISCSI	= 0x30,
+ 	FW_DEVLOG_FACILITY_FOFCOE	= 0x32,
+ 	FW_DEVLOG_FACILITY_CHNET        = 0x34,
+ 	FW_DEVLOG_FACILITY_MAX          = 0x34,
+ };
+ 
+ /* log message format */
+ struct fw_devlog_e {
+ 	__be64	timestamp;
+ 	__be32	seqno;
+ 	__be16	reserved1;
+ 	__u8	level;
+ 	__u8	facility;
+ 	__u8	fmt[FW_DEVLOG_FMT_LEN];
+ 	__be32	params[FW_DEVLOG_FMT_PARAMS_NUM];
+ 	__be32	reserved3[4];
+ };
+ 
+ struct fw_devlog_cmd {
+ 	__be32 op_to_write;
+ 	__be32 retval_len16;
+ 	__u8   level;
+ 	__u8   r2[7];
+ 	__be32 memtype_devlog_memaddr16_devlog;
+ 	__be32 memsize_devlog;
+ 	__be32 r3[2];
+ };
+ 
+ #define FW_DEVLOG_CMD_MEMTYPE_DEVLOG_S		28
+ #define FW_DEVLOG_CMD_MEMTYPE_DEVLOG_M		0xf
+ #define FW_DEVLOG_CMD_MEMTYPE_DEVLOG_G(x)	\
+ 	(((x) >> FW_DEVLOG_CMD_MEMTYPE_DEVLOG_S) & \
+ 	 FW_DEVLOG_CMD_MEMTYPE_DEVLOG_M)
+ 
+ #define FW_DEVLOG_CMD_MEMADDR16_DEVLOG_S	0
+ #define FW_DEVLOG_CMD_MEMADDR16_DEVLOG_M	0xfffffff
+ #define FW_DEVLOG_CMD_MEMADDR16_DEVLOG_G(x)	\
+ 	(((x) >> FW_DEVLOG_CMD_MEMADDR16_DEVLOG_S) & \
+ 	 FW_DEVLOG_CMD_MEMADDR16_DEVLOG_M)
+ 
+ /* P C I E   F W   P F 7   R E G I S T E R */
+ 
+ /* PF7 stores the Firmware Device Log parameters which allows Host Drivers to
+  * access the "devlog" which needing to contact firmware.  The encoding is
+  * mostly the same as that returned by the DEVLOG command except for the size
+  * which is encoded as the number of entries in multiples-1 of 128 here rather
+  * than the memory size as is done in the DEVLOG command.  Thus, 0 means 128
+  * and 15 means 2048.  This of course in turn constrains the allowed values
+  * for the devlog size ...
+  */
+ #define PCIE_FW_PF_DEVLOG		7
+ 
+ #define PCIE_FW_PF_DEVLOG_NENTRIES128_S	28
+ #define PCIE_FW_PF_DEVLOG_NENTRIES128_M	0xf
+ #define PCIE_FW_PF_DEVLOG_NENTRIES128_V(x) \
+ 	((x) << PCIE_FW_PF_DEVLOG_NENTRIES128_S)
+ #define PCIE_FW_PF_DEVLOG_NENTRIES128_G(x) \
+ 	(((x) >> PCIE_FW_PF_DEVLOG_NENTRIES128_S) & \
+ 	 PCIE_FW_PF_DEVLOG_NENTRIES128_M)
+ 
+ #define PCIE_FW_PF_DEVLOG_ADDR16_S	4
+ #define PCIE_FW_PF_DEVLOG_ADDR16_M	0xffffff
+ #define PCIE_FW_PF_DEVLOG_ADDR16_V(x)	((x) << PCIE_FW_PF_DEVLOG_ADDR16_S)
+ #define PCIE_FW_PF_DEVLOG_ADDR16_G(x) \
+ 	(((x) >> PCIE_FW_PF_DEVLOG_ADDR16_S) & PCIE_FW_PF_DEVLOG_ADDR16_M)
+ 
+ #define PCIE_FW_PF_DEVLOG_MEMTYPE_S	0
+ #define PCIE_FW_PF_DEVLOG_MEMTYPE_M	0xf
+ #define PCIE_FW_PF_DEVLOG_MEMTYPE_V(x)	((x) << PCIE_FW_PF_DEVLOG_MEMTYPE_S)
+ #define PCIE_FW_PF_DEVLOG_MEMTYPE_G(x) \
+ 	(((x) >> PCIE_FW_PF_DEVLOG_MEMTYPE_S) & PCIE_FW_PF_DEVLOG_MEMTYPE_M)
+ 
++>>>>>>> 7ef65a421112 (cxgb4: Firmware macro changes for fw verison 1.13.32.0)
  #endif /* _T4FW_INTERFACE_H_ */
diff --cc drivers/net/ethernet/mellanox/mlx5/core/vport.h
index c05ca2c3419d,b9d1cbac0eee..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/vport.h
+++ b/drivers/net/ethernet/mellanox/mlx5/core/vport.h
@@@ -30,12 -32,17 +30,24 @@@
   * SOFTWARE.
   */
  
 -#ifndef __T4FW_VERSION_H__
 -#define __T4FW_VERSION_H__
 +#ifndef __MLX5_VPORT_H__
 +#define __MLX5_VPORT_H__
 +
++<<<<<<< HEAD:drivers/net/ethernet/mellanox/mlx5/core/vport.h
 +#include <linux/mlx5/driver.h>
  
 +u8 mlx5_query_vport_state(struct mlx5_core_dev *mdev, u8 opmod);
 +void mlx5_query_vport_mac_address(struct mlx5_core_dev *mdev, u8 *addr);
++=======
+ #define T4FW_VERSION_MAJOR 0x01
+ #define T4FW_VERSION_MINOR 0x0D
+ #define T4FW_VERSION_MICRO 0x20
+ #define T4FW_VERSION_BUILD 0x00
+ 
+ #define T5FW_VERSION_MAJOR 0x01
+ #define T5FW_VERSION_MINOR 0x0D
+ #define T5FW_VERSION_MICRO 0x20
+ #define T5FW_VERSION_BUILD 0x00
++>>>>>>> 7ef65a421112 (cxgb4: Firmware macro changes for fw verison 1.13.32.0):drivers/net/ethernet/chelsio/cxgb4/t4fw_version.h
  
 -#endif
 +#endif /* __MLX5_VPORT_H__ */
* Unmerged path drivers/net/ethernet/chelsio/cxgb4/t4fw_api.h
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/vport.h
