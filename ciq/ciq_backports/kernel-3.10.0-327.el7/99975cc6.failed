vhost/net: length miscalculation

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
Rebuild_CHGLOG: - [vhost] net: length miscalculation (Thomas Huth) [1231879]
Rebuild_FUZZ: 89.66%
commit-author Michael S. Tsirkin <mst@redhat.com>
commit 99975cc6ada0d5f2675e83abecae05aba5f437d2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/99975cc6.failed

commit 8b38694a2dc8b18374310df50174f1e4376d6824
    vhost/net: virtio 1.0 byte swap
had this chunk:
-       heads[headcount - 1].len += datalen;
+       heads[headcount - 1].len = cpu_to_vhost32(vq, len - datalen);

This adds datalen with the wrong sign, causing guest panics.

Fixes: 8b38694a2dc8b18374310df50174f1e4376d6824
	Reported-by: Alex Williamson <alex.williamson@redhat.com>
	Suggested-by: Greg Kurz <gkurz@linux.vnet.ibm.com>
	Signed-off-by: Michael S. Tsirkin <mst@redhat.com>
(cherry picked from commit 99975cc6ada0d5f2675e83abecae05aba5f437d2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/vhost/net.c
diff --cc drivers/vhost/net.c
index 51ea9ae5fb91,d415d69dc237..000000000000
--- a/drivers/vhost/net.c
+++ b/drivers/vhost/net.c
@@@ -539,7 -538,7 +539,11 @@@ static int get_rx_bufs(struct vhost_vir
  		++headcount;
  		seg += in;
  	}
++<<<<<<< HEAD
 +	heads[headcount - 1].len += datalen;
++=======
+ 	heads[headcount - 1].len = cpu_to_vhost32(vq, len + datalen);
++>>>>>>> 99975cc6ada0 (vhost/net: length miscalculation)
  	*iovcount = seg;
  	if (unlikely(log))
  		*log_num = nlogs;
* Unmerged path drivers/vhost/net.c
