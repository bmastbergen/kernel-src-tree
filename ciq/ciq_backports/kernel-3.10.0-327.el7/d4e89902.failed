lockd: Do not start the lockd thread before we've set nlmsvc_rqst->rq_task

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-327.el7
commit-author Trond Myklebust <trond.myklebust@primarydata.com>
commit d4e89902990e3fae1b8d2ca501d2fa5f0657c053
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-327.el7/d4e89902.failed

This fixes an Oopsable race when starting lockd.

	Signed-off-by: Trond Myklebust <trond.myklebust@primarydata.com>
	Reviewed-by: Jeff Layton <jlayton@primarydata.com>
	Signed-off-by: J. Bruce Fields <bfields@redhat.com>
(cherry picked from commit d4e89902990e3fae1b8d2ca501d2fa5f0657c053)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/lockd/svc.c
diff --cc fs/lockd/svc.c
index 17722d5c9f52,09857b48d0c3..000000000000
--- a/fs/lockd/svc.c
+++ b/fs/lockd/svc.c
@@@ -302,7 -306,7 +302,11 @@@ static int lockd_start_svc(struct svc_s
  	svc_sock_update_bufs(serv);
  	serv->sv_maxconn = nlm_max_connections;
  
++<<<<<<< HEAD
 +	nlmsvc_task = kthread_run(lockd, nlmsvc_rqst, serv->sv_name);
++=======
+ 	nlmsvc_task = kthread_create(lockd, nlmsvc_rqst, "%s", serv->sv_name);
++>>>>>>> d4e89902990e (lockd: Do not start the lockd thread before we've set nlmsvc_rqst->rq_task)
  	if (IS_ERR(nlmsvc_task)) {
  		error = PTR_ERR(nlmsvc_task);
  		printk(KERN_WARNING
* Unmerged path fs/lockd/svc.c
