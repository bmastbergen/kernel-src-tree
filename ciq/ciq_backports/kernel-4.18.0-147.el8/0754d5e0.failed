scsi: qla2xxx: Decrement login retry count for only plogi

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Quinn Tran <quinn.tran@cavium.com>
commit 0754d5e003bccaf30ebb2a75db2017d68696fdd5
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/0754d5e0.failed

Decrement login retry count only for plogi instead of number of attempts made
for login.

	Signed-off-by: Quinn Tran <quinn.tran@cavium.com>
	Signed-off-by: Himanshu Madhani <himanshu.madhani@cavium.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit 0754d5e003bccaf30ebb2a75db2017d68696fdd5)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/qla2xxx/qla_init.c
diff --cc drivers/scsi/qla2xxx/qla_init.c
index 725440bc10cc,0f069eb06d8b..000000000000
--- a/drivers/scsi/qla2xxx/qla_init.c
+++ b/drivers/scsi/qla2xxx/qla_init.c
@@@ -1174,9 -1301,10 +1175,9 @@@ int qla24xx_fcport_handle_login(struct 
  {
  	u16 data[2];
  	u64 wwn;
 -	u16 sec;
  
- 	ql_dbg(ql_dbg_disc, vha, 0x20d8,
- 	    "%s %8phC DS %d LS %d P %d fl %x confl %p rscn %d|%d login %d retry %d lid %d scan %d\n",
+ 	ql_dbg(ql_dbg_disc + ql_dbg_verbose, vha, 0x20d8,
+ 	    "%s %8phC DS %d LS %d P %d fl %x confl %p rscn %d|%d login %d lid %d scan %d\n",
  	    __func__, fcport->port_name, fcport->disc_state,
  	    fcport->fw_login_state, fcport->login_pause, fcport->flags,
  	    fcport->conflict, fcport->last_rscn_gen, fcport->rscn_gen,
@@@ -1240,9 -1407,6 +1240,12 @@@
  		break;
  
  	case DSC_LOGIN_FAILED:
++<<<<<<< HEAD
 +		ql_dbg(ql_dbg_disc, vha, 0x20d0,
 +		    "%s %d %8phC post gidpn\n",
 +		    __func__, __LINE__, fcport->port_name);
++=======
++>>>>>>> 0754d5e003bc (scsi: qla2xxx: Decrement login retry count for only plogi)
  		if (N2N_TOPO(vha->hw))
  			qla_chk_n2n_b4_login(vha, fcport);
  		else
@@@ -1251,9 -1415,6 +1254,12 @@@
  
  	case DSC_LOGIN_COMPLETE:
  		/* recheck login state */
++<<<<<<< HEAD
 +		ql_dbg(ql_dbg_disc, vha, 0x20d1,
 +		    "%s %d %8phC post adisc\n",
 +		    __func__, __LINE__, fcport->port_name);
++=======
++>>>>>>> 0754d5e003bc (scsi: qla2xxx: Decrement login retry count for only plogi)
  		data[0] = data[1] = 0;
  		qla2x00_post_async_adisc_work(vha, fcport, data);
  		break;
* Unmerged path drivers/scsi/qla2xxx/qla_init.c
