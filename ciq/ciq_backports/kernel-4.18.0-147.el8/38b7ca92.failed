net/mlx5: Expose DEVX specification

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Yishai Hadas <yishaih@mellanox.com>
commit 38b7ca927d6a12bf4466be22a90b7d998f5ae69a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/38b7ca92.failed

This patch updates the mlx5_ifc structures and
command interface to support DEVX.

	Signed-off-by: Yishai Hadas <yishaih@mellanox.com>
	Signed-off-by: Leon Romanovsky <leonro@mellanox.com>
(cherry picked from commit 38b7ca927d6a12bf4466be22a90b7d998f5ae69a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/cmd.c
#	include/linux/mlx5/mlx5_ifc.h
diff --cc drivers/net/ethernet/mellanox/mlx5/core/cmd.c
index d3a810d93371,d07f24de8fa3..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/cmd.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/cmd.c
@@@ -310,7 -310,7 +310,11 @@@ static int mlx5_internal_err_ret_value(
  	case MLX5_CMD_OP_DEALLOC_ENCAP_HEADER:
  	case MLX5_CMD_OP_DEALLOC_MODIFY_HEADER_CONTEXT:
  	case MLX5_CMD_OP_FPGA_DESTROY_QP:
++<<<<<<< HEAD
 +	case MLX5_CMD_OP_PAGE_FAULT_RESUME:
++=======
+ 	case MLX5_CMD_OP_DESTROY_GENERAL_OBJECT:
++>>>>>>> 38b7ca927d6a (net/mlx5: Expose DEVX specification)
  		return MLX5_CMD_STAT_OK;
  
  	case MLX5_CMD_OP_QUERY_HCA_CAP:
diff --cc include/linux/mlx5/mlx5_ifc.h
index bc876942bbaf,f810772e80c0..000000000000
--- a/include/linux/mlx5/mlx5_ifc.h
+++ b/include/linux/mlx5/mlx5_ifc.h
@@@ -1116,10 -1124,9 +1127,16 @@@ struct mlx5_ifc_cmd_hca_cap_bits 
  	u8         reserved_at_3f8[0x3];
  	u8         log_max_current_uc_list[0x5];
  
++<<<<<<< HEAD
 +	u8         reserved_at_400[0x60];
 +
 +	u8         reserved_at_460[0x10];
 +	u8         max_num_eqs[0x10];
++=======
+ 	u8         general_obj_types[0x40];
+ 
+ 	u8         reserved_at_440[0x40];
++>>>>>>> 38b7ca927d6a (net/mlx5: Expose DEVX specification)
  
  	u8         reserved_at_480[0x3];
  	u8         log_max_l2_table[0x5];
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/cmd.c
diff --git a/include/linux/mlx5/device.h b/include/linux/mlx5/device.h
index 3a6461cdd4b3..36526e6704c5 100644
--- a/include/linux/mlx5/device.h
+++ b/include/linux/mlx5/device.h
@@ -1082,6 +1082,9 @@ enum mlx5_qcam_feature_groups {
 #define MLX5_CAP_GEN(mdev, cap) \
 	MLX5_GET(cmd_hca_cap, mdev->caps.hca_cur[MLX5_CAP_GENERAL], cap)
 
+#define MLX5_CAP_GEN_64(mdev, cap) \
+	MLX5_GET64(cmd_hca_cap, mdev->caps.hca_cur[MLX5_CAP_GENERAL], cap)
+
 #define MLX5_CAP_GEN_MAX(mdev, cap) \
 	MLX5_GET(cmd_hca_cap, mdev->caps.hca_max[MLX5_CAP_GENERAL], cap)
 
* Unmerged path include/linux/mlx5/mlx5_ifc.h
