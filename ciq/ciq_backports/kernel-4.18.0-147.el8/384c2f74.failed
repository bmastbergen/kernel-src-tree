mlxsw: spectrum_flower: Fix VLAN modify action support

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Ido Schimmel <idosch@mellanox.com>
commit 384c2f7473bc4f6b25f62060ab4d5985726bb12d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/384c2f74.failed

The driver does not support VLAN push and pop, but only VLAN modify.

Fixes: 738678817573 ("drivers: net: use flow action infrastructure")
	Signed-off-by: Ido Schimmel <idosch@mellanox.com>
	Acked-by: Jiri Pirko <jiri@mellanox.com>
	Cc: Pablo Neira Ayuso <pablo@netfilter.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 384c2f7473bc4f6b25f62060ab4d5985726bb12d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlxsw/spectrum_flower.c
diff --cc drivers/net/ethernet/mellanox/mlxsw/spectrum_flower.c
index ff072358d950,15f804453cd6..000000000000
--- a/drivers/net/ethernet/mellanox/mlxsw/spectrum_flower.c
+++ b/drivers/net/ethernet/mellanox/mlxsw/spectrum_flower.c
@@@ -92,16 -100,18 +92,25 @@@ static int mlxsw_sp_flower_parse_action
  							    extack);
  			if (err)
  				return err;
++<<<<<<< HEAD
 +		} else if (is_tcf_vlan(a)) {
 +			u16 proto = be16_to_cpu(tcf_vlan_push_proto(a));
 +			u32 action = tcf_vlan_action(a);
 +			u8 prio = tcf_vlan_push_prio(a);
 +			u16 vid = tcf_vlan_push_vid(a);
++=======
+ 			}
+ 			break;
+ 		case FLOW_ACTION_VLAN_MANGLE: {
+ 			u16 proto = be16_to_cpu(act->vlan.proto);
+ 			u8 prio = act->vlan.prio;
+ 			u16 vid = act->vlan.vid;
++>>>>>>> 384c2f7473bc (mlxsw: spectrum_flower: Fix VLAN modify action support)
  
  			return mlxsw_sp_acl_rulei_act_vlan(mlxsw_sp, rulei,
 -							   act->id, vid,
 +							   action, vid,
  							   proto, prio, extack);
 -			}
 -		default:
 +		} else {
  			NL_SET_ERR_MSG_MOD(extack, "Unsupported action");
  			dev_err(mlxsw_sp->bus_info->dev, "Unsupported action\n");
  			return -EOPNOTSUPP;
* Unmerged path drivers/net/ethernet/mellanox/mlxsw/spectrum_flower.c
