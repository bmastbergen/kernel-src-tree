net/mlx5e: Annul encap action ordering requirement

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Eli Britstein <elibr@mellanox.com>
commit a18e879d4e45b6aef73f42c765cd0da4b26f4260
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/a18e879d.failed

Currently a FW syndrome is emitted if the driver configures a
multi-destination FTE where the first destination is a tunneled uplink
port and the second destination is a local vPort.

Support this scenario by creating a multi-destination FTE using the
firmware's extended destination capabilities.

	Signed-off-by: Eli Britstein <elibr@mellanox.com>
	Reviewed-by: Oz Shlomo <ozsh@mellanox.com>
	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
(cherry picked from commit a18e879d4e45b6aef73f42c765cd0da4b26f4260)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c
index 828174ece8e4,bb96c4661e26..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c
@@@ -123,6 -128,12 +123,15 @@@ mlx5_eswitch_add_offloaded_rule(struct 
  				if (MLX5_CAP_ESW(esw->dev, merged_eswitch))
  					dest[i].vport.flags |=
  						MLX5_FLOW_DEST_VPORT_VHCA_ID;
++<<<<<<< HEAD
++=======
+ 				if (attr->dests[j].flags & MLX5_ESW_DEST_ENCAP) {
+ 					flow_act.action |= MLX5_FLOW_CONTEXT_ACTION_PACKET_REFORMAT;
+ 					flow_act.reformat_id = attr->encap_id;
+ 					dest[i].vport.flags |= MLX5_FLOW_DEST_VPORT_REFORMAT_ID;
+ 					dest[i].vport.reformat_id = attr->encap_id;
+ 				}
++>>>>>>> a18e879d4e45 (net/mlx5e: Annul encap action ordering requirement)
  				i++;
  			}
  		}
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c
