net: phy: Fix ioctl handler when modifing MII_ADVERTISE

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
Rebuild_CHGLOG: - [netdrv] phy: Fix ioctl handler when modifing MII_ADVERTISE (Petr Oros) [1691676]
Rebuild_FUZZ: 95.24%
commit-author Andrew Lunn <andrew@lunn.ch>
commit 9db299c736eea35ea97dbc9d80a58befc067bcd8
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/9db299c7.failed

When the MII_ADVERTISE register is modified by the IOCTL handler,
phydev->advertising needs recalculating. Use the _mod_ variant of
mii_adv_to_linkmode_adv_t so that bits outside of the advertise
registers are not cleared.

Fixes: c0ec3c273677 ("net: phy: Convert u32 phydev->lp_advertising to linkmode")
	Reported-by: Heiner Kallweit <hkallweit1@gmail.com>
	Signed-off-by: Andrew Lunn <andrew@lunn.ch>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 9db299c736eea35ea97dbc9d80a58befc067bcd8)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/phy/phy.c
diff --cc drivers/net/phy/phy.c
index c26a6cf13ef9,e24708f1fc16..000000000000
--- a/drivers/net/phy/phy.c
+++ b/drivers/net/phy/phy.c
@@@ -434,7 -437,8 +434,12 @@@ int phy_mii_ioctl(struct phy_device *ph
  				}
  				break;
  			case MII_ADVERTISE:
++<<<<<<< HEAD
 +				phydev->advertising = mii_adv_to_ethtool_adv_t(val);
++=======
+ 				mii_adv_mod_linkmode_adv_t(phydev->advertising,
+ 							   val);
++>>>>>>> 9db299c736ee (net: phy: Fix ioctl handler when modifing MII_ADVERTISE)
  				change_autoneg = true;
  				break;
  			default:
* Unmerged path drivers/net/phy/phy.c
