drm/i915: Turn off the CUS when turning off a HDR plane

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Ville Syrj채l채 <ville.syrjala@linux.intel.com>
commit 7c1200456cb0859fba27927feb8322929a4fad83
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/7c120045.failed

We're currently leaving the CUS enabled if we disable the
master plane directly after scanning out NV12.

Could perhaps cause the selected slave plane to misbehave
if we try to use it for scanning out something non-NV12?

	Signed-off-by: Ville Syrj채l채 <ville.syrjala@linux.intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20190315195445.26527-2-ville.syrjala@linux.intel.com
	Reviewed-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=110032
(cherry picked from commit 7c1200456cb0859fba27927feb8322929a4fad83)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/intel_sprite.c
diff --cc drivers/gpu/drm/i915/intel_sprite.c
index ee23613f9fd4,268fb34ff0e2..000000000000
--- a/drivers/gpu/drm/i915/intel_sprite.c
+++ b/drivers/gpu/drm/i915/intel_sprite.c
@@@ -318,10 -622,13 +318,18 @@@ skl_disable_plane(struct intel_plane *p
  
  	spin_lock_irqsave(&dev_priv->uncore.lock, irqflags);
  
++<<<<<<< HEAD
++=======
+ 	if (icl_is_hdr_plane(dev_priv, plane_id))
+ 		I915_WRITE_FW(PLANE_CUS_CTL(pipe, plane_id), 0);
+ 
+ 	skl_write_plane_wm(plane, crtc_state);
+ 
++>>>>>>> 7c1200456cb0 (drm/i915: Turn off the CUS when turning off a HDR plane)
  	I915_WRITE_FW(PLANE_CTL(pipe, plane_id), 0);
 +
  	I915_WRITE_FW(PLANE_SURF(pipe, plane_id), 0);
 +	POSTING_READ_FW(PLANE_SURF(pipe, plane_id));
  
  	spin_unlock_irqrestore(&dev_priv->uncore.lock, irqflags);
  }
* Unmerged path drivers/gpu/drm/i915/intel_sprite.c
