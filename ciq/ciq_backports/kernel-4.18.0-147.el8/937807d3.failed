tools/power turbostat: Add Icelake support

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Len Brown <len.brown@intel.com>
commit 937807d355a375393557674e3233662a7131c46b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/937807d3.failed

From a turbostat point of view, Iceland is like Cannonlake.

	Signed-off-by: Len Brown <len.brown@intel.com>
(cherry picked from commit 937807d355a375393557674e3233662a7131c46b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/power/x86/turbostat/turbostat.c
diff --cc tools/power/x86/turbostat/turbostat.c
index 83964f796edb,4f81b52aef84..000000000000
--- a/tools/power/x86/turbostat/turbostat.c
+++ b/tools/power/x86/turbostat/turbostat.c
@@@ -4436,10 -4416,49 +4436,52 @@@ void decode_c6_demotion_policy_msr(void
  			base_cpu, msr, msr & (1 << 0) ? "EN" : "DIS");
  }
  
++<<<<<<< HEAD
++=======
+ /*
+  * When models are the same, for the purpose of turbostat, reuse
+  */
+ unsigned int intel_model_duplicates(unsigned int model)
+ {
+ 
+ 	switch(model) {
+ 	case INTEL_FAM6_NEHALEM_EP:	/* Core i7, Xeon 5500 series - Bloomfield, Gainstown NHM-EP */
+ 	case INTEL_FAM6_NEHALEM:	/* Core i7 and i5 Processor - Clarksfield, Lynnfield, Jasper Forest */
+ 	case 0x1F:	/* Core i7 and i5 Processor - Nehalem */
+ 	case INTEL_FAM6_WESTMERE:	/* Westmere Client - Clarkdale, Arrandale */
+ 	case INTEL_FAM6_WESTMERE_EP:	/* Westmere EP - Gulftown */
+ 		return INTEL_FAM6_NEHALEM;
+ 
+ 	case INTEL_FAM6_NEHALEM_EX:	/* Nehalem-EX Xeon - Beckton */
+ 	case INTEL_FAM6_WESTMERE_EX:	/* Westmere-EX Xeon - Eagleton */
+ 		return INTEL_FAM6_NEHALEM_EX;
+ 
+ 	case INTEL_FAM6_XEON_PHI_KNM:
+ 		return INTEL_FAM6_XEON_PHI_KNL;
+ 
+ 	case INTEL_FAM6_HASWELL_ULT:
+ 		return INTEL_FAM6_HASWELL_CORE;
+ 
+ 	case INTEL_FAM6_BROADWELL_X:
+ 	case INTEL_FAM6_BROADWELL_XEON_D:	/* BDX-DE */
+ 		return INTEL_FAM6_BROADWELL_X;
+ 
+ 	case INTEL_FAM6_SKYLAKE_MOBILE:
+ 	case INTEL_FAM6_SKYLAKE_DESKTOP:
+ 	case INTEL_FAM6_KABYLAKE_MOBILE:
+ 	case INTEL_FAM6_KABYLAKE_DESKTOP:
+ 		return INTEL_FAM6_SKYLAKE_MOBILE;
+ 
+ 	case INTEL_FAM6_ICELAKE_MOBILE:
+ 		return INTEL_FAM6_CANNONLAKE_MOBILE;
+ 	}
+ 	return model;
+ }
++>>>>>>> 937807d355a3 (tools/power turbostat: Add Icelake support)
  void process_cpuid()
  {
 -	unsigned int eax, ebx, ecx, edx;
 -	unsigned int fms, family, model, stepping, ecx_flags, edx_flags;
 +	unsigned int eax, ebx, ecx, edx, max_level, max_extended_level;
 +	unsigned int fms, family, model, stepping;
  	unsigned int has_turbo;
  
  	eax = ebx = ecx = edx = 0;
* Unmerged path tools/power/x86/turbostat/turbostat.c
