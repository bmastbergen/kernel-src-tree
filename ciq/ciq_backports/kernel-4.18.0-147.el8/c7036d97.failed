ipv6: Default fib6_type to RTN_UNICAST when not set

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author David Ahern <dsahern@gmail.com>
commit c7036d97acd2527cef145b5ef9ad1a37ed21bbe6
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/c7036d97.failed

A user reported that routes are getting installed with type 0 (RTN_UNSPEC)
where before the routes were RTN_UNICAST. One example is from accel-ppp
which apparently still uses the ioctl interface and does not set
rtmsg_type. Another is the netlink interface where ipv6 does not require
rtm_type to be set (v4 does). Prior to the commit in the Fixes tag the
ipv6 stack converted type 0 to RTN_UNICAST, so restore that behavior.

Fixes: e8478e80e5a7 ("net/ipv6: Save route type in rt6_info")
	Signed-off-by: David Ahern <dsahern@gmail.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit c7036d97acd2527cef145b5ef9ad1a37ed21bbe6)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv6/route.c
diff --cc net/ipv6/route.c
index 0b0a66f19334,11ad62effd56..000000000000
--- a/net/ipv6/route.c
+++ b/net/ipv6/route.c
@@@ -3074,18 -3182,10 +3074,25 @@@ static struct fib6_info *ip6_route_info
  		cfg->fc_protocol = RTPROT_BOOT;
  	rt->fib6_protocol = cfg->fc_protocol;
  
++<<<<<<< HEAD
 +	addr_type = ipv6_addr_type(&cfg->fc_dst);
 +
 +	if (cfg->fc_encap) {
 +		struct lwtunnel_state *lwtstate;
 +
 +		err = lwtunnel_build_state(cfg->fc_encap_type,
 +					   cfg->fc_encap, AF_INET6, cfg,
 +					   &lwtstate, extack);
 +		if (err)
 +			goto out;
 +		rt->fib6_nh.nh_lwtstate = lwtstate_get(lwtstate);
 +	}
++=======
+ 	rt->fib6_table = table;
+ 	rt->fib6_metric = cfg->fc_metric;
+ 	rt->fib6_type = cfg->fc_type ? : RTN_UNICAST;
+ 	rt->fib6_flags = cfg->fc_flags & ~RTF_GATEWAY;
++>>>>>>> c7036d97acd2 (ipv6: Default fib6_type to RTN_UNICAST when not set)
  
  	ipv6_addr_prefix(&rt->fib6_dst.addr, &cfg->fc_dst, cfg->fc_dst_len);
  	rt->fib6_dst.plen = cfg->fc_dst_len;
* Unmerged path net/ipv6/route.c
