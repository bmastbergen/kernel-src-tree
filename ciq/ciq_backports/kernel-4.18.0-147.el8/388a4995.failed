scsi: qla2xxx: Fix panic from use after free in qla2x00_async_tm_cmd

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Bill Kuzeja <William.Kuzeja@stratus.com>
commit 388a49959ee4e4e99f160241d9599efa62cd4299
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/388a4995.failed

In qla2x00_async_tm_cmd, we reference off sp after it has been freed.  This
caused a panic on a system running a slub debug kernel. Since fcport is
passed in anyways, just use that instead.

	Signed-off-by: Bill Kuzeja <william.kuzeja@stratus.com>
	Acked-by: Giridhar Malavali <gmalavali@marvell.com>
	Acked-by: Himanshu Madhani <hmadhani@marvell.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit 388a49959ee4e4e99f160241d9599efa62cd4299)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/qla2xxx/qla_init.c
diff --cc drivers/scsi/qla2xxx/qla_init.c
index d06269226348,109587e62983..000000000000
--- a/drivers/scsi/qla2xxx/qla_init.c
+++ b/drivers/scsi/qla2xxx/qla_init.c
@@@ -1519,8 -1784,8 +1519,13 @@@ qla2x00_async_tm_cmd(fc_port_t *fcport
  		lun = (uint16_t)tm_iocb->u.tmf.lun;
  
  		/* Issue Marker IOCB */
++<<<<<<< HEAD
 +		qla2x00_marker(vha, vha->hw->base_qpair,
 +		    sp->fcport->loop_id, lun,
++=======
+ 		qla2x00_marker(vha, vha->hw->req_q_map[0],
+ 		    vha->hw->rsp_q_map[0], fcport->loop_id, lun,
++>>>>>>> 388a49959ee4 (scsi: qla2xxx: Fix panic from use after free in qla2x00_async_tm_cmd)
  		    flags == TCF_LUN_RESET ? MK_SYNC_ID_LUN : MK_SYNC_ID);
  	}
  
* Unmerged path drivers/scsi/qla2xxx/qla_init.c
