net/mlx5e: Replace the split logic with extended destination

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Eli Britstein <elibr@mellanox.com>
commit 38c9d2697b9c0d928875ea45b5e2fd706df7ad7e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/38c9d269.failed

Currently the FTE encap flag applies to all destinations.
To support mirroring encapsulated traffic to a local port the driver
split the two destinations to two flow table entries:
Table#0: - FWD to the local vport
         - Goto table#1
Table#1: - Encap and FWD to wire
The firmware extended destination capabilities enable the driver to set
an encapsulation flag per destination.

Remove the split logic and use the extended destination mechanism
instead.

Note that split technique is still required for pedit and VLAN push
scenarios.

	Signed-off-by: Eli Britstein <elibr@mellanox.com>
	Reviewed-by: Oz Shlomo <ozsh@mellanox.com>
	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
(cherry picked from commit 38c9d2697b9c0d928875ea45b5e2fd706df7ad7e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/en_tc.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/en_tc.c
index c9ee89f4edb1,1e3688a0c4f9..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_tc.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_tc.c
@@@ -2689,7 -2513,6 +2689,10 @@@ static int parse_tc_fdb_actions(struct 
  				encap = true;
  			else
  				return -EOPNOTSUPP;
++<<<<<<< HEAD
 +			attr->mirror_count = attr->out_count;
++=======
++>>>>>>> 38c9d2697b9c (net/mlx5e: Replace the split logic with extended destination)
  			continue;
  		}
  
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en_tc.c
