mlxsw: spectrum_acl: Don't take mutex in mlxsw_sp_acl_tcam_vregion_rehash_work()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Jiri Pirko <jiri@mellanox.com>
commit 2bffc5322fd8679e879cd6370881ee50cf141ada
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/2bffc532.failed

Other mutexes are taking care of proper locking for this, no longer
needed to take RTNL mutex here.

	Signed-off-by: Jiri Pirko <jiri@mellanox.com>
	Signed-off-by: Ido Schimmel <idosch@mellanox.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 2bffc5322fd8679e879cd6370881ee50cf141ada)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlxsw/spectrum_acl_tcam.c
diff --cc drivers/net/ethernet/mellanox/mlxsw/spectrum_acl_tcam.c
index c607c62a43ae,822766f81236..000000000000
--- a/drivers/net/ethernet/mellanox/mlxsw/spectrum_acl_tcam.c
+++ b/drivers/net/ethernet/mellanox/mlxsw/spectrum_acl_tcam.c
@@@ -603,12 -711,40 +603,40 @@@ mlxsw_sp_acl_tcam_region_destroy(struc
  	kfree(region);
  }
  
++<<<<<<< HEAD
++=======
+ static void
+ mlxsw_sp_acl_tcam_vregion_rehash_work_schedule(struct mlxsw_sp_acl_tcam_vregion *vregion)
+ {
+ 	unsigned long interval = vregion->tcam->vregion_rehash_intrvl;
+ 
+ 	if (!interval)
+ 		return;
+ 	mlxsw_core_schedule_dw(&vregion->rehash_dw,
+ 			       msecs_to_jiffies(interval));
+ }
+ 
+ static int
+ mlxsw_sp_acl_tcam_vregion_rehash(struct mlxsw_sp *mlxsw_sp,
+ 				 struct mlxsw_sp_acl_tcam_vregion *vregion);
+ 
+ static void mlxsw_sp_acl_tcam_vregion_rehash_work(struct work_struct *work)
+ {
+ 	struct mlxsw_sp_acl_tcam_vregion *vregion =
+ 		container_of(work, struct mlxsw_sp_acl_tcam_vregion,
+ 			     rehash_dw.work);
+ 
+ 	mlxsw_sp_acl_tcam_vregion_rehash(vregion->mlxsw_sp, vregion);
+ 	mlxsw_sp_acl_tcam_vregion_rehash_work_schedule(vregion);
+ }
+ 
++>>>>>>> 2bffc5322fd8 (mlxsw: spectrum_acl: Don't take mutex in mlxsw_sp_acl_tcam_vregion_rehash_work())
  static struct mlxsw_sp_acl_tcam_vregion *
  mlxsw_sp_acl_tcam_vregion_create(struct mlxsw_sp *mlxsw_sp,
 -				 struct mlxsw_sp_acl_tcam_vgroup *vgroup,
 -				 unsigned int priority,
 +				 struct mlxsw_sp_acl_tcam *tcam,
  				 struct mlxsw_afk_element_usage *elusage)
  {
 -	const struct mlxsw_sp_acl_tcam_ops *ops = mlxsw_sp->acl_tcam_ops;
  	struct mlxsw_afk *afk = mlxsw_sp_acl_afk(mlxsw_sp->acl);
 -	struct mlxsw_sp_acl_tcam *tcam = vgroup->group.tcam;
  	struct mlxsw_sp_acl_tcam_vregion *vregion;
  	int err;
  
* Unmerged path drivers/net/ethernet/mellanox/mlxsw/spectrum_acl_tcam.c
