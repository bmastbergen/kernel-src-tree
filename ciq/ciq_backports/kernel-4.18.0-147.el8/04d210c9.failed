scsi: lpfc: Fix memory leak in abnormal exit path from lpfc_eq_create

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author James Smart <jsmart2021@gmail.com>
commit 04d210c98e11d863ebe38a7e482e40fb90d9ad82
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/04d210c9.failed

eq create is leaking mailbox memory if it encounters an error.

rework error path to free the memory.

	Signed-off-by: Dick Kennedy <dick.kennedy@broadcom.com>
	Signed-off-by: James Smart <jsmart2021@gmail.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit 04d210c98e11d863ebe38a7e482e40fb90d9ad82)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/lpfc/lpfc_sli.c
diff --cc drivers/scsi/lpfc/lpfc_sli.c
index 2c8bad0043f1,4432060f7315..000000000000
--- a/drivers/scsi/lpfc/lpfc_sli.c
+++ b/drivers/scsi/lpfc/lpfc_sli.c
@@@ -14662,9 -14641,11 +14662,17 @@@ lpfc_eq_create(struct lpfc_hba *phba, s
  		lpfc_printf_log(phba, KERN_ERR, LOG_SLI,
  				"0360 Unsupported EQ count. (%d)\n",
  				eq->entry_count);
++<<<<<<< HEAD
 +		if (eq->entry_count < 256)
 +			return -EINVAL;
 +		/* otherwise default to smallest count (drop through) */
++=======
+ 		if (eq->entry_count < 256) {
+ 			status = -EINVAL;
+ 			goto out;
+ 		}
+ 		/* fall through - otherwise default to smallest count */
++>>>>>>> 04d210c98e11 (scsi: lpfc: Fix memory leak in abnormal exit path from lpfc_eq_create)
  	case 256:
  		bf_set(lpfc_eq_context_count, &eq_create->u.request.context,
  		       LPFC_EQ_CNT_256);
* Unmerged path drivers/scsi/lpfc/lpfc_sli.c
