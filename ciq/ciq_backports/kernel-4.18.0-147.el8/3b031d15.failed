nvmet: add error log support for bdev backend

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Chaitanya Kulkarni <chaitanya.kulkarni@wdc.com>
commit 3b031d15995f3e4c43e38159072f07efe3fa35d9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/3b031d15.failed

This patch adds the support for the block device backend to populate the
error log entries. Here we map the blk_status_t to the NVMe status.

	Signed-off-by: Chaitanya Kulkarni <chaitanya.kulkarni@wdc.com>
	Reviewed-by: Sagi Grimberg <sagi@grimberg.me>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
(cherry picked from commit 3b031d15995f3e4c43e38159072f07efe3fa35d9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/nvme/target/io-cmd-bdev.c
diff --cc drivers/nvme/target/io-cmd-bdev.c
index c07184926ad7,b6d030d3259f..000000000000
--- a/drivers/nvme/target/io-cmd-bdev.c
+++ b/drivers/nvme/target/io-cmd-bdev.c
@@@ -129,9 -185,17 +185,21 @@@ static void nvmet_bdev_execute_flush(st
  	submit_bio(bio);
  }
  
++<<<<<<< HEAD
 +static u16 nvmet_bdev_discard_range(struct nvmet_ns *ns,
++=======
+ u16 nvmet_bdev_flush(struct nvmet_req *req)
+ {
+ 	if (blkdev_issue_flush(req->ns->bdev, GFP_KERNEL, NULL))
+ 		return NVME_SC_INTERNAL | NVME_SC_DNR;
+ 	return 0;
+ }
+ 
+ static u16 nvmet_bdev_discard_range(struct nvmet_req *req,
++>>>>>>> 3b031d15995f (nvmet: add error log support for bdev backend)
  		struct nvme_dsm_range *range, struct bio **bio)
  {
+ 	struct nvmet_ns *ns = req->ns;
  	int ret;
  
  	ret = __blkdev_issue_discard(ns->bdev,
* Unmerged path drivers/nvme/target/io-cmd-bdev.c
