drm/amd/display: Re-add custom degamma support

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author David Francis <David.Francis@amd.com>
commit f91813992c343272813e707343b50f8d06383659
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/f9181399.failed

[Why]
The dc_gamma_type CUSTOM_GAMMA is used to represent degamma
mappings passed in by drm. This type of gamma must be interpolated
into a transfer function by apply_1d_lut.  The line in
mod_color_calculate_degamma_params that handled this case
was erroneously removed.

[How]
For CUSTOM_GAMMA degamma, calculate the lut as before.

	Signed-off-by: David Francis <David.Francis@amd.com>
	Reviewed-by: Krunoslav Kovac <Krunoslav.Kovac@amd.com>
	Acked-by: Bhawanpreet Lakha <Bhawanpreet.Lakha@amd.com>
	Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
(cherry picked from commit f91813992c343272813e707343b50f8d06383659)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/amd/display/modules/color/color_gamma.c
diff --cc drivers/gpu/drm/amd/display/modules/color/color_gamma.c
index eee0dfad6962,a1055413bade..000000000000
--- a/drivers/gpu/drm/amd/display/modules/color/color_gamma.c
+++ b/drivers/gpu/drm/amd/display/modules/color/color_gamma.c
@@@ -1535,9 -1851,11 +1535,15 @@@ bool mod_color_calculate_degamma_params
  	tf_pts->x_point_at_y1_blue = 1;
  
  	map_regamma_hw_to_x_user(ramp, coeff, rgb_user,
 -			coordinates_x, axis_x, curve,
 +			coordinates_x, axix_x, curve,
  			MAX_HW_POINTS, tf_pts,
++<<<<<<< HEAD
 +			mapUserRamp);
++=======
+ 			mapUserRamp && ramp && ramp->type == GAMMA_RGB_256);
+ 	if (ramp->type == GAMMA_CUSTOM)
+ 		apply_lut_1d(ramp, MAX_HW_POINTS, tf_pts);
++>>>>>>> f91813992c34 (drm/amd/display: Re-add custom degamma support)
  
  	ret = true;
  
* Unmerged path drivers/gpu/drm/amd/display/modules/color/color_gamma.c
