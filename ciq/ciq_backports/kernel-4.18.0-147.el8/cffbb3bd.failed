perf/hw_breakpoint: Remove default hw_breakpoint_arch_parse()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Frederic Weisbecker <frederic@kernel.org>
commit cffbb3bd444bc95186b6ab0ed3bf1d5bcf4aa620
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/cffbb3bd.failed

All architectures have implemented it, we can now remove the poor weak
version.

	Signed-off-by: Frederic Weisbecker <frederic@kernel.org>
	Cc: Alexander Shishkin <alexander.shishkin@linux.intel.com>
	Cc: Andy Lutomirski <luto@kernel.org>
	Cc: Arnaldo Carvalho de Melo <acme@kernel.org>
	Cc: Arnaldo Carvalho de Melo <acme@redhat.com>
	Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Cc: Catalin Marinas <catalin.marinas@arm.com>
	Cc: Chris Zankel <chris@zankel.net>
	Cc: Jiri Olsa <jolsa@redhat.com>
	Cc: Joel Fernandes <joel.opensrc@gmail.com>
	Cc: Linus Torvalds <torvalds@linux-foundation.org>
	Cc: Mark Rutland <mark.rutland@arm.com>
	Cc: Max Filippov <jcmvbkbc@gmail.com>
	Cc: Michael Ellerman <mpe@ellerman.id.au>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Paul Mackerras <paulus@samba.org>
	Cc: Peter Zijlstra <peterz@infradead.org>
	Cc: Rich Felker <dalias@libc.org>
	Cc: Thomas Gleixner <tglx@linutronix.de>
	Cc: Will Deacon <will.deacon@arm.com>
	Cc: Yoshinori Sato <ysato@users.sourceforge.jp>
Link: http://lkml.kernel.org/r/1529981939-8231-11-git-send-email-frederic@kernel.org
	Signed-off-by: Ingo Molnar <mingo@kernel.org>
(cherry picked from commit cffbb3bd444bc95186b6ab0ed3bf1d5bcf4aa620)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/arm/include/asm/hw_breakpoint.h
#	arch/sh/include/asm/hw_breakpoint.h
#	arch/xtensa/include/asm/hw_breakpoint.h
diff --cc arch/arm/include/asm/hw_breakpoint.h
index d5a0f52c6755,ac54c06764e6..000000000000
--- a/arch/arm/include/asm/hw_breakpoint.h
+++ b/arch/arm/include/asm/hw_breakpoint.h
@@@ -118,7 -119,9 +118,13 @@@ struct pmu
  extern int arch_bp_generic_fields(struct arch_hw_breakpoint_ctrl ctrl,
  				  int *gen_len, int *gen_type);
  extern int arch_check_bp_in_kernelspace(struct arch_hw_breakpoint *hw);
++<<<<<<< HEAD
 +extern int arch_validate_hwbkpt_settings(struct perf_event *bp);
++=======
+ extern int hw_breakpoint_arch_parse(struct perf_event *bp,
+ 				    const struct perf_event_attr *attr,
+ 				    struct arch_hw_breakpoint *hw);
++>>>>>>> cffbb3bd444b (perf/hw_breakpoint: Remove default hw_breakpoint_arch_parse())
  extern int hw_breakpoint_exceptions_notify(struct notifier_block *unused,
  					   unsigned long val, void *data);
  
diff --cc arch/sh/include/asm/hw_breakpoint.h
index 8a88ed0b3cd7,199d17b765f2..000000000000
--- a/arch/sh/include/asm/hw_breakpoint.h
+++ b/arch/sh/include/asm/hw_breakpoint.h
@@@ -55,7 -55,9 +55,13 @@@ static inline int hw_breakpoint_slots(i
  
  /* arch/sh/kernel/hw_breakpoint.c */
  extern int arch_check_bp_in_kernelspace(struct arch_hw_breakpoint *hw);
++<<<<<<< HEAD
 +extern int arch_validate_hwbkpt_settings(struct perf_event *bp);
++=======
+ extern int hw_breakpoint_arch_parse(struct perf_event *bp,
+ 				    const struct perf_event_attr *attr,
+ 				    struct arch_hw_breakpoint *hw);
++>>>>>>> cffbb3bd444b (perf/hw_breakpoint: Remove default hw_breakpoint_arch_parse())
  extern int hw_breakpoint_exceptions_notify(struct notifier_block *unused,
  					   unsigned long val, void *data);
  
diff --cc arch/xtensa/include/asm/hw_breakpoint.h
index 2525bf6816a6,9f119c1ca0b5..000000000000
--- a/arch/xtensa/include/asm/hw_breakpoint.h
+++ b/arch/xtensa/include/asm/hw_breakpoint.h
@@@ -36,7 -37,9 +36,13 @@@ struct task_struct
  
  int hw_breakpoint_slots(int type);
  int arch_check_bp_in_kernelspace(struct arch_hw_breakpoint *hw);
++<<<<<<< HEAD
 +int arch_validate_hwbkpt_settings(struct perf_event *bp);
++=======
+ int hw_breakpoint_arch_parse(struct perf_event *bp,
+ 			     const struct perf_event_attr *attr,
+ 			     struct arch_hw_breakpoint *hw);
++>>>>>>> cffbb3bd444b (perf/hw_breakpoint: Remove default hw_breakpoint_arch_parse())
  int hw_breakpoint_exceptions_notify(struct notifier_block *unused,
  				    unsigned long val, void *data);
  
* Unmerged path arch/arm/include/asm/hw_breakpoint.h
diff --git a/arch/arm64/include/asm/hw_breakpoint.h b/arch/arm64/include/asm/hw_breakpoint.h
index bf9c305daa62..6a53e59ced95 100644
--- a/arch/arm64/include/asm/hw_breakpoint.h
+++ b/arch/arm64/include/asm/hw_breakpoint.h
@@ -129,7 +129,6 @@ extern int arch_check_bp_in_kernelspace(struct arch_hw_breakpoint *hw);
 extern int hw_breakpoint_arch_parse(struct perf_event *bp,
 				    const struct perf_event_attr *attr,
 				    struct arch_hw_breakpoint *hw);
-#define hw_breakpoint_arch_parse hw_breakpoint_arch_parse
 extern int hw_breakpoint_exceptions_notify(struct notifier_block *unused,
 					   unsigned long val, void *data);
 
diff --git a/arch/powerpc/include/asm/hw_breakpoint.h b/arch/powerpc/include/asm/hw_breakpoint.h
index 38ae180610bd..27d6e3c8fde9 100644
--- a/arch/powerpc/include/asm/hw_breakpoint.h
+++ b/arch/powerpc/include/asm/hw_breakpoint.h
@@ -65,7 +65,6 @@ extern int arch_check_bp_in_kernelspace(struct arch_hw_breakpoint *hw);
 extern int hw_breakpoint_arch_parse(struct perf_event *bp,
 				    const struct perf_event_attr *attr,
 				    struct arch_hw_breakpoint *hw);
-#define hw_breakpoint_arch_parse hw_breakpoint_arch_parse
 extern int hw_breakpoint_exceptions_notify(struct notifier_block *unused,
 						unsigned long val, void *data);
 int arch_install_hw_breakpoint(struct perf_event *bp);
* Unmerged path arch/sh/include/asm/hw_breakpoint.h
diff --git a/arch/x86/include/asm/hw_breakpoint.h b/arch/x86/include/asm/hw_breakpoint.h
index 6c88e8e22678..a1f0e90d0818 100644
--- a/arch/x86/include/asm/hw_breakpoint.h
+++ b/arch/x86/include/asm/hw_breakpoint.h
@@ -57,7 +57,6 @@ extern int arch_check_bp_in_kernelspace(struct arch_hw_breakpoint *hw);
 extern int hw_breakpoint_arch_parse(struct perf_event *bp,
 				    const struct perf_event_attr *attr,
 				    struct arch_hw_breakpoint *hw);
-#define hw_breakpoint_arch_parse hw_breakpoint_arch_parse
 extern int hw_breakpoint_exceptions_notify(struct notifier_block *unused,
 					   unsigned long val, void *data);
 
* Unmerged path arch/xtensa/include/asm/hw_breakpoint.h
diff --git a/kernel/events/hw_breakpoint.c b/kernel/events/hw_breakpoint.c
index ca4510e1c7e1..9efa97134373 100644
--- a/kernel/events/hw_breakpoint.c
+++ b/kernel/events/hw_breakpoint.c
@@ -400,23 +400,6 @@ int dbg_release_bp_slot(struct perf_event *bp)
 	return 0;
 }
 
-#ifndef hw_breakpoint_arch_parse
-int hw_breakpoint_arch_parse(struct perf_event *bp,
-			     const struct perf_event_attr *attr,
-			     struct arch_hw_breakpoint *hw)
-{
-	int err;
-
-	err = arch_validate_hwbkpt_settings(bp);
-	if (err)
-		return err;
-
-	*hw = bp->hw.info;
-
-	return 0;
-}
-#endif
-
 static int hw_breakpoint_parse(struct perf_event *bp,
 			       const struct perf_event_attr *attr,
 			       struct arch_hw_breakpoint *hw)
