drm/i915: Bump gen7+ fb size limits to 16kx16k

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Ville Syrj채l채 <ville.syrjala@linux.intel.com>
commit 5c000fb33b767c3fa10d29a1021edbf4f92b76a2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/5c000fb3.failed

With gtt remapping in place we can use arbitrarily large
framebuffers. Let's bump the limits to 16kx16k on gen7+.
The limit was chosen to match the maximum 2D surface size
of the 3D engine.

With the remapping we could easily go higher than that for the
display engine. However the modesetting ddx will blindly assume
it can handle whatever is reported via kms. The oversized
buffer dimensions are not caught by glamor nor Mesa until
finally an assert will trip when genxml attempts to pack the
SURFACE_STATE. So we pick a safe limit to avoid the X server
from crashing (or potentially misbehaving if the genxml asserts
are compiled out).

	Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>
Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=110187
	Signed-off-by: Ville Syrj채l채 <ville.syrjala@linux.intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20190509122159.24376-9-ville.syrjala@linux.intel.com
	Reviewed-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
(cherry picked from commit 5c000fb33b767c3fa10d29a1021edbf4f92b76a2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/intel_display.c
diff --cc drivers/gpu/drm/i915/intel_display.c
index 98867581a27e,d3b2f51e2dc2..000000000000
--- a/drivers/gpu/drm/i915/intel_display.c
+++ b/drivers/gpu/drm/i915/intel_display.c
@@@ -14956,10 -15827,17 +14956,24 @@@ int intel_modeset_init(struct drm_devic
  		}
  	}
  
++<<<<<<< HEAD
 +	if (IS_GEN2(dev_priv)) {
 +		dev->mode_config.max_width = 2048;
 +		dev->mode_config.max_height = 2048;
 +	} else if (IS_GEN3(dev_priv)) {
++=======
+ 	/*
+ 	 * Maximum framebuffer dimensions, chosen to match
+ 	 * the maximum render engine surface size on gen4+.
+ 	 */
+ 	if (INTEL_GEN(dev_priv) >= 7) {
+ 		dev->mode_config.max_width = 16384;
+ 		dev->mode_config.max_height = 16384;
+ 	} else if (INTEL_GEN(dev_priv) >= 4) {
+ 		dev->mode_config.max_width = 8192;
+ 		dev->mode_config.max_height = 8192;
+ 	} else if (IS_GEN(dev_priv, 3)) {
++>>>>>>> 5c000fb33b76 (drm/i915: Bump gen7+ fb size limits to 16kx16k)
  		dev->mode_config.max_width = 4096;
  		dev->mode_config.max_height = 4096;
  	} else {
* Unmerged path drivers/gpu/drm/i915/intel_display.c
