drm/nouveau: fix duplication of nv50_head_atom struct

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Peteris Rudzusiks <peteris.rudzusiks@gmail.com>
commit c4a52d669690423ee3c99d8eda1e69cd0821fcad
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/c4a52d66.failed

nv50_head_atomic_duplicate_state() makes a copy of nv50_head_atom
struct. This patch adds copying of struct member named "or", which
previously was left uninitialized in the duplicated structure.

Due to this bug, incorrect nhsync and nvsync values were sometimes used.
In my particular case, that lead to a mismatch between the output
resolution of the graphics device (GeForce GT 630 OEM) and the reported
input signal resolution on the display. xrandr reported 1680x1050, but
the display reported 1280x1024. As a result of this mismatch, the output
on the display looked like it was cropped (only part of the output was
actually visible on the display).

git bisect pointed to commit 2ca7fb5c1cc6 ("drm/nouveau/kms/nv50: handle
SetControlOutputResource from head"), which added the member "or" to
nv50_head_atom structure, but forgot to copy it in
nv50_head_atomic_duplicate_state().

Fixes: 2ca7fb5c1cc6 ("drm/nouveau/kms/nv50: handle SetControlOutputResource from head")
	Signed-off-by: Peteris Rudzusiks <peteris.rudzusiks@gmail.com>
	Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
(cherry picked from commit c4a52d669690423ee3c99d8eda1e69cd0821fcad)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/nouveau/dispnv50/head.c
diff --cc drivers/gpu/drm/nouveau/dispnv50/head.c
index d81a99bb2ac3,06ee23823a68..000000000000
--- a/drivers/gpu/drm/nouveau/dispnv50/head.c
+++ b/drivers/gpu/drm/nouveau/dispnv50/head.c
@@@ -413,6 -413,8 +413,11 @@@ nv50_head_atomic_duplicate_state(struc
  	asyh->ovly = armh->ovly;
  	asyh->dither = armh->dither;
  	asyh->procamp = armh->procamp;
++<<<<<<< HEAD
++=======
+ 	asyh->or = armh->or;
+ 	asyh->dp = armh->dp;
++>>>>>>> c4a52d669690 (drm/nouveau: fix duplication of nv50_head_atom struct)
  	asyh->clr.mask = 0;
  	asyh->set.mask = 0;
  	return &asyh->state;
* Unmerged path drivers/gpu/drm/nouveau/dispnv50/head.c
