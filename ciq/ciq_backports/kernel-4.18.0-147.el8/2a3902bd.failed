drm/i915/icl: Drop redundant gamma mode mask

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Uma Shankar <uma.shankar@intel.com>
commit 2a3902bd5c14a4946739c9da14071f5aa6e85549
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/2a3902bd.failed

gamma mode mask was not considering the 30th and 31st bits.
Due to this state readout was masking these bits, causing a
mismatch and false warning, even though the registers were
updated correctly. Dropped the gamma mode mask as it is
redundant and ideally entire register content should be
matching. This resolves the state mismatch warnings.

	Signed-off-by: Uma Shankar <uma.shankar@intel.com>
	Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/1550689519-6977-1-git-send-email-uma.shankar@intel.com
Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=109624
(cherry picked from commit 2a3902bd5c14a4946739c9da14071f5aa6e85549)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/i915_reg.h
diff --cc drivers/gpu/drm/i915/i915_reg.h
index a78c6ef1f608,730bb1917fd1..000000000000
--- a/drivers/gpu/drm/i915/i915_reg.h
+++ b/drivers/gpu/drm/i915/i915_reg.h
@@@ -6819,11 -7149,12 +6819,20 @@@ enum 
  #define _GAMMA_MODE_A		0x4a480
  #define _GAMMA_MODE_B		0x4ac80
  #define GAMMA_MODE(pipe) _MMIO_PIPE(pipe, _GAMMA_MODE_A, _GAMMA_MODE_B)
++<<<<<<< HEAD
 +#define GAMMA_MODE_MODE_MASK	(3 << 0)
 +#define GAMMA_MODE_MODE_8BIT	(0 << 0)
 +#define GAMMA_MODE_MODE_10BIT	(1 << 0)
 +#define GAMMA_MODE_MODE_12BIT	(2 << 0)
 +#define GAMMA_MODE_MODE_SPLIT	(3 << 0)
++=======
+ #define  PRE_CSC_GAMMA_ENABLE	(1 << 31)
+ #define  POST_CSC_GAMMA_ENABLE	(1 << 30)
+ #define  GAMMA_MODE_MODE_8BIT	(0 << 0)
+ #define  GAMMA_MODE_MODE_10BIT	(1 << 0)
+ #define  GAMMA_MODE_MODE_12BIT	(2 << 0)
+ #define  GAMMA_MODE_MODE_SPLIT	(3 << 0)
++>>>>>>> 2a3902bd5c14 (drm/i915/icl: Drop redundant gamma mode mask)
  
  /* DMC/CSR */
  #define CSR_PROGRAM(i)		_MMIO(0x80000 + (i) * 4)
* Unmerged path drivers/gpu/drm/i915/i915_reg.h
diff --git a/drivers/gpu/drm/i915/intel_display.c b/drivers/gpu/drm/i915/intel_display.c
index dec0d60921bf..4e4ac795a780 100644
--- a/drivers/gpu/drm/i915/intel_display.c
+++ b/drivers/gpu/drm/i915/intel_display.c
@@ -9426,8 +9426,7 @@ static bool haswell_get_pipe_config(struct intel_crtc *crtc,
 
 	intel_get_pipe_src_size(crtc, pipe_config);
 
-	pipe_config->gamma_mode =
-		I915_READ(GAMMA_MODE(crtc->pipe)) & GAMMA_MODE_MODE_MASK;
+	pipe_config->gamma_mode = I915_READ(GAMMA_MODE(crtc->pipe));
 
 	if (IS_BROADWELL(dev_priv) || INTEL_GEN(dev_priv) >= 9) {
 		u32 tmp = I915_READ(PIPEMISC(crtc->pipe));
