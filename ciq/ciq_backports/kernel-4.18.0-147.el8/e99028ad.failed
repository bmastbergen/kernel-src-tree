RDMA/uverbs: Check existence of create_flow callback

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Jason Gunthorpe <jgg@ziepe.ca>
commit e99028ad76e788574a7eafaee2e5916c5b9bbf87
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/e99028ad.failed

In the accepted series "Refactor ib_uverbs_write path", we presented the
roadmap to get rid of uverbs_cmd_mask and uverbs_ex_cmd_mask fields in
favor of simple check of function pointer. So let's put NULL check of
create_flow function callback despite the fact that uverbs_ex_cmd_mask
still exists.

Link: https://www.spinics.net/lists/linux-rdma/msg60753.html
	Suggested-by: Michael J Ruhl <michael.j.ruhl@intel.com>
	Signed-off-by: Leon Romanovsky <leonro@mellanox.com>
	Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
(cherry picked from commit e99028ad76e788574a7eafaee2e5916c5b9bbf87)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/core/uverbs_cmd.c
diff --cc drivers/infiniband/core/uverbs_cmd.c
index 029a62ab0dbb,985dc86d5610..000000000000
--- a/drivers/infiniband/core/uverbs_cmd.c
+++ b/drivers/infiniband/core/uverbs_cmd.c
@@@ -3649,8 -3554,8 +3649,13 @@@ int ib_uverbs_ex_create_flow(struct ib_
  		goto err_uobj;
  	}
  
++<<<<<<< HEAD
 +	if (qp->qp_type != IB_QPT_UD && qp->qp_type != IB_QPT_RAW_PACKET) {
 +		err = -EINVAL;
++=======
+ 	if (!qp->device->create_flow) {
+ 		err = -EOPNOTSUPP;
++>>>>>>> e99028ad76e7 (RDMA/uverbs: Check existence of create_flow callback)
  		goto err_put;
  	}
  
* Unmerged path drivers/infiniband/core/uverbs_cmd.c
