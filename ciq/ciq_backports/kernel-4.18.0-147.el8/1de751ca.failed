RDMA/uverbs: Make all the method functions in uverbs_cmd static

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Jason Gunthorpe <jgg@ziepe.ca>
commit 1de751caf7d52debd9820dbcd0190c6306f3f7b0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/1de751ca.failed

Now that we use struct uverbs_uapi to link the method functions to the
dispatcher there is no reason to have them be extern symbols.

	Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
	Signed-off-by: Leon Romanovsky <leonro@mellanox.com>
(cherry picked from commit 1de751caf7d52debd9820dbcd0190c6306f3f7b0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/core/uverbs.h
#	drivers/infiniband/core/uverbs_cmd.c
diff --cc drivers/infiniband/core/uverbs.h
index 55f338e6340d,8b41c95300c6..000000000000
--- a/drivers/infiniband/core/uverbs.h
+++ b/drivers/infiniband/core/uverbs.h
@@@ -288,65 -294,4 +288,68 @@@ extern const struct uverbs_object_def U
  extern const struct uverbs_object_def UVERBS_OBJECT(UVERBS_OBJECT_DM);
  extern const struct uverbs_object_def UVERBS_OBJECT(UVERBS_OBJECT_COUNTERS);
  
++<<<<<<< HEAD
 +#define IB_UVERBS_DECLARE_CMD(name)					\
 +	ssize_t ib_uverbs_##name(struct ib_uverbs_file *file,		\
 +				 struct ib_device *ib_dev,              \
 +				 const char __user *buf, int in_len,	\
 +				 int out_len)
 +
 +IB_UVERBS_DECLARE_CMD(get_context);
 +IB_UVERBS_DECLARE_CMD(query_device);
 +IB_UVERBS_DECLARE_CMD(query_port);
 +IB_UVERBS_DECLARE_CMD(alloc_pd);
 +IB_UVERBS_DECLARE_CMD(dealloc_pd);
 +IB_UVERBS_DECLARE_CMD(reg_mr);
 +IB_UVERBS_DECLARE_CMD(rereg_mr);
 +IB_UVERBS_DECLARE_CMD(dereg_mr);
 +IB_UVERBS_DECLARE_CMD(alloc_mw);
 +IB_UVERBS_DECLARE_CMD(dealloc_mw);
 +IB_UVERBS_DECLARE_CMD(create_comp_channel);
 +IB_UVERBS_DECLARE_CMD(create_cq);
 +IB_UVERBS_DECLARE_CMD(resize_cq);
 +IB_UVERBS_DECLARE_CMD(poll_cq);
 +IB_UVERBS_DECLARE_CMD(req_notify_cq);
 +IB_UVERBS_DECLARE_CMD(destroy_cq);
 +IB_UVERBS_DECLARE_CMD(create_qp);
 +IB_UVERBS_DECLARE_CMD(open_qp);
 +IB_UVERBS_DECLARE_CMD(query_qp);
 +IB_UVERBS_DECLARE_CMD(modify_qp);
 +IB_UVERBS_DECLARE_CMD(destroy_qp);
 +IB_UVERBS_DECLARE_CMD(post_send);
 +IB_UVERBS_DECLARE_CMD(post_recv);
 +IB_UVERBS_DECLARE_CMD(post_srq_recv);
 +IB_UVERBS_DECLARE_CMD(create_ah);
 +IB_UVERBS_DECLARE_CMD(destroy_ah);
 +IB_UVERBS_DECLARE_CMD(attach_mcast);
 +IB_UVERBS_DECLARE_CMD(detach_mcast);
 +IB_UVERBS_DECLARE_CMD(create_srq);
 +IB_UVERBS_DECLARE_CMD(modify_srq);
 +IB_UVERBS_DECLARE_CMD(query_srq);
 +IB_UVERBS_DECLARE_CMD(destroy_srq);
 +IB_UVERBS_DECLARE_CMD(create_xsrq);
 +IB_UVERBS_DECLARE_CMD(open_xrcd);
 +IB_UVERBS_DECLARE_CMD(close_xrcd);
 +
 +#define IB_UVERBS_DECLARE_EX_CMD(name)				\
 +	int ib_uverbs_ex_##name(struct ib_uverbs_file *file,	\
 +				struct ib_device *ib_dev,		\
 +				struct ib_udata *ucore,		\
 +				struct ib_udata *uhw)
 +
 +IB_UVERBS_DECLARE_EX_CMD(create_flow);
 +IB_UVERBS_DECLARE_EX_CMD(destroy_flow);
 +IB_UVERBS_DECLARE_EX_CMD(query_device);
 +IB_UVERBS_DECLARE_EX_CMD(create_cq);
 +IB_UVERBS_DECLARE_EX_CMD(create_qp);
 +IB_UVERBS_DECLARE_EX_CMD(create_wq);
 +IB_UVERBS_DECLARE_EX_CMD(modify_wq);
 +IB_UVERBS_DECLARE_EX_CMD(destroy_wq);
 +IB_UVERBS_DECLARE_EX_CMD(create_rwq_ind_table);
 +IB_UVERBS_DECLARE_EX_CMD(destroy_rwq_ind_table);
 +IB_UVERBS_DECLARE_EX_CMD(modify_qp);
 +IB_UVERBS_DECLARE_EX_CMD(modify_cq);
 +
++=======
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  #endif /* UVERBS_H */
diff --cc drivers/infiniband/core/uverbs_cmd.c
index 300532a4cde8,7c7ec1575511..000000000000
--- a/drivers/infiniband/core/uverbs_cmd.c
+++ b/drivers/infiniband/core/uverbs_cmd.c
@@@ -60,15 -59,15 +60,21 @@@ ib_uverbs_lookup_comp_file(int fd, stru
  	uverbs_uobject_get(uobj);
  	uobj_put_read(uobj);
  
 -	return container_of(uobj, struct ib_uverbs_completion_event_file,
 -			    uobj);
 +	uobj_file = container_of(uobj, struct ib_uobject_file, uobj);
 +	return container_of(uobj_file, struct ib_uverbs_completion_event_file,
 +			    uobj_file);
  }
 -#define ib_uverbs_lookup_comp_file(_fd, _ufile)                                \
 -	_ib_uverbs_lookup_comp_file((_fd)*typecheck(s32, _fd), _ufile)
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_get_context(struct ib_uverbs_file *file,
 +			      struct ib_device *ib_dev,
 +			      const char __user *buf,
 +			      int in_len, int out_len)
++=======
+ static ssize_t ib_uverbs_get_context(struct ib_uverbs_file *file,
+ 				     const char __user *buf, int in_len,
+ 				     int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_get_context      cmd;
  	struct ib_uverbs_get_context_resp resp;
@@@ -220,10 -224,9 +226,16 @@@ static void copy_query_dev_fields(struc
  	resp->phys_port_cnt		= ib_dev->phys_port_cnt;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_query_device(struct ib_uverbs_file *file,
 +			       struct ib_device *ib_dev,
 +			       const char __user *buf,
 +			       int in_len, int out_len)
++=======
+ static ssize_t ib_uverbs_query_device(struct ib_uverbs_file *file,
+ 				      const char __user *buf, int in_len,
+ 				      int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_query_device      cmd;
  	struct ib_uverbs_query_device_resp resp;
@@@ -264,10 -272,9 +276,16 @@@ static u32 make_port_cap_flags(const st
  	return res;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_query_port(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     const char __user *buf,
 +			     int in_len, int out_len)
++=======
+ static ssize_t ib_uverbs_query_port(struct ib_uverbs_file *file,
+ 				    const char __user *buf, int in_len,
+ 				    int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_query_port      cmd;
  	struct ib_uverbs_query_port_resp resp;
@@@ -323,10 -337,9 +341,16 @@@
  	return in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_alloc_pd(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   const char __user *buf,
 +			   int in_len, int out_len)
++=======
+ static ssize_t ib_uverbs_alloc_pd(struct ib_uverbs_file *file,
+ 				  const char __user *buf, int in_len,
+ 				  int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_alloc_pd      cmd;
  	struct ib_uverbs_alloc_pd_resp resp;
@@@ -384,10 -396,9 +408,16 @@@ err
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_dealloc_pd(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     const char __user *buf,
 +			     int in_len, int out_len)
++=======
+ static ssize_t ib_uverbs_dealloc_pd(struct ib_uverbs_file *file,
+ 				    const char __user *buf, int in_len,
+ 				    int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_dealloc_pd cmd;
  
@@@ -483,10 -494,9 +513,16 @@@ static void xrcd_table_delete(struct ib
  	}
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_open_xrcd(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    const char __user *buf, int in_len,
 +			    int out_len)
++=======
+ static ssize_t ib_uverbs_open_xrcd(struct ib_uverbs_file *file,
+ 				   const char __user *buf, int in_len,
+ 				   int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_open_xrcd	cmd;
  	struct ib_uverbs_open_xrcd_resp	resp;
@@@ -606,10 -615,9 +642,16 @@@ err_tree_mutex_unlock
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_close_xrcd(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     const char __user *buf, int in_len,
 +			     int out_len)
++=======
+ static ssize_t ib_uverbs_close_xrcd(struct ib_uverbs_file *file,
+ 				    const char __user *buf, int in_len,
+ 				    int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_close_xrcd cmd;
  
@@@ -641,10 -653,8 +683,15 @@@ int ib_uverbs_dealloc_xrcd(struct ib_uv
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_reg_mr(struct ib_uverbs_file *file,
 +			 struct ib_device *ib_dev,
 +			 const char __user *buf, int in_len,
 +			 int out_len)
++=======
+ static ssize_t ib_uverbs_reg_mr(struct ib_uverbs_file *file,
+ 				const char __user *buf, int in_len, int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_reg_mr      cmd;
  	struct ib_uverbs_reg_mr_resp resp;
@@@ -735,10 -744,9 +782,16 @@@ err_free
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_rereg_mr(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   const char __user *buf, int in_len,
 +			   int out_len)
++=======
+ static ssize_t ib_uverbs_rereg_mr(struct ib_uverbs_file *file,
+ 				  const char __user *buf, int in_len,
+ 				  int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_rereg_mr      cmd;
  	struct ib_uverbs_rereg_mr_resp resp;
@@@ -827,10 -835,9 +880,16 @@@ put_uobjs
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_dereg_mr(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   const char __user *buf, int in_len,
 +			   int out_len)
++=======
+ static ssize_t ib_uverbs_dereg_mr(struct ib_uverbs_file *file,
+ 				  const char __user *buf, int in_len,
+ 				  int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_dereg_mr cmd;
  
@@@ -841,10 -848,9 +900,16 @@@
  				    in_len);
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_alloc_mw(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   const char __user *buf, int in_len,
 +			   int out_len)
++=======
+ static ssize_t ib_uverbs_alloc_mw(struct ib_uverbs_file *file,
+ 				  const char __user *buf, int in_len,
+ 				  int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_alloc_mw      cmd;
  	struct ib_uverbs_alloc_mw_resp resp;
@@@ -911,10 -916,9 +976,16 @@@ err_free
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_dealloc_mw(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     const char __user *buf, int in_len,
 +			     int out_len)
++=======
+ static ssize_t ib_uverbs_dealloc_mw(struct ib_uverbs_file *file,
+ 				    const char __user *buf, int in_len,
+ 				    int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_dealloc_mw cmd;
  
@@@ -925,10 -929,9 +996,16 @@@
  				    in_len);
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_create_comp_channel(struct ib_uverbs_file *file,
 +				      struct ib_device *ib_dev,
 +				      const char __user *buf, int in_len,
 +				      int out_len)
++=======
+ static ssize_t ib_uverbs_create_comp_channel(struct ib_uverbs_file *file,
+ 					     const char __user *buf, int in_len,
+ 					     int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_create_comp_channel	   cmd;
  	struct ib_uverbs_create_comp_channel_resp  resp;
@@@ -1067,10 -1073,9 +1144,16 @@@ static int ib_uverbs_create_cq_cb(struc
  	return 0;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_create_cq(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    const char __user *buf, int in_len,
 +			    int out_len)
++=======
+ static ssize_t ib_uverbs_create_cq(struct ib_uverbs_file *file,
+ 				   const char __user *buf, int in_len,
+ 				   int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_create_cq      cmd;
  	struct ib_uverbs_ex_create_cq	cmd_ex;
@@@ -1121,10 -1126,8 +1204,15 @@@ static int ib_uverbs_ex_create_cq_cb(st
  	return 0;
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_create_cq(struct ib_uverbs_file *file,
 +			 struct ib_device *ib_dev,
 +			   struct ib_udata *ucore,
 +			   struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_create_cq(struct ib_uverbs_file *file,
+ 				  struct ib_udata *ucore, struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_create_cq_resp resp;
  	struct ib_uverbs_ex_create_cq  cmd;
@@@ -1155,10 -1158,9 +1243,16 @@@
  	return PTR_ERR_OR_ZERO(obj);
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_resize_cq(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    const char __user *buf, int in_len,
 +			    int out_len)
++=======
+ static ssize_t ib_uverbs_resize_cq(struct ib_uverbs_file *file,
+ 				   const char __user *buf, int in_len,
+ 				   int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_resize_cq	cmd;
  	struct ib_uverbs_resize_cq_resp	resp = {};
@@@ -1223,10 -1225,9 +1317,16 @@@ static int copy_wc_to_user(struct ib_de
  	return 0;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_poll_cq(struct ib_uverbs_file *file,
 +			  struct ib_device *ib_dev,
 +			  const char __user *buf, int in_len,
 +			  int out_len)
++=======
+ static ssize_t ib_uverbs_poll_cq(struct ib_uverbs_file *file,
+ 				 const char __user *buf, int in_len,
+ 				 int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_poll_cq       cmd;
  	struct ib_uverbs_poll_cq_resp  resp;
@@@ -1275,10 -1276,9 +1375,16 @@@ out_put
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_req_notify_cq(struct ib_uverbs_file *file,
 +				struct ib_device *ib_dev,
 +				const char __user *buf, int in_len,
 +				int out_len)
++=======
+ static ssize_t ib_uverbs_req_notify_cq(struct ib_uverbs_file *file,
+ 				       const char __user *buf, int in_len,
+ 				       int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_req_notify_cq cmd;
  	struct ib_cq                  *cq;
@@@ -1298,10 -1298,9 +1404,16 @@@
  	return in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_destroy_cq(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     const char __user *buf, int in_len,
 +			     int out_len)
++=======
+ static ssize_t ib_uverbs_destroy_cq(struct ib_uverbs_file *file,
+ 				    const char __user *buf, int in_len,
+ 				    int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_destroy_cq      cmd;
  	struct ib_uverbs_destroy_cq_resp resp;
@@@ -1629,10 -1613,9 +1741,16 @@@ static int ib_uverbs_create_qp_cb(struc
  	return 0;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_create_qp(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    const char __user *buf, int in_len,
 +			    int out_len)
++=======
+ static ssize_t ib_uverbs_create_qp(struct ib_uverbs_file *file,
+ 				   const char __user *buf, int in_len,
+ 				   int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_create_qp      cmd;
  	struct ib_uverbs_ex_create_qp	cmd_ex;
@@@ -1690,10 -1673,8 +1808,15 @@@ static int ib_uverbs_ex_create_qp_cb(st
  	return 0;
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_create_qp(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   struct ib_udata *ucore,
 +			   struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_create_qp(struct ib_uverbs_file *file,
+ 				  struct ib_udata *ucore, struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_create_qp_resp resp;
  	struct ib_uverbs_ex_create_qp cmd = {0};
@@@ -1727,9 -1708,9 +1850,15 @@@
  	return 0;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_open_qp(struct ib_uverbs_file *file,
 +			  struct ib_device *ib_dev,
 +			  const char __user *buf, int in_len, int out_len)
++=======
+ static ssize_t ib_uverbs_open_qp(struct ib_uverbs_file *file,
+ 				 const char __user *buf, int in_len,
+ 				 int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_open_qp        cmd;
  	struct ib_uverbs_create_qp_resp resp;
@@@ -1838,10 -1816,9 +1967,16 @@@ static void copy_ah_attr_to_uverbs(stru
  	uverb_attr->port_num          = rdma_ah_get_port_num(rdma_attr);
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_query_qp(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   const char __user *buf, int in_len,
 +			   int out_len)
++=======
+ static ssize_t ib_uverbs_query_qp(struct ib_uverbs_file *file,
+ 				  const char __user *buf, int in_len,
+ 				  int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_query_qp      cmd;
  	struct ib_uverbs_query_qp_resp resp;
@@@ -2112,10 -2089,9 +2247,16 @@@ out
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_modify_qp(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    const char __user *buf, int in_len,
 +			    int out_len)
++=======
+ static ssize_t ib_uverbs_modify_qp(struct ib_uverbs_file *file,
+ 				   const char __user *buf, int in_len,
+ 				   int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_modify_qp cmd = {};
  	struct ib_udata udata;
@@@ -2139,10 -2115,8 +2280,15 @@@
  	return in_len;
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_modify_qp(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   struct ib_udata *ucore,
 +			   struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_modify_qp(struct ib_uverbs_file *file,
+ 				  struct ib_udata *ucore, struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_modify_qp cmd = {};
  	int ret;
@@@ -2175,10 -2149,9 +2321,16 @@@
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_destroy_qp(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     const char __user *buf, int in_len,
 +			     int out_len)
++=======
+ static ssize_t ib_uverbs_destroy_qp(struct ib_uverbs_file *file,
+ 				    const char __user *buf, int in_len,
+ 				    int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_destroy_qp      cmd;
  	struct ib_uverbs_destroy_qp_resp resp;
@@@ -2228,10 -2187,9 +2380,16 @@@ static void *alloc_wr(size_t wr_size, _
  			 num_sge * sizeof (struct ib_sge), GFP_KERNEL);
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_post_send(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    const char __user *buf, int in_len,
 +			    int out_len)
++=======
+ static ssize_t ib_uverbs_post_send(struct ib_uverbs_file *file,
+ 				   const char __user *buf, int in_len,
+ 				   int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_post_send      cmd;
  	struct ib_uverbs_post_send_resp resp;
@@@ -2508,10 -2467,9 +2666,16 @@@ err
  	return ERR_PTR(ret);
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_post_recv(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    const char __user *buf, int in_len,
 +			    int out_len)
++=======
+ static ssize_t ib_uverbs_post_recv(struct ib_uverbs_file *file,
+ 				   const char __user *buf, int in_len,
+ 				   int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_post_recv      cmd;
  	struct ib_uverbs_post_recv_resp resp;
@@@ -2557,10 -2516,9 +2721,16 @@@ out
  	return ret ? ret : in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_post_srq_recv(struct ib_uverbs_file *file,
 +				struct ib_device *ib_dev,
 +				const char __user *buf, int in_len,
 +				int out_len)
++=======
+ static ssize_t ib_uverbs_post_srq_recv(struct ib_uverbs_file *file,
+ 				       const char __user *buf, int in_len,
+ 				       int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_post_srq_recv      cmd;
  	struct ib_uverbs_post_srq_recv_resp resp;
@@@ -2607,10 -2566,9 +2777,16 @@@ out
  	return ret ? ret : in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_create_ah(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    const char __user *buf, int in_len,
 +			    int out_len)
++=======
+ static ssize_t ib_uverbs_create_ah(struct ib_uverbs_file *file,
+ 				   const char __user *buf, int in_len,
+ 				   int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_create_ah	 cmd;
  	struct ib_uverbs_create_ah_resp	 resp;
@@@ -2696,9 -2655,9 +2872,15 @@@ err
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_destroy_ah(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     const char __user *buf, int in_len, int out_len)
++=======
+ static ssize_t ib_uverbs_destroy_ah(struct ib_uverbs_file *file,
+ 				    const char __user *buf, int in_len,
+ 				    int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_destroy_ah cmd;
  
@@@ -2709,10 -2668,9 +2891,16 @@@
  				    in_len);
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_attach_mcast(struct ib_uverbs_file *file,
 +			       struct ib_device *ib_dev,
 +			       const char __user *buf, int in_len,
 +			       int out_len)
++=======
+ static ssize_t ib_uverbs_attach_mcast(struct ib_uverbs_file *file,
+ 				      const char __user *buf, int in_len,
+ 				      int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_attach_mcast cmd;
  	struct ib_qp                 *qp;
@@@ -2759,10 -2717,9 +2947,16 @@@ out_put
  	return ret ? ret : in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_detach_mcast(struct ib_uverbs_file *file,
 +			       struct ib_device *ib_dev,
 +			       const char __user *buf, int in_len,
 +			       int out_len)
++=======
+ static ssize_t ib_uverbs_detach_mcast(struct ib_uverbs_file *file,
+ 				      const char __user *buf, int in_len,
+ 				      int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_detach_mcast cmd;
  	struct ib_uqp_object         *obj;
@@@ -3128,10 -3079,8 +3322,15 @@@ static int kern_spec_to_ib_spec(struct 
  		return kern_spec_to_ib_spec_filter(kern_spec, ib_spec);
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_create_wq(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   struct ib_udata *ucore,
 +			   struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_create_wq(struct ib_uverbs_file *file,
+ 				  struct ib_udata *ucore, struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_create_wq	  cmd = {};
  	struct ib_uverbs_ex_create_wq_resp resp = {};
@@@ -3245,10 -3194,8 +3444,15 @@@ err_uobj
  	return err;
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_destroy_wq(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    struct ib_udata *ucore,
 +			    struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_destroy_wq(struct ib_uverbs_file *file,
+ 				   struct ib_udata *ucore, struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_destroy_wq	cmd = {};
  	struct ib_uverbs_ex_destroy_wq_resp	resp = {};
@@@ -3301,10 -3239,8 +3505,15 @@@
  	return ib_copy_to_udata(ucore, &resp, resp.response_length);
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_modify_wq(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   struct ib_udata *ucore,
 +			   struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_modify_wq(struct ib_uverbs_file *file,
+ 				  struct ib_udata *ucore, struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_modify_wq cmd = {};
  	struct ib_wq *wq;
@@@ -3351,10 -3287,9 +3560,16 @@@ out
  	return ret;
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_create_rwq_ind_table(struct ib_uverbs_file *file,
 +				      struct ib_device *ib_dev,
 +				      struct ib_udata *ucore,
 +				      struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_create_rwq_ind_table(struct ib_uverbs_file *file,
+ 					     struct ib_udata *ucore,
+ 					     struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_create_rwq_ind_table	  cmd = {};
  	struct ib_uverbs_ex_create_rwq_ind_table_resp  resp = {};
@@@ -3495,10 -3430,9 +3710,16 @@@ err_free
  	return err;
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_destroy_rwq_ind_table(struct ib_uverbs_file *file,
 +				       struct ib_device *ib_dev,
 +				       struct ib_udata *ucore,
 +				       struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_destroy_rwq_ind_table(struct ib_uverbs_file *file,
+ 					      struct ib_udata *ucore,
+ 					      struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_destroy_rwq_ind_table	cmd = {};
  	int			ret;
@@@ -3525,10 -3459,9 +3746,16 @@@
  				    cmd.ind_tbl_handle, file, 0);
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_create_flow(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     struct ib_udata *ucore,
 +			     struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_create_flow(struct ib_uverbs_file *file,
+ 				    struct ib_udata *ucore,
+ 				    struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_create_flow	  cmd;
  	struct ib_uverbs_create_flow_resp resp;
@@@ -3705,10 -3637,9 +3932,16 @@@ err_free_attr
  	return err;
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_destroy_flow(struct ib_uverbs_file *file,
 +			      struct ib_device *ib_dev,
 +			      struct ib_udata *ucore,
 +			      struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_destroy_flow(struct ib_uverbs_file *file,
+ 				     struct ib_udata *ucore,
+ 				     struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_destroy_flow	cmd;
  	int				ret;
@@@ -3865,10 -3794,9 +4098,16 @@@ err
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_create_srq(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     const char __user *buf, int in_len,
 +			     int out_len)
++=======
+ static ssize_t ib_uverbs_create_srq(struct ib_uverbs_file *file,
+ 				    const char __user *buf, int in_len,
+ 				    int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_create_srq      cmd;
  	struct ib_uverbs_create_xsrq     xcmd;
@@@ -3903,9 -3831,9 +4142,15 @@@
  	return in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_create_xsrq(struct ib_uverbs_file *file,
 +			      struct ib_device *ib_dev,
 +			      const char __user *buf, int in_len, int out_len)
++=======
+ static ssize_t ib_uverbs_create_xsrq(struct ib_uverbs_file *file,
+ 				     const char __user *buf, int in_len,
+ 				     int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_create_xsrq     cmd;
  	struct ib_uverbs_create_srq_resp resp;
@@@ -3930,10 -3858,9 +4175,16 @@@
  	return in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_modify_srq(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     const char __user *buf, int in_len,
 +			     int out_len)
++=======
+ static ssize_t ib_uverbs_modify_srq(struct ib_uverbs_file *file,
+ 				    const char __user *buf, int in_len,
+ 				    int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_modify_srq cmd;
  	struct ib_udata             udata;
@@@ -3961,10 -3888,9 +4212,16 @@@
  	return ret ? ret : in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_query_srq(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    const char __user *buf,
 +			    int in_len, int out_len)
++=======
+ static ssize_t ib_uverbs_query_srq(struct ib_uverbs_file *file,
+ 				   const char __user *buf, int in_len,
+ 				   int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_query_srq      cmd;
  	struct ib_uverbs_query_srq_resp resp;
@@@ -4001,10 -3927,9 +4258,16 @@@
  	return in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_destroy_srq(struct ib_uverbs_file *file,
 +			      struct ib_device *ib_dev,
 +			      const char __user *buf, int in_len,
 +			      int out_len)
++=======
+ static ssize_t ib_uverbs_destroy_srq(struct ib_uverbs_file *file,
+ 				     const char __user *buf, int in_len,
+ 				     int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_destroy_srq      cmd;
  	struct ib_uverbs_destroy_srq_resp resp;
@@@ -4042,10 -3955,9 +4305,16 @@@
  	return in_len;
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_query_device(struct ib_uverbs_file *file,
 +			      struct ib_device *ib_dev,
 +			      struct ib_udata *ucore,
 +			      struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_query_device(struct ib_uverbs_file *file,
+ 				     struct ib_udata *ucore,
+ 				     struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_query_device_resp resp = { {0} };
  	struct ib_uverbs_ex_query_device  cmd;
@@@ -4163,10 -4082,8 +4432,15 @@@ end
  	return err;
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_modify_cq(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   struct ib_udata *ucore,
 +			   struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_modify_cq(struct ib_uverbs_file *file,
+ 				  struct ib_udata *ucore, struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_modify_cq cmd = {};
  	struct ib_cq *cq;
* Unmerged path drivers/infiniband/core/uverbs.h
* Unmerged path drivers/infiniband/core/uverbs_cmd.c
