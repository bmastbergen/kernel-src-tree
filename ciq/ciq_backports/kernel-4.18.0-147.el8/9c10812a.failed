mlxsw: core_acl_flex_actions: Add extack messages

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Nir Dotan <nird@mellanox.com>
commit 9c10812afe3ad45325145787973bcf863d51b057
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/9c10812a.failed

Return extack messages for failures in action set creation.
Errors may occur when action is not currently supported or due
to lack of resources.

	Signed-off-by: Nir Dotan <nird@mellanox.com>
	Reviewed-by: Jiri Pirko <jiri@mellanox.com>
	Signed-off-by: Ido Schimmel <idosch@mellanox.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 9c10812afe3ad45325145787973bcf863d51b057)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlxsw/core_acl_flex_actions.c
diff --cc drivers/net/ethernet/mellanox/mlxsw/core_acl_flex_actions.c
index e1b5604491e7,a4669e79fdf9..000000000000
--- a/drivers/net/ethernet/mellanox/mlxsw/core_acl_flex_actions.c
+++ b/drivers/net/ethernet/mellanox/mlxsw/core_acl_flex_actions.c
@@@ -766,8 -760,10 +766,15 @@@ int mlxsw_afa_block_append_vlan_modify(
  						  MLXSW_AFA_VLAN_CODE,
  						  MLXSW_AFA_VLAN_SIZE);
  
++<<<<<<< HEAD
 +	if (IS_ERR(act))
 +		return PTR_ERR(act);
++=======
+ 	if (!act) {
+ 		NL_SET_ERR_MSG_MOD(extack, "Cannot append vlan_modify action");
+ 		return -ENOBUFS;
+ 	}
++>>>>>>> 9c10812afe3a (mlxsw: core_acl_flex_actions: Add extack messages)
  	mlxsw_afa_vlan_pack(act, MLXSW_AFA_VLAN_VLAN_TAG_CMD_NOP,
  			    MLXSW_AFA_VLAN_CMD_SET_OUTER, vid,
  			    MLXSW_AFA_VLAN_CMD_SET_OUTER, pcp,
@@@ -1041,8 -1043,9 +1055,14 @@@ int mlxsw_afa_block_append_fwd(struct m
  
  	act = mlxsw_afa_block_append_action(block, MLXSW_AFA_FORWARD_CODE,
  					    MLXSW_AFA_FORWARD_SIZE);
++<<<<<<< HEAD
 +	if (IS_ERR(act)) {
 +		err = PTR_ERR(act);
++=======
+ 	if (!act) {
+ 		err = -ENOBUFS;
+ 		NL_SET_ERR_MSG_MOD(extack, "Cannot append forward action");
++>>>>>>> 9c10812afe3a (mlxsw: core_acl_flex_actions: Add extack messages)
  		goto err_append_action;
  	}
  	mlxsw_afa_forward_pack(act, MLXSW_AFA_FORWARD_TYPE_PBS,
@@@ -1170,8 -1176,10 +1193,15 @@@ int mlxsw_afa_block_append_fid_set(stru
  	char *act = mlxsw_afa_block_append_action(block,
  						  MLXSW_AFA_VIRFWD_CODE,
  						  MLXSW_AFA_VIRFWD_SIZE);
++<<<<<<< HEAD
 +	if (IS_ERR(act))
 +		return PTR_ERR(act);
++=======
+ 	if (!act) {
+ 		NL_SET_ERR_MSG_MOD(extack, "Cannot append fid_set action");
+ 		return -ENOBUFS;
+ 	}
++>>>>>>> 9c10812afe3a (mlxsw: core_acl_flex_actions: Add extack messages)
  	mlxsw_afa_virfwd_pack(act, MLXSW_AFA_VIRFWD_FID_CMD_SET, fid);
  	return 0;
  }
* Unmerged path drivers/net/ethernet/mellanox/mlxsw/core_acl_flex_actions.c
