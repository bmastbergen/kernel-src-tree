bpf: fix a compilation error when CONFIG_BPF_SYSCALL is not defined

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Yonghong Song <yhs@fb.com>
commit f6161a8f3036caa45f225486be39783e99e0fa29
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/f6161a8f.failed

Kernel test robot (lkp@intel.com) reports a compilation error at
  https://www.spinics.net/lists/netdev/msg534913.html
introduced by commit 838e96904ff3 ("bpf: Introduce bpf_func_info").

If CONFIG_BPF is defined and CONFIG_BPF_SYSCALL is not defined,
the following error will appear:
  kernel/bpf/core.c:414: undefined reference to `btf_type_by_id'
  kernel/bpf/core.c:415: undefined reference to `btf_name_by_offset'

When CONFIG_BPF_SYSCALL is not defined,
let us define stub inline functions for btf_type_by_id()
and btf_name_by_offset() in include/linux/btf.h.
This way, the compilation failure can be avoided.

Fixes: 838e96904ff3 ("bpf: Introduce bpf_func_info")
	Reported-by: kbuild test robot <lkp@intel.com>
	Cc: Martin KaFai Lau <kafai@fb.com>
	Signed-off-by: Yonghong Song <yhs@fb.com>
	Signed-off-by: Alexei Starovoitov <ast@kernel.org>
(cherry picked from commit f6161a8f3036caa45f225486be39783e99e0fa29)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/linux/btf.h
diff --cc include/linux/btf.h
index e076c4697049,8c2199b5d250..000000000000
--- a/include/linux/btf.h
+++ b/include/linux/btf.h
@@@ -46,5 -46,21 +46,24 @@@ void btf_type_seq_show(const struct bt
  		       struct seq_file *m);
  int btf_get_fd_by_id(u32 id);
  u32 btf_id(const struct btf *btf);
++<<<<<<< HEAD
++=======
+ 
+ #ifdef CONFIG_BPF_SYSCALL
+ const struct btf_type *btf_type_by_id(const struct btf *btf, u32 type_id);
+ const char *btf_name_by_offset(const struct btf *btf, u32 offset);
+ #else
+ static inline const struct btf_type *btf_type_by_id(const struct btf *btf,
+ 						    u32 type_id)
+ {
+ 	return NULL;
+ }
+ static inline const char *btf_name_by_offset(const struct btf *btf,
+ 					     u32 offset)
+ {
+ 	return NULL;
+ }
+ #endif
++>>>>>>> f6161a8f3036 (bpf: fix a compilation error when CONFIG_BPF_SYSCALL is not defined)
  
  #endif
* Unmerged path include/linux/btf.h
