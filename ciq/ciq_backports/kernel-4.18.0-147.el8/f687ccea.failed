RDMA/uverbs: Fix post send success return value in case of error

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Gal Pressman <galpress@amazon.com>
commit f687ccea10d23a9b0faed67ceac535b76604669a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/f687ccea.failed

If get QP object fails 'ret' must be assigned with a proper error code.

Fixes: 9a0738575f26 ("RDMA/uverbs: Use uverbs_response() for remaining response copying")
	Signed-off-by: Gal Pressman <galpress@amazon.com>
	Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
(cherry picked from commit f687ccea10d23a9b0faed67ceac535b76604669a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/core/uverbs_cmd.c
diff --cc drivers/infiniband/core/uverbs_cmd.c
index 300532a4cde8,1b82cb74276c..000000000000
--- a/drivers/infiniband/core/uverbs_cmd.c
+++ b/drivers/infiniband/core/uverbs_cmd.c
@@@ -2257,9 -2011,11 +2257,16 @@@ ssize_t ib_uverbs_post_send(struct ib_u
  	if (!user_wr)
  		return -ENOMEM;
  
++<<<<<<< HEAD
 +	qp = uobj_get_obj_read(qp, UVERBS_OBJECT_QP, cmd.qp_handle, file->ucontext);
 +	if (!qp)
++=======
+ 	qp = uobj_get_obj_read(qp, UVERBS_OBJECT_QP, cmd.qp_handle, attrs);
+ 	if (!qp) {
+ 		ret = -EINVAL;
++>>>>>>> f687ccea10d2 (RDMA/uverbs: Fix post send success return value in case of error)
  		goto out;
+ 	}
  
  	is_ud = qp->qp_type == IB_QPT_UD;
  	sg_ind = 0;
* Unmerged path drivers/infiniband/core/uverbs_cmd.c
