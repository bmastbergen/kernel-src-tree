RDMA/uverbs: Add a method to introspect handles in a context

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
commit-author Jason Gunthorpe <jgg@ziepe.ca>
commit 149d3845f4a548dbc83932fab3491aeb0b070b3a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/149d3845.failed

Introduce a helper function gather_objects_handle() to copy object handles
under a spin lock.

Expose these objects handles via the uverbs ioctl interface.

	Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
	Signed-off-by: Parav Pandit <parav@mellanox.com>
	Signed-off-by: Leon Romanovsky <leonro@mellanox.com>
(cherry picked from commit 149d3845f4a548dbc83932fab3491aeb0b070b3a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/core/uverbs_std_types_device.c
#	include/uapi/rdma/ib_user_ioctl_cmds.h
diff --cc include/uapi/rdma/ib_user_ioctl_cmds.h
index 2c881aaf05c2,cf6e5f575696..000000000000
--- a/include/uapi/rdma/ib_user_ioctl_cmds.h
+++ b/include/uapi/rdma/ib_user_ioctl_cmds.h
@@@ -63,6 -63,17 +63,20 @@@ enum 
  	UVERBS_ATTR_UHW_OUT,
  };
  
++<<<<<<< HEAD
++=======
+ enum uverbs_methods_device {
+ 	UVERBS_METHOD_INVOKE_WRITE,
+ 	UVERBS_METHOD_INFO_HANDLES,
+ };
+ 
+ enum uverbs_attrs_invoke_write_cmd_attr_ids {
+ 	UVERBS_ATTR_CORE_IN,
+ 	UVERBS_ATTR_CORE_OUT,
+ 	UVERBS_ATTR_WRITE_CMD,
+ };
+ 
++>>>>>>> 149d3845f4a5 (RDMA/uverbs: Add a method to introspect handles in a context)
  enum uverbs_attrs_create_cq_cmd_attr_ids {
  	UVERBS_ATTR_CREATE_CQ_HANDLE,
  	UVERBS_ATTR_CREATE_CQ_CQE,
* Unmerged path drivers/infiniband/core/uverbs_std_types_device.c
* Unmerged path drivers/infiniband/core/uverbs_std_types_device.c
* Unmerged path include/uapi/rdma/ib_user_ioctl_cmds.h
