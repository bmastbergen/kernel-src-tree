ASoC: simple-card: don't select DPCM via simple-audio-card

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-147.el8
Rebuild_CHGLOG: - [sound] ALSA: ASoC: simple-card: don't select DPCM via simple-audio-card (Jaroslav Kysela) [1683051]
Rebuild_FUZZ: 95.08%
commit-author Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
commit 42bf029a55a9bb8036f1d738a28dba2f7ec1e79d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-147.el8/42bf029a.failed

commit da215354eb55c ("ASoC: simple-card: merge simple-scu-card")
merged simple-scu-audio-card which can handle DPCM into
simple-audio-card.

By this patch, the judgement to select "normal sound card" or
"DPCM sound card" is based on its CPU/Codec DAI count.
But, because of it, existing "simple-audio-card" user who is
assuming "normal sound card" might select DPCM unintentionally.

To solve this issue, this patch allows "simple-audio-card" user
can select "normal sound card", and "simple-scu-audio-card" user
can select both "normal sound card" and "DPCM sound card".
This keeps compatibility collectry.

Fixes: da215354eb55c ("ASoC: simple-card: merge simple-scu-card")
	Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit 42bf029a55a9bb8036f1d738a28dba2f7ec1e79d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/generic/simple-card.c
diff --cc sound/soc/generic/simple-card.c
index b0e723824db7,34de32efc4c4..000000000000
--- a/sound/soc/generic/simple-card.c
+++ b/sound/soc/generic/simple-card.c
@@@ -15,6 -16,38 +16,41 @@@
  #include <sound/soc-dai.h>
  #include <sound/soc.h>
  
++<<<<<<< HEAD
++=======
+ #define DPCM_SELECTABLE 1
+ 
+ struct simple_priv {
+ 	struct snd_soc_card snd_card;
+ 	struct simple_dai_props {
+ 		struct asoc_simple_dai *cpu_dai;
+ 		struct asoc_simple_dai *codec_dai;
+ 		struct snd_soc_dai_link_component codecs; /* single codec */
+ 		struct snd_soc_dai_link_component platforms;
+ 		struct asoc_simple_card_data adata;
+ 		struct snd_soc_codec_conf *codec_conf;
+ 		unsigned int mclk_fs;
+ 	} *dai_props;
+ 	struct asoc_simple_jack hp_jack;
+ 	struct asoc_simple_jack mic_jack;
+ 	struct snd_soc_dai_link *dai_link;
+ 	struct asoc_simple_dai *dais;
+ 	struct snd_soc_codec_conf *codec_conf;
+ };
+ 
+ struct link_info {
+ 	int dais; /* number of dai  */
+ 	int link; /* number of link */
+ 	int conf; /* number of codec_conf */
+ 	int cpu;  /* turn for CPU / Codec */
+ };
+ 
+ #define simple_priv_to_card(priv) (&(priv)->snd_card)
+ #define simple_priv_to_props(priv, i) ((priv)->dai_props + (i))
+ #define simple_priv_to_dev(priv) (simple_priv_to_card(priv)->dev)
+ #define simple_priv_to_link(priv, i) (simple_priv_to_card(priv)->dai_link + (i))
+ 
++>>>>>>> 42bf029a55a9 (ASoC: simple-card: don't select DPCM via simple-audio-card)
  #define DAI	"sound-dai"
  #define CELL	"#sound-dai-cells"
  #define PREFIX	"simple-audio-card,"
* Unmerged path sound/soc/generic/simple-card.c
