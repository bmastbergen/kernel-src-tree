r8152: fix the issue about U1/U2

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author hayeswang <hayeswang@realtek.com>
commit b214396fb5890af58ff04b42deba7de5a2686338
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/b214396f.failed

- Disable U1/U2 during initialization.
- Disable lpm when linking is on, and enable it when linking is off.
- Disable U1/U2 when enabling runtime suspend.

It is possible to let hw stop working, if the U1/U2 request occurs
during some situations. The patch is used to avoid it.

	Signed-off-by: Hayes Wang <hayeswang@realtek.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit b214396fb5890af58ff04b42deba7de5a2686338)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/usb/r8152.c
diff --cc drivers/net/usb/r8152.c
index e3d600def538,e3a011046540..000000000000
--- a/drivers/net/usb/r8152.c
+++ b/drivers/net/usb/r8152.c
@@@ -3176,6 -3331,8 +3189,11 @@@ static void r8153_init(struct r8152 *tp
  	r8153_enable_eee(tp);
  	r8153_enable_aldps(tp);
  	r8152b_enable_fc(tp);
++<<<<<<< HEAD
++=======
+ 	rtl_tally_reset(tp);
+ 	r8153_u2p3en(tp, true);
++>>>>>>> b214396fb589 (r8152: fix the issue about U1/U2)
  }
  
  static int rtl8152_suspend(struct usb_interface *intf, pm_message_t message)
* Unmerged path drivers/net/usb/r8152.c
