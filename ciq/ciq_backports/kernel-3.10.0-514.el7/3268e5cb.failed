team: Advertise tunneling offload features

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Eran Ben Elisha <eranbe@mellanox.com>
commit 3268e5cb494d8778a5a67a9fa2b1bdb0243b77ad
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/3268e5cb.failed

When the underlying device supports offloads encapulated traffic,
we need to reflect that through the hw_enc_features field of the
team net-device.

This will cause the xmit path in the core networking stack to provide
team with encapsulated GSO frames to offload into the HW etc.

Using this over Mellanox ConnectX3-pro (mlx4 driver) card that supports
VXLAN offloads we got 36.0 Gbits/sec using eight iperf streams.

	Signed-off-by: Eran Ben Elisha <eranbe@mellanox.com>
	Signed-off-by: Jack Morgenstein <jackm@dev.mellanox.co.il>
	Reviewed-by: Or Gerlitz <ogerlitz@mellanox.com>
	Acked-by: Jiri Pirko <jiri@mellanox.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 3268e5cb494d8778a5a67a9fa2b1bdb0243b77ad)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/team/team.c
diff --cc drivers/net/team/team.c
index 1ace00778506,2528331de193..000000000000
--- a/drivers/net/team/team.c
+++ b/drivers/net/team/team.c
@@@ -2072,7 -2101,7 +2082,11 @@@ static void team_setup(struct net_devic
  			   NETIF_F_HW_VLAN_CTAG_RX |
  			   NETIF_F_HW_VLAN_CTAG_FILTER;
  
++<<<<<<< HEAD
 +	dev->hw_features &= ~(NETIF_F_ALL_CSUM & ~NETIF_F_HW_CSUM);
++=======
+ 	dev->hw_features |= NETIF_F_GSO_ENCAP_ALL;
++>>>>>>> 3268e5cb494d (team: Advertise tunneling offload features)
  	dev->features |= dev->hw_features;
  }
  
* Unmerged path drivers/net/team/team.c
