netfilter: xt_TEE: use IS_ENABLED(CONFIG_NF_DUP_IPV6)

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Pablo Neira Ayuso <pablo@netfilter.org>
commit 116984a316c3a3200f8a7912110cc4a6d6c0989e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/116984a3.failed

Instead of IS_ENABLED(CONFIG_IPV6), otherwise we hit:

et/built-in.o: In function `tee_tg6':
>> xt_TEE.c:(.text+0x6cd8c): undefined reference to `nf_dup_ipv6'

when:

 CONFIG_IPV6=y
 CONFIG_NF_DUP_IPV4=y
 # CONFIG_NF_DUP_IPV6 is not set
 CONFIG_NETFILTER_XT_TARGET_TEE=y

	Reported-by: kbuild test robot <fengguang.wu@intel.com>
	Signed-off-by: Pablo Neira Ayuso <pablo@netfilter.org>
(cherry picked from commit 116984a316c3a3200f8a7912110cc4a6d6c0989e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/netfilter/xt_TEE.c
diff --cc net/netfilter/xt_TEE.c
index 1323252c4f67,fd980aa7715d..000000000000
--- a/net/netfilter/xt_TEE.c
+++ b/net/netfilter/xt_TEE.c
@@@ -131,37 -37,7 +131,41 @@@ tee_tg4(struct sk_buff *skb, const stru
  	return XT_CONTINUE;
  }
  
++<<<<<<< HEAD
 +#if IS_ENABLED(CONFIG_IPV6)
 +static bool
 +tee_tg_route6(struct sk_buff *skb, const struct xt_tee_tginfo *info)
 +{
 +	const struct ipv6hdr *iph = ipv6_hdr(skb);
 +	struct net *net = pick_net(skb);
 +	struct dst_entry *dst;
 +	struct flowi6 fl6;
 +
 +	memset(&fl6, 0, sizeof(fl6));
 +	if (info->priv) {
 +		if (info->priv->oif == -1)
 +			return false;
 +		fl6.flowi6_oif = info->priv->oif;
 +	}
 +	fl6.daddr = info->gw.in6;
 +	fl6.flowlabel = ((iph->flow_lbl[0] & 0xF) << 16) |
 +			   (iph->flow_lbl[1] << 8) | iph->flow_lbl[2];
 +	fl6.flowi6_flags = FLOWI_FLAG_KNOWN_NH;
 +	dst = ip6_route_output(net, NULL, &fl6);
 +	if (dst->error) {
 +		dst_release(dst);
 +		return false;
 +	}
 +	skb_dst_drop(skb);
 +	skb_dst_set(skb, dst);
 +	skb->dev      = dst->dev;
 +	skb->protocol = htons(ETH_P_IPV6);
 +	return true;
 +}
 +
++=======
+ #if IS_ENABLED(CONFIG_NF_DUP_IPV6)
++>>>>>>> 116984a316c3 (netfilter: xt_TEE: use IS_ENABLED(CONFIG_NF_DUP_IPV6))
  static unsigned int
  tee_tg6(struct sk_buff *skb, const struct xt_action_param *par)
  {
* Unmerged path net/netfilter/xt_TEE.c
