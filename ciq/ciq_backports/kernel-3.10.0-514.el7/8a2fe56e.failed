net: phy: re-design phy_modes to be self-contained

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [x86] phy: re-design phy_modes to be self-contained (Prarit Bhargava) [1331018]
Rebuild_FUZZ: 94.74%
commit-author Florian Fainelli <f.fainelli@gmail.com>
commit 8a2fe56e8827f2b1eb1766702f0215074dd2767e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/8a2fe56e.failed

of_get_phy_mode() uses a local array to map phy_interface_t values from
include/linux/net/phy.h to a string which is read from the 'phy-mode' or
'phy-connection-type' property. In preparation for exposing the PHY
interface mode through sysfs, perform the following:

- mode phy_modes from drivers/of/of_net.c to include/linux/phy.h such
  that it is right below the phy_interface_t enum
- make it a static inline function returning the string such that we can
  use it by just including include/linux/net/phy.h
- add a PHY_INTERFACE_MODE_MAX enum value to guard the iteration in
  of_get_phy_mode()

	Signed-off-by: Florian Fainelli <f.fainelli@gmail.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 8a2fe56e8827f2b1eb1766702f0215074dd2767e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/of/of_net.c
#	include/linux/phy.h
diff --cc drivers/of/of_net.c
index ffab033d207e,84215c1929c4..000000000000
--- a/drivers/of/of_net.c
+++ b/drivers/of/of_net.c
@@@ -12,26 -12,6 +12,29 @@@
  #include <linux/export.h>
  
  /**
++<<<<<<< HEAD
 + * It maps 'enum phy_interface_t' found in include/linux/phy.h
 + * into the device tree binding of 'phy-mode', so that Ethernet
 + * device driver can get phy interface from device tree.
 + */
 +static const char *phy_modes[] = {
 +	[PHY_INTERFACE_MODE_NA]		= "",
 +	[PHY_INTERFACE_MODE_MII]	= "mii",
 +	[PHY_INTERFACE_MODE_GMII]	= "gmii",
 +	[PHY_INTERFACE_MODE_SGMII]	= "sgmii",
 +	[PHY_INTERFACE_MODE_TBI]	= "tbi",
 +	[PHY_INTERFACE_MODE_RMII]	= "rmii",
 +	[PHY_INTERFACE_MODE_RGMII]	= "rgmii",
 +	[PHY_INTERFACE_MODE_RGMII_ID]	= "rgmii-id",
 +	[PHY_INTERFACE_MODE_RGMII_RXID]	= "rgmii-rxid",
 +	[PHY_INTERFACE_MODE_RGMII_TXID] = "rgmii-txid",
 +	[PHY_INTERFACE_MODE_RTBI]	= "rtbi",
 +	[PHY_INTERFACE_MODE_SMII]	= "smii",
 +};
 +
 +/**
++=======
++>>>>>>> 8a2fe56e8827 (net: phy: re-design phy_modes to be self-contained)
   * of_get_phy_mode - Get phy mode for given device_node
   * @np:	Pointer to the given device_node
   *
diff --cc include/linux/phy.h
index 9e11039dd7a3,ef7fa1131145..000000000000
--- a/include/linux/phy.h
+++ b/include/linux/phy.h
@@@ -64,8 -73,51 +64,54 @@@ typedef enum 
  	PHY_INTERFACE_MODE_RGMII_TXID,
  	PHY_INTERFACE_MODE_RTBI,
  	PHY_INTERFACE_MODE_SMII,
++<<<<<<< HEAD
++=======
+ 	PHY_INTERFACE_MODE_XGMII,
+ 	PHY_INTERFACE_MODE_MAX,
++>>>>>>> 8a2fe56e8827 (net: phy: re-design phy_modes to be self-contained)
  } phy_interface_t;
  
+ /**
+  * It maps 'enum phy_interface_t' found in include/linux/phy.h
+  * into the device tree binding of 'phy-mode', so that Ethernet
+  * device driver can get phy interface from device tree.
+  */
+ static inline const char *phy_modes(phy_interface_t interface)
+ {
+ 	switch (interface) {
+ 	case PHY_INTERFACE_MODE_NA:
+ 		return "";
+ 	case PHY_INTERFACE_MODE_MII:
+ 		return "mii";
+ 	case PHY_INTERFACE_MODE_GMII:
+ 		return "gmii";
+ 	case PHY_INTERFACE_MODE_SGMII:
+ 		return "sgmii";
+ 	case PHY_INTERFACE_MODE_TBI:
+ 		return "tbi";
+ 	case PHY_INTERFACE_MODE_REVMII:
+ 		return "rev-mii";
+ 	case PHY_INTERFACE_MODE_RMII:
+ 		return "rmii";
+ 	case PHY_INTERFACE_MODE_RGMII:
+ 		return "rgmii";
+ 	case PHY_INTERFACE_MODE_RGMII_ID:
+ 		return "rgmii-id";
+ 	case PHY_INTERFACE_MODE_RGMII_RXID:
+ 		return "rgmii-rxid";
+ 	case PHY_INTERFACE_MODE_RGMII_TXID:
+ 		return "rgmii-txid";
+ 	case PHY_INTERFACE_MODE_RTBI:
+ 		return "rtbi";
+ 	case PHY_INTERFACE_MODE_SMII:
+ 		return "smii";
+ 	case PHY_INTERFACE_MODE_XGMII:
+ 		return "xgmii";
+ 	default:
+ 		return "unknown";
+ 	}
+ }
+ 
  
  #define PHY_INIT_TIMEOUT	100000
  #define PHY_STATE_TIME		1
* Unmerged path drivers/of/of_net.c
* Unmerged path include/linux/phy.h
