mmc: sdhci-pci: enable runtime pm for Intel Merrifield platform

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [mmc] sdhci-pci: enable runtime pm for Intel Merrifield platform (Don Zickus) [1127975 1277866 1280133 1286932 1297039]
Rebuild_FUZZ: 95.87%
commit-author Gao, Yunpeng <yunpeng.gao@intel.com>
commit f1b55a55e4ee6fe6d791cff994f6e4d990f69c1e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/f1b55a55.failed

Enable runtime pm support on Intel Merrifield platform.

	Signed-off-by: Yunpeng Gao <yunpeng.gao@intel.com>
	Signed-off-by: Ulf Hansson <ulf.hansson@linaro.org>
(cherry picked from commit f1b55a55e4ee6fe6d791cff994f6e4d990f69c1e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/mmc/host/sdhci-pci.c
diff --cc drivers/mmc/host/sdhci-pci.c
index 7d850f6ecc74,ff9ab62e6eef..000000000000
--- a/drivers/mmc/host/sdhci-pci.c
+++ b/drivers/mmc/host/sdhci-pci.c
@@@ -277,6 -298,30 +277,33 @@@ static const struct sdhci_pci_fixes sdh
  	.own_cd_for_runtime_pm = true,
  };
  
++<<<<<<< HEAD
++=======
+ /* Define Host controllers for Intel Merrifield platform */
+ #define INTEL_MRFL_EMMC_0	0
+ #define INTEL_MRFL_EMMC_1	1
+ 
+ static int intel_mrfl_mmc_probe_slot(struct sdhci_pci_slot *slot)
+ {
+ 	if ((PCI_FUNC(slot->chip->pdev->devfn) != INTEL_MRFL_EMMC_0) &&
+ 	    (PCI_FUNC(slot->chip->pdev->devfn) != INTEL_MRFL_EMMC_1))
+ 		/* SD support is not ready yet */
+ 		return -ENODEV;
+ 
+ 	slot->host->mmc->caps |= MMC_CAP_8_BIT_DATA | MMC_CAP_NONREMOVABLE |
+ 				 MMC_CAP_1_8V_DDR;
+ 
+ 	return 0;
+ }
+ 
+ static const struct sdhci_pci_fixes sdhci_intel_mrfl_mmc = {
+ 	.quirks		= SDHCI_QUIRK_NO_ENDATTR_IN_NOPDESC,
+ 	.quirks2	= SDHCI_QUIRK2_BROKEN_HS200,
+ 	.allow_runtime_pm = true,
+ 	.probe_slot	= intel_mrfl_mmc_probe_slot,
+ };
+ 
++>>>>>>> f1b55a55e4ee (mmc: sdhci-pci: enable runtime pm for Intel Merrifield platform)
  /* O2Micro extra registers */
  #define O2_SD_LOCK_WP		0xD3
  #define O2_SD_MULTI_VCC3V	0xEE
* Unmerged path drivers/mmc/host/sdhci-pci.c
