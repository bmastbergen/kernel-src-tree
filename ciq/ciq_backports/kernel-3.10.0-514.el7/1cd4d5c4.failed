sctp: remove the unused sctp_datamsg_free()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Xin Long <lucien.xin@gmail.com>
commit 1cd4d5c4326a7ed3bb0e346bd7d20f5057a80ae6
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/1cd4d5c4.failed

Since commit 8b570dc9f7b6 ("sctp: only drop the reference on the datamsg
after sending a msg") used sctp_datamsg_put in sctp_sendmsg, instead of
sctp_datamsg_free, this function has no use in sctp.

So we will remove it.

	Signed-off-by: Xin Long <lucien.xin@gmail.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 1cd4d5c4326a7ed3bb0e346bd7d20f5057a80ae6)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/net/sctp/structs.h
diff --cc include/net/sctp/structs.h
index 5b5924bb5c84,d05b56641abc..000000000000
--- a/include/net/sctp/structs.h
+++ b/include/net/sctp/structs.h
@@@ -542,8 -534,7 +542,12 @@@ struct sctp_datamsg 
  
  struct sctp_datamsg *sctp_datamsg_from_user(struct sctp_association *,
  					    struct sctp_sndrcvinfo *,
++<<<<<<< HEAD
 +					    struct msghdr *, int len);
 +void sctp_datamsg_free(struct sctp_datamsg *);
++=======
+ 					    struct iov_iter *);
++>>>>>>> 1cd4d5c4326a (sctp: remove the unused sctp_datamsg_free())
  void sctp_datamsg_put(struct sctp_datamsg *);
  void sctp_chunk_fail(struct sctp_chunk *, int error);
  int sctp_chunk_abandoned(struct sctp_chunk *);
* Unmerged path include/net/sctp/structs.h
diff --git a/net/sctp/chunk.c b/net/sctp/chunk.c
index 9c5bf4f38327..4d118ef41a08 100644
--- a/net/sctp/chunk.c
+++ b/net/sctp/chunk.c
@@ -77,19 +77,6 @@ SCTP_STATIC struct sctp_datamsg *sctp_datamsg_new(gfp_t gfp)
 	return msg;
 }
 
-void sctp_datamsg_free(struct sctp_datamsg *msg)
-{
-	struct sctp_chunk *chunk;
-
-	/* This doesn't have to be a _safe vairant because
-	 * sctp_chunk_free() only drops the refs.
-	 */
-	list_for_each_entry(chunk, &msg->chunks, frag_list)
-		sctp_chunk_free(chunk);
-
-	sctp_datamsg_put(msg);
-}
-
 /* Final destructruction of datamsg memory. */
 static void sctp_datamsg_destroy(struct sctp_datamsg *msg)
 {
