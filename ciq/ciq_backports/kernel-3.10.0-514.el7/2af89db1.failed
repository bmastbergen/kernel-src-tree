mei: simplify handling of hbm client events

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Tomas Winkler <tomas.winkler@intel.com>
commit 2af89db1d61a872e5f2f1fb18d44cf5d8f5f6a2a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/2af89db1.failed

Add mei_hbm_cl_find_by_cmd handler to retrieve
the destination client

	Signed-off-by: Tomas Winkler <tomas.winkler@intel.com>
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 2af89db1d61a872e5f2f1fb18d44cf5d8f5f6a2a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/misc/mei/hbm.c
diff --cc drivers/misc/mei/hbm.c
index 73ad7c293b22,280befc46d11..000000000000
--- a/drivers/misc/mei/hbm.c
+++ b/drivers/misc/mei/hbm.c
@@@ -447,16 -480,11 +468,24 @@@ static void mei_hbm_cl_flow_control_res
  		return;
  	}
  
++<<<<<<< HEAD
 +	/* normal connection */
 +	list_for_each_entry(cl, &dev->file_list, link) {
 +		if (mei_hbm_cl_addr_equal(cl, flow_control)) {
 +			cl->mei_flow_ctrl_creds++;
 +			dev_dbg(&dev->pdev->dev, "flow ctrl msg for host %d ME %d.\n",
 +				flow_control->host_addr, flow_control->me_addr);
 +			dev_dbg(&dev->pdev->dev, "flow control credentials = %d.\n",
 +				    cl->mei_flow_ctrl_creds);
 +				break;
 +		}
++=======
+ 	cl = mei_hbm_cl_find_by_cmd(dev, flow_control);
+ 	if (cl) {
+ 		cl->mei_flow_ctrl_creds++;
+ 		cl_dbg(dev, cl, "flow control creds = %d.\n",
+ 				cl->mei_flow_ctrl_creds);
++>>>>>>> 2af89db1d61a (mei: simplify handling of hbm client events)
  	}
  }
  
* Unmerged path drivers/misc/mei/hbm.c
