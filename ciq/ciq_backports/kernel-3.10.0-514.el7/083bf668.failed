ACPI: make acpi_create_platform_device() an external API

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Zhang Rui <rui.zhang@intel.com>
commit 083bf668cb70e47b84db64856606e94beac87f01
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/083bf668.failed

	Signed-off-by: Zhang Rui <rui.zhang@intel.com>
(cherry picked from commit 083bf668cb70e47b84db64856606e94beac87f01)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/acpi/acpi_platform.c
#	include/linux/acpi.h
diff --cc drivers/acpi/acpi_platform.c
index 4a7dc6c4e2de,a3c89a1bcf54..000000000000
--- a/drivers/acpi/acpi_platform.c
+++ b/drivers/acpi/acpi_platform.c
@@@ -112,20 -113,4 +112,24 @@@ struct platform_device *acpi_create_pla
  	kfree(resources);
  	return pdev;
  }
++<<<<<<< HEAD
 +
 +static int acpi_platform_attach(struct acpi_device *adev,
 +				const struct acpi_device_id *id)
 +{
 +	acpi_create_platform_device(adev);
 +	return 1;
 +}
 +
 +static struct acpi_scan_handler platform_handler = {
 +	.ids = acpi_platform_device_ids,
 +	.attach = acpi_platform_attach,
 +};
 +
 +void __init acpi_platform_init(void)
 +{
 +	acpi_scan_add_handler(&platform_handler);
 +}
++=======
+ EXPORT_SYMBOL_GPL(acpi_create_platform_device);
++>>>>>>> 083bf668cb70 (ACPI: make acpi_create_platform_device() an external API)
diff --cc include/linux/acpi.h
index b227b042935b,2c24c2c1be45..000000000000
--- a/include/linux/acpi.h
+++ b/include/linux/acpi.h
@@@ -415,6 -429,10 +415,13 @@@ static inline bool acpi_driver_match_de
  	return !!acpi_match_device(drv->acpi_match_table, dev);
  }
  
++<<<<<<< HEAD
++=======
+ int acpi_device_uevent_modalias(struct device *, struct kobj_uevent_env *);
+ int acpi_device_modalias(struct device *, char *, int);
+ 
+ struct platform_device *acpi_create_platform_device(struct acpi_device *);
++>>>>>>> 083bf668cb70 (ACPI: make acpi_create_platform_device() an external API)
  #define ACPI_PTR(_ptr)	(_ptr)
  
  #else	/* !CONFIG_ACPI */
* Unmerged path drivers/acpi/acpi_platform.c
diff --git a/drivers/acpi/internal.h b/drivers/acpi/internal.h
index 7d374d497109..b4d4ed31a10d 100644
--- a/drivers/acpi/internal.h
+++ b/drivers/acpi/internal.h
@@ -167,13 +167,6 @@ static inline int suspend_nvs_save(void) { return 0; }
 static inline void suspend_nvs_restore(void) {}
 #endif
 
-/*--------------------------------------------------------------------------
-				Platform bus support
-  -------------------------------------------------------------------------- */
-struct platform_device;
-
-struct platform_device *acpi_create_platform_device(struct acpi_device *adev);
-
 /*--------------------------------------------------------------------------
 					Video
   -------------------------------------------------------------------------- */
* Unmerged path include/linux/acpi.h
