bnxt_en: More robust SRIOV cleanup sequence.

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [netdrv] bnxt_en: More robust SRIOV cleanup sequence (John Linville) [1184635 1312277]
Rebuild_FUZZ: 98.85%
commit-author Jeffrey Huang <huangjw@broadcom.com>
commit 4bb6cdce386d620d10d2588ea5bf4093a3b21ab9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/4bb6cdce.failed

Instead of always calling pci_sriov_disable() in remove_one(),
the driver should detect whether VFs are currently assigned
to the VMs. If the VFs are active in VMs, then it should not
disable SRIOV as it is catastrophic to the VMs. Instead,
it just leaves the VFs alone and continues to unload the PF.
The user can then cleanup the VMs even after the PF driver
has been unloaded.

	Signed-off-by: Jeffrey Huang <huangjw@broadcom.com>
	Signed-off-by: Michael Chan <mchan@broadcom.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 4bb6cdce386d620d10d2588ea5bf4093a3b21ab9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/broadcom/bnxt/bnxt_sriov.c
* Unmerged path drivers/net/ethernet/broadcom/bnxt/bnxt_sriov.c
* Unmerged path drivers/net/ethernet/broadcom/bnxt/bnxt_sriov.c
