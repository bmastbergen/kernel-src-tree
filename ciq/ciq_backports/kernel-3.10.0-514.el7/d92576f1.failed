dax: does not work correctly with virtual aliasing caches

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Matthew Wilcox <matthew.r.wilcox@intel.com>
commit d92576f1167cacf7844e5993f343eed4a6d8a147
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/d92576f1.failed

The DAX code accesses the underlying storage through the kernel's linear
mapping, which may not be cache-coherent with user mappings on ARM, MIPS
or SPARC.  Temporarily disable the DAX code until this problem is
resolved.

The original XIP code also had this problem, but it was never noticed.

	Signed-off-by: Matthew Wilcox <matthew.r.wilcox@intel.com>
	Cc: Andreas Dilger <andreas.dilger@intel.com>
	Cc: Boaz Harrosh <boaz@plexistor.com>
	Cc: Christoph Hellwig <hch@lst.de>
	Cc: Dave Chinner <david@fromorbit.com>
	Cc: Jan Kara <jack@suse.cz>
	Cc: Jens Axboe <axboe@kernel.dk>
	Cc: Kirill A. Shutemov <kirill.shutemov@linux.intel.com>
	Cc: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
	Cc: Randy Dunlap <rdunlap@infradead.org>
	Cc: Ross Zwisler <ross.zwisler@linux.intel.com>
	Cc: Theodore Ts'o <tytso@mit.edu>
	Cc: Ralf Baechle <ralf@linux-mips.org>
	Cc: Russell King <rmk@arm.linux.org.uk>
	Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
	Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
(cherry picked from commit d92576f1167cacf7844e5993f343eed4a6d8a147)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	Documentation/filesystems/dax.txt
#	fs/Kconfig
diff --cc fs/Kconfig
index 308e01b49774,ec35851e5b71..000000000000
--- a/fs/Kconfig
+++ b/fs/Kconfig
@@@ -40,6 -33,21 +40,24 @@@ source "fs/ocfs2/Kconfig
  source "fs/btrfs/Kconfig"
  source "fs/nilfs2/Kconfig"
  
++<<<<<<< HEAD
++=======
+ config FS_DAX
+ 	bool "Direct Access (DAX) support"
+ 	depends on MMU
+ 	depends on !(ARM || MIPS || SPARC)
+ 	help
+ 	  Direct Access (DAX) can be used on memory-backed block devices.
+ 	  If the block device supports DAX and the filesystem supports DAX,
+ 	  then you can avoid using the pagecache to buffer I/Os.  Turning
+ 	  on this option will compile in support for DAX; you will need to
+ 	  mount the filesystem using the -o dax option.
+ 
+ 	  If you do not have a block device that is capable of using this,
+ 	  or if unsure, say N.  Saying Y will increase the size of the kernel
+ 	  by about 5kB.
+ 
++>>>>>>> d92576f1167c (dax: does not work correctly with virtual aliasing caches)
  endif # BLOCK
  
  # Posix ACL utility routines
* Unmerged path Documentation/filesystems/dax.txt
* Unmerged path Documentation/filesystems/dax.txt
* Unmerged path fs/Kconfig
