fs/9p: remove unnecessary new_valid_dev() checks

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [fs] btrfs: remove unnecessary new_valid_dev() check (Bill O'Donnell) [1298680]
Rebuild_FUZZ: 92.63%
commit-author Yaowei Bai <bywxiaobai@163.com>
commit 349c7037b15927eed3cc8a5dbc08639dea654ea5
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/349c7037.failed

new_valid_dev() always returns 1, so the !new_valid_dev() check is not
needed.  Remove it.

	Signed-off-by: Yaowei Bai <bywxiaobai@163.com>
	Cc: Alexander Viro <viro@zeniv.linux.org.uk>
	Cc: Eric Van Hensbergen <ericvh@gmail.com>
	Cc: Ron Minnich <rminnich@sandia.gov>
	Cc: Latchesar Ionkov <lucho@ionkov.net>
	Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
	Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
(cherry picked from commit 349c7037b15927eed3cc8a5dbc08639dea654ea5)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/9p/vfs_inode.c
diff --cc fs/9p/vfs_inode.c
index c05c0a842783,699941e90667..000000000000
--- a/fs/9p/vfs_inode.c
+++ b/fs/9p/vfs_inode.c
@@@ -1427,19 -1361,13 +1427,22 @@@ v9fs_vfs_mknod(struct inode *dir, struc
  {
  	struct v9fs_session_info *v9ses = v9fs_inode2v9ses(dir);
  	int retval;
 -	char name[2 + U32_MAX_DIGITS + 1 + U32_MAX_DIGITS + 1];
 +	char *name;
  	u32 perm;
  
 -	p9_debug(P9_DEBUG_VFS, " %lu,%pd mode: %hx MAJOR: %u MINOR: %u\n",
 -		 dir->i_ino, dentry, mode,
 +	p9_debug(P9_DEBUG_VFS, " %lu,%s mode: %hx MAJOR: %u MINOR: %u\n",
 +		 dir->i_ino, dentry->d_name.name, mode,
  		 MAJOR(rdev), MINOR(rdev));
  
++<<<<<<< HEAD
 +	if (!new_valid_dev(rdev))
 +		return -EINVAL;
 +
 +	name = __getname();
 +	if (!name)
 +		return -ENOMEM;
++=======
++>>>>>>> 349c7037b159 (fs/9p: remove unnecessary new_valid_dev() checks)
  	/* build extension */
  	if (S_ISBLK(mode))
  		sprintf(name, "b %u %u", MAJOR(rdev), MINOR(rdev));
* Unmerged path fs/9p/vfs_inode.c
diff --git a/fs/9p/vfs_inode_dotl.c b/fs/9p/vfs_inode_dotl.c
index a7c481402c46..40c5ff859d38 100644
--- a/fs/9p/vfs_inode_dotl.c
+++ b/fs/9p/vfs_inode_dotl.c
@@ -842,9 +842,6 @@ v9fs_vfs_mknod_dotl(struct inode *dir, struct dentry *dentry, umode_t omode,
 		 dir->i_ino, dentry->d_name.name, omode,
 		 MAJOR(rdev), MINOR(rdev));
 
-	if (!new_valid_dev(rdev))
-		return -EINVAL;
-
 	v9ses = v9fs_inode2v9ses(dir);
 	dir_dentry = dentry->d_parent;
 	dfid = v9fs_fid_lookup(dir_dentry);
