net/mlx5e: Add TX stateless offloads for tunneling

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [netdrv] mlx5e: Add TX stateless offloads for tunneling (kamal heib) [1275159 1296272 1296405 1298421 1298422 1298423 1298424 1298425]
Rebuild_FUZZ: 95.83%
commit-author Matthew Finlay <matt@mellanox.com>
commit 9879515895ffe46a424d00ad5ce92e32fd61790b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/98795158.failed

Add support for TSO and TX checksum when using hw assisted,
tunneled offloads.

	Signed-off-by: Matthew Finlay <matt@mellanox.com>
	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 9879515895ffe46a424d00ad5ce92e32fd61790b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/en_tx.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/en_tx.c
index 3723f0407c45,6ce2884388cc..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_tx.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_tx.c
@@@ -181,10 -205,15 +186,22 @@@ static netdev_tx_t mlx5e_sq_xmit(struc
  
  		eseg->mss    = cpu_to_be16(skb_shinfo(skb)->gso_size);
  		opcode       = MLX5_OPCODE_LSO;
++<<<<<<< HEAD
 +		ihs          = skb_transport_offset(skb) + tcp_hdrlen(skb);
 +		payload_len  = skb->len - ihs;
 +		MLX5E_TX_SKB_CB(skb)->num_bytes = skb->len +
 +					(skb_shinfo(skb)->gso_segs - 1) * ihs;
++=======
+ 
+ 		if (skb->encapsulation)
+ 			ihs = skb_inner_transport_offset(skb) + inner_tcp_hdrlen(skb);
+ 		else
+ 			ihs = skb_transport_offset(skb) + tcp_hdrlen(skb);
+ 
+ 		payload_len   = skb->len - ihs;
+ 		wi->num_bytes = skb->len +
+ 				(skb_shinfo(skb)->gso_segs - 1) * ihs;
++>>>>>>> 9879515895ff (net/mlx5e: Add TX stateless offloads for tunneling)
  		sq->stats.tso_packets++;
  		sq->stats.tso_bytes += payload_len;
  	} else {
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en_tx.c
