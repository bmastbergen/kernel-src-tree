ALSA: hda - Fixup speaker pass-through control for nid 0x14 on ALC225

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author David Henningsson <david.henningsson@canonical.com>
commit 2ae955774f29bbd7d16149cb0ae8d0319bf2ecc4
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/2ae95577.failed

On one of the machines we enable, we found that the actual speaker volume
did not always correspond to the volume set in alsamixer. This patch
fixes that problem.

This patch was orginally written by Kailang @ Realtek, I've rebased it
to fit sound git master.

	Cc: stable@vger.kernel.org
BugLink: https://bugs.launchpad.net/bugs/1549660
Co-Authored-By: Kailang <kailang@realtek.com>
	Signed-off-by: David Henningsson <david.henningsson@canonical.com>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit 2ae955774f29bbd7d16149cb0ae8d0319bf2ecc4)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/pci/hda/patch_realtek.c
diff --cc sound/pci/hda/patch_realtek.c
index f7eaa61d76ee,7fded69fb58e..000000000000
--- a/sound/pci/hda/patch_realtek.c
+++ b/sound/pci/hda/patch_realtek.c
@@@ -4673,7 -4746,18 +4680,16 @@@ enum 
  	ALC288_FIXUP_DELL_HEADSET_MODE,
  	ALC288_FIXUP_DELL1_MIC_NO_PRESENCE,
  	ALC288_FIXUP_DELL_XPS_13_GPIO6,
 -	ALC288_FIXUP_DELL_XPS_13,
 -	ALC288_FIXUP_DISABLE_AAMIX,
 -	ALC292_FIXUP_DELL_E7X,
 -	ALC292_FIXUP_DISABLE_AAMIX,
 -	ALC293_FIXUP_DISABLE_AAMIX_MULTIJACK,
  	ALC298_FIXUP_DELL1_MIC_NO_PRESENCE,
++<<<<<<< HEAD
++=======
+ 	ALC275_FIXUP_DELL_XPS,
+ 	ALC256_FIXUP_DELL_XPS_13_HEADPHONE_NOISE,
+ 	ALC293_FIXUP_LENOVO_SPK_NOISE,
+ 	ALC233_FIXUP_LENOVO_LINE2_MIC_HOTKEY,
+ 	ALC255_FIXUP_DELL_SPK_NOISE,
+ 	ALC225_FIXUP_DELL1_MIC_NO_PRESENCE,
++>>>>>>> 2ae955774f29 (ALSA: hda - Fixup speaker pass-through control for nid 0x14 on ALC225)
  };
  
  static const struct hda_fixup alc269_fixups[] = {
@@@ -5225,6 -5345,55 +5241,58 @@@
  		.chained = true,
  		.chain_id = ALC269_FIXUP_HEADSET_MODE
  	},
++<<<<<<< HEAD
++=======
+ 	[ALC275_FIXUP_DELL_XPS] = {
+ 		.type = HDA_FIXUP_VERBS,
+ 		.v.verbs = (const struct hda_verb[]) {
+ 			/* Enables internal speaker */
+ 			{0x20, AC_VERB_SET_COEF_INDEX, 0x1f},
+ 			{0x20, AC_VERB_SET_PROC_COEF, 0x00c0},
+ 			{0x20, AC_VERB_SET_COEF_INDEX, 0x30},
+ 			{0x20, AC_VERB_SET_PROC_COEF, 0x00b1},
+ 			{}
+ 		}
+ 	},
+ 	[ALC256_FIXUP_DELL_XPS_13_HEADPHONE_NOISE] = {
+ 		.type = HDA_FIXUP_VERBS,
+ 		.v.verbs = (const struct hda_verb[]) {
+ 			/* Disable pass-through path for FRONT 14h */
+ 			{0x20, AC_VERB_SET_COEF_INDEX, 0x36},
+ 			{0x20, AC_VERB_SET_PROC_COEF, 0x1737},
+ 			{}
+ 		},
+ 		.chained = true,
+ 		.chain_id = ALC255_FIXUP_DELL1_MIC_NO_PRESENCE
+ 	},
+ 	[ALC293_FIXUP_LENOVO_SPK_NOISE] = {
+ 		.type = HDA_FIXUP_FUNC,
+ 		.v.func = alc_fixup_disable_aamix,
+ 		.chained = true,
+ 		.chain_id = ALC269_FIXUP_THINKPAD_ACPI
+ 	},
+ 	[ALC233_FIXUP_LENOVO_LINE2_MIC_HOTKEY] = {
+ 		.type = HDA_FIXUP_FUNC,
+ 		.v.func = alc233_fixup_lenovo_line2_mic_hotkey,
+ 	},
+ 	[ALC255_FIXUP_DELL_SPK_NOISE] = {
+ 		.type = HDA_FIXUP_FUNC,
+ 		.v.func = alc_fixup_disable_aamix,
+ 		.chained = true,
+ 		.chain_id = ALC255_FIXUP_DELL1_MIC_NO_PRESENCE
+ 	},
+ 	[ALC225_FIXUP_DELL1_MIC_NO_PRESENCE] = {
+ 		.type = HDA_FIXUP_VERBS,
+ 		.v.verbs = (const struct hda_verb[]) {
+ 			/* Disable pass-through path for FRONT 14h */
+ 			{ 0x20, AC_VERB_SET_COEF_INDEX, 0x36 },
+ 			{ 0x20, AC_VERB_SET_PROC_COEF, 0x57d7 },
+ 			{}
+ 		},
+ 		.chained = true,
+ 		.chain_id = ALC269_FIXUP_DELL1_MIC_NO_PRESENCE
+ 	},
++>>>>>>> 2ae955774f29 (ALSA: hda - Fixup speaker pass-through control for nid 0x14 on ALC225)
  };
  
  static const struct snd_pci_quirk alc269_fixup_tbl[] = {
* Unmerged path sound/pci/hda/patch_realtek.c
