perf tools: Adds the config_term callback for different type events

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author He Kuang <hekuang@huawei.com>
commit 0b8891a8e62cb537b65ebc55cfbbb4ec22333c44
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/0b8891a8.failed

Currently, function config_term() is used for checking config terms of
all types of events, while unknown terms is not reported as an error
because pmu events have valid terms in sysfs.

But this is wrong when unknown terms are specificed to hw/sw events.
This patch Adds the config_term callback so we can use separate check
routines for each type of events.

	Signed-off-by: He Kuang <hekuang@huawei.com>
	Acked-by: Jiri Olsa <jolsa@kernel.org>
	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: Kan Liang <kan.liang@intel.com>
	Cc: Peter Zijlstra <a.p.zijlstra@chello.nl>
	Cc: Wang Nan <wangnan0@huawei.com>
	Cc: pi3orama@163.com
Link: http://lkml.kernel.org/r/1443412336-120050-1-git-send-email-hekuang@huawei.com
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 0b8891a8e62cb537b65ebc55cfbbb4ec22333c44)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/util/parse-events.c
diff --cc tools/perf/util/parse-events.c
index fd7bc5047cba,9dc3fb6ee81e..000000000000
--- a/tools/perf/util/parse-events.c
+++ b/tools/perf/util/parse-events.c
@@@ -667,11 -747,16 +680,18 @@@ int parse_events_add_numeric(struct par
  	attr.type = type;
  	attr.config = config;
  
++<<<<<<< HEAD
 +	if (head_config &&
 +	    config_attr(&attr, head_config, data->error))
 +		return -EINVAL;
++=======
+ 	if (head_config) {
+ 		if (config_attr(&attr, head_config, data->error,
+ 				config_term_common))
+ 			return -EINVAL;
++>>>>>>> 0b8891a8e62c (perf tools: Adds the config_term callback for different type events)
  
 -		if (get_config_terms(head_config, &config_terms))
 -			return -ENOMEM;
 -	}
 -
 -	return add_event(list, &data->idx, &attr, NULL, &config_terms);
 +	return add_event(list, &data->idx, &attr, NULL);
  }
  
  static int parse_events__is_name_term(struct parse_events_term *term)
@@@ -723,9 -809,12 +743,9 @@@ int parse_events_add_pmu(struct parse_e
  	 * Configure hardcoded terms first, no need to check
  	 * return value when called with fail == 0 ;)
  	 */
- 	if (config_attr(&attr, head_config, data->error))
+ 	if (config_attr(&attr, head_config, data->error, config_term_pmu))
  		return -EINVAL;
  
 -	if (get_config_terms(head_config, &config_terms))
 -		return -ENOMEM;
 -
  	if (perf_pmu__config(pmu, &attr, head_config, data->error))
  		return -EINVAL;
  
* Unmerged path tools/perf/util/parse-events.c
