perf tools: Rename and move pmu_event_name to get_config_name

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Wang Nan <wangnan0@huawei.com>
commit e814fddde18fec43fa41a27ae94c09b54772697e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/e814fddd.failed

Following commits will make more events obey /name=newname/ options.
This patch makes pmu_event_name() a generic helper.

Makes new get_config_name() accept NULL input to make life easier.

	Signed-off-by: Wang Nan <wangnan0@huawei.com>
	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: Alexei Starovoitov <ast@kernel.org>
	Cc: Brendan Gregg <brendan.d.gregg@gmail.com>
	Cc: Cody P Schafer <dev@codyps.com>
	Cc: He Kuang <hekuang@huawei.com>
	Cc: Jeremie Galarneau <jeremie.galarneau@efficios.com>
	Cc: Jiri Olsa <jolsa@kernel.org>
	Cc: Kirill Smelkov <kirr@nexedi.com>
	Cc: Li Zefan <lizefan@huawei.com>
	Cc: Masami Hiramatsu <masami.hiramatsu.pt@hitachi.com>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Peter Zijlstra <peterz@infradead.org>
	Cc: Zefan Li <lizefan@huawei.com>
	Cc: pi3orama@163.com
Link: http://lkml.kernel.org/r/1455882283-79592-12-git-send-email-wangnan0@huawei.com
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit e814fddde18fec43fa41a27ae94c09b54772697e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/util/parse-events.c
diff --cc tools/perf/util/parse-events.c
index ee3541614df9,3243e95eb1c7..000000000000
--- a/tools/perf/util/parse-events.c
+++ b/tools/perf/util/parse-events.c
@@@ -670,29 -1034,18 +687,13 @@@ int parse_events_add_numeric(struct par
  	attr.type = type;
  	attr.config = config;
  
 -	if (head_config) {
 -		if (config_attr(&attr, head_config, data->error,
 -				config_term_common))
 -			return -EINVAL;
 -
 -		if (get_config_terms(head_config, &config_terms))
 -			return -ENOMEM;
 -	}
 +	if (head_config &&
 +	    config_attr(&attr, head_config, data->error))
 +		return -EINVAL;
  
 -	return add_event(list, &data->idx, &attr, NULL, &config_terms);
 +	return add_event(list, &data->idx, &attr, NULL);
  }
  
- static int parse_events__is_name_term(struct parse_events_term *term)
- {
- 	return term->type_term == PARSE_EVENTS__TERM_TYPE_NAME;
- }
- 
- static char *pmu_event_name(struct list_head *head_terms)
- {
- 	struct parse_events_term *term;
- 
- 	list_for_each_entry(term, head_terms, list)
- 		if (parse_events__is_name_term(term))
- 			return term->val.str;
- 
- 	return NULL;
- }
- 
  int parse_events_add_pmu(struct parse_events_evlist *data,
  			 struct list_head *list, char *name,
  			 struct list_head *head_config)
@@@ -733,7 -1090,8 +734,12 @@@
  		return -EINVAL;
  
  	evsel = __add_event(list, &data->idx, &attr,
++<<<<<<< HEAD
 +			    pmu_event_name(head_config), pmu->cpus);
++=======
+ 			    get_config_name(head_config), pmu->cpus,
+ 			    &config_terms);
++>>>>>>> e814fddde18f (perf tools: Rename and move pmu_event_name to get_config_name)
  	if (evsel) {
  		evsel->unit = info.unit;
  		evsel->scale = info.scale;
* Unmerged path tools/perf/util/parse-events.c
