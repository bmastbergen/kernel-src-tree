mmc: sdhci: Simplify use of tuning timer

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [mmc] sdhci: Simplify use of tuning timer (Don Zickus) [1127975 1277866 1280133 1286932 1297039]
Rebuild_FUZZ: 93.33%
commit-author Adrian Hunter <adrian.hunter@intel.com>
commit 38e40bf5db9d5b8cbaeca9a78ee17f38473dd78d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/38e40bf5.failed

The tuning timer is always used if the tuning mode
is 1 and there is a tuning count, irrespective of
whether this is the first call, or any subsequent
call. Consequently the logic to start the timer
can be simplified.

	Signed-off-by: Adrian Hunter <adrian.hunter@intel.com>
	Reviewed-by: Aaron Lu <aaron.lu@intel.com>
	Signed-off-by: Ulf Hansson <ulf.hansson@linaro.org>
(cherry picked from commit 38e40bf5db9d5b8cbaeca9a78ee17f38473dd78d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/mmc/host/sdhci.c
diff --cc drivers/mmc/host/sdhci.c
index 30eeaa114d6a,5c28c19622e6..000000000000
--- a/drivers/mmc/host/sdhci.c
+++ b/drivers/mmc/host/sdhci.c
@@@ -1863,20 -1880,18 +1863,26 @@@ static int sdhci_card_busy(struct mmc_h
  
  static int sdhci_execute_tuning(struct mmc_host *mmc, u32 opcode)
  {
 -	struct sdhci_host *host = mmc_priv(mmc);
 +	struct sdhci_host *host;
  	u16 ctrl;
 +	u32 ier;
  	int tuning_loop_counter = MAX_TUNING_LOOP;
  	int err = 0;
 +	bool requires_tuning_nonuhs = false;
  	unsigned long flags;
+ 	unsigned int tuning_count = 0;
  
 +	host = mmc_priv(mmc);
 +
  	sdhci_runtime_pm_get(host);
  	spin_lock_irqsave(&host->lock, flags);
  
++<<<<<<< HEAD
 +	ctrl = sdhci_readw(host, SDHCI_HOST_CONTROL2);
++=======
+ 	if (host->tuning_mode == SDHCI_TUNING_MODE_1)
+ 		tuning_count = host->tuning_count;
++>>>>>>> 38e40bf5db9d (mmc: sdhci: Simplify use of tuning timer)
  
  	/*
  	 * The Host Controller needs tuning only in case of SDR104 mode
* Unmerged path drivers/mmc/host/sdhci.c
