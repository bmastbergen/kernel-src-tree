mei: drop me_client_presentation_num

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Alexander Usyskin <alexander.usyskin@intel.com>
commit 764c065a65c31a09340e71d2c41652e7e05bf083
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/764c065a.failed

me_client_presentation_num field is not used for any
particular purpose now, so it can be safely dropped.

	Signed-off-by: Alexander Usyskin <alexander.usyskin@intel.com>
	Signed-off-by: Tomas Winkler <tomas.winkler@intel.com>
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 764c065a65c31a09340e71d2c41652e7e05bf083)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/misc/mei/hbm.c
#	drivers/misc/mei/mei_dev.h
diff --cc drivers/misc/mei/hbm.c
index e04f10ba9aa2,92d0739cca85..000000000000
--- a/drivers/misc/mei/hbm.c
+++ b/drivers/misc/mei/hbm.c
@@@ -92,12 -126,9 +92,15 @@@ void mei_hbm_idle(struct mei_device *de
   */
  void mei_hbm_reset(struct mei_device *dev)
  {
++<<<<<<< HEAD
 +	dev->me_clients_num = 0;
 +	dev->me_client_presentation_num = 0;
++=======
++>>>>>>> 764c065a65c3 (mei: drop me_client_presentation_num)
  	dev->me_client_index = 0;
  
 -	mei_me_cl_remove_all(dev);
 +	kfree(dev->me_clients);
 +	dev->me_clients = NULL;
  
  	mei_hbm_idle(dev);
  }
@@@ -827,22 -879,9 +830,21 @@@ int mei_hbm_dispatch(struct mei_device 
  			return -EPROTO;
  		}
  
 -		mei_hbm_me_cl_add(dev, props_res);
 +		if (me_client->client_id != props_res->me_addr) {
 +			dev_err(&dev->pdev->dev, "hbm: properties response: address mismatch %d ?= %d\n",
 +				me_client->client_id, props_res->me_addr);
 +			return -EPROTO;
 +		}
 +
 +		if (dev->dev_state != MEI_DEV_INIT_CLIENTS ||
 +		    dev->hbm_state != MEI_HBM_CLIENT_PROPERTIES) {
 +			dev_err(&dev->pdev->dev, "hbm: properties response: state mismatch, [%d, %d]\n",
 +				dev->dev_state, dev->hbm_state);
 +			return -EPROTO;
 +		}
  
 +		me_client->props = props_res->client_properties;
  		dev->me_client_index++;
- 		dev->me_client_presentation_num++;
  
  		/* request property for the next client */
  		if (mei_hbm_prop_req(dev))
diff --cc drivers/misc/mei/mei_dev.h
index 1b981b70f5aa,0a1f2b735706..000000000000
--- a/drivers/misc/mei/mei_dev.h
+++ b/drivers/misc/mei/mei_dev.h
@@@ -478,11 -467,9 +478,14 @@@ struct mei_device 
  	struct hbm_version version;
  	unsigned int hbm_f_pg_supported:1;
  
 -	struct list_head me_clients;
 +	struct mei_me_client *me_clients; /* Note: memory has to be allocated */
  	DECLARE_BITMAP(me_clients_map, MEI_CLIENTS_MAX);
  	DECLARE_BITMAP(host_clients_map, MEI_CLIENTS_MAX);
++<<<<<<< HEAD
 +	unsigned long me_clients_num;
 +	unsigned long me_client_presentation_num;
++=======
++>>>>>>> 764c065a65c3 (mei: drop me_client_presentation_num)
  	unsigned long me_client_index;
  
  	struct mei_cl wd_cl;
* Unmerged path drivers/misc/mei/hbm.c
* Unmerged path drivers/misc/mei/mei_dev.h
