sctp: Export struct sctp_info to userspace

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Phil Sutter <phil@nwl.cc>
commit dca3f53c02e325bb19dfc05b1571b9a706226fea
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/dca3f53c.failed

This is required to correctly interpret INET_DIAG_INFO messages exported
by sctp_diag module.

	Signed-off-by: Phil Sutter <phil@nwl.cc>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit dca3f53c02e325bb19dfc05b1571b9a706226fea)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/uapi/linux/sctp.h
diff --cc include/uapi/linux/sctp.h
index 66b466e4ca08,a406adcc0793..000000000000
--- a/include/uapi/linux/sctp.h
+++ b/include/uapi/linux/sctp.h
@@@ -843,4 -927,85 +843,88 @@@ struct sctp_paddrthlds 
  	__u16 spt_pathpfthld;
  };
  
++<<<<<<< HEAD
++=======
+ /*
+  * Socket Option for Getting the Association/Stream-Specific PR-SCTP Status
+  */
+ struct sctp_prstatus {
+ 	sctp_assoc_t sprstat_assoc_id;
+ 	__u16 sprstat_sid;
+ 	__u16 sprstat_policy;
+ 	__u64 sprstat_abandoned_unsent;
+ 	__u64 sprstat_abandoned_sent;
+ };
+ 
+ struct sctp_default_prinfo {
+ 	sctp_assoc_t pr_assoc_id;
+ 	__u32 pr_value;
+ 	__u16 pr_policy;
+ };
+ 
+ struct sctp_info {
+ 	__u32	sctpi_tag;
+ 	__u32	sctpi_state;
+ 	__u32	sctpi_rwnd;
+ 	__u16	sctpi_unackdata;
+ 	__u16	sctpi_penddata;
+ 	__u16	sctpi_instrms;
+ 	__u16	sctpi_outstrms;
+ 	__u32	sctpi_fragmentation_point;
+ 	__u32	sctpi_inqueue;
+ 	__u32	sctpi_outqueue;
+ 	__u32	sctpi_overall_error;
+ 	__u32	sctpi_max_burst;
+ 	__u32	sctpi_maxseg;
+ 	__u32	sctpi_peer_rwnd;
+ 	__u32	sctpi_peer_tag;
+ 	__u8	sctpi_peer_capable;
+ 	__u8	sctpi_peer_sack;
+ 	__u16	__reserved1;
+ 
+ 	/* assoc status info */
+ 	__u64	sctpi_isacks;
+ 	__u64	sctpi_osacks;
+ 	__u64	sctpi_opackets;
+ 	__u64	sctpi_ipackets;
+ 	__u64	sctpi_rtxchunks;
+ 	__u64	sctpi_outofseqtsns;
+ 	__u64	sctpi_idupchunks;
+ 	__u64	sctpi_gapcnt;
+ 	__u64	sctpi_ouodchunks;
+ 	__u64	sctpi_iuodchunks;
+ 	__u64	sctpi_oodchunks;
+ 	__u64	sctpi_iodchunks;
+ 	__u64	sctpi_octrlchunks;
+ 	__u64	sctpi_ictrlchunks;
+ 
+ 	/* primary transport info */
+ 	struct sockaddr_storage	sctpi_p_address;
+ 	__s32	sctpi_p_state;
+ 	__u32	sctpi_p_cwnd;
+ 	__u32	sctpi_p_srtt;
+ 	__u32	sctpi_p_rto;
+ 	__u32	sctpi_p_hbinterval;
+ 	__u32	sctpi_p_pathmaxrxt;
+ 	__u32	sctpi_p_sackdelay;
+ 	__u32	sctpi_p_sackfreq;
+ 	__u32	sctpi_p_ssthresh;
+ 	__u32	sctpi_p_partial_bytes_acked;
+ 	__u32	sctpi_p_flight_size;
+ 	__u16	sctpi_p_error;
+ 	__u16	__reserved2;
+ 
+ 	/* sctp sock info */
+ 	__u32	sctpi_s_autoclose;
+ 	__u32	sctpi_s_adaptation_ind;
+ 	__u32	sctpi_s_pd_point;
+ 	__u8	sctpi_s_nodelay;
+ 	__u8	sctpi_s_disable_fragments;
+ 	__u8	sctpi_s_v4mapped;
+ 	__u8	sctpi_s_frag_interleave;
+ 	__u32	sctpi_s_type;
+ 	__u32	__reserved3;
+ };
+ 
++>>>>>>> dca3f53c02e3 (sctp: Export struct sctp_info to userspace)
  #endif /* _UAPI_SCTP_H */
diff --git a/include/linux/sctp.h b/include/linux/sctp.h
index 336e937b965d..dc75981f18ee 100644
--- a/include/linux/sctp.h
+++ b/include/linux/sctp.h
@@ -706,70 +706,6 @@ typedef struct sctp_auth_chunk {
 	sctp_authhdr_t auth_hdr;
 } __packed sctp_auth_chunk_t;
 
-struct sctp_info {
-	__u32	sctpi_tag;
-	__u32	sctpi_state;
-	__u32	sctpi_rwnd;
-	__u16	sctpi_unackdata;
-	__u16	sctpi_penddata;
-	__u16	sctpi_instrms;
-	__u16	sctpi_outstrms;
-	__u32	sctpi_fragmentation_point;
-	__u32	sctpi_inqueue;
-	__u32	sctpi_outqueue;
-	__u32	sctpi_overall_error;
-	__u32	sctpi_max_burst;
-	__u32	sctpi_maxseg;
-	__u32	sctpi_peer_rwnd;
-	__u32	sctpi_peer_tag;
-	__u8	sctpi_peer_capable;
-	__u8	sctpi_peer_sack;
-	__u16	__reserved1;
-
-	/* assoc status info */
-	__u64	sctpi_isacks;
-	__u64	sctpi_osacks;
-	__u64	sctpi_opackets;
-	__u64	sctpi_ipackets;
-	__u64	sctpi_rtxchunks;
-	__u64	sctpi_outofseqtsns;
-	__u64	sctpi_idupchunks;
-	__u64	sctpi_gapcnt;
-	__u64	sctpi_ouodchunks;
-	__u64	sctpi_iuodchunks;
-	__u64	sctpi_oodchunks;
-	__u64	sctpi_iodchunks;
-	__u64	sctpi_octrlchunks;
-	__u64	sctpi_ictrlchunks;
-
-	/* primary transport info */
-	struct sockaddr_storage	sctpi_p_address;
-	__s32	sctpi_p_state;
-	__u32	sctpi_p_cwnd;
-	__u32	sctpi_p_srtt;
-	__u32	sctpi_p_rto;
-	__u32	sctpi_p_hbinterval;
-	__u32	sctpi_p_pathmaxrxt;
-	__u32	sctpi_p_sackdelay;
-	__u32	sctpi_p_sackfreq;
-	__u32	sctpi_p_ssthresh;
-	__u32	sctpi_p_partial_bytes_acked;
-	__u32	sctpi_p_flight_size;
-	__u16	sctpi_p_error;
-	__u16	__reserved2;
-
-	/* sctp sock info */
-	__u32	sctpi_s_autoclose;
-	__u32	sctpi_s_adaptation_ind;
-	__u32	sctpi_s_pd_point;
-	__u8	sctpi_s_nodelay;
-	__u8	sctpi_s_disable_fragments;
-	__u8	sctpi_s_v4mapped;
-	__u8	sctpi_s_frag_interleave;
-	__u32	sctpi_s_type;
-	__u32	__reserved3;
-};
-
 struct sctp_infox {
 	struct sctp_info *sctpinfo;
 	struct sctp_association *asoc;
* Unmerged path include/uapi/linux/sctp.h
