Drivers: hv: vmbus: Force all channel messages to be delivered on CPU 0

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [hv] vmbus: Force all channel messages to be delivered on CPU 0 (Vitaly Kuznetsov) [1321073]
Rebuild_FUZZ: 89.92%
commit-author K. Y. Srinivasan <kys@microsoft.com>
commit b282e4c06fe89fc750fb26791c0bd7b25315973a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/b282e4c0.failed

Force all channel messages to be delivered on CPU0. These messages are not
performance critical and are used during the setup and teardown of the
channel.

	Signed-off-by: K. Y. Srinivasan <kys@microsoft.com>
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit b282e4c06fe89fc750fb26791c0bd7b25315973a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/hv/connection.c
diff --cc drivers/hv/connection.c
index 7104e1a87971,3dc5a9c7fad6..000000000000
--- a/drivers/hv/connection.c
+++ b/drivers/hv/connection.c
@@@ -80,8 -83,13 +80,18 @@@ static int vmbus_negotiate_version(stru
  	msg->interrupt_page = virt_to_phys(vmbus_connection.int_page);
  	msg->monitor_page1 = virt_to_phys(vmbus_connection.monitor_pages[0]);
  	msg->monitor_page2 = virt_to_phys(vmbus_connection.monitor_pages[1]);
++<<<<<<< HEAD
 +	if (version == VERSION_WIN8_1)
 +		msg->target_vcpu = hv_context.vp_index[smp_processor_id()];
++=======
+ 	/*
+ 	 * We want all channel messages to be delivered on CPU 0.
+ 	 * This has been the behavior pre-win8. This is not
+ 	 * perf issue and having all channel messages delivered on CPU 0
+ 	 * would be ok.
+ 	 */
+ 	msg->target_vcpu = 0;
++>>>>>>> b282e4c06fe8 (Drivers: hv: vmbus: Force all channel messages to be delivered on CPU 0)
  
  	/*
  	 * Add to list before we send the request since we may
* Unmerged path drivers/hv/connection.c
