perf tools: Introduce perf_mem__lck_scnprintf function

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Jiri Olsa <jolsa@kernel.org>
commit 69a77275926ccd0c08fde103de52b59f18370f5a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/69a77275.failed

Move meminfo's lck display function into mem-events.c object, so it
could be reused later from script code.

	Signed-off-by: Jiri Olsa <jolsa@kernel.org>
	Cc: Andi Kleen <ak@linux.intel.com>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Peter Zijlstra <a.p.zijlstra@chello.nl>
	Cc: Stephane Eranian <eranian@google.com>
Link: http://lkml.kernel.org/r/1456303616-26926-9-git-send-email-jolsa@kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 69a77275926ccd0c08fde103de52b59f18370f5a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/util/mem-events.c
#	tools/perf/util/mem-events.h
#	tools/perf/util/sort.c
diff --cc tools/perf/util/sort.c
index 8f36c1d6fd38,4175b2944ff9..000000000000
--- a/tools/perf/util/sort.c
+++ b/tools/perf/util/sort.c
@@@ -717,20 -795,10 +717,14 @@@ sort__locked_cmp(struct hist_entry *lef
  static int hist_entry__locked_snprintf(struct hist_entry *he, char *bf,
  				    size_t size, unsigned int width)
  {
- 	const char *out;
- 	u64 mask = PERF_MEM_LOCK_NA;
- 
- 	if (he->mem_info)
- 		mask = he->mem_info->data_src.mem_lock;
- 
- 	if (mask & PERF_MEM_LOCK_NA)
- 		out = "N/A";
- 	else if (mask & PERF_MEM_LOCK_LOCKED)
- 		out = "Yes";
- 	else
- 		out = "No";
+ 	char out[10];
  
++<<<<<<< HEAD
 +	return repsep_snprintf(bf, size, "%-*s", width, out);
++=======
+ 	perf_mem__lck_scnprintf(out, sizeof(out), he->mem_info);
+ 	return repsep_snprintf(bf, size, "%.*s", width, out);
++>>>>>>> 69a77275926c (perf tools: Introduce perf_mem__lck_scnprintf function)
  }
  
  static int64_t
* Unmerged path tools/perf/util/mem-events.c
* Unmerged path tools/perf/util/mem-events.h
* Unmerged path tools/perf/util/mem-events.c
* Unmerged path tools/perf/util/mem-events.h
* Unmerged path tools/perf/util/sort.c
