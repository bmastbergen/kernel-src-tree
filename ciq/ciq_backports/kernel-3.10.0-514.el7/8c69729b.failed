ALSA: hda - Fix headphone noise after Dell XPS 13 resume back from S3

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Hui Wang <hui.wang@canonical.com>
commit 8c69729b4439bbda88c3073df7243f755cc418ed
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/8c69729b.failed

We have a machine Dell XPS 13 with the codec alc256, after resume back
from S3, the headphone has noise when play sound.

Through comparing with the coeff vaule before and after S3, we found
restoring a coeff register will help remove noise.

BugLink: https://bugs.launchpad.net/bugs/1519168
	Cc: Kailang Yang <kailang@realtek.com>
	Cc: <stable@vger.kernel.org>
	Signed-off-by: Hui Wang <hui.wang@canonical.com>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit 8c69729b4439bbda88c3073df7243f755cc418ed)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/pci/hda/patch_realtek.c
diff --cc sound/pci/hda/patch_realtek.c
index 54abb09baefc,e4f80dc4704f..000000000000
--- a/sound/pci/hda/patch_realtek.c
+++ b/sound/pci/hda/patch_realtek.c
@@@ -4581,7 -4581,13 +4581,12 @@@ enum 
  	ALC288_FIXUP_DELL_HEADSET_MODE,
  	ALC288_FIXUP_DELL1_MIC_NO_PRESENCE,
  	ALC288_FIXUP_DELL_XPS_13_GPIO6,
 -	ALC288_FIXUP_DELL_XPS_13,
 -	ALC288_FIXUP_DISABLE_AAMIX,
 -	ALC292_FIXUP_DELL_E7X,
 -	ALC292_FIXUP_DISABLE_AAMIX,
  	ALC298_FIXUP_DELL1_MIC_NO_PRESENCE,
++<<<<<<< HEAD
++=======
+ 	ALC275_FIXUP_DELL_XPS,
+ 	ALC256_FIXUP_DELL_XPS_13_HEADPHONE_NOISE,
++>>>>>>> 8c69729b4439 (ALSA: hda - Fix headphone noise after Dell XPS 13 resume back from S3)
  };
  
  static const struct hda_fixup alc269_fixups[] = {
@@@ -5127,6 -5157,28 +5132,31 @@@
  		.chained = true,
  		.chain_id = ALC269_FIXUP_HEADSET_MODE
  	},
++<<<<<<< HEAD
++=======
+ 	[ALC275_FIXUP_DELL_XPS] = {
+ 		.type = HDA_FIXUP_VERBS,
+ 		.v.verbs = (const struct hda_verb[]) {
+ 			/* Enables internal speaker */
+ 			{0x20, AC_VERB_SET_COEF_INDEX, 0x1f},
+ 			{0x20, AC_VERB_SET_PROC_COEF, 0x00c0},
+ 			{0x20, AC_VERB_SET_COEF_INDEX, 0x30},
+ 			{0x20, AC_VERB_SET_PROC_COEF, 0x00b1},
+ 			{}
+ 		}
+ 	},
+ 	[ALC256_FIXUP_DELL_XPS_13_HEADPHONE_NOISE] = {
+ 		.type = HDA_FIXUP_VERBS,
+ 		.v.verbs = (const struct hda_verb[]) {
+ 			/* Disable pass-through path for FRONT 14h */
+ 			{0x20, AC_VERB_SET_COEF_INDEX, 0x36},
+ 			{0x20, AC_VERB_SET_PROC_COEF, 0x1737},
+ 			{}
+ 		},
+ 		.chained = true,
+ 		.chain_id = ALC255_FIXUP_DELL1_MIC_NO_PRESENCE
+ 	},
++>>>>>>> 8c69729b4439 (ALSA: hda - Fix headphone noise after Dell XPS 13 resume back from S3)
  };
  
  static const struct snd_pci_quirk alc269_fixup_tbl[] = {
* Unmerged path sound/pci/hda/patch_realtek.c
