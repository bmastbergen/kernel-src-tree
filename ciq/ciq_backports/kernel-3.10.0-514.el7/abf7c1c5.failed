lwtunnel: set skb protocol and dev

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Robert Shearman <rshearma@brocade.com>
commit abf7c1c540f8330fead5d50730d92606dcbe7a7e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/abf7c1c5.failed

In the locally-generated packet path skb->protocol may not be set and
this is required for the lwtunnel encap in order to get the lwtstate.

This would otherwise have been set by ip_output or ip6_output so set
skb->protocol prior to calling the lwtunnel encap
function. Additionally set skb->dev in case it is needed further down
the transmit path.

	Signed-off-by: Robert Shearman <rshearma@brocade.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit abf7c1c540f8330fead5d50730d92606dcbe7a7e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/core/lwtunnel.c
* Unmerged path net/core/lwtunnel.c
* Unmerged path net/core/lwtunnel.c
