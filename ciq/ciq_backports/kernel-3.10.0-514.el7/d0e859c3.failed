IB/hfi1: Enable adaptive pio by default

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Mike Marciniszyn <mike.marciniszyn@intel.com>
commit d0e859c32801f6793790d71dc41a9330da0da371
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/d0e859c3.failed

Set the piothreshold to the agreed upon default of 256B.

	Reviewed-by: Jubin John <jubin.john@intel.com>
	Signed-off-by: Mike Marciniszyn <mike.marciniszyn@intel.com>
	Signed-off-by: Doug Ledford <dledford@redhat.com>
(cherry picked from commit d0e859c32801f6793790d71dc41a9330da0da371)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/staging/hfi1/verbs.c
diff --cc drivers/staging/hfi1/verbs.c
index d228eb7fc4f0,89f2aad45c1b..000000000000
--- a/drivers/staging/hfi1/verbs.c
+++ b/drivers/staging/hfi1/verbs.c
@@@ -124,10 -121,25 +124,24 @@@ unsigned int hfi1_max_srq_wrs = 0x1FFFF
  module_param_named(max_srq_wrs, hfi1_max_srq_wrs, uint, S_IRUGO);
  MODULE_PARM_DESC(max_srq_wrs, "Maximum number of SRQ WRs support");
  
++<<<<<<< HEAD:drivers/staging/hfi1/verbs.c
++=======
+ unsigned short piothreshold = 256;
+ module_param(piothreshold, ushort, S_IRUGO);
+ MODULE_PARM_DESC(piothreshold, "size used to determine sdma vs. pio");
+ 
+ #define COPY_CACHELESS 1
+ #define COPY_ADAPTIVE  2
+ static unsigned int sge_copy_mode;
+ module_param(sge_copy_mode, uint, S_IRUGO);
+ MODULE_PARM_DESC(sge_copy_mode,
+ 		 "Verbs copy mode: 0 use memcpy, 1 use cacheless copy, 2 adapt based on WSS");
+ 
++>>>>>>> d0e859c32801 (IB/hfi1: Enable adaptive pio by default):drivers/staging/rdma/hfi1/verbs.c
  static void verbs_sdma_complete(
  	struct sdma_txreq *cookie,
 -	int status);
 -
 -static int pio_wait(struct rvt_qp *qp,
 -		    struct send_context *sc,
 -		    struct hfi1_pkt_state *ps,
 -		    u32 flag);
 +	int status,
 +	int drained);
  
  /* Length of buffer to create verbs txreq cache name */
  #define TXREQ_NAME_LEN 24
* Unmerged path drivers/staging/hfi1/verbs.c
