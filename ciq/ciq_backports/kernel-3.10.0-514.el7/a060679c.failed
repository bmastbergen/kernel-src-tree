hv_netvsc: cleanup netdev feature flags for netvsc

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author sixiao@microsoft.com <sixiao@microsoft.com>
commit a060679c6b3da17dc9e95d0500f811de118ec901
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/a060679c.failed

1. Adding NETIF_F_TSO6 feature flag;
2. Adding NETIF_F_HW_CSUM. NETIF_F_IPV6_CSUM and NETIF_F_IP_CSUM are
being deprecated;
3. Cleanup the coding style of flag assignment by using macro.

	Signed-off-by: Simon Xiao <sixiao@microsoft.com>
	Reviewed-by: K. Y. Srinivasan <kys@microsoft.com>
	Reviewed-by: Haiyang Zhang <haiyangz@microsoft.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit a060679c6b3da17dc9e95d0500f811de118ec901)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/hyperv/netvsc_drv.c
diff --cc drivers/net/hyperv/netvsc_drv.c
index 56b76b7b9a27,c72e5b83afdb..000000000000
--- a/drivers/net/hyperv/netvsc_drv.c
+++ b/drivers/net/hyperv/netvsc_drv.c
@@@ -41,14 -40,14 +41,23 @@@
  
  #include "hyperv_net.h"
  
 +struct net_device_context {
 +	/* point back to our device context */
 +	struct hv_device *device_ctx;
 +	struct delayed_work dwork;
 +	struct work_struct work;
 +};
  
  #define RING_SIZE_MIN 64
++<<<<<<< HEAD
++=======
+ #define LINKCHANGE_INT (2 * HZ)
+ #define NETVSC_HW_FEATURES	(NETIF_F_RXCSUM | \
+ 				 NETIF_F_SG | \
+ 				 NETIF_F_TSO | \
+ 				 NETIF_F_TSO6 | \
+ 				 NETIF_F_HW_CSUM)
++>>>>>>> a060679c6b3d (hv_netvsc: cleanup netdev feature flags for netvsc)
  static int ring_size = 128;
  module_param(ring_size, int, S_IRUGO);
  MODULE_PARM_DESC(ring_size, "Ring buffer size (# of pages)");
@@@ -882,14 -1081,15 +891,12 @@@ static int netvsc_probe(struct hv_devic
  	INIT_DELAYED_WORK(&net_device_ctx->dwork, netvsc_link_change);
  	INIT_WORK(&net_device_ctx->work, do_set_multicast);
  
 -	spin_lock_init(&net_device_ctx->lock);
 -	INIT_LIST_HEAD(&net_device_ctx->reconfig_events);
 -
  	net->netdev_ops = &device_ops;
  
- 	net->hw_features = NETIF_F_RXCSUM | NETIF_F_SG | NETIF_F_IP_CSUM |
- 				NETIF_F_TSO;
- 	net->features = NETIF_F_HW_VLAN_CTAG_TX | NETIF_F_SG | NETIF_F_RXCSUM |
- 			NETIF_F_IP_CSUM | NETIF_F_TSO;
+ 	net->hw_features = NETVSC_HW_FEATURES;
+ 	net->features = NETVSC_HW_FEATURES | NETIF_F_HW_VLAN_CTAG_TX;
  
 -	net->ethtool_ops = &ethtool_ops;
 +	SET_ETHTOOL_OPS(net, &ethtool_ops);
  	SET_NETDEV_DEV(net, &dev->device);
  
  	/* Notify the netvsc driver of the new device */
* Unmerged path drivers/net/hyperv/netvsc_drv.c
