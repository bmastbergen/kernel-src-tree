IB/ipath: Remove fast registration from the code

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Sagi Grimberg <sagig@mellanox.com>
commit 5eae15927b3bccca6497506c8da38895da029b98
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/5eae1592.failed

The driver does not support it anyway, and the support
should be added to a generic layer shared by both hfi1,
qib and softroce drivers.

	Signed-off-by: Sagi Grimberg <sagig@mellanox.com>
	Signed-off-by: Doug Ledford <dledford@redhat.com>
(cherry picked from commit 5eae15927b3bccca6497506c8da38895da029b98)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/hw/ipath/ipath_verbs.c
#	drivers/infiniband/hw/ipath/ipath_verbs.h
diff --cc drivers/infiniband/hw/ipath/ipath_verbs.c
index ed2bbc2f7eae,29e91796fb10..000000000000
--- a/drivers/infiniband/hw/ipath/ipath_verbs.c
+++ b/drivers/infiniband/hw/ipath/ipath_verbs.c
@@@ -395,7 -395,20 +395,24 @@@ static int ipath_post_one_send(struct i
  	}
  
  	wqe = get_swqe_ptr(qp, qp->s_head);
++<<<<<<< HEAD:drivers/infiniband/hw/ipath/ipath_verbs.c
 +	wqe->wr = *wr;
++=======
+ 
+ 	if (qp->ibqp.qp_type != IB_QPT_UC &&
+ 	    qp->ibqp.qp_type != IB_QPT_RC)
+ 		memcpy(&wqe->ud_wr, ud_wr(wr), sizeof(wqe->ud_wr));
+ 	else if (wr->opcode == IB_WR_RDMA_WRITE_WITH_IMM ||
+ 		 wr->opcode == IB_WR_RDMA_WRITE ||
+ 		 wr->opcode == IB_WR_RDMA_READ)
+ 		memcpy(&wqe->rdma_wr, rdma_wr(wr), sizeof(wqe->rdma_wr));
+ 	else if (wr->opcode == IB_WR_ATOMIC_CMP_AND_SWP ||
+ 		 wr->opcode == IB_WR_ATOMIC_FETCH_AND_ADD)
+ 		memcpy(&wqe->atomic_wr, atomic_wr(wr), sizeof(wqe->atomic_wr));
+ 	else
+ 		memcpy(&wqe->wr, wr, sizeof(wqe->wr));
+ 
++>>>>>>> 5eae15927b3b (IB/ipath: Remove fast registration from the code):drivers/staging/rdma/ipath/ipath_verbs.c
  	wqe->length = 0;
  	if (wr->num_sge) {
  		acc = wr->opcode >= IB_WR_RDMA_READ ?
diff --cc drivers/infiniband/hw/ipath/ipath_verbs.h
index ec167e545e15,0a90a56870ab..000000000000
--- a/drivers/infiniband/hw/ipath/ipath_verbs.h
+++ b/drivers/infiniband/hw/ipath/ipath_verbs.h
@@@ -277,7 -277,13 +277,17 @@@ struct ipath_mr 
   * in qp->s_max_sge.
   */
  struct ipath_swqe {
++<<<<<<< HEAD:drivers/infiniband/hw/ipath/ipath_verbs.h
 +	struct ib_send_wr wr;	/* don't use wr.sg_list */
++=======
+ 	union {
+ 		struct ib_send_wr wr;   /* don't use wr.sg_list */
+ 		struct ib_ud_wr ud_wr;
+ 		struct ib_rdma_wr rdma_wr;
+ 		struct ib_atomic_wr atomic_wr;
+ 	};
+ 
++>>>>>>> 5eae15927b3b (IB/ipath: Remove fast registration from the code):drivers/staging/rdma/ipath/ipath_verbs.h
  	u32 psn;		/* first packet sequence number */
  	u32 lpsn;		/* last packet sequence number */
  	u32 ssn;		/* send sequence number */
* Unmerged path drivers/infiniband/hw/ipath/ipath_verbs.c
* Unmerged path drivers/infiniband/hw/ipath/ipath_verbs.h
