sctp: reorder sctp_ulpevent and shrink msg_flags

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Marcelo Ricardo Leitner <marcelo.leitner@gmail.com>
commit f5d258e60722142e88cb6f0f337d78bca67cf973
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/f5d258e6.failed

The next patch needs 8 bytes in there. sctp_ulpevent has a hole due to
bad alignment; msg_flags is using 4 bytes while it actually uses only 2, so
we shrink it, and iif member (4 bytes) which can be easily fetched from
another place once the next patch is there, so we remove it and thus
creating space for 8 bytes.

	Signed-off-by: Marcelo Ricardo Leitner <marcelo.leitner@gmail.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit f5d258e60722142e88cb6f0f337d78bca67cf973)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/sctp/ulpevent.c
diff --cc net/sctp/ulpevent.c
index daef787acd61,706f5bc9f0c3..000000000000
--- a/net/sctp/ulpevent.c
+++ b/net/sctp/ulpevent.c
@@@ -57,9 -50,9 +57,15 @@@ static void sctp_ulpevent_release_frag_
  
  
  /* Initialize an ULP event from an given skb.  */
++<<<<<<< HEAD
 +SCTP_STATIC void sctp_ulpevent_init(struct sctp_ulpevent *event,
 +				    int msg_flags,
 +				    unsigned int len)
++=======
+ static void sctp_ulpevent_init(struct sctp_ulpevent *event,
+ 			       __u16 msg_flags,
+ 			       unsigned int len)
++>>>>>>> f5d258e60722 (sctp: reorder sctp_ulpevent and shrink msg_flags)
  {
  	memset(event, 0, sizeof(struct sctp_ulpevent));
  	event->msg_flags = msg_flags;
@@@ -67,8 -60,8 +73,13 @@@
  }
  
  /* Create a new sctp_ulpevent.  */
++<<<<<<< HEAD
 +SCTP_STATIC struct sctp_ulpevent *sctp_ulpevent_new(int size, int msg_flags,
 +						    gfp_t gfp)
++=======
+ static struct sctp_ulpevent *sctp_ulpevent_new(int size, __u16 msg_flags,
+ 					       gfp_t gfp)
++>>>>>>> f5d258e60722 (sctp: reorder sctp_ulpevent and shrink msg_flags)
  {
  	struct sctp_ulpevent *event;
  	struct sk_buff *skb;
diff --git a/include/net/sctp/ulpevent.h b/include/net/sctp/ulpevent.h
index ca4693b4e09e..9c7086dc2d2f 100644
--- a/include/net/sctp/ulpevent.h
+++ b/include/net/sctp/ulpevent.h
@@ -55,15 +55,15 @@
  */
 struct sctp_ulpevent {
 	struct sctp_association *asoc;
-	__u16 stream;
-	__u16 ssn;
-	__u16 flags;
+	unsigned int rmem_len;
 	__u32 ppid;
 	__u32 tsn;
 	__u32 cumtsn;
-	int msg_flags;
 	int iif;
-	unsigned int rmem_len;
+	__u16 stream;
+	__u16 ssn;
+	__u16 flags;
+	__u16 msg_flags;
 };
 
 /* Retrieve the skb this event sits inside of. */
* Unmerged path net/sctp/ulpevent.c
