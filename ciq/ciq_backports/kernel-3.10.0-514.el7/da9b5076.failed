x86/microcode/intel: Remove unused @rev arg of get_matching_sig()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [x86] microcode/intel: Remove unused @rev arg of get_matching_sig() (Prarit Bhargava) [1253762]
Rebuild_FUZZ: 96.83%
commit-author Borislav Petkov <bp@suse.de>
commit da9b50765e6ea3e9113df3a14a63700e47a670b7
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/da9b5076.failed

@rev wasn't used in get_matching_sig(), drop it.

	Signed-off-by: Borislav Petkov <bp@suse.de>
	Cc: Borislav Petkov <bp@alien8.de>
	Cc: H. Peter Anvin <hpa@zytor.com>
	Cc: Thomas Gleixner <tglx@linutronix.de>
	Signed-off-by: Ingo Molnar <mingo@kernel.org>
(cherry picked from commit da9b50765e6ea3e9113df3a14a63700e47a670b7)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/include/asm/microcode_intel.h
#	arch/x86/kernel/cpu/microcode/intel_early.c
#	arch/x86/kernel/cpu/microcode/intel_lib.c
diff --cc arch/x86/include/asm/microcode_intel.h
index e2c7404deded,3564299863f0..000000000000
--- a/arch/x86/include/asm/microcode_intel.h
+++ b/arch/x86/include/asm/microcode_intel.h
@@@ -56,16 -56,9 +56,20 @@@ struct extended_sigtable 
  
  #define exttable_size(et) ((et)->count * EXT_SIGNATURE_SIZE + EXT_HEADER_SIZE)
  
 -extern int get_matching_microcode(unsigned int csig, int cpf, int rev, void *mc);
 +extern int
 +get_matching_microcode(unsigned int csig, int cpf, void *mc, int rev);
  extern int microcode_sanity_check(void *mc, int print_err);
++<<<<<<< HEAD
 +extern int get_matching_sig(unsigned int csig, int cpf, void *mc, int rev);
 +
 +static inline int
 +revision_is_newer(struct microcode_header_intel *mc_header, int rev)
 +{
 +	return (mc_header->rev <= rev) ? 0 : 1;
 +}
++=======
+ extern int get_matching_sig(unsigned int csig, int cpf, void *mc);
++>>>>>>> da9b50765e6e (x86/microcode/intel: Remove unused @rev arg of get_matching_sig())
  
  #ifdef CONFIG_MICROCODE_INTEL_EARLY
  extern void __init load_ucode_intel_bsp(void);
diff --cc arch/x86/kernel/cpu/microcode/intel_early.c
index f074fe1d5a06,45881e92f1be..000000000000
--- a/arch/x86/kernel/cpu/microcode/intel_early.c
+++ b/arch/x86/kernel/cpu/microcode/intel_early.c
@@@ -284,9 -255,8 +284,12 @@@ static unsigned int _save_mc(struct mic
  		mc_saved_hdr = (struct microcode_header_intel *)mc_saved[i];
  		sig	     = mc_saved_hdr->sig;
  		pf	     = mc_saved_hdr->pf;
- 		new_rev	     = mc_hdr->rev;
  
++<<<<<<< HEAD
 +		if (!get_matching_sig(sig, pf, ucode_ptr, new_rev))
++=======
+ 		if (!get_matching_sig(sig, pf, ucode_ptr))
++>>>>>>> da9b50765e6e (x86/microcode/intel: Remove unused @rev arg of get_matching_sig())
  			continue;
  
  		found = 1;
diff --cc arch/x86/kernel/cpu/microcode/intel_lib.c
index 7e259d99b0aa,7de293726923..000000000000
--- a/arch/x86/kernel/cpu/microcode/intel_lib.c
+++ b/arch/x86/kernel/cpu/microcode/intel_lib.c
@@@ -122,10 -122,9 +122,14 @@@ int microcode_sanity_check(void *mc, in
  EXPORT_SYMBOL_GPL(microcode_sanity_check);
  
  /*
 - * Returns 1 if update has been found, 0 otherwise.
 + * return 0 - no update found
 + * return 1 - found update
   */
++<<<<<<< HEAD
 +int get_matching_sig(unsigned int csig, int cpf, void *mc, int rev)
++=======
+ int get_matching_sig(unsigned int csig, int cpf, void *mc)
++>>>>>>> da9b50765e6e (x86/microcode/intel: Remove unused @rev arg of get_matching_sig())
  {
  	struct microcode_header_intel *mc_header = mc;
  	struct extended_sigtable *ext_header;
@@@ -153,16 -152,15 +157,20 @@@
  }
  
  /*
 - * Returns 1 if update has been found, 0 otherwise.
 + * return 0 - no update found
 + * return 1 - found update
   */
 -int get_matching_microcode(unsigned int csig, int cpf, int new_rev, void *mc)
 +int get_matching_microcode(unsigned int csig, int cpf, void *mc, int rev)
  {
 -	struct microcode_header_intel *mc_hdr = mc;
 +	struct microcode_header_intel *mc_header = mc;
  
 -	if (mc_hdr->rev <= new_rev)
 +	if (!revision_is_newer(mc_header, rev))
  		return 0;
  
++<<<<<<< HEAD
 +	return get_matching_sig(csig, cpf, mc, rev);
++=======
+ 	return get_matching_sig(csig, cpf, mc);
++>>>>>>> da9b50765e6e (x86/microcode/intel: Remove unused @rev arg of get_matching_sig())
  }
  EXPORT_SYMBOL_GPL(get_matching_microcode);
* Unmerged path arch/x86/include/asm/microcode_intel.h
* Unmerged path arch/x86/kernel/cpu/microcode/intel_early.c
* Unmerged path arch/x86/kernel/cpu/microcode/intel_lib.c
