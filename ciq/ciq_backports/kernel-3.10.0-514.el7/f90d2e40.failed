mmc: core: Convert __mmc_switch() into an internal core function

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Ulf Hansson <ulf.hansson@linaro.org>
commit f90d2e4035d456cb20c0b784725d556eb4de4d8a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/f90d2e40.failed

As there are no users of the __mmc_switch() API, except for the mmc core
itself, let's convert it from an exported function into an internal.

	Signed-off-by: Ulf Hansson <ulf.hansson@linaro.org>
(cherry picked from commit f90d2e4035d456cb20c0b784725d556eb4de4d8a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/mmc/core/mmc_ops.h
diff --cc drivers/mmc/core/mmc_ops.h
index f752ec67c102,f1b8e81aaa28..000000000000
--- a/drivers/mmc/core/mmc_ops.h
+++ b/drivers/mmc/core/mmc_ops.h
@@@ -26,6 -26,11 +26,14 @@@ int mmc_spi_read_ocr(struct mmc_host *h
  int mmc_spi_set_crc(struct mmc_host *host, int use_crc);
  int mmc_bus_test(struct mmc_card *card, u8 bus_width);
  int mmc_send_hpi_cmd(struct mmc_card *card, u32 *status);
++<<<<<<< HEAD
++=======
+ int mmc_can_ext_csd(struct mmc_card *card);
+ int mmc_switch_status_error(struct mmc_host *host, u32 status);
+ int __mmc_switch(struct mmc_card *card, u8 set, u8 index, u8 value,
+ 		unsigned int timeout_ms, bool use_busy_signal, bool send_status,
+ 		bool ignore_crc);
++>>>>>>> f90d2e4035d4 (mmc: core: Convert __mmc_switch() into an internal core function)
  
  #endif
  
diff --git a/drivers/mmc/core/mmc_ops.c b/drivers/mmc/core/mmc_ops.c
index 5e2ad7c0c270..706d21a0e1b2 100644
--- a/drivers/mmc/core/mmc_ops.c
+++ b/drivers/mmc/core/mmc_ops.c
@@ -524,7 +524,6 @@ out:
 
 	return err;
 }
-EXPORT_SYMBOL_GPL(__mmc_switch);
 
 int mmc_switch(struct mmc_card *card, u8 set, u8 index, u8 value,
 		unsigned int timeout_ms)
* Unmerged path drivers/mmc/core/mmc_ops.h
diff --git a/include/linux/mmc/core.h b/include/linux/mmc/core.h
index d349a5938a2f..263a2c4e4d45 100644
--- a/include/linux/mmc/core.h
+++ b/include/linux/mmc/core.h
@@ -152,8 +152,6 @@ extern int mmc_app_cmd(struct mmc_host *, struct mmc_card *);
 extern int mmc_wait_for_app_cmd(struct mmc_host *, struct mmc_card *,
 	struct mmc_command *, int);
 extern void mmc_start_bkops(struct mmc_card *card, bool from_exception);
-extern int __mmc_switch(struct mmc_card *, u8, u8, u8, unsigned int, bool,
-			bool, bool);
 extern int mmc_switch(struct mmc_card *, u8, u8, u8, unsigned int);
 extern int mmc_send_ext_csd(struct mmc_card *card, u8 *ext_csd);
 
