drivers:hv: Use new vmbus_mmio_free() from client drivers.

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [video] hv: Use new vmbus_mmio_free() from client drivers (Vitaly Kuznetsov) [1302147]
Rebuild_FUZZ: 91.59%
commit-author Jake Oshins <jakeo@microsoft.com>
commit 696ca5e82c057a272381ae6064d59eb97a578397
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/696ca5e8.failed

This patch modifies all the callers of vmbus_mmio_allocate()
to call vmbus_mmio_free() instead of release_mem_region().

	Signed-off-by: Jake Oshins <jakeo@microsoft.com>
	Signed-off-by: K. Y. Srinivasan <kys@microsoft.com>
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 696ca5e82c057a272381ae6064d59eb97a578397)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/pci/host/pci-hyperv.c
#	drivers/video/hyperv_fb.c
diff --cc drivers/video/hyperv_fb.c
index 807ee22ef229,2fd49b2358f8..000000000000
--- a/drivers/video/hyperv_fb.c
+++ b/drivers/video/hyperv_fb.c
@@@ -749,7 -743,8 +749,12 @@@ static int hvfb_getmem(struct fb_info *
  err3:
  	iounmap(fb_virt);
  err2:
++<<<<<<< HEAD:drivers/video/hyperv_fb.c
 +	release_resource(&par->mem);
++=======
+ 	vmbus_free_mmio(par->mem->start, screen_fb_size);
+ 	par->mem = NULL;
++>>>>>>> 696ca5e82c05 (drivers:hv: Use new vmbus_mmio_free() from client drivers.):drivers/video/fbdev/hyperv_fb.c
  err1:
  	if (!gen2vm)
  		pci_dev_put(pdev);
@@@ -763,7 -758,8 +768,12 @@@ static void hvfb_putmem(struct fb_info 
  	struct hvfb_par *par = info->par;
  
  	iounmap(info->screen_base);
++<<<<<<< HEAD:drivers/video/hyperv_fb.c
 +	release_resource(&par->mem);
++=======
+ 	vmbus_free_mmio(par->mem->start, screen_fb_size);
+ 	par->mem = NULL;
++>>>>>>> 696ca5e82c05 (drivers:hv: Use new vmbus_mmio_free() from client drivers.):drivers/video/fbdev/hyperv_fb.c
  }
  
  
* Unmerged path drivers/pci/host/pci-hyperv.c
* Unmerged path drivers/pci/host/pci-hyperv.c
* Unmerged path drivers/video/hyperv_fb.c
