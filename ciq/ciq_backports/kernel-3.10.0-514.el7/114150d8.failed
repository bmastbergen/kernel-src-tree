iommu: Allow building iova.c independently

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [iommu] Allow building iova.c independently (Myron Stowe) [1299036]
Rebuild_FUZZ: 90.91%
commit-author Robin Murphy <robin.murphy@arm.com>
commit 114150d8f4fc9e7a003be2bdb0efd31796d241ff
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/114150d8.failed

In preparation for sharing the IOVA allocator, split it out under its
own Kconfig symbol.

	Signed-off-by: Robin Murphy <robin.murphy@arm.com>
	Signed-off-by: Joerg Roedel <jroedel@suse.de>
(cherry picked from commit 114150d8f4fc9e7a003be2bdb0efd31796d241ff)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/iommu/Makefile
diff --cc drivers/iommu/Makefile
index ede8bde44da7,0b1b94ef13ab..000000000000
--- a/drivers/iommu/Makefile
+++ b/drivers/iommu/Makefile
@@@ -5,13 -6,14 +6,18 @@@ obj-$(CONFIG_OF_IOMMU)	+= of_iommu.
  obj-$(CONFIG_MSM_IOMMU) += msm_iommu.o msm_iommu_dev.o
  obj-$(CONFIG_AMD_IOMMU) += amd_iommu.o amd_iommu_init.o
  obj-$(CONFIG_AMD_IOMMU_V2) += amd_iommu_v2.o
 -obj-$(CONFIG_ARM_SMMU) += arm-smmu.o
  obj-$(CONFIG_DMAR_TABLE) += dmar.o
++<<<<<<< HEAD
 +obj-$(CONFIG_INTEL_IOMMU) += iova.o intel-iommu.o
++=======
+ obj-$(CONFIG_INTEL_IOMMU) += intel-iommu.o
+ obj-$(CONFIG_IPMMU_VMSA) += ipmmu-vmsa.o
++>>>>>>> 114150d8f4fc (iommu: Allow building iova.c independently)
  obj-$(CONFIG_IRQ_REMAP) += intel_irq_remapping.o irq_remapping.o
  obj-$(CONFIG_OMAP_IOMMU) += omap-iommu.o
 +obj-$(CONFIG_OMAP_IOMMU) += omap-iommu2.o
 +obj-$(CONFIG_OMAP_IOVMM) += omap-iovmm.o
  obj-$(CONFIG_OMAP_IOMMU_DEBUG) += omap-iommu-debug.o
 -obj-$(CONFIG_ROCKCHIP_IOMMU) += rockchip-iommu.o
  obj-$(CONFIG_TEGRA_IOMMU_GART) += tegra-gart.o
  obj-$(CONFIG_TEGRA_IOMMU_SMMU) += tegra-smmu.o
  obj-$(CONFIG_EXYNOS_IOMMU) += exynos-iommu.o
diff --git a/drivers/iommu/Kconfig b/drivers/iommu/Kconfig
index fa2db96bced4..b6cc70b9b89d 100644
--- a/drivers/iommu/Kconfig
+++ b/drivers/iommu/Kconfig
@@ -13,6 +13,9 @@ menuconfig IOMMU_SUPPORT
 
 if IOMMU_SUPPORT
 
+config IOMMU_IOVA
+	bool
+
 config OF_IOMMU
        def_bool y
        depends on OF
@@ -81,6 +84,7 @@ config INTEL_IOMMU
 	bool "Support for Intel IOMMU using DMA Remapping Devices"
 	depends on PCI_MSI && ACPI && (X86 || IA64_GENERIC)
 	select IOMMU_API
+	select IOMMU_IOVA
 	select DMAR_TABLE
 	help
 	  DMA remapping (DMAR) devices support enables independent address
* Unmerged path drivers/iommu/Makefile
