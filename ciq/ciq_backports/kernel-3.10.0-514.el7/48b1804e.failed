i40e: Replace X722 mac check in ethtool get_settings

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Catherine Sullivan <catherine.sullivan@intel.com>
commit 48b1804ee3cdad7bf115666eb35edf12a734710f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/48b1804e.failed

100M SGMII is only supported on X722.  Replace the mac check with
a feature flag check that is only set for the X722 device.

Change-ID: I53452d9af6af8cd9dca8500215fbc6ce93418f52
	Signed-off-by: Catherine Sullivan <catherine.sullivan@intel.com>
	Tested-by: Andrew Bowers <andrewx.bowers@intel.com>
	Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
(cherry picked from commit 48b1804ee3cdad7bf115666eb35edf12a734710f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/intel/i40e/i40e_ethtool.c
diff --cc drivers/net/ethernet/intel/i40e/i40e_ethtool.c
index 653fc46b9757,252a9dd941d4..000000000000
--- a/drivers/net/ethernet/intel/i40e/i40e_ethtool.c
+++ b/drivers/net/ethernet/intel/i40e/i40e_ethtool.c
@@@ -353,12 -337,24 +353,30 @@@ static void i40e_get_settings_link_up(s
  		break;
  	case I40E_PHY_TYPE_SGMII:
  		ecmd->supported = SUPPORTED_Autoneg |
 -				  SUPPORTED_1000baseT_Full;
 +				  SUPPORTED_1000baseT_Full |
 +				  SUPPORTED_100baseT_Full;
  		if (hw_link_info->requested_speeds & I40E_LINK_SPEED_1GB)
  			ecmd->advertising |= ADVERTISED_1000baseT_Full;
++<<<<<<< HEAD
 +		if (hw_link_info->requested_speeds & I40E_LINK_SPEED_100MB)
 +			ecmd->advertising |= ADVERTISED_100baseT_Full;
++=======
+ 		if (pf->flags & I40E_FLAG_100M_SGMII_CAPABLE) {
+ 			ecmd->supported |= SUPPORTED_100baseT_Full;
+ 			if (hw_link_info->requested_speeds &
+ 			    I40E_LINK_SPEED_100MB)
+ 				ecmd->advertising |= ADVERTISED_100baseT_Full;
+ 		}
+ 		break;
+ 	/* Backplane is set based on supported phy types in get_settings
+ 	 * so don't set anything here but don't warn either
+ 	 */
+ 	case I40E_PHY_TYPE_40GBASE_KR4:
+ 	case I40E_PHY_TYPE_20GBASE_KR2:
+ 	case I40E_PHY_TYPE_10GBASE_KR:
+ 	case I40E_PHY_TYPE_10GBASE_KX4:
+ 	case I40E_PHY_TYPE_1000BASE_KX:
++>>>>>>> 48b1804ee3cd (i40e: Replace X722 mac check in ethtool get_settings)
  		break;
  	default:
  		/* if we got here and link is up something bad is afoot */
diff --git a/drivers/net/ethernet/intel/i40e/i40e.h b/drivers/net/ethernet/intel/i40e/i40e.h
index bdb06dd3067e..a50495c46dc5 100644
--- a/drivers/net/ethernet/intel/i40e/i40e.h
+++ b/drivers/net/ethernet/intel/i40e/i40e.h
@@ -341,6 +341,7 @@ struct i40e_pf {
 #define I40E_FLAG_VEB_MODE_ENABLED		BIT_ULL(40)
 #define I40E_FLAG_GENEVE_OFFLOAD_CAPABLE	BIT_ULL(41)
 #define I40E_FLAG_NO_PCI_LINK_CHECK		BIT_ULL(42)
+#define I40E_FLAG_100M_SGMII_CAPABLE		BIT_ULL(43)
 #define I40E_FLAG_PF_MAC			BIT_ULL(50)
 
 	/* tracks features that get auto disabled by errors */
* Unmerged path drivers/net/ethernet/intel/i40e/i40e_ethtool.c
