sctp: do not clear chunk->ecn_ce_done flag

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Marcelo Ricardo Leitner <marcelo.leitner@gmail.com>
commit d9cef42529402f9fce10376b6e427a5137d90c3d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/d9cef425.failed

We should not clear that flag when switching to a new skb from a GSO skb
because it would cause ECN processing to happen multiple times per GSO
skb, which is not wanted. Instead, let it be processed once per chunk.
That is, in other words, once per IP header available.

Fixes: 90017accff61 ("sctp: Add GSO support")
	Signed-off-by: Marcelo Ricardo Leitner <marcelo.leitner@gmail.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit d9cef42529402f9fce10376b6e427a5137d90c3d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/sctp/inqueue.c
diff --cc net/sctp/inqueue.c
index f49b9cedb9f5,942770675f4c..000000000000
--- a/net/sctp/inqueue.c
+++ b/net/sctp/inqueue.c
@@@ -188,6 -205,26 +188,29 @@@ next_chunk
  
  		if (chunk->asoc)
  			sock_rps_save_rxhash(chunk->asoc->base.sk, chunk->skb);
++<<<<<<< HEAD
++=======
+ 
+ 		queue->in_progress = chunk;
+ 
+ new_skb:
+ 		/* This is the first chunk in the packet.  */
+ 		ch = (sctp_chunkhdr_t *) chunk->skb->data;
+ 		chunk->singleton = 1;
+ 		chunk->data_accepted = 0;
+ 		chunk->pdiscard = 0;
+ 		chunk->auth = 0;
+ 		chunk->has_asconf = 0;
+ 		chunk->end_of_packet = 0;
+ 		if (chunk->head_skb) {
+ 			struct sctp_input_cb
+ 				*cb = SCTP_INPUT_CB(chunk->skb),
+ 				*head_cb = SCTP_INPUT_CB(chunk->head_skb);
+ 
+ 			cb->chunk = head_cb->chunk;
+ 			cb->af = head_cb->af;
+ 		}
++>>>>>>> d9cef4252940 (sctp: do not clear chunk->ecn_ce_done flag)
  	}
  
  	chunk->chunk_hdr = ch;
* Unmerged path net/sctp/inqueue.c
