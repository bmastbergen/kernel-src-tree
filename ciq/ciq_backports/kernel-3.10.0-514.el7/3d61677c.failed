svcrdma: Clean up rdma_create_xprt()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Chuck Lever <chuck.lever@oracle.com>
commit 3d61677c4d5f40529fb26c8f45c0d3a1bba47c66
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/3d61677c.failed

kzalloc is used here, so setting the atomic fields to zero is
unnecessary. sc_ord is set again in handle_connect_req. The other
fields are re-initialized in svc_rdma_accept().

	Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
	Acked-by: Bruce Fields <bfields@fieldses.org>
	Signed-off-by: Doug Ledford <dledford@redhat.com>
(cherry picked from commit 3d61677c4d5f40529fb26c8f45c0d3a1bba47c66)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/sunrpc/xprtrdma/svc_rdma_transport.c
diff --cc net/sunrpc/xprtrdma/svc_rdma_transport.c
index 427d3c39ad59,45d1824a5426..000000000000
--- a/net/sunrpc/xprtrdma/svc_rdma_transport.c
+++ b/net/sunrpc/xprtrdma/svc_rdma_transport.c
@@@ -926,11 -906,12 +918,16 @@@ static struct svc_xprt *svc_rdma_accept
  
  	/* Qualify the transport resource defaults with the
  	 * capabilities of this particular device */
 -	newxprt->sc_max_sge = min((size_t)dev->attrs.max_sge,
 +	newxprt->sc_max_sge = min((size_t)devattr.max_sge,
  				  (size_t)RPCSVC_MAXPAGES);
 -	newxprt->sc_max_sge_rd = min_t(size_t, dev->attrs.max_sge_rd,
 +	newxprt->sc_max_sge_rd = min_t(size_t, devattr.max_sge_rd,
  				       RPCSVC_MAXPAGES);
++<<<<<<< HEAD
 +	newxprt->sc_max_requests = min((size_t)devattr.max_qp_wr,
++=======
+ 	newxprt->sc_max_req_size = svcrdma_max_req_size;
+ 	newxprt->sc_max_requests = min((size_t)dev->attrs.max_qp_wr,
++>>>>>>> 3d61677c4d5f (svcrdma: Clean up rdma_create_xprt())
  				   (size_t)svcrdma_max_requests);
  	newxprt->sc_sq_depth = RPCRDMA_SQ_DEPTH_MULT * newxprt->sc_max_requests;
  
* Unmerged path net/sunrpc/xprtrdma/svc_rdma_transport.c
