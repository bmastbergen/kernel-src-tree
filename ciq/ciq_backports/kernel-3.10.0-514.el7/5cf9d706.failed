NFS: Optimise away the close-to-open getattr if there is no cached data

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Trond Myklebust <trond.myklebust@primarydata.com>
commit 5cf9d70659594e1a75b34d18619d0bb6e0cbbafa
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/5cf9d706.failed

If there is no cached data, then there is no need to track the file
change attribute on close.

	Signed-off-by: Trond Myklebust <trond.myklebust@primarydata.com>
(cherry picked from commit 5cf9d70659594e1a75b34d18619d0bb6e0cbbafa)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/nfs/inode.c
diff --cc fs/nfs/inode.c
index 0d388ee39b73,6307d8de103d..000000000000
--- a/fs/nfs/inode.c
+++ b/fs/nfs/inode.c
@@@ -774,8 -775,13 +776,18 @@@ void nfs_close_context(struct nfs_open_
  		return;
  	if (!is_sync)
  		return;
++<<<<<<< HEAD
 +	inode = ctx->dentry->d_inode;
 +	if (!list_empty(&NFS_I(inode)->open_files))
++=======
+ 	inode = d_inode(ctx->dentry);
+ 	nfsi = NFS_I(inode);
+ 	if (inode->i_mapping->nrpages == 0)
+ 		return;
+ 	if (nfsi->cache_validity & NFS_INO_INVALID_DATA)
+ 		return;
+ 	if (!list_empty(&nfsi->open_files))
++>>>>>>> 5cf9d7065959 (NFS: Optimise away the close-to-open getattr if there is no cached data)
  		return;
  	server = NFS_SERVER(inode);
  	if (server->flags & NFS_MOUNT_NOCTO)
* Unmerged path fs/nfs/inode.c
