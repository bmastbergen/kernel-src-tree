ipv4/fib: don't warn when primary address is missing if in_dev is dead

jira LE-1907
cve CVE-2016-3156
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Paolo Abeni <pabeni@redhat.com>
commit 391a20333b8393ef2e13014e6e59d192c5594471
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/391a2033.failed

After commit fbd40ea0180a ("ipv4: Don't do expensive useless work
during inetdev destroy.") when deleting an interface,
fib_del_ifaddr() can be executed without any primary address
present on the dead interface.

The above is safe, but triggers some "bug: prim == NULL" warnings.

This commit avoids warning if the in_dev is dead

	Signed-off-by: Paolo Abeni <pabeni@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 391a20333b8393ef2e13014e6e59d192c5594471)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv4/fib_frontend.c
diff --cc net/ipv4/fib_frontend.c
index 59c306b4d24b,63566ec54794..000000000000
--- a/net/ipv4/fib_frontend.c
+++ b/net/ipv4/fib_frontend.c
@@@ -798,8 -903,12 +798,17 @@@ void fib_del_ifaddr(struct in_ifaddr *i
  
  	if (ifa->ifa_flags & IFA_F_SECONDARY) {
  		prim = inet_ifa_byprefix(in_dev, any, ifa->ifa_mask);
++<<<<<<< HEAD
 +		if (prim == NULL) {
 +			pr_warn("%s: bug: prim == NULL\n", __func__);
++=======
+ 		if (!prim) {
+ 			/* if the device has been deleted, we don't perform
+ 			 * address promotion
+ 			 */
+ 			if (!in_dev->dead)
+ 				pr_warn("%s: bug: prim == NULL\n", __func__);
++>>>>>>> 391a20333b83 (ipv4/fib: don't warn when primary address is missing if in_dev is dead)
  			return;
  		}
  		if (iprim && iprim != prim) {
* Unmerged path net/ipv4/fib_frontend.c
