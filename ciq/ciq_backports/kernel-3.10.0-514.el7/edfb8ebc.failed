xfs: Fix error path in xfs_get_acl

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Andreas Gruenbacher <agruenba@redhat.com>
commit edfb8ebce225a0638cf62591d4ccb502f052ffd4
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/edfb8ebc.failed

Error codes from xfs_attr_get other than -ENOATTR were not properly
reported.  Fix that.

In addition, the declaration of struct xfs_inode in xfs_acl.h isn't needed.

	Signed-off-by: Andreas Gruenbacher <agruenba@redhat.com>
	Reviewed-by: Dave Chinner <dchinner@redhat.com>
	Signed-off-by: Dave Chinner <david@fromorbit.com>


(cherry picked from commit edfb8ebce225a0638cf62591d4ccb502f052ffd4)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/xfs/xfs_acl.c
diff --cc fs/xfs/xfs_acl.c
index 689456fe4686,6bb470fbb8e8..000000000000
--- a/fs/xfs/xfs_acl.c
+++ b/fs/xfs/xfs_acl.c
@@@ -165,10 -161,9 +165,14 @@@ xfs_get_acl(struct inode *inode, int ty
  		 * cache entry, for any other error assume it is transient and
  		 * leave the cache entry as ACL_NOT_CACHED.
  		 */
 -		if (error == -ENOATTR)
 +		if (error == -ENOATTR) {
 +			acl = NULL;
  			goto out_update_cache;
++<<<<<<< HEAD
 +		}
++=======
+ 		acl = ERR_PTR(error);
++>>>>>>> edfb8ebce225 (xfs: Fix error path in xfs_get_acl)
  		goto out;
  	}
  
* Unmerged path fs/xfs/xfs_acl.c
diff --git a/fs/xfs/xfs_acl.h b/fs/xfs/xfs_acl.h
index af2bb6e7f8dc..53277d89d9fb 100644
--- a/fs/xfs/xfs_acl.h
+++ b/fs/xfs/xfs_acl.h
@@ -20,7 +20,6 @@
 
 struct inode;
 struct posix_acl;
-struct xfs_inode;
 
 #ifdef CONFIG_XFS_POSIX_ACL
 extern struct posix_acl *xfs_get_acl(struct inode *inode, int type);
