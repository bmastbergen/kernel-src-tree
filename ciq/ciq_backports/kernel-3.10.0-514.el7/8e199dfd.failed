ipv6: call ipv6_proxy_select_ident instead of ipv6_select_ident in udp6_ufo_fragment

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Sabrina Dubroca <sd@queasysnail.net>
commit 8e199dfd82ee097b522b00344af6448715d8ee0c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/8e199dfd.failed

Matt Grant reported frequent crashes in ipv6_select_ident when
udp6_ufo_fragment is called from openvswitch on a skb that doesn't
have a dst_entry set.

ipv6_proxy_select_ident generates the frag_id without using the dst
associated with the skb.  This approach was suggested by Vladislav
Yasevich.

Fixes: 0508c07f5e0c ("ipv6: Select fragment id during UFO segmentation if not set.")
	Cc: Vladislav Yasevich <vyasevic@redhat.com>
	Reported-by: Matt Grant <matt@mattgrant.net.nz>
	Tested-by: Matt Grant <matt@mattgrant.net.nz>
	Signed-off-by: Sabrina Dubroca <sd@queasysnail.net>
	Acked-by: Vladislav Yasevich <vyasevic@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 8e199dfd82ee097b522b00344af6448715d8ee0c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv6/udp_offload.c
diff --cc net/ipv6/udp_offload.c
index f705fbdc6ee7,be2c0ba82c85..000000000000
--- a/net/ipv6/udp_offload.c
+++ b/net/ipv6/udp_offload.c
@@@ -109,6 -112,8 +109,11 @@@ static struct sk_buff *udp6_ufo_fragmen
  		fptr = (struct frag_hdr *)(skb_network_header(skb) + unfrag_ip6hlen);
  		fptr->nexthdr = nexthdr;
  		fptr->reserved = 0;
++<<<<<<< HEAD
++=======
+ 		if (!skb_shinfo(skb)->ip6_frag_id)
+ 			ipv6_proxy_select_ident(skb);
++>>>>>>> 8e199dfd82ee (ipv6: call ipv6_proxy_select_ident instead of ipv6_select_ident in udp6_ufo_fragment)
  		fptr->identification = skb_shinfo(skb)->ip6_frag_id;
  
  		/* Fragment the skb. ipv6 header and the remaining fields of the
* Unmerged path net/ipv6/udp_offload.c
