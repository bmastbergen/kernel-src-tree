usb: host: Host drivers relying on DMA should depend on HAS_DMA

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [usb] host: Host drivers relying on DMA should depend on HAS_DMA (Torez Smith) [1332712]
Rebuild_FUZZ: 95.87%
commit-author Geert Uytterhoeven <geert@linux-m68k.org>
commit cf34be7a223b7702e61668e0e3e64ceab4fdd06e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/cf34be7a.failed

If NO_DMA=y:

    ERROR: "bad_dma_ops" [drivers/usb/host/xhci-plat-hcd.ko] undefined!
    ERROR: "bad_dma_ops" [drivers/usb/host/xhci-mtk.ko] undefined!
    ERROR: "dma_pool_destroy" [drivers/usb/host/xhci-hcd.ko] undefined!
    ERROR: "bad_dma_ops" [drivers/usb/host/xhci-hcd.ko] undefined!
    ERROR: "dma_pool_free" [drivers/usb/host/xhci-hcd.ko] undefined!
    ERROR: "dma_pool_alloc" [drivers/usb/host/xhci-hcd.ko] undefined!
    ERROR: "dma_pool_create" [drivers/usb/host/xhci-hcd.ko] undefined!
    ERROR: "bad_dma_ops" [drivers/usb/host/ohci-platform.ko] undefined!
    ERROR: "dma_pool_destroy" [drivers/usb/host/ohci-hcd.ko] undefined!
    ERROR: "bad_dma_ops" [drivers/usb/host/ohci-hcd.ko] undefined!
    ERROR: "dma_pool_free" [drivers/usb/host/ohci-hcd.ko] undefined!
    ERROR: "dma_pool_alloc" [drivers/usb/host/ohci-hcd.ko] undefined!
    ERROR: "dma_pool_create" [drivers/usb/host/ohci-hcd.ko] undefined!
    ERROR: "dma_pool_create" [drivers/usb/host/fotg210-hcd.ko] undefined!
    ERROR: "bad_dma_ops" [drivers/usb/host/fotg210-hcd.ko] undefined!
    ERROR: "dma_pool_destroy" [drivers/usb/host/fotg210-hcd.ko] undefined!
    ERROR: "dma_pool_alloc" [drivers/usb/host/fotg210-hcd.ko] undefined!
    ERROR: "dma_pool_free" [drivers/usb/host/fotg210-hcd.ko] undefined!
    ERROR: "bad_dma_ops" [drivers/usb/host/ehci-platform.ko] undefined!
    ERROR: "dma_pool_destroy" [drivers/usb/host/ehci-hcd.ko] undefined!
    ERROR: "bad_dma_ops" [drivers/usb/host/ehci-hcd.ko] undefined!
    ERROR: "dma_pool_free" [drivers/usb/host/ehci-hcd.ko] undefined!
    ERROR: "dma_pool_alloc" [drivers/usb/host/ehci-hcd.ko] undefined!
    ERROR: "dma_pool_create" [drivers/usb/host/ehci-hcd.ko] undefined!

Add dependencies on HAS_DMA to fix this.

	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit cf34be7a223b7702e61668e0e3e64ceab4fdd06e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/usb/host/Kconfig
diff --cc drivers/usb/host/Kconfig
index 174f845a82e2,d7dab45b8543..000000000000
--- a/drivers/usb/host/Kconfig
+++ b/drivers/usb/host/Kconfig
@@@ -341,21 -366,9 +341,25 @@@ config USB_ISP1362_HC
  	  To compile this driver as a module, choose M here: the
  	  module will be called isp1362-hcd.
  
 +config USB_FUSBH200_HCD
 +	tristate "FUSBH200 HCD support"
 +	depends on USB
 +	default N
 +	---help---
 +	Faraday FUSBH200 is designed to meet USB2.0 EHCI specification
 +	with minor modification.
 +
 +	To compile this driver as a module, choose M here: the
 +	module will be called fusbh200-hcd.
 +
  config USB_FOTG210_HCD
  	tristate "FOTG210 HCD support"
++<<<<<<< HEAD
 +	depends on USB
 +	default N
++=======
+ 	depends on USB && HAS_DMA && HAS_IOMEM
++>>>>>>> cf34be7a223b (usb: host: Host drivers relying on DMA should depend on HAS_DMA)
  	---help---
  	  Faraday FOTG210 is an OTG controller which can be configured as
  	  an USB2.0 host. It is designed to meet USB2.0 EHCI specification
@@@ -377,8 -390,7 +381,12 @@@ config USB_MAX3421_HC
  
  config USB_OHCI_HCD
  	tristate "OHCI HCD (USB 1.1) support"
++<<<<<<< HEAD
 +	select ISP1301_OMAP if MACH_OMAP_H2 || MACH_OMAP_H3
 +	depends on USB_ISP1301 || !ARCH_LPC32XX
++=======
+ 	depends on HAS_DMA && HAS_IOMEM
++>>>>>>> cf34be7a223b (usb: host: Host drivers relying on DMA should depend on HAS_DMA)
  	---help---
  	  The Open Host Controller Interface (OHCI) is a standard for accessing
  	  USB 1.1 host controller hardware.  It does more in hardware than Intel's
* Unmerged path drivers/usb/host/Kconfig
