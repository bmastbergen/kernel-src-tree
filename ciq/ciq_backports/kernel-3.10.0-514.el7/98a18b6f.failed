netdevice: add ieee802154_ptr to net_device

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Alexander Aring <alex.aring@gmail.com>
commit 98a18b6ffc79baa69f4a0d1bae58faf2a8aef4c8
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/98a18b6f.failed

This patch adds an ieee802154_ptr to the net_device structure.
Furthermore the 802.15.4 subsystem will introduce a nl802154 framework
which is similar like the nl80211 framework and a wpan_dev structure.
The wpan_dev structure will hold additional net_device attributes like
address options which are 802.15.4 specific. In the upcoming nl802154
implementation we will introduce a NL802154_FLAG_NEED_WPAN_DEV like
NL80211_FLAG_NEED_WDEV. For this flag an ieee802154_ptr in net_device is
needed. Additional we can access the wpan_dev attributes in upper layers
like IEEE 802.15.4 6LoWPAN easily. Current solution is a complicated
callback interface and getting these values over subif data structure
in mac802154.

	Signed-off-by: Alexander Aring <alex.aring@gmail.com>
	Acked-by: David S. Miller <davem@davemloft.net>
	Signed-off-by: Marcel Holtmann <marcel@holtmann.org>
(cherry picked from commit 98a18b6ffc79baa69f4a0d1bae58faf2a8aef4c8)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/linux/netdevice.h
diff --cc include/linux/netdevice.h
index bc7d09223785,c9bcf33efb47..000000000000
--- a/include/linux/netdevice.h
+++ b/include/linux/netdevice.h
@@@ -59,9 -57,8 +59,14 @@@ struct device
  struct phy_device;
  /* 802.11 specific */
  struct wireless_dev;
++<<<<<<< HEAD
 +					/* source back-compat hooks */
 +#define SET_ETHTOOL_OPS(netdev,ops) \
 +	( (netdev)->ethtool_ops = (ops) )
++=======
+ /* 802.15.4 specific */
+ struct wpan_dev;
++>>>>>>> 98a18b6ffc79 (netdevice: add ieee802154_ptr to net_device)
  
  void netdev_set_default_ethtool_ops(struct net_device *dev,
  				    const struct ethtool_ops *ops);
@@@ -1405,18 -1560,21 +1410,31 @@@ struct net_device 
  	/* Protocol specific pointers */
  
  #if IS_ENABLED(CONFIG_VLAN_8021Q)
 -	struct vlan_info __rcu	*vlan_info;
 +	struct vlan_info __rcu	*vlan_info;	/* VLAN info */
  #endif
  #if IS_ENABLED(CONFIG_NET_DSA)
 -	struct dsa_switch_tree	*dsa_ptr;
 +	struct dsa_switch_tree	*dsa_ptr;	/* dsa specific data */
  #endif
++<<<<<<< HEAD
 +	void 			*atalk_ptr;	/* AppleTalk link 	*/
 +	struct in_device __rcu	*ip_ptr;	/* IPv4 specific data	*/
 +	struct dn_dev __rcu     *dn_ptr;        /* DECnet specific data */
 +	struct inet6_dev __rcu	*ip6_ptr;       /* IPv6 specific data */
 +	void			*ax25_ptr;	/* AX.25 specific data */
 +	struct wireless_dev	*ieee80211_ptr;	/* IEEE 802.11 specific data,
 +						   assign before registering */
++=======
+ #if IS_ENABLED(CONFIG_TIPC)
+ 	struct tipc_bearer __rcu *tipc_ptr;
+ #endif
+ 	void 			*atalk_ptr;
+ 	struct in_device __rcu	*ip_ptr;
+ 	struct dn_dev __rcu     *dn_ptr;
+ 	struct inet6_dev __rcu	*ip6_ptr;
+ 	void			*ax25_ptr;
+ 	struct wireless_dev	*ieee80211_ptr;
+ 	struct wpan_dev		*ieee802154_ptr;
++>>>>>>> 98a18b6ffc79 (netdevice: add ieee802154_ptr to net_device)
  
  /*
   * Cache lines mostly used on receive path (including eth_type_trans())
* Unmerged path include/linux/netdevice.h
