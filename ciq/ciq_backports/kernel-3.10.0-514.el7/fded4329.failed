s390: wire up sys_sched_setattr/sys_sched_getattr

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [s390] wire up sys_sched_setattr/sys_sched_getattr (Xunlei Pang) [1298387]
Rebuild_FUZZ: 93.48%
commit-author Heiko Carstens <heiko.carstens@de.ibm.com>
commit fded4329da9e8486b434d6c4aceab1ab3f433d8a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/fded4329.failed

	Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
(cherry picked from commit fded4329da9e8486b434d6c4aceab1ab3f433d8a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/s390/include/uapi/asm/unistd.h
#	arch/s390/kernel/compat_wrapper.S
#	arch/s390/kernel/syscalls.S
diff --cc arch/s390/include/uapi/asm/unistd.h
index 23d66b963302,5eb5c9ddb120..000000000000
--- a/arch/s390/include/uapi/asm/unistd.h
+++ b/arch/s390/include/uapi/asm/unistd.h
@@@ -280,16 -280,9 +280,22 @@@
  #define __NR_s390_runtime_instr 342
  #define __NR_kcmp		343
  #define __NR_finit_module	344
++<<<<<<< HEAD
 +/* Number 345 is reserved for sys_sched_setattr */
 +/* Number 346 is reserved for sys_sched_getattr */
 +/* Number 347 is reserved for sys_renameat2 */
 +/* Number 348 is reserved for sys_seccomp */
 +/* Number 349 is reserved for sys_getrandom */
 +/* Number 350 is reserved for sys_memfd_create */
 +/* Number 351 is reserved for sys_bpf */
 +#define __NR_s390_pci_mmio_write	352
 +#define __NR_s390_pci_mmio_read		353
 +#define NR_syscalls 354
++=======
+ #define __NR_sched_setattr	345
+ #define __NR_sched_getattr	346
+ #define NR_syscalls 345
++>>>>>>> fded4329da9e (s390: wire up sys_sched_setattr/sys_sched_getattr)
  
  /* 
   * There are some system calls that are not present on 64 bit, some
diff --cc arch/s390/kernel/compat_wrapper.S
index 390a3a8c8138,59c8efce1b99..000000000000
--- a/arch/s390/kernel/compat_wrapper.S
+++ b/arch/s390/kernel/compat_wrapper.S
@@@ -1413,14 -1413,13 +1413,27 @@@ ENTRY(sys_finit_module_wrapper
  	lgfr	%r4,%r4			# int
  	jg	sys_finit_module
  
++<<<<<<< HEAD
 +ENTRY(sys_s390_pci_mmio_write_wrapper)
 +	llgfr   %r2,%r2                 # unsigned long
 +	llgtr   %r3,%r3                 # void __user *
 +	llgfr   %r4,%r4                 # size_t
 +	jg      sys_s390_pci_mmio_write
 +
 +ENTRY(sys_s390_pci_mmio_read_wrapper)
 +	llgfr   %r2,%r2                 # unsigned long
 +	llgtr   %r3,%r3                 # void __user *
 +	llgfr   %r4,%r4                 # size_t
 +	jg      sys_s390_pci_mmio_read
++=======
+ ENTRY(sys_sched_setattr_wrapper)
+ 	lgfr	%r2,%r2			# pid_t
+ 	llgtr	%r3,%r3			# struct sched_attr __user *
+ 	jg	sys_sched_setattr
+ 
+ ENTRY(sys_sched_getattr_wrapper)
+ 	lgfr	%r2,%r2			# pid_t
+ 	llgtr	%r3,%r3			# const char __user *
+ 	llgfr	%r3,%r3			# unsigned int
+ 	jg	sys_sched_getattr
++>>>>>>> fded4329da9e (s390: wire up sys_sched_setattr/sys_sched_getattr)
diff --cc arch/s390/kernel/syscalls.S
index 083231a0f740,143992152ec9..000000000000
--- a/arch/s390/kernel/syscalls.S
+++ b/arch/s390/kernel/syscalls.S
@@@ -353,12 -353,5 +353,17 @@@ SYSCALL(sys_process_vm_writev,sys_proce
  SYSCALL(sys_ni_syscall,sys_s390_runtime_instr,sys_s390_runtime_instr_wrapper)
  SYSCALL(sys_kcmp,sys_kcmp,sys_kcmp_wrapper)
  SYSCALL(sys_finit_module,sys_finit_module,sys_finit_module_wrapper)
++<<<<<<< HEAD
 +NI_SYSCALL					/* 345 sys_sched_setattr */
 +NI_SYSCALL					/* 346 sys_sched_getattr */
 +NI_SYSCALL					/* 347 sys_renameat2 */
 +NI_SYSCALL					/* 348 sys_seccomp */
 +NI_SYSCALL					/* 349 sys_getrandom */
 +NI_SYSCALL					/* 350 sys_memfd_create */
 +NI_SYSCALL					/* 351 sys_bpf */
 +SYSCALL(sys_ni_syscall,sys_s390_pci_mmio_write,sys_s390_pci_mmio_write_wrapper)
 +SYSCALL(sys_ni_syscall,sys_s390_pci_mmio_read,sys_s390_pci_mmio_read_wrapper)
++=======
+ SYSCALL(sys_sched_setattr,sys_sched_setattr,sys_sched_setattr_wrapper) /* 345 */
+ SYSCALL(sys_sched_getattr,sys_sched_getattr,sys_sched_getattr_wrapper)
++>>>>>>> fded4329da9e (s390: wire up sys_sched_setattr/sys_sched_getattr)
* Unmerged path arch/s390/include/uapi/asm/unistd.h
* Unmerged path arch/s390/kernel/compat_wrapper.S
* Unmerged path arch/s390/kernel/syscalls.S
