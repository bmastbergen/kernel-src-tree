net/mlx5e: Don't modify CQ before it was created

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [netdrv] mlx5e: Don't modify CQ before it was created (Kamal Heib) [1316951]
Rebuild_FUZZ: 95.65%
commit-author Gal Pressman <galp@mellanox.com>
commit 2fcb92fbd04eef26dfe7e67839da6262d83d6b65
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/2fcb92fb.failed

Calling mlx5e_set_coalesce while the interface is down will result in
modifying CQs that don't exist.

Fixes: f62b8bb8f2d3 ('net/mlx5: Extend mlx5_core to support ConnectX-4
Ethernet functionality')
	Signed-off-by: Gal Pressman <galp@mellanox.com>

	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 2fcb92fbd04eef26dfe7e67839da6262d83d6b65)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/en_ethtool.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/en_ethtool.c
index 388938482ff9,0959656404b3..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_ethtool.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_ethtool.c
@@@ -395,6 -420,10 +395,13 @@@ static int mlx5e_set_coalesce(struct ne
  	int tc;
  	int i;
  
++<<<<<<< HEAD
++=======
+ 	if (!MLX5_CAP_GEN(mdev, cq_moderation))
+ 		return -ENOTSUPP;
+ 
+ 	mutex_lock(&priv->state_lock);
++>>>>>>> 2fcb92fbd04e (net/mlx5e: Don't modify CQ before it was created)
  	priv->params.tx_cq_moderation_usec = coal->tx_coalesce_usecs;
  	priv->params.tx_cq_moderation_pkts = coal->tx_max_coalesced_frames;
  	priv->params.rx_cq_moderation_usec = coal->rx_coalesce_usecs;
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en_ethtool.c
