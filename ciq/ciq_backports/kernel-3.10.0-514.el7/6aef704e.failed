HID: multitouch: add support of other generic collections in hid-mt

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [hid] multitouch: add support of other generic collections in hid-mt (Benjamin Tissoires) [1311883]
Rebuild_FUZZ: 96.12%
commit-author Benjamin Tissoires <benjamin.tissoires@redhat.com>
commit 6aef704e38293524067505eeafec9c811b18d66a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/6aef704e.failed

The ANTON Touch Pad is a device which can switch from a multitouch
touchpad to a mouse. It thus presents several generic collections which
are currently ignored by hid-multitouch. Enable them by not ignoring
them in mt_input_mapping.
Adding also a suffix for them depending on their application.

	Reported-by: Edel Maks <edelmaks@gmail.com>
	Signed-off-by: Benjamin Tissoires <benjamin.tissoires@redhat.com>
	Signed-off-by: Jiri Kosina <jkosina@suse.cz>
(cherry picked from commit 6aef704e38293524067505eeafec9c811b18d66a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/hid/hid-multitouch.c
diff --cc drivers/hid/hid-multitouch.c
index 38c1a5f5ff70,0d3113969c43..000000000000
--- a/drivers/hid/hid-multitouch.c
+++ b/drivers/hid/hid-multitouch.c
@@@ -127,11 -128,13 +128,18 @@@ static void mt_post_parse(struct mt_dev
  #define MT_CLS_CONFIDENCE_MINUS_ONE		0x0005
  #define MT_CLS_DUAL_INRANGE_CONTACTID		0x0006
  #define MT_CLS_DUAL_INRANGE_CONTACTNUMBER	0x0007
 -/* reserved					0x0008 */
 +#define MT_CLS_DUAL_NSMU_CONTACTID		0x0008
  #define MT_CLS_INRANGE_CONTACTNUMBER		0x0009
  #define MT_CLS_NSMU				0x000a
++<<<<<<< HEAD
 +#define MT_CLS_DUAL_CONTACT_NUMBER		0x0010
 +#define MT_CLS_DUAL_CONTACT_ID			0x0011
++=======
+ /* reserved					0x0010 */
+ /* reserved					0x0011 */
+ #define MT_CLS_WIN_8				0x0012
+ #define MT_CLS_EXPORT_ALL_INPUTS		0x0013
++>>>>>>> 6aef704e3829 (HID: multitouch: add support of other generic collections in hid-mt)
  
  /* vendor specific classes */
  #define MT_CLS_3M				0x0101
@@@ -194,16 -193,15 +202,26 @@@ static struct mt_class mt_classes[] = 
  	{ .name = MT_CLS_INRANGE_CONTACTNUMBER,
  		.quirks = MT_QUIRK_VALID_IS_INRANGE |
  			MT_QUIRK_SLOT_IS_CONTACTNUMBER },
 -	{ .name = MT_CLS_WIN_8,
 +	{ .name = MT_CLS_DUAL_CONTACT_NUMBER,
  		.quirks = MT_QUIRK_ALWAYS_VALID |
++<<<<<<< HEAD
 +			MT_QUIRK_CONTACT_CNT_ACCURATE |
 +			MT_QUIRK_SLOT_IS_CONTACTNUMBER,
 +		.maxcontacts = 2 },
 +	{ .name = MT_CLS_DUAL_CONTACT_ID,
 +		.quirks = MT_QUIRK_ALWAYS_VALID |
 +			MT_QUIRK_CONTACT_CNT_ACCURATE |
 +			MT_QUIRK_SLOT_IS_CONTACTID,
 +		.maxcontacts = 2 },
++=======
+ 			MT_QUIRK_IGNORE_DUPLICATES |
+ 			MT_QUIRK_HOVERING |
+ 			MT_QUIRK_CONTACT_CNT_ACCURATE },
+ 	{ .name = MT_CLS_EXPORT_ALL_INPUTS,
+ 		.quirks = MT_QUIRK_ALWAYS_VALID |
+ 			MT_QUIRK_CONTACT_CNT_ACCURATE,
+ 		.export_all_inputs = true },
++>>>>>>> 6aef704e3829 (HID: multitouch: add support of other generic collections in hid-mt)
  
  	/*
  	 * vendor specific classes
@@@ -999,15 -1057,12 +1076,22 @@@ static const struct hid_device_id mt_de
  		MT_USB_DEVICE(USB_VENDOR_ID_3M,
  			USB_DEVICE_ID_3M3266) },
  
++<<<<<<< HEAD
 +	/* ActionStar panels */
 +	{ .driver_data = MT_CLS_NSMU,
 +		MT_USB_DEVICE(USB_VENDOR_ID_ACTIONSTAR,
 +			USB_DEVICE_ID_ACTIONSTAR_1011) },
++=======
+ 	/* Anton devices */
+ 	{ .driver_data = MT_CLS_EXPORT_ALL_INPUTS,
+ 		MT_USB_DEVICE(USB_VENDOR_ID_ANTON,
+ 			USB_DEVICE_ID_ANTON_TOUCH_PAD) },
++>>>>>>> 6aef704e3829 (HID: multitouch: add support of other generic collections in hid-mt)
  
  	/* Atmel panels */
 +	{ .driver_data = MT_CLS_SERIAL,
 +		MT_USB_DEVICE(USB_VENDOR_ID_ATMEL,
 +			USB_DEVICE_ID_ATMEL_MULTITOUCH) },
  	{ .driver_data = MT_CLS_SERIAL,
  		MT_USB_DEVICE(USB_VENDOR_ID_ATMEL,
  			USB_DEVICE_ID_ATMEL_MXT_DIGITIZER) },
diff --git a/drivers/hid/hid-ids.h b/drivers/hid/hid-ids.h
index ca9eb3b8acb5..3833c052126d 100644
--- a/drivers/hid/hid-ids.h
+++ b/drivers/hid/hid-ids.h
@@ -67,6 +67,9 @@
 #define USB_VENDOR_ID_ALPS		0x0433
 #define USB_DEVICE_ID_IBM_GAMEPAD	0x1101
 
+#define USB_VENDOR_ID_ANTON		0x1130
+#define USB_DEVICE_ID_ANTON_TOUCH_PAD	0x3101
+
 #define USB_VENDOR_ID_APPLE		0x05ac
 #define USB_DEVICE_ID_APPLE_MIGHTYMOUSE	0x0304
 #define USB_DEVICE_ID_APPLE_MAGICMOUSE	0x030d
* Unmerged path drivers/hid/hid-multitouch.c
diff --git a/include/linux/hid.h b/include/linux/hid.h
index e94e65fe6e73..a8f80ffa3d88 100644
--- a/include/linux/hid.h
+++ b/include/linux/hid.h
@@ -201,6 +201,7 @@ struct hid_item {
 #define HID_GD_VBRZ		0x00010045
 #define HID_GD_VNO		0x00010046
 #define HID_GD_FEATURE		0x00010047
+#define HID_GD_SYSTEM_CONTROL	0x00010080
 #define HID_GD_UP		0x00010090
 #define HID_GD_DOWN		0x00010091
 #define HID_GD_RIGHT		0x00010092
@@ -208,6 +209,8 @@ struct hid_item {
 
 #define HID_DC_BATTERYSTRENGTH	0x00060020
 
+#define HID_CP_CONSUMER_CONTROL	0x000c0001
+
 #define HID_DG_DIGITIZER	0x000d0001
 #define HID_DG_PEN		0x000d0002
 #define HID_DG_LIGHTPEN		0x000d0003
