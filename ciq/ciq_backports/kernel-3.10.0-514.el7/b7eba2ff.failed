powerpc/ppc4xx_msi: Move MSI-related ops to pci_controller_ops

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [powerpc] ppc4xx_msi: Move MSI-related ops to pci_controller_ops (Gustavo Duarte) [1275657]
Rebuild_FUZZ: 93.10%
commit-author Daniel Axtens <dja@axtens.net>
commit b7eba2ffccb51d7676a4ddc26658687331feb6a3
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/b7eba2ff.failed

Move the ppc4xx msi subsystem to use the pci_controller_ops structure
rather than ppc_md for MSI related PCI controller operations.

As with fsl_msi, operations are plugged in at the subsys level, after
controller creation. Again, we iterate over all controllers and
populate them with the MSI ops.

	Signed-off-by: Daniel Axtens <dja@axtens.net>
	Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
(cherry picked from commit b7eba2ffccb51d7676a4ddc26658687331feb6a3)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/powerpc/sysdev/ppc4xx_msi.c
diff --cc arch/powerpc/sysdev/ppc4xx_msi.c
index 43948da837a7,6eb21f2ea585..000000000000
--- a/arch/powerpc/sysdev/ppc4xx_msi.c
+++ b/arch/powerpc/sysdev/ppc4xx_msi.c
@@@ -257,9 -251,10 +258,16 @@@ static int ppc4xx_msi_probe(struct plat
  	}
  	ppc4xx_msi = *msi;
  
++<<<<<<< HEAD
 +	ppc_md.setup_msi_irqs = ppc4xx_setup_msi_irqs;
 +	ppc_md.teardown_msi_irqs = ppc4xx_teardown_msi_irqs;
 +	ppc_md.msi_check_device = ppc4xx_msi_check_device;
++=======
+ 	list_for_each_entry(phb, &hose_list, list_node) {
+ 		phb->controller_ops.setup_msi_irqs = ppc4xx_setup_msi_irqs;
+ 		phb->controller_ops.teardown_msi_irqs = ppc4xx_teardown_msi_irqs;
+ 	}
++>>>>>>> b7eba2ffccb5 (powerpc/ppc4xx_msi: Move MSI-related ops to pci_controller_ops)
  	return err;
  
  error_out:
* Unmerged path arch/powerpc/sysdev/ppc4xx_msi.c
