ixgbe: Add support for SGMII backplane interface

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Mark Rustad <mark.d.rustad@intel.com>
commit 200157c2e31a5931d0d825e9fddb44d10888e6b3
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/200157c2.failed

Add support for an SGMII backplane interface.

	Signed-off-by: Mark Rustad <mark.d.rustad@intel.com>
	Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
(cherry picked from commit 200157c2e31a5931d0d825e9fddb44d10888e6b3)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
#	drivers/net/ethernet/intel/ixgbe/ixgbe_type.h
#	drivers/net/ethernet/intel/ixgbe/ixgbe_x550.c
diff --cc drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
index c49a5686fdd6,c96af3fdd554..000000000000
--- a/drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
+++ b/drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
@@@ -134,6 -131,10 +134,13 @@@ static const struct pci_device_id ixgbe
  	{PCI_VDEVICE(INTEL, IXGBE_DEV_ID_X550EM_X_KR), board_X550EM_x},
  	{PCI_VDEVICE(INTEL, IXGBE_DEV_ID_X550EM_X_10G_T), board_X550EM_x},
  	{PCI_VDEVICE(INTEL, IXGBE_DEV_ID_X550EM_X_SFP), board_X550EM_x},
++<<<<<<< HEAD
++=======
+ 	{PCI_VDEVICE(INTEL, IXGBE_DEV_ID_X550EM_A_SFP_N), board_x550em_a },
+ 	{PCI_VDEVICE(INTEL, IXGBE_DEV_ID_X550EM_A_SGMII), board_x550em_a },
+ 	{PCI_VDEVICE(INTEL, IXGBE_DEV_ID_X550EM_A_SGMII_L), board_x550em_a },
+ 	{PCI_VDEVICE(INTEL, IXGBE_DEV_ID_X550EM_A_SFP), board_x550em_a },
++>>>>>>> 200157c2e31a (ixgbe: Add support for SGMII backplane interface)
  	/* required last entry */
  	{0, }
  };
diff --cc drivers/net/ethernet/intel/ixgbe/ixgbe_type.h
index 9826af1b5034,50e8bc0ef4e7..000000000000
--- a/drivers/net/ethernet/intel/ixgbe/ixgbe_type.h
+++ b/drivers/net/ethernet/intel/ixgbe/ixgbe_type.h
@@@ -3525,6 -3584,8 +3528,11 @@@ struct ixgbe_info 
  #define IXGBE_KRM_PORT_CAR_GEN_CTRL(P)	((P) ? 0x8010 : 0x4010)
  #define IXGBE_KRM_LINK_CTRL_1(P)	((P) ? 0x820C : 0x420C)
  #define IXGBE_KRM_AN_CNTL_1(P)		((P) ? 0x822C : 0x422C)
++<<<<<<< HEAD
++=======
+ #define IXGBE_KRM_AN_CNTL_8(P)		((P) ? 0x8248 : 0x4248)
+ #define IXGBE_KRM_SGMII_CTRL(P)		((P) ? 0x82A0 : 0x42A0)
++>>>>>>> 200157c2e31a (ixgbe: Add support for SGMII backplane interface)
  #define IXGBE_KRM_DSP_TXFFE_STATE_4(P)	((P) ? 0x8634 : 0x4634)
  #define IXGBE_KRM_DSP_TXFFE_STATE_5(P)	((P) ? 0x8638 : 0x4638)
  #define IXGBE_KRM_RX_TRN_LINKUP_CTRL(P)	((P) ? 0x8B00 : 0x4B00)
@@@ -3550,6 -3613,12 +3560,15 @@@
  #define IXGBE_KRM_AN_CNTL_1_SYM_PAUSE			(1 << 28)
  #define IXGBE_KRM_AN_CNTL_1_ASM_PAUSE			(1 << 29)
  
++<<<<<<< HEAD
++=======
+ #define IXGBE_KRM_AN_CNTL_8_LINEAR			BIT(0)
+ #define IXGBE_KRM_AN_CNTL_8_LIMITING			BIT(1)
+ 
+ #define IXGBE_KRM_SGMII_CTRL_MAC_TAR_FORCE_100_D	BIT(12)
+ #define IXGBE_KRM_SGMII_CTRL_MAC_TAR_FORCE_10_D		BIT(19)
+ 
++>>>>>>> 200157c2e31a (ixgbe: Add support for SGMII backplane interface)
  #define IXGBE_KRM_DSP_TXFFE_STATE_C0_EN			(1 << 6)
  #define IXGBE_KRM_DSP_TXFFE_STATE_CP1_CN1_EN		(1 << 15)
  #define IXGBE_KRM_DSP_TXFFE_STATE_CO_ADAPT_EN		(1 << 16)
diff --cc drivers/net/ethernet/intel/ixgbe/ixgbe_x550.c
index 98d6e51de236,81e5d54476c7..000000000000
--- a/drivers/net/ethernet/intel/ixgbe/ixgbe_x550.c
+++ b/drivers/net/ethernet/intel/ixgbe/ixgbe_x550.c
@@@ -1349,6 -1646,11 +1400,14 @@@ static void ixgbe_init_mac_link_ops_X55
  		mac->ops.setup_link = ixgbe_setup_mac_link_t_X550em;
  		mac->ops.setup_fc = ixgbe_setup_fc_generic;
  		mac->ops.check_link = ixgbe_check_link_t_X550em;
++<<<<<<< HEAD
++=======
+ 		return;
+ 	case ixgbe_media_type_backplane:
+ 		if (hw->device_id == IXGBE_DEV_ID_X550EM_A_SGMII ||
+ 		    hw->device_id == IXGBE_DEV_ID_X550EM_A_SGMII_L)
+ 			mac->ops.setup_link = ixgbe_setup_sgmii;
++>>>>>>> 200157c2e31a (ixgbe: Add support for SGMII backplane interface)
  		break;
  	default:
  		mac->ops.setup_fc = ixgbe_setup_fc_x550em;
* Unmerged path drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
* Unmerged path drivers/net/ethernet/intel/ixgbe/ixgbe_type.h
* Unmerged path drivers/net/ethernet/intel/ixgbe/ixgbe_x550.c
