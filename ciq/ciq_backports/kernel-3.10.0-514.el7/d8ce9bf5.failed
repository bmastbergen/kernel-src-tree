HID: move to_hid_device() to hid.h

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [hid] move to_hid_device() to hid.h (Benjamin Tissoires) [1311883]
Rebuild_FUZZ: 92.06%
commit-author Geliang Tang <geliangtang@163.com>
commit d8ce9bf5551bfea431893bdd0a943f24a5170828
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/d8ce9bf5.failed

to_hid_device() macro is defined in both hid-lg4ff.c and
hid-logitech-hidpp.c. So I move it to include/linux/hid.h.

	Signed-off-by: Geliang Tang <geliangtang@163.com>
	Signed-off-by: Jiri Kosina <jkosina@suse.cz>
(cherry picked from commit d8ce9bf5551bfea431893bdd0a943f24a5170828)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/hid/hid-lg4ff.c
#	drivers/hid/hid-logitech-hidpp.c
diff --cc drivers/hid/hid-lg4ff.c
index 351805362290,3e160ff5f218..000000000000
--- a/drivers/hid/hid-lg4ff.c
+++ b/drivers/hid/hid-lg4ff.c
@@@ -30,39 -30,63 +30,45 @@@
  
  #include "usbhid/usbhid.h"
  #include "hid-lg.h"
 -#include "hid-lg4ff.h"
  #include "hid-ids.h"
  
++<<<<<<< HEAD
 +#define DFGT_REV_MAJ 0x13
 +#define DFGT_REV_MIN 0x22
 +#define DFGT2_REV_MIN 0x26
 +#define DFP_REV_MAJ 0x11
 +#define DFP_REV_MIN 0x06
 +#define FFEX_REV_MAJ 0x21
 +#define FFEX_REV_MIN 0x00
 +#define G25_REV_MAJ 0x12
 +#define G25_REV_MIN 0x22
 +#define G27_REV_MAJ 0x12
 +#define G27_REV_MIN 0x38
 +
 +#define to_hid_device(pdev) container_of(pdev, struct hid_device, dev)
 +
 +static void hid_lg4ff_set_range_dfp(struct hid_device *hid, u16 range);
 +static void hid_lg4ff_set_range_g25(struct hid_device *hid, u16 range);
 +static ssize_t lg4ff_range_show(struct device *dev, struct device_attribute *attr, char *buf);
 +static ssize_t lg4ff_range_store(struct device *dev, struct device_attribute *attr, const char *buf, size_t count);
++=======
+ #define LG4FF_MMODE_IS_MULTIMODE 0
+ #define LG4FF_MMODE_SWITCHED 1
+ #define LG4FF_MMODE_NOT_MULTIMODE 2
++>>>>>>> d8ce9bf5551b (HID: move to_hid_device() to hid.h)
  
 -#define LG4FF_MODE_NATIVE_IDX 0
 -#define LG4FF_MODE_DFEX_IDX 1
 -#define LG4FF_MODE_DFP_IDX 2
 -#define LG4FF_MODE_G25_IDX 3
 -#define LG4FF_MODE_DFGT_IDX 4
 -#define LG4FF_MODE_G27_IDX 5
 -#define LG4FF_MODE_G29_IDX 6
 -#define LG4FF_MODE_MAX_IDX 7
 -
 -#define LG4FF_MODE_NATIVE BIT(LG4FF_MODE_NATIVE_IDX)
 -#define LG4FF_MODE_DFEX BIT(LG4FF_MODE_DFEX_IDX)
 -#define LG4FF_MODE_DFP BIT(LG4FF_MODE_DFP_IDX)
 -#define LG4FF_MODE_G25 BIT(LG4FF_MODE_G25_IDX)
 -#define LG4FF_MODE_DFGT BIT(LG4FF_MODE_DFGT_IDX)
 -#define LG4FF_MODE_G27 BIT(LG4FF_MODE_G27_IDX)
 -#define LG4FF_MODE_G29 BIT(LG4FF_MODE_G29_IDX)
 -
 -#define LG4FF_DFEX_TAG "DF-EX"
 -#define LG4FF_DFEX_NAME "Driving Force / Formula EX"
 -#define LG4FF_DFP_TAG "DFP"
 -#define LG4FF_DFP_NAME "Driving Force Pro"
 -#define LG4FF_G25_TAG "G25"
 -#define LG4FF_G25_NAME "G25 Racing Wheel"
 -#define LG4FF_G27_TAG "G27"
 -#define LG4FF_G27_NAME "G27 Racing Wheel"
 -#define LG4FF_G29_TAG "G29"
 -#define LG4FF_G29_NAME "G29 Racing Wheel"
 -#define LG4FF_DFGT_TAG "DFGT"
 -#define LG4FF_DFGT_NAME "Driving Force GT"
 -
 -#define LG4FF_FFEX_REV_MAJ 0x21
 -#define LG4FF_FFEX_REV_MIN 0x00
 -
 -static void lg4ff_set_range_dfp(struct hid_device *hid, u16 range);
 -static void lg4ff_set_range_g25(struct hid_device *hid, u16 range);
 -
 -struct lg4ff_wheel_data {
 -	const u32 product_id;
 -	u16 range;
 -	const u16 min_range;
 -	const u16 max_range;
 +static DEVICE_ATTR(range, S_IRWXU | S_IRWXG | S_IRWXO, lg4ff_range_show, lg4ff_range_store);
 +
 +struct lg4ff_device_entry {
 +	__u32 product_id;
 +	__u16 range;
 +	__u16 min_range;
 +	__u16 max_range;
  #ifdef CONFIG_LEDS_CLASS
 -	u8  led_state;
 +	__u8  led_state;
  	struct led_classdev *led[5];
  #endif
 -	const u32 alternate_modes;
 -	const char * const real_tag;
 -	const char * const real_name;
 -	const u16 real_product_id;
 -
 +	struct list_head list;
  	void (*set_range)(struct hid_device *hid, u16 range);
  };
  
* Unmerged path drivers/hid/hid-logitech-hidpp.c
* Unmerged path drivers/hid/hid-lg4ff.c
* Unmerged path drivers/hid/hid-logitech-hidpp.c
diff --git a/include/linux/hid.h b/include/linux/hid.h
index 537af3092265..7bbf42c7d861 100644
--- a/include/linux/hid.h
+++ b/include/linux/hid.h
@@ -528,6 +528,9 @@ struct hid_device {							/* device report descriptor */
 	wait_queue_head_t debug_wait;
 };
 
+#define to_hid_device(pdev) \
+	container_of(pdev, struct hid_device, dev)
+
 static inline void *hid_get_drvdata(struct hid_device *hdev)
 {
 	return dev_get_drvdata(&hdev->dev);
