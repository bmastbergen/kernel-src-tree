usb: host: drop owner assignment from platform_drivers

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [mmc] host: drop owner assignment from platform_drivers (Don Zickus) [1127975 1277866 1280133 1286932 1297039]
Rebuild_FUZZ: 95.15%
commit-author Wolfram Sang <wsa@the-dreams.de>
commit 566e0269e58cb95aa759c3f11c831536ae3858d2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/566e0269.failed

A platform_driver does not need to set an owner, it will be populated by the
driver core.

	Signed-off-by: Wolfram Sang <wsa@the-dreams.de>
(cherry picked from commit 566e0269e58cb95aa759c3f11c831536ae3858d2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/usb/host/ehci-exynos.c
#	drivers/usb/host/ehci-orion.c
#	drivers/usb/host/ohci-nxp.c
diff --cc drivers/usb/host/ehci-orion.c
index efbc588b48c5,ebd203ac3fad..000000000000
--- a/drivers/usb/host/ehci-orion.c
+++ b/drivers/usb/host/ehci-orion.c
@@@ -302,8 -321,7 +302,12 @@@ static struct platform_driver ehci_orio
  	.shutdown	= usb_hcd_platform_shutdown,
  	.driver = {
  		.name	= "orion-ehci",
++<<<<<<< HEAD
 +		.owner  = THIS_MODULE,
 +		.of_match_table = of_match_ptr(ehci_orion_dt_ids),
++=======
+ 		.of_match_table = ehci_orion_dt_ids,
++>>>>>>> 566e0269e58c (usb: host: drop owner assignment from platform_drivers)
  	},
  };
  
diff --cc drivers/usb/host/ohci-nxp.c
index 0b5dde7c538a,d9f0481d7258..000000000000
--- a/drivers/usb/host/ohci-nxp.c
+++ b/drivers/usb/host/ohci-nxp.c
@@@ -372,16 -316,35 +372,20 @@@ static const struct of_device_id usb_hc
  	{ .compatible = "nxp,ohci-nxp" },
  	{},
  };
 -MODULE_DEVICE_TABLE(of, ohci_hcd_nxp_match);
 +MODULE_DEVICE_TABLE(of, usb_hcd_nxp_match);
  #endif
  
 -static struct platform_driver ohci_hcd_nxp_driver = {
 +static struct platform_driver usb_hcd_nxp_driver = {
  	.driver = {
  		.name = "usb-ohci",
++<<<<<<< HEAD
 +		.owner	= THIS_MODULE,
 +		.of_match_table = of_match_ptr(usb_hcd_nxp_match),
++=======
+ 		.of_match_table = of_match_ptr(ohci_hcd_nxp_match),
++>>>>>>> 566e0269e58c (usb: host: drop owner assignment from platform_drivers)
  	},
 -	.probe = ohci_hcd_nxp_probe,
 -	.remove = ohci_hcd_nxp_remove,
 +	.probe = usb_hcd_nxp_probe,
 +	.remove = usb_hcd_nxp_remove,
  };
  
 -static int __init ohci_nxp_init(void)
 -{
 -	if (usb_disabled())
 -		return -ENODEV;
 -
 -	pr_info("%s: " DRIVER_DESC "\n", hcd_name);
 -
 -	ohci_init_driver(&ohci_nxp_hc_driver, NULL);
 -	return platform_driver_register(&ohci_hcd_nxp_driver);
 -}
 -module_init(ohci_nxp_init);
 -
 -static void __exit ohci_nxp_cleanup(void)
 -{
 -	platform_driver_unregister(&ohci_hcd_nxp_driver);
 -}
 -module_exit(ohci_nxp_cleanup);
 -
 -MODULE_DESCRIPTION(DRIVER_DESC);
 -MODULE_LICENSE("GPL v2");
* Unmerged path drivers/usb/host/ehci-exynos.c
* Unmerged path drivers/usb/host/ehci-exynos.c
* Unmerged path drivers/usb/host/ehci-orion.c
diff --git a/drivers/usb/host/ehci-platform.c b/drivers/usb/host/ehci-platform.c
index 79f7e9051be3..4882d551ab08 100644
--- a/drivers/usb/host/ehci-platform.c
+++ b/drivers/usb/host/ehci-platform.c
@@ -222,7 +222,6 @@ static struct platform_driver ehci_platform_driver = {
 	.remove		= ehci_platform_remove,
 	.shutdown	= usb_hcd_platform_shutdown,
 	.driver		= {
-		.owner	= THIS_MODULE,
 		.name	= "ehci-platform",
 		.pm	= &ehci_platform_pm_ops,
 		.of_match_table = of_match_ptr(vt8500_ehci_ids),
diff --git a/drivers/usb/host/ehci-w90x900.c b/drivers/usb/host/ehci-w90x900.c
index 1c370dfbee0d..e23f497b453a 100644
--- a/drivers/usb/host/ehci-w90x900.c
+++ b/drivers/usb/host/ehci-w90x900.c
@@ -169,7 +169,6 @@ static struct platform_driver ehci_hcd_w90x900_driver = {
 	.remove = ehci_w90x900_remove,
 	.driver = {
 		.name = "w90x900-ehci",
-		.owner = THIS_MODULE,
 	},
 };
 
diff --git a/drivers/usb/host/fhci-hcd.c b/drivers/usb/host/fhci-hcd.c
index 0b46542591ff..58847c3cc3ae 100644
--- a/drivers/usb/host/fhci-hcd.c
+++ b/drivers/usb/host/fhci-hcd.c
@@ -817,7 +817,6 @@ MODULE_DEVICE_TABLE(of, of_fhci_match);
 static struct platform_driver of_fhci_driver = {
 	.driver = {
 		.name = "fsl,usb-fhci",
-		.owner = THIS_MODULE,
 		.of_match_table = of_fhci_match,
 	},
 	.probe		= of_fhci_probe,
diff --git a/drivers/usb/host/fsl-mph-dr-of.c b/drivers/usb/host/fsl-mph-dr-of.c
index 467bf6d6460d..8c320a86970d 100644
--- a/drivers/usb/host/fsl-mph-dr-of.c
+++ b/drivers/usb/host/fsl-mph-dr-of.c
@@ -343,7 +343,6 @@ static const struct of_device_id fsl_usb2_mph_dr_of_match[] = {
 static struct platform_driver fsl_usb2_mph_dr_driver = {
 	.driver = {
 		.name = "fsl-usb2-mph-dr",
-		.owner = THIS_MODULE,
 		.of_match_table = fsl_usb2_mph_dr_of_match,
 	},
 	.probe	= fsl_usb2_mph_dr_of_probe,
diff --git a/drivers/usb/host/isp116x-hcd.c b/drivers/usb/host/isp116x-hcd.c
index eb0f1181b038..99fea3cdc2df 100644
--- a/drivers/usb/host/isp116x-hcd.c
+++ b/drivers/usb/host/isp116x-hcd.c
@@ -1705,7 +1705,6 @@ static struct platform_driver isp116x_driver = {
 	.resume = isp116x_resume,
 	.driver = {
 		.name = hcd_name,
-		.owner	= THIS_MODULE,
 	},
 };
 
diff --git a/drivers/usb/host/isp1362-hcd.c b/drivers/usb/host/isp1362-hcd.c
index 8f91e1a8436e..4905ca6b4d6b 100644
--- a/drivers/usb/host/isp1362-hcd.c
+++ b/drivers/usb/host/isp1362-hcd.c
@@ -2829,7 +2829,6 @@ static struct platform_driver isp1362_driver = {
 	.resume = isp1362_resume,
 	.driver = {
 		.name = hcd_name,
-		.owner = THIS_MODULE,
 	},
 };
 
diff --git a/drivers/usb/host/isp1760-if.c b/drivers/usb/host/isp1760-if.c
index a13709ee4e5d..01716e4d54cd 100644
--- a/drivers/usb/host/isp1760-if.c
+++ b/drivers/usb/host/isp1760-if.c
@@ -163,7 +163,6 @@ MODULE_DEVICE_TABLE(of, of_isp1760_match);
 static struct platform_driver isp1760_of_driver = {
 	.driver = {
 		.name = "nxp-isp1760",
-		.owner = THIS_MODULE,
 		.of_match_table = of_isp1760_match,
 	},
 	.probe          = of_isp1760_probe,
diff --git a/drivers/usb/host/ohci-at91.c b/drivers/usb/host/ohci-at91.c
index 2ee1496dbc1d..5a90d21b56ee 100644
--- a/drivers/usb/host/ohci-at91.c
+++ b/drivers/usb/host/ohci-at91.c
@@ -723,7 +723,6 @@ static struct platform_driver ohci_hcd_at91_driver = {
 	.resume		= ohci_hcd_at91_drv_resume,
 	.driver		= {
 		.name	= "at91_ohci",
-		.owner	= THIS_MODULE,
 		.of_match_table	= of_match_ptr(at91_ohci_dt_ids),
 	},
 };
diff --git a/drivers/usb/host/ohci-exynos.c b/drivers/usb/host/ohci-exynos.c
index ae6068d99f3c..30a3bdbaef49 100644
--- a/drivers/usb/host/ohci-exynos.c
+++ b/drivers/usb/host/ohci-exynos.c
@@ -280,7 +280,6 @@ static struct platform_driver exynos_ohci_driver = {
 	.shutdown	= exynos_ohci_shutdown,
 	.driver = {
 		.name	= "exynos-ohci",
-		.owner	= THIS_MODULE,
 		.pm	= &exynos_ohci_pm_ops,
 		.of_match_table	= of_match_ptr(exynos_ohci_match),
 	}
* Unmerged path drivers/usb/host/ohci-nxp.c
diff --git a/drivers/usb/host/ohci-omap.c b/drivers/usb/host/ohci-omap.c
index b1d32fb4a7ae..993ccdbbb40b 100644
--- a/drivers/usb/host/ohci-omap.c
+++ b/drivers/usb/host/ohci-omap.c
@@ -549,7 +549,6 @@ static struct platform_driver ohci_hcd_omap_driver = {
 	.resume		= ohci_omap_resume,
 #endif
 	.driver		= {
-		.owner	= THIS_MODULE,
 		.name	= "ohci",
 	},
 };
diff --git a/drivers/usb/host/ohci-platform.c b/drivers/usb/host/ohci-platform.c
index 7a6dd1665949..b3985bbe77b0 100644
--- a/drivers/usb/host/ohci-platform.c
+++ b/drivers/usb/host/ohci-platform.c
@@ -182,7 +182,6 @@ static struct platform_driver ohci_platform_driver = {
 	.remove		= ohci_platform_remove,
 	.shutdown	= usb_hcd_platform_shutdown,
 	.driver		= {
-		.owner	= THIS_MODULE,
 		.name	= "ohci-platform",
 		.pm	= &ohci_platform_pm_ops,
 	}
diff --git a/drivers/usb/host/ohci-pxa27x.c b/drivers/usb/host/ohci-pxa27x.c
index 279b2ef17411..1b1eec4d83d6 100644
--- a/drivers/usb/host/ohci-pxa27x.c
+++ b/drivers/usb/host/ohci-pxa27x.c
@@ -610,7 +610,6 @@ static struct platform_driver ohci_hcd_pxa27x_driver = {
 	.shutdown	= usb_hcd_platform_shutdown,
 	.driver		= {
 		.name	= "pxa27x-ohci",
-		.owner	= THIS_MODULE,
 		.of_match_table = of_match_ptr(pxa_ohci_dt_ids),
 #ifdef CONFIG_PM
 		.pm	= &ohci_hcd_pxa27x_pm_ops,
diff --git a/drivers/usb/host/ohci-s3c2410.c b/drivers/usb/host/ohci-s3c2410.c
index e125770b893c..1fb84963757f 100644
--- a/drivers/usb/host/ohci-s3c2410.c
+++ b/drivers/usb/host/ohci-s3c2410.c
@@ -526,7 +526,6 @@ static struct platform_driver ohci_hcd_s3c2410_driver = {
 	.remove		= ohci_hcd_s3c2410_drv_remove,
 	.shutdown	= usb_hcd_platform_shutdown,
 	.driver		= {
-		.owner	= THIS_MODULE,
 		.name	= "s3c2410-ohci",
 		.pm	= &ohci_hcd_s3c2410_pm_ops,
 	},
diff --git a/drivers/usb/host/ohci-spear.c b/drivers/usb/host/ohci-spear.c
index 3e19e0170d11..2de16aa72b4b 100644
--- a/drivers/usb/host/ohci-spear.c
+++ b/drivers/usb/host/ohci-spear.c
@@ -230,7 +230,6 @@ static struct platform_driver spear_ohci_hcd_driver = {
 	.resume =	spear_ohci_hcd_drv_resume,
 #endif
 	.driver = {
-		.owner = THIS_MODULE,
 		.name = "spear-ohci",
 		.of_match_table = of_match_ptr(spear_ohci_id_table),
 	},
diff --git a/drivers/usb/host/r8a66597-hcd.c b/drivers/usb/host/r8a66597-hcd.c
index 1d6ee3e54ca8..8c82ece2b46b 100644
--- a/drivers/usb/host/r8a66597-hcd.c
+++ b/drivers/usb/host/r8a66597-hcd.c
@@ -2534,7 +2534,6 @@ static struct platform_driver r8a66597_driver = {
 	.remove =	r8a66597_remove,
 	.driver		= {
 		.name = hcd_name,
-		.owner	= THIS_MODULE,
 		.pm	= R8A66597_DEV_PM_OPS,
 	},
 };
diff --git a/drivers/usb/host/u132-hcd.c b/drivers/usb/host/u132-hcd.c
index 132471753702..969bdc698a30 100644
--- a/drivers/usb/host/u132-hcd.c
+++ b/drivers/usb/host/u132-hcd.c
@@ -3218,7 +3218,6 @@ static struct platform_driver u132_platform_driver = {
 	.resume = u132_resume,
 	.driver = {
 		   .name = hcd_name,
-		   .owner = THIS_MODULE,
 		   },
 };
 static int __init u132_hcd_init(void)
