i40e: Change some init flow for the client

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Anjali Singhai Jain <anjali.singhai@intel.com>
commit f38ff2ee7727994685494bcc4d7c274b35b5418a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/f38ff2ee.failed

This change makes a common flow for Client instance open during init
and reset path. The Client subtask can handle both the cases instead of
making a separate notify_client_of_open call.
Also it may fix a bug during reset where the service task was leaking
some memory and causing issues.

Change-Id: I7232a32fd52b82e863abb54266fa83122f80a0cd
	Signed-off-by: Anjali Singhai Jain <anjali.singhai@intel.com>
	Tested-by: Andrew Bowers <andrewx.bowers@intel.com>
	Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit f38ff2ee7727994685494bcc4d7c274b35b5418a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/intel/i40e/i40e_client.c
#	drivers/net/ethernet/intel/i40e/i40e_main.c
diff --cc drivers/net/ethernet/intel/i40e/i40e_main.c
index 2d7f7ed1c19e,828ed28c3c14..000000000000
--- a/drivers/net/ethernet/intel/i40e/i40e_main.c
+++ b/drivers/net/ethernet/intel/i40e/i40e_main.c
@@@ -5379,13 -5430,7 +5379,17 @@@ int i40e_open(struct net_device *netdev
  						       TCP_FLAG_CWR) >> 16);
  	wr32(&pf->hw, I40E_GLLAN_TSOMSK_L, be32_to_cpu(TCP_FLAG_CWR) >> 16);
  
++<<<<<<< HEAD
 +#ifdef CONFIG_I40E_VXLAN
 +	vxlan_get_rx_port(netdev);
 +#endif
 +#ifdef CONFIG_I40E_GENEVE
 +	if (pf->flags & I40E_FLAG_GENEVE_OFFLOAD_CAPABLE)
 +		geneve_get_rx_port(netdev);
 +#endif
++=======
+ 	udp_tunnel_get_rx_info(netdev);
++>>>>>>> f38ff2ee7727 (i40e: Change some init flow for the client)
  
  	return 0;
  }
* Unmerged path drivers/net/ethernet/intel/i40e/i40e_client.c
* Unmerged path drivers/net/ethernet/intel/i40e/i40e_client.c
* Unmerged path drivers/net/ethernet/intel/i40e/i40e_main.c
