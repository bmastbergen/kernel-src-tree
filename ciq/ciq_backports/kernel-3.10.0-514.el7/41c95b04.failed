mei: add also write waiting list to runtime pm blockers

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Tomas Winkler <tomas.winkler@intel.com>
commit 41c95b04385863f694fcf96e08994ebc722b7b9f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/41c95b04.failed

The io callback is clear from write_waitling_list after
we receive interrupt from the hw to ack the write completion.
We need to wait for this interrupt deliver before we try
to enter low power state

	Signed-off-by: Tomas Winkler <tomas.winkler@intel.com>
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 41c95b04385863f694fcf96e08994ebc722b7b9f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/misc/mei/init.c
diff --cc drivers/misc/mei/init.c
index 08331e745faf,94514b2c7a50..000000000000
--- a/drivers/misc/mei/init.c
+++ b/drivers/misc/mei/init.c
@@@ -330,9 -361,10 +330,14 @@@ bool mei_write_is_idle(struct mei_devic
  {
  	bool idle = (dev->dev_state == MEI_DEV_ENABLED &&
  		list_empty(&dev->ctrl_wr_list.list) &&
- 		list_empty(&dev->write_list.list));
+ 		list_empty(&dev->write_list.list)   &&
+ 		list_empty(&dev->write_waiting_list.list));
  
++<<<<<<< HEAD
 +	dev_dbg(&dev->pdev->dev, "write pg: is idle[%d] state=%s ctrl=%d write=%d\n",
++=======
+ 	dev_dbg(dev->dev, "write pg: is idle[%d] state=%s ctrl=%01d write=%01d wwait=%01d\n",
++>>>>>>> 41c95b043858 (mei: add also write waiting list to runtime pm blockers)
  		idle,
  		mei_dev_state_str(dev->dev_state),
  		list_empty(&dev->ctrl_wr_list.list),
* Unmerged path drivers/misc/mei/init.c
