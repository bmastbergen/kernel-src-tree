tools lib: Sync tools/lib/find_bit.c with the kernel

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [tools] lib: Sync tools/lib/find_bit.c with the kernel (Jiri Olsa) [1323852]
Rebuild_FUZZ: 93.88%
commit-author Arnaldo Carvalho de Melo <acme@redhat.com>
commit 64af4e0da419ef9e9db0d34a3b5836adbf90a5e8
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/64af4e0d.failed

Need to move the bitmap.[ch] things from tools/perf/ to tools/lib, will
be done in the next patches.

	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: Borislav Petkov <bp@suse.de>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: George Spelvin <linux@horizon.com
	Cc: Jiri Olsa <jolsa@redhat.com>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Rasmus Villemoes <linux@rasmusvillemoes.dk>
	Cc: Wang Nan <wangnan0@huawei.com>
	Cc: Yury Norov <yury.norov@gmail.com>
Link: http://lkml.kernel.org/n/tip-5fys65wkd7gu8j7a7xgukc5t@git.kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 64af4e0da419ef9e9db0d34a3b5836adbf90a5e8)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/lib/util/find_next_bit.c
diff --cc tools/lib/util/find_next_bit.c
index 41b44f65a79e,9122a9e80046..000000000000
--- a/tools/lib/util/find_next_bit.c
+++ b/tools/lib/util/find_next_bit.c
@@@ -1,6 -1,6 +1,10 @@@
- /* find_next_bit.c: fallback find next bit implementation
+ /* bit search implementation
   *
++<<<<<<< HEAD:tools/lib/util/find_next_bit.c
 + * Copied from lib/find_next_bit.c to tools/lib/next_bit.c
++=======
+  * Copied from lib/find_bit.c to tools/lib/find_bit.c
++>>>>>>> 64af4e0da419 (tools lib: Sync tools/lib/find_bit.c with the kernel):tools/lib/find_bit.c
   *
   * Copyright (C) 2004 Red Hat, Inc. All Rights Reserved.
   * Written by David Howells (dhowells@redhat.com)
* Unmerged path tools/lib/util/find_next_bit.c
diff --git a/tools/perf/util/include/linux/bitmap.h b/tools/perf/util/include/linux/bitmap.h
index 40bd21488032..28f5493da491 100644
--- a/tools/perf/util/include/linux/bitmap.h
+++ b/tools/perf/util/include/linux/bitmap.h
@@ -11,6 +11,8 @@ int __bitmap_weight(const unsigned long *bitmap, int bits);
 void __bitmap_or(unsigned long *dst, const unsigned long *bitmap1,
 		 const unsigned long *bitmap2, int bits);
 
+#define BITMAP_FIRST_WORD_MASK(start) (~0UL << ((start) & (BITS_PER_LONG - 1)))
+
 #define BITMAP_LAST_WORD_MASK(nbits)					\
 (									\
 	((nbits) % BITS_PER_LONG) ?					\
