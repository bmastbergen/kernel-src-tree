mmc: sdhci-pci: Fix Braswell eMMC timeout clock frequency

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [mmc] sdhci-pci: Fix Braswell eMMC timeout clock frequency (Don Zickus) [1127975 1277866 1280133 1286932 1297039]
Rebuild_FUZZ: 95.41%
commit-author Adrian Hunter <adrian.hunter@intel.com>
commit a06586b62db5c63752e2e68daffec4baa275d594
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/a06586b6.failed

Braswell eMMC host controller specifies an incorrect
timeout clock frequncy in the capabilities registers.
The correct value is 1 MHz.

	Signed-off-by: Adrian Hunter <adrian.hunter@intel.com>
	Signed-off-by: Ulf Hansson <ulf.hansson@linaro.org>
(cherry picked from commit a06586b62db5c63752e2e68daffec4baa275d594)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/mmc/host/sdhci-pci.c
diff --cc drivers/mmc/host/sdhci-pci.c
index c6726e5f3d23,61192973e7cb..000000000000
--- a/drivers/mmc/host/sdhci-pci.c
+++ b/drivers/mmc/host/sdhci-pci.c
@@@ -247,10 -251,29 +247,16 @@@ static const struct sdhci_pci_fixes sdh
  	.probe_slot	= pch_hc_probe_slot,
  };
  
 -static void sdhci_pci_int_hw_reset(struct sdhci_host *host)
 -{
 -	u8 reg;
 -
 -	reg = sdhci_readb(host, SDHCI_POWER_CONTROL);
 -	reg |= 0x10;
 -	sdhci_writeb(host, reg, SDHCI_POWER_CONTROL);
 -	/* For eMMC, minimum is 1us but give it 9us for good measure */
 -	udelay(9);
 -	reg &= ~0x10;
 -	sdhci_writeb(host, reg, SDHCI_POWER_CONTROL);
 -	/* For eMMC, minimum is 200us but give it 300us for good measure */
 -	usleep_range(300, 1000);
 -}
 -
  static int byt_emmc_probe_slot(struct sdhci_pci_slot *slot)
  {
 -	slot->host->mmc->caps |= MMC_CAP_8_BIT_DATA | MMC_CAP_NONREMOVABLE |
 -				 MMC_CAP_HW_RESET | MMC_CAP_1_8V_DDR;
 +	slot->host->mmc->caps |= MMC_CAP_8_BIT_DATA | MMC_CAP_NONREMOVABLE;
  	slot->host->mmc->caps2 |= MMC_CAP2_HC_ERASE_SZ;
++<<<<<<< HEAD
++=======
+ 	slot->hw_reset = sdhci_pci_int_hw_reset;
+ 	if (slot->chip->pdev->device == PCI_DEVICE_ID_INTEL_BSW_EMMC)
+ 		slot->host->timeout_clk = 1000; /* 1000 kHz i.e. 1 MHz */
++>>>>>>> a06586b62db5 (mmc: sdhci-pci: Fix Braswell eMMC timeout clock frequency)
  	return 0;
  }
  
* Unmerged path drivers/mmc/host/sdhci-pci.c
