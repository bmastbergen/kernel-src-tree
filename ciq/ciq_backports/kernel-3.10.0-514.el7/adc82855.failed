mmc: sdhci: check 1.2v IO capability for SDHC host

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [mmc] sdhci: check 1.2v IO capability for SDHC host (Don Zickus) [1127975 1277866 1280133 1286932 1297039]
Rebuild_FUZZ: 94.74%
commit-author Chuanxiao.Dong <chuanxiao.dong@intel.com>
commit adc828556dfc3f87a5c1338fc5412cbec3c0b529
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/adc82855.failed

Right now enable 1.2v IO voltage for SDHC is by using vqmmc.
Thus for the host which doesn't have vqmmc, or its vqmmc does
not support 1.2v, directly use MMC_CAP2_HS200 may cause HS200
failure.

So needs to check if vqmmc is able to support 1.2v. If it does
not support, disable 1.2v IO for HS200.

	Signed-off-by: Chuanxiao Dong <chuanxiao.dong@intel.com>
	Signed-off-by: Ulf Hansson <ulf.hansson@linaro.org>
(cherry picked from commit adc828556dfc3f87a5c1338fc5412cbec3c0b529)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/mmc/host/sdhci.c
diff --cc drivers/mmc/host/sdhci.c
index 3f69769724f3,7481bd863502..000000000000
--- a/drivers/mmc/host/sdhci.c
+++ b/drivers/mmc/host/sdhci.c
@@@ -3034,7 -3037,13 +3034,17 @@@ int sdhci_add_host(struct sdhci_host *h
  		/* SD3.0: SDR104 is supported so (for eMMC) the caps2
  		 * field can be promoted to support HS200.
  		 */
++<<<<<<< HEAD
 +		mmc->caps2 |= MMC_CAP2_HS200;
++=======
+ 		if (!(host->quirks2 & SDHCI_QUIRK2_BROKEN_HS200)) {
+ 			mmc->caps2 |= MMC_CAP2_HS200;
+ 			if (IS_ERR(mmc->supply.vqmmc) ||
+ 					!regulator_is_supported_voltage
+ 					(mmc->supply.vqmmc, 1100000, 1300000))
+ 				mmc->caps2 &= ~MMC_CAP2_HS200_1_2V_SDR;
+ 		}
++>>>>>>> adc828556dfc (mmc: sdhci: check 1.2v IO capability for SDHC host)
  	} else if (caps[1] & SDHCI_SUPPORT_SDR50)
  		mmc->caps |= MMC_CAP_UHS_SDR50;
  
* Unmerged path drivers/mmc/host/sdhci.c
