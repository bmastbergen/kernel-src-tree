staging/rdma/hfi1: fix 0-day syntax error

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [infiniband] rdma/hfi1: fix 0-day syntax error (Alex Estrin) [1272062 1273170]
Rebuild_FUZZ: 89.19%
commit-author Mike Marciniszyn <mike.marciniszyn@intel.com>
commit 6b5c5213e57453c228f7695d5d889aa4c84272c3
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/6b5c5213.failed

Setting CONFIG_HFI1_DEBUG_SDMA_ORDER causes a syntax error:
sdma.c: In function ‘complete_tx’:
sdma.c:370: error: ‘txp’ undeclared (first use in
this function)
sdma.c:370: error: (Each undeclared identifier is reported only once
sdma.c:370: error: for each function it appears in.)

Adjust code under ifdef to reference the tx properly.

	Reviewed-by: Dennis Dalessandro <dennis.dalessandro@intel.com>
	Signed-off-by: Mike Marciniszyn <mike.marciniszyn@intel.com>
	Signed-off-by: Doug Ledford <dledford@redhat.com>
(cherry picked from commit 6b5c5213e57453c228f7695d5d889aa4c84272c3)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/staging/hfi1/sdma.c
diff --cc drivers/staging/hfi1/sdma.c
index 8a57bc183ce2,e29b5d394a5f..000000000000
--- a/drivers/staging/hfi1/sdma.c
+++ b/drivers/staging/hfi1/sdma.c
@@@ -361,6 -358,28 +361,31 @@@ static inline void sdma_set_desc_cnt(st
  	write_sde_csr(sde, SD(DESC_CNT), reg);
  }
  
++<<<<<<< HEAD:drivers/staging/hfi1/sdma.c
++=======
+ static inline void complete_tx(struct sdma_engine *sde,
+ 			       struct sdma_txreq *tx,
+ 			       int res)
+ {
+ 	/* protect against complete modifying */
+ 	struct iowait *wait = tx->wait;
+ 	callback_t complete = tx->complete;
+ 
+ #ifdef CONFIG_HFI1_DEBUG_SDMA_ORDER
+ 	trace_hfi1_sdma_out_sn(sde, tx->sn);
+ 	if (WARN_ON_ONCE(sde->head_sn != tx->sn))
+ 		dd_dev_err(sde->dd, "expected %llu got %llu\n",
+ 			   sde->head_sn, tx->sn);
+ 	sde->head_sn++;
+ #endif
+ 	sdma_txclean(sde->dd, tx);
+ 	if (complete)
+ 		(*complete)(tx, res);
+ 	if (iowait_sdma_dec(wait) && wait)
+ 		iowait_drain_wakeup(wait);
+ }
+ 
++>>>>>>> 6b5c5213e574 (staging/rdma/hfi1: fix 0-day syntax error):drivers/staging/rdma/hfi1/sdma.c
  /*
   * Complete all the sdma requests with a SDMA_TXREQ_S_ABORTED status
   *
* Unmerged path drivers/staging/hfi1/sdma.c
