storvsc: use correct defaults for values determined by protocol negotiation

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Keith Mange <keith.mange@microsoft.com>
commit cb11feada9c049bc633831d3a5dcc50163f13b5e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/cb11fead.failed

Use correct defaults for values determined by protocol negotiation,
instead of resetting them with every scsi controller.

	Tested-by: Alex Ng <alexng@microsoft.com>
	Signed-off-by: Keith Mange <keith.mange@microsoft.com>
	Signed-off-by: K. Y. Srinivasan <kys@microsoft.com>
	Signed-off-by: James Bottomley <JBottomley@Odin.com>
(cherry picked from commit cb11feada9c049bc633831d3a5dcc50163f13b5e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/storvsc_drv.c
diff --cc drivers/scsi/storvsc_drv.c
index 848fa40e25ba,8937ce92f875..000000000000
--- a/drivers/scsi/storvsc_drv.c
+++ b/drivers/scsi/storvsc_drv.c
@@@ -1743,18 -1818,11 +1752,26 @@@ static int storvsc_probe(struct hv_devi
  	 * set state to properly communicate with the host.
  	 */
  
++<<<<<<< HEAD
 +	switch (vmbus_proto_version) {
 +	case VERSION_WS2008:
 +	case VERSION_WIN7:
 +		sense_buffer_size = PRE_WIN8_STORVSC_SENSE_BUFFER_SIZE;
 +		vmscsi_size_delta = sizeof(struct vmscsi_win8_extension);
 +		max_luns_per_target = STORVSC_IDE_MAX_LUNS_PER_TARGET;
 +		max_targets = STORVSC_IDE_MAX_TARGETS;
 +		max_channels = STORVSC_IDE_MAX_CHANNELS;
 +		break;
 +	default:
 +		sense_buffer_size = POST_WIN7_STORVSC_SENSE_BUFFER_SIZE;
 +		vmscsi_size_delta = 0;
++=======
+ 	if (vmbus_proto_version < VERSION_WIN8) {
+ 		max_luns_per_target = STORVSC_IDE_MAX_LUNS_PER_TARGET;
+ 		max_targets = STORVSC_IDE_MAX_TARGETS;
+ 		max_channels = STORVSC_IDE_MAX_CHANNELS;
+ 	} else {
++>>>>>>> cb11feada9c0 (storvsc: use correct defaults for values determined by protocol negotiation)
  		max_luns_per_target = STORVSC_MAX_LUNS_PER_TARGET;
  		max_targets = STORVSC_MAX_TARGETS;
  		max_channels = STORVSC_MAX_CHANNELS;
* Unmerged path drivers/scsi/storvsc_drv.c
