fanotify: remove useless bypass_perm check

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Jan Kara <jack@suse.cz>
commit 3298cf37bee59c66a51da0cea8bae0d0418e27fd
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/3298cf37.failed

The prepare_for_access_response() function checks whether
group->fanotify_data.bypass_perm is set.  However this test can never be
true because prepare_for_access_response() is called only from
fanotify_read() which means fanotify group is alive with an active fd
while bypass_perm is set from fanotify_release() when all file
descriptors pointing to the group are closed and the group is going
away.

	Signed-off-by: Jan Kara <jack@suse.cz>
	Cc: Eric Paris <eparis@redhat.com>
	Cc: Al Viro <viro@zeniv.linux.org.uk>
	Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
	Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
(cherry picked from commit 3298cf37bee59c66a51da0cea8bae0d0418e27fd)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/notify/fanotify/fanotify_user.c
diff --cc fs/notify/fanotify/fanotify_user.c
index 8ef1b0f829ee,70fe65437d21..000000000000
--- a/fs/notify/fanotify/fanotify_user.c
+++ b/fs/notify/fanotify/fanotify_user.c
@@@ -213,14 -211,6 +213,17 @@@ static int prepare_for_access_response(
  	re->fd = fd;
  
  	mutex_lock(&group->fanotify_data.access_mutex);
++<<<<<<< HEAD
 +
 +	if (atomic_read(&group->fanotify_data.bypass_perm)) {
 +		mutex_unlock(&group->fanotify_data.access_mutex);
 +		kmem_cache_free(fanotify_response_event_cache, re);
 +		event->response = FAN_ALLOW;
 +		return 0;
 +	}
 +		
++=======
++>>>>>>> 3298cf37bee5 (fanotify: remove useless bypass_perm check)
  	list_add_tail(&re->list, &group->fanotify_data.access_list);
  	mutex_unlock(&group->fanotify_data.access_mutex);
  
* Unmerged path fs/notify/fanotify/fanotify_user.c
