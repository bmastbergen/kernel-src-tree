perf tools: Fix checking asprintf return value

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Wang Nan <wangnan0@huawei.com>
commit 26dee028d365fbc0e3326606a8520260b4462381
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/26dee028.failed

According to man pages, asprintf returns -1 when failure. This patch
fixes two incorrect return value checker.

	Signed-off-by: Wang Nan <wangnan0@huawei.com>
	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: Alexei Starovoitov <ast@kernel.org>
	Cc: Brendan Gregg <brendan.d.gregg@gmail.com>
	Cc: Cody P Schafer <dev@codyps.com>
	Cc: He Kuang <hekuang@huawei.com>
	Cc: Jeremie Galarneau <jeremie.galarneau@efficios.com>
	Cc: Jiri Olsa <jolsa@kernel.org>
	Cc: Kirill Smelkov <kirr@nexedi.com>
	Cc: Li Zefan <lizefan@huawei.com>
	Cc: Masami Hiramatsu <masami.hiramatsu.pt@hitachi.com>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Peter Zijlstra <peterz@infradead.org>
	Cc: Zefan Li <lizefan@huawei.com>
	Cc: pi3orama@163.com
	Cc: stable@vger.kernel.org # v4.4+
Fixes: ffeb883e5662 ("perf tools: Show proper error message for wrong terms of hw/sw events")
Link: http://lkml.kernel.org/r/1455882283-79592-5-git-send-email-wangnan0@huawei.com
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 26dee028d365fbc0e3326606a8520260b4462381)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/util/parse-events.c
diff --cc tools/perf/util/parse-events.c
index ee3541614df9,72524c755b11..000000000000
--- a/tools/perf/util/parse-events.c
+++ b/tools/perf/util/parse-events.c
@@@ -1798,3 -2096,29 +1798,32 @@@ void parse_events_evlist_error(struct p
  	err->str = strdup(str);
  	WARN_ONCE(!err->str, "WARNING: failed to allocate error string");
  }
++<<<<<<< HEAD
++=======
+ 
+ /*
+  * Return string contains valid config terms of an event.
+  * @additional_terms: For terms such as PMU sysfs terms.
+  */
+ char *parse_events_formats_error_string(char *additional_terms)
+ {
+ 	char *str;
+ 	static const char *static_terms = "config,config1,config2,name,"
+ 					  "period,freq,branch_type,time,"
+ 					  "call-graph,stack-size\n";
+ 
+ 	/* valid terms */
+ 	if (additional_terms) {
+ 		if (asprintf(&str, "valid terms: %s,%s",
+ 			     additional_terms, static_terms) < 0)
+ 			goto fail;
+ 	} else {
+ 		if (asprintf(&str, "valid terms: %s", static_terms) < 0)
+ 			goto fail;
+ 	}
+ 	return str;
+ 
+ fail:
+ 	return NULL;
+ }
++>>>>>>> 26dee028d365 (perf tools: Fix checking asprintf return value)
* Unmerged path tools/perf/util/parse-events.c
