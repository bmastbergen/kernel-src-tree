st: convert to using driver attr groups for sysfs

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Seymour, Shane M <shane.seymour@hp.com>
commit 442d75628a3040bbfeb4a1f743b70a8afec0adbc
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/442d7562.failed

This patch changes the st driver to use attribute groups so
driver sysfs files are created automatically. See the
following for reference:

http://kroah.com/log/blog/2013/06/26/how-to-create-a-sysfs-file-correctly/

	Signed-off-by: Shane Seymour <shane.seymour@hp.com>
	Reviewed-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
	Acked-by: Kai MÃ¤kisara <kai.makisara@kolumbus.fi>
	Signed-off-by: James Bottomley <JBottomley@Odin.com>
(cherry picked from commit 442d75628a3040bbfeb4a1f743b70a8afec0adbc)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/st.c
diff --cc drivers/scsi/st.c
index 9f0d7d7ba183,84e98b982098..000000000000
--- a/drivers/scsi/st.c
+++ b/drivers/scsi/st.c
@@@ -84,7 -84,8 +84,12 @@@ static int try_wdio = 1
  static int debug_flag;
  
  static struct class st_sysfs_class;
++<<<<<<< HEAD
 +static struct device_attribute st_dev_attrs[];
++=======
+ static const struct attribute_group *st_dev_groups[];
+ static const struct attribute_group *st_drv_groups[];
++>>>>>>> 442d75628a30 (st: convert to using driver attr groups for sysfs)
  
  MODULE_AUTHOR("Kai Makisara");
  MODULE_DESCRIPTION("SCSI tape (st) driver");
@@@ -198,15 -199,13 +203,13 @@@ static int sgl_unmap_user_pages(struct 
  static int st_probe(struct device *);
  static int st_remove(struct device *);
  
- static int do_create_sysfs_files(void);
- static void do_remove_sysfs_files(void);
- 
  static struct scsi_driver st_template = {
 +	.owner			= THIS_MODULE,
  	.gendrv = {
  		.name		= "st",
 -		.owner		= THIS_MODULE,
  		.probe		= st_probe,
  		.remove		= st_remove,
+ 		.groups		= st_drv_groups,
  	},
  };
  
* Unmerged path drivers/scsi/st.c
