hv_netvsc: add software transmit timestamp support

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author sixiao@microsoft.com <sixiao@microsoft.com>
commit 76d13b568776fdef646c70878de406c90aef46a9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/76d13b56.failed

Enable skb_tx_timestamp in hyperv netvsc.

	Signed-off-by: Simon Xiao <sixiao@microsoft.com>
	Reviewed-by: K. Y. Srinivasan <kys@microsoft.com>
	Reviewed-by: Haiyang Zhang <haiyangz@microsoft.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 76d13b568776fdef646c70878de406c90aef46a9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/hyperv/netvsc_drv.c
diff --cc drivers/net/hyperv/netvsc_drv.c
index 822e657fcee7,202e2b179509..000000000000
--- a/drivers/net/hyperv/netvsc_drv.c
+++ b/drivers/net/hyperv/netvsc_drv.c
@@@ -595,9 -548,12 +595,16 @@@ do_send
  	rndis_msg->msg_len += rndis_msg_size;
  	packet->total_data_buflen = rndis_msg->msg_len;
  	packet->page_buf_cnt = init_page_array(rndis_msg, rndis_msg_size,
 -					       skb, packet, &pb);
 +					skb, &packet->page_buf[0]);
  
++<<<<<<< HEAD
 +	ret = netvsc_send(net_device_ctx->device_ctx, packet);
++=======
+ 	/* timestamp packet in software */
+ 	skb_tx_timestamp(skb);
+ 	ret = netvsc_send(net_device_ctx->device_ctx, packet,
+ 			  rndis_msg, &pb, skb);
++>>>>>>> 76d13b568776 (hv_netvsc: add software transmit timestamp support)
  
  drop:
  	if (ret == 0) {
@@@ -806,6 -921,8 +813,11 @@@ static const struct ethtool_ops ethtool
  	.get_drvinfo	= netvsc_get_drvinfo,
  	.get_link	= ethtool_op_get_link,
  	.get_channels   = netvsc_get_channels,
++<<<<<<< HEAD
++=======
+ 	.set_channels   = netvsc_set_channels,
+ 	.get_ts_info	= ethtool_op_get_ts_info,
++>>>>>>> 76d13b568776 (hv_netvsc: add software transmit timestamp support)
  };
  
  static const struct net_device_ops device_ops = {
* Unmerged path drivers/net/hyperv/netvsc_drv.c
