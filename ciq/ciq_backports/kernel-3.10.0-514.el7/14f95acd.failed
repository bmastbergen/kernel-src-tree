powerpc/mpic_u3msi: Move MSI-related ops to pci_controller_ops

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [powerpc] mpic_u3msi: Move MSI-related ops to pci_controller_ops (Gustavo Duarte) [1275657]
Rebuild_FUZZ: 93.10%
commit-author Daniel Axtens <dja@axtens.net>
commit 14f95acda2f3238f3470beea0ddbf78081b3268d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/14f95acd.failed

Move the u3 MPIC msi subsystem to use the pci_controller_ops structure
rather than ppc_md for MSI related PCI controller operations.

As with fsl_msi, operations are plugged in at the subsys level, after
controller creation. Again, we iterate over all controllers and
populate them with the MSI ops.

	Signed-off-by: Daniel Axtens <dja@axtens.net>
	Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
(cherry picked from commit 14f95acda2f3238f3470beea0ddbf78081b3268d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/powerpc/sysdev/mpic_u3msi.c
diff --cc arch/powerpc/sysdev/mpic_u3msi.c
index 9a7aa0ed9c1c,fc46ef3b816e..000000000000
--- a/arch/powerpc/sysdev/mpic_u3msi.c
+++ b/arch/powerpc/sysdev/mpic_u3msi.c
@@@ -199,10 -194,11 +200,18 @@@ int mpic_u3msi_init(struct mpic *mpic
  	BUG_ON(msi_mpic);
  	msi_mpic = mpic;
  
++<<<<<<< HEAD
 +	WARN_ON(ppc_md.setup_msi_irqs);
 +	ppc_md.setup_msi_irqs = u3msi_setup_msi_irqs;
 +	ppc_md.teardown_msi_irqs = u3msi_teardown_msi_irqs;
 +	ppc_md.msi_check_device = u3msi_msi_check_device;
++=======
+ 	list_for_each_entry(phb, &hose_list, list_node) {
+ 		WARN_ON(phb->controller_ops.setup_msi_irqs);
+ 		phb->controller_ops.setup_msi_irqs = u3msi_setup_msi_irqs;
+ 		phb->controller_ops.teardown_msi_irqs = u3msi_teardown_msi_irqs;
+ 	}
++>>>>>>> 14f95acda2f3 (powerpc/mpic_u3msi: Move MSI-related ops to pci_controller_ops)
  
  	return 0;
  }
* Unmerged path arch/powerpc/sysdev/mpic_u3msi.c
