ALSA: hda - Use eld notifier for Intel SandyBridge and IvyBridge HDMI/DP

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Takashi Iwai <tiwai@suse.de>
commit e85015a3797f2665cc6f0339e6407adc00ac4245
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/e85015a3.failed

Intel SandyBridge and IvyBridge (CougarPoint and PantherPoint
platforms) have also the same digital port vs audio widget mapping
(from port B = NID 0x05 to port D = NID 0x07) as Haswell & co.
So, we can reuse the existing functions for HSW+ for these platforms
without changing there, but just by re-adding the on-demand i915
binding in HDMI codec driver.

	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit e85015a3797f2665cc6f0339e6407adc00ac4245)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/pci/hda/patch_hdmi.c
diff --cc sound/pci/hda/patch_hdmi.c
index 0392c2d96924,09eb26c5730c..000000000000
--- a/sound/pci/hda/patch_hdmi.c
+++ b/sound/pci/hda/patch_hdmi.c
@@@ -2076,6 -2073,20 +2076,23 @@@ static void hdmi_array_free(struct hdmi
  	snd_array_free(&spec->cvts);
  }
  
++<<<<<<< HEAD
++=======
+ static void generic_spec_free(struct hda_codec *codec)
+ {
+ 	struct hdmi_spec *spec = codec->spec;
+ 
+ 	if (spec) {
+ 		if (spec->i915_bound)
+ 			snd_hdac_i915_exit(&codec->bus->core);
+ 		hdmi_array_free(spec);
+ 		kfree(spec);
+ 		codec->spec = NULL;
+ 	}
+ 	codec->dp_mst = false;
+ }
+ 
++>>>>>>> e85015a3797f (ALSA: hda - Use eld notifier for Intel SandyBridge and IvyBridge HDMI/DP)
  static void generic_hdmi_free(struct hda_codec *codec)
  {
  	struct hdmi_spec *spec = codec->spec;
@@@ -3498,16 -3619,16 +3549,26 @@@ HDA_CODEC_ENTRY(0x80862801, "Bearlake H
  HDA_CODEC_ENTRY(0x80862802, "Cantiga HDMI",	patch_generic_hdmi),
  HDA_CODEC_ENTRY(0x80862803, "Eaglelake HDMI",	patch_generic_hdmi),
  HDA_CODEC_ENTRY(0x80862804, "IbexPeak HDMI",	patch_generic_hdmi),
++<<<<<<< HEAD
 +HDA_CODEC_ENTRY(0x80862805, "CougarPoint HDMI",	patch_generic_hdmi),
 +HDA_CODEC_ENTRY(0x80862806, "PantherPoint HDMI", patch_generic_hdmi),
 +HDA_CODEC_ENTRY(0x80862807, "Haswell HDMI",	patch_generic_hdmi),
 +HDA_CODEC_ENTRY(0x80862808, "Broadwell HDMI",	patch_generic_hdmi),
 +HDA_CODEC_ENTRY(0x80862809, "Skylake HDMI",	patch_generic_hdmi),
 +HDA_CODEC_ENTRY(0x8086280a, "Broxton HDMI",	patch_generic_hdmi),
 +HDA_CODEC_ENTRY(0x8086280b, "Kabylake HDMI",	patch_generic_hdmi),
++=======
+ HDA_CODEC_ENTRY(0x80862805, "CougarPoint HDMI",	patch_i915_cpt_hdmi),
+ HDA_CODEC_ENTRY(0x80862806, "PantherPoint HDMI", patch_i915_cpt_hdmi),
+ HDA_CODEC_ENTRY(0x80862807, "Haswell HDMI",	patch_i915_hsw_hdmi),
+ HDA_CODEC_ENTRY(0x80862808, "Broadwell HDMI",	patch_i915_hsw_hdmi),
+ HDA_CODEC_ENTRY(0x80862809, "Skylake HDMI",	patch_i915_hsw_hdmi),
+ HDA_CODEC_ENTRY(0x8086280a, "Broxton HDMI",	patch_i915_hsw_hdmi),
+ HDA_CODEC_ENTRY(0x8086280b, "Kabylake HDMI",	patch_i915_hsw_hdmi),
++>>>>>>> e85015a3797f (ALSA: hda - Use eld notifier for Intel SandyBridge and IvyBridge HDMI/DP)
  HDA_CODEC_ENTRY(0x80862880, "CedarTrail HDMI",	patch_generic_hdmi),
 -HDA_CODEC_ENTRY(0x80862882, "Valleyview2 HDMI",	patch_i915_byt_hdmi),
 -HDA_CODEC_ENTRY(0x80862883, "Braswell HDMI",	patch_i915_byt_hdmi),
 +HDA_CODEC_ENTRY(0x80862882, "Valleyview2 HDMI",	patch_generic_hdmi),
 +HDA_CODEC_ENTRY(0x80862883, "Braswell HDMI",	patch_generic_hdmi),
  HDA_CODEC_ENTRY(0x808629fb, "Crestline HDMI",	patch_generic_hdmi),
  /* special ID for generic HDMI */
  HDA_CODEC_ENTRY(HDA_CODEC_ID_GENERIC_HDMI, "Generic HDMI", patch_generic_hdmi),
* Unmerged path sound/pci/hda/patch_hdmi.c
