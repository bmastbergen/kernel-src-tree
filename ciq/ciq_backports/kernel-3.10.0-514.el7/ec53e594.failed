tools/power turbostat: initial SKX support

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [tools] power turbostat: initial SKX support (Steve Best) [1273744]
Rebuild_FUZZ: 92.31%
commit-author Len Brown <len.brown@intel.com>
commit ec53e594c65ab099ca784d62b6f4c191e3a4d7cc
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/ec53e594.failed

SKX has a lot in common with HSX

	Signed-off-by: Len Brown <len.brown@intel.com>
	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit ec53e594c65ab099ca784d62b6f4c191e3a4d7cc)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/power/x86/turbostat/turbostat.c
diff --cc tools/power/x86/turbostat/turbostat.c
index 3872e4f6fd72,3b64b6bdaf90..000000000000
--- a/tools/power/x86/turbostat/turbostat.c
+++ b/tools/power/x86/turbostat/turbostat.c
@@@ -2205,12 -2642,9 +2207,13 @@@ void rapl_probe(unsigned int family, un
  		do_rapl = RAPL_PKG | RAPL_DRAM | RAPL_DRAM_PERF_STATUS | RAPL_PKG_PERF_STATUS | RAPL_PKG_POWER_INFO;
  		break;
  	case 0x3F:	/* HSX */
 +		do_rapl = RAPL_PKG | RAPL_DRAM | RAPL_DRAM_PERF_STATUS | RAPL_PKG_PERF_STATUS | RAPL_PKG_POWER_INFO;
 +		break;
 +	case 0x2D:
 +	case 0x3E:
  	case 0x4F:	/* BDX */
  	case 0x56:	/* BDX-DE */
+ 	case 0x55:	/* SKX */
  	case 0x57:	/* KNL */
  		do_rapl = RAPL_PKG | RAPL_DRAM | RAPL_DRAM_POWER_INFO | RAPL_DRAM_PERF_STATUS | RAPL_PKG_PERF_STATUS | RAPL_PKG_POWER_INFO;
  		break;
@@@ -2486,6 -2924,8 +2489,11 @@@ int has_snb_msrs(unsigned int family, u
  	case 0x56:	/* BDX-DE */
  	case 0x4E:	/* SKL */
  	case 0x5E:	/* SKL */
++<<<<<<< HEAD
++=======
+ 	case 0x55:	/* SKX */
+ 	case 0x5C:	/* BXT */
++>>>>>>> ec53e594c65a (tools/power turbostat: initial SKX support)
  		return 1;
  	}
  	return 0;
@@@ -2752,7 -3282,13 +2760,17 @@@ void process_cpuid(
  				switch(model) {
  				case 0x4E:	/* SKL */
  				case 0x5E:	/* SKL */
++<<<<<<< HEAD
 +					crystal_hz = 24000000;	/* 24 MHz */
++=======
+ 					crystal_hz = 24000000;	/* 24.0 MHz */
+ 					break;
+ 				case 0x55:	/* SKX */
+ 					crystal_hz = 25000000;	/* 25.0 MHz */
+ 					break;
+ 				case 0x5C:	/* BXT */
+ 					crystal_hz = 19200000;	/* 19.2 MHz */
++>>>>>>> ec53e594c65a (tools/power turbostat: initial SKX support)
  					break;
  				default:
  					crystal_hz = 0;
@@@ -3118,7 -3701,7 +3136,11 @@@ int get_and_dump_counters(void
  }
  
  void print_version() {
++<<<<<<< HEAD
 +	fprintf(stderr, "turbostat version 4.8 26-Sep, 2015"
++=======
+ 	fprintf(outf, "turbostat version 4.12 5 Apr 2016"
++>>>>>>> ec53e594c65a (tools/power turbostat: initial SKX support)
  		" - Len Brown <lenb@kernel.org>\n");
  }
  
* Unmerged path tools/power/x86/turbostat/turbostat.c
