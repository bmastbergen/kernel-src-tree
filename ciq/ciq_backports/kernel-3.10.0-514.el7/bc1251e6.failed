RDMA/nes: checking for NULL instead of IS_ERR

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Dan Carpenter <dan.carpenter@oracle.com>
commit bc1251e6d9420fec4c6b328bcf9ea4e5bdecd30d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/bc1251e6.failed

nes_reg_phys_mr() returns ERR_PTRs on error.  It doesn't return NULL.

This bug has been there for a while, but we recently changed from
calling a function pointer to calling nes_reg_phys_mr() directly so now
Smatch is able to detect the bug.

	Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
	Reviewed-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Doug Ledford <dledford@redhat.com>
(cherry picked from commit bc1251e6d9420fec4c6b328bcf9ea4e5bdecd30d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/hw/nes/nes_cm.c
diff --cc drivers/infiniband/hw/nes/nes_cm.c
index 7664a49d1479,cb9f0f27308d..000000000000
--- a/drivers/infiniband/hw/nes/nes_cm.c
+++ b/drivers/infiniband/hw/nes/nes_cm.c
@@@ -3074,14 -3315,12 +3074,22 @@@ int nes_accept(struct iw_cm_id *cm_id, 
  		u64temp = (unsigned long)nesqp;
  		nesibdev = nesvnic->nesibdev;
  		nespd = nesqp->nespd;
 +		ibphysbuf.addr = nesqp->ietf_frame_pbase + mpa_frame_offset;
 +		ibphysbuf.size = buff_len;
  		tagged_offset = (u64)(unsigned long)*start_buff;
++<<<<<<< HEAD
 +		ibmr = nesibdev->ibdev.reg_phys_mr((struct ib_pd *)nespd,
 +						   &ibphysbuf, 1,
 +						   IB_ACCESS_LOCAL_WRITE,
 +						   &tagged_offset);
 +		if (!ibmr) {
++=======
+ 		ibmr = nes_reg_phys_mr(&nespd->ibpd,
+ 				nesqp->ietf_frame_pbase + mpa_frame_offset,
+ 				buff_len, IB_ACCESS_LOCAL_WRITE,
+ 				&tagged_offset);
+ 		if (IS_ERR(ibmr)) {
++>>>>>>> bc1251e6d942 (RDMA/nes: checking for NULL instead of IS_ERR)
  			nes_debug(NES_DBG_CM, "Unable to register memory region"
  				  "for lSMM for cm_node = %p \n",
  				  cm_node);
* Unmerged path drivers/infiniband/hw/nes/nes_cm.c
