ixgbe: fix setup_fc for x550em

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Emil Tantilov <emil.s.tantilov@intel.com>
commit abf76d76c5e716a0129180b8f464b1b293823adf
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/abf76d76.failed

mac->ops.setup_fc can be null for backplanes which can cause the driver
to crash on load.

	Reported-by: Patrick McLean <patrickm@gaikai.com>
	Signed-off-by: Emil Tantilov <emil.s.tantilov@intel.com>
	Tested-by: Andrew Bowers <andrewx.bowers@intel.com>
	Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
(cherry picked from commit abf76d76c5e716a0129180b8f464b1b293823adf)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/intel/ixgbe/ixgbe_x550.c
diff --cc drivers/net/ethernet/intel/ixgbe/ixgbe_x550.c
index 98d6e51de236,4716ca499e67..000000000000
--- a/drivers/net/ethernet/intel/ixgbe/ixgbe_x550.c
+++ b/drivers/net/ethernet/intel/ixgbe/ixgbe_x550.c
@@@ -1340,8 -1629,19 +1342,24 @@@ static void ixgbe_init_mac_link_ops_X55
  		mac->ops.enable_tx_laser = NULL;
  		mac->ops.flap_tx_laser = NULL;
  		mac->ops.setup_link = ixgbe_setup_mac_link_multispeed_fiber;
++<<<<<<< HEAD
 +		mac->ops.setup_fc = ixgbe_setup_fc_x550em;
 +		mac->ops.setup_mac_link = ixgbe_setup_mac_link_sfp_x550em;
++=======
+ 		switch (hw->device_id) {
+ 		case IXGBE_DEV_ID_X550EM_A_SFP_N:
+ 			mac->ops.setup_mac_link = ixgbe_setup_mac_link_sfp_n;
+ 			break;
+ 		case IXGBE_DEV_ID_X550EM_A_SFP:
+ 			mac->ops.setup_mac_link =
+ 						ixgbe_setup_mac_link_sfp_x550a;
+ 			break;
+ 		default:
+ 			mac->ops.setup_mac_link =
+ 						ixgbe_setup_mac_link_sfp_x550em;
+ 			break;
+ 		}
++>>>>>>> abf76d76c5e7 (ixgbe: fix setup_fc for x550em)
  		mac->ops.set_rate_select_speed =
  					ixgbe_set_soft_rate_select_speed;
  		break;
@@@ -1349,9 -1649,13 +1367,8 @@@
  		mac->ops.setup_link = ixgbe_setup_mac_link_t_X550em;
  		mac->ops.setup_fc = ixgbe_setup_fc_generic;
  		mac->ops.check_link = ixgbe_check_link_t_X550em;
 -		return;
 -	case ixgbe_media_type_backplane:
 -		if (hw->device_id == IXGBE_DEV_ID_X550EM_A_SGMII ||
 -		    hw->device_id == IXGBE_DEV_ID_X550EM_A_SGMII_L)
 -			mac->ops.setup_link = ixgbe_setup_sgmii;
  		break;
  	default:
- 		mac->ops.setup_fc = ixgbe_setup_fc_x550em;
  		break;
  	}
  }
* Unmerged path drivers/net/ethernet/intel/ixgbe/ixgbe_x550.c
