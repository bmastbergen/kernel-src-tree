KVM: x86: mask CPUID(0xD,0x1).EAX against host value

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [virt] kvm: x86: mask CPUID(0xD, 0x1).EAX against host value (Paolo Bonzini) [1347370]
Rebuild_FUZZ: 99.05%
commit-author Paolo Bonzini <pbonzini@redhat.com>
commit 316314cae15fb0e3869b76b468f59a0c83ac3d4e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/316314ca.failed

This ensures that the guest doesn't see XSAVE extensions
(e.g. xgetbv1 or xsavec) that the host lacks.

	Cc: stable@vger.kernel.org
	Reviewed-by: Radim Krčmář <rkrcmar@redhat.com>
	Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>
(cherry picked from commit 316314cae15fb0e3869b76b468f59a0c83ac3d4e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/kvm/cpuid.c
diff --cc arch/x86/kvm/cpuid.c
index efc7f3feeced,bbbaa802d13e..000000000000
--- a/arch/x86/kvm/cpuid.c
+++ b/arch/x86/kvm/cpuid.c
@@@ -490,7 -533,8 +490,12 @@@ static inline int __do_cpuid_ent(struc
  
  			do_cpuid_1_ent(&entry[i], function, idx);
  			if (idx == 1) {
++<<<<<<< HEAD
 +				entry[i].eax &= kvm_supported_word10_x86_features;
++=======
+ 				entry[i].eax &= kvm_cpuid_D_1_eax_x86_features;
+ 				cpuid_mask(&entry[i].eax, CPUID_D_1_EAX);
++>>>>>>> 316314cae15f (KVM: x86: mask CPUID(0xD,0x1).EAX against host value)
  				entry[i].ebx = 0;
  				if (entry[i].eax & (F(XSAVES)|F(XSAVEC)))
  					entry[i].ebx =
* Unmerged path arch/x86/kvm/cpuid.c
