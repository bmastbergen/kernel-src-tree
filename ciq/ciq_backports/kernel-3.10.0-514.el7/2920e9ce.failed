cpufreq: powernv: Remove flag use-case of policy->driver_data

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [cpufreq] powernv: Remove flag use-case of policy->driver_data (Gustavo Duarte) [1346246]
Rebuild_FUZZ: 92.04%
commit-author Shilpasri G Bhat <shilpa.bhat@linux.vnet.ibm.com>
commit 2920e9ce8f43a946e3c257a7c0ee35b02149fca7
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/2920e9ce.failed

commit 1b0289848d5d ("cpufreq: powernv: Add sysfs attributes to show
throttle stats") used policy->driver_data as a flag for one-time creation
of throttle sysfs files. Instead of this use 'kernfs_find_and_get()' to
check if the attribute already exists. This is required as
policy->driver_data is used for other purposes in the later patch.

	Signed-off-by: Shilpasri G Bhat <shilpa.bhat@linux.vnet.ibm.com>
	Signed-off-by: Akshay Adiga <akshay.adiga@linux.vnet.ibm.com>
	Acked-by: Viresh Kumar <viresh.kumar@linaro.org>
	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit 2920e9ce8f43a946e3c257a7c0ee35b02149fca7)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/cpufreq/powernv-cpufreq.c
diff --cc drivers/cpufreq/powernv-cpufreq.c
index f171dd3496cc,e2e221904d25..000000000000
--- a/drivers/cpufreq/powernv-cpufreq.c
+++ b/drivers/cpufreq/powernv-cpufreq.c
@@@ -400,6 -462,19 +401,22 @@@ static int powernv_cpufreq_cpu_init(str
  	for (i = 0; i < threads_per_core; i++)
  		cpumask_set_cpu(base + i, policy->cpus);
  
++<<<<<<< HEAD
++=======
+ 	kn = kernfs_find_and_get(policy->kobj.sd, throttle_attr_grp.name);
+ 	if (!kn) {
+ 		int ret;
+ 
+ 		ret = sysfs_create_group(&policy->kobj, &throttle_attr_grp);
+ 		if (ret) {
+ 			pr_info("Failed to create throttle stats directory for cpu %d\n",
+ 				policy->cpu);
+ 			return ret;
+ 		}
+ 	} else {
+ 		kernfs_put(kn);
+ 	}
++>>>>>>> 2920e9ce8f43 (cpufreq: powernv: Remove flag use-case of policy->driver_data)
  	return cpufreq_table_validate_and_show(policy, powernv_freqs);
  }
  
* Unmerged path drivers/cpufreq/powernv-cpufreq.c
