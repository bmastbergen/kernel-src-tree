perf tools mem: Fix -t store option for record command

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [tools] perf mem: Fix -t store option for record command (Jiri Olsa) [1357531 1357543]
Rebuild_FUZZ: 94.12%
commit-author Jiri Olsa <jolsa@kernel.org>
commit 33da54fa86e29b87fe1e83bd0f15b4ef2be53ecb
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/33da54fa.failed

Michael reported 'perf mem -t store record' being broken.  The reason is
latest rework of this area:

  commit acbe613e0c03 ("perf tools: Add monitored events array")

We don't mark perf_mem_events store record when -t store option is
specified.

Committer notes:

Before:

  # perf mem -t store record usleep 1
  [ perf record: Woken up 1 times to write data ]
  [ perf record: Captured and wrote 0.020 MB perf.data (7 samples) ]
  # perf evlist
  cycles:ppp
  #

After:

  # perf mem -t store record usleep 1
  [ perf record: Woken up 1 times to write data ]
  [ perf record: Captured and wrote 0.020 MB perf.data (7 samples) ]
  # perf evlist
  cpu/mem-stores/P
  #

	Reported-by: Michael Petlan <mpetlan@redhat.com>
	Signed-off-by: Jiri Olsa <jolsa@redhat.com>
	Tested-by: Arnaldo Carvalho de Melo <acme@redhat.com>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Peter Zijlstra <a.p.zijlstra@chello.nl>
Fixes: acbe613e0c03 ("perf tools: Add monitored events array")
Link: http://lkml.kernel.org/r/1470905457-18311-1-git-send-email-jolsa@kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 33da54fa86e29b87fe1e83bd0f15b4ef2be53ecb)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/builtin-mem.c
diff --cc tools/perf/builtin-mem.c
index 36a564fc7c30,d1ce29be560e..000000000000
--- a/tools/perf/builtin-mem.c
+++ b/tools/perf/builtin-mem.c
@@@ -35,6 -86,12 +35,15 @@@ static int __cmd_record(int argc, cons
  	rec_argv[i++] = "record";
  
  	if (mem->operation & MEM_OPERATION_LOAD)
++<<<<<<< HEAD
++=======
+ 		perf_mem_events[PERF_MEM_EVENTS__LOAD].record = true;
+ 
+ 	if (mem->operation & MEM_OPERATION_STORE)
+ 		perf_mem_events[PERF_MEM_EVENTS__STORE].record = true;
+ 
+ 	if (perf_mem_events[PERF_MEM_EVENTS__LOAD].record)
++>>>>>>> 33da54fa86e2 (perf tools mem: Fix -t store option for record command)
  		rec_argv[i++] = "-W";
  
  	rec_argv[i++] = "-d";
* Unmerged path tools/perf/builtin-mem.c
