bonding: modify bond_get_slave_by_dev() to use neighbours

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Veaceslav Falico <vfalico@redhat.com>
commit 46bb4807b5d95a049b008efd639ff8942970d815
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/46bb4807.failed

It should be used under rtnl/bonding lock, so use the non-RCU version.

CC: Jay Vosburgh <fubar@us.ibm.com>
CC: Andy Gospodarek <andy@greyhouse.net>
	Signed-off-by: Veaceslav Falico <vfalico@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 46bb4807b5d95a049b008efd639ff8942970d815)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/net/bonding.h
diff --cc include/net/bonding.h
index c4cf753d8a08,90f4847b264b..000000000000
--- a/include/net/bonding.h
+++ b/include/net/bonding.h
@@@ -263,14 -276,7 +263,18 @@@ struct bond_vlan_tag 
  static inline struct slave *bond_get_slave_by_dev(struct bonding *bond,
  						  struct net_device *slave_dev)
  {
++<<<<<<< HEAD:include/net/bonding.h
 +	struct slave *slave = NULL;
 +	struct list_head *iter;
 +
 +	bond_for_each_slave(bond, slave, iter)
 +		if (slave->dev == slave_dev)
 +			return slave;
 +
 +	return NULL;
++=======
+ 	return netdev_lower_dev_get_private(bond->dev, slave_dev);
++>>>>>>> 46bb4807b5d9 (bonding: modify bond_get_slave_by_dev() to use neighbours):drivers/net/bonding/bonding.h
  }
  
  static inline struct bonding *bond_get_bond_by_slave(struct slave *slave)
* Unmerged path include/net/bonding.h
