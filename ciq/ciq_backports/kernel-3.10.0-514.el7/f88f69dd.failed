openvswitch: Remove conntrack Kconfig option.

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [net] openvswitch: Remove conntrack Kconfig option (Thadeu Lima de Souza Cascardo) [1274845]
Rebuild_FUZZ: 98.88%
commit-author Joe Stringer <joestringer@nicira.com>
commit f88f69dd17f150e2abcc7e2d95f895f2546fa381
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/f88f69dd.failed

There's no particular desire to have conntrack action support in Open
vSwitch as an independently configurable bit, rather just to ensure
there is not a hard dependency. This exposed option doesn't accurately
reflect the conntrack dependency when enabled, so simplify this by
removing the option. Compile the support if NF_CONNTRACK is enabled.

Fixes: 7f8a436eaa2c ("openvswitch: Add conntrack action")
	Signed-off-by: Joe Stringer <joestringer@nicira.com>
	Acked-by: Pravin B Shelar <pshelar@nicira.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit f88f69dd17f150e2abcc7e2d95f895f2546fa381)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/openvswitch/Makefile
#	net/openvswitch/conntrack.h
diff --cc net/openvswitch/Makefile
index 91b9478413ef,60f809085b92..000000000000
--- a/net/openvswitch/Makefile
+++ b/net/openvswitch/Makefile
@@@ -15,6 -15,10 +15,14 @@@ openvswitch-y := 
  	vport-internal_dev.o \
  	vport-netdev.o
  
++<<<<<<< HEAD
++=======
+ ifneq ($(CONFIG_NF_CONNTRACK),)
+ openvswitch-y += conntrack.o
+ endif
+ 
+ obj-$(CONFIG_OPENVSWITCH_VXLAN)+= vport-vxlan.o
++>>>>>>> f88f69dd17f1 (openvswitch: Remove conntrack Kconfig option.)
  obj-$(CONFIG_OPENVSWITCH_GENEVE)+= vport-geneve.o
 +obj-$(CONFIG_OPENVSWITCH_VXLAN)	+= vport-vxlan.o
  obj-$(CONFIG_OPENVSWITCH_GRE)	+= vport-gre.o
* Unmerged path net/openvswitch/conntrack.h
diff --git a/net/openvswitch/Kconfig b/net/openvswitch/Kconfig
index ed6b0f8dd1bb..bda504ba3bf3 100644
--- a/net/openvswitch/Kconfig
+++ b/net/openvswitch/Kconfig
@@ -5,6 +5,7 @@
 config OPENVSWITCH
 	tristate "Open vSwitch"
 	depends on INET
+	depends on (!NF_CONNTRACK || NF_CONNTRACK)
 	select LIBCRC32C
 	select MPLS
 	select NET_MPLS_GSO
* Unmerged path net/openvswitch/Makefile
* Unmerged path net/openvswitch/conntrack.h
