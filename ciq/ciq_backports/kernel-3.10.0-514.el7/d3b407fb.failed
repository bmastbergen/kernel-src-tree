badblocks: rename badblocks_free to badblocks_exit

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Dan Williams <dan.j.williams@intel.com>
commit d3b407fb3f782bd915db64e266010ea30a2d381e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/d3b407fb.failed

For symmetry with badblocks_init() make it clear that this path only
destroys incremental allocations of a badblocks instance, and does not
free the badblocks instance itself.

	Signed-off-by: Dan Williams <dan.j.williams@intel.com>
(cherry picked from commit d3b407fb3f782bd915db64e266010ea30a2d381e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	block/badblocks.c
#	drivers/md/md.c
#	include/linux/badblocks.h
diff --cc drivers/md/md.c
index 48861a707f88,96a991821ae6..000000000000
--- a/drivers/md/md.c
+++ b/drivers/md/md.c
@@@ -711,8 -710,7 +711,12 @@@ void md_rdev_clear(struct md_rdev *rdev
  		put_page(rdev->bb_page);
  		rdev->bb_page = NULL;
  	}
++<<<<<<< HEAD
 +	kfree(rdev->badblocks.page);
 +	rdev->badblocks.page = NULL;
++=======
+ 	badblocks_exit(&rdev->badblocks);
++>>>>>>> d3b407fb3f78 (badblocks: rename badblocks_free to badblocks_exit)
  }
  EXPORT_SYMBOL_GPL(md_rdev_clear);
  
* Unmerged path block/badblocks.c
* Unmerged path include/linux/badblocks.h
* Unmerged path block/badblocks.c
diff --git a/block/genhd.c b/block/genhd.c
index c4d0216cb2ad..6069087c405e 100644
--- a/block/genhd.c
+++ b/block/genhd.c
@@ -669,7 +669,7 @@ void del_gendisk(struct gendisk *disk)
 	blk_unregister_region(disk_devt(disk), disk->minors);
 
 	if (disk->bb) {
-		badblocks_free(disk->bb);
+		badblocks_exit(disk->bb);
 		kfree(disk->bb);
 	}
 
* Unmerged path drivers/md/md.c
* Unmerged path include/linux/badblocks.h
