md/raid10: make sync_request_write() call bio_copy_data()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [md] raid10: make sync_request_write() call bio_copy_data() (Jes Sorensen) [1250578 1265947 1273343 1299140 1307091 1312828 1320563 1340839]
Rebuild_FUZZ: 97.30%
commit-author Kent Overstreet <kent.overstreet@gmail.com>
commit c31df25f20e35add6a453328c61eca15434fae18
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/c31df25f.failed

Refactor sync_request_write() of md/raid10 to use bio_copy_data()
instead of open coding bio_vec iterations.

	Cc: Christoph Hellwig <hch@infradead.org>
	Cc: Neil Brown <neilb@suse.de>
	Cc: linux-raid@vger.kernel.org
	Reviewed-by: Christoph Hellwig <hch@lst.de>
	Acked-by: NeilBrown <neilb@suse.de>
	Signed-off-by: Kent Overstreet <kent.overstreet@gmail.com>
[dpark: add more description in commit message]
	Signed-off-by: Dongsu Park <dpark@posteo.net>
	Signed-off-by: Ming Lin <mlin@kernel.org>
	Signed-off-by: NeilBrown <neilb@suse.de>
(cherry picked from commit c31df25f20e35add6a453328c61eca15434fae18)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/md/raid10.c
diff --cc drivers/md/raid10.c
index 4423eafa0752,03f460a1de60..000000000000
--- a/drivers/md/raid10.c
+++ b/drivers/md/raid10.c
@@@ -2114,21 -2095,14 +2114,27 @@@ static void sync_request_write(struct m
  		bio_reset(tbio);
  
  		tbio->bi_vcnt = vcnt;
 -		tbio->bi_iter.bi_size = r10_bio->sectors << 9;
 +		tbio->bi_size = r10_bio->sectors << 9;
  		tbio->bi_rw = WRITE;
  		tbio->bi_private = r10_bio;
++<<<<<<< HEAD
 +		tbio->bi_sector = r10_bio->devs[i].addr;
 +
 +		for (j=0; j < vcnt ; j++) {
 +			tbio->bi_io_vec[j].bv_offset = 0;
 +			tbio->bi_io_vec[j].bv_len = PAGE_SIZE;
 +
 +			memcpy(page_address(tbio->bi_io_vec[j].bv_page),
 +			       page_address(fbio->bi_io_vec[j].bv_page),
 +			       PAGE_SIZE);
 +		}
++=======
+ 		tbio->bi_iter.bi_sector = r10_bio->devs[i].addr;
++>>>>>>> c31df25f20e3 (md/raid10: make sync_request_write() call bio_copy_data())
  		tbio->bi_end_io = end_sync_write;
  
+ 		bio_copy_data(tbio, fbio);
+ 
  		d = r10_bio->devs[i].devnum;
  		atomic_inc(&conf->mirrors[d].rdev->nr_pending);
  		atomic_inc(&r10_bio->remaining);
* Unmerged path drivers/md/raid10.c
