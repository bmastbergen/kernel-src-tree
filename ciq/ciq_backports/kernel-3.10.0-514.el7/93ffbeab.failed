r8152: disable the tasklet by default

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author hayeswang <hayeswang@realtek.com>
commit 93ffbeab77ca6a49e075235faa04c8b032c9fdc1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/93ffbeab.failed

Let the tasklet only be enabled after open(), and be disabled for
the other situation. The tasklet is only necessary after open() for
tx/rx, so it could be disabled by default.

	Signed-off-by: Hayes Wang <hayeswang@realtek.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 93ffbeab77ca6a49e075235faa04c8b032c9fdc1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/usb/r8152.c
diff --cc drivers/net/usb/r8152.c
index 88a2cf45ae4a,fd41675bc038..000000000000
--- a/drivers/net/usb/r8152.c
+++ b/drivers/net/usb/r8152.c
@@@ -2901,8 -2943,12 +2901,10 @@@ static int rtl8152_open(struct net_devi
  		netif_warn(tp, ifup, netdev, "intr_urb submit failed: %d\n",
  			   res);
  		free_all_mem(tp);
+ 	} else {
+ 		tasklet_enable(&tp->tl);
  	}
  
 -	mutex_unlock(&tp->control);
 -
  	usb_autopm_put_interface(tp->intf);
  
  out:
@@@ -2929,9 -2978,10 +2932,14 @@@ static int rtl8152_close(struct net_dev
  		 */
  		rtl_runtime_suspend_enable(tp, false);
  
- 		tasklet_disable(&tp->tl);
  		tp->rtl_ops.down(tp);
++<<<<<<< HEAD
 +		tasklet_enable(&tp->tl);
++=======
+ 
+ 		mutex_unlock(&tp->control);
+ 
++>>>>>>> 93ffbeab77ca (r8152: disable the tasklet by default)
  		usb_autopm_put_interface(tp->intf);
  	}
  
* Unmerged path drivers/net/usb/r8152.c
