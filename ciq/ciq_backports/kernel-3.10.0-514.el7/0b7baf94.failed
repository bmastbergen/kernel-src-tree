NFSv4.1/flexfiles: Remove mirror backpointer to lseg.

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [fs] nfsv4.1/flexfiles: Remove mirror backpointer to lseg (Benjamin Coddington) [1315390]
Rebuild_FUZZ: 99.05%
commit-author Trond Myklebust <trond.myklebust@primarydata.com>
commit 0b7baf9433d4e0a0c83eecbadc1f035d5370c6dc
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/0b7baf94.failed

When we start sharing mirrors between several lsegs, we won't be able to
keep it.

	Signed-off-by: Trond Myklebust <trond.myklebust@primarydata.com>
(cherry picked from commit 0b7baf9433d4e0a0c83eecbadc1f035d5370c6dc)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/nfs/flexfilelayout/flexfilelayout.c
diff --cc fs/nfs/flexfilelayout/flexfilelayout.c
index 0a92c66de517,f3efff640989..000000000000
--- a/fs/nfs/flexfilelayout/flexfilelayout.c
+++ b/fs/nfs/flexfilelayout/flexfilelayout.c
@@@ -524,7 -524,7 +524,11 @@@ nfs4_ff_layout_stat_io_start_read(struc
  	spin_unlock(&mirror->lock);
  
  	if (report)
++<<<<<<< HEAD
 +		pnfs_report_layoutstat(mirror->lseg->pls_layout->plh_inode);
++=======
+ 		pnfs_report_layoutstat(inode, GFP_KERNEL);
++>>>>>>> 0b7baf9433d4 (NFSv4.1/flexfiles: Remove mirror backpointer to lseg.)
  }
  
  static void
@@@ -552,7 -553,7 +557,11 @@@ nfs4_ff_layout_stat_io_start_write(stru
  	spin_unlock(&mirror->lock);
  
  	if (report)
++<<<<<<< HEAD
 +		pnfs_report_layoutstat(mirror->lseg->pls_layout->plh_inode);
++=======
+ 		pnfs_report_layoutstat(inode, GFP_NOIO);
++>>>>>>> 0b7baf9433d4 (NFSv4.1/flexfiles: Remove mirror backpointer to lseg.)
  }
  
  static void
* Unmerged path fs/nfs/flexfilelayout/flexfilelayout.c
diff --git a/fs/nfs/flexfilelayout/flexfilelayout.h b/fs/nfs/flexfilelayout/flexfilelayout.h
index 26b8258e256f..fe9d3ff7cf85 100644
--- a/fs/nfs/flexfilelayout/flexfilelayout.h
+++ b/fs/nfs/flexfilelayout/flexfilelayout.h
@@ -67,7 +67,6 @@ struct nfs4_ff_layoutstat {
 };
 
 struct nfs4_ff_layout_mirror {
-	struct pnfs_layout_segment	*lseg; /* back pointer */
 	u32				ds_count;
 	u32				efficiency;
 	struct nfs4_ff_layout_ds	*mirror_ds;
