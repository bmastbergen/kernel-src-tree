net/usb/r8152: add device id for Lenovo TP USB 3.0 Ethernet

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Christian Hesse <mail@eworm.de>
commit 347eec348a9b0ba6968145cc7b1995d2475ae31b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/347eec34.failed

This device is sold as 'Lenovo Tinkpad USB 3.0 Ethernet 4X90E51405'.
Chipset is RTL8153 and works with r8152.

	Signed-off-by: Christian Hesse <mail@eworm.de>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 347eec348a9b0ba6968145cc7b1995d2475ae31b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/usb/r8152.c
diff --cc drivers/net/usb/r8152.c
index e3d600def538,9f7c0ab3b349..000000000000
--- a/drivers/net/usb/r8152.c
+++ b/drivers/net/usb/r8152.c
@@@ -3646,11 -4017,28 +3647,18 @@@ static void rtl8152_disconnect(struct u
  	}
  }
  
 -#define REALTEK_USB_DEVICE(vend, prod)	\
 -	.match_flags = USB_DEVICE_ID_MATCH_DEVICE | \
 -		       USB_DEVICE_ID_MATCH_INT_CLASS, \
 -	.idVendor = (vend), \
 -	.idProduct = (prod), \
 -	.bInterfaceClass = USB_CLASS_VENDOR_SPEC \
 -}, \
 -{ \
 -	.match_flags = USB_DEVICE_ID_MATCH_INT_INFO | \
 -		       USB_DEVICE_ID_MATCH_DEVICE, \
 -	.idVendor = (vend), \
 -	.idProduct = (prod), \
 -	.bInterfaceClass = USB_CLASS_COMM, \
 -	.bInterfaceSubClass = USB_CDC_SUBCLASS_ETHERNET, \
 -	.bInterfaceProtocol = USB_CDC_PROTO_NONE
 -
  /* table of devices that work with this driver */
  static struct usb_device_id rtl8152_table[] = {
++<<<<<<< HEAD
 +	{USB_DEVICE(VENDOR_ID_REALTEK, 0x8152)},
 +	{USB_DEVICE(VENDOR_ID_REALTEK, 0x8153)},
 +	{USB_DEVICE(VENDOR_ID_SAMSUNG, 0xa101)},
++=======
+ 	{REALTEK_USB_DEVICE(VENDOR_ID_REALTEK, 0x8152)},
+ 	{REALTEK_USB_DEVICE(VENDOR_ID_REALTEK, 0x8153)},
+ 	{REALTEK_USB_DEVICE(VENDOR_ID_SAMSUNG, 0xa101)},
+ 	{REALTEK_USB_DEVICE(VENDOR_ID_LENOVO,  0x7205)},
++>>>>>>> 347eec348a9b (net/usb/r8152: add device id for Lenovo TP USB 3.0 Ethernet)
  	{}
  };
  
diff --git a/drivers/net/usb/cdc_ether.c b/drivers/net/usb/cdc_ether.c
index e3257b7fa315..b328e8973754 100644
--- a/drivers/net/usb/cdc_ether.c
+++ b/drivers/net/usb/cdc_ether.c
@@ -523,6 +523,7 @@ static const struct driver_info wwan_info = {
 #define DELL_VENDOR_ID		0x413C
 #define REALTEK_VENDOR_ID	0x0bda
 #define SAMSUNG_VENDOR_ID	0x04e8
+#define LENOVO_VENDOR_ID	0x17ef
 
 static const struct usb_device_id	products[] = {
 /* BLACKLIST !!
@@ -703,6 +704,13 @@ static const struct usb_device_id	products[] = {
 	.driver_info = 0,
 },
 
+/* Lenovo Thinkpad USB 3.0 Ethernet Adapters (based on Realtek RTL8153) */
+{
+	USB_DEVICE_AND_INTERFACE_INFO(LENOVO_VENDOR_ID, 0x7205, USB_CLASS_COMM,
+			USB_CDC_SUBCLASS_ETHERNET, USB_CDC_PROTO_NONE),
+	.driver_info = 0,
+},
+
 /* WHITELIST!!!
  *
  * CDC Ether uses two interfaces, not necessarily consecutive.
* Unmerged path drivers/net/usb/r8152.c
