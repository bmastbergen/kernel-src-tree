ip_tunnel: fix preempt warning in ip tunnel creation/updating

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Paolo Abeni <pabeni@redhat.com>
commit f27337e16f2d0e52a8d05ea599ed13cd266ac291
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/f27337e1.failed

After the commit e09acddf873b ("ip_tunnel: replace dst_cache with generic
implementation"), a preemption debug warning is triggered on ip4
tunnels updating; the dst cache helper needs to be invoked in unpreemptible
context.

We don't need to load the cache on tunnel update, so this commit fixes
the warning replacing the load with a dst cache reset, which is
preempt safe.

Fixes: e09acddf873b ("ip_tunnel: replace dst_cache with generic implementation")
	Reported-by: Eric Dumazet <eric.dumazet@gmail.com>
	Signed-off-by: Paolo Abeni <pabeni@redhat.com>
	Acked-by: Eric Dumazet <edumazet@google.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit f27337e16f2d0e52a8d05ea599ed13cd266ac291)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv4/ip_tunnel.c
diff --cc net/ipv4/ip_tunnel.c
index 45511bc27fc9,a69ed94bda1b..000000000000
--- a/net/ipv4/ip_tunnel.c
+++ b/net/ipv4/ip_tunnel.c
@@@ -373,7 -326,6 +373,10 @@@ static int ip_tunnel_bind_dev(struct ne
  
  		if (!IS_ERR(rt)) {
  			tdev = rt->dst.dev;
++<<<<<<< HEAD
 +			tunnel_dst_set(tunnel, &rt->dst, fl4.saddr);
++=======
++>>>>>>> f27337e16f2d (ip_tunnel: fix preempt warning in ip tunnel creation/updating)
  			ip_rt_put(rt);
  		}
  		if (dev->type != ARPHRD_ETHER)
* Unmerged path net/ipv4/ip_tunnel.c
