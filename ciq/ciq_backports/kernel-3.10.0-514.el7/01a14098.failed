net/mlx5e: Call vxlan_get_rx_port() with rtnl lock

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [netdrv] mlx5e: Call vxlan_get_rx_port() with rtnl lock (Jiri Benc) [1297504]
Rebuild_FUZZ: 95.83%
commit-author Matthew Finlay <matt@mellanox.com>
commit 01a14098d3374e1b931d605da666300ee248d3d9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/01a14098.failed

Hold the rtnl lock when calling vxlan_get_rx_port().

Fixes: b7aade15485a ("vxlan: break dependency with netdev drivers")
	Signed-off-by: Matthew Finlay <matt@mellanox.com>
	Reported-by: Alexander Duyck <alexander.duyck@gmail.com>
	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 01a14098d3374e1b931d605da666300ee248d3d9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/en_main.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/en_main.c
index 7b4dd1c5db29,48825cb69e7e..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_main.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_main.c
@@@ -2406,9 -2925,25 +2406,18 @@@ static void *mlx5e_create_netdev(struc
  	err = register_netdev(netdev);
  	if (err) {
  		mlx5_core_err(mdev, "register_netdev failed, %d\n", err);
 -		goto err_tc_cleanup;
 +		goto err_destroy_flow_tables;
  	}
  
++<<<<<<< HEAD
++=======
+ 	if (mlx5e_vxlan_allowed(mdev)) {
+ 		rtnl_lock();
+ 		vxlan_get_rx_port(netdev);
+ 		rtnl_unlock();
+ 	}
+ 
++>>>>>>> 01a14098d337 (net/mlx5e: Call vxlan_get_rx_port() with rtnl lock)
  	mlx5e_enable_async_events(priv);
  	schedule_work(&priv->set_rx_mode_work);
  
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en_main.c
