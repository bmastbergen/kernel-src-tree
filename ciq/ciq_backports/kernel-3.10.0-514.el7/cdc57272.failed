tools/power turbostat: initial KBL support

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [tools] power turbostat: initial KBL support (David Arcari) [1310931]
Rebuild_FUZZ: 92.31%
commit-author Len Brown <len.brown@intel.com>
commit cdc57272ea0a0e952c4609b56e157e4d0ec8e956
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/cdc57272.failed

KBL is similar to SKL

	Signed-off-by: Len Brown <len.brown@intel.com>
	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit cdc57272ea0a0e952c4609b56e157e4d0ec8e956)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/power/x86/turbostat/turbostat.c
diff --cc tools/power/x86/turbostat/turbostat.c
index 0eec0ca23b25,277e0321e590..000000000000
--- a/tools/power/x86/turbostat/turbostat.c
+++ b/tools/power/x86/turbostat/turbostat.c
@@@ -1849,6 -2188,9 +1849,12 @@@ int probe_nhm_msrs(unsigned int family
  	case 0x56:	/* BDX-DE */
  	case 0x4E:	/* SKL */
  	case 0x5E:	/* SKL */
++<<<<<<< HEAD
++=======
+ 	case 0x8E:	/* KBL */
+ 	case 0x9E:	/* KBL */
+ 	case 0x55:	/* SKX */
++>>>>>>> cdc57272ea0a (tools/power turbostat: initial KBL support)
  		pkg_cstate_limits = hsw_pkg_cstate_limits;
  		break;
  	case 0x37:	/* BYT */
@@@ -1953,6 -2298,9 +1959,12 @@@ int has_config_tdp(unsigned int family
  	case 0x56:	/* BDX-DE */
  	case 0x4E:	/* SKL */
  	case 0x5E:	/* SKL */
++<<<<<<< HEAD
++=======
+ 	case 0x8E:	/* KBL */
+ 	case 0x9E:	/* KBL */
+ 	case 0x55:	/* SKX */
++>>>>>>> cdc57272ea0a (tools/power turbostat: initial KBL support)
  
  	case 0x57:	/* Knights Landing */
  		return 1;
@@@ -2199,8 -2638,13 +2211,10 @@@ void rapl_probe(unsigned int family, un
  	case 0x47:	/* BDW */
  		do_rapl = RAPL_PKG | RAPL_CORES | RAPL_CORE_POLICY | RAPL_GFX | RAPL_PKG_POWER_INFO;
  		break;
 -	case 0x5C:	/* BXT */
 -		do_rapl = RAPL_PKG | RAPL_PKG_POWER_INFO;
 -		break;
  	case 0x4E:	/* SKL */
  	case 0x5E:	/* SKL */
+ 	case 0x8E:	/* KBL */
+ 	case 0x9E:	/* KBL */
  		do_rapl = RAPL_PKG | RAPL_DRAM | RAPL_DRAM_PERF_STATUS | RAPL_PKG_PERF_STATUS | RAPL_PKG_POWER_INFO;
  		break;
  	case 0x3F:	/* HSX */
@@@ -2485,6 -2930,10 +2499,13 @@@ int has_snb_msrs(unsigned int family, u
  	case 0x56:	/* BDX-DE */
  	case 0x4E:	/* SKL */
  	case 0x5E:	/* SKL */
++<<<<<<< HEAD
++=======
+ 	case 0x8E:	/* KBL */
+ 	case 0x9E:	/* KBL */
+ 	case 0x55:	/* SKX */
+ 	case 0x5C:	/* BXT */
++>>>>>>> cdc57272ea0a (tools/power turbostat: initial KBL support)
  		return 1;
  	}
  	return 0;
@@@ -2507,6 -2961,9 +2528,12 @@@ int has_hsw_msrs(unsigned int family, u
  	case 0x3D:	/* BDW */
  	case 0x4E:	/* SKL */
  	case 0x5E:	/* SKL */
++<<<<<<< HEAD
++=======
+ 	case 0x8E:	/* KBL */
+ 	case 0x9E:	/* KBL */
+ 	case 0x5C:	/* BXT */
++>>>>>>> cdc57272ea0a (tools/power turbostat: initial KBL support)
  		return 1;
  	}
  	return 0;
@@@ -2751,7 -3294,15 +2780,19 @@@ void process_cpuid(
  				switch(model) {
  				case 0x4E:	/* SKL */
  				case 0x5E:	/* SKL */
++<<<<<<< HEAD
 +					crystal_hz = 24000000;	/* 24 MHz */
++=======
+ 				case 0x8E:	/* KBL */
+ 				case 0x9E:	/* KBL */
+ 					crystal_hz = 24000000;	/* 24.0 MHz */
+ 					break;
+ 				case 0x55:	/* SKX */
+ 					crystal_hz = 25000000;	/* 25.0 MHz */
+ 					break;
+ 				case 0x5C:	/* BXT */
+ 					crystal_hz = 19200000;	/* 19.2 MHz */
++>>>>>>> cdc57272ea0a (tools/power turbostat: initial KBL support)
  					break;
  				default:
  					crystal_hz = 0;
* Unmerged path tools/power/x86/turbostat/turbostat.c
