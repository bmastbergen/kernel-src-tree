MIPS: Octeon: Set OHCI and EHCI MMIO byte order to match CPU

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Ben Hutchings <ben@decadent.org.uk>
commit df115f3ee9ea703e1209392cd08f8d6783244721
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/df115f3e.failed

The Octeon OHCI is now supported by the ohci-platform driver, and
USB_OCTEON_OHCI is marked as deprecated.  However, it is currently
still necessary to enable it in order to select
USB_OHCI_BIG_ENDIAN_MMIO.  Make CPU_CAVIUM_OCTEON select that as well,
so that USB_OCTEON_OHCI is really obsolete.

The old ohci-octeon and ehci-octeon drivers also only enabled big-endian
MMIO in case the CPU was big-endian.  Make the selections of
USB_EHCI_BIG_ENDIAN_MMIO and USB_OHCI_BIG_ENDIAN_MMIO conditional, to
match this.

Fixes: 2193dda5eec6 ("USB: host: Remove ehci-octeon and ohci-octeon drivers")
	Signed-off-by: Ben Hutchings <ben@decadent.org.uk>
	Cc: Alan Stern <stern@rowland.harvard.edu>
	Cc: linux-mips@linux-mips.org
	Cc: David Daney <david.daney@cavium.com>
	Cc: Chandrakala Chavva <cchavva@caviumnetworks.com>
	Cc: Paul Martin <paul.martin@codethink.co.uk>
Patchwork: https://patchwork.linux-mips.org/patch/10178/
	Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
(cherry picked from commit df115f3ee9ea703e1209392cd08f8d6783244721)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/mips/Kconfig
#	drivers/usb/host/Kconfig
diff --cc arch/mips/Kconfig
index 1c8827a696a6,5e8ba716e441..000000000000
--- a/arch/mips/Kconfig
+++ b/arch/mips/Kconfig
@@@ -1409,9 -1574,9 +1409,15 @@@ config CPU_CAVIUM_OCTEO
  	select WEAK_ORDERING
  	select CPU_SUPPORTS_HIGHMEM
  	select CPU_SUPPORTS_HUGEPAGES
++<<<<<<< HEAD
 +	select LIBFDT
 +	select USE_OF
 +	select USB_EHCI_BIG_ENDIAN_MMIO
++=======
+ 	select USB_EHCI_BIG_ENDIAN_MMIO if CPU_BIG_ENDIAN
+ 	select USB_OHCI_BIG_ENDIAN_MMIO if CPU_BIG_ENDIAN
+ 	select MIPS_L1_CACHE_SHIFT_7
++>>>>>>> df115f3ee9ea (MIPS: Octeon: Set OHCI and EHCI MMIO byte order to match CPU)
  	help
  	  The Cavium Octeon processor is a highly integrated chip containing
  	  many ethernet hardware widgets for networking tasks. The processor
diff --cc drivers/usb/host/Kconfig
index 1b2aea4f0a97,cff1c9134e6c..000000000000
--- a/drivers/usb/host/Kconfig
+++ b/drivers/usb/host/Kconfig
@@@ -269,11 -292,15 +269,16 @@@ config USB_EHCI_HCD_PLATFOR
  	  If unsure, say N.
  
  config USB_OCTEON_EHCI
 -	bool "Octeon on-chip EHCI support (DEPRECATED)"
 +	bool "Octeon on-chip EHCI support"
  	depends on CAVIUM_OCTEON_SOC
  	default n
++<<<<<<< HEAD
 +	select USB_EHCI_BIG_ENDIAN_MMIO
++=======
+ 	select USB_EHCI_BIG_ENDIAN_MMIO if CPU_BIG_ENDIAN
+ 	select USB_EHCI_HCD_PLATFORM
++>>>>>>> df115f3ee9ea (MIPS: Octeon: Set OHCI and EHCI MMIO byte order to match CPU)
  	help
 -	  This option is deprecated now and the driver was removed, use
 -	  USB_EHCI_HCD_PLATFORM instead.
 -
  	  Enable support for the Octeon II SOC's on-chip EHCI
  	  controller.  It is needed for high-speed (480Mbit/sec)
  	  USB 2.0 device support.  All CN6XXX based chips with USB are
@@@ -497,12 -565,16 +502,12 @@@ config USB_OHCI_HCD_PLATFOR
  	  If unsure, say N.
  
  config USB_OCTEON_OHCI
 -	bool "Octeon on-chip OHCI support (DEPRECATED)"
 +	bool "Octeon on-chip OHCI support"
  	depends on CAVIUM_OCTEON_SOC
  	default USB_OCTEON_EHCI
- 	select USB_OHCI_BIG_ENDIAN_MMIO
+ 	select USB_OHCI_BIG_ENDIAN_MMIO if CPU_BIG_ENDIAN
  	select USB_OHCI_LITTLE_ENDIAN
 -	select USB_OHCI_HCD_PLATFORM
  	help
 -	  This option is deprecated now and the driver was removed, use
 -	  USB_OHCI_HCD_PLATFORM instead.
 -
  	  Enable support for the Octeon II SOC's on-chip OHCI
  	  controller.  It is needed for low-speed USB 1.0 device
  	  support.  All CN6XXX based chips with USB are supported.
* Unmerged path arch/mips/Kconfig
* Unmerged path drivers/usb/host/Kconfig
