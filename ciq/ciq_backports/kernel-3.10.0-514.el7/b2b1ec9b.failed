NVMe: removed unused nn var from nvme_dev_add

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Matias Bjørling <m@bjorling.me>
commit b2b1ec9b55ed0840956db15f823c4a73383c08be
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/b2b1ec9b.failed

The logic in nvme_dev_add to enumerate namespaces was moved to
nvme_dev_scan. When moved, the nn variable is no longer used. This patch
removes it.

Fixes: a5768aai ("NVMe: Automatic namespace rescan")
	Signed-off-by: Matias Bjørling <m@bjorling.me>
	Reviewed-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Jens Axboe <axboe@fb.com>
(cherry picked from commit b2b1ec9b55ed0840956db15f823c4a73383c08be)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/block/nvme-core.c
diff --cc drivers/block/nvme-core.c
index 401b2c01caa6,85cd33bf9607..000000000000
--- a/drivers/block/nvme-core.c
+++ b/drivers/block/nvme-core.c
@@@ -2305,27 -2445,17 +2305,29 @@@ static void nvme_dev_scan(struct work_s
   */
  static int nvme_dev_add(struct nvme_dev *dev)
  {
 -	struct pci_dev *pdev = to_pci_dev(dev->dev);
 +	struct pci_dev *pdev = dev->pci_dev;
  	int res;
- 	unsigned nn;
  	struct nvme_id_ctrl *ctrl;
 +	void *mem;
 +	dma_addr_t dma_addr;
  	int shift = NVME_CAP_MPSMIN(readq(&dev->bar->cap)) + 12;
  
 -	res = nvme_identify_ctrl(dev, &ctrl);
 +	mem = dma_alloc_coherent(&pdev->dev, 4096, &dma_addr, GFP_KERNEL);
 +	if (!mem)
 +		return -ENOMEM;
 +
 +	res = nvme_identify(dev, 0, 1, dma_addr);
  	if (res) {
 -		dev_err(dev->dev, "Identify Controller failed (%d)\n", res);
 +		dev_err(&pdev->dev, "Identify Controller failed (%d)\n", res);
 +		dma_free_coherent(&dev->pci_dev->dev, 4096, mem, dma_addr);
  		return -EIO;
  	}
  
++<<<<<<< HEAD
 +	ctrl = mem;
 +	nn = le32_to_cpup(&ctrl->nn);
++=======
++>>>>>>> b2b1ec9b55ed (NVMe: removed unused nn var from nvme_dev_add)
  	dev->oncs = le16_to_cpup(&ctrl->oncs);
  	dev->abort_limit = ctrl->acl + 1;
  	dev->vwc = ctrl->vwc;
* Unmerged path drivers/block/nvme-core.c
