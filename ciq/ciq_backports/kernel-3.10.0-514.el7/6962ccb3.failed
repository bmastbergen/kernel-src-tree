perf hists browser: Allow thread filtering for comm sort key

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
commit-author Namhyung Kim <namhyung@kernel.org>
commit 6962ccb37b50366014074aec6fd14497cf719642
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/6962ccb3.failed

The commit 2eafd410e669 ("perf hists browser: Only 'Zoom into thread'
only when sort order has 'pid'") disabled thread filtering in hist
browser for the default sort key.  However the he->thread is still valid
even if 'pid' sort key is not given.  Only thing it should not use is
the pid (or tid) of the thread.  So allow to filter by thread when
'comm' sort key is given and show pid only if 'pid' sort key is given.

	Signed-off-by: Namhyung Kim <namhyung@kernel.org>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Jiri Olsa <jolsa@kernel.org>
	Cc: Peter Zijlstra <peterz@infradead.org>
Link: http://lkml.kernel.org/r/1457536490-24084-1-git-send-email-namhyung@kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 6962ccb37b50366014074aec6fd14497cf719642)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/ui/browsers/hists.c
diff --cc tools/perf/ui/browsers/hists.c
index d1445dd5bb7f,cb4191bf6cec..000000000000
--- a/tools/perf/ui/browsers/hists.c
+++ b/tools/perf/ui/browsers/hists.c
@@@ -1913,9 -2328,15 +1920,21 @@@ do_zoom_thread(struct hist_browser *bro
  		thread__zput(browser->hists->thread_filter);
  		ui_helpline__pop();
  	} else {
++<<<<<<< HEAD
 +		ui_helpline__fpush("To zoom out press <- or -> + \"Zoom out of %s(%d) thread\"",
 +				   thread->comm_set ? thread__comm_str(thread) : "",
 +				   thread->tid);
++=======
+ 		if (sort__has_thread) {
+ 			ui_helpline__fpush("To zoom out press ESC or ENTER + \"Zoom out of %s(%d) thread\"",
+ 					   thread->comm_set ? thread__comm_str(thread) : "",
+ 					   thread->tid);
+ 		} else {
+ 			ui_helpline__fpush("To zoom out press ESC or ENTER + \"Zoom out of %s thread\"",
+ 					   thread->comm_set ? thread__comm_str(thread) : "");
+ 		}
+ 
++>>>>>>> 6962ccb37b50 (perf hists browser: Allow thread filtering for comm sort key)
  		browser->hists->thread_filter = thread__get(thread);
  		perf_hpp__set_elide(HISTC_THREAD, false);
  		pstack__push(browser->pstack, &browser->hists->thread_filter);
* Unmerged path tools/perf/ui/browsers/hists.c
