iommu/amd: Convert to iommu_capable() API function

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [iommu] amd: Convert to iommu_capable() API function (Myron Stowe) [1279620]
Rebuild_FUZZ: 93.62%
commit-author Joerg Roedel <jroedel@suse.de>
commit ab636481863a1039f5ca3643cfb04d4ae0c965cd
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/ab636481.failed

	Signed-off-by: Joerg Roedel <jroedel@suse.de>
(cherry picked from commit ab636481863a1039f5ca3643cfb04d4ae0c965cd)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/iommu/amd_iommu.c
diff --cc drivers/iommu/amd_iommu.c
index 9953a32cdf0f,7de92768871d..000000000000
--- a/drivers/iommu/amd_iommu.c
+++ b/drivers/iommu/amd_iommu.c
@@@ -3406,15 -3388,16 +3405,20 @@@ static bool amd_iommu_capable(enum iomm
  {
  	switch (cap) {
  	case IOMMU_CAP_CACHE_COHERENCY:
- 		return 1;
+ 		return true;
  	case IOMMU_CAP_INTR_REMAP:
- 		return irq_remapping_enabled;
+ 		return (irq_remapping_enabled == 1);
  	}
  
- 	return 0;
+ 	return false;
  }
  
++<<<<<<< HEAD
 +static struct iommu_ops amd_iommu_ops = {
++=======
+ static const struct iommu_ops amd_iommu_ops = {
+ 	.capable = amd_iommu_capable,
++>>>>>>> ab636481863a (iommu/amd: Convert to iommu_capable() API function)
  	.domain_init = amd_iommu_domain_init,
  	.domain_destroy = amd_iommu_domain_destroy,
  	.attach_dev = amd_iommu_attach_device,
* Unmerged path drivers/iommu/amd_iommu.c
