net: etherdevice: add address inherit helper

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-514.el7
Rebuild_CHGLOG: - [net] etherdevice: add address inherit helper (Ivan Vecera) [1268334]
Rebuild_FUZZ: 93.98%
commit-author Bjørn Mork <bjorn@mork.no>
commit 83a093b486ecfd25e7b04b82f6a388f24bd274b2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-514.el7/83a093b4.failed

Some etherdevices inherit their address from a parent or
master device. The addr_assign_type should be updated along
with the address in these cases.  Adding a helper function
to simplify this.

	Signed-off-by: Bjørn Mork <bjorn@mork.no>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 83a093b486ecfd25e7b04b82f6a388f24bd274b2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/linux/etherdevice.h
diff --cc include/linux/etherdevice.h
index 8a126cf11f20,d8b512496e50..000000000000
--- a/include/linux/etherdevice.h
+++ b/include/linux/etherdevice.h
@@@ -204,25 -199,18 +204,40 @@@ static inline void eth_hw_addr_random(s
  }
  
  /**
++<<<<<<< HEAD
 + * ether_addr_copy - Copy an Ethernet address
 + * @dst: Pointer to a six-byte array Ethernet address destination
 + * @src: Pointer to a six-byte array Ethernet address source
 + *
 + * Please note: dst & src must both be aligned to u16.
 + */
 +static inline void ether_addr_copy(u8 *dst, const u8 *src)
 +{
 +#if defined(CONFIG_HAVE_EFFICIENT_UNALIGNED_ACCESS)
 +	*(u32 *)dst = *(const u32 *)src;
 +	*(u16 *)(dst + 4) = *(const u16 *)(src + 4);
 +#else
 +	u16 *a = (u16 *)dst;
 +	const u16 *b = (const u16 *)src;
 +
 +	a[0] = b[0];
 +	a[1] = b[1];
 +	a[2] = b[2];
 +#endif
++=======
+  * eth_hw_addr_inherit - Copy dev_addr from another net_device
+  * @dst: pointer to net_device to copy dev_addr to
+  * @src: pointer to net_device to copy dev_addr from
+  *
+  * Copy the Ethernet address from one net_device to another along with
+  * the address attributes (addr_assign_type).
+  */
+ static inline void eth_hw_addr_inherit(struct net_device *dst,
+ 				       struct net_device *src)
+ {
+ 	dst->addr_assign_type = src->addr_assign_type;
+ 	memcpy(dst->dev_addr, src->dev_addr, ETH_ALEN);
++>>>>>>> 83a093b486ec (net: etherdevice: add address inherit helper)
  }
  
  /**
* Unmerged path include/linux/etherdevice.h
