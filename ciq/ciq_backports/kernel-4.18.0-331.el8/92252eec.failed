net: phy: Add a helper to return the index for of the internal delay

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-331.el8
commit-author Dan Murphy <dmurphy@ti.com>
commit 92252eec913b2dd5e7b5de11ea3efa2e64d65cf4
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-331.el8/92252eec.failed

Add a helper function that will return the index in the array for the
passed in internal delay value.  The helper requires the array, size and
delay value.

The helper will then return the index for the exact match or return the
index for the index to the closest smaller value.

	Signed-off-by: Dan Murphy <dmurphy@ti.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 92252eec913b2dd5e7b5de11ea3efa2e64d65cf4)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/phy/phy_device.c
diff --cc drivers/net/phy/phy_device.c
index 7bd1613c7881,6d47485e68f9..000000000000
--- a/drivers/net/phy/phy_device.c
+++ b/drivers/net/phy/phy_device.c
@@@ -9,29 -9,29 +9,33 @@@
  
  #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
  
 -#include <linux/kernel.h>
 -#include <linux/string.h>
 -#include <linux/errno.h>
 -#include <linux/unistd.h>
 -#include <linux/slab.h>
 -#include <linux/interrupt.h>
 -#include <linux/init.h>
 +#include <linux/bitmap.h>
  #include <linux/delay.h>
 -#include <linux/netdevice.h>
 +#include <linux/errno.h>
  #include <linux/etherdevice.h>
 -#include <linux/skbuff.h>
 +#include <linux/ethtool.h>
 +#include <linux/init.h>
 +#include <linux/interrupt.h>
 +#include <linux/io.h>
 +#include <linux/kernel.h>
 +#include <linux/mdio.h>
 +#include <linux/mii.h>
  #include <linux/mm.h>
  #include <linux/module.h>
 -#include <linux/mii.h>
 -#include <linux/ethtool.h>
 -#include <linux/bitmap.h>
 +#include <linux/netdevice.h>
  #include <linux/phy.h>
  #include <linux/phy_led_triggers.h>
 +#include <linux/property.h>
  #include <linux/sfp.h>
 -#include <linux/mdio.h>
 -#include <linux/io.h>
 +#include <linux/skbuff.h>
 +#include <linux/slab.h>
 +#include <linux/string.h>
  #include <linux/uaccess.h>
++<<<<<<< HEAD
 +#include <linux/unistd.h>
++=======
+ #include <linux/property.h>
++>>>>>>> 92252eec913b (net: phy: Add a helper to return the index for of the internal delay)
  
  MODULE_DESCRIPTION("PHY library");
  MODULE_AUTHOR("Andy Fleming");
* Unmerged path drivers/net/phy/phy_device.c
diff --git a/include/linux/phy.h b/include/linux/phy.h
index 367498a0fd7f..72d1dfa2b9b6 100644
--- a/include/linux/phy.h
+++ b/include/linux/phy.h
@@ -1532,6 +1532,10 @@ void phy_set_asym_pause(struct phy_device *phydev, bool rx, bool tx);
 bool phy_validate_pause(struct phy_device *phydev,
 			struct ethtool_pauseparam *pp);
 void phy_get_pause(struct phy_device *phydev, bool *tx_pause, bool *rx_pause);
+
+s32 phy_get_internal_delay(struct phy_device *phydev, struct device *dev,
+			   const int *delay_values, int size, bool is_rx);
+
 void phy_resolve_pause(unsigned long *local_adv, unsigned long *partner_adv,
 		       bool *tx_pause, bool *rx_pause);
 
