gfs2: Don't wait for journal flush in clean_journal

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-331.el8
commit-author Andreas Gruenbacher <agruenba@redhat.com>
commit 4a3d049db42b42a36ae84eb8b59d2f5119737253
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-331.el8/4a3d049d.failed

Commit 588bff95c94e added gfs2_write_log_header() and started using it in
clean_journal(), with an additional call to log_flush_wait() at the end of
gfs2_write_log_header() which is unnecessary for clean_journal().  Move
that call out of gfs2_write_log_header() to restore the previous behavior.

	Signed-off-by: Andreas Gruenbacher <agruenba@redhat.com>
(cherry picked from commit 4a3d049db42b42a36ae84eb8b59d2f5119737253)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/gfs2/log.c
diff --cc fs/gfs2/log.c
index 1a5aad0b1fab,cff95889b6f4..000000000000
--- a/fs/gfs2/log.c
+++ b/fs/gfs2/log.c
@@@ -794,10 -810,8 +794,15 @@@ void gfs2_write_log_header(struct gfs2_
  		     sb->s_blocksize - LH_V1_SIZE - 4);
  	lh->lh_crc = cpu_to_be32(crc);
  
++<<<<<<< HEAD
 +	gfs2_log_write(sdp, jd, page, sb->s_blocksize, 0, dblock);
 +	gfs2_log_submit_bio(&jd->jd_log_bio, REQ_OP_WRITE | op_flags);
 +out:
 +	log_flush_wait(sdp);
++=======
+ 	gfs2_log_write(sdp, page, sb->s_blocksize, 0, dblock);
+ 	gfs2_log_submit_bio(&sdp->sd_log_bio, REQ_OP_WRITE | op_flags);
++>>>>>>> 4a3d049db42b (gfs2: Don't wait for journal flush in clean_journal)
  }
  
  /**
* Unmerged path fs/gfs2/log.c
