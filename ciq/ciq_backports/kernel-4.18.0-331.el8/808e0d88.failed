e1000e: Only run S0ix flows if shutdown succeeded

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-331.el8
commit-author Mario Limonciello <mario.limonciello@dell.com>
commit 808e0d8832cc81738f3e8df12dff0688352baf50
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-331.el8/808e0d88.failed

If the shutdown failed, the part will be thawed and running
S0ix flows will put it into an undefined state.

	Reported-by: Alexander Duyck <alexander.duyck@gmail.com>
	Reviewed-by: Alexander Duyck <alexander.duyck@gmail.com>
	Signed-off-by: Mario Limonciello <mario.limonciello@dell.com>
	Tested-by: Yijun Shen <Yijun.shen@dell.com>
	Signed-off-by: Tony Nguyen <anthony.l.nguyen@intel.com>
(cherry picked from commit 808e0d8832cc81738f3e8df12dff0688352baf50)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/intel/e1000e/netdev.c
diff --cc drivers/net/ethernet/intel/e1000e/netdev.c
index a14f9cb393fa,6588f5d4a2be..000000000000
--- a/drivers/net/ethernet/intel/e1000e/netdev.c
+++ b/drivers/net/ethernet/intel/e1000e/netdev.c
@@@ -6932,12 -6970,14 +6932,21 @@@ static __maybe_unused int e1000e_pm_sus
  	e1000e_pm_freeze(dev);
  
  	rc = __e1000_shutdown(pdev, false);
- 	if (rc)
+ 	if (rc) {
  		e1000e_pm_thaw(dev);
++<<<<<<< HEAD
 +
 +	/* Introduce S0ix implementation */
 +	if (hw->mac.type >= e1000_pch_cnp)
 +		e1000e_s0ix_entry_flow(adapter);
++=======
+ 	} else {
+ 		/* Introduce S0ix implementation */
+ 		if (hw->mac.type >= e1000_pch_cnp &&
+ 		    !e1000e_check_me(hw->adapter->pdev->device))
+ 			e1000e_s0ix_entry_flow(adapter);
+ 	}
++>>>>>>> 808e0d8832cc (e1000e: Only run S0ix flows if shutdown succeeded)
  
  	return rc;
  }
* Unmerged path drivers/net/ethernet/intel/e1000e/netdev.c
