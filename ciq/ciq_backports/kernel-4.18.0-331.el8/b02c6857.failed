hwmon: (k10temp) Swap Tdie and Tctl on Family 17h CPUs

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-331.el8
commit-author Guenter Roeck <linux@roeck-us.net>
commit b02c6857389da66b09e447103bdb247ccd182456
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-331.el8/b02c6857.failed

Traditionally, the temperature displayed by k10temp was Tctl.
On Family 17h CPUs, Tdie was displayed instead. To reduce confusion,
Tctl was added later as second temperature. This resulted in Tdie
being reported as temp1_input, and Tctl as temp2_input. This is
different to non-Ryzen CPUs, where Tctl is displayed as temp1_input.
Swap temp1_input and temp2_input on Family 17h CPUs, such that Tctl
is now reported as temp1_input and Tdie is reported as temp2_input,
to align with other CPUs, streamline the code, and make it less
confusing. Coincidentally, this also aligns the code with its
documentation, which states that Tdie is reported as temp2_input.

	Signed-off-by: Guenter Roeck <linux@roeck-us.net>
(cherry picked from commit b02c6857389da66b09e447103bdb247ccd182456)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/hwmon/k10temp.c
diff --cc drivers/hwmon/k10temp.c
index c73c6199bfdb,b38547cd7ba3..000000000000
--- a/drivers/hwmon/k10temp.c
+++ b/drivers/hwmon/k10temp.c
@@@ -137,8 -180,26 +137,29 @@@ static long get_raw_temp(struct k10temp
  }
  
  const char *k10temp_temp_label[] = {
- 	"Tdie",
  	"Tctl",
++<<<<<<< HEAD
++=======
+ 	"Tdie",
+ 	"Tccd1",
+ 	"Tccd2",
+ 	"Tccd3",
+ 	"Tccd4",
+ 	"Tccd5",
+ 	"Tccd6",
+ 	"Tccd7",
+ 	"Tccd8",
+ };
+ 
+ const char *k10temp_in_label[] = {
+ 	"Vcore",
+ 	"Vsoc",
+ };
+ 
+ const char *k10temp_curr_label[] = {
+ 	"Icore",
+ 	"Isoc",
++>>>>>>> b02c6857389d (hwmon: (k10temp) Swap Tdie and Tctl on Family 17h CPUs)
  };
  
  static int k10temp_read_labels(struct device *dev,
@@@ -202,8 -333,20 +223,23 @@@ static umode_t k10temp_is_visible(cons
  	case hwmon_temp:
  		switch (attr) {
  		case hwmon_temp_input:
++<<<<<<< HEAD
 +			if (channel && !data->show_tdie)
++=======
+ 			switch (channel) {
+ 			case 0:		/* Tctl */
+ 				break;
+ 			case 1:		/* Tdie */
+ 				if (!data->show_tdie)
+ 					return 0;
+ 				break;
+ 			case 2 ... 9:		/* Tccd{1-8} */
+ 				if (!(data->show_tccd & BIT(channel - 2)))
+ 					return 0;
+ 				break;
+ 			default:
++>>>>>>> b02c6857389d (hwmon: (k10temp) Swap Tdie and Tctl on Family 17h CPUs)
  				return 0;
 -			}
  			break;
  		case hwmon_temp_max:
  			if (channel || data->show_tdie)
@@@ -225,8 -368,20 +261,22 @@@
  				return 0;
  			break;
  		case hwmon_temp_label:
 -			/* No labels if we don't show the die temperature */
  			if (!data->show_tdie)
  				return 0;
++<<<<<<< HEAD
++=======
+ 			switch (channel) {
+ 			case 0:		/* Tctl */
+ 			case 1:		/* Tdie */
+ 				break;
+ 			case 2 ... 9:		/* Tccd{1-8} */
+ 				if (!(data->show_tccd & BIT(channel - 2)))
+ 					return 0;
+ 				break;
+ 			default:
+ 				return 0;
+ 			}
++>>>>>>> b02c6857389d (hwmon: (k10temp) Swap Tdie and Tctl on Family 17h CPUs)
  			break;
  		default:
  			return 0;
* Unmerged path drivers/hwmon/k10temp.c
