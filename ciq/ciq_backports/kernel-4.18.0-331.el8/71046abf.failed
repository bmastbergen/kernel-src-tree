net: qrtr: Fix FIXME related to qrtr_ns_init()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-331.el8
commit-author Bjorn Andersson <bjorn.andersson@linaro.org>
commit 71046abfffe9d34ae90c82cf9c8e44355c2e114c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-331.el8/71046abf.failed

The 2 second delay before calling qrtr_ns_init() meant that the remote
processors would register as endpoints in qrtr and the say_hello() call
would therefor broadcast the outgoing HELLO to them. With the HELLO
handshake corrected this delay is no longer needed.

	Reviewed-by: Manivannan Sadhasivam <manivannan.sadhasivam@linaro.org>
	Tested-by: Manivannan Sadhasivam <manivannan.sadhasivam@linaro.org>
	Signed-off-by: Bjorn Andersson <bjorn.andersson@linaro.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 71046abfffe9d34ae90c82cf9c8e44355c2e114c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/qrtr/ns.c
#	net/qrtr/qrtr.c
#	net/qrtr/qrtr.h
diff --cc net/qrtr/qrtr.c
index abc685c5253a,e22092e4a783..000000000000
--- a/net/qrtr/qrtr.c
+++ b/net/qrtr/qrtr.c
@@@ -1302,11 -1260,7 +1302,15 @@@ static int __init qrtr_proto_init(void
  		return rc;
  	}
  
++<<<<<<< HEAD
 +	rc = rtnl_register_module(THIS_MODULE, PF_QIPCRTR, RTM_NEWADDR, qrtr_addr_doit, NULL, 0);
 +	if (rc) {
 +		sock_unregister(qrtr_family.family);
 +		proto_unregister(&qrtr_proto);
 +	}
++=======
+ 	qrtr_ns_init();
++>>>>>>> 71046abfffe9 (net: qrtr: Fix FIXME related to qrtr_ns_init())
  
  	return rc;
  }
@@@ -1314,7 -1268,7 +1318,11 @@@ postcore_initcall(qrtr_proto_init)
  
  static void __exit qrtr_proto_fini(void)
  {
++<<<<<<< HEAD
 +	rtnl_unregister(PF_QIPCRTR, RTM_NEWADDR);
++=======
+ 	qrtr_ns_remove();
++>>>>>>> 71046abfffe9 (net: qrtr: Fix FIXME related to qrtr_ns_init())
  	sock_unregister(qrtr_family.family);
  	proto_unregister(&qrtr_proto);
  }
diff --cc net/qrtr/qrtr.h
index b81e6953c04b,dc2b67f17927..000000000000
--- a/net/qrtr/qrtr.h
+++ b/net/qrtr/qrtr.h
@@@ -29,4 -29,8 +29,11 @@@ void qrtr_endpoint_unregister(struct qr
  
  int qrtr_endpoint_post(struct qrtr_endpoint *ep, const void *data, size_t len);
  
++<<<<<<< HEAD
++=======
+ void qrtr_ns_init(void);
+ 
+ void qrtr_ns_remove(void);
+ 
++>>>>>>> 71046abfffe9 (net: qrtr: Fix FIXME related to qrtr_ns_init())
  #endif
* Unmerged path net/qrtr/ns.c
* Unmerged path net/qrtr/ns.c
* Unmerged path net/qrtr/qrtr.c
* Unmerged path net/qrtr/qrtr.h
