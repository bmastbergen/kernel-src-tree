net: phy: mscc: remove the use of .ack_interrupt()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-331.el8
commit-author Ioana Ciornei <ioana.ciornei@nxp.com>
commit 30446ae4675c4ad39dfbb0adf98191e800d4a27b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-331.el8/30446ae4.failed

In preparation of removing the .ack_interrupt() callback, we must replace
its occurrences (aka phy_clear_interrupt), from the 2 places where it is
called from (phy_enable_interrupts and phy_disable_interrupts), with
equivalent functionality.

This means that clearing interrupts now becomes something that the PHY
driver is responsible of doing, before enabling interrupts and after
clearing them. Make this driver follow the new contract.

	Cc: Antoine Tenart <atenart@kernel.org>
	Signed-off-by: Ioana Ciornei <ioana.ciornei@nxp.com>
	Tested-by: Vladimir Oltean <olteanv@gmail.com> # VSC8514
	Signed-off-by: Jakub Kicinski <kuba@kernel.org>
(cherry picked from commit 30446ae4675c4ad39dfbb0adf98191e800d4a27b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/phy/mscc.c
diff --cc drivers/net/phy/mscc.c
index 4a148895b64d,2f2157e3deab..000000000000
--- a/drivers/net/phy/mscc.c
+++ b/drivers/net/phy/mscc.c
@@@ -2206,6 -1923,13 +2206,16 @@@ static int vsc85xx_config_intr(struct p
  	int rc;
  
  	if (phydev->interrupts == PHY_INTERRUPT_ENABLED) {
++<<<<<<< HEAD:drivers/net/phy/mscc.c
++=======
+ 		rc = vsc85xx_ack_interrupt(phydev);
+ 		if (rc)
+ 			return rc;
+ 
+ 		vsc8584_config_macsec_intr(phydev);
+ 		vsc8584_config_ts_intr(phydev);
+ 
++>>>>>>> 30446ae4675c (net: phy: mscc: remove the use of .ack_interrupt()):drivers/net/phy/mscc/mscc_main.c
  		rc = phy_write(phydev, MII_VSC85XX_INT_MASK,
  			       MII_VSC85XX_INT_MASK_MASK);
  	} else {
@@@ -2555,9 -2345,8 +2569,13 @@@ static struct phy_driver vsc85xx_driver
  	.config_aneg    = &vsc85xx_config_aneg,
  	.aneg_done	= &genphy_aneg_done,
  	.read_status	= &vsc85xx_read_status,
++<<<<<<< HEAD:drivers/net/phy/mscc.c
 +	.ack_interrupt  = &vsc85xx_ack_interrupt,
++=======
+ 	.handle_interrupt = &vsc8584_handle_interrupt,
++>>>>>>> 30446ae4675c (net: phy: mscc: remove the use of .ack_interrupt()):drivers/net/phy/mscc/mscc_main.c
  	.config_intr    = &vsc85xx_config_intr,
 +	.did_interrupt  = &vsc8584_did_interrupt,
  	.suspend	= &genphy_suspend,
  	.resume		= &genphy_resume,
  	.probe		= &vsc8574_probe,
@@@ -2607,9 -2395,8 +2625,13 @@@
  	.config_aneg    = &vsc85xx_config_aneg,
  	.aneg_done	= &genphy_aneg_done,
  	.read_status	= &vsc85xx_read_status,
++<<<<<<< HEAD:drivers/net/phy/mscc.c
 +	.ack_interrupt  = &vsc85xx_ack_interrupt,
++=======
+ 	.handle_interrupt = &vsc8584_handle_interrupt,
++>>>>>>> 30446ae4675c (net: phy: mscc: remove the use of .ack_interrupt()):drivers/net/phy/mscc/mscc_main.c
  	.config_intr    = &vsc85xx_config_intr,
 +	.did_interrupt  = &vsc8584_did_interrupt,
  	.suspend	= &genphy_suspend,
  	.resume		= &genphy_resume,
  	.probe		= &vsc8584_probe,
@@@ -2631,9 -2418,8 +2653,13 @@@
  	.config_aneg    = &vsc85xx_config_aneg,
  	.aneg_done	= &genphy_aneg_done,
  	.read_status	= &vsc85xx_read_status,
++<<<<<<< HEAD:drivers/net/phy/mscc.c
 +	.ack_interrupt  = &vsc85xx_ack_interrupt,
++=======
+ 	.handle_interrupt = &vsc8584_handle_interrupt,
++>>>>>>> 30446ae4675c (net: phy: mscc: remove the use of .ack_interrupt()):drivers/net/phy/mscc/mscc_main.c
  	.config_intr    = &vsc85xx_config_intr,
 +	.did_interrupt  = &vsc8584_did_interrupt,
  	.suspend	= &genphy_suspend,
  	.resume		= &genphy_resume,
  	.probe		= &vsc8584_probe,
@@@ -2655,9 -2441,8 +2681,13 @@@
  	.config_aneg    = &vsc85xx_config_aneg,
  	.aneg_done	= &genphy_aneg_done,
  	.read_status	= &vsc85xx_read_status,
++<<<<<<< HEAD:drivers/net/phy/mscc.c
 +	.ack_interrupt  = &vsc85xx_ack_interrupt,
++=======
+ 	.handle_interrupt = &vsc8584_handle_interrupt,
++>>>>>>> 30446ae4675c (net: phy: mscc: remove the use of .ack_interrupt()):drivers/net/phy/mscc/mscc_main.c
  	.config_intr    = &vsc85xx_config_intr,
 +	.did_interrupt  = &vsc8584_did_interrupt,
  	.suspend	= &genphy_suspend,
  	.resume		= &genphy_resume,
  	.probe		= &vsc8584_probe,
* Unmerged path drivers/net/phy/mscc.c
