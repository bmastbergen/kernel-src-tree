powerpc/numa: remove unreachable topology update code

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-331.el8
commit-author Nathan Lynch <nathanl@linux.ibm.com>
commit 7d35bef96a46f7e9e167bb25258c0bd389aeab1b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-331.el8/7d35bef9.failed

Since the topology_updates_enabled flag is now always false, remove it
and the code which has become unreachable. This is the minimum change
that prevents 'defined but unused' warnings emitted by the compiler
after stubbing out the start/stop_topology_updates() functions.

	Signed-off-by: Nathan Lynch <nathanl@linux.ibm.com>
	Reviewed-by: Srikar Dronamraju <srikar@linux.vnet.ibm.com>
	Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
Link: https://lore.kernel.org/r/20200612051238.1007764-5-nathanl@linux.ibm.com
(cherry picked from commit 7d35bef96a46f7e9e167bb25258c0bd389aeab1b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/powerpc/mm/numa.c
diff --cc arch/powerpc/mm/numa.c
index d9a705182ada,9e20f12e6caf..000000000000
--- a/arch/powerpc/mm/numa.c
+++ b/arch/powerpc/mm/numa.c
@@@ -1030,28 -984,6 +1030,31 @@@ static int __init early_numa(char *p
  }
  early_param("numa", early_numa);
  
++<<<<<<< HEAD
 +/*
 + * The platform can inform us through one of several mechanisms
 + * (post-migration device tree updates, PRRN or VPHN) that the NUMA
 + * assignment of a resource has changed. This controls whether we act
 + * on that. Disabled by default.
 + */
 +static bool topology_updates_enabled;
 +
 +static int __init early_topology_updates(char *p)
 +{
 +	if (!p)
 +		return 0;
 +
 +	if (!strcmp(p, "on")) {
 +		pr_warn("Caution: enabling topology updates\n");
 +		topology_updates_enabled = true;
 +	}
 +
 +	return 0;
 +}
 +early_param("topology_updates", early_topology_updates);
 +
++=======
++>>>>>>> 7d35bef96a46 (powerpc/numa: remove unreachable topology update code)
  #ifdef CONFIG_MEMORY_HOTPLUG
  /*
   * Find the node associated with a hot added memory section for
@@@ -1575,35 -1446,6 +1510,38 @@@ static void reset_topology_timer(void
  		mod_timer(&topology_timer, jiffies + topology_timer_secs * HZ);
  }
  
++<<<<<<< HEAD
 +#ifdef CONFIG_SMP
 +
 +static int dt_update_callback(struct notifier_block *nb,
 +				unsigned long action, void *data)
 +{
 +	struct of_reconfig_data *update = data;
 +	int rc = NOTIFY_DONE;
 +
 +	switch (action) {
 +	case OF_RECONFIG_UPDATE_PROPERTY:
 +		if (!of_prop_cmp(update->dn->type, "cpu") &&
 +		    !of_prop_cmp(update->prop->name, "ibm,associativity")) {
 +			u32 core_id;
 +			of_property_read_u32(update->dn, "reg", &core_id);
 +			rc = dlpar_cpu_readd(core_id);
 +			rc = NOTIFY_OK;
 +		}
 +		break;
 +	}
 +
 +	return rc;
 +}
 +
 +static struct notifier_block dt_update_nb = {
 +	.notifier_call = dt_update_callback,
 +};
 +
 +#endif
 +
++=======
++>>>>>>> 7d35bef96a46 (powerpc/numa: remove unreachable topology update code)
  /*
   * Start polling for associativity changes.
   */
* Unmerged path arch/powerpc/mm/numa.c
