cifs: fix use after free in cifs_smb3_do_mount()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-331.el8
commit-author Ronnie Sahlberg <lsahlber@redhat.com>
commit 6cf5abbfa8c8a2826d56e38ed1956a0e2f0c85b9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-331.el8/6cf5abbf.failed

	Reported-by: Dan Carpenter <dan.carpenter@oracle.com>
	Signed-off-by: Ronnie Sahlberg <lsahlber@redhat.com>
	Signed-off-by: Steve French <stfrench@microsoft.com>
(cherry picked from commit 6cf5abbfa8c8a2826d56e38ed1956a0e2f0c85b9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/cifs/cifsfs.c
diff --cc fs/cifs/cifsfs.c
index e1f4772cf344,ce0d0037fd0a..000000000000
--- a/fs/cifs/cifsfs.c
+++ b/fs/cifs/cifsfs.c
@@@ -870,7 -872,7 +872,11 @@@ cifs_smb3_do_mount(struct file_system_t
  		sb->s_flags |= SB_ACTIVE;
  	}
  
++<<<<<<< HEAD
 +	root = cifs_get_root(ctx, sb);
++=======
+ 	root = cifs_get_root(cifs_sb ? cifs_sb->ctx : old_ctx, sb);
++>>>>>>> 6cf5abbfa8c8 (cifs: fix use after free in cifs_smb3_do_mount())
  	if (IS_ERR(root))
  		goto out_super;
  
* Unmerged path fs/cifs/cifsfs.c
