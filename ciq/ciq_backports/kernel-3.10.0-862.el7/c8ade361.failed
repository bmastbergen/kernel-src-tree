tools/power turbostat: Add --list option to show available header names

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [tools] power turbostat: Add --list option to show available header names (Prarit Bhargava) [1514290]
Rebuild_FUZZ: 95.59%
commit-author Len Brown <len.brown@intel.com>
commit c8ade3616a1a5cf7767c0338d2b02007796f5d88
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/c8ade361.failed

It is handy to know the list of column header names,
so that they can be used with --add and --skip

The new --list option shows them:

sudo ./turbostat --list --hide sysfs
,Core,CPU,Avg_MHz,Busy%,Bzy_MHz,TSC_MHz,IRQ,SMI,CPU%c1,CPU%c3,CPU%c6,CPU%c7,CoreTmp,PkgTmp,GFX%rc6,GFXMHz,PkgWatt,CorWatt,GFXWatt

	Signed-off-by: Len Brown <len.brown@intel.com>
(cherry picked from commit c8ade3616a1a5cf7767c0338d2b02007796f5d88)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/power/x86/turbostat/turbostat.c
diff --cc tools/power/x86/turbostat/turbostat.c
index 416137df44fe,7b02fbb65893..000000000000
--- a/tools/power/x86/turbostat/turbostat.c
+++ b/tools/power/x86/turbostat/turbostat.c
@@@ -49,8 -49,10 +49,9 @@@ FILE *outf
  int *fd_percpu;
  struct timespec interval_ts = {5, 0};
  unsigned int debug;
 -unsigned int quiet;
  unsigned int rapl_joules;
  unsigned int summary_only;
+ unsigned int list_header_only;
  unsigned int dump_only;
  unsigned int do_snb_cstates;
  unsigned int do_knl_cstates;
@@@ -464,58 -475,59 +465,76 @@@ void print_header(char *delim
  	struct msr_counter *mp;
  
  	if (DO_BIC(BIC_Package))
- 		outp += sprintf(outp, "\tPackage");
+ 		outp += sprintf(outp, "%sPackage", delim);
  	if (DO_BIC(BIC_Core))
- 		outp += sprintf(outp, "\tCore");
+ 		outp += sprintf(outp, "%sCore", delim);
  	if (DO_BIC(BIC_CPU))
- 		outp += sprintf(outp, "\tCPU");
+ 		outp += sprintf(outp, "%sCPU", delim);
  	if (DO_BIC(BIC_Avg_MHz))
- 		outp += sprintf(outp, "\tAvg_MHz");
+ 		outp += sprintf(outp, "%sAvg_MHz", delim);
  	if (DO_BIC(BIC_Busy))
- 		outp += sprintf(outp, "\tBusy%%");
+ 		outp += sprintf(outp, "%sBusy%%", delim);
  	if (DO_BIC(BIC_Bzy_MHz))
- 		outp += sprintf(outp, "\tBzy_MHz");
+ 		outp += sprintf(outp, "%sBzy_MHz", delim);
  	if (DO_BIC(BIC_TSC_MHz))
- 		outp += sprintf(outp, "\tTSC_MHz");
+ 		outp += sprintf(outp, "%sTSC_MHz", delim);
  
  	if (DO_BIC(BIC_IRQ))
- 		outp += sprintf(outp, "\tIRQ");
+ 		outp += sprintf(outp, "%sIRQ", delim);
  	if (DO_BIC(BIC_SMI))
- 		outp += sprintf(outp, "\tSMI");
+ 		outp += sprintf(outp, "%sSMI", delim);
  
 +	if (DO_BIC(BIC_CPU_c1))
 +		outp += sprintf(outp, "\tCPU%%c1");
 +
  	for (mp = sys.tp; mp; mp = mp->next) {
  		if (mp->format == FORMAT_RAW) {
  			if (mp->width == 64)
- 				outp += sprintf(outp, "\t%18.18s", mp->name);
+ 				outp += sprintf(outp, "%s%18.18s", delim, mp->name);
  			else
- 				outp += sprintf(outp, "\t%10.10s", mp->name);
+ 				outp += sprintf(outp, "%s%10.10s", delim, mp->name);
  		} else {
++<<<<<<< HEAD
 +			outp += sprintf(outp, "\t%-7.7s", mp->name);
 +		}
 +	}
 +
++=======
+ 			outp += sprintf(outp, "%s%s", delim, mp->name);
+ 		}
+ 	}
+ 
+ 	if (DO_BIC(BIC_CPU_c1))
+ 		outp += sprintf(outp, "%sCPU%%c1", delim);
++>>>>>>> c8ade3616a1a (tools/power turbostat: Add --list option to show available header names)
  	if (DO_BIC(BIC_CPU_c3) && !do_slm_cstates && !do_knl_cstates)
- 		outp += sprintf(outp, "\tCPU%%c3");
+ 		outp += sprintf(outp, "%sCPU%%c3", delim);
  	if (DO_BIC(BIC_CPU_c6))
- 		outp += sprintf(outp, "\tCPU%%c6");
+ 		outp += sprintf(outp, "%sCPU%%c6", delim);
  	if (DO_BIC(BIC_CPU_c7))
- 		outp += sprintf(outp, "\tCPU%%c7");
+ 		outp += sprintf(outp, "%sCPU%%c7", delim);
  
++<<<<<<< HEAD
++=======
+ 	if (DO_BIC(BIC_Mod_c6))
+ 		outp += sprintf(outp, "%sMod%%c6", delim);
++>>>>>>> c8ade3616a1a (tools/power turbostat: Add --list option to show available header names)
  
  	if (DO_BIC(BIC_CoreTmp))
- 		outp += sprintf(outp, "\tCoreTmp");
+ 		outp += sprintf(outp, "%sCoreTmp", delim);
  
  	for (mp = sys.cp; mp; mp = mp->next) {
  		if (mp->format == FORMAT_RAW) {
  			if (mp->width == 64)
- 				outp += sprintf(outp, "\t%18.18s", mp->name);
+ 				outp += sprintf(outp, "%s%18.18s", delim, mp->name);
  			else
- 				outp += sprintf(outp, "\t%10.10s", mp->name);
+ 				outp += sprintf(outp, "%s%10.10s", delim, mp->name);
  		} else {
++<<<<<<< HEAD
 +			outp += sprintf(outp, "\t%-7.7s", mp->name);
++=======
+ 			outp += sprintf(outp, "%s%s", delim, mp->name);
++>>>>>>> c8ade3616a1a (tools/power turbostat: Add --list option to show available header names)
  		}
  	}
  
@@@ -580,13 -592,14 +599,17 @@@
  	for (mp = sys.pp; mp; mp = mp->next) {
  		if (mp->format == FORMAT_RAW) {
  			if (mp->width == 64)
- 				outp += sprintf(outp, "\t%18.18s", mp->name);
+ 				outp += sprintf(outp, "%s%18.18s", delim, mp->name);
  			else
- 				outp += sprintf(outp, "\t%10.10s", mp->name);
+ 				outp += sprintf(outp, "%s%10.10s", delim, mp->name);
  		} else {
++<<<<<<< HEAD
 +			outp += sprintf(outp, "\t%-7.7s", mp->name);
++=======
+ 			outp += sprintf(outp, "%s%s", delim, mp->name);
++>>>>>>> c8ade3616a1a (tools/power turbostat: Add --list option to show available header names)
  		}
  	}
 -
  	outp += sprintf(outp, "\n");
  }
  
@@@ -3915,9 -4104,11 +3938,10 @@@ void help(
  	"to print statistics, until interrupted.\n"
  	"--add		add a counter\n"
  	"		eg. --add msr0x10,u64,cpu,delta,MY_TSC\n"
 -	"--cpu	cpu-set	limit output to summary plus cpu-set cpu-set\n"
 -	"--quiet	skip decoding system configuration header\n"
 +	"--debug	run in \"debug\" mode\n"
  	"--interval sec	Override default 5-second measurement interval\n"
  	"--help		print this help message\n"
+ 	"--list		list column headers only\n"
  	"--out file	create or truncate \"file\" for all output\n"
  	"--version	print version information\n"
  	"\n"
* Unmerged path tools/power/x86/turbostat/turbostat.c
