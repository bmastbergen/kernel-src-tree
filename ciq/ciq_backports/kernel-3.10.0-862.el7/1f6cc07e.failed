vxlan: preserve type of dst_port parm for encap_bypass_if_local()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Lance Richardson <lrichard@redhat.com>
commit 1f6cc07e170364212b6d81321f79f166089a60d9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/1f6cc07e.failed

Eliminate sparse warning by maintaining type of dst_port
as __be16.

	Signed-off-by: Lance Richardson <lrichard@redhat.com>
	Acked-by: Jiri Benc <jbenc@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 1f6cc07e170364212b6d81321f79f166089a60d9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/vxlan.c
diff --cc drivers/net/vxlan.c
index bd0cd9458619,19b1653e1bd6..000000000000
--- a/drivers/net/vxlan.c
+++ b/drivers/net/vxlan.c
@@@ -1901,6 -1949,40 +1901,43 @@@ static void vxlan_encap_bypass(struct s
  	}
  }
  
++<<<<<<< HEAD
++=======
+ static int encap_bypass_if_local(struct sk_buff *skb, struct net_device *dev,
+ 				 struct vxlan_dev *vxlan, union vxlan_addr *daddr,
+ 				 __be16 dst_port, __be32 vni, struct dst_entry *dst,
+ 				 u32 rt_flags)
+ {
+ #if IS_ENABLED(CONFIG_IPV6)
+ 	/* IPv6 rt-flags are checked against RTF_LOCAL, but the value of
+ 	 * RTF_LOCAL is equal to RTCF_LOCAL. So to keep code simple
+ 	 * we can use RTCF_LOCAL which works for ipv4 and ipv6 route entry.
+ 	 */
+ 	BUILD_BUG_ON(RTCF_LOCAL != RTF_LOCAL);
+ #endif
+ 	/* Bypass encapsulation if the destination is local */
+ 	if (rt_flags & RTCF_LOCAL &&
+ 	    !(rt_flags & (RTCF_BROADCAST | RTCF_MULTICAST))) {
+ 		struct vxlan_dev *dst_vxlan;
+ 
+ 		dst_release(dst);
+ 		dst_vxlan = vxlan_find_vni(vxlan->net, vni,
+ 					   daddr->sa.sa_family, dst_port,
+ 					   vxlan->flags);
+ 		if (!dst_vxlan) {
+ 			dev->stats.tx_errors++;
+ 			kfree_skb(skb);
+ 
+ 			return -ENOENT;
+ 		}
+ 		vxlan_encap_bypass(skb, vxlan, dst_vxlan);
+ 		return 1;
+ 	}
+ 
+ 	return 0;
+ }
+ 
++>>>>>>> 1f6cc07e1703 (vxlan: preserve type of dst_port parm for encap_bypass_if_local())
  static void vxlan_xmit_one(struct sk_buff *skb, struct net_device *dev,
  			   struct vxlan_rdst *rdst, bool did_rsc)
  {
* Unmerged path drivers/net/vxlan.c
