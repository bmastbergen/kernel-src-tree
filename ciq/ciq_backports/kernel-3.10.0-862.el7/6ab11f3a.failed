perf annotate: Process attr and build_id records

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author David Carrillo-Cisneros <davidcc@google.com>
commit 6ab11f3a35aa07be2ff167b9de37e6c1eb58396b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/6ab11f3a.failed

perf annotate did not get some love for pipe-mode, and did not have
.attr and .buil_id setup (while record and inject did. Fix that.

It can easily be reproduced by:

  perf record -o - noploop | perf annotate

that in my system shows:
    0xd8 [0x28]: failed to process type: 9

Committer Testing:

Before:

  $ perf record -o - stress -t 2 -c 2 | perf annotate --stdio
  stress: info: [11060] dispatching hogs: 2 cpu, 0 io, 0 vm, 0 hdd
  0x4470 [0x28]: failed to process type: 9
  $ stress: info: [11060] successful run completed in 2s

  $

After:

  $ perf record -o - stress -t 2 -c 2 | perf annotate --stdio
  stress: info: [11871] dispatching hogs: 2 cpu, 0 io, 0 vm, 0 hdd
  stress: info: [11871] successful run completed in 2s
  [ perf record: Woken up 2 times to write data ]
  [ perf record: Captured and wrote 0.000 MB - ]
  no symbols found in /usr/bin/stress, maybe install a debug package?
   Percent |      Source code & Disassembly of libc-2.24.so for cycles:uhH (6117 samples)
  ---------------------------------------------------------------------------------------
           :
           :      Disassembly of section .text:
           :
           :      000000000003b050 <random_r>:
           :      __random_r():
     10.56 :        3b050:       test   %rdi,%rdi
      0.00 :        3b053:       je     3b0d0 <random_r+0x80>
      0.34 :        3b055:       test   %rsi,%rsi
      0.00 :        3b058:       je     3b0d0 <random_r+0x80>
      0.46 :        3b05a:       mov    0x18(%rdi),%eax
     12.44 :        3b05d:       mov    0x10(%rdi),%r8
      0.18 :        3b061:       test   %eax,%eax
      0.00 :        3b063:       je     3b0b0 <random_r+0x60>
<SNIP>

	Signed-off-by: David Carrillo-Cisneros <davidcc@google.com>
	Tested-by: Arnaldo Carvalho de Melo <acme@redhat.com>
	Acked-by: Jiri Olsa <jolsa@kernel.org>
	Cc: Alexander Shishkin <alexander.shishkin@linux.intel.com>
	Cc: Andi Kleen <ak@linux.intel.com>
	Cc: He Kuang <hekuang@huawei.com>
	Cc: Masami Hiramatsu <mhiramat@kernel.org>
	Cc: Paul Turner <pjt@google.com>
	Cc: Peter Zijlstra <peterz@infradead.org>
	Cc: Simon Que <sque@chromium.org>
	Cc: Stephane Eranian <eranian@google.com>
	Cc: Wang Nan <wangnan0@huawei.com>
Link: http://lkml.kernel.org/r/20170410201432.24807-5-davidcc@google.com
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 6ab11f3a35aa07be2ff167b9de37e6c1eb58396b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/builtin-annotate.c
diff --cc tools/perf/builtin-annotate.c
index 91a4b22652f1,b2b2722f6bb7..000000000000
--- a/tools/perf/builtin-annotate.c
+++ b/tools/perf/builtin-annotate.c
@@@ -393,6 -393,9 +393,12 @@@ int cmd_annotate(int argc, const char *
  			.comm	= perf_event__process_comm,
  			.exit	= perf_event__process_exit,
  			.fork	= perf_event__process_fork,
++<<<<<<< HEAD
++=======
+ 			.namespaces = perf_event__process_namespaces,
+ 			.attr	= perf_event__process_attr,
+ 			.build_id = perf_event__process_build_id,
++>>>>>>> 6ab11f3a35aa (perf annotate: Process attr and build_id records)
  			.ordered_events = true,
  			.ordering_requires_timestamps = true,
  		},
* Unmerged path tools/perf/builtin-annotate.c
