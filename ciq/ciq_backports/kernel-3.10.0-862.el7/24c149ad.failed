ceph: fix bogus endianness change in ceph_ioctl_set_layout

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Jeff Layton <jlayton@redhat.com>
commit 24c149ad6914d349d8b64749f20f3f8ea5031fe0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/24c149ad.failed

sparse says:

    fs/ceph/ioctl.c:100:28: warning: cast to restricted __le64

preferred_osd is a __s64 so we don't need to do any conversion. Also,
just remove the cast in ceph_ioctl_get_layout as it's not needed.

	Signed-off-by: Jeff Layton <jlayton@redhat.com>
	Reviewed-by: Sage Weil <sage@redhat.com>
	Signed-off-by: Ilya Dryomov <idryomov@gmail.com>
(cherry picked from commit 24c149ad6914d349d8b64749f20f3f8ea5031fe0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/ceph/ioctl.c
diff --cc fs/ceph/ioctl.c
index 5a2ae2c14a14,4c9c72f26eb9..000000000000
--- a/fs/ceph/ioctl.c
+++ b/fs/ceph/ioctl.c
@@@ -21,11 -21,11 +21,19 @@@ static long ceph_ioctl_get_layout(struc
  
  	err = ceph_do_getattr(file_inode(file), CEPH_STAT_CAP_LAYOUT, false);
  	if (!err) {
++<<<<<<< HEAD
 +		l.stripe_unit = ceph_file_layout_su(ci->i_layout);
 +		l.stripe_count = ceph_file_layout_stripe_count(ci->i_layout);
 +		l.object_size = ceph_file_layout_object_size(ci->i_layout);
 +		l.data_pool = le32_to_cpu(ci->i_layout.fl_pg_pool);
 +		l.preferred_osd = (s32)-1;
++=======
+ 		l.stripe_unit = ci->i_layout.stripe_unit;
+ 		l.stripe_count = ci->i_layout.stripe_count;
+ 		l.object_size = ci->i_layout.object_size;
+ 		l.data_pool = ci->i_layout.pool_id;
+ 		l.preferred_osd = -1;
++>>>>>>> 24c149ad6914 (ceph: fix bogus endianness change in ceph_ioctl_set_layout)
  		if (copy_to_user(arg, &l, sizeof(l)))
  			return -EFAULT;
  	}
@@@ -94,10 -94,10 +102,10 @@@ static long ceph_ioctl_set_layout(struc
  	if (l.data_pool)
  		nl.data_pool = l.data_pool;
  	else
 -		nl.data_pool = ci->i_layout.pool_id;
 +		nl.data_pool = ceph_file_layout_pg_pool(ci->i_layout);
  
  	/* this is obsolete, and always -1 */
- 	nl.preferred_osd = le64_to_cpu(-1);
+ 	nl.preferred_osd = -1;
  
  	err = __validate_layout(mdsc, &nl);
  	if (err)
* Unmerged path fs/ceph/ioctl.c
