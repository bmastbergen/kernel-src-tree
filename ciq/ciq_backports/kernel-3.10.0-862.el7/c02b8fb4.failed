drm/i915/edp: Increase the T12 delay quirk to 1300ms

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Manasi Navare <manasi.d.navare@intel.com>
commit c02b8fb4073d1b9aa5af909a91b51056b819d946
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/c02b8fb4.failed

For this specific PCI device, the eDP panel requires a higher panel
power cycle delay of 1300ms where the minimum spec requirement of panel
power cycle delay is 500ms. This fix in combination with correct
timestamp at which we get the panel power off time fixes the dP AUX CH
timeouts seen on various IGT tests.

Fixes: c99a259b4b5192ba ("drm/i915/edp: Add a T12 panel delay quirk to fix
DP AUX CH timeouts")
Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=101144
Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=101518
	Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
	Cc: Jani Nikula <jani.nikula@linux.intel.com>
	Cc: Ville Syrjala <ville.syrjala@linux.intel.com>
	Signed-off-by: Manasi Navare <manasi.d.navare@intel.com>
	Acked-by: Daniel Vetter <daniel.vetter@ffwll.ch>
	Signed-off-by: Jani Nikula <jani.nikula@intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/1507073845-13420-2-git-send-email-manasi.d.navare@intel.com
(cherry picked from commit c02b8fb4073d1b9aa5af909a91b51056b819d946)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/intel_dp.c
diff --cc drivers/gpu/drm/i915/intel_dp.c
index 0806776b6255,ca48bce23a6f..000000000000
--- a/drivers/gpu/drm/i915/intel_dp.c
+++ b/drivers/gpu/drm/i915/intel_dp.c
@@@ -5001,6 -5280,21 +5001,24 @@@ intel_dp_init_panel_power_sequencer(str
  	intel_pps_dump_state("cur", &cur);
  
  	vbt = dev_priv->vbt.edp.pps;
++<<<<<<< HEAD
++=======
+ 	/* On Toshiba Satellite P50-C-18C system the VBT T12 delay
+ 	 * of 500ms appears to be too short. Ocassionally the panel
+ 	 * just fails to power back on. Increasing the delay to 800ms
+ 	 * seems sufficient to avoid this problem.
+ 	 */
+ 	if (dev_priv->quirks & QUIRK_INCREASE_T12_DELAY) {
+ 		vbt.t11_t12 = max_t(u16, vbt.t11_t12, 1300 * 10);
+ 		DRM_DEBUG_KMS("Increasing T12 panel delay as per the quirk to %d\n",
+ 			      vbt.t11_t12);
+ 	}
+ 	/* T11_T12 delay is special and actually in units of 100ms, but zero
+ 	 * based in the hw (so we need to add 100 ms). But the sw vbt
+ 	 * table multiplies it with 1000 to make it in units of 100usec,
+ 	 * too. */
+ 	vbt.t11_t12 += 100 * 10;
++>>>>>>> c02b8fb4073d (drm/i915/edp: Increase the T12 delay quirk to 1300ms)
  
  	/* Upper limits from eDP 1.3 spec. Note that we use the clunky units of
  	 * our hw here, which are all in 100usec. */
* Unmerged path drivers/gpu/drm/i915/intel_dp.c
