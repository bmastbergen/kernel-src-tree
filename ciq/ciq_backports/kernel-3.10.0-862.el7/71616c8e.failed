tools/power turbostat: decode Baytrail CC6 and MC6 demotion configuration

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [tools] power turbostat: decode Baytrail CC6 and MC6 demotion configuration (Prarit Bhargava) [1514290]
Rebuild_FUZZ: 95.71%
commit-author Len Brown <len.brown@intel.com>
commit 71616c8e936a6dd541f0627d7bf4ff09971d8ccb
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/71616c8e.failed

with --debug, see:

cpu0: MSR_CC6_DEMOTION_POLICY_CONFIG: 0x00000000 (DISable-CC6-Demotion)
cpu0: MSR_MC6_DEMOTION_POLICY_CONFIG: 0x00000000 (DISable-MC6-Demotion)

Note that the hardware default is to enable demotion,
and Linux started clearing these registers in 3.17.

	Signed-off-by: Len Brown <len.brown@intel.com>
(cherry picked from commit 71616c8e936a6dd541f0627d7bf4ff09971d8ccb)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/power/x86/turbostat/turbostat.c
diff --cc tools/power/x86/turbostat/turbostat.c
index 5d035651e568,1b762f67e3e2..000000000000
--- a/tools/power/x86/turbostat/turbostat.c
+++ b/tools/power/x86/turbostat/turbostat.c
@@@ -3500,6 -3493,49 +3521,52 @@@ void decode_misc_enable_msr(void
  			msr & (1 << 18) ? "MONITOR" : "");
  }
  
++<<<<<<< HEAD
++=======
+ /*
+  * Decode MSR_MISC_PWR_MGMT
+  *
+  * Decode the bits according to the Nehalem documentation
+  * bit[0] seems to continue to have same meaning going forward
+  * bit[1] less so...
+  */
+ void decode_misc_pwr_mgmt_msr(void)
+ {
+ 	unsigned long long msr;
+ 
+ 	if (!do_nhm_platform_info)
+ 		return;
+ 
+ 	if (no_MSR_MISC_PWR_MGMT)
+ 		return;
+ 
+ 	if (!get_msr(base_cpu, MSR_MISC_PWR_MGMT, &msr))
+ 		fprintf(outf, "cpu%d: MSR_MISC_PWR_MGMT: 0x%08llx (%sable-EIST_Coordination %sable-EPB %sable-OOB)\n",
+ 			base_cpu, msr,
+ 			msr & (1 << 0) ? "DIS" : "EN",
+ 			msr & (1 << 1) ? "EN" : "DIS",
+ 			msr & (1 << 8) ? "EN" : "DIS");
+ }
+ /*
+  * Decode MSR_CC6_DEMOTION_POLICY_CONFIG, MSR_MC6_DEMOTION_POLICY_CONFIG
+  *
+  * This MSRs are present on Silvermont processors,
+  * Intel Atom processor E3000 series (Baytrail), and friends.
+  */
+ void decode_c6_demotion_policy_msr(void)
+ {
+ 	unsigned long long msr;
+ 
+ 	if (!get_msr(base_cpu, MSR_CC6_DEMOTION_POLICY_CONFIG, &msr))
+ 		fprintf(outf, "cpu%d: MSR_CC6_DEMOTION_POLICY_CONFIG: 0x%08llx (%sable-CC6-Demotion)\n",
+ 			base_cpu, msr, msr & (1 << 0) ? "EN" : "DIS");
+ 
+ 	if (!get_msr(base_cpu, MSR_MC6_DEMOTION_POLICY_CONFIG, &msr))
+ 		fprintf(outf, "cpu%d: MSR_MC6_DEMOTION_POLICY_CONFIG: 0x%08llx (%sable-MC6-Demotion)\n",
+ 			base_cpu, msr, msr & (1 << 0) ? "EN" : "DIS");
+ }
+ 
++>>>>>>> 71616c8e936a (tools/power turbostat: decode Baytrail CC6 and MC6 demotion configuration)
  void process_cpuid()
  {
  	unsigned int eax, ebx, ecx, edx, max_level, max_extended_level;
* Unmerged path tools/power/x86/turbostat/turbostat.c
