scsi: qla2xxxx: avoid type mismatch in comparison

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [scsi] qla2xxxx: avoid type mismatch in comparison (Himanshu Madhani) [1327621]
Rebuild_FUZZ: 93.48%
commit-author Arnd Bergmann <arnd@arndb.de>
commit fab683eb12e71ac6057dc42dc7d1e5e71e5cba5e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/fab683eb.failed

A recent bug fix added code that does

        bool logged_out = (status & 0xFFFF);
        if (logged_out == CTIO_PORT_LOGGED_OUT)
		...

This looks wrong because we are comparing a boolean with an
integer constant, ang gcc warns about it accordingly:

drivers/scsi/qla2xxx/qla_target.c: In function 'qlt_do_ctio_completion':
drivers/scsi/qla2xxx/qla_target.c:3587:20: warning: comparison of constant '41' with boolean expression is always false [-Wbool-compare]
        (logged_out == CTIO_PORT_LOGGED_OUT) ?

The correct fix is presumably to make that variable an 'int'.

	Signed-off-by: Arnd Bergmann <arnd@arndb.de>
Fixes: 71cdc0796465 ("qla2xxx: Delete session if initiator is gone from FW")
	Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>
(cherry picked from commit fab683eb12e71ac6057dc42dc7d1e5e71e5cba5e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/qla2xxx/qla_target.c
diff --cc drivers/scsi/qla2xxx/qla_target.c
index 45ccae5ec6af,8075a4cdb45c..000000000000
--- a/drivers/scsi/qla2xxx/qla_target.c
+++ b/drivers/scsi/qla2xxx/qla_target.c
@@@ -2518,13 -3579,26 +2518,18 @@@ static void qlt_do_ctio_completion(stru
  
  		case CTIO_PORT_LOGGED_OUT:
  		case CTIO_PORT_UNAVAILABLE:
++<<<<<<< HEAD
++=======
+ 		{
+ 			int logged_out = (status & 0xFFFF);
++>>>>>>> fab683eb12e7 (scsi: qla2xxxx: avoid type mismatch in comparison)
  			ql_dbg(ql_dbg_tgt_mgt, vha, 0xf059,
 -			    "qla_target(%d): CTIO with %s status %x "
 +			    "qla_target(%d): CTIO with PORT LOGGED "
 +			    "OUT (29) or PORT UNAVAILABLE (28) status %x "
  			    "received (state %x, se_cmd %p)\n", vha->vp_idx,
 -			    (logged_out == CTIO_PORT_LOGGED_OUT) ?
 -			    "PORT LOGGED OUT" : "PORT UNAVAILABLE",
  			    status, cmd->state, se_cmd);
 -
 -			if (logged_out && cmd->sess) {
 -				/*
 -				 * Session is already logged out, but we need
 -				 * to notify initiator, who's not aware of this
 -				 */
 -				cmd->sess->logout_on_delete = 0;
 -				cmd->sess->send_els_logo = 1;
 -				qlt_schedule_sess_for_deletion(cmd->sess, true);
 -			}
  			break;
 -		}
 +
  		case CTIO_SRR_RECEIVED:
  			ql_dbg(ql_dbg_tgt_mgt, vha, 0xf05a,
  			    "qla_target(%d): CTIO with SRR_RECEIVED"
* Unmerged path drivers/scsi/qla2xxx/qla_target.c
