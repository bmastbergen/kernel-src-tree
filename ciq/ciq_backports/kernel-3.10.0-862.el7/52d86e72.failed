IB/hfi1: Remove subtraction of uninitialized value

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Dennis Dalessandro <dennis.dalessandro@intel.com>
commit 52d86e72c515ebd4fb0d329470aa50698e28fb36
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/52d86e72.failed

In process_receive_packet the packet header field is used to calculate
the length of the packet. However this is not necessarily setup. In fact
only if the ECN prescan is enabled will the packet header be valid at
this point.

The code works as is because we do not do anything with the packet
length at this point in the packet processing. The length and header are
setup correctly in hfi1_setup_ib_header which is called by the following
sequence:

process_receive_packet()
-> rhf_receieve_function_map[]()
--> process_receive_ib()
---> hfi1_setup_9B_packet()
----> hfi1_setup_ib_header()

	Reviewed-by: Mike Marciniszyn <mike.marciniszyn@intel.com>
	Signed-off-by: Dennis Dalessandro <dennis.dalessandro@intel.com>
	Signed-off-by: Doug Ledford <dledford@redhat.com>
(cherry picked from commit 52d86e72c515ebd4fb0d329470aa50698e28fb36)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/hw/hfi1/driver.c
diff --cc drivers/infiniband/hw/hfi1/driver.c
index 500b129ed565,9e59430bc55c..000000000000
--- a/drivers/infiniband/hw/hfi1/driver.c
+++ b/drivers/infiniband/hw/hfi1/driver.c
@@@ -734,10 -701,8 +734,15 @@@ static inline int process_rcv_packet(st
  {
  	int ret;
  
++<<<<<<< HEAD
 +	packet->hdr = hfi1_get_msgheader(packet->rcd->dd,
 +					 packet->rhf_addr);
 +	packet->hlen = (u8 *)packet->rhf_addr - (u8 *)packet->hdr;
 +	packet->etype = rhf_rcv_type(packet->rhf);
++=======
+ 	packet->etype = rhf_rcv_type(packet->rhf);
+ 
++>>>>>>> 52d86e72c515 (IB/hfi1: Remove subtraction of uninitialized value)
  	/* total length */
  	packet->tlen = rhf_pkt_len(packet->rhf); /* in bytes */
  	/* retrieve eager buffer details */
* Unmerged path drivers/infiniband/hw/hfi1/driver.c
