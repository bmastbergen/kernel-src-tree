ovl: set the ORIGIN type flag

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Amir Goldstein <amir73il@gmail.com>
commit 595485033db2c24178257698254fd4182fdb4123
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/59548503.failed

For directory entries, non zero oe->numlower implies OVL_TYPE_MERGE.
Define a new type flag OVL_TYPE_ORIGIN to indicate that an entry holds a
reference to its lower copy up origin.

For directory entries ORIGIN := MERGE && UPPER. For non-dir entries ORIGIN
means that a lower type dentry has been recently copied up or that we were
able to find the copy up origin from overlay.origin xattr.

	Signed-off-by: Amir Goldstein <amir73il@gmail.com>
	Signed-off-by: Miklos Szeredi <mszeredi@redhat.com>
(cherry picked from commit 595485033db2c24178257698254fd4182fdb4123)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/overlayfs/overlayfs.h
#	fs/overlayfs/util.c
diff --cc fs/overlayfs/overlayfs.h
index 952ccab31629,98af19828695..000000000000
--- a/fs/overlayfs/overlayfs.h
+++ b/fs/overlayfs/overlayfs.h
@@@ -18,9 -18,7 +19,13 @@@ enum ovl_path_type 
  
  #define OVL_TYPE_UPPER(type)	((type) & __OVL_PATH_UPPER)
  #define OVL_TYPE_MERGE(type)	((type) & __OVL_PATH_MERGE)
++<<<<<<< HEAD
 +#define OVL_TYPE_MERGE_OR_LOWER(type) \
 +	(OVL_TYPE_MERGE(type) || !OVL_TYPE_UPPER(type))
 +
++=======
+ #define OVL_TYPE_ORIGIN(type)	((type) & __OVL_PATH_ORIGIN)
++>>>>>>> 595485033db2 (ovl: set the ORIGIN type flag)
  
  #define OVL_XATTR_PREFIX XATTR_TRUSTED_PREFIX "overlay."
  #define OVL_XATTR_OPAQUE OVL_XATTR_PREFIX "opaque"
* Unmerged path fs/overlayfs/util.c
* Unmerged path fs/overlayfs/overlayfs.h
* Unmerged path fs/overlayfs/util.c
