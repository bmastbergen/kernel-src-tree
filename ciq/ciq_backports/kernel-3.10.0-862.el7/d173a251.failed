blk-mq: move debugfs declarations to a separate header file

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Omar Sandoval <osandov@fb.com>
commit d173a25165c124442182f6b21d0c2ec381a0eebe
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/d173a251.failed

Preparation for adding more declarations.

	Signed-off-by: Omar Sandoval <osandov@fb.com>
	Reviewed-by: Hannes Reinecke <hare@suse.com>
	Signed-off-by: Jens Axboe <axboe@fb.com>
(cherry picked from commit d173a25165c124442182f6b21d0c2ec381a0eebe)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	block/blk-core.c
#	block/blk-mq-debugfs.c
#	block/blk-sysfs.c
diff --cc block/blk-core.c
index b368719f5971,acdca6536562..000000000000
--- a/block/blk-core.c
+++ b/block/blk-core.c
@@@ -37,8 -39,14 +37,18 @@@
  #include <trace/events/block.h>
  
  #include "blk.h"
 +#include "blk-cgroup.h"
  #include "blk-mq.h"
++<<<<<<< HEAD
++=======
+ #include "blk-mq-debugfs.h"
+ #include "blk-mq-sched.h"
+ #include "blk-wbt.h"
+ 
+ #ifdef CONFIG_DEBUG_FS
+ struct dentry *blk_debugfs_root;
+ #endif
++>>>>>>> d173a25165c1 (blk-mq: move debugfs declarations to a separate header file)
  
  EXPORT_TRACEPOINT_SYMBOL_GPL(block_bio_remap);
  EXPORT_TRACEPOINT_SYMBOL_GPL(block_rq_remap);
diff --cc block/blk-sysfs.c
index 28651fcb101c,9995355121d7..000000000000
--- a/block/blk-sysfs.c
+++ b/block/blk-sysfs.c
@@@ -6,12 -6,15 +6,17 @@@
  #include <linux/module.h>
  #include <linux/bio.h>
  #include <linux/blkdev.h>
 -#include <linux/backing-dev.h>
  #include <linux/blktrace_api.h>
  #include <linux/blk-mq.h>
 -#include <linux/blk-cgroup.h>
  
  #include "blk.h"
 +#include "blk-cgroup.h"
  #include "blk-mq.h"
++<<<<<<< HEAD
++=======
+ #include "blk-mq-debugfs.h"
+ #include "blk-wbt.h"
++>>>>>>> d173a25165c1 (blk-mq: move debugfs declarations to a separate header file)
  
  struct queue_sysfs_entry {
  	struct attribute attr;
* Unmerged path block/blk-mq-debugfs.c
* Unmerged path block/blk-core.c
* Unmerged path block/blk-mq-debugfs.c
diff --git a/block/blk-mq-debugfs.h b/block/blk-mq-debugfs.h
new file mode 100644
index 000000000000..00b0f71d0ae9
--- /dev/null
+++ b/block/blk-mq-debugfs.h
@@ -0,0 +1,29 @@
+#ifndef INT_BLK_MQ_DEBUGFS_H
+#define INT_BLK_MQ_DEBUGFS_H
+
+#ifdef CONFIG_BLK_DEBUG_FS
+int blk_mq_debugfs_register(struct request_queue *q);
+void blk_mq_debugfs_unregister(struct request_queue *q);
+int blk_mq_debugfs_register_mq(struct request_queue *q);
+void blk_mq_debugfs_unregister_mq(struct request_queue *q);
+#else
+static inline int blk_mq_debugfs_register(struct request_queue *q)
+{
+	return 0;
+}
+
+static inline void blk_mq_debugfs_unregister(struct request_queue *q)
+{
+}
+
+static inline int blk_mq_debugfs_register_mq(struct request_queue *q)
+{
+	return 0;
+}
+
+static inline void blk_mq_debugfs_unregister_mq(struct request_queue *q)
+{
+}
+#endif
+
+#endif
diff --git a/block/blk-mq-sysfs.c b/block/blk-mq-sysfs.c
index 44799e473f05..b625817384e9 100644
--- a/block/blk-mq-sysfs.c
+++ b/block/blk-mq-sysfs.c
@@ -11,6 +11,7 @@
 
 #include <linux/blk-mq.h>
 #include "blk-mq.h"
+#include "blk-mq-debugfs.h"
 #include "blk-mq-tag.h"
 
 static void blk_mq_sysfs_release(struct kobject *kobj)
* Unmerged path block/blk-sysfs.c
