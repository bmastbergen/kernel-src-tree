scsi: lpfc: double lock typo in lpfc_ns_rsp()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [scsi] lpfc: double lock typo in lpfc_ns_rsp() (Dick Kennedy) [1385844 1461977 1387768]
Rebuild_FUZZ: 92.86%
commit-author Dan Carpenter <dan.carpenter@oracle.com>
commit 0d618cf4f24cebb822eaf57c27985266e4110176
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/0d618cf4.failed

There is a double lock bug here so this will deadlock instead of
unlocking.

Fixes: 1c5b12f76301 ("Fix implicit logo and RSCN handling for NVMET")
	Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
	Reviewed-by: James Smart <james.smart@broadcom.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit 0d618cf4f24cebb822eaf57c27985266e4110176)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/lpfc/lpfc_ct.c
diff --cc drivers/scsi/lpfc/lpfc_ct.c
index 4ac03b16d17f,c7962dae4dab..000000000000
--- a/drivers/scsi/lpfc/lpfc_ct.c
+++ b/drivers/scsi/lpfc/lpfc_ct.c
@@@ -596,6 -618,22 +596,25 @@@ lpfc_ns_rsp(struct lpfc_vport *vport, s
  
  	}
  
++<<<<<<< HEAD
++=======
+ 	/* All GID_FT entries processed.  If the driver is running in
+ 	 * in target mode, put impacted nodes into recovery and drop
+ 	 * the RPI to flush outstanding IO.
+ 	 */
+ 	if (vport->phba->nvmet_support) {
+ 		list_for_each_entry(ndlp, &vport->fc_nodes, nlp_listp) {
+ 			if (!(ndlp->nlp_flag & NLP_NVMET_RECOV))
+ 				continue;
+ 			lpfc_disc_state_machine(vport, ndlp, NULL,
+ 						NLP_EVT_DEVICE_RECOVERY);
+ 			spin_lock_irq(shost->host_lock);
+ 			ndlp->nlp_flag &= ~NLP_NVMET_RECOV;
+ 			spin_unlock_irq(shost->host_lock);
+ 		}
+ 	}
+ 
++>>>>>>> 0d618cf4f24c (scsi: lpfc: double lock typo in lpfc_ns_rsp())
  nsout1:
  	list_del(&head);
  	return 0;
* Unmerged path drivers/scsi/lpfc/lpfc_ct.c
