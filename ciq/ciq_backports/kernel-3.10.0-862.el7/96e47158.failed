tools/power turbostat: print system config, unless --quiet

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [tools] power turbostat: print system config, unless --quiet (Prarit Bhargava) [1514290]
Rebuild_FUZZ: 94.55%
commit-author Len Brown <len.brown@intel.com>
commit 96e4715857cf184536ef46e6ea92465f58a7b12d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/96e47158.failed

Some users want turbostat to tell them everything, by default.
Some users want turbostat to be quiet, by default.

I find that I'm in the 1st camp, and so I've never liked
needing to type the --debug parameter to decode the system
configuration.

So here we change the default and print the system configuration,
by default.  (The --debug option is now un-documented, though
it does still exist for debugging turbostat internals)

When you do not want to see the system configuration
header, use the new "--quiet" option.

	Signed-off-by: Len Brown <len.brown@intel.com>
(cherry picked from commit 96e4715857cf184536ef46e6ea92465f58a7b12d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/power/x86/turbostat/turbostat.8
#	tools/power/x86/turbostat/turbostat.c
diff --cc tools/power/x86/turbostat/turbostat.8
index 0863a08025ac,a08de27713e0..000000000000
--- a/tools/power/x86/turbostat/turbostat.8
+++ b/tools/power/x86/turbostat/turbostat.8
@@@ -109,6 -108,21 +108,24 @@@ Without any parameters, turbostat displ
  Periodic output goes to stdout, by default, unless --out is used to specify an output file.
  The 5-second interval can be changed with th "-i sec" option.
  Or a command may be specified as in "FORK EXAMPLE" below.
++<<<<<<< HEAD
++=======
+ .nf
+ [root@hsw]# ./turbostat
+      CPU Avg_MHz   Busy% Bzy_MHz TSC_MHz
+        -     488   12.51    3898    3498
+        0       0    0.01    3885    3498
+        4    3897   99.99    3898    3498
+        1       0    0.00    3861    3498
+        5       0    0.00    3882    3498
+        2       1    0.02    3894    3498
+        6       2    0.06    3898    3498
+        3       0    0.00    3849    3498
+        7       0    0.00    3877    3498
+ 
+ .fi
+ .SH DEBUG EXAMPLE
++>>>>>>> 96e4715857cf (tools/power turbostat: print system config, unless --quiet)
  
  The first row of statistics is a summary for the entire system.
  For residency % columns, the summary is a weighted average.
diff --cc tools/power/x86/turbostat/turbostat.c
index 0bd5262fcaf9,6867557596af..000000000000
--- a/tools/power/x86/turbostat/turbostat.c
+++ b/tools/power/x86/turbostat/turbostat.c
@@@ -3457,7 -3462,8 +3450,12 @@@ double slm_bclk(void
  	}
  	freq = slm_freq_table[i];
  
++<<<<<<< HEAD
 +	fprintf(outf, "SLM BCLK: %.1f Mhz\n", freq);
++=======
+ 	if (!quiet)
+ 		fprintf(outf, "SLM BCLK: %.1f Mhz\n", freq);
++>>>>>>> 96e4715857cf (tools/power turbostat: print system config, unless --quiet)
  
  	return freq;
  }
@@@ -3682,10 -3728,11 +3680,15 @@@ void process_cpuid(
  			has_hwp_pkg ? "" : "No-",
  			has_epb ? "" : "No-");
  
- 	if (debug)
+ 	if (!quiet)
  		decode_misc_enable_msr();
  
++<<<<<<< HEAD
 +	if (max_level >= 0x7 && debug) {
++=======
+ 
+ 	if (max_level >= 0x7 && !quiet) {
++>>>>>>> 96e4715857cf (tools/power turbostat: print system config, unless --quiet)
  		int has_sgx;
  
  		ecx = 0;
@@@ -3802,9 -3838,12 +3805,15 @@@
  	do_slm_cstates = is_slm(family, model);
  	do_knl_cstates  = is_knl(family, model);
  
- 	if (debug)
+ 	if (!quiet)
  		decode_misc_pwr_mgmt_msr();
  
++<<<<<<< HEAD
++=======
+ 	if (!quiet && has_slv_msrs(family, model))
+ 		decode_c6_demotion_policy_msr();
+ 
++>>>>>>> 96e4715857cf (tools/power turbostat: print system config, unless --quiet)
  	rapl_probe(family, model);
  	perf_limit_reasons_probe(family, model);
  
@@@ -3820,6 -3859,9 +3829,12 @@@
  	if (!access("/sys/class/graphics/fb0/device/drm/card0/gt_cur_freq_mhz", R_OK))
  		BIC_PRESENT(BIC_GFXMHz);
  
++<<<<<<< HEAD
++=======
+ 	if (!quiet)
+ 		decode_misc_feature_control();
+ 
++>>>>>>> 96e4715857cf (tools/power turbostat: print system config, unless --quiet)
  	return;
  }
  
@@@ -4380,8 -4422,7 +4395,12 @@@ void cmdline(int argc, char **argv
  	static struct option long_options[] = {
  		{"add",		required_argument,	0, 'a'},
  		{"Dump",	no_argument,		0, 'D'},
++<<<<<<< HEAD
 +		{"debug",	no_argument,		0, 'd'},
 +		{"verbose",	no_argument,		0, 'v'},
++=======
+ 		{"debug",	no_argument,		0, 'd'},	/* internal, not documented */
++>>>>>>> 96e4715857cf (tools/power turbostat: print system config, unless --quiet)
  		{"interval",	required_argument,	0, 'i'},
  		{"help",	no_argument,		0, 'h'},
  		{"hide",	required_argument,	0, 'H'},	// meh, -h taken by --help
@@@ -4398,7 -4440,7 +4418,11 @@@
  
  	progname = argv[0];
  
++<<<<<<< HEAD
 +	while ((opt = getopt_long_only(argc, argv, "+C:c:Ddvhi:JM:m:o:PpST:V",
++=======
+ 	while ((opt = getopt_long_only(argc, argv, "+C:c:Ddhi:JM:m:o:PpqST:v",
++>>>>>>> 96e4715857cf (tools/power turbostat: print system config, unless --quiet)
  				long_options, &option_index)) != -1) {
  		switch (opt) {
  		case 'a':
* Unmerged path tools/power/x86/turbostat/turbostat.8
* Unmerged path tools/power/x86/turbostat/turbostat.c
