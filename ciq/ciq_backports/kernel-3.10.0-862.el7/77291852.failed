nbd: Fix error handling

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [nvme] rdma: Fix error handling (David Milburn) [1457880 1456486 1454365]
Rebuild_FUZZ: 89.36%
commit-author Christophe JAILLET <christophe.jaillet@wanadoo.fr>
commit 772918524dfb8c8869120728c1b1109a2d49493c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/77291852.failed

'blk_mq_alloc_request()' returns an error pointer in case of error, not
NULL. So test it with IS_ERR.

Fixes: 	fd8383fd88a2 ("nbd: convert to blkmq")

	Signed-off-by: Christophe JAILLET <christophe.jaillet@wanadoo.fr>
	Signed-off-by: Jens Axboe <axboe@fb.com>
(cherry picked from commit 772918524dfb8c8869120728c1b1109a2d49493c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/block/nbd.c
diff --cc drivers/block/nbd.c
index a40a4f0f5091,7a1048755914..000000000000
--- a/drivers/block/nbd.c
+++ b/drivers/block/nbd.c
@@@ -612,6 -598,10 +612,13 @@@ static int __nbd_ioctl(struct block_dev
  		if (!nbd->sock)
  			return -EINVAL;
  
++<<<<<<< HEAD
++=======
+ 		sreq = blk_mq_alloc_request(bdev_get_queue(bdev), WRITE, 0);
+ 		if (IS_ERR(sreq))
+ 			return -ENOMEM;
+ 
++>>>>>>> 772918524dfb (nbd: Fix error handling)
  		mutex_unlock(&nbd->tx_lock);
  		fsync_bdev(bdev);
  		mutex_lock(&nbd->tx_lock);
* Unmerged path drivers/block/nbd.c
