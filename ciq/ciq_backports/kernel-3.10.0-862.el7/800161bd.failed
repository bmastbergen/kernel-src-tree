thunderbolt: Correct access permissions for active NVM contents

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [thunderbolt] Correct access permissions for active NVM contents (Jeremy McNicoll) [1172010]
Rebuild_FUZZ: 88.50%
commit-author Mika Westerberg <mika.westerberg@linux.intel.com>
commit 800161bd0209a8db77f66af283c379ff8d58d88d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/800161bd.failed

Firmware upgrade tools that decide which NVM image should be uploaded to
the Thunderbolt controller need to access active parts of the NVM even
if they are not run as root. The information in active NVM is not
considered security critical so we can use the default permissions set
by the NVMem framework.

Writing the NVM image is still left as root only operation.

While there mark the active NVM as read-only in the filesystem.

	Reported-by: Yehezkel Bernat <yehezkel.bernat@intel.com>
	Signed-off-by: Mika Westerberg <mika.westerberg@linux.intel.com>
	Signed-off-by: Andreas Noever <andreas.noever@gmail.com>
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 800161bd0209a8db77f66af283c379ff8d58d88d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/thunderbolt/switch.c
* Unmerged path drivers/thunderbolt/switch.c
* Unmerged path drivers/thunderbolt/switch.c
