tools/power turbostat: stop migrating, unless '-m'

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [tools] power turbostat: stop migrating, unless '-m' (Prarit Bhargava) [1514290]
Rebuild_FUZZ: 93.62%
commit-author Len Brown <len.brown@intel.com>
commit c91fc8519d87715a3a173475ea3778794c139996
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/c91fc851.failed

Turbostat has the capability to set its own affinity to
each CPU so that its MSR accesses are on the local CPU.

However, using the in-kernel cross-call in  the msr driver
tends to be less invasive, so do that -- by-default.
'-m' remains to get the old behaviour.

	Signed-off-by: Len Brown <len.brown@intel.com>
(cherry picked from commit c91fc8519d87715a3a173475ea3778794c139996)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/power/x86/turbostat/turbostat.c
diff --cc tools/power/x86/turbostat/turbostat.c
index fc47becd6ab4,1a3a5b436b80..000000000000
--- a/tools/power/x86/turbostat/turbostat.c
+++ b/tools/power/x86/turbostat/turbostat.c
@@@ -4481,9 -5003,10 +4485,14 @@@ void cmdline(int argc, char **argv
  		{"help",	no_argument,		0, 'h'},
  		{"hide",	required_argument,	0, 'H'},	// meh, -h taken by --help
  		{"Joules",	no_argument,		0, 'J'},
++<<<<<<< HEAD
++=======
+ 		{"list",	no_argument,		0, 'l'},
+ 		{"migrate",	no_argument,		0, 'm'},
++>>>>>>> c91fc8519d87 (tools/power turbostat: stop migrating, unless '-m')
  		{"out",		required_argument,	0, 'o'},
 -		{"quiet",	no_argument,		0, 'q'},
 +		{"Package",	no_argument,		0, 'p'},
 +		{"processor",	no_argument,		0, 'p'},
  		{"show",	required_argument,	0, 's'},
  		{"Summary",	no_argument,		0, 'S'},
  		{"TCC",		required_argument,	0, 'T'},
@@@ -4493,7 -5016,7 +4502,11 @@@
  
  	progname = argv[0];
  
++<<<<<<< HEAD
 +	while ((opt = getopt_long_only(argc, argv, "+C:c:Ddvhi:JM:m:o:PpST:V",
++=======
+ 	while ((opt = getopt_long_only(argc, argv, "+C:c:Ddhi:Jmo:qST:v",
++>>>>>>> c91fc8519d87 (tools/power turbostat: stop migrating, unless '-m')
  				long_options, &option_index)) != -1) {
  		switch (opt) {
  		case 'a':
@@@ -4530,6 -5055,13 +4543,16 @@@
  		case 'J':
  			rapl_joules++;
  			break;
++<<<<<<< HEAD
++=======
+ 		case 'l':
+ 			list_header_only++;
+ 			quiet++;
+ 			break;
+ 		case 'm':
+ 			do_migrate = 1;
+ 			break;
++>>>>>>> c91fc8519d87 (tools/power turbostat: stop migrating, unless '-m')
  		case 'o':
  			outf = fopen_or_die(optarg, "w");
  			break;
* Unmerged path tools/power/x86/turbostat/turbostat.c
