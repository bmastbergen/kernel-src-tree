net/mlx5: Fix FPGA capability location

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [netdrv] mlx5: Fix FPGA capability location (Kamal Heib) [1456694]
Rebuild_FUZZ: 94.44%
commit-author Inbar Karmy <inbark@mellanox.com>
commit 99d3cd27f755d63fd6cf85169eaa873d90769aa5
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/99d3cd27.failed

Currently, FPGA capability is located in (mdev)->caps.hca_cur,
change the location to be (mdev)->caps.fpga,
since hca_cur is reserved for HCA device capabilities.

Fixes: e29341fb3a5b ("net/mlx5: FPGA, Add basic support for Innova")
	Signed-off-by: Inbar Karmy <inbark@mellanox.com>
	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
(cherry picked from commit 99d3cd27f755d63fd6cf85169eaa873d90769aa5)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/fpga/cmd.c
#	drivers/net/ethernet/mellanox/mlx5/core/fpga/cmd.h
#	drivers/net/ethernet/mellanox/mlx5/core/fpga/core.c
#	include/linux/mlx5/device.h
diff --cc include/linux/mlx5/device.h
index a42800a690b7,e32dbc4934db..000000000000
--- a/include/linux/mlx5/device.h
+++ b/include/linux/mlx5/device.h
@@@ -1094,6 -1108,12 +1094,15 @@@ enum mlx5_mcam_feature_groups 
  #define MLX5_CAP_MCAM_FEATURE(mdev, fld) \
  	MLX5_GET(mcam_reg, (mdev)->caps.mcam, mng_feature_cap_mask.enhanced_features.fld)
  
++<<<<<<< HEAD
++=======
+ #define MLX5_CAP_FPGA(mdev, cap) \
+ 	MLX5_GET(fpga_cap, (mdev)->caps.fpga, cap)
+ 
+ #define MLX5_CAP64_FPGA(mdev, cap) \
+ 	MLX5_GET64(fpga_cap, (mdev)->caps.fpga, cap)
+ 
++>>>>>>> 99d3cd27f755 (net/mlx5: Fix FPGA capability location)
  enum {
  	MLX5_CMD_STAT_OK			= 0x0,
  	MLX5_CMD_STAT_INT_ERR			= 0x1,
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/fpga/cmd.c
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/fpga/cmd.h
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/fpga/core.c
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/fpga/cmd.c
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/fpga/cmd.h
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/fpga/core.c
* Unmerged path include/linux/mlx5/device.h
diff --git a/include/linux/mlx5/driver.h b/include/linux/mlx5/driver.h
index 2c536d21ca92..66f7c6340ce0 100644
--- a/include/linux/mlx5/driver.h
+++ b/include/linux/mlx5/driver.h
@@ -667,6 +667,7 @@ struct mlx5_core_dev {
 		u32 hca_max[MLX5_CAP_NUM][MLX5_UN_SZ_DW(hca_cap_union)];
 		u32 pcam[MLX5_ST_SZ_DW(pcam_reg)];
 		u32 mcam[MLX5_ST_SZ_DW(mcam_reg)];
+		u32 fpga[MLX5_ST_SZ_DW(fpga_cap)];
 	} caps;
 	phys_addr_t		iseg_base;
 	struct mlx5_init_seg __iomem *iseg;
