perf tools: Move event prototypes from util.h to event.h

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Arnaldo Carvalho de Melo <acme@redhat.com>
commit 5ab8c689f7c0c97e98b8014b7f0ede386bef5aaf
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/5ab8c689.failed

More needs to be done to have the actual functions and variables in a
smaller .c file that can then be included in the python binding,
avoiding dragging more stuff into it.

Link: http://lkml.kernel.org/n/tip-uecxz7cqkssouj7tlxrkqpl4@git.kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 5ab8c689f7c0c97e98b8014b7f0ede386bef5aaf)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/util/util.h
diff --cc tools/perf/util/util.h
index e0eb4eee09b0,f87b8948efdc..000000000000
--- a/tools/perf/util/util.h
+++ b/tools/perf/util/util.h
@@@ -98,30 -56,11 +98,36 @@@ unsigned long convert_unit(unsigned lon
  ssize_t readn(int fd, void *buf, size_t n);
  ssize_t writen(int fd, void *buf, size_t n);
  
++<<<<<<< HEAD
 +struct perf_event_attr;
 +
 +void event_attr_init(struct perf_event_attr *attr);
 +
 +#define _STR(x) #x
 +#define STR(x) _STR(x)
 +
++=======
++>>>>>>> 5ab8c689f7c0 (perf tools: Move event prototypes from util.h to event.h)
  size_t hex_width(u64 v);
  int hex2u64(const char *ptr, u64 *val);
  
 +char *ltrim(char *s);
 +char *rtrim(char *s);
 +
 +static inline char *trim(char *s)
 +{
 +	return ltrim(rtrim(s));
 +}
 +
 +void dump_stack(void);
 +void sighandler_dump_stack(int sig);
 +
  extern unsigned int page_size;
  extern int cacheline_size;
++<<<<<<< HEAD
 +extern unsigned int sysctl_perf_event_max_stack;
++=======
++>>>>>>> 5ab8c689f7c0 (perf tools: Move event prototypes from util.h to event.h)
  
  struct parse_tag {
  	char tag;
@@@ -130,23 -69,6 +136,26 @@@
  
  unsigned long parse_tag_value(const char *str, struct parse_tag *tags);
  
++<<<<<<< HEAD
 +static inline int path__join(char *bf, size_t size,
 +			     const char *path1, const char *path2)
 +{
 +	return scnprintf(bf, size, "%s%s%s", path1, path1[0] ? "/" : "", path2);
 +}
 +
 +static inline int path__join3(char *bf, size_t size,
 +			      const char *path1, const char *path2,
 +			      const char *path3)
 +{
 +	return scnprintf(bf, size, "%s%s%s%s%s",
 +			 path1, path1[0] ? "/" : "",
 +			 path2, path2[0] ? "/" : "", path3);
 +}
 +
 +int perf_event_paranoid(void);
 +
++=======
++>>>>>>> 5ab8c689f7c0 (perf tools: Move event prototypes from util.h to event.h)
  void mem_bswap_64(void *src, int byte_size);
  void mem_bswap_32(void *src, int byte_size);
  
diff --git a/tools/perf/builtin-c2c.c b/tools/perf/builtin-c2c.c
index 70c2c773a2b8..4925b2e9ab76 100644
--- a/tools/perf/builtin-c2c.c
+++ b/tools/perf/builtin-c2c.c
@@ -24,6 +24,7 @@
 #include "tool.h"
 #include "data.h"
 #include "sort.h"
+#include "event.h"
 #include "evlist.h"
 #include "evsel.h"
 #include <asm/bug.h>
diff --git a/tools/perf/builtin-top.c b/tools/perf/builtin-top.c
index 7a57bb6621b0..a432183d0f7d 100644
--- a/tools/perf/builtin-top.c
+++ b/tools/perf/builtin-top.c
@@ -27,13 +27,13 @@
 #include "util/drv_configs.h"
 #include "util/evlist.h"
 #include "util/evsel.h"
+#include "util/event.h"
 #include "util/machine.h"
 #include "util/session.h"
 #include "util/symbol.h"
 #include "util/thread.h"
 #include "util/thread_map.h"
 #include "util/top.h"
-#include "util/util.h"
 #include <linux/rbtree.h>
 #include <subcmd/parse-options.h>
 #include "util/parse-events.h"
diff --git a/tools/perf/builtin-trace.c b/tools/perf/builtin-trace.c
index 5df0d0c79134..cc4b842421f1 100644
--- a/tools/perf/builtin-trace.c
+++ b/tools/perf/builtin-trace.c
@@ -21,6 +21,7 @@
 #include "builtin.h"
 #include "util/color.h"
 #include "util/debug.h"
+#include "util/event.h"
 #include "util/evlist.h"
 #include <subcmd/exec-cmd.h>
 #include "util/machine.h"
diff --git a/tools/perf/perf.c b/tools/perf/perf.c
index e6bf00bd4603..4479f981cc28 100644
--- a/tools/perf/perf.c
+++ b/tools/perf/perf.c
@@ -16,6 +16,7 @@
 #include "util/parse-events.h"
 #include <subcmd/parse-options.h>
 #include "util/debug.h"
+#include "util/event.h"
 #include <api/fs/fs.h>
 #include <api/fs/tracing_path.h>
 #include <pthread.h>
diff --git a/tools/perf/tests/hists_cumulate.c b/tools/perf/tests/hists_cumulate.c
index 9fd54b79a788..475d6ca34693 100644
--- a/tools/perf/tests/hists_cumulate.c
+++ b/tools/perf/tests/hists_cumulate.c
@@ -1,5 +1,6 @@
 #include "perf.h"
 #include "util/debug.h"
+#include "util/event.h"
 #include "util/symbol.h"
 #include "util/sort.h"
 #include "util/evsel.h"
diff --git a/tools/perf/tests/hists_filter.c b/tools/perf/tests/hists_filter.c
index 62efb14f3a5a..e47747cb3b78 100644
--- a/tools/perf/tests/hists_filter.c
+++ b/tools/perf/tests/hists_filter.c
@@ -3,6 +3,7 @@
 #include "util/symbol.h"
 #include "util/sort.h"
 #include "util/evsel.h"
+#include "util/event.h"
 #include "util/evlist.h"
 #include "util/machine.h"
 #include "util/thread.h"
diff --git a/tools/perf/tests/hists_output.c b/tools/perf/tests/hists_output.c
index 63c5efaba1b5..9a5c9bc95815 100644
--- a/tools/perf/tests/hists_output.c
+++ b/tools/perf/tests/hists_output.c
@@ -1,5 +1,6 @@
 #include "perf.h"
 #include "util/debug.h"
+#include "util/event.h"
 #include "util/symbol.h"
 #include "util/sort.h"
 #include "util/evsel.h"
diff --git a/tools/perf/util/event.c b/tools/perf/util/event.c
index 76df65ebf6d5..dda13576eec2 100644
--- a/tools/perf/util/event.c
+++ b/tools/perf/util/event.c
@@ -1,6 +1,7 @@
 #include <linux/types.h>
 #include <uapi/linux/mman.h> /* To get things like MAP_HUGETLB even on older libc headers */
 #include <api/fs/fs.h>
+#include <linux/perf_event.h>
 #include "event.h"
 #include "debug.h"
 #include "hist.h"
diff --git a/tools/perf/util/event.h b/tools/perf/util/event.h
index 94ae1f18825f..95edb4ddbd4e 100644
--- a/tools/perf/util/event.h
+++ b/tools/perf/util/event.h
@@ -662,4 +662,12 @@ int kallsyms__get_function_start(const char *kallsyms_filename,
 void *cpu_map_data__alloc(struct cpu_map *map, size_t *size, u16 *type, int *max);
 void  cpu_map_data__synthesize(struct cpu_map_data *data, struct cpu_map *map,
 			       u16 type, int max);
+
+void event_attr_init(struct perf_event_attr *attr);
+
+int perf_event_paranoid(void);
+
+extern int sysctl_perf_event_max_stack;
+extern int sysctl_perf_event_max_contexts_per_stack;
+
 #endif /* __PERF_RECORD_H */
diff --git a/tools/perf/util/evsel.c b/tools/perf/util/evsel.c
index 4c68d1afbf0f..3173108f92b5 100644
--- a/tools/perf/util/evsel.c
+++ b/tools/perf/util/evsel.c
@@ -18,6 +18,7 @@
 #include "asm/bug.h"
 #include "callchain.h"
 #include "cgroup.h"
+#include "event.h"
 #include "evsel.h"
 #include "evlist.h"
 #include "util.h"
* Unmerged path tools/perf/util/util.h
