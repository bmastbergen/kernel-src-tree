perf tools: Include errno.h where needed

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Arnaldo Carvalho de Melo <acme@redhat.com>
commit a43783aeec5fac8ef372ff8c0a5bbb3056fc0604
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/a43783ae.failed

Removing it from util.h, part of an effort to disentangle the includes
hell, that makes changes to util.h or something included by it to cause
a complete rebuild of the tools.

	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Jiri Olsa <jolsa@kernel.org>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Wang Nan <wangnan0@huawei.com>
Link: http://lkml.kernel.org/n/tip-ztrjy52q1rqcchuy3rubfgt2@git.kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit a43783aeec5fac8ef372ff8c0a5bbb3056fc0604)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/arch/s390/util/kvm-stat.c
#	tools/perf/arch/x86/tests/perf-time-to-tsc.c
#	tools/perf/builtin-c2c.c
#	tools/perf/builtin-diff.c
#	tools/perf/builtin-help.c
#	tools/perf/builtin-kmem.c
#	tools/perf/builtin-kvm.c
#	tools/perf/builtin-lock.c
#	tools/perf/builtin-record.c
#	tools/perf/builtin-report.c
#	tools/perf/builtin-script.c
#	tools/perf/builtin-timechart.c
#	tools/perf/builtin-trace.c
#	tools/perf/tests/attr.c
#	tools/perf/tests/bpf.c
#	tools/perf/tests/code-reading.c
#	tools/perf/tests/event-times.c
#	tools/perf/tests/evsel-roundtrip-name.c
#	tools/perf/tests/hists_link.c
#	tools/perf/tests/mmap-basic.c
#	tools/perf/tests/openat-syscall-all-cpus.c
#	tools/perf/tests/openat-syscall.c
#	tools/perf/tests/parse-events.c
#	tools/perf/tests/perf-record.c
#	tools/perf/tests/pmu.c
#	tools/perf/tests/sdt.c
#	tools/perf/tests/sw-clock.c
#	tools/perf/ui/browsers/hists.c
#	tools/perf/util/annotate.c
#	tools/perf/util/bpf-loader.c
#	tools/perf/util/bpf-loader.h
#	tools/perf/util/bpf-prologue.c
#	tools/perf/util/bpf-prologue.h
#	tools/perf/util/c++/clang-c.h
#	tools/perf/util/data-convert-bt.c
#	tools/perf/util/dwarf-aux.c
#	tools/perf/util/event.c
#	tools/perf/util/evlist.c
#	tools/perf/util/evsel.c
#	tools/perf/util/header.c
#	tools/perf/util/machine.c
#	tools/perf/util/ordered-events.c
#	tools/perf/util/session.c
#	tools/perf/util/sort.c
#	tools/perf/util/stat.c
diff --cc tools/perf/arch/x86/tests/perf-time-to-tsc.c
index 5c76cc83186a,e3ae9cff2b67..000000000000
--- a/tools/perf/arch/x86/tests/perf-time-to-tsc.c
+++ b/tools/perf/arch/x86/tests/perf-time-to-tsc.c
@@@ -1,3 -1,5 +1,8 @@@
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <stdio.h>
  #include <unistd.h>
  #include <linux/types.h>
diff --cc tools/perf/builtin-c2c.c
index 70c2c773a2b8,a90c1260f49e..000000000000
--- a/tools/perf/builtin-c2c.c
+++ b/tools/perf/builtin-c2c.c
@@@ -9,6 -9,8 +9,11 @@@
   *   Dick Fowles <fowles@inreach.com>
   *   Joe Mario <jmario@redhat.com>
   */
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <linux/compiler.h>
  #include <linux/kernel.h>
  #include <linux/stringify.h>
diff --cc tools/perf/builtin-diff.c
index 9bb4c2448ffd,eec5df80f5a3..000000000000
--- a/tools/perf/builtin-diff.c
+++ b/tools/perf/builtin-diff.c
@@@ -19,6 -19,8 +19,11 @@@
  #include "util/data.h"
  #include "util/config.h"
  
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <stdlib.h>
  #include <math.h>
  
diff --cc tools/perf/builtin-help.c
index 9730fd409f3b,7bde2f59dac2..000000000000
--- a/tools/perf/builtin-help.c
+++ b/tools/perf/builtin-help.c
@@@ -12,6 -12,8 +12,11 @@@
  #include <subcmd/run-command.h>
  #include <subcmd/help.h>
  #include "util/debug.h"
++<<<<<<< HEAD
++=======
+ #include <linux/kernel.h>
+ #include <errno.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  
  static struct man_viewer_list {
  	struct man_viewer_list *next;
diff --cc tools/perf/builtin-kmem.c
index 8da011987665,9409c9464667..000000000000
--- a/tools/perf/builtin-kmem.c
+++ b/tools/perf/builtin-kmem.c
@@@ -20,8 -20,11 +20,13 @@@
  
  #include "util/debug.h"
  
 -#include <linux/kernel.h>
  #include <linux/rbtree.h>
  #include <linux/string.h>
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <locale.h>
  #include <regex.h>
  
diff --cc tools/perf/builtin-kvm.c
index 693f98cb99a8,40660428fa72..000000000000
--- a/tools/perf/builtin-kvm.c
+++ b/tools/perf/builtin-kvm.c
@@@ -24,7 -24,10 +24,12 @@@
  #include <sys/timerfd.h>
  #endif
  
 -#include <linux/kernel.h>
  #include <linux/time64.h>
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <termios.h>
  #include <semaphore.h>
  #include <pthread.h>
diff --cc tools/perf/builtin-lock.c
index 7847917174f7,ff98652484a7..000000000000
--- a/tools/perf/builtin-lock.c
+++ b/tools/perf/builtin-lock.c
@@@ -1,3 -1,5 +1,8 @@@
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include "builtin.h"
  #include "perf.h"
  
diff --cc tools/perf/builtin-record.c
index 83ef8562c896,70340ff2008d..000000000000
--- a/tools/perf/builtin-record.c
+++ b/tools/perf/builtin-record.c
@@@ -38,6 -40,8 +38,11 @@@
  #include "util/perf-hooks.h"
  #include "asm/bug.h"
  
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <unistd.h>
  #include <sched.h>
  #include <sys/mman.h>
diff --cc tools/perf/builtin-report.c
index 377f119662a3,2941d8df4d40..000000000000
--- a/tools/perf/builtin-report.c
+++ b/tools/perf/builtin-report.c
@@@ -40,6 -40,8 +40,11 @@@
  #include "util/auxtrace.h"
  
  #include <dlfcn.h>
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <linux/bitmap.h>
  #include <linux/stringify.h>
  
diff --cc tools/perf/builtin-script.c
index f9436e7b7b5d,853651a0f720..000000000000
--- a/tools/perf/builtin-script.c
+++ b/tools/perf/builtin-script.c
@@@ -28,6 -31,9 +28,12 @@@
  #include <linux/time64.h>
  #include "asm/bug.h"
  #include "util/mem-events.h"
++<<<<<<< HEAD
++=======
+ #include "util/dump-insn.h"
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  
  #include "sane_ctype.h"
  
diff --cc tools/perf/builtin-timechart.c
index fafdb44b8bcb,e2576c8f6d4e..000000000000
--- a/tools/perf/builtin-timechart.c
+++ b/tools/perf/builtin-timechart.c
@@@ -12,6 -12,8 +12,11 @@@
   * of the License.
   */
  
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <traceevent/event-parse.h>
  
  #include "builtin.h"
diff --cc tools/perf/builtin-trace.c
index 5df0d0c79134,e065c4a12f58..000000000000
--- a/tools/perf/builtin-trace.c
+++ b/tools/perf/builtin-trace.c
@@@ -37,6 -39,10 +37,11 @@@
  #include "syscalltbl.h"
  #include "rb_resort.h"
  
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <libaudit.h> /* FIXME: Still needed for audit_errno_to_name */
  #include <stdlib.h>
  #include <string.h>
diff --cc tools/perf/tests/attr.c
index 28d1605b0338,ba87cd529bfc..000000000000
--- a/tools/perf/tests/attr.c
+++ b/tools/perf/tests/attr.c
@@@ -18,6 -18,8 +18,11 @@@
   * permissions. All the event text files are stored there.
   */
  
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <stdlib.h>
  #include <stdio.h>
  #include <linux/types.h>
diff --cc tools/perf/tests/code-reading.c
index b151d2019089,3a8bf1565493..000000000000
--- a/tools/perf/tests/code-reading.c
+++ b/tools/perf/tests/code-reading.c
@@@ -1,4 -1,7 +1,9 @@@
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <linux/kernel.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <linux/types.h>
 -#include <inttypes.h>
  #include <stdlib.h>
  #include <unistd.h>
  #include <stdio.h>
diff --cc tools/perf/tests/event-times.c
index 19ef77bd6eb4,4683514751d6..000000000000
--- a/tools/perf/tests/event-times.c
+++ b/tools/perf/tests/event-times.c
@@@ -1,4 -1,6 +1,9 @@@
  #include <linux/compiler.h>
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <string.h>
  #include "tests.h"
  #include "evlist.h"
diff --cc tools/perf/tests/evsel-roundtrip-name.c
index 60926a1f6fd7,d2bea6f780f8..000000000000
--- a/tools/perf/tests/evsel-roundtrip-name.c
+++ b/tools/perf/tests/evsel-roundtrip-name.c
@@@ -3,6 -3,8 +3,11 @@@
  #include "parse-events.h"
  #include "tests.h"
  #include "debug.h"
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <linux/kernel.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  
  static int perf_evsel__roundtrip_cache_name_test(void)
  {
diff --cc tools/perf/tests/hists_link.c
index eddc7407ff8a,a26cbb79e988..000000000000
--- a/tools/perf/tests/hists_link.c
+++ b/tools/perf/tests/hists_link.c
@@@ -9,6 -9,8 +9,11 @@@
  #include "thread.h"
  #include "parse-events.h"
  #include "hists_common.h"
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <linux/kernel.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  
  struct sample {
  	u32 pid;
diff --cc tools/perf/tests/mmap-basic.c
index 634bce9caebd,15c770856aac..000000000000
--- a/tools/perf/tests/mmap-basic.c
+++ b/tools/perf/tests/mmap-basic.c
@@@ -1,3 -1,5 +1,8 @@@
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  /* For the CLR_() macros */
  #include <pthread.h>
  
diff --cc tools/perf/tests/openat-syscall-all-cpus.c
index c8d9592eb142,b7dece0de42c..000000000000
--- a/tools/perf/tests/openat-syscall-all-cpus.c
+++ b/tools/perf/tests/openat-syscall-all-cpus.c
@@@ -1,3 -1,5 +1,8 @@@
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  /* For the CPU_* macros */
  #include <pthread.h>
  
diff --cc tools/perf/tests/openat-syscall.c
index d7414128d7fe,5f0c700b4693..000000000000
--- a/tools/perf/tests/openat-syscall.c
+++ b/tools/perf/tests/openat-syscall.c
@@@ -1,3 -1,5 +1,8 @@@
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <api/fs/tracing_path.h>
  #include <linux/err.h>
  #include "thread_map.h"
diff --cc tools/perf/tests/parse-events.c
index aa9276bfe3e9,66ecc3f5f618..000000000000
--- a/tools/perf/tests/parse-events.c
+++ b/tools/perf/tests/parse-events.c
@@@ -6,6 -5,8 +6,11 @@@
  #include "tests.h"
  #include "debug.h"
  #include "util.h"
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <linux/kernel.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <linux/hw_breakpoint.h>
  #include <api/fs/fs.h>
  
diff --cc tools/perf/tests/perf-record.c
index 541da7a68f91,d37cd9588cc0..000000000000
--- a/tools/perf/tests/perf-record.c
+++ b/tools/perf/tests/perf-record.c
@@@ -1,3 -1,5 +1,8 @@@
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  /* For the CLR_() macros */
  #include <pthread.h>
  
diff --cc tools/perf/tests/pmu.c
index 1e2ba2602930,a6d7aef30030..000000000000
--- a/tools/perf/tests/pmu.c
+++ b/tools/perf/tests/pmu.c
@@@ -2,6 -2,8 +2,11 @@@
  #include "pmu.h"
  #include "util.h"
  #include "tests.h"
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <linux/kernel.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  
  /* Simulated format definitions. */
  static struct test_format {
diff --cc tools/perf/tests/sw-clock.c
index 4c9fd046d57b,828494db4a19..000000000000
--- a/tools/perf/tests/sw-clock.c
+++ b/tools/perf/tests/sw-clock.c
@@@ -1,3 -1,5 +1,8 @@@
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <unistd.h>
  #include <stdlib.h>
  #include <signal.h>
diff --cc tools/perf/ui/browsers/hists.c
index 38be9b0f7fe0,0916575c6694..000000000000
--- a/tools/perf/ui/browsers/hists.c
+++ b/tools/perf/ui/browsers/hists.c
@@@ -1,3 -1,5 +1,8 @@@
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <stdio.h>
  #include <stdlib.h>
  #include <string.h>
diff --cc tools/perf/util/annotate.c
index 7460a9be0093,683f8340460c..000000000000
--- a/tools/perf/util/annotate.c
+++ b/tools/perf/util/annotate.c
@@@ -7,6 -7,8 +7,11 @@@
   * Released under the GPL v2. (and only v2, not any later version)
   */
  
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include "util.h"
  #include "ui/ui.h"
  #include "sort.h"
diff --cc tools/perf/util/data-convert-bt.c
index dcf042cd811d,89d50318833d..000000000000
--- a/tools/perf/util/data-convert-bt.c
+++ b/tools/perf/util/data-convert-bt.c
@@@ -7,7 -7,10 +7,12 @@@
   * Released under the GPL v2. (and only v2, not any later version)
   */
  
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <linux/compiler.h>
 -#include <linux/kernel.h>
  #include <babeltrace/ctf-writer/writer.h>
  #include <babeltrace/ctf-writer/clock.h>
  #include <babeltrace/ctf-writer/stream.h>
diff --cc tools/perf/util/dwarf-aux.c
index 41e068e94349,f5acda13dcfa..000000000000
--- a/tools/perf/util/dwarf-aux.c
+++ b/tools/perf/util/dwarf-aux.c
@@@ -17,6 -17,8 +17,11 @@@
   *
   */
  
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <stdbool.h>
  #include "util.h"
  #include "debug.h"
diff --cc tools/perf/util/event.c
index dde16469da7e,1fc1217a0c2c..000000000000
--- a/tools/perf/util/event.c
+++ b/tools/perf/util/event.c
@@@ -1,3 -1,6 +1,9 @@@
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
+ #include <linux/kernel.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <linux/types.h>
  #include <uapi/linux/mman.h> /* To get things like MAP_HUGETLB even on older libc headers */
  #include <api/fs/fs.h>
diff --cc tools/perf/util/evlist.c
index c8ee4e14587e,f74ea2e55fde..000000000000
--- a/tools/perf/util/evlist.c
+++ b/tools/perf/util/evlist.c
@@@ -8,6 -8,8 +8,11 @@@
   */
  #include "util.h"
  #include <api/fs/fs.h>
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <poll.h>
  #include "cpumap.h"
  #include "thread_map.h"
diff --cc tools/perf/util/evsel.c
index 4c68d1afbf0f,44a7aef3911b..000000000000
--- a/tools/perf/util/evsel.c
+++ b/tools/perf/util/evsel.c
@@@ -8,6 -8,8 +8,11 @@@
   */
  
  #include <byteswap.h>
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <linux/bitops.h>
  #include <api/fs/tracing_path.h>
  #include <traceevent/event-parse.h>
diff --cc tools/perf/util/header.c
index a211fb91144a,28a3acb7b313..000000000000
--- a/tools/perf/util/header.c
+++ b/tools/perf/util/header.c
@@@ -1,4 -1,7 +1,9 @@@
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include "util.h"
 -#include "string2.h"
  #include <sys/types.h>
  #include <byteswap.h>
  #include <unistd.h>
diff --cc tools/perf/util/machine.c
index 476227c71d3e,cdbfe3e32e5a..000000000000
--- a/tools/perf/util/machine.c
+++ b/tools/perf/util/machine.c
@@@ -1,3 -1,5 +1,8 @@@
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include "callchain.h"
  #include "debug.h"
  #include "event.h"
diff --cc tools/perf/util/ordered-events.c
index e70e935b1841,4de398cfb577..000000000000
--- a/tools/perf/util/ordered-events.c
+++ b/tools/perf/util/ordered-events.c
@@@ -1,3 -1,5 +1,8 @@@
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <linux/list.h>
  #include <linux/compiler.h>
  #include <linux/string.h>
diff --cc tools/perf/util/session.c
index 8e3315a99f0c,19d993f2a305..000000000000
--- a/tools/perf/util/session.c
+++ b/tools/perf/util/session.c
@@@ -1,3 -1,5 +1,8 @@@
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <linux/kernel.h>
  #include <traceevent/event-parse.h>
  #include <api/fs/fs.h>
diff --cc tools/perf/util/sort.c
index aac6fd1eeb71,9aa058e167e8..000000000000
--- a/tools/perf/util/sort.c
+++ b/tools/perf/util/sort.c
@@@ -1,3 -1,5 +1,8 @@@
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <sys/mman.h>
  #include "sort.h"
  #include "hist.h"
diff --cc tools/perf/util/stat.c
index 39345c2ddfc2,c58174443dc1..000000000000
--- a/tools/perf/util/stat.c
+++ b/tools/perf/util/stat.c
@@@ -1,3 -1,5 +1,8 @@@
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <inttypes.h>
++>>>>>>> a43783aeec5f (perf tools: Include errno.h where needed)
  #include <math.h>
  #include "stat.h"
  #include "evlist.h"
* Unmerged path tools/perf/arch/s390/util/kvm-stat.c
* Unmerged path tools/perf/tests/bpf.c
* Unmerged path tools/perf/tests/sdt.c
* Unmerged path tools/perf/util/bpf-loader.c
* Unmerged path tools/perf/util/bpf-loader.h
* Unmerged path tools/perf/util/bpf-prologue.c
* Unmerged path tools/perf/util/bpf-prologue.h
* Unmerged path tools/perf/util/c++/clang-c.h
diff --git a/tools/perf/arch/arm64/util/dwarf-regs.c b/tools/perf/arch/arm64/util/dwarf-regs.c
index d49efeb8172e..3c0676a16410 100644
--- a/tools/perf/arch/arm64/util/dwarf-regs.c
+++ b/tools/perf/arch/arm64/util/dwarf-regs.c
@@ -8,6 +8,7 @@
  * published by the Free Software Foundation.
  */
 
+#include <errno.h>
 #include <stddef.h>
 #include <dwarf-regs.h>
 
diff --git a/tools/perf/arch/powerpc/util/kvm-stat.c b/tools/perf/arch/powerpc/util/kvm-stat.c
index 74eee30398f8..249723f0e6a9 100644
--- a/tools/perf/arch/powerpc/util/kvm-stat.c
+++ b/tools/perf/arch/powerpc/util/kvm-stat.c
@@ -1,3 +1,4 @@
+#include <errno.h>
 #include "util/kvm-stat.h"
 #include "util/parse-events.h"
 #include "util/debug.h"
diff --git a/tools/perf/arch/powerpc/util/perf_regs.c b/tools/perf/arch/powerpc/util/perf_regs.c
index 4268f7762e25..f860dc411f69 100644
--- a/tools/perf/arch/powerpc/util/perf_regs.c
+++ b/tools/perf/arch/powerpc/util/perf_regs.c
@@ -1,3 +1,4 @@
+#include <errno.h>
 #include <string.h>
 #include <regex.h>
 
* Unmerged path tools/perf/arch/s390/util/kvm-stat.c
diff --git a/tools/perf/arch/x86/tests/intel-cqm.c b/tools/perf/arch/x86/tests/intel-cqm.c
index 7f064eb37158..03c62eb0106b 100644
--- a/tools/perf/arch/x86/tests/intel-cqm.c
+++ b/tools/perf/arch/x86/tests/intel-cqm.c
@@ -7,6 +7,7 @@
 #include "arch-tests.h"
 
 #include <sys/mman.h>
+#include <errno.h>
 #include <string.h>
 
 static pid_t spawn(void)
* Unmerged path tools/perf/arch/x86/tests/perf-time-to-tsc.c
diff --git a/tools/perf/arch/x86/util/auxtrace.c b/tools/perf/arch/x86/util/auxtrace.c
index cc1d865e31f1..6aa3f2a38321 100644
--- a/tools/perf/arch/x86/util/auxtrace.c
+++ b/tools/perf/arch/x86/util/auxtrace.c
@@ -13,6 +13,7 @@
  *
  */
 
+#include <errno.h>
 #include <stdbool.h>
 
 #include "../../util/header.h"
diff --git a/tools/perf/arch/x86/util/intel-bts.c b/tools/perf/arch/x86/util/intel-bts.c
index 5132775a044f..af2bce7a2cd6 100644
--- a/tools/perf/arch/x86/util/intel-bts.c
+++ b/tools/perf/arch/x86/util/intel-bts.c
@@ -13,6 +13,7 @@
  *
  */
 
+#include <errno.h>
 #include <linux/kernel.h>
 #include <linux/types.h>
 #include <linux/bitops.h>
diff --git a/tools/perf/arch/x86/util/intel-pt.c b/tools/perf/arch/x86/util/intel-pt.c
index 4418481096d6..945bdaf66efd 100644
--- a/tools/perf/arch/x86/util/intel-pt.c
+++ b/tools/perf/arch/x86/util/intel-pt.c
@@ -13,6 +13,7 @@
  *
  */
 
+#include <errno.h>
 #include <stdbool.h>
 #include <linux/kernel.h>
 #include <linux/types.h>
diff --git a/tools/perf/arch/x86/util/kvm-stat.c b/tools/perf/arch/x86/util/kvm-stat.c
index b63d4be655a2..bf817beca0a8 100644
--- a/tools/perf/arch/x86/util/kvm-stat.c
+++ b/tools/perf/arch/x86/util/kvm-stat.c
@@ -1,3 +1,4 @@
+#include <errno.h>
 #include "../../util/kvm-stat.h"
 #include <asm/svm.h>
 #include <asm/vmx.h>
diff --git a/tools/perf/arch/x86/util/perf_regs.c b/tools/perf/arch/x86/util/perf_regs.c
index 3bf3548c5e2d..f95edebfb716 100644
--- a/tools/perf/arch/x86/util/perf_regs.c
+++ b/tools/perf/arch/x86/util/perf_regs.c
@@ -1,3 +1,4 @@
+#include <errno.h>
 #include <string.h>
 #include <regex.h>
 
diff --git a/tools/perf/builtin-annotate.c b/tools/perf/builtin-annotate.c
index 91a4b22652f1..99b23dd2ba17 100644
--- a/tools/perf/builtin-annotate.c
+++ b/tools/perf/builtin-annotate.c
@@ -33,6 +33,7 @@
 #include "util/block-range.h"
 
 #include <dlfcn.h>
+#include <errno.h>
 #include <linux/bitmap.h>
 
 struct perf_annotate {
diff --git a/tools/perf/builtin-buildid-cache.c b/tools/perf/builtin-buildid-cache.c
index bfff0a00533e..5c2686ed2650 100644
--- a/tools/perf/builtin-buildid-cache.c
+++ b/tools/perf/builtin-buildid-cache.c
@@ -10,6 +10,7 @@
 #include <sys/time.h>
 #include <time.h>
 #include <dirent.h>
+#include <errno.h>
 #include <unistd.h>
 #include "builtin.h"
 #include "perf.h"
diff --git a/tools/perf/builtin-buildid-list.c b/tools/perf/builtin-buildid-list.c
index 26f4e608207f..fdaca16e0c74 100644
--- a/tools/perf/builtin-buildid-list.c
+++ b/tools/perf/builtin-buildid-list.c
@@ -16,6 +16,7 @@
 #include "util/session.h"
 #include "util/symbol.h"
 #include "util/data.h"
+#include <errno.h>
 
 static int sysfs__fprintf_build_id(FILE *fp)
 {
* Unmerged path tools/perf/builtin-c2c.c
* Unmerged path tools/perf/builtin-diff.c
diff --git a/tools/perf/builtin-ftrace.c b/tools/perf/builtin-ftrace.c
index f80fb60b00b0..67d14037c03e 100644
--- a/tools/perf/builtin-ftrace.c
+++ b/tools/perf/builtin-ftrace.c
@@ -9,6 +9,7 @@
 #include "builtin.h"
 #include "perf.h"
 
+#include <errno.h>
 #include <unistd.h>
 #include <signal.h>
 #include <fcntl.h>
* Unmerged path tools/perf/builtin-help.c
diff --git a/tools/perf/builtin-inject.c b/tools/perf/builtin-inject.c
index 84feab395300..3b5e771e4806 100644
--- a/tools/perf/builtin-inject.c
+++ b/tools/perf/builtin-inject.c
@@ -22,6 +22,7 @@
 #include <subcmd/parse-options.h>
 
 #include <linux/list.h>
+#include <errno.h>
 
 struct perf_inject {
 	struct perf_tool	tool;
* Unmerged path tools/perf/builtin-kmem.c
* Unmerged path tools/perf/builtin-kvm.c
* Unmerged path tools/perf/builtin-lock.c
* Unmerged path tools/perf/builtin-record.c
* Unmerged path tools/perf/builtin-report.c
diff --git a/tools/perf/builtin-sched.c b/tools/perf/builtin-sched.c
index 7db6f9e663b7..29bbf7ac35ad 100644
--- a/tools/perf/builtin-sched.c
+++ b/tools/perf/builtin-sched.c
@@ -26,6 +26,7 @@
 #include <sys/prctl.h>
 #include <sys/resource.h>
 
+#include <errno.h>
 #include <semaphore.h>
 #include <pthread.h>
 #include <math.h>
* Unmerged path tools/perf/builtin-script.c
diff --git a/tools/perf/builtin-stat.c b/tools/perf/builtin-stat.c
index f860dfae5a59..3bebe7f060e8 100644
--- a/tools/perf/builtin-stat.c
+++ b/tools/perf/builtin-stat.c
@@ -68,6 +68,7 @@
 
 #include <linux/time64.h>
 #include <api/fs/fs.h>
+#include <errno.h>
 #include <stdlib.h>
 #include <sys/prctl.h>
 #include <locale.h>
* Unmerged path tools/perf/builtin-timechart.c
* Unmerged path tools/perf/builtin-trace.c
diff --git a/tools/perf/perf.c b/tools/perf/perf.c
index b611531f753f..12ac80cd087d 100644
--- a/tools/perf/perf.c
+++ b/tools/perf/perf.c
@@ -18,6 +18,7 @@
 #include "util/debug.h"
 #include <api/fs/fs.h>
 #include <api/fs/tracing_path.h>
+#include <errno.h>
 #include <pthread.h>
 #include <stdlib.h>
 #include <time.h>
* Unmerged path tools/perf/tests/attr.c
diff --git a/tools/perf/tests/backward-ring-buffer.c b/tools/perf/tests/backward-ring-buffer.c
index e6d1816e431a..beb55ae879d0 100644
--- a/tools/perf/tests/backward-ring-buffer.c
+++ b/tools/perf/tests/backward-ring-buffer.c
@@ -8,6 +8,7 @@
 #include <sys/prctl.h>
 #include "tests.h"
 #include "debug.h"
+#include <errno.h>
 
 #define NR_ITERS 111
 
* Unmerged path tools/perf/tests/bpf.c
diff --git a/tools/perf/tests/builtin-test.c b/tools/perf/tests/builtin-test.c
index 15ee18262e31..2601b7be05cb 100644
--- a/tools/perf/tests/builtin-test.c
+++ b/tools/perf/tests/builtin-test.c
@@ -3,6 +3,7 @@
  *
  * Builtin regression testing command: ever growing number of sanity tests
  */
+#include <errno.h>
 #include <unistd.h>
 #include <string.h>
 #include "builtin.h"
* Unmerged path tools/perf/tests/code-reading.c
* Unmerged path tools/perf/tests/event-times.c
* Unmerged path tools/perf/tests/evsel-roundtrip-name.c
* Unmerged path tools/perf/tests/hists_link.c
* Unmerged path tools/perf/tests/mmap-basic.c
* Unmerged path tools/perf/tests/openat-syscall-all-cpus.c
diff --git a/tools/perf/tests/openat-syscall-tp-fields.c b/tools/perf/tests/openat-syscall-tp-fields.c
index f52239fed361..9788fac91095 100644
--- a/tools/perf/tests/openat-syscall-tp-fields.c
+++ b/tools/perf/tests/openat-syscall-tp-fields.c
@@ -5,6 +5,7 @@
 #include "thread_map.h"
 #include "tests.h"
 #include "debug.h"
+#include <errno.h>
 
 #ifndef O_DIRECTORY
 #define O_DIRECTORY    00200000
* Unmerged path tools/perf/tests/openat-syscall.c
* Unmerged path tools/perf/tests/parse-events.c
* Unmerged path tools/perf/tests/perf-record.c
* Unmerged path tools/perf/tests/pmu.c
* Unmerged path tools/perf/tests/sdt.c
* Unmerged path tools/perf/tests/sw-clock.c
diff --git a/tools/perf/tests/switch-tracking.c b/tools/perf/tests/switch-tracking.c
index 7ddbe267d0ac..65474fd80da7 100644
--- a/tools/perf/tests/switch-tracking.c
+++ b/tools/perf/tests/switch-tracking.c
@@ -1,5 +1,6 @@
 #include <sys/time.h>
 #include <sys/prctl.h>
+#include <errno.h>
 #include <time.h>
 #include <stdlib.h>
 
diff --git a/tools/perf/tests/task-exit.c b/tools/perf/tests/task-exit.c
index 01a5ba2788c6..32873ec91a4e 100644
--- a/tools/perf/tests/task-exit.c
+++ b/tools/perf/tests/task-exit.c
@@ -4,6 +4,7 @@
 #include "cpumap.h"
 #include "tests.h"
 
+#include <errno.h>
 #include <signal.h>
 
 static int exited;
* Unmerged path tools/perf/ui/browsers/hists.c
* Unmerged path tools/perf/util/annotate.c
diff --git a/tools/perf/util/auxtrace.h b/tools/perf/util/auxtrace.h
index da75e69ebb93..c74b5eee1073 100644
--- a/tools/perf/util/auxtrace.h
+++ b/tools/perf/util/auxtrace.h
@@ -17,6 +17,7 @@
 #define __PERF_AUXTRACE_H
 
 #include <sys/types.h>
+#include <errno.h>
 #include <stdbool.h>
 #include <stddef.h>
 #include <linux/list.h>
* Unmerged path tools/perf/util/bpf-loader.c
* Unmerged path tools/perf/util/bpf-loader.h
* Unmerged path tools/perf/util/bpf-prologue.c
* Unmerged path tools/perf/util/bpf-prologue.h
diff --git a/tools/perf/util/build-id.c b/tools/perf/util/build-id.c
index 3c0755563969..8d8ef1d31b1e 100644
--- a/tools/perf/util/build-id.c
+++ b/tools/perf/util/build-id.c
@@ -7,6 +7,7 @@
  * Copyright (C) 2009, 2010 Arnaldo Carvalho de Melo <acme@redhat.com>
  */
 #include "util.h"
+#include <errno.h>
 #include <stdio.h>
 #include "build-id.h"
 #include "event.h"
* Unmerged path tools/perf/util/c++/clang-c.h
diff --git a/tools/perf/util/cloexec.c b/tools/perf/util/cloexec.c
index f0dcd0ee0afa..4b4f00df58a8 100644
--- a/tools/perf/util/cloexec.c
+++ b/tools/perf/util/cloexec.c
@@ -1,3 +1,4 @@
+#include <errno.h>
 #include <sched.h>
 #include "util.h"
 #include "../perf.h"
diff --git a/tools/perf/util/comm.c b/tools/perf/util/comm.c
index 32837b6f7879..530a62a7b51e 100644
--- a/tools/perf/util/comm.c
+++ b/tools/perf/util/comm.c
@@ -1,5 +1,6 @@
 #include "comm.h"
 #include "util.h"
+#include <errno.h>
 #include <stdlib.h>
 #include <stdio.h>
 #include <linux/refcount.h>
diff --git a/tools/perf/util/config.c b/tools/perf/util/config.c
index 88783aa3dfc9..f5604039cbe4 100644
--- a/tools/perf/util/config.c
+++ b/tools/perf/util/config.c
@@ -8,6 +8,7 @@
  * Copyright (C) Johannes Schindelin, 2005
  *
  */
+#include <errno.h>
 #include "util.h"
 #include "cache.h"
 #include <subcmd/exec-cmd.h>
diff --git a/tools/perf/util/counts.c b/tools/perf/util/counts.c
index e3fde313deb2..83fedd0d22a1 100644
--- a/tools/perf/util/counts.c
+++ b/tools/perf/util/counts.c
@@ -1,3 +1,4 @@
+#include <errno.h>
 #include <stdlib.h>
 #include "evsel.h"
 #include "counts.h"
* Unmerged path tools/perf/util/data-convert-bt.c
diff --git a/tools/perf/util/data.c b/tools/perf/util/data.c
index 60bfc9ca1e22..e84bbc8ec058 100644
--- a/tools/perf/util/data.c
+++ b/tools/perf/util/data.c
@@ -2,6 +2,7 @@
 #include <linux/kernel.h>
 #include <sys/types.h>
 #include <sys/stat.h>
+#include <errno.h>
 #include <unistd.h>
 #include <string.h>
 
diff --git a/tools/perf/util/drv_configs.c b/tools/perf/util/drv_configs.c
index 1647f285c629..eec754243f4d 100644
--- a/tools/perf/util/drv_configs.c
+++ b/tools/perf/util/drv_configs.c
@@ -17,6 +17,7 @@
 #include "evlist.h"
 #include "evsel.h"
 #include "pmu.h"
+#include <errno.h>
 
 static int
 perf_evsel__apply_drv_configs(struct perf_evsel *evsel,
diff --git a/tools/perf/util/dso.c b/tools/perf/util/dso.c
index af1b6926a19b..2a11037b4cab 100644
--- a/tools/perf/util/dso.c
+++ b/tools/perf/util/dso.c
@@ -1,6 +1,7 @@
 #include <asm/bug.h>
 #include <sys/time.h>
 #include <sys/resource.h>
+#include <errno.h>
 #include "symbol.h"
 #include "dso.h"
 #include "machine.h"
* Unmerged path tools/perf/util/dwarf-aux.c
diff --git a/tools/perf/util/env.c b/tools/perf/util/env.c
index 075fc77286bf..9e21538c42ae 100644
--- a/tools/perf/util/env.c
+++ b/tools/perf/util/env.c
@@ -1,6 +1,7 @@
 #include "cpumap.h"
 #include "env.h"
 #include "util.h"
+#include <errno.h>
 
 struct perf_env perf_env;
 
* Unmerged path tools/perf/util/event.c
* Unmerged path tools/perf/util/evlist.c
* Unmerged path tools/perf/util/evsel.c
* Unmerged path tools/perf/util/header.c
diff --git a/tools/perf/util/hist.c b/tools/perf/util/hist.c
index 62f9cf726a96..54588ceabf5a 100644
--- a/tools/perf/util/hist.c
+++ b/tools/perf/util/hist.c
@@ -9,6 +9,7 @@
 #include "annotate.h"
 #include "srcline.h"
 #include "ui/progress.h"
+#include <errno.h>
 #include <math.h>
 
 static bool hists__filter_entry_by_dso(struct hists *hists,
diff --git a/tools/perf/util/intel-bts.c b/tools/perf/util/intel-bts.c
index 6c2eb5da4afc..59c732c1d793 100644
--- a/tools/perf/util/intel-bts.c
+++ b/tools/perf/util/intel-bts.c
@@ -14,6 +14,7 @@
  */
 
 #include <endian.h>
+#include <errno.h>
 #include <byteswap.h>
 #include <linux/kernel.h>
 #include <linux/types.h>
diff --git a/tools/perf/util/jitdump.c b/tools/perf/util/jitdump.c
index 00c86148d9c9..4fa624116d74 100644
--- a/tools/perf/util/jitdump.c
+++ b/tools/perf/util/jitdump.c
@@ -1,5 +1,6 @@
 #include <sys/sysmacros.h>
 #include <sys/types.h>
+#include <errno.h>
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
diff --git a/tools/perf/util/lzma.c b/tools/perf/util/lzma.c
index 9ddea5cecd94..5b73b268c169 100644
--- a/tools/perf/util/lzma.c
+++ b/tools/perf/util/lzma.c
@@ -1,3 +1,4 @@
+#include <errno.h>
 #include <lzma.h>
 #include <stdio.h>
 #include <linux/compiler.h>
* Unmerged path tools/perf/util/machine.c
* Unmerged path tools/perf/util/ordered-events.c
diff --git a/tools/perf/util/parse-events.c b/tools/perf/util/parse-events.c
index 3c6f7bbf0303..1740cbf5c116 100644
--- a/tools/perf/util/parse-events.c
+++ b/tools/perf/util/parse-events.c
@@ -1,5 +1,6 @@
 #include <linux/hw_breakpoint.h>
 #include <linux/err.h>
+#include <errno.h>
 #include "util.h"
 #include "../perf.h"
 #include "evlist.h"
diff --git a/tools/perf/util/pmu.c b/tools/perf/util/pmu.c
index ebc492ac459e..cb0496e78ba3 100644
--- a/tools/perf/util/pmu.c
+++ b/tools/perf/util/pmu.c
@@ -1,6 +1,7 @@
 #include <linux/list.h>
 #include <linux/compiler.h>
 #include <sys/types.h>
+#include <errno.h>
 #include <unistd.h>
 #include <stdio.h>
 #include <stdbool.h>
diff --git a/tools/perf/util/probe-file.c b/tools/perf/util/probe-file.c
index 88714dec8912..e73181af4557 100644
--- a/tools/perf/util/probe-file.c
+++ b/tools/perf/util/probe-file.c
@@ -14,6 +14,7 @@
  * GNU General Public License for more details.
  *
  */
+#include <errno.h>
 #include <sys/uio.h>
 #include "util.h"
 #include "event.h"
diff --git a/tools/perf/util/quote.c b/tools/perf/util/quote.c
index 293534c1a474..1ba8920151d8 100644
--- a/tools/perf/util/quote.c
+++ b/tools/perf/util/quote.c
@@ -1,3 +1,4 @@
+#include <errno.h>
 #include <stdlib.h>
 #include "strbuf.h"
 #include "quote.h"
diff --git a/tools/perf/util/record.c b/tools/perf/util/record.c
index 98bf584853ea..d91bdf5a1aa4 100644
--- a/tools/perf/util/record.c
+++ b/tools/perf/util/record.c
@@ -2,6 +2,7 @@
 #include "evsel.h"
 #include "cpumap.h"
 #include "parse-events.h"
+#include <errno.h>
 #include <api/fs/fs.h>
 #include "util.h"
 #include "cloexec.h"
* Unmerged path tools/perf/util/session.c
* Unmerged path tools/perf/util/sort.c
* Unmerged path tools/perf/util/stat.c
diff --git a/tools/perf/util/strbuf.c b/tools/perf/util/strbuf.c
index 817593908d47..e91b5e86f027 100644
--- a/tools/perf/util/strbuf.c
+++ b/tools/perf/util/strbuf.c
@@ -1,6 +1,7 @@
 #include "debug.h"
 #include "util.h"
 #include <linux/kernel.h>
+#include <errno.h>
 
 int prefixcmp(const char *str, const char *prefix)
 {
diff --git a/tools/perf/util/strfilter.c b/tools/perf/util/strfilter.c
index c663c9153245..b4204797a508 100644
--- a/tools/perf/util/strfilter.c
+++ b/tools/perf/util/strfilter.c
@@ -2,6 +2,7 @@
 #include "string.h"
 #include "strfilter.h"
 
+#include <errno.h>
 #include "sane_ctype.h"
 
 /* Operators */
diff --git a/tools/perf/util/symbol-minimal.c b/tools/perf/util/symbol-minimal.c
index 870ef0f0659c..40bf5d4c0bfd 100644
--- a/tools/perf/util/symbol-minimal.c
+++ b/tools/perf/util/symbol-minimal.c
@@ -1,6 +1,7 @@
 #include "symbol.h"
 #include "util.h"
 
+#include <errno.h>
 #include <stdio.h>
 #include <fcntl.h>
 #include <string.h>
diff --git a/tools/perf/util/thread-stack.c b/tools/perf/util/thread-stack.c
index d3301529f6a7..dd17d6a38d3a 100644
--- a/tools/perf/util/thread-stack.c
+++ b/tools/perf/util/thread-stack.c
@@ -15,6 +15,7 @@
 
 #include <linux/rbtree.h>
 #include <linux/list.h>
+#include <errno.h>
 #include "thread.h"
 #include "event.h"
 #include "machine.h"
diff --git a/tools/perf/util/thread.c b/tools/perf/util/thread.c
index 74e79d26b421..7fbf25f50b4b 100644
--- a/tools/perf/util/thread.c
+++ b/tools/perf/util/thread.c
@@ -1,4 +1,5 @@
 #include "../perf.h"
+#include <errno.h>
 #include <stdlib.h>
 #include <stdio.h>
 #include <string.h>
diff --git a/tools/perf/util/thread_map.c b/tools/perf/util/thread_map.c
index 9026408ea55b..39138c13e388 100644
--- a/tools/perf/util/thread_map.c
+++ b/tools/perf/util/thread_map.c
@@ -1,4 +1,5 @@
 #include <dirent.h>
+#include <errno.h>
 #include <limits.h>
 #include <stdbool.h>
 #include <stdlib.h>
diff --git a/tools/perf/util/unwind-libunwind-local.c b/tools/perf/util/unwind-libunwind-local.c
index bfb9b7987692..246e8087c14f 100644
--- a/tools/perf/util/unwind-libunwind-local.c
+++ b/tools/perf/util/unwind-libunwind-local.c
@@ -16,6 +16,7 @@
  */
 
 #include <elf.h>
+#include <errno.h>
 #include <gelf.h>
 #include <fcntl.h>
 #include <string.h>
diff --git a/tools/perf/util/util.h b/tools/perf/util/util.h
index 3821ee26013a..4e8d1f3e3637 100644
--- a/tools/perf/util/util.h
+++ b/tools/perf/util/util.h
@@ -18,7 +18,6 @@
 #include <stdarg.h>
 #include <string.h>
 #include <term.h>
-#include <errno.h>
 #include <limits.h>
 #include <sys/param.h>
 #include <sys/types.h>
diff --git a/tools/perf/util/vdso.c b/tools/perf/util/vdso.c
index 7bdcad484225..d3c39eec89a8 100644
--- a/tools/perf/util/vdso.c
+++ b/tools/perf/util/vdso.c
@@ -1,4 +1,4 @@
-
+#include <errno.h>
 #include <unistd.h>
 #include <stdio.h>
 #include <string.h>
