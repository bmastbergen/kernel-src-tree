livepatch: force transition to finish

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Miroslav Benes <mbenes@suse.cz>
commit c99a2be790b07752d8cc694434d3450afd4c5a00
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/c99a2be7.failed

If a task sleeps in a set of patched functions uninterruptedly, it could
block the whole transition indefinitely.  Thus it may be useful to clear
its TIF_PATCH_PENDING to allow the process to finish.

Admin can do that now by writing to force sysfs attribute in livepatch
sysfs directory. TIF_PATCH_PENDING is then cleared for all tasks and the
transition can finish successfully.

Important note! Administrator should not use this feature without a
clearance from a patch distributor. It must be checked that by doing so
the consistency model guarantees are not violated. Removal (rmmod) of
patch modules is permanently disabled when the feature is used. It
cannot be guaranteed there is no task sleeping in such module.

	Signed-off-by: Miroslav Benes <mbenes@suse.cz>
	Acked-by: Josh Poimboeuf <jpoimboe@redhat.com>
	Reviewed-by: Petr Mladek <pmladek@suse.com>
	Signed-off-by: Jiri Kosina <jkosina@suse.cz>
(cherry picked from commit c99a2be790b07752d8cc694434d3450afd4c5a00)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	Documentation/ABI/testing/sysfs-kernel-livepatch
#	Documentation/livepatch/livepatch.txt
#	kernel/livepatch/core.c
#	kernel/livepatch/transition.c
#	kernel/livepatch/transition.h
* Unmerged path Documentation/ABI/testing/sysfs-kernel-livepatch
* Unmerged path Documentation/livepatch/livepatch.txt
* Unmerged path kernel/livepatch/core.c
* Unmerged path kernel/livepatch/transition.c
* Unmerged path kernel/livepatch/transition.h
* Unmerged path Documentation/ABI/testing/sysfs-kernel-livepatch
* Unmerged path Documentation/livepatch/livepatch.txt
* Unmerged path kernel/livepatch/core.c
* Unmerged path kernel/livepatch/transition.c
* Unmerged path kernel/livepatch/transition.h
