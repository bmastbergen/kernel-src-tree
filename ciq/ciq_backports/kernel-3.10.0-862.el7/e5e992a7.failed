perf tools: Disable JVMTI if no ELF support available

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author David Carrillo-Cisneros <davidcc@google.com>
commit e5e992a7c184c2121adf37bdf292a516af81dbbb
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/e5e992a7.failed

The build of JVMTI depends on LIBELF (-lelf). Make Makefile.conf
check this dependendancy and notify user when not present.

v2: Comma nitpicking.

	Signed-off-by: David Carrillo-Cisneros <davidcc@google.com>
	Tested-by: Kim Phillips <kim.phillips@arm.com>
	Acked-by: Jiri Olsa <jolsa@kernel.org>
	Cc: Alexander Shishkin <alexander.shishkin@linux.intel.com>
	Cc: Andi Kleen <ak@linux.intel.com>
	Cc: He Kuang <hekuang@huawei.com>
	Cc: Masami Hiramatsu <mhiramat@kernel.org>
	Cc: Paul Turner <pjt@google.com>
	Cc: Peter Zijlstra <peterz@infradead.org>
	Cc: Simon Que <sque@chromium.org>
	Cc: Stephane Eranian <eranian@google.com>
	Cc: Wang Nan <wangnan0@huawei.com>
Link: http://lkml.kernel.org/r/20170412170745.26620-1-davidcc@google.com
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit e5e992a7c184c2121adf37bdf292a516af81dbbb)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/Makefile.config
diff --cc tools/perf/Makefile.config
index 3063e69cf632,8354d04b392f..000000000000
--- a/tools/perf/Makefile.config
+++ b/tools/perf/Makefile.config
@@@ -269,6 -273,8 +269,11 @@@ ifdef NO_LIBEL
    NO_DEMANGLE := 1
    NO_LIBUNWIND := 1
    NO_LIBDW_DWARF_UNWIND := 1
++<<<<<<< HEAD
++=======
+   NO_LIBBPF := 1
+   NO_JVMTI := 1
++>>>>>>> e5e992a7c184 (perf tools: Disable JVMTI if no ELF support available)
  else
    ifeq ($(feature-libelf), 0)
      ifeq ($(feature-glibc), 1)
@@@ -278,13 -284,15 +283,22 @@@
        LIBC_SUPPORT := 1
      endif
      ifeq ($(LIBC_SUPPORT),1)
++<<<<<<< HEAD
 +      msg := $(warning No libelf found, disables 'probe' tool, please install elfutils-libelf-devel/libelf-dev);
++=======
+       msg := $(warning No libelf found. Disables 'probe' tool, jvmti and BPF support in 'perf record'. Please install libelf-dev, libelf-devel or elfutils-libelf-devel);
++>>>>>>> e5e992a7c184 (perf tools: Disable JVMTI if no ELF support available)
  
        NO_LIBELF := 1
        NO_DWARF := 1
        NO_DEMANGLE := 1
        NO_LIBUNWIND := 1
        NO_LIBDW_DWARF_UNWIND := 1
++<<<<<<< HEAD
++=======
+       NO_LIBBPF := 1
+       NO_JVMTI := 1
++>>>>>>> e5e992a7c184 (perf tools: Disable JVMTI if no ELF support available)
      else
        ifneq ($(filter s% -static%,$(LDFLAGS),),)
          msg := $(error No static glibc found, please install glibc-static);
* Unmerged path tools/perf/Makefile.config
