ceph: remove unnecessary checks in __dcache_readdir

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Yan, Zheng <zyan@redhat.com>
commit 1cd42a429174689c0df1c37b642654a1ab4d1506
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/1cd42a42.failed

we never add snapdir and the hidden .ceph dir into readdir cache

	Signed-off-by: Yan, Zheng <zyan@redhat.com>
(cherry picked from commit 1cd42a429174689c0df1c37b642654a1ab4d1506)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/ceph/dir.c
diff --cc fs/ceph/dir.c
index f5abab663b08,734508be1526..000000000000
--- a/fs/ceph/dir.c
+++ b/fs/ceph/dir.c
@@@ -189,10 -227,8 +189,15 @@@ static int __dcache_readdir(struct fil
  		di = ceph_dentry(dentry);
  		spin_lock(&dentry->d_lock);
  		if (di->lease_shared_gen == shared_gen &&
++<<<<<<< HEAD
 +		    dentry->d_inode &&
 +		    ceph_snap(dentry->d_inode) != CEPH_SNAPDIR &&
 +		    ceph_ino(dentry->d_inode) != CEPH_INO_CEPH &&
 +		    fpos_cmp(filp->f_pos, di->offset) <= 0) {
++=======
+ 		    d_really_is_positive(dentry) &&
+ 		    fpos_cmp(ctx->pos, di->offset) <= 0) {
++>>>>>>> 1cd42a429174 (ceph: remove unnecessary checks in __dcache_readdir)
  			emit_dentry = true;
  		}
  		spin_unlock(&dentry->d_lock);
* Unmerged path fs/ceph/dir.c
