drm/i915/cnl: Avoid ioremap_wc on Cannonlake as well.

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [gpu] drm/i915/cnl: Avoid ioremap_wc on Cannonlake as well (Rob Clark) [1520639]
Rebuild_FUZZ: 99.05%
commit-author Rodrigo Vivi <rodrigo.vivi@intel.com>
commit 385db982b277a1eb5998b6316a500a2d6d9592b1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/385db982.failed

Driver’s CPU access to GTT is via the GTTMMADR BAR.

The current HW implementation of that BAR is to only
support <= DW (and maybe QW) writes—not 16/32/64B writes
that could occur with WC and/or SSE/AVX moves.

GTTMMADR must be marked uncacheable (UC).
Accesses to GTTMMADR(GTT), must be 64 bits or less (ie. 1 GTT entry).

v2: Get clarification on the reasons and spec is getting
    updated to reflect it now.

	Cc: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
	Suggested-by: Ben Widawsky <benjamin.widawsky@intel.com>
	Signed-off-by: Rodrigo Vivi <rodrigo.vivi@intel.com>
	Reviewed-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20170829230907.21363-1-rodrigo.vivi@intel.com
(cherry picked from commit 385db982b277a1eb5998b6316a500a2d6d9592b1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/i915_gem_gtt.c
diff --cc drivers/gpu/drm/i915/i915_gem_gtt.c
index b2d57d1feb11,7da9621d2c60..000000000000
--- a/drivers/gpu/drm/i915/i915_gem_gtt.c
+++ b/drivers/gpu/drm/i915/i915_gem_gtt.c
@@@ -2931,7 -2796,7 +2931,11 @@@ static int ggtt_probe_common(struct i91
  	 * resort to an uncached mapping. The WC issue is easily caught by the
  	 * readback check when writing GTT PTE entries.
  	 */
++<<<<<<< HEAD
 +	if (IS_BROXTON(dev_priv))
++=======
+ 	if (IS_GEN9_LP(dev_priv) || INTEL_GEN(dev_priv) >= 10)
++>>>>>>> 385db982b277 (drm/i915/cnl: Avoid ioremap_wc on Cannonlake as well.)
  		ggtt->gsm = ioremap_nocache(phys_addr, size);
  	else
  		ggtt->gsm = ioremap_wc(phys_addr, size);
* Unmerged path drivers/gpu/drm/i915/i915_gem_gtt.c
