net/mlx5e: IPoIB, Add PKEY child interface nic profile

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [netdrv] mlx5e: IPoIB, Add PKEY child interface nic profile (Kamal Heib) [1517570 1456694]
Rebuild_FUZZ: 96.15%
commit-author Alex Vesker <valex@mellanox.com>
commit 4c6c615e3f308aee26277abebc7d4ffcd9a6abe2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/4c6c615e.failed

Child interface profile will be called to support child interface
specific behaviour. The child code is sparse compared to the parent
since the RX channels are shared between the interfaces.
Creating a septate profile for child and parent will make a smother
code with a better ability for future expansion.
The profile stuct is exposed to the parent using a getter function.

	Signed-off-by: Alex Vesker <valex@mellanox.com>
	Reviewed-by: Erez Shitrit <erezsh@mellanox.com>
(cherry picked from commit 4c6c615e3f308aee26277abebc7d4ffcd9a6abe2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/ipoib.h
#	drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib.c
#	drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib_vlan.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/ipoib.h
index 89bca182464c,c9895f7a2358..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/ipoib.h
+++ b/drivers/net/ethernet/mellanox/mlx5/core/ipoib.h
@@@ -44,6 -52,33 +44,33 @@@ struct mlx5i_priv 
  	char  *mlx5e_priv[0];
  };
  
++<<<<<<< HEAD:drivers/net/ethernet/mellanox/mlx5/core/ipoib.h
++=======
+ /* Underlay QP create/destroy functions */
+ int mlx5i_create_underlay_qp(struct mlx5_core_dev *mdev, struct mlx5_core_qp *qp);
+ void mlx5i_destroy_underlay_qp(struct mlx5_core_dev *mdev, struct mlx5_core_qp *qp);
+ 
+ /* Allocate/Free underlay QPN to net-device hash table */
+ int mlx5i_pkey_qpn_ht_init(struct net_device *netdev);
+ void mlx5i_pkey_qpn_ht_cleanup(struct net_device *netdev);
+ 
+ /* Add/Remove an underlay QPN to net-device mapping to/from the hash table */
+ int mlx5i_pkey_add_qpn(struct net_device *netdev, u32 qpn);
+ int mlx5i_pkey_del_qpn(struct net_device *netdev, u32 qpn);
+ 
+ /* Get the net-device corresponding to the given underlay QPN */
+ struct net_device *mlx5i_pkey_get_netdev(struct net_device *netdev, u32 qpn);
+ 
+ /* Parent profile functions */
+ void mlx5i_init(struct mlx5_core_dev *mdev,
+ 		struct net_device *netdev,
+ 		const struct mlx5e_profile *profile,
+ 		void *ppriv);
+ 
+ /* Get child interface nic profile */
+ const struct mlx5e_profile *mlx5i_pkey_get_profile(void);
+ 
++>>>>>>> 4c6c615e3f30 (net/mlx5e: IPoIB, Add PKEY child interface nic profile):drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib.h
  /* Extract mlx5e_priv from IPoIB netdev */
  #define mlx5i_epriv(netdev) ((void *)(((struct mlx5i_priv *)netdev_priv(netdev))->mlx5e_priv))
  
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib.c
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib_vlan.c
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/ipoib.h
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib.c
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib_vlan.c
