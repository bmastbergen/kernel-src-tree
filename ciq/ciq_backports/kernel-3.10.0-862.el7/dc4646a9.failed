nfp: flower: vxlan - ensure no sleep in atomic context

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [netdrv] nfp: flower: vxlan: ensure no sleep in atomic context (John Linville) [1537927]
Rebuild_FUZZ: 97.20%
commit-author John Hurley <john.hurley@netronome.com>
commit dc4646a950153242313ed340f0a404de38b21d5c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/dc4646a9.failed

Functions called by the netevent notifier must be in atomic context.
Change the mutex to spinlock and ensure mem allocations are done with the
atomic flag.
Also, remove unnecessary locking after notifiers are unregistered.

	Signed-off-by: John Hurley <john.hurley@netronome.com>
	Reviewed-by: Simon Horman <simon.horman@netronome.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit dc4646a950153242313ed340f0a404de38b21d5c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/netronome/nfp/flower/cmsg.c
#	drivers/net/ethernet/netronome/nfp/flower/cmsg.h
#	drivers/net/ethernet/netronome/nfp/flower/main.h
#	drivers/net/ethernet/netronome/nfp/flower/offload.c
#	drivers/net/ethernet/netronome/nfp/flower/tunnel_conf.c
* Unmerged path drivers/net/ethernet/netronome/nfp/flower/cmsg.c
* Unmerged path drivers/net/ethernet/netronome/nfp/flower/cmsg.h
* Unmerged path drivers/net/ethernet/netronome/nfp/flower/main.h
* Unmerged path drivers/net/ethernet/netronome/nfp/flower/offload.c
* Unmerged path drivers/net/ethernet/netronome/nfp/flower/tunnel_conf.c
* Unmerged path drivers/net/ethernet/netronome/nfp/flower/cmsg.c
* Unmerged path drivers/net/ethernet/netronome/nfp/flower/cmsg.h
* Unmerged path drivers/net/ethernet/netronome/nfp/flower/main.h
* Unmerged path drivers/net/ethernet/netronome/nfp/flower/offload.c
* Unmerged path drivers/net/ethernet/netronome/nfp/flower/tunnel_conf.c
