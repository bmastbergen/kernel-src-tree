net/mlx5e: IPoIB, Only support regular RQ for now

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [netdrv] mlx5e: IPoIB, Only support regular RQ for now (Don Dutile) [1385325 1499362]
Rebuild_FUZZ: 95.74%
commit-author Saeed Mahameed <saeedm@mellanox.com>
commit 5360fd473c23f18b42722cdb13a1c6ec7acd96ff
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/5360fd47.failed

IPoIB doesn't support striding RQ at the moment, for this
we need to explicitly choose non striding RQ in IPoIB init,
even if the HW supports it.

Fixes: 8f493ffd88ea ("net/mlx5e: IPoIB, RX steering RSS RQTs and TIRs")
	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
(cherry picked from commit 5360fd473c23f18b42722cdb13a1c6ec7acd96ff)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/ipoib.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/ipoib.c
index 4180820bcac0,56bff3540954..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/ipoib.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/ipoib.c
@@@ -44,8 -59,29 +44,34 @@@ static void mlx5i_init(struct mlx5_core
  {
  	struct mlx5e_priv *priv  = mlx5i_epriv(netdev);
  
++<<<<<<< HEAD
 +	priv->ppriv = ppriv;
 +	/*  TODO: init netdev and mlx5e_params here */
++=======
+ 	priv->mdev        = mdev;
+ 	priv->netdev      = netdev;
+ 	priv->profile     = profile;
+ 	priv->ppriv       = ppriv;
+ 
+ 	mlx5e_build_nic_params(mdev, &priv->channels.params, profile->max_nch(mdev));
+ 
+ 	/* Override RQ params as IPoIB supports only LINKED LIST RQ for now */
+ 	mlx5e_set_rq_type_params(mdev, &priv->channels.params, MLX5_WQ_TYPE_LINKED_LIST);
+ 	priv->channels.params.lro_en = false;
+ 
+ 	mutex_init(&priv->state_lock);
+ 
+ 	netdev->hw_features    |= NETIF_F_SG;
+ 	netdev->hw_features    |= NETIF_F_IP_CSUM;
+ 	netdev->hw_features    |= NETIF_F_IPV6_CSUM;
+ 	netdev->hw_features    |= NETIF_F_GRO;
+ 	netdev->hw_features    |= NETIF_F_TSO;
+ 	netdev->hw_features    |= NETIF_F_TSO6;
+ 	netdev->hw_features    |= NETIF_F_RXCSUM;
+ 	netdev->hw_features    |= NETIF_F_RXHASH;
+ 
+ 	netdev->netdev_ops = &mlx5i_netdev_ops;
++>>>>>>> 5360fd473c23 (net/mlx5e: IPoIB, Only support regular RQ for now)
  }
  
  /* Called directly before IPoIB netdevice is destroyed to cleanup SW structs */
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/ipoib.c
