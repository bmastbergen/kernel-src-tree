dma: dw: allow shared interrupts

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [sound] alsa: dma: dw: allow shared interrupts (Jaroslav Kysela) [1463624]
Rebuild_FUZZ: 91.43%
commit-author Andy Shevchenko <andriy.shevchenko@linux.intel.com>
commit 3783cef876e0f24e93a11f1a76cc0b3fe7ea8d94
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/3783cef8.failed

In the PC world is quite possible that devices are sharing the same interrupt
line. The patch prepares dw_dmac driver to such cases.

	Signed-off-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
	Acked-by: Viresh Kumar <viresh.kumar@linaro.org>
	Signed-off-by: Vinod Koul <vinod.koul@intel.com>
(cherry picked from commit 3783cef876e0f24e93a11f1a76cc0b3fe7ea8d94)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/dma/dw_dmac.c
diff --cc drivers/dma/dw_dmac.c
index 2e5deaa82b60,6932645ca1f8..000000000000
--- a/drivers/dma/dw_dmac.c
+++ b/drivers/dma/dw_dmac.c
@@@ -1746,8 -1569,8 +1749,13 @@@ static int dw_probe(struct platform_dev
  	/* Disable BLOCK interrupts as well */
  	channel_clear_bit(dw, MASK.BLOCK, dw->all_chan_mask);
  
++<<<<<<< HEAD:drivers/dma/dw_dmac.c
 +	err = devm_request_irq(&pdev->dev, irq, dw_dma_interrupt, 0,
 +			       "dw_dmac", dw);
++=======
+ 	err = devm_request_irq(chip->dev, chip->irq, dw_dma_interrupt,
+ 			       IRQF_SHARED, "dw_dmac", dw);
++>>>>>>> 3783cef876e0 (dma: dw: allow shared interrupts):drivers/dma/dw/core.c
  	if (err)
  		return err;
  
* Unmerged path drivers/dma/dw_dmac.c
