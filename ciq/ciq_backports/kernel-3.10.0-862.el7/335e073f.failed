klp: remove CONFIG_LIVEPATCH dependency from klp headers

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Jiri Kosina <jkosina@suse.cz>
commit 335e073faacc9d90bee1527fa2550d6df045df63
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/335e073f.failed

There is no need for livepatch.h (generic and arch-specific) to depend
on CONFIG_LIVEPATCH. Remove that superfluous dependency.

	Reported-by: Josh Poimboeuf <jpoimboe@redhat.com>
	Signed-off-by: Jiri Kosina <jkosina@suse.cz>
(cherry picked from commit 335e073faacc9d90bee1527fa2550d6df045df63)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/s390/include/asm/livepatch.h
#	include/linux/livepatch.h
#	tools/objtool/special.h
diff --cc arch/s390/include/asm/livepatch.h
index 7aa799134a11,d5427c78b1b3..000000000000
--- a/arch/s390/include/asm/livepatch.h
+++ b/arch/s390/include/asm/livepatch.h
@@@ -36,8 -35,5 +35,11 @@@ static inline void klp_arch_set_pc(stru
  {
  	regs->psw.addr = ip;
  }
++<<<<<<< HEAD
 +#else
 +#error Live patching support is disabled; check CONFIG_LIVEPATCH
 +#endif
++=======
++>>>>>>> 335e073faacc (klp: remove CONFIG_LIVEPATCH dependency from klp headers)
  
  #endif
diff --cc tools/objtool/special.h
index fad1d092f679,7e68f9558552..000000000000
--- a/tools/objtool/special.h
+++ b/tools/objtool/special.h
@@@ -15,28 -18,26 +15,45 @@@
   * along with this program; if not, see <http://www.gnu.org/licenses/>.
   */
  
 -#ifndef _ASM_X86_LIVEPATCH_H
 -#define _ASM_X86_LIVEPATCH_H
 +#ifndef _SPECIAL_H
 +#define _SPECIAL_H
 +
 +#include <stdbool.h>
 +#include "elf.h"
  
 -#include <asm/setup.h>
 -#include <linux/module.h>
 -#include <linux/ftrace.h>
++<<<<<<< HEAD:tools/objtool/special.h
 +struct special_alt {
 +	struct list_head list;
  
 +	bool group;
 +	bool skip_orig;
 +	bool jump_or_nop;
++=======
+ static inline int klp_check_compiler_support(void)
+ {
+ #ifndef CC_USING_FENTRY
+ 	return 1;
+ #endif
+ 	return 0;
+ }
+ int klp_write_module_reloc(struct module *mod, unsigned long type,
+ 			   unsigned long loc, unsigned long value);
+ 
+ static inline void klp_arch_set_pc(struct pt_regs *regs, unsigned long ip)
+ {
+ 	regs->ip = ip;
+ }
++>>>>>>> 335e073faacc (klp: remove CONFIG_LIVEPATCH dependency from klp headers):arch/x86/include/asm/livepatch.h
 +
 +	struct section *orig_sec;
 +	unsigned long orig_off;
 +
 +	struct section *new_sec;
 +	unsigned long new_off;
 +
 +	unsigned int orig_len, new_len; /* group only */
 +};
 +
 +int special_get_alts(struct elf *elf, struct list_head *alts);
  
 -#endif /* _ASM_X86_LIVEPATCH_H */
 +#endif /* _SPECIAL_H */
* Unmerged path include/linux/livepatch.h
* Unmerged path arch/s390/include/asm/livepatch.h
* Unmerged path include/linux/livepatch.h
* Unmerged path tools/objtool/special.h
