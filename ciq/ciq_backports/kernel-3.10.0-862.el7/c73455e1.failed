scsi: lpfc: FLOGI failures are reported when connected to a private loop.

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [scsi] lpfc: FLOGI failures are reported when connected to a private loop (Dick Kennedy) [1532307]
Rebuild_FUZZ: 94.96%
commit-author James Smart <jsmart2021@gmail.com>
commit c73455e1b5ef165aed82e36ae04e74a71d2d7d5b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/c73455e1.failed

When the HBA is connected to a private loop, the driver reports FLOGI
loop-open failure as functional error. This is an expected condition.

Mark loop-open failure as a warning instead of error.

	Signed-off-by: Dick Kennedy <dick.kennedy@broadcom.com>
	Signed-off-by: James Smart <james.smart@broadcom.com>
	Reviewed-by: Hannes Reinecke <hare@suse.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit c73455e1b5ef165aed82e36ae04e74a71d2d7d5b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/lpfc/lpfc_els.c
diff --cc drivers/scsi/lpfc/lpfc_els.c
index 35b4afdc791c,3a405d35dd7e..000000000000
--- a/drivers/scsi/lpfc/lpfc_els.c
+++ b/drivers/scsi/lpfc/lpfc_els.c
@@@ -1045,9 -1044,14 +1048,20 @@@ stop_rr_fcf_flogi
  		if (lpfc_els_retry(phba, cmdiocb, rspiocb))
  			goto out;
  
++<<<<<<< HEAD
 +		/* FLOGI failure */
 +		lpfc_printf_vlog(vport, KERN_ERR, LOG_ELS,
 +				 "0100 FLOGI failure Status:x%x/x%x TMO:x%x\n",
++=======
+ 		/* If this is not a loop open failure, bail out */
+ 		if (!(irsp->ulpStatus == IOSTAT_LOCAL_REJECT &&
+ 		      ((irsp->un.ulpWord[4] & IOERR_PARAM_MASK) ==
+ 					IOERR_LOOP_OPEN_FAILURE)))
+ 			goto flogifail;
+ 
+ 		lpfc_printf_vlog(vport, KERN_WARNING, LOG_ELS,
+ 				 "0150 FLOGI failure Status:x%x/x%x TMO:x%x\n",
++>>>>>>> c73455e1b5ef (scsi: lpfc: FLOGI failures are reported when connected to a private loop.)
  				 irsp->ulpStatus, irsp->un.ulpWord[4],
  				 irsp->ulpTimeout);
  
* Unmerged path drivers/scsi/lpfc/lpfc_els.c
