net/mlx5e: Rearrange netdevice ops structures

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [netdrv] mlx5e: Rearrange netdevice ops structures (Kamal Heib) [1456694]
Rebuild_FUZZ: 95.35%
commit-author Saeed Mahameed <saeedm@mellanox.com>
commit 706b35834820715d122a984eba2369cae7bf3abd
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/706b3583.failed

Since we are going to allow building the driver without eswitch support,
it would be possible to compile out the sriov netdevice ops struct such
that the basic ops instance will be used for non VF devices too.

Add missing udp tunnel ndos into mlx5e_netdev_ops_basic.

While here, rearrange some ndos in the sriov ops struct and put
vf/eswitch related ndos towards the end of it.

	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
	Reviewed-by: Or Gerlitz <ogerlitz@mellanox.com>
(cherry picked from commit 706b35834820715d122a984eba2369cae7bf3abd)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/en_main.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/en_main.c
index 5a367b6ed375,c2986777a1d8..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_main.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_main.c
@@@ -3143,7 -3705,10 +3143,14 @@@ static const struct net_device_ops mlx5
  	.ndo_set_features        = mlx5e_set_features,
  	.ndo_change_mtu          = mlx5e_change_mtu,
  	.ndo_do_ioctl            = mlx5e_ioctl,
++<<<<<<< HEAD
 +	.extended.ndo_set_tx_maxrate      = mlx5e_set_tx_maxrate,
++=======
+ 	.ndo_set_tx_maxrate      = mlx5e_set_tx_maxrate,
+ 	.ndo_udp_tunnel_add      = mlx5e_add_vxlan_port,
+ 	.ndo_udp_tunnel_del      = mlx5e_del_vxlan_port,
+ 	.ndo_features_check      = mlx5e_features_check,
++>>>>>>> 706b35834820 (net/mlx5e: Rearrange netdevice ops structures)
  #ifdef CONFIG_RFS_ACCEL
  	.ndo_rx_flow_steer	 = mlx5e_rx_flow_steer,
  #endif
@@@ -3168,27 -3733,29 +3175,44 @@@ static const struct net_device_ops mlx5
  	.ndo_set_features        = mlx5e_set_features,
  	.ndo_change_mtu          = mlx5e_change_mtu,
  	.ndo_do_ioctl            = mlx5e_ioctl,
++<<<<<<< HEAD
 +	.extended.ndo_udp_tunnel_add	 = mlx5e_add_vxlan_port,
 +	.extended.ndo_udp_tunnel_del	 = mlx5e_del_vxlan_port,
 +	.extended.ndo_set_tx_maxrate      = mlx5e_set_tx_maxrate,
++=======
+ 	.ndo_set_tx_maxrate      = mlx5e_set_tx_maxrate,
+ 	.ndo_udp_tunnel_add	 = mlx5e_add_vxlan_port,
+ 	.ndo_udp_tunnel_del	 = mlx5e_del_vxlan_port,
++>>>>>>> 706b35834820 (net/mlx5e: Rearrange netdevice ops structures)
  	.ndo_features_check      = mlx5e_features_check,
  #ifdef CONFIG_RFS_ACCEL
  	.ndo_rx_flow_steer	 = mlx5e_rx_flow_steer,
  #endif
+ 	.ndo_tx_timeout          = mlx5e_tx_timeout,
+ 	.ndo_xdp		 = mlx5e_xdp,
+ #ifdef CONFIG_NET_POLL_CONTROLLER
+ 	.ndo_poll_controller     = mlx5e_netpoll,
+ #endif
+ 	/* SRIOV E-Switch NDOs */
  	.ndo_set_vf_mac          = mlx5e_set_vf_mac,
 -	.ndo_set_vf_vlan         = mlx5e_set_vf_vlan,
  	.ndo_set_vf_spoofchk     = mlx5e_set_vf_spoofchk,
 -	.ndo_set_vf_trust        = mlx5e_set_vf_trust,
 +	.extended.ndo_set_vf_trust        = mlx5e_set_vf_trust,
 +	.extended.ndo_set_vf_vlan = mlx5e_set_vf_vlan,
  	.ndo_set_vf_rate         = mlx5e_set_vf_rate,
  	.ndo_get_vf_config       = mlx5e_get_vf_config,
  	.ndo_set_vf_link_state   = mlx5e_set_vf_link_state,
  	.ndo_get_vf_stats        = mlx5e_get_vf_stats,
++<<<<<<< HEAD
 +	.ndo_tx_timeout          = mlx5e_tx_timeout,
 +#ifdef CONFIG_NET_POLL_CONTROLLER
 +	.ndo_poll_controller     = mlx5e_netpoll,
 +#endif
 +	.extended.ndo_has_offload_stats	 = mlx5e_has_offload_stats,
 +	.extended.ndo_get_offload_stats	 = mlx5e_get_offload_stats,
++=======
+ 	.ndo_has_offload_stats	 = mlx5e_has_offload_stats,
+ 	.ndo_get_offload_stats	 = mlx5e_get_offload_stats,
++>>>>>>> 706b35834820 (net/mlx5e: Rearrange netdevice ops structures)
  };
  
  static int mlx5e_check_required_hca_cap(struct mlx5_core_dev *mdev)
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en_main.c
