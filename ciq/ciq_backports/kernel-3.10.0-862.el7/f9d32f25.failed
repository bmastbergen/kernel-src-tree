media: core: Don't use i2c_client->driver

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Lars-Peter Clausen <lars@metafoo.de>
commit f9d32f25084ce7a27f966a0e71eae6ee0fe2f5ab
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/f9d32f25.failed

The 'driver' field of the i2c_client struct is redundant and is going to be
removed. The results of the expressions 'client->driver.driver->field' and
'client->dev.driver->field' are identical, so replace all occurrences of the
former with the later.

	Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>
	Acked-by: Hans Verkuil <hans.verkuil@cisco.com>
	Signed-off-by: Wolfram Sang <wsa@the-dreams.de>
(cherry picked from commit f9d32f25084ce7a27f966a0e71eae6ee0fe2f5ab)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/media/v4l2-core/v4l2-common.c
diff --cc drivers/media/v4l2-core/v4l2-common.c
index 3fed63f4e026,433d6d77942e..000000000000
--- a/drivers/media/v4l2-core/v4l2-common.c
+++ b/drivers/media/v4l2-core/v4l2-common.c
@@@ -290,7 -236,8 +290,12 @@@ void v4l2_i2c_subdev_init(struct v4l2_s
  	v4l2_subdev_init(sd, ops);
  	sd->flags |= V4L2_SUBDEV_FL_IS_I2C;
  	/* the owner is the same as the i2c_client's driver owner */
++<<<<<<< HEAD
 +	sd->owner = client->driver->driver.owner;
++=======
+ 	sd->owner = client->dev.driver->owner;
+ 	sd->dev = &client->dev;
++>>>>>>> f9d32f25084c (media: core: Don't use i2c_client->driver)
  	/* i2c_client and v4l2_subdev point to one another */
  	v4l2_set_subdevdata(sd, client);
  	i2c_set_clientdata(client, sd);
diff --git a/drivers/media/v4l2-core/tuner-core.c b/drivers/media/v4l2-core/tuner-core.c
index ddc9379eb276..4133af01774a 100644
--- a/drivers/media/v4l2-core/tuner-core.c
+++ b/drivers/media/v4l2-core/tuner-core.c
@@ -43,7 +43,7 @@
 
 #define UNSET (-1U)
 
-#define PREFIX (t->i2c->driver->driver.name)
+#define PREFIX (t->i2c->dev.driver->name)
 
 /*
  * Driver modprobe parameters
@@ -452,7 +452,7 @@ static void set_type(struct i2c_client *c, unsigned int type,
 	}
 
 	tuner_dbg("%s %s I2C addr 0x%02x with type %d used for 0x%02x\n",
-		  c->adapter->name, c->driver->driver.name, c->addr << 1, type,
+		  c->adapter->name, c->dev.driver->name, c->addr << 1, type,
 		  t->mode_mask);
 	return;
 
@@ -556,7 +556,7 @@ static void tuner_lookup(struct i2c_adapter *adap,
 		int mode_mask;
 
 		if (pos->i2c->adapter != adap ||
-		    strcmp(pos->i2c->driver->driver.name, "tuner"))
+		    strcmp(pos->i2c->dev.driver->name, "tuner"))
 			continue;
 
 		mode_mask = pos->mode_mask;
* Unmerged path drivers/media/v4l2-core/v4l2-common.c
diff --git a/include/media/v4l2-common.h b/include/media/v4l2-common.h
index 1d93c48cb371..420ca3e8f6d7 100644
--- a/include/media/v4l2-common.h
+++ b/include/media/v4l2-common.h
@@ -35,7 +35,7 @@
 	printk(level "%s %d-%04x: " fmt, name, i2c_adapter_id(adapter), addr , ## arg)
 
 #define v4l_client_printk(level, client, fmt, arg...)			    \
-	v4l_printk(level, (client)->driver->driver.name, (client)->adapter, \
+	v4l_printk(level, (client)->dev.driver->name, (client)->adapter, \
 		   (client)->addr, fmt , ## arg)
 
 #define v4l_err(client, fmt, arg...) \
