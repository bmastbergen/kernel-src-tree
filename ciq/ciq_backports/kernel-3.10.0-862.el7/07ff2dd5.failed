xprtrdma: Refactor rpcrdma_reply_handler()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Chuck Lever <chuck.lever@oracle.com>
commit 07ff2dd510d8c5b1166827df7686036283be10e0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/07ff2dd5.failed

Refactor the reply handler's transport header decoding logic to make
it easier to understand and update.

Convert some of the handler to use xdr_streams, which will enable
stricter validation of input data and enable the eventual addition
of support for new combinations of chunks, such as "Write + Reply"
or "PZRC + normal Read".

	Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
	Signed-off-by: Anna Schumaker <Anna.Schumaker@Netapp.com>
(cherry picked from commit 07ff2dd510d8c5b1166827df7686036283be10e0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/sunrpc/xprtrdma/rpc_rdma.c
diff --cc net/sunrpc/xprtrdma/rpc_rdma.c
index 24f58c7b3106,56f22773fa4b..000000000000
--- a/net/sunrpc/xprtrdma/rpc_rdma.c
+++ b/net/sunrpc/xprtrdma/rpc_rdma.c
@@@ -1019,11 -1160,8 +1136,16 @@@ rpcrdma_reply_handler(struct work_struc
  	p++;	/* credits */
  	proc = *p++;
  
++<<<<<<< HEAD
 +	headerp = rdmab_to_msg(rep->rr_rdmabuf);
 +#if defined(CONFIG_SUNRPC_BACKCHANNEL)
 +	if (rpcrdma_is_bcall(headerp))
 +		goto out_bcall;
 +#endif
++=======
+ 	if (rpcrdma_is_bcall(r_xprt, rep, xid, proc))
+ 		return;
++>>>>>>> 07ff2dd510d8 (xprtrdma: Refactor rpcrdma_reply_handler())
  
  	/* Match incoming rpcrdma_rep to an rpcrdma_req to
  	 * get context for handling any incoming chunks.
* Unmerged path net/sunrpc/xprtrdma/rpc_rdma.c
