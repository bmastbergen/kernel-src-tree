tracing: Call clear_boot_tracer() at lateinit_sync

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Steven Rostedt (VMware) <rostedt@goodmis.org>
commit 4bb0f0e73c8c30917d169c4a0f1ac083690c545b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/4bb0f0e7.failed

The clear_boot_tracer function is used to reset the default_bootup_tracer
string to prevent it from being accessed after boot, as it originally points
to init data. But since clear_boot_tracer() is called via the
init_lateinit() call, it races with the initcall for registering the hwlat
tracer. If someone adds "ftrace=hwlat" to the kernel command line, depending
on how the linker sets up the text, the saved command line may be cleared,
and the hwlat tracer never is initialized.

Simply have the clear_boot_tracer() be called by initcall_lateinit_sync() as
that's for tasks to be called after lateinit.

Link: https://bugzilla.kernel.org/show_bug.cgi?id=196551

	Cc: stable@vger.kernel.org
Fixes: e7c15cd8a ("tracing: Added hardware latency tracer")
	Reported-by: Zamir SUN <sztsian@gmail.com>
	Signed-off-by: Steven Rostedt (VMware) <rostedt@goodmis.org>
(cherry picked from commit 4bb0f0e73c8c30917d169c4a0f1ac083690c545b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	kernel/trace/trace.c
diff --cc kernel/trace/trace.c
index a14bc0a4b959,784fb43b2abe..000000000000
--- a/kernel/trace/trace.c
+++ b/kernel/trace/trace.c
@@@ -6716,6 -8406,5 +6716,11 @@@ __init static int clear_boot_tracer(voi
  	return 0;
  }
  
++<<<<<<< HEAD
 +early_initcall(tracer_alloc_buffers);
 +fs_initcall(tracer_init_debugfs);
 +late_initcall(clear_boot_tracer);
++=======
+ fs_initcall(tracer_init_tracefs);
+ late_initcall_sync(clear_boot_tracer);
++>>>>>>> 4bb0f0e73c8c (tracing: Call clear_boot_tracer() at lateinit_sync)
* Unmerged path kernel/trace/trace.c
