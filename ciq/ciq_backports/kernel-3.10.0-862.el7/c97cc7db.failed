Revert "tools/power turbostat: stop migrating, unless '-m'"

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Len Brown <len.brown@intel.com>
commit c97cc7dbce2fe6f46e137f4b040f915a0181ee85
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/c97cc7db.failed

This reverts commit c91fc8519d87715a3a173475ea3778794c139996.

That change caused a C6 and PC6 residency regression on large idle systems.

Users also complained about new output indicating jitter:

turbostat: cpu6 jitter 3794 9142

	Signed-off-by: Len Brown <len.brown@intel.com>
	Cc: 4.13+ <stable@vger.kernel.org> # v4.13+
	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit c97cc7dbce2fe6f46e137f4b040f915a0181ee85)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/power/x86/turbostat/turbostat.c
diff --cc tools/power/x86/turbostat/turbostat.c
index 45d11f2a84ea,bd9c6b31a504..000000000000
--- a/tools/power/x86/turbostat/turbostat.c
+++ b/tools/power/x86/turbostat/turbostat.c
@@@ -4484,9 -5002,9 +4484,13 @@@ void cmdline(int argc, char **argv
  		{"help",	no_argument,		0, 'h'},
  		{"hide",	required_argument,	0, 'H'},	// meh, -h taken by --help
  		{"Joules",	no_argument,		0, 'J'},
++<<<<<<< HEAD
++=======
+ 		{"list",	no_argument,		0, 'l'},
++>>>>>>> c97cc7dbce2f (Revert "tools/power turbostat: stop migrating, unless '-m'")
  		{"out",		required_argument,	0, 'o'},
 -		{"quiet",	no_argument,		0, 'q'},
 +		{"Package",	no_argument,		0, 'p'},
 +		{"processor",	no_argument,		0, 'p'},
  		{"show",	required_argument,	0, 's'},
  		{"Summary",	no_argument,		0, 'S'},
  		{"TCC",		required_argument,	0, 'T'},
@@@ -4496,7 -5014,7 +4500,11 @@@
  
  	progname = argv[0];
  
++<<<<<<< HEAD
 +	while ((opt = getopt_long_only(argc, argv, "+C:c:Ddvhi:JM:m:o:PpST:V",
++=======
+ 	while ((opt = getopt_long_only(argc, argv, "+C:c:Ddhi:JM:m:o:qST:v",
++>>>>>>> c97cc7dbce2f (Revert "tools/power turbostat: stop migrating, unless '-m'")
  				long_options, &option_index)) != -1) {
  		switch (opt) {
  		case 'a':
@@@ -4533,6 -5053,10 +4541,13 @@@
  		case 'J':
  			rapl_joules++;
  			break;
++<<<<<<< HEAD
++=======
+ 		case 'l':
+ 			list_header_only++;
+ 			quiet++;
+ 			break;
++>>>>>>> c97cc7dbce2f (Revert "tools/power turbostat: stop migrating, unless '-m'")
  		case 'o':
  			outf = fopen_or_die(optarg, "w");
  			break;
* Unmerged path tools/power/x86/turbostat/turbostat.c
