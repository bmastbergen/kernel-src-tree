net_sched: act: pick a different type for act_xt

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author WANG Cong <xiyou.wangcong@gmail.com>
commit 6c80563c2fdd9b32e37e2570e5b1ba9befd591c0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/6c80563c.failed

In tcf_register_action() we check either ->type or ->kind to see if
there is an existing action registered, but ipt action registers two
actions with same type but different kinds. They should have different
types too.

	Cc: Jamal Hadi Salim <jhs@mojatatu.com>
	Cc: David S. Miller <davem@davemloft.net>
	Signed-off-by: Cong Wang <xiyou.wangcong@gmail.com>
	Signed-off-by: Jamal Hadi Salim <jhs@mojatatu.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 6c80563c2fdd9b32e37e2570e5b1ba9befd591c0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/sched/act_ipt.c
diff --cc net/sched/act_ipt.c
index 9326bf743846,bc9f498f6fef..000000000000
--- a/net/sched/act_ipt.c
+++ b/net/sched/act_ipt.c
@@@ -275,7 -297,9 +275,13 @@@ static struct tc_action_ops act_ipt_op
  
  static struct tc_action_ops act_xt_ops = {
  	.kind		=	"xt",
++<<<<<<< HEAD
 +	.type		=	TCA_ACT_IPT,
++=======
+ 	.hinfo		=	&ipt_hash_info,
+ 	.type		=	TCA_ACT_XT,
+ 	.capab		=	TCA_CAP_NONE,
++>>>>>>> 6c80563c2fdd (net_sched: act: pick a different type for act_xt)
  	.owner		=	THIS_MODULE,
  	.act		=	tcf_ipt,
  	.dump		=	tcf_ipt_dump,
diff --git a/include/uapi/linux/tc_act/tc_ipt.h b/include/uapi/linux/tc_act/tc_ipt.h
index 3241659e2123..7c6e155dd981 100644
--- a/include/uapi/linux/tc_act/tc_ipt.h
+++ b/include/uapi/linux/tc_act/tc_ipt.h
@@ -4,6 +4,7 @@
 #include <linux/pkt_cls.h>
 
 #define TCA_ACT_IPT 6
+#define TCA_ACT_XT 10
 
 enum {
 	TCA_IPT_UNSPEC,
* Unmerged path net/sched/act_ipt.c
