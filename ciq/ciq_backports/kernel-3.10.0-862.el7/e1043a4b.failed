xen-netfront, xen-netback: Use correct minimum MTU values

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Mohammed Gamal <mgamal@redhat.com>
commit e1043a4bb9fce6cfc7d55c5767e429a18ac8c4eb
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/e1043a4b.failed

RFC791 specifies the minimum MTU to be 68, while xen-net{front|back}
drivers use a minimum value of 0.

When set MTU to 0~67 with xen_net{front|back} driver, the network
will become unreachable immediately, the guest can no longer be pinged.

xen_net{front|back} should not allow the user to set this value which causes
network problems.

	Reported-by: Chen Shi <cheshi@redhat.com>
	Signed-off-by: Mohammed Gamal <mgamal@redhat.com>
	Acked-by: Wei Liu <wei.liu2@citrix.com>
	Reviewed-by: Boris Ostrovsky <boris.ostrovsky@oracle.com>
	Signed-off-by: Boris Ostrovsky <boris.ostrovsky@oracle.com>
(cherry picked from commit e1043a4bb9fce6cfc7d55c5767e429a18ac8c4eb)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/xen-netback/interface.c
#	drivers/net/xen-netfront.c
diff --cc drivers/net/xen-netback/interface.c
index 540a796593a3,4491ca5aee90..000000000000
--- a/drivers/net/xen-netback/interface.c
+++ b/drivers/net/xen-netback/interface.c
@@@ -284,6 -486,9 +284,12 @@@ struct xenvif *xenvif_alloc(struct devi
  
  	dev->tx_queue_len = XENVIF_QUEUE_LENGTH;
  
++<<<<<<< HEAD
++=======
+ 	dev->min_mtu = ETH_MIN_MTU;
+ 	dev->max_mtu = ETH_MAX_MTU - VLAN_ETH_HLEN;
+ 
++>>>>>>> e1043a4bb9fc (xen-netfront, xen-netback: Use correct minimum MTU values)
  	/*
  	 * Initialise a dummy MAC address. We choose the numerically
  	 * largest non-broadcast address to prevent the address getting
diff --cc drivers/net/xen-netfront.c
index ff2535f43f28,8b8689c6d887..000000000000
--- a/drivers/net/xen-netfront.c
+++ b/drivers/net/xen-netfront.c
@@@ -1307,11 -1315,11 +1307,17 @@@ static struct net_device *xennet_create
           */
  	netdev->features |= netdev->hw_features;
  
++<<<<<<< HEAD
 +	SET_ETHTOOL_OPS(netdev, &xennet_ethtool_ops);
++=======
+ 	netdev->ethtool_ops = &xennet_ethtool_ops;
+ 	netdev->min_mtu = ETH_MIN_MTU;
+ 	netdev->max_mtu = XEN_NETIF_MAX_TX_SIZE;
++>>>>>>> e1043a4bb9fc (xen-netfront, xen-netback: Use correct minimum MTU values)
  	SET_NETDEV_DEV(netdev, &dev->dev);
  
 +	netif_set_gso_max_size(netdev, XEN_NETIF_MAX_TX_SIZE - MAX_TCP_HEADER);
 +
  	np->netdev = netdev;
  
  	netif_carrier_off(netdev);
* Unmerged path drivers/net/xen-netback/interface.c
* Unmerged path drivers/net/xen-netfront.c
