geneve: fix incorrect setting of UDP checksum flag

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Girish Moodalbail <girish.moodalbail@oracle.com>
commit 5e0740c445e6ae4026f5e52456ff8d0be9725183
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/5e0740c4.failed

Creating a geneve link with 'udpcsum' set results in a creation of link
for which UDP checksum will NOT be computed on outbound packets, as can
be seen below.

11: gen0: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN
    link/ether c2:85:27:b6:b4:15 brd ff:ff:ff:ff:ff:ff promiscuity 0
    geneve id 200 remote 192.168.13.1 dstport 6081 noudpcsum

Similarly, creating a link with 'noudpcsum' set results in a creation
of link for which UDP checksum will be computed on outbound packets.

Fixes: 9b4437a5b870 ("geneve: Unify LWT and netdev handling.")
	Signed-off-by: Girish Moodalbail <girish.moodalbail@oracle.com>
	Acked-by: Pravin B Shelar <pshelar@ovn.org>
	Acked-by: Lance Richardson <lrichard@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 5e0740c445e6ae4026f5e52456ff8d0be9725183)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/geneve.c
diff --cc drivers/net/geneve.c
index c4c93ccffa85,dec5d563ab19..000000000000
--- a/drivers/net/geneve.c
+++ b/drivers/net/geneve.c
@@@ -1374,8 -1244,8 +1374,13 @@@ static int geneve_newlink(struct net *n
  		metadata = true;
  
  	if (data[IFLA_GENEVE_UDP_CSUM] &&
++<<<<<<< HEAD
 +	    !nla_get_u8(data[IFLA_GENEVE_UDP_CSUM]))
 +		flags |= GENEVE_F_UDP_ZERO_CSUM_TX;
++=======
+ 	    nla_get_u8(data[IFLA_GENEVE_UDP_CSUM]))
+ 		info.key.tun_flags |= TUNNEL_CSUM;
++>>>>>>> 5e0740c445e6 (geneve: fix incorrect setting of UDP checksum flag)
  
  	if (data[IFLA_GENEVE_UDP_ZERO_CSUM6_TX] &&
  	    nla_get_u8(data[IFLA_GENEVE_UDP_ZERO_CSUM6_TX]))
* Unmerged path drivers/net/geneve.c
