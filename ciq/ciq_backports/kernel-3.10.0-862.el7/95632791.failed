drivers/net/ethernet/mellanox/mlx5/core/en_main.c: fix build with gcc-4.4.4

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [netdrv] ethernet/mellanox/mlx5/core/en_main.c: fix build with gcc-4.4.4 (Don Dutile) [1456694 1499362]
Rebuild_FUZZ: 91.30%
commit-author Andrew Morton <akpm@linux-foundation.org>
commit 956327913c2e23048d7a586414bafe7ec0c2a887
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/95632791.failed

drivers/net/ethernet/mellanox/mlx5/core/en_main.c: In function 'mlx5e_redirect_rqts':
drivers/net/ethernet/mellanox/mlx5/core/en_main.c:2210: error: unknown field 'rqn' specified in initializer
drivers/net/ethernet/mellanox/mlx5/core/en_main.c:2211: warning: missing braces around initializer
drivers/net/ethernet/mellanox/mlx5/core/en_main.c:2211: warning: (near initialization for 'direct_rrp.<anonymous>')
drivers/net/ethernet/mellanox/mlx5/core/en_main.c: In function 'mlx5e_redirect_rqts_to_channels':
drivers/net/ethernet/mellanox/mlx5/core/en_main.c:2227: error: unknown field 'rss' specified in initializer
drivers/net/ethernet/mellanox/mlx5/core/en_main.c:2227: warning: missing braces around initializer
drivers/net/ethernet/mellanox/mlx5/core/en_main.c:2227: warning: (near initialization for 'rrp.<anonymous>')
drivers/net/ethernet/mellanox/mlx5/core/en_main.c:2227: warning: initialization makes integer from pointer without a cast
drivers/net/ethernet/mellanox/mlx5/core/en_main.c:2228: error: unknown field 'rss' specified in initializer
drivers/net/ethernet/mellanox/mlx5/core/en_main.c:2229: warning: excess elements in struct initializer
drivers/net/ethernet/mellanox/mlx5/core/en_main.c:2229: warning: (near initialization for 'rrp')
drivers/net/ethernet/mellanox/mlx5/core/en_main.c: In function 'mlx5e_redirect_rqts_to_drop':
drivers/net/ethernet/mellanox/mlx5/core/en_main.c:2238: error: unknown field 'rqn' specified in initializer
drivers/net/ethernet/mellanox/mlx5/core/en_main.c:2239: warning: missing braces around initializer
drivers/net/ethernet/mellanox/mlx5/core/en_main.c:2239: warning: (near initialization for 'drop_rrp.<anonymous>')

gcc-4.4.4 has issues with anonymous union initializers.  Work around this.

	Cc: Saeed Mahameed <saeedm@mellanox.com>
	Cc: Tariq Toukan <tariqt@mellanox.com>
	Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 956327913c2e23048d7a586414bafe7ec0c2a887)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/en_main.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/en_main.c
index fc92406a15c4,ec389b1b51cb..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_main.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_main.c
@@@ -1946,21 -2199,59 +1946,64 @@@ static void mlx5e_redirect_rqts(struct 
  	int ix;
  
  	if (priv->indir_rqt.enabled) {
 -		/* RSS RQ table */
  		rqtn = priv->indir_rqt.rqtn;
 -		mlx5e_redirect_rqt(priv, rqtn, MLX5E_INDIR_RQT_SIZE, rrp);
 +		mlx5e_redirect_rqt(priv, rqtn, MLX5E_INDIR_RQT_SIZE, 0);
  	}
  
++<<<<<<< HEAD
 +	for (ix = 0; ix < priv->params.num_channels; ix++) {
++=======
+ 	for (ix = 0; ix < priv->profile->max_nch(priv->mdev); ix++) {
+ 		struct mlx5e_redirect_rqt_param direct_rrp = {
+ 			.is_rss = false,
+ 			{
+ 				.rqn    = mlx5e_get_direct_rqn(priv, ix, rrp)
+ 			},
+ 		};
+ 
+ 		/* Direct RQ Tables */
++>>>>>>> 956327913c2e (drivers/net/ethernet/mellanox/mlx5/core/en_main.c: fix build with gcc-4.4.4)
  		if (!priv->direct_tir[ix].rqt.enabled)
  			continue;
 -
  		rqtn = priv->direct_tir[ix].rqt.rqtn;
 -		mlx5e_redirect_rqt(priv, rqtn, 1, direct_rrp);
 +		mlx5e_redirect_rqt(priv, rqtn, 1, ix);
  	}
  }
  
 -static void mlx5e_redirect_rqts_to_channels(struct mlx5e_priv *priv,
 -					    struct mlx5e_channels *chs)
 +static void mlx5e_build_tir_ctx_lro(void *tirc, struct mlx5e_priv *priv)
  {
++<<<<<<< HEAD
 +	if (!priv->params.lro_en)
++=======
+ 	struct mlx5e_redirect_rqt_param rrp = {
+ 		.is_rss        = true,
+ 		{
+ 			.rss = {
+ 				.channels  = chs,
+ 				.hfunc     = chs->params.rss_hfunc,
+ 			}
+ 		},
+ 	};
+ 
+ 	mlx5e_redirect_rqts(priv, rrp);
+ }
+ 
+ static void mlx5e_redirect_rqts_to_drop(struct mlx5e_priv *priv)
+ {
+ 	struct mlx5e_redirect_rqt_param drop_rrp = {
+ 		.is_rss = false,
+ 		{
+ 			.rqn = priv->drop_rq.rqn,
+ 		},
+ 	};
+ 
+ 	mlx5e_redirect_rqts(priv, drop_rrp);
+ }
+ 
+ static void mlx5e_build_tir_ctx_lro(struct mlx5e_params *params, void *tirc)
+ {
+ 	if (!params->lro_en)
++>>>>>>> 956327913c2e (drivers/net/ethernet/mellanox/mlx5/core/en_main.c: fix build with gcc-4.4.4)
  		return;
  
  #define ROUGH_MAX_L2_L3_HDR_SZ 256
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en_main.c
