scsi: cxlflash: Fix power-of-two validations

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [scsi] cxlflash: Fix power-of-two validations (Gustavo Duarte) [1456494]
Rebuild_FUZZ: 92.68%
commit-author Matthew R. Ochs <mrochs@linux.vnet.ibm.com>
commit cd41e18daf1a21fea5a195a5a74c97c6b183c15a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/cd41e18d.failed

Validation statements to enforce assumptions about specific defines are not
being evaluated by the compiler due to the fact that they reside in a routine
that is not used. To activate them, call the routine as part of module
initialization. As an additional, related cleanup, remove the now-defunct
CXLFLASH_NUM_CMDS.

	Signed-off-by: Matthew R. Ochs <mrochs@linux.vnet.ibm.com>
	Signed-off-by: Uma Krishnan <ukrishn@linux.vnet.ibm.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit cd41e18daf1a21fea5a195a5a74c97c6b183c15a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/cxlflash/common.h
#	drivers/scsi/cxlflash/main.c
diff --cc drivers/scsi/cxlflash/common.h
index 811927d91c5c,455fd4dffac8..000000000000
--- a/drivers/scsi/cxlflash/common.h
+++ b/drivers/scsi/cxlflash/common.h
@@@ -56,7 -61,11 +50,12 @@@ extern const struct file_operations cxl
  
  static inline void check_sizes(void)
  {
++<<<<<<< HEAD
 +	BUILD_BUG_ON_NOT_POWER_OF_2(CXLFLASH_NUM_CMDS);
++=======
+ 	BUILD_BUG_ON_NOT_POWER_OF_2(CXLFLASH_NUM_FC_PORTS_PER_BANK);
+ 	BUILD_BUG_ON_NOT_POWER_OF_2(CXLFLASH_MAX_CMDS);
++>>>>>>> cd41e18daf1a (scsi: cxlflash: Fix power-of-two validations)
  }
  
  /* AFU defines a fixed size of 4K for command buffers (borrow 4K page define) */
diff --cc drivers/scsi/cxlflash/main.c
index c68badcfa77f,f5c952c953f7..000000000000
--- a/drivers/scsi/cxlflash/main.c
+++ b/drivers/scsi/cxlflash/main.c
@@@ -2605,8 -2847,7 +2605,12 @@@ static struct pci_driver cxlflash_drive
   */
  static int __init init_cxlflash(void)
  {
++<<<<<<< HEAD
 +	pr_info("%s: %s\n", __func__, CXLFLASH_ADAPTER_NAME);
 +
++=======
+ 	check_sizes();
++>>>>>>> cd41e18daf1a (scsi: cxlflash: Fix power-of-two validations)
  	cxlflash_list_init();
  
  	return pci_register_driver(&cxlflash_driver);
* Unmerged path drivers/scsi/cxlflash/common.h
* Unmerged path drivers/scsi/cxlflash/main.c
