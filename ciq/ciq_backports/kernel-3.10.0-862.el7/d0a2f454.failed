IB/hfi1: Mask out A bit from psn trace

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Don Hiatt <don.hiatt@intel.com>
commit d0a2f454713a42447ee4007582c0e43c47bcf230
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/d0a2f454.failed

The trace logic prior to the fixes below used to mask the
A bit from the psn. It now mistakenly displays the A bit,
which is already displayed separately.

Fix by adding the appropriate mask to the psn tracing.

Fixes: 228d2af1b723 ("IB/hfi1: Separate input/output header tracing")
Fixes: 863cf89d472f ("IB/hfi1: Add 16B trace support")
	Reviewed-by: Mike Marciniszyn <mike.marciniszyn@intel.com>
	Signed-off-by: Don Hiatt <don.hiatt@intel.com>
	Signed-off-by: Dennis Dalessandro <dennis.dalessandro@intel.com>
	Signed-off-by: Doug Ledford <dledford@redhat.com>
(cherry picked from commit d0a2f454713a42447ee4007582c0e43c47bcf230)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/hw/hfi1/trace.c
diff --cc drivers/infiniband/hw/hfi1/trace.c
index b80b74d0c252,9749ec9dd9f2..000000000000
--- a/drivers/infiniband/hw/hfi1/trace.c
+++ b/drivers/infiniband/hw/hfi1/trace.c
@@@ -107,8 -158,22 +107,26 @@@ void hfi1_trace_parse_bth(struct ib_oth
  	*qpn = ib_bth_get_qpn(ohdr);
  }
  
++<<<<<<< HEAD
++=======
+ void hfi1_trace_parse_16b_bth(struct ib_other_headers *ohdr,
+ 			      u8 *ack, u8 *mig, u8 *opcode,
+ 			      u8 *pad, u8 *se, u8 *tver,
+ 			      u32 *psn, u32 *qpn)
+ {
+ 	*ack = ib_bth_get_ackreq(ohdr);
+ 	*mig = ib_bth_get_migreq(ohdr);
+ 	*opcode = ib_bth_get_opcode(ohdr);
+ 	*pad = ib_bth_get_pad(ohdr);
+ 	*se = ib_bth_get_se(ohdr);
+ 	*tver = ib_bth_get_tver(ohdr);
+ 	*psn = mask_psn(ib_bth_get_psn(ohdr));
+ 	*qpn = ib_bth_get_qpn(ohdr);
+ }
+ 
++>>>>>>> d0a2f454713a (IB/hfi1: Mask out A bit from psn trace)
  void hfi1_trace_parse_9b_hdr(struct ib_header *hdr, bool sc5,
 +			     struct ib_other_headers **ohdr,
  			     u8 *lnh, u8 *lver, u8 *sl, u8 *sc,
  			     u16 *len, u32 *dlid, u32 *slid)
  {
* Unmerged path drivers/infiniband/hw/hfi1/trace.c
