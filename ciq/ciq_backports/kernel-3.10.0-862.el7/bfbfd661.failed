IB/core: Rename ib_query_ah to rdma_query_ah

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Dasaratharaman Chandramouli <dasaratharaman.chandramouli@intel.com>
commit bfbfd661c9ea2cceb5bb4de8b280ac8a37cf68c2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/bfbfd661.failed

Rename ib_query_ah to rdma_query_ah so its in sync with the
rename of the ib address handle attribute

	Reviewed-by: Ira Weiny <ira.weiny@intel.com>
	Reviewed-by: Don Hiatt <don.hiatt@intel.com>
	Reviewed-by: Sean Hefty <sean.hefty@intel.com>
	Signed-off-by: Dasaratharaman Chandramouli <dasaratharaman.chandramouli@intel.com>
	Signed-off-by: Doug Ledford <dledford@redhat.com>
(cherry picked from commit bfbfd661c9ea2cceb5bb4de8b280ac8a37cf68c2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/core/verbs.c
#	include/rdma/ib_verbs.h
diff --cc drivers/infiniband/core/verbs.c
index 207e5c2457cc,35efff65f340..000000000000
--- a/drivers/infiniband/core/verbs.c
+++ b/drivers/infiniband/core/verbs.c
@@@ -577,9 -577,9 +577,13 @@@ int ib_modify_ah(struct ib_ah *ah, stru
  		ah->device->modify_ah(ah, ah_attr) :
  		-ENOSYS;
  }
 -EXPORT_SYMBOL(rdma_modify_ah);
 +EXPORT_SYMBOL(ib_modify_ah);
  
++<<<<<<< HEAD
 +int ib_query_ah(struct ib_ah *ah, struct ib_ah_attr *ah_attr)
++=======
+ int rdma_query_ah(struct ib_ah *ah, struct rdma_ah_attr *ah_attr)
++>>>>>>> bfbfd661c9ea (IB/core: Rename ib_query_ah to rdma_query_ah)
  {
  	return ah->device->query_ah ?
  		ah->device->query_ah(ah, ah_attr) :
diff --cc include/rdma/ib_verbs.h
index 767ceffc3be4,16fd94026d49..000000000000
--- a/include/rdma/ib_verbs.h
+++ b/include/rdma/ib_verbs.h
@@@ -2760,16 -2784,16 +2760,20 @@@ struct ib_ah *ib_create_ah_from_wc(stru
   * @ah_attr: The new address vector attributes to associate with the
   *   address handle.
   */
 -int rdma_modify_ah(struct ib_ah *ah, struct rdma_ah_attr *ah_attr);
 +int ib_modify_ah(struct ib_ah *ah, struct ib_ah_attr *ah_attr);
  
  /**
-  * ib_query_ah - Queries the address vector associated with an address
+  * rdma_query_ah - Queries the address vector associated with an address
   *   handle.
   * @ah: The address handle to query.
   * @ah_attr: The address vector attributes associated with the address
   *   handle.
   */
++<<<<<<< HEAD
 +int ib_query_ah(struct ib_ah *ah, struct ib_ah_attr *ah_attr);
++=======
+ int rdma_query_ah(struct ib_ah *ah, struct rdma_ah_attr *ah_attr);
++>>>>>>> bfbfd661c9ea (IB/core: Rename ib_query_ah to rdma_query_ah)
  
  /**
   * ib_destroy_ah - Destroys an address handle.
diff --git a/drivers/infiniband/core/mad.c b/drivers/infiniband/core/mad.c
index 8a2ceb4ddaa2..43dd0fa79eae 100644
--- a/drivers/infiniband/core/mad.c
+++ b/drivers/infiniband/core/mad.c
@@ -1847,7 +1847,7 @@ static inline int rcv_has_same_gid(const struct ib_mad_agent_private *mad_agent_
 		/* both requests, or both responses. GIDs different */
 		return 0;
 
-	if (ib_query_ah(wr->send_buf.ah, &attr))
+	if (rdma_query_ah(wr->send_buf.ah, &attr))
 		/* Assume not equal, to avoid false positives. */
 		return 0;
 
diff --git a/drivers/infiniband/core/mad_rmpp.c b/drivers/infiniband/core/mad_rmpp.c
index 382941b46e43..ff8049a3b046 100644
--- a/drivers/infiniband/core/mad_rmpp.c
+++ b/drivers/infiniband/core/mad_rmpp.c
@@ -867,7 +867,7 @@ static int init_newwin(struct ib_mad_send_wr_private *mad_send_wr)
 		    (rmpp_recv->method & IB_MGMT_METHOD_RESP))
 			continue;
 
-		if (ib_query_ah(mad_send_wr->send_buf.ah, &ah_attr))
+		if (rdma_query_ah(mad_send_wr->send_buf.ah, &ah_attr))
 			continue;
 
 		if (rmpp_recv->slid == ah_attr.dlid) {
* Unmerged path drivers/infiniband/core/verbs.c
diff --git a/drivers/infiniband/hw/mlx4/mcg.c b/drivers/infiniband/hw/mlx4/mcg.c
index 8772d88d324d..944fe5717d76 100644
--- a/drivers/infiniband/hw/mlx4/mcg.c
+++ b/drivers/infiniband/hw/mlx4/mcg.c
@@ -237,7 +237,7 @@ static int send_mad_to_slave(int slave, struct mlx4_ib_demux_ctx *ctx,
 	if (!agent)
 		return -EAGAIN;
 
-	ib_query_ah(dev->sm_ah[ctx->port - 1], &ah_attr);
+	rdma_query_ah(dev->sm_ah[ctx->port - 1], &ah_attr);
 
 	if (ib_find_cached_pkey(&dev->ib_dev, ctx->port, IB_DEFAULT_PKEY_FULL, &wc.pkey_index))
 		return -EINVAL;
* Unmerged path include/rdma/ib_verbs.h
