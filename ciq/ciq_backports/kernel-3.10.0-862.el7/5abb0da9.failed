IB/mlx5: Remove deprecated module parameter

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Leon Romanovsky <leonro@mellanox.com>
commit 5abb0da9cd438483d80517b1d5f0a62a2f818426
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/5abb0da9.failed

Commit 9603b61de1ee ("mlx5: Move pci device handling from mlx5_ib
to mlx5_core") moved prof_sel module parameter from mlx5_ib to mlx5_core
and marked it as deprecated in 2014.

Three years after deprecation, it is time to remove the deprecated
module parameter.

	Signed-off-by: Leon Romanovsky <leonro@mellanox.com>
	Reviewed-by: Jack Morgenstein <jackm@mellanox.com>
	Signed-off-by: Leon Romanovsky <leon@kernel.org>
	Reviewed-by: Yuval Shaia <yuval.shaia@oracle.com>
	Signed-off-by: Doug Ledford <dledford@redhat.com>
(cherry picked from commit 5abb0da9cd438483d80517b1d5f0a62a2f818426)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/hw/mlx5/main.c
diff --cc drivers/infiniband/hw/mlx5/main.c
index 87c95640770e,fc02f5f05b38..000000000000
--- a/drivers/infiniband/hw/mlx5/main.c
+++ b/drivers/infiniband/hw/mlx5/main.c
@@@ -3410,21 -3475,8 +3406,25 @@@ static int __init mlx5_ib_init(void
  {
  	int err;
  
++<<<<<<< HEAD
 +	if (deprecated_prof_sel != 2)
 +		pr_warn("prof_sel is deprecated for mlx5_ib, set it for mlx5_core\n");
 +
 +	err = mlx5_ib_odp_init();
 +	if (err)
 +		return err;
++=======
++	err = mlx5_register_interface(&mlx5_ib_interface);
++>>>>>>> 5abb0da9cd43 (IB/mlx5: Remove deprecated module parameter)
 +
  	err = mlx5_register_interface(&mlx5_ib_interface);
 +	if (err)
 +		goto clean_odp;
 +
 +	return err;
  
 +clean_odp:
 +	mlx5_ib_odp_cleanup();
  	return err;
  }
  
* Unmerged path drivers/infiniband/hw/mlx5/main.c
