net/mlx5e: IPoIB, Support for setting PKEY index to underlay QP

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [netdrv] mlx5e: IPoIB, Support for setting PKEY index to underlay QP (Kamal Heib) [1517570 1456694]
Rebuild_FUZZ: 96.72%
commit-author Alex Vesker <valex@mellanox.com>
commit da34f1a85b78c2220dac1ce4f4c4595dd0cab5a9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/da34f1a8.failed

Added a function to set PKEY index to IPoIB device driver using the
already present set_id function. PKEY index is attached to the QP
during state modification.

	Signed-off-by: Alex Vesker <valex@mellanox.com>
	Reviewed-by: Erez Shitrit <erezsh@mellanox.com>
(cherry picked from commit da34f1a85b78c2220dac1ce4f4c4595dd0cab5a9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/ipoib.h
#	drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/ipoib.h
index 89bca182464c,9a729883c3b3..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/ipoib.h
+++ b/drivers/net/ethernet/mellanox/mlx5/core/ipoib.h
@@@ -38,9 -38,19 +38,14 @@@
  
  #define MLX5I_MAX_NUM_TC 1
  
 -extern const struct ethtool_ops mlx5i_ethtool_ops;
 -
 -#define MLX5_IB_GRH_BYTES       40
 -#define MLX5_IPOIB_ENCAP_LEN    4
 -#define MLX5_IPOIB_PSEUDO_LEN   20
 -#define MLX5_IPOIB_HARD_LEN     (MLX5_IPOIB_PSEUDO_LEN + MLX5_IPOIB_ENCAP_LEN)
 -
  /* ipoib rdma netdev's private data structure */
  struct mlx5i_priv {
 -	struct rdma_netdev rn; /* keep this first */
  	struct mlx5_core_qp qp;
++<<<<<<< HEAD:drivers/net/ethernet/mellanox/mlx5/core/ipoib.h
++=======
+ 	u32    qkey;
+ 	u16    pkey_index;
++>>>>>>> da34f1a85b78 (net/mlx5e: IPoIB, Support for setting PKEY index to underlay QP):drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib.h
  	char  *mlx5e_priv[0];
  };
  
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib.c
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/ipoib.h
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib.c
