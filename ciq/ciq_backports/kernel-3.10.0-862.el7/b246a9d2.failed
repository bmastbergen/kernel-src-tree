tools: Provide a definition of WARN_ON

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [tools] Provide a definition of WARN_ON (Jiri Olsa) [1478485]
Rebuild_FUZZ: 89.86%
commit-author Matthew Wilcox <mawilcox@microsoft.com>
commit b246a9d2671f4f6cfab3f98199568e0b3028f6e5
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/b246a9d2.failed

The definition of WARN_ON being used by the radix tree test suite was
deficient in two ways: it did not provide a return value, and it stopped
execution instead of continuing.  This version of WARN_ON tells you
which file & line the assertion was triggered in.

	Signed-off-by: Matthew Wilcox <mawilcox@microsoft.com>
(cherry picked from commit b246a9d2671f4f6cfab3f98199568e0b3028f6e5)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/include/asm/bug.h
#	tools/testing/radix-tree/linux/kernel.h
diff --cc tools/include/asm/bug.h
index 9e5f4846967f,4790f047a89c..000000000000
--- a/tools/include/asm/bug.h
+++ b/tools/include/asm/bug.h
@@@ -12,6 -12,25 +12,28 @@@
  	unlikely(__ret_warn_on);		\
  })
  
++<<<<<<< HEAD
++=======
+ #define WARN_ON(condition) ({					\
+ 	int __ret_warn_on = !!(condition);			\
+ 	if (unlikely(__ret_warn_on))				\
+ 		__WARN_printf("assertion failed at %s:%d\n",	\
+ 				__FILE__, __LINE__);		\
+ 	unlikely(__ret_warn_on);				\
+ })
+ 
+ #define WARN_ON_ONCE(condition) ({			\
+ 	static int __warned;				\
+ 	int __ret_warn_once = !!(condition);		\
+ 							\
+ 	if (unlikely(__ret_warn_once && !__warned)) {	\
+ 		__warned = true;			\
+ 		WARN_ON(1);				\
+ 	}						\
+ 	unlikely(__ret_warn_once);			\
+ })
+ 
++>>>>>>> b246a9d2671f (tools: Provide a definition of WARN_ON)
  #define WARN_ONCE(condition, format...)	({	\
  	static int __warned;			\
  	int __ret_warn_once = !!(condition);	\
* Unmerged path tools/testing/radix-tree/linux/kernel.h
* Unmerged path tools/include/asm/bug.h
* Unmerged path tools/testing/radix-tree/linux/kernel.h
