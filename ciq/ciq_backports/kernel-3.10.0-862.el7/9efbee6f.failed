mlxsw: spectrum_router: Drop unnecessary parameter

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Ido Schimmel <idosch@mellanox.com>
commit 9efbee6fead645db2fe8d9e779c36875aa2b98d4
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/9efbee6f.failed

Functions that take as argument a FIB entry don't need to take FIB node
as well, as it can be extracted from the entry.

Remove unnecessary FIB node parameter.

	Signed-off-by: Ido Schimmel <idosch@mellanox.com>
	Signed-off-by: Jiri Pirko <jiri@mellanox.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 9efbee6fead645db2fe8d9e779c36875aa2b98d4)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlxsw/spectrum_router.c
diff --cc drivers/net/ethernet/mellanox/mlxsw/spectrum_router.c
index ba2b4952cadc,c8c8187a8f0a..000000000000
--- a/drivers/net/ethernet/mellanox/mlxsw/spectrum_router.c
+++ b/drivers/net/ethernet/mellanox/mlxsw/spectrum_router.c
@@@ -2282,17 -2627,17 +2282,25 @@@ static int mlxsw_sp_fib4_node_list_appe
  }
  
  static int
++<<<<<<< HEAD
 +mlxsw_sp_fib4_node_list_insert(struct mlxsw_sp_fib_node *fib_node,
 +			       struct mlxsw_sp_fib_entry *new_entry,
 +			       bool replace, bool append)
 +{
 +	struct mlxsw_sp_fib_entry *fib_entry;
++=======
+ mlxsw_sp_fib4_node_list_insert(struct mlxsw_sp_fib4_entry *new4_entry,
+ 			       bool replace, bool append)
+ {
+ 	struct mlxsw_sp_fib_node *fib_node = new4_entry->common.fib_node;
+ 	struct mlxsw_sp_fib4_entry *fib4_entry;
++>>>>>>> 9efbee6fead6 (mlxsw: spectrum_router: Drop unnecessary parameter)
  
 -	fib4_entry = mlxsw_sp_fib4_node_entry_find(fib_node, new4_entry);
 +	fib_entry = mlxsw_sp_fib4_node_entry_find(fib_node, &new_entry->params);
  
  	if (append)
 -		return mlxsw_sp_fib4_node_list_append(fib4_entry, new4_entry);
 -	if (replace && WARN_ON(!fib4_entry))
 +		return mlxsw_sp_fib4_node_list_append(fib_entry, new_entry);
 +	if (replace && WARN_ON(!fib_entry))
  		return -EINVAL;
  
  	/* Insert new entry before replaced one, so that we can later
@@@ -2319,16 -2667,16 +2327,16 @@@
  }
  
  static void
 -mlxsw_sp_fib4_node_list_remove(struct mlxsw_sp_fib4_entry *fib4_entry)
 +mlxsw_sp_fib4_node_list_remove(struct mlxsw_sp_fib_entry *fib_entry)
  {
 -	list_del(&fib4_entry->common.list);
 +	list_del(&fib_entry->list);
  }
  
- static int
- mlxsw_sp_fib4_node_entry_add(struct mlxsw_sp *mlxsw_sp,
- 			     const struct mlxsw_sp_fib_node *fib_node,
- 			     struct mlxsw_sp_fib_entry *fib_entry)
+ static int mlxsw_sp_fib4_node_entry_add(struct mlxsw_sp *mlxsw_sp,
+ 					struct mlxsw_sp_fib_entry *fib_entry)
  {
+ 	struct mlxsw_sp_fib_node *fib_node = fib_entry->fib_node;
+ 
  	if (!mlxsw_sp_fib_node_entry_is_first(fib_node, fib_entry))
  		return 0;
  
@@@ -2367,18 -2715,16 +2375,28 @@@ static void mlxsw_sp_fib4_node_entry_de
  }
  
  static int mlxsw_sp_fib4_node_entry_link(struct mlxsw_sp *mlxsw_sp,
 -					 struct mlxsw_sp_fib4_entry *fib4_entry,
 +					 struct mlxsw_sp_fib_entry *fib_entry,
  					 bool replace, bool append)
  {
++<<<<<<< HEAD
 +	struct mlxsw_sp_fib_node *fib_node = fib_entry->fib_node;
 +	int err;
 +
 +	err = mlxsw_sp_fib4_node_list_insert(fib_node, fib_entry, replace,
 +					     append);
 +	if (err)
 +		return err;
 +
 +	err = mlxsw_sp_fib4_node_entry_add(mlxsw_sp, fib_node, fib_entry);
++=======
+ 	int err;
+ 
+ 	err = mlxsw_sp_fib4_node_list_insert(fib4_entry, replace, append);
+ 	if (err)
+ 		return err;
+ 
+ 	err = mlxsw_sp_fib4_node_entry_add(mlxsw_sp, &fib4_entry->common);
++>>>>>>> 9efbee6fead6 (mlxsw: spectrum_router: Drop unnecessary parameter)
  	if (err)
  		goto err_fib4_node_entry_add;
  
@@@ -2391,12 -2737,10 +2409,17 @@@ err_fib4_node_entry_add
  
  static void
  mlxsw_sp_fib4_node_entry_unlink(struct mlxsw_sp *mlxsw_sp,
 -				struct mlxsw_sp_fib4_entry *fib4_entry)
 +				struct mlxsw_sp_fib_entry *fib_entry)
  {
++<<<<<<< HEAD
 +	struct mlxsw_sp_fib_node *fib_node = fib_entry->fib_node;
 +
 +	mlxsw_sp_fib4_node_entry_del(mlxsw_sp, fib_node, fib_entry);
 +	mlxsw_sp_fib4_node_list_remove(fib_entry);
++=======
+ 	mlxsw_sp_fib4_node_entry_del(mlxsw_sp, &fib4_entry->common);
+ 	mlxsw_sp_fib4_node_list_remove(fib4_entry);
++>>>>>>> 9efbee6fead6 (mlxsw: spectrum_router: Drop unnecessary parameter)
  }
  
  static void mlxsw_sp_fib4_entry_replace(struct mlxsw_sp *mlxsw_sp,
* Unmerged path drivers/net/ethernet/mellanox/mlxsw/spectrum_router.c
