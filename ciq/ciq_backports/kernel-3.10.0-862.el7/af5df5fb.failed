IB/rxe: Update caller's CRC for RXE_MEM_TYPE_DMA memory type

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Leon Romanovsky <leonro@mellanox.com>
commit af5df5fb59ee01e78fd334c3d6202d9e7bcfddd3
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/af5df5fb.failed

Callers of rxe_mem_copy() provide pointer to store updated CRC
value. That pointer was supposed to be updated, but the
commit cee2688e3cd6 ("IB/rxe: Offload CRC calculation when possible")
mistakenly removed that assignment for RXE_MEM_TYPE_DMA memory type.

The code worked because there are no actual callers with
RXE_MEM_TYPE_DMA, who are interested in returned value of crcp.
The one caller in read_reply(), who uses the returned crcp didn't
set RXE_MEM_TYPE_DMA as mem->type.

Fixes: cee2688e3cd6 ("IB/rxe: Offload CRC calculation when possible")
	Reported-by: Andrew Boyer <andrew.boyer@dell.com>
	Signed-off-by: Leon Romanovsky <leonro@mellanox.com>
	Acked-by: Moni Shoua <monis@mellanox.com>
	Reviewed-by: Andrew Boyer <andrew.boyer@dell.com>
	Reviewed-by: Sagi Grimberg <sagi@grimberg.me>
	Signed-off-by: Doug Ledford <dledford@redhat.com>
(cherry picked from commit af5df5fb59ee01e78fd334c3d6202d9e7bcfddd3)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/sw/rxe/rxe_mr.c
diff --cc drivers/infiniband/sw/rxe/rxe_mr.c
index 37eea7441ca4,e37cc89987e1..000000000000
--- a/drivers/infiniband/sw/rxe/rxe_mr.c
+++ b/drivers/infiniband/sw/rxe/rxe_mr.c
@@@ -370,7 -368,8 +370,12 @@@ int rxe_mem_copy(struct rxe_mem *mem, u
  			((void *)(uintptr_t)iova) : addr;
  
  		if (crcp)
++<<<<<<< HEAD
 +			*crcp = crc32_le(*crcp, src, length);
++=======
+ 			*crcp = rxe_crc32(to_rdev(mem->pd->ibpd.device),
+ 					*crcp, src, length);
++>>>>>>> af5df5fb59ee (IB/rxe: Update caller's CRC for RXE_MEM_TYPE_DMA memory type)
  
  		memcpy(dest, src, length);
  
* Unmerged path drivers/infiniband/sw/rxe/rxe_mr.c
