bnxt_en: Add bnxt_get_num_stats() to centrally get the number of ethtool stats.

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [netdrv] bnxt_en: Add bnxt_get_num_stats() to centrally get the number of ethtool stats (Jonathan Toppins) [1459659]
Rebuild_FUZZ: 99.36%
commit-author Michael Chan <michael.chan@broadcom.com>
commit 5c8227d0d3b1eb1ad8f98d0b6dc619d70f2cfa04
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/5c8227d0.failed

Instead of duplicating the logic multiple times.  Also, it is unnecessary
to zero the buffer in .get_ethtool_stats() because it is already zeroed
by the caller.

	Signed-off-by: Michael Chan <michael.chan@broadcom.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 5c8227d0d3b1eb1ad8f98d0b6dc619d70f2cfa04)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/broadcom/bnxt/bnxt_ethtool.c
diff --cc drivers/net/ethernet/broadcom/bnxt/bnxt_ethtool.c
index 992fa0963964,4661b1185790..000000000000
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt_ethtool.c
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt_ethtool.c
@@@ -202,14 -213,12 +212,23 @@@ static int bnxt_get_sset_count(struct n
  	struct bnxt *bp = netdev_priv(dev);
  
  	switch (sset) {
++<<<<<<< HEAD
 +	case ETH_SS_STATS: {
 +		int num_stats = BNXT_NUM_STATS * bp->cp_nr_rings;
 +
 +		if (bp->flags & BNXT_FLAG_PORT_STATS)
 +			num_stats += BNXT_NUM_PORT_STATS;
 +
 +		return num_stats;
 +	}
++=======
+ 	case ETH_SS_STATS:
+ 		return bnxt_get_num_stats(bp);
+ 	case ETH_SS_TEST:
+ 		if (!bp->num_tests)
+ 			return -EOPNOTSUPP;
+ 		return bp->num_tests;
++>>>>>>> 5c8227d0d3b1 (bnxt_en: Add bnxt_get_num_stats() to centrally get the number of ethtool stats.)
  	default:
  		return -EOPNOTSUPP;
  	}
@@@ -837,8 -836,8 +853,13 @@@ static void bnxt_get_drvinfo(struct net
  		strlcpy(info->fw_version, bp->fw_ver_str,
  			sizeof(info->fw_version));
  	strlcpy(info->bus_info, pci_name(bp->pdev), sizeof(info->bus_info));
++<<<<<<< HEAD
 +	info->n_stats = BNXT_NUM_STATS * bp->cp_nr_rings;
 +	info->testinfo_len = BNXT_NUM_TESTS(bp);
++=======
+ 	info->n_stats = bnxt_get_num_stats(bp);
+ 	info->testinfo_len = bp->num_tests;
++>>>>>>> 5c8227d0d3b1 (bnxt_en: Add bnxt_get_num_stats() to centrally get the number of ethtool stats.)
  	/* TODO CHIMP_FW: eeprom dump details */
  	info->eedump_len = 0;
  	/* TODO CHIMP FW: reg dump details */
* Unmerged path drivers/net/ethernet/broadcom/bnxt/bnxt_ethtool.c
