qed*: Rename qed_roce_if.h to qed_rdma_if.h

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Kalderon, Michal <Michal.Kalderon@cavium.com>
commit 7003cdd6a121e7bdb8a05eb1931f9549a36ea723
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/7003cdd6.failed

Rename the qed_roce_if file to qed_rdma_if as it
represents a common interface for RoCE and iWARP.

this commit affects RDMA/qedr as well.

	Signed-off-by: Michal Kalderon <Michal.Kalderon@cavium.com>
	Signed-off-by: Yuval Mintz <Yuval.Mintz@cavium.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 7003cdd6a121e7bdb8a05eb1931f9549a36ea723)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/hw/qedr/qedr.h
#	drivers/net/ethernet/qlogic/qed/qed_rdma.c
#	drivers/net/ethernet/qlogic/qed/qed_roce.c
diff --cc drivers/infiniband/hw/qedr/qedr.h
index bf02ae4c8891,15365d5a0e19..000000000000
--- a/drivers/infiniband/hw/qedr/qedr.h
+++ b/drivers/infiniband/hw/qedr/qedr.h
@@@ -36,8 -36,8 +36,13 @@@
  #include <rdma/ib_addr.h>
  #include <linux/qed/qed_if.h>
  #include <linux/qed/qed_chain.h>
++<<<<<<< HEAD
 +#include <linux/qed/qed_roce_if.h>
 +#include <linux/qed/qede_roce.h>
++=======
+ #include <linux/qed/qed_rdma_if.h>
+ #include <linux/qed/qede_rdma.h>
++>>>>>>> 7003cdd6a121 (qed*: Rename qed_roce_if.h to qed_rdma_if.h)
  #include <linux/qed/roce_common.h>
  #include "qedr_hsi_rdma.h"
  
diff --cc drivers/net/ethernet/qlogic/qed/qed_rdma.c
index 9dc41a899ef2,df76e212f86e..000000000000
--- a/drivers/net/ethernet/qlogic/qed/qed_rdma.c
+++ b/drivers/net/ethernet/qlogic/qed/qed_rdma.c
@@@ -53,39 -53,14 +53,44 @@@
  #include "qed_ll2.h"
  #include "qed_mcp.h"
  #include "qed_reg_addr.h"
++<<<<<<< HEAD
++=======
+ #include <linux/qed/qed_rdma_if.h>
+ #include "qed_rdma.h"
++>>>>>>> 7003cdd6a121 (qed*: Rename qed_roce_if.h to qed_rdma_if.h)
  #include "qed_roce.h"
 +#include <linux/qed/qed_roce_if.h>
  #include "qed_sp.h"
  
 +static void qed_roce_free_real_icid(struct qed_hwfn *p_hwfn, u16 icid);
  
 -int qed_rdma_bmap_alloc(struct qed_hwfn *p_hwfn,
 -			struct qed_bmap *bmap, u32 max_count, char *name)
 +static int
 +qed_roce_async_event(struct qed_hwfn *p_hwfn,
 +		     u8 fw_event_code,
 +		     u16 echo, union event_ring_data *data, u8 fw_return_code)
 +{
 +	if (fw_event_code == ROCE_ASYNC_EVENT_DESTROY_QP_DONE) {
 +		u16 icid =
 +		    (u16)le32_to_cpu(data->rdma_data.rdma_destroy_qp_data.cid);
 +
 +		/* icid release in this async event can occur only if the icid
 +		 * was offloaded to the FW. In case it wasn't offloaded this is
 +		 * handled in qed_roce_sp_destroy_qp.
 +		 */
 +		qed_roce_free_real_icid(p_hwfn, icid);
 +	} else {
 +		struct qed_rdma_events *events = &p_hwfn->p_rdma_info->events;
 +
 +		events->affiliated_event(p_hwfn->p_rdma_info->events.context,
 +					 fw_event_code,
 +				     (void *)&data->rdma_data.async_handle);
 +	}
 +
 +	return 0;
 +}
 +
 +static int qed_rdma_bmap_alloc(struct qed_hwfn *p_hwfn,
 +			       struct qed_bmap *bmap, u32 max_count, char *name)
  {
  	DP_VERBOSE(p_hwfn, QED_MSG_RDMA, "max_count = %08x\n", max_count);
  
diff --cc drivers/net/ethernet/qlogic/qed/qed_roce.c
index 7c1640575bc6,e53adc3d009b..000000000000
--- a/drivers/net/ethernet/qlogic/qed/qed_roce.c
+++ b/drivers/net/ethernet/qlogic/qed/qed_roce.c
@@@ -62,9 -53,10 +62,15 @@@
  #include "qed_ll2.h"
  #include "qed_mcp.h"
  #include "qed_reg_addr.h"
++<<<<<<< HEAD
++=======
+ #include <linux/qed/qed_rdma_if.h>
+ #include "qed_rdma.h"
+ #include "qed_roce.h"
++>>>>>>> 7003cdd6a121 (qed*: Rename qed_roce_if.h to qed_rdma_if.h)
  #include "qed_sp.h"
 +#include "qed_roce.h"
 +#include "qed_ll2.h"
  
  static void qed_roce_free_real_icid(struct qed_hwfn *p_hwfn, u16 icid);
  
* Unmerged path drivers/infiniband/hw/qedr/qedr.h
diff --git a/drivers/infiniband/hw/qedr/qedr_cm.c b/drivers/infiniband/hw/qedr/qedr_cm.c
index 54568c16e682..e1bd69c2e929 100644
--- a/drivers/infiniband/hw/qedr/qedr_cm.c
+++ b/drivers/infiniband/hw/qedr/qedr_cm.c
@@ -44,7 +44,7 @@
 #include <rdma/ib_cache.h>
 
 #include <linux/qed/qed_if.h>
-#include <linux/qed/qed_roce_if.h>
+#include <linux/qed/qed_rdma_if.h>
 #include "qedr.h"
 #include "verbs.h"
 #include <rdma/qedr-abi.h>
* Unmerged path drivers/net/ethernet/qlogic/qed/qed_rdma.c
diff --git a/drivers/net/ethernet/qlogic/qed/qed_rdma.h b/drivers/net/ethernet/qlogic/qed/qed_rdma.h
index b178d9994a45..a3cc77779b83 100644
--- a/drivers/net/ethernet/qlogic/qed/qed_rdma.h
+++ b/drivers/net/ethernet/qlogic/qed/qed_rdma.h
@@ -38,7 +38,7 @@
 #include <linux/slab.h>
 #include <linux/spinlock.h>
 #include <linux/qed/qed_if.h>
-#include <linux/qed/qed_roce_if.h>
+#include <linux/qed/qed_rdma_if.h>
 #include "qed.h"
 #include "qed_dev_api.h"
 #include "qed_hsi.h"
* Unmerged path drivers/net/ethernet/qlogic/qed/qed_roce.c
diff --git a/include/linux/qed/qed_roce_if.h b/include/linux/qed/qed_rdma_if.h
similarity index 99%
rename from include/linux/qed/qed_roce_if.h
rename to include/linux/qed/qed_rdma_if.h
index cbb2ff0ce4bc..62b9dc6a1891 100644
--- a/include/linux/qed/qed_roce_if.h
+++ b/include/linux/qed/qed_rdma_if.h
@@ -29,8 +29,8 @@
  * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
  * SOFTWARE.
  */
-#ifndef _QED_ROCE_IF_H
-#define _QED_ROCE_IF_H
+#ifndef _QED_RDMA_IF_H
+#define _QED_RDMA_IF_H
 #include <linux/types.h>
 #include <linux/delay.h>
 #include <linux/list.h>
