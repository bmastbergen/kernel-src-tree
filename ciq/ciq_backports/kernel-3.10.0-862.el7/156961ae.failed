drm/i915: Disable DC states around GMBUS on GLK

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Ville Syrj채l채 <ville.syrjala@linux.intel.com>
commit 156961ae7bdf6feb72778e8da83d321b273343fd
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/156961ae.failed

Prevent the DMC from destroying GMBUS transfers on GLK. GMBUS
lives in PG1 so DC off is all we need.

	Cc: stable@vger.kernel.org
	Signed-off-by: Ville Syrj채l채 <ville.syrjala@linux.intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20171208213739.16388-1-ville.syrjala@linux.intel.com
	Reviewed-by: Dhinakaran Pandiyan <dhinakaran.pandiyan@intel.com>
(cherry picked from commit 156961ae7bdf6feb72778e8da83d321b273343fd)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/intel_runtime_pm.c
diff --cc drivers/gpu/drm/i915/intel_runtime_pm.c
index 87b4af092d54,522e0a63090f..000000000000
--- a/drivers/gpu/drm/i915/intel_runtime_pm.c
+++ b/drivers/gpu/drm/i915/intel_runtime_pm.c
@@@ -1738,121 -1552,298 +1738,173 @@@ void intel_display_power_put(struct drm
  	intel_runtime_pm_put(dev_priv);
  }
  
 -#define I830_PIPES_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_A) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_B) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_A_PANEL_FITTER) |	\
 -	BIT_ULL(POWER_DOMAIN_PIPE_B_PANEL_FITTER) |	\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_A) |	\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_B) |	\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 +#define HSW_DISPLAY_POWER_DOMAINS (			\
 +	BIT(POWER_DOMAIN_PIPE_B) |			\
 +	BIT(POWER_DOMAIN_PIPE_C) |			\
 +	BIT(POWER_DOMAIN_PIPE_A_PANEL_FITTER) |		\
 +	BIT(POWER_DOMAIN_PIPE_B_PANEL_FITTER) |		\
 +	BIT(POWER_DOMAIN_PIPE_C_PANEL_FITTER) |		\
 +	BIT(POWER_DOMAIN_TRANSCODER_A) |		\
 +	BIT(POWER_DOMAIN_TRANSCODER_B) |		\
 +	BIT(POWER_DOMAIN_TRANSCODER_C) |		\
 +	BIT(POWER_DOMAIN_PORT_DDI_B_LANES) |		\
 +	BIT(POWER_DOMAIN_PORT_DDI_C_LANES) |		\
 +	BIT(POWER_DOMAIN_PORT_DDI_D_LANES) |		\
 +	BIT(POWER_DOMAIN_PORT_CRT) | /* DDI E */	\
 +	BIT(POWER_DOMAIN_VGA) |				\
 +	BIT(POWER_DOMAIN_AUDIO) |			\
 +	BIT(POWER_DOMAIN_INIT))
 +
 +#define BDW_DISPLAY_POWER_DOMAINS (			\
 +	BIT(POWER_DOMAIN_PIPE_B) |			\
 +	BIT(POWER_DOMAIN_PIPE_C) |			\
 +	BIT(POWER_DOMAIN_PIPE_B_PANEL_FITTER) |		\
 +	BIT(POWER_DOMAIN_PIPE_C_PANEL_FITTER) |		\
 +	BIT(POWER_DOMAIN_TRANSCODER_A) |		\
 +	BIT(POWER_DOMAIN_TRANSCODER_B) |		\
 +	BIT(POWER_DOMAIN_TRANSCODER_C) |		\
 +	BIT(POWER_DOMAIN_PORT_DDI_B_LANES) |		\
 +	BIT(POWER_DOMAIN_PORT_DDI_C_LANES) |		\
 +	BIT(POWER_DOMAIN_PORT_DDI_D_LANES) |		\
 +	BIT(POWER_DOMAIN_PORT_CRT) | /* DDI E */	\
 +	BIT(POWER_DOMAIN_VGA) |				\
 +	BIT(POWER_DOMAIN_AUDIO) |			\
 +	BIT(POWER_DOMAIN_INIT))
  
  #define VLV_DISPLAY_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_A) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_B) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_A_PANEL_FITTER) |	\
 -	BIT_ULL(POWER_DOMAIN_PIPE_B_PANEL_FITTER) |	\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_A) |	\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_B) |	\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_B_LANES) |	\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_C_LANES) |	\
 -	BIT_ULL(POWER_DOMAIN_PORT_DSI) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_CRT) |		\
 -	BIT_ULL(POWER_DOMAIN_VGA) |			\
 -	BIT_ULL(POWER_DOMAIN_AUDIO) |		\
 -	BIT_ULL(POWER_DOMAIN_AUX_B) |		\
 -	BIT_ULL(POWER_DOMAIN_AUX_C) |		\
 -	BIT_ULL(POWER_DOMAIN_GMBUS) |		\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 +	BIT(POWER_DOMAIN_PIPE_A) |		\
 +	BIT(POWER_DOMAIN_PIPE_B) |		\
 +	BIT(POWER_DOMAIN_PIPE_A_PANEL_FITTER) |	\
 +	BIT(POWER_DOMAIN_PIPE_B_PANEL_FITTER) |	\
 +	BIT(POWER_DOMAIN_TRANSCODER_A) |	\
 +	BIT(POWER_DOMAIN_TRANSCODER_B) |	\
 +	BIT(POWER_DOMAIN_PORT_DDI_B_LANES) |	\
 +	BIT(POWER_DOMAIN_PORT_DDI_C_LANES) |	\
 +	BIT(POWER_DOMAIN_PORT_DSI) |		\
 +	BIT(POWER_DOMAIN_PORT_CRT) |		\
 +	BIT(POWER_DOMAIN_VGA) |			\
 +	BIT(POWER_DOMAIN_AUDIO) |		\
 +	BIT(POWER_DOMAIN_AUX_B) |		\
 +	BIT(POWER_DOMAIN_AUX_C) |		\
 +	BIT(POWER_DOMAIN_GMBUS) |		\
 +	BIT(POWER_DOMAIN_INIT))
  
  #define VLV_DPIO_CMN_BC_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_B_LANES) |	\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_C_LANES) |	\
 -	BIT_ULL(POWER_DOMAIN_PORT_CRT) |		\
 -	BIT_ULL(POWER_DOMAIN_AUX_B) |		\
 -	BIT_ULL(POWER_DOMAIN_AUX_C) |		\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -
 +	BIT(POWER_DOMAIN_PORT_DDI_B_LANES) |	\
 +	BIT(POWER_DOMAIN_PORT_DDI_C_LANES) |	\
 +	BIT(POWER_DOMAIN_PORT_CRT) |		\
 +	BIT(POWER_DOMAIN_AUX_B) |		\
 +	BIT(POWER_DOMAIN_AUX_C) |		\
 +	BIT(POWER_DOMAIN_INIT))
 +
++<<<<<<< HEAD
  #define VLV_DPIO_TX_B_LANES_01_POWER_DOMAINS (	\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_B_LANES) |	\
 -	BIT_ULL(POWER_DOMAIN_AUX_B) |		\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -
 -#define VLV_DPIO_TX_B_LANES_23_POWER_DOMAINS (	\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_B_LANES) |	\
 -	BIT_ULL(POWER_DOMAIN_AUX_B) |		\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -
 -#define VLV_DPIO_TX_C_LANES_01_POWER_DOMAINS (	\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_C_LANES) |	\
 -	BIT_ULL(POWER_DOMAIN_AUX_C) |		\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -
 -#define VLV_DPIO_TX_C_LANES_23_POWER_DOMAINS (	\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_C_LANES) |	\
 -	BIT_ULL(POWER_DOMAIN_AUX_C) |		\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -
 -#define CHV_DISPLAY_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_A) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_B) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_C) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_A_PANEL_FITTER) |	\
 -	BIT_ULL(POWER_DOMAIN_PIPE_B_PANEL_FITTER) |	\
 -	BIT_ULL(POWER_DOMAIN_PIPE_C_PANEL_FITTER) |	\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_A) |	\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_B) |	\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_C) |	\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_B_LANES) |	\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_C_LANES) |	\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_D_LANES) |	\
 -	BIT_ULL(POWER_DOMAIN_PORT_DSI) |		\
 -	BIT_ULL(POWER_DOMAIN_VGA) |			\
 -	BIT_ULL(POWER_DOMAIN_AUDIO) |		\
 -	BIT_ULL(POWER_DOMAIN_AUX_B) |		\
 -	BIT_ULL(POWER_DOMAIN_AUX_C) |		\
 -	BIT_ULL(POWER_DOMAIN_AUX_D) |		\
 -	BIT_ULL(POWER_DOMAIN_GMBUS) |		\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -
 -#define CHV_DPIO_CMN_BC_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_B_LANES) |	\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_C_LANES) |	\
 -	BIT_ULL(POWER_DOMAIN_AUX_B) |		\
 -	BIT_ULL(POWER_DOMAIN_AUX_C) |		\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -
 -#define CHV_DPIO_CMN_D_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_D_LANES) |	\
 -	BIT_ULL(POWER_DOMAIN_AUX_D) |		\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -
 -#define HSW_DISPLAY_POWER_DOMAINS (			\
 +	BIT(POWER_DOMAIN_PORT_DDI_B_LANES) |	\
 +	BIT(POWER_DOMAIN_AUX_B) |		\
 +	BIT(POWER_DOMAIN_INIT))
++=======
++#define GLK_DISPLAY_POWERWELL_2_POWER_DOMAINS (		\
++	BIT_ULL(POWER_DOMAIN_TRANSCODER_A) |		\
+ 	BIT_ULL(POWER_DOMAIN_PIPE_B) |			\
++	BIT_ULL(POWER_DOMAIN_TRANSCODER_B) |		\
+ 	BIT_ULL(POWER_DOMAIN_PIPE_C) |			\
 -	BIT_ULL(POWER_DOMAIN_PIPE_A_PANEL_FITTER) |		\
++	BIT_ULL(POWER_DOMAIN_TRANSCODER_C) |		\
+ 	BIT_ULL(POWER_DOMAIN_PIPE_B_PANEL_FITTER) |		\
+ 	BIT_ULL(POWER_DOMAIN_PIPE_C_PANEL_FITTER) |		\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_A) |		\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_B) |		\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_C) |		\
+ 	BIT_ULL(POWER_DOMAIN_PORT_DDI_B_LANES) |		\
+ 	BIT_ULL(POWER_DOMAIN_PORT_DDI_C_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_D_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_CRT) | /* DDI E */	\
 -	BIT_ULL(POWER_DOMAIN_VGA) |				\
++	BIT_ULL(POWER_DOMAIN_AUX_B) |                       \
++	BIT_ULL(POWER_DOMAIN_AUX_C) |			\
+ 	BIT_ULL(POWER_DOMAIN_AUDIO) |			\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -
 -#define BDW_DISPLAY_POWER_DOMAINS (			\
 -	BIT_ULL(POWER_DOMAIN_PIPE_B) |			\
 -	BIT_ULL(POWER_DOMAIN_PIPE_C) |			\
 -	BIT_ULL(POWER_DOMAIN_PIPE_B_PANEL_FITTER) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_C_PANEL_FITTER) |		\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_A) |		\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_B) |		\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_C) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_B_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_C_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_D_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_CRT) | /* DDI E */	\
 -	BIT_ULL(POWER_DOMAIN_VGA) |				\
 -	BIT_ULL(POWER_DOMAIN_AUDIO) |			\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -
 -#define SKL_DISPLAY_POWERWELL_2_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_A) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_B) |			\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_B) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_C) |			\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_C) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_B_PANEL_FITTER) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_C_PANEL_FITTER) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_B_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_C_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_D_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_E_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_AUX_B) |                       \
 -	BIT_ULL(POWER_DOMAIN_AUX_C) |			\
 -	BIT_ULL(POWER_DOMAIN_AUX_D) |			\
 -	BIT_ULL(POWER_DOMAIN_AUDIO) |			\
 -	BIT_ULL(POWER_DOMAIN_VGA) |				\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -#define SKL_DISPLAY_DDI_IO_A_E_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_A_IO) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_E_IO) |		\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -#define SKL_DISPLAY_DDI_IO_B_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_B_IO) |		\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -#define SKL_DISPLAY_DDI_IO_C_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_C_IO) |		\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -#define SKL_DISPLAY_DDI_IO_D_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_D_IO) |		\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -#define SKL_DISPLAY_DC_OFF_POWER_DOMAINS (		\
 -	SKL_DISPLAY_POWERWELL_2_POWER_DOMAINS |		\
 -	BIT_ULL(POWER_DOMAIN_GT_IRQ) |			\
 -	BIT_ULL(POWER_DOMAIN_MODESET) |			\
 -	BIT_ULL(POWER_DOMAIN_AUX_A) |			\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -
 -#define BXT_DISPLAY_POWERWELL_2_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_A) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_B) |			\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_B) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_C) |			\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_C) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_B_PANEL_FITTER) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_C_PANEL_FITTER) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_B_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_C_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_AUX_B) |			\
 -	BIT_ULL(POWER_DOMAIN_AUX_C) |			\
 -	BIT_ULL(POWER_DOMAIN_AUDIO) |			\
 -	BIT_ULL(POWER_DOMAIN_VGA) |				\
 -	BIT_ULL(POWER_DOMAIN_GMBUS) |			\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -#define BXT_DISPLAY_DC_OFF_POWER_DOMAINS (		\
 -	BXT_DISPLAY_POWERWELL_2_POWER_DOMAINS |		\
 -	BIT_ULL(POWER_DOMAIN_GT_IRQ) |			\
 -	BIT_ULL(POWER_DOMAIN_MODESET) |			\
 -	BIT_ULL(POWER_DOMAIN_AUX_A) |			\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -#define BXT_DPIO_CMN_A_POWER_DOMAINS (			\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_A_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_AUX_A) |			\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -#define BXT_DPIO_CMN_BC_POWER_DOMAINS (			\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_B_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_C_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_AUX_B) |			\
 -	BIT_ULL(POWER_DOMAIN_AUX_C) |			\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -
 -#define GLK_DISPLAY_POWERWELL_2_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_A) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_B) |			\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_B) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_C) |			\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_C) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_B_PANEL_FITTER) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_C_PANEL_FITTER) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_B_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_C_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_AUX_B) |                       \
 -	BIT_ULL(POWER_DOMAIN_AUX_C) |			\
 -	BIT_ULL(POWER_DOMAIN_AUDIO) |			\
 -	BIT_ULL(POWER_DOMAIN_VGA) |				\
++	BIT_ULL(POWER_DOMAIN_VGA) |				\
+ 	BIT_ULL(POWER_DOMAIN_INIT))
+ #define GLK_DISPLAY_DDI_IO_A_POWER_DOMAINS (		\
+ 	BIT_ULL(POWER_DOMAIN_PORT_DDI_A_IO))
+ #define GLK_DISPLAY_DDI_IO_B_POWER_DOMAINS (		\
+ 	BIT_ULL(POWER_DOMAIN_PORT_DDI_B_IO))
+ #define GLK_DISPLAY_DDI_IO_C_POWER_DOMAINS (		\
+ 	BIT_ULL(POWER_DOMAIN_PORT_DDI_C_IO))
+ #define GLK_DPIO_CMN_A_POWER_DOMAINS (			\
+ 	BIT_ULL(POWER_DOMAIN_PORT_DDI_A_LANES) |		\
+ 	BIT_ULL(POWER_DOMAIN_AUX_A) |			\
+ 	BIT_ULL(POWER_DOMAIN_INIT))
+ #define GLK_DPIO_CMN_B_POWER_DOMAINS (			\
+ 	BIT_ULL(POWER_DOMAIN_PORT_DDI_B_LANES) |		\
+ 	BIT_ULL(POWER_DOMAIN_AUX_B) |			\
+ 	BIT_ULL(POWER_DOMAIN_INIT))
+ #define GLK_DPIO_CMN_C_POWER_DOMAINS (			\
+ 	BIT_ULL(POWER_DOMAIN_PORT_DDI_C_LANES) |		\
+ 	BIT_ULL(POWER_DOMAIN_AUX_C) |			\
+ 	BIT_ULL(POWER_DOMAIN_INIT))
+ #define GLK_DISPLAY_AUX_A_POWER_DOMAINS (		\
+ 	BIT_ULL(POWER_DOMAIN_AUX_A) |		\
+ 	BIT_ULL(POWER_DOMAIN_INIT))
+ #define GLK_DISPLAY_AUX_B_POWER_DOMAINS (		\
+ 	BIT_ULL(POWER_DOMAIN_AUX_B) |		\
+ 	BIT_ULL(POWER_DOMAIN_INIT))
+ #define GLK_DISPLAY_AUX_C_POWER_DOMAINS (		\
+ 	BIT_ULL(POWER_DOMAIN_AUX_C) |		\
+ 	BIT_ULL(POWER_DOMAIN_INIT))
+ #define GLK_DISPLAY_DC_OFF_POWER_DOMAINS (		\
+ 	GLK_DISPLAY_POWERWELL_2_POWER_DOMAINS |		\
+ 	BIT_ULL(POWER_DOMAIN_GT_IRQ) |			\
+ 	BIT_ULL(POWER_DOMAIN_MODESET) |			\
+ 	BIT_ULL(POWER_DOMAIN_AUX_A) |			\
+ 	BIT_ULL(POWER_DOMAIN_GMBUS) |			\
+ 	BIT_ULL(POWER_DOMAIN_INIT))
++>>>>>>> 156961ae7bdf (drm/i915: Disable DC states around GMBUS on GLK)
  
 -#define CNL_DISPLAY_POWERWELL_2_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_A) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_B) |			\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_B) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_C) |			\
 -	BIT_ULL(POWER_DOMAIN_TRANSCODER_C) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_B_PANEL_FITTER) |		\
 -	BIT_ULL(POWER_DOMAIN_PIPE_C_PANEL_FITTER) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_B_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_C_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_D_LANES) |		\
 -	BIT_ULL(POWER_DOMAIN_AUX_B) |                       \
 -	BIT_ULL(POWER_DOMAIN_AUX_C) |			\
 -	BIT_ULL(POWER_DOMAIN_AUX_D) |			\
 -	BIT_ULL(POWER_DOMAIN_AUDIO) |			\
 -	BIT_ULL(POWER_DOMAIN_VGA) |				\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -#define CNL_DISPLAY_DDI_A_IO_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_A_IO) |		\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -#define CNL_DISPLAY_DDI_B_IO_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_B_IO) |		\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -#define CNL_DISPLAY_DDI_C_IO_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_C_IO) |		\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -#define CNL_DISPLAY_DDI_D_IO_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_PORT_DDI_D_IO) |		\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -#define CNL_DISPLAY_AUX_A_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_AUX_A) |			\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -#define CNL_DISPLAY_AUX_B_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_AUX_B) |			\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -#define CNL_DISPLAY_AUX_C_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_AUX_C) |			\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -#define CNL_DISPLAY_AUX_D_POWER_DOMAINS (		\
 -	BIT_ULL(POWER_DOMAIN_AUX_D) |			\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 -#define CNL_DISPLAY_DC_OFF_POWER_DOMAINS (		\
 -	CNL_DISPLAY_POWERWELL_2_POWER_DOMAINS |		\
 -	BIT_ULL(POWER_DOMAIN_MODESET) |			\
 -	BIT_ULL(POWER_DOMAIN_AUX_A) |			\
 -	BIT_ULL(POWER_DOMAIN_INIT))
 +#define VLV_DPIO_TX_B_LANES_23_POWER_DOMAINS (	\
 +	BIT(POWER_DOMAIN_PORT_DDI_B_LANES) |	\
 +	BIT(POWER_DOMAIN_AUX_B) |		\
 +	BIT(POWER_DOMAIN_INIT))
 +
 +#define VLV_DPIO_TX_C_LANES_01_POWER_DOMAINS (	\
 +	BIT(POWER_DOMAIN_PORT_DDI_C_LANES) |	\
 +	BIT(POWER_DOMAIN_AUX_C) |		\
 +	BIT(POWER_DOMAIN_INIT))
 +
 +#define VLV_DPIO_TX_C_LANES_23_POWER_DOMAINS (	\
 +	BIT(POWER_DOMAIN_PORT_DDI_C_LANES) |	\
 +	BIT(POWER_DOMAIN_AUX_C) |		\
 +	BIT(POWER_DOMAIN_INIT))
 +
 +#define CHV_DISPLAY_POWER_DOMAINS (		\
 +	BIT(POWER_DOMAIN_PIPE_A) |		\
 +	BIT(POWER_DOMAIN_PIPE_B) |		\
 +	BIT(POWER_DOMAIN_PIPE_C) |		\
 +	BIT(POWER_DOMAIN_PIPE_A_PANEL_FITTER) |	\
 +	BIT(POWER_DOMAIN_PIPE_B_PANEL_FITTER) |	\
 +	BIT(POWER_DOMAIN_PIPE_C_PANEL_FITTER) |	\
 +	BIT(POWER_DOMAIN_TRANSCODER_A) |	\
 +	BIT(POWER_DOMAIN_TRANSCODER_B) |	\
 +	BIT(POWER_DOMAIN_TRANSCODER_C) |	\
 +	BIT(POWER_DOMAIN_PORT_DDI_B_LANES) |	\
 +	BIT(POWER_DOMAIN_PORT_DDI_C_LANES) |	\
 +	BIT(POWER_DOMAIN_PORT_DDI_D_LANES) |	\
 +	BIT(POWER_DOMAIN_PORT_DSI) |		\
 +	BIT(POWER_DOMAIN_VGA) |			\
 +	BIT(POWER_DOMAIN_AUDIO) |		\
 +	BIT(POWER_DOMAIN_AUX_B) |		\
 +	BIT(POWER_DOMAIN_AUX_C) |		\
 +	BIT(POWER_DOMAIN_AUX_D) |		\
 +	BIT(POWER_DOMAIN_GMBUS) |		\
 +	BIT(POWER_DOMAIN_INIT))
 +
 +#define CHV_DPIO_CMN_BC_POWER_DOMAINS (		\
 +	BIT(POWER_DOMAIN_PORT_DDI_B_LANES) |	\
 +	BIT(POWER_DOMAIN_PORT_DDI_C_LANES) |	\
 +	BIT(POWER_DOMAIN_AUX_B) |		\
 +	BIT(POWER_DOMAIN_AUX_C) |		\
 +	BIT(POWER_DOMAIN_INIT))
 +
 +#define CHV_DPIO_CMN_D_POWER_DOMAINS (		\
 +	BIT(POWER_DOMAIN_PORT_DDI_D_LANES) |	\
 +	BIT(POWER_DOMAIN_AUX_D) |		\
 +	BIT(POWER_DOMAIN_INIT))
  
  static const struct i915_power_well_ops i9xx_always_on_power_well_ops = {
 -	.sync_hw = i9xx_power_well_sync_hw_noop,
 +	.sync_hw = i9xx_always_on_power_well_noop,
  	.enable = i9xx_always_on_power_well_noop,
  	.disable = i9xx_always_on_power_well_noop,
  	.is_enabled = i9xx_always_on_power_well_enabled,
* Unmerged path drivers/gpu/drm/i915/intel_runtime_pm.c
