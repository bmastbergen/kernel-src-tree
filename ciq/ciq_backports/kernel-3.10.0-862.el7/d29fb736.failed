qla2xxx: Add counter for message

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Saurav Kashyap <saurav.kashyap@qlogic.com>
commit d29fb7360ee61ec02257e9c49848c9d2a05345a0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/d29fb736.failed

	Signed-off-by: Saurav Kashyap <saurav.kashyap@qlogic.com>
	Signed-off-by: Giridhar Malavali <giridhar.malavali@qlogic.com>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
(cherry picked from commit d29fb7360ee61ec02257e9c49848c9d2a05345a0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/qla2xxx/qla_target.c
diff --cc drivers/scsi/qla2xxx/qla_target.c
index 5f7b0de5e170,1a546bc2bdd4..000000000000
--- a/drivers/scsi/qla2xxx/qla_target.c
+++ b/drivers/scsi/qla2xxx/qla_target.c
@@@ -1489,11 -1438,8 +1489,12 @@@ static int qlt_check_reserve_free_req(s
  
  	if (vha->req->cnt < (req_cnt + 2)) {
  		cnt = (uint16_t)RD_REG_DWORD(vha->req->req_q_out);
+ 		cnt_in = (uint16_t)RD_REG_DWORD(vha->req->req_q_in);
  
 +		ql_dbg(ql_dbg_tgt, vha, 0xe00a,
 +		    "Request ring circled: cnt=%d, vha->->ring_index=%d, "
 +		    "vha->req->cnt=%d, req_cnt=%d\n", cnt,
 +		    vha->req->ring_index, vha->req->cnt, req_cnt);
  		if  (vha->req->ring_index < cnt)
  			vha->req->cnt = cnt - vha->req->ring_index;
  		else
@@@ -1502,11 -1448,10 +1503,18 @@@
  	}
  
  	if (unlikely(vha->req->cnt < (req_cnt + 2))) {
++<<<<<<< HEAD
 +		ql_dbg(ql_dbg_tgt, vha, 0xe00b,
 +		    "qla_target(%d): There is no room in the "
 +		    "request ring: vha->req->ring_index=%d, vha->req->cnt=%d, "
 +		    "req_cnt=%d\n", vha->vp_idx, vha->req->ring_index,
 +		    vha->req->cnt, req_cnt);
++=======
+ 		ql_dbg(ql_dbg_io, vha, 0x305a,
+ 		    "qla_target(%d): There is no room in the request ring: vha->req->ring_index=%d, vha->req->cnt=%d, req_cnt=%d Req-out=%d Req-in=%d Req-Length=%d\n",
+ 		    vha->vp_idx, vha->req->ring_index,
+ 		    vha->req->cnt, req_cnt, cnt, cnt_in, vha->req->length);
++>>>>>>> d29fb7360ee6 (qla2xxx: Add counter for message)
  		return -EAGAIN;
  	}
  	vha->req->cnt -= req_cnt;
* Unmerged path drivers/scsi/qla2xxx/qla_target.c
