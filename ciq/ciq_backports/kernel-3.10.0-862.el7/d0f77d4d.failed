x86/init: Clear 'init_level4_pgt' earlier

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [x86] init: Clear 'init_level4_pgt' earlier (Suravee Suthikulpanit) [1361287]
Rebuild_FUZZ: 94.87%
commit-author Andrey Ryabinin <a.ryabinin@samsung.com>
commit d0f77d4d04b222a817925d33ba3589b190bfa863
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/d0f77d4d.failed

Currently x86_64_start_kernel() has two KASAN related
function calls. The first call maps shadow to early_level4_pgt,
the second maps shadow to init_level4_pgt.

If we move clear_page(init_level4_pgt) earlier, we could hide
KASAN low level detail from generic x86_64 initialization code.
The next patch will do it.

	Signed-off-by: Andrey Ryabinin <a.ryabinin@samsung.com>
	Cc: <stable@vger.kernel.org> # 4.0+
	Cc: Alexander Popov <alpopov@ptsecurity.com>
	Cc: Alexander Potapenko <glider@google.com>
	Cc: Andrey Konovalov <adech.fo@gmail.com>
	Cc: Borislav Petkov <bp@alien8.de>
	Cc: Dmitry Vyukov <dvyukov@google.com>
	Cc: Linus Torvalds <torvalds@linux-foundation.org>
	Cc: Peter Zijlstra <peterz@infradead.org>
	Cc: Thomas Gleixner <tglx@linutronix.de>
Link: http://lkml.kernel.org/r/1435828178-10975-2-git-send-email-a.ryabinin@samsung.com
	Signed-off-by: Ingo Molnar <mingo@kernel.org>
(cherry picked from commit d0f77d4d04b222a817925d33ba3589b190bfa863)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/kernel/head64.c
diff --cc arch/x86/kernel/head64.c
index 39ad3cdc4c78,65c8985e3eb2..000000000000
--- a/arch/x86/kernel/head64.c
+++ b/arch/x86/kernel/head64.c
@@@ -172,10 -179,6 +174,13 @@@ void __init x86_64_start_kernel(char * 
  	 */
  	load_ucode_bsp();
  
++<<<<<<< HEAD
 +	if (console_loglevel == 10)
 +		early_printk("Kernel alive\n");
 +
 +	clear_page(init_level4_pgt);
++=======
++>>>>>>> d0f77d4d04b2 (x86/init: Clear 'init_level4_pgt' earlier)
  	/* set init_level4_pgt kernel high mapping*/
  	init_level4_pgt[511] = early_level4_pgt[511];
  
* Unmerged path arch/x86/kernel/head64.c
