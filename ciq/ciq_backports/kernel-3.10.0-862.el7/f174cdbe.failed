fm10k: Replace ndo_add/del_vxlan_port with ndo_add/del_udp_enc_port

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Alexander Duyck <aduyck@mirantis.com>
commit f174cdbe5ba7ff4e25fe20f3801607d648aea8d3
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/f174cdbe.failed

This change replaces the network device operations for adding or removing a
VXLAN port with operations that are more generically defined to be used for
any UDP offload port but provide a type.  As such by just adding a line to
verify that the offload type if VXLAN we can maintain the same
functionality.

	Signed-off-by: Alexander Duyck <aduyck@mirantis.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit f174cdbe5ba7ff4e25fe20f3801607d648aea8d3)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/intel/fm10k/fm10k_netdev.c
diff --cc drivers/net/ethernet/intel/fm10k/fm10k_netdev.c
index 4afd8bd1bd47,d00cb193da9a..000000000000
--- a/drivers/net/ethernet/intel/fm10k/fm10k_netdev.c
+++ b/drivers/net/ethernet/intel/fm10k/fm10k_netdev.c
@@@ -1419,16 -1376,13 +1423,23 @@@ static const struct net_device_ops fm10
  	.ndo_get_stats64	= fm10k_get_stats64,
  	.ndo_setup_tc		= __fm10k_setup_tc,
  	.ndo_set_vf_mac		= fm10k_ndo_set_vf_mac,
 -	.ndo_set_vf_vlan	= fm10k_ndo_set_vf_vlan,
 -	.ndo_set_vf_rate	= fm10k_ndo_set_vf_bw,
 +	.extended.ndo_set_vf_vlan	= fm10k_ndo_set_vf_vlan,
 +	.ndo_set_vf_tx_rate	= fm10k_ndo_set_vf_bw,
  	.ndo_get_vf_config	= fm10k_ndo_get_vf_config,
++<<<<<<< HEAD
 +	.ndo_add_vxlan_port	= fm10k_add_vxlan_port,
 +	.ndo_del_vxlan_port	= fm10k_del_vxlan_port,
 +	.ndo_size		= sizeof(struct net_device_ops),
 +#if 0
 +	.extended.ndo_dfwd_add_station	= fm10k_dfwd_add_station,
 +	.extended.ndo_dfwd_del_station	= fm10k_dfwd_del_station,
 +#endif
++=======
+ 	.ndo_udp_tunnel_add	= fm10k_add_vxlan_port,
+ 	.ndo_udp_tunnel_del	= fm10k_del_vxlan_port,
+ 	.ndo_dfwd_add_station	= fm10k_dfwd_add_station,
+ 	.ndo_dfwd_del_station	= fm10k_dfwd_del_station,
++>>>>>>> f174cdbe5ba7 (fm10k: Replace ndo_add/del_vxlan_port with ndo_add/del_udp_enc_port)
  #ifdef CONFIG_NET_POLL_CONTROLLER
  	.ndo_poll_controller	= fm10k_netpoll,
  #endif
diff --git a/drivers/net/ethernet/intel/Kconfig b/drivers/net/ethernet/intel/Kconfig
index d89f96325489..234a76ace06d 100644
--- a/drivers/net/ethernet/intel/Kconfig
+++ b/drivers/net/ethernet/intel/Kconfig
@@ -340,15 +340,4 @@ config FM10K
 	  To compile this driver as a module, choose M here. The module
 	  will be called fm10k.  MSI-X interrupt support is required
 
-config FM10K_VXLAN
-	bool "Virtual eXtensible Local Area Network Support"
-	default n
-	depends on FM10K && VXLAN && !(FM10K=y && VXLAN=m)
-	---help---
-	  This allows one to create VXLAN virtual interfaces that provide
-	  Layer 2 Networks over Layer 3 Networks. VXLAN is often used
-	  to tunnel virtual network infrastructure in virtualized environments.
-	  Say Y here if you want to use Virtual eXtensible Local Area Network
-	  (VXLAN) in the driver.
-
 endif # NET_VENDOR_INTEL
* Unmerged path drivers/net/ethernet/intel/fm10k/fm10k_netdev.c
