tpm: declare tpm2_get_pcr_allocation() as static

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Jarkko Sakkinen <jarkko.sakkinen@linux.intel.com>
commit 61841be6358c03e864ad4c386c9a102edbba9cb8
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/61841be6.failed

There's no need to export tpm2_get_pcr_alloation() because it is only
a helper function for tpm2_auto_startup(). For the same reason it does
not make much sense to maintain documentation for it.

	Signed-off-by: Jarkko Sakkinen <jarkko.sakkinen@linux.intel.com>
(cherry picked from commit 61841be6358c03e864ad4c386c9a102edbba9cb8)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/char/tpm/tpm2-cmd.c
diff --cc drivers/char/tpm/tpm2-cmd.c
index 6fbd42c2a528,881aea9732bf..000000000000
--- a/drivers/char/tpm/tpm2-cmd.c
+++ b/drivers/char/tpm/tpm2-cmd.c
@@@ -992,45 -997,6 +992,48 @@@ int tpm2_probe(struct tpm_chip *chip
  }
  EXPORT_SYMBOL_GPL(tpm2_probe);
  
++<<<<<<< HEAD
 +/**
 + * tpm2_auto_startup - Perform the standard automatic TPM initialization
 + *                     sequence
 + * @chip: TPM chip to use
 + *
 + * Returns 0 on success, < 0 in case of fatal error.
 + */
 +int tpm2_auto_startup(struct tpm_chip *chip)
 +{
 +	int rc;
 +
 +	rc = tpm_get_timeouts(chip);
 +	if (rc)
 +		goto out;
 +
 +	rc = tpm2_do_selftest(chip);
 +	if (rc != 0 && rc != TPM2_RC_INITIALIZE) {
 +		dev_err(&chip->dev, "TPM self test failed\n");
 +		goto out;
 +	}
 +
 +	if (rc == TPM2_RC_INITIALIZE) {
 +		rc = tpm2_startup(chip, TPM2_SU_CLEAR);
 +		if (rc)
 +			goto out;
 +
 +		rc = tpm2_do_selftest(chip);
 +		if (rc) {
 +			dev_err(&chip->dev, "TPM self test failed\n");
 +			goto out;
 +		}
 +	}
 +
 +out:
 +	if (rc > 0)
 +		rc = -ENODEV;
 +	return rc;
 +}
 +
++=======
++>>>>>>> 61841be6358c (tpm: declare tpm2_get_pcr_allocation() as static)
  struct tpm2_pcr_selection {
  	__be16  hash_alg;
  	u8  size_of_select;
diff --git a/drivers/char/tpm/tpm.h b/drivers/char/tpm/tpm.h
index d3f1baece1a9..c3aea80c8e11 100644
--- a/drivers/char/tpm/tpm.h
+++ b/drivers/char/tpm/tpm.h
@@ -551,5 +551,4 @@ int tpm2_auto_startup(struct tpm_chip *chip);
 void tpm2_shutdown(struct tpm_chip *chip, u16 shutdown_type);
 unsigned long tpm2_calc_ordinal_duration(struct tpm_chip *chip, u32 ordinal);
 int tpm2_probe(struct tpm_chip *chip);
-ssize_t tpm2_get_pcr_allocation(struct tpm_chip *chip);
 #endif
* Unmerged path drivers/char/tpm/tpm2-cmd.c
