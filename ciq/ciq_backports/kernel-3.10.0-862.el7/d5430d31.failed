bnxt_en: Reduce default rings on multi-port cards.

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [netdrv] bnxt_en: Reduce default rings on multi-port cards (Jonathan Toppins) [1459659]
Rebuild_FUZZ: 98.99%
commit-author Michael Chan <michael.chan@broadcom.com>
commit d5430d31ca72ec37fd539fd1c5230859509be4ef
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/d5430d31.failed

Reduce default rings from 8 to 4 on multi-port cards to reduce memory
usage.

	Signed-off-by: Michael Chan <michael.chan@broadcom.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit d5430d31ca72ec37fd539fd1c5230859509be4ef)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/broadcom/bnxt/bnxt.c
diff --cc drivers/net/ethernet/broadcom/bnxt/bnxt.c
index c1b5092f7533,4406f9195851..000000000000
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt.c
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt.c
@@@ -7576,9 -8051,14 +7581,17 @@@ static int bnxt_init_one(struct pci_de
  
  	bnxt_hwrm_func_qcfg(bp);
  	bnxt_hwrm_port_led_qcaps(bp);
 -	bnxt_ethtool_init(bp);
  	bnxt_dcb_init(bp);
  
++<<<<<<< HEAD
 +	bnxt_set_rx_skb_mode(bp);
++=======
+ 	rc = bnxt_probe_phy(bp);
+ 	if (rc)
+ 		goto init_err_pci_clean;
+ 
+ 	bnxt_set_rx_skb_mode(bp, false);
++>>>>>>> d5430d31ca72 (bnxt_en: Reduce default rings on multi-port cards.)
  	bnxt_set_tpa_flags(bp);
  	bnxt_set_ring_params(bp);
  	bnxt_set_max_func_irqs(bp, max_irqs);
* Unmerged path drivers/net/ethernet/broadcom/bnxt/bnxt.c
diff --git a/drivers/net/ethernet/broadcom/bnxt/bnxt.h b/drivers/net/ethernet/broadcom/bnxt/bnxt.h
index d7e7a80138cd..48be9770c6ab 100644
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt.h
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt.h
@@ -1133,6 +1133,7 @@ struct bnxt {
 	u8			nge_port_cnt;
 	__le16			nge_fw_dst_port_id;
 	u8			port_partition_type;
+	u8			port_count;
 	u16			br_mode;
 
 	u16			rx_coal_ticks;
