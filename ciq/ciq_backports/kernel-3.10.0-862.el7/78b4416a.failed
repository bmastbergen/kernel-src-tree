powerpc/perf: Handle sdar_mode for marked event in power9

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [powerpc] perf: Handle sdar_mode for marked event in power9 (Mauricio Oliveira) [1494439]
Rebuild_FUZZ: 92.45%
commit-author Madhavan Srinivasan <maddy@linux.vnet.ibm.com>
commit 78b4416aa249365dd3c1b64da4d3a232014320b0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/78b4416a.failed

MMCRA[SDAR_MODE] specifices how the SDAR should be updated in
continous sampling mode. On P9 it must be set to 0b00 when
MMCRA[63] is set.

Fixes: c7c3f568beff2 ('powerpc/perf: macros for power9 format encoding')
	Signed-off-by: Madhavan Srinivasan <maddy@linux.vnet.ibm.com>
	Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
(cherry picked from commit 78b4416aa249365dd3c1b64da4d3a232014320b0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/powerpc/perf/isa207-common.c
#	arch/powerpc/perf/isa207-common.h
diff --cc arch/powerpc/perf/isa207-common.h
index 03205f5354e9,899210f14ee4..000000000000
--- a/arch/powerpc/perf/isa207-common.h
+++ b/arch/powerpc/perf/isa207-common.h
@@@ -216,9 -244,14 +216,15 @@@
  #define MMCRA_THR_CTL_SHIFT		8
  #define MMCRA_THR_SEL_SHIFT		16
  #define MMCRA_THR_CMP_SHIFT		32
++<<<<<<< HEAD
 +#define MMCRA_SDAR_MODE_TLB		(1ull << 42)
++=======
+ #define MMCRA_SDAR_MODE_SHIFT		42
+ #define MMCRA_SDAR_MODE_TLB		(1ull << MMCRA_SDAR_MODE_SHIFT)
+ #define MMCRA_SDAR_MODE_NO_UPDATES	~(0x3ull << MMCRA_SDAR_MODE_SHIFT)
++>>>>>>> 78b4416aa249 (powerpc/perf: Handle sdar_mode for marked event in power9)
  #define MMCRA_IFM_SHIFT			30
  
 -/* MMCR1 Threshold Compare bit constant for power9 */
 -#define p9_MMCRA_THR_CMP_SHIFT	45
 -
  /* Bits in MMCR2 for PowerISA v2.07 */
  #define MMCR2_FCS(pmc)			(1ull << (63 - (((pmc) - 1) * 9)))
  #define MMCR2_FCP(pmc)			(1ull << (62 - (((pmc) - 1) * 9)))
* Unmerged path arch/powerpc/perf/isa207-common.c
* Unmerged path arch/powerpc/perf/isa207-common.c
* Unmerged path arch/powerpc/perf/isa207-common.h
