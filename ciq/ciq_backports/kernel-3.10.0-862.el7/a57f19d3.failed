net sched: ipt action fix late binding

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Jamal Hadi Salim <jhs@mojatatu.com>
commit a57f19d30b2d5fb632b73729b39d05bae188eaed
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/a57f19d3.failed

This was broken and is fixed with this patch.

//add an ipt action and give it an instance id of 1
sudo tc actions add action ipt -j mark --set-mark 2 index 1
//create a filter which binds to ipt action id 1
sudo tc filter add dev $DEV parent ffff: protocol ip prio 1 u32\
match ip dst 17.0.0.1/32 flowid 1:10 action ipt index 1

Message before bug fix was:
RTNETLINK answers: Invalid argument
We have an error talking to the kernel

	Signed-off-by: Jamal Hadi Salim <jhs@mojatatu.com>
	Reviewed-by: Cong Wang <xiyou.wangcong@gmail.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit a57f19d30b2d5fb632b73729b39d05bae188eaed)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/sched/act_ipt.c
diff --cc net/sched/act_ipt.c
index 598c9043077a,8b5270008a6e..000000000000
--- a/net/sched/act_ipt.c
+++ b/net/sched/act_ipt.c
@@@ -112,11 -124,9 +120,17 @@@ static int tcf_ipt_init(struct net *net
  	if (nla_len(tb[TCA_IPT_TARG]) < td->u.target_size)
  		return -EINVAL;
  
++<<<<<<< HEAD
 +	if (tb[TCA_IPT_INDEX] != NULL)
 +		index = nla_get_u32(tb[TCA_IPT_INDEX]);
 +
 +	if (!tcf_hash_check(index, a, bind) ) {
 +		ret = tcf_hash_create(index, est, a, sizeof(*ipt), bind, false);
++=======
+ 	if (!tcf_hash_check(tn, index, a, bind)) {
+ 		ret = tcf_hash_create(tn, index, est, a, sizeof(*ipt), bind,
+ 				      false);
++>>>>>>> a57f19d30b2d (net sched: ipt action fix late binding)
  		if (ret)
  			return ret;
  		ret = ACT_P_CREATED;
* Unmerged path net/sched/act_ipt.c
