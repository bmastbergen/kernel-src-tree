scsi: qla2xxx: Simpify unregistration of FC-NVMe local/remote ports

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [scsi] qla2xxx: Simpify unregistration of FC-NVMe local/remote ports (Himanshu Madhani) [1316281]
Rebuild_FUZZ: 95.31%
commit-author himanshu.madhani@cavium.com <himanshu.madhani@cavium.com>
commit 5621b0dd74532c09965264c14958de3f85b498a6
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/5621b0dd.failed

Simplified waiting for unregister local/remote FC-NVMe ports
to complete cleanup.

	Signed-off-by: Duane Grigsby <duane.grigsby@cavium.com>
	Signed-off-by: Darren Trapp <darren.trapp@cavium.com>
	Signed-off-by: Anil Gurumurthy <anil.gurumurthy@cavium.com>
	Signed-off-by: Himanshu Madhani <himanshu.madhani@cavium.com>
	Reviewed-by: Johannes Thumshirn <jthumshirn@suse.de>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit 5621b0dd74532c09965264c14958de3f85b498a6)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/qla2xxx/qla_def.h
#	drivers/scsi/qla2xxx/qla_nvme.c
diff --cc drivers/scsi/qla2xxx/qla_def.h
index 3f28536dc812,b3e3982a9db0..000000000000
--- a/drivers/scsi/qla2xxx/qla_def.h
+++ b/drivers/scsi/qla2xxx/qla_def.h
@@@ -2027,6 -2291,39 +2027,42 @@@ typedef struct fc_port 
  	uint16_t loop_id;
  	uint16_t old_loop_id;
  
++<<<<<<< HEAD
++=======
+ 	unsigned int conf_compl_supported:1;
+ 	unsigned int deleted:2;
+ 	unsigned int local:1;
+ 	unsigned int logout_on_delete:1;
+ 	unsigned int logo_ack_needed:1;
+ 	unsigned int keep_nport_handle:1;
+ 	unsigned int send_els_logo:1;
+ 	unsigned int login_pause:1;
+ 	unsigned int login_succ:1;
+ 
+ 	struct work_struct nvme_del_work;
+ 	struct completion nvme_del_done;
+ 	uint32_t nvme_prli_service_param;
+ #define NVME_PRLI_SP_CONF       BIT_7
+ #define NVME_PRLI_SP_INITIATOR  BIT_5
+ #define NVME_PRLI_SP_TARGET     BIT_4
+ #define NVME_PRLI_SP_DISCOVERY  BIT_3
+ 	uint8_t nvme_flag;
+ #define NVME_FLAG_REGISTERED 4
+ 
+ 	struct fc_port *conflict;
+ 	unsigned char logout_completed;
+ 	int generation;
+ 
+ 	struct se_session *se_sess;
+ 	struct kref sess_kref;
+ 	struct qla_tgt *tgt;
+ 	unsigned long expires;
+ 	struct list_head del_list_entry;
+ 	struct work_struct free_work;
+ 
+ 	struct qlt_plogi_ack_t *plogi_link[QLT_PLOGI_LINK_MAX];
+ 
++>>>>>>> 5621b0dd7453 (scsi: qla2xxx: Simpify unregistration of FC-NVMe local/remote ports)
  	uint16_t tgt_id;
  	uint16_t old_tgt_id;
  
@@@ -3654,6 -4132,12 +3690,15 @@@ typedef struct scsi_qla_host 
  	uint8_t		port_name[WWN_SIZE];
  	uint8_t		fabric_node_name[WWN_SIZE];
  
++<<<<<<< HEAD
++=======
+ 	struct		nvme_fc_local_port *nvme_local_port;
+ 	struct completion nvme_del_done;
+ 	struct list_head nvme_rport_list;
+ 	atomic_t 	nvme_active_aen_cnt;
+ 	uint16_t	nvme_last_rptd_aen;
+ 
++>>>>>>> 5621b0dd7453 (scsi: qla2xxx: Simpify unregistration of FC-NVMe local/remote ports)
  	uint16_t	fcoe_vlan_id;
  	uint16_t	fcoe_fcf_idx;
  	uint8_t		fcoe_vn_port_mac[6];
* Unmerged path drivers/scsi/qla2xxx/qla_nvme.c
* Unmerged path drivers/scsi/qla2xxx/qla_def.h
* Unmerged path drivers/scsi/qla2xxx/qla_nvme.c
