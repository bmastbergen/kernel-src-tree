nfp: move nfp_net_vecs_init()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Jakub Kicinski <jakub.kicinski@netronome.com>
commit cd083ce158cf43f8c26ad9a552ba25b222536e1e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/cd083ce1.failed

Move nfp_net_vecs_init() after all datapath functions.  We will need
to init poll() callbacks from this function soon.

No functional changes.

	Signed-off-by: Jakub Kicinski <jakub.kicinski@netronome.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit cd083ce158cf43f8c26ad9a552ba25b222536e1e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/netronome/nfp/nfp_net_common.c
diff --cc drivers/net/ethernet/netronome/nfp/nfp_net_common.c
index 5094c56dbda7,f8dba793a8fe..000000000000
--- a/drivers/net/ethernet/netronome/nfp/nfp_net_common.c
+++ b/drivers/net/ethernet/netronome/nfp/nfp_net_common.c
@@@ -487,41 -500,10 +487,44 @@@ nfp_net_rx_ring_init(struct nfp_net_rx_
  	rx_ring->r_vec = r_vec;
  
  	rx_ring->fl_qcidx = rx_ring->idx * nn->stride_rx;
 +	rx_ring->rx_qcidx = rx_ring->fl_qcidx + (nn->stride_rx - 1);
 +
  	rx_ring->qcp_fl = nn->rx_bar + NFP_QCP_QUEUE_OFF(rx_ring->fl_qcidx);
 +	rx_ring->qcp_rx = nn->rx_bar + NFP_QCP_QUEUE_OFF(rx_ring->rx_qcidx);
 +}
 +
 +/**
++<<<<<<< HEAD
 + * nfp_net_vecs_init() - Assign IRQs and setup rvecs.
 + * @netdev:   netdev structure
 + */
 +static void nfp_net_vecs_init(struct net_device *netdev)
 +{
 +	struct nfp_net *nn = netdev_priv(netdev);
 +	struct nfp_net_r_vector *r_vec;
 +	int r;
 +
 +	nn->lsc_handler = nfp_net_irq_lsc;
 +	nn->exn_handler = nfp_net_irq_exn;
 +
 +	for (r = 0; r < nn->max_r_vecs; r++) {
 +		struct msix_entry *entry;
 +
 +		entry = &nn->irq_entries[NFP_NET_NON_Q_VECTORS + r];
 +
 +		r_vec = &nn->r_vecs[r];
 +		r_vec->nfp_net = nn;
 +		r_vec->handler = nfp_net_irq_rxtx;
 +		r_vec->irq_entry = entry->entry;
 +		r_vec->irq_vector = entry->vector;
 +
 +		cpumask_set_cpu(r, &r_vec->affinity_mask);
 +	}
  }
  
  /**
++=======
++>>>>>>> cd083ce158cf (nfp: move nfp_net_vecs_init())
   * nfp_net_aux_irq_request() - Request an auxiliary interrupt (LSC or EXN)
   * @nn:		NFP Network structure
   * @ctrl_offset: Control BAR offset where IRQ configuration should be written
* Unmerged path drivers/net/ethernet/netronome/nfp/nfp_net_common.c
