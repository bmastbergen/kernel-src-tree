mpls: Allow mpls_gso and mpls_router to be built as modules

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Robert Shearman <rshearma@brocade.com>
commit 8a08919f43d9955d5afc5d6b416964401e3c58d8
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/8a08919f.failed

CONFIG_MPLS=m doesn't result in a kernel module being built because it
applies to the net/mpls directory, rather than to .o files.

So revert the MPLS menuitem to being a boolean and make MPLS_GSO and
MPLS_ROUTING tristates to allow mpls_gso and mpls_router modules to be
produced as desired.

	Cc: "Eric W. Biederman" <ebiederm@xmission.com>
	Signed-off-by: Robert Shearman <rshearma@brocade.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 8a08919f43d9955d5afc5d6b416964401e3c58d8)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/mpls/Kconfig
#	net/mpls/Makefile
diff --cc net/mpls/Kconfig
index 37421db88965,17bde799c854..000000000000
--- a/net/mpls/Kconfig
+++ b/net/mpls/Kconfig
@@@ -1,9 -1,30 +1,36 @@@
  #
  # MPLS configuration
  #
++<<<<<<< HEAD
++=======
+ 
+ menuconfig MPLS
+ 	bool "MultiProtocol Label Switching"
+ 	default n
+ 	---help---
+ 	  MultiProtocol Label Switching routes packets through logical
+ 	  circuits.  Originally conceived as a way of routing packets at
+ 	  hardware speeds (before hardware was capable of routing ipv4 packets),
+ 	  MPLS remains a simple way of making tunnels.
+ 
+ 	  If you have not heard of MPLS you probably want to say N here.
+ 
+ if MPLS
+ 
++>>>>>>> 8a08919f43d9 (mpls: Allow mpls_gso and mpls_router to be built as modules)
  config NET_MPLS_GSO
  	tristate "MPLS: GSO support"
  	help
  	 This is helper module to allow segmentation of non-MPLS GSO packets
  	 that have had MPLS stack entries pushed onto them and thus
  	 become MPLS GSO packets.
++<<<<<<< HEAD
++=======
+ 
+ config MPLS_ROUTING
+ 	tristate "MPLS: routing support"
+ 	help
+ 	 Add support for forwarding of mpls packets.
+ 
+ endif # MPLS
++>>>>>>> 8a08919f43d9 (mpls: Allow mpls_gso and mpls_router to be built as modules)
diff --cc net/mpls/Makefile
index 6dec088c2d0f,65bbe68c72e6..000000000000
--- a/net/mpls/Makefile
+++ b/net/mpls/Makefile
@@@ -2,3 -2,6 +2,9 @@@
  # Makefile for MPLS.
  #
  obj-$(CONFIG_NET_MPLS_GSO) += mpls_gso.o
++<<<<<<< HEAD
++=======
+ obj-$(CONFIG_MPLS_ROUTING) += mpls_router.o
+ 
+ mpls_router-y := af_mpls.o
++>>>>>>> 8a08919f43d9 (mpls: Allow mpls_gso and mpls_router to be built as modules)
* Unmerged path net/mpls/Kconfig
* Unmerged path net/mpls/Makefile
