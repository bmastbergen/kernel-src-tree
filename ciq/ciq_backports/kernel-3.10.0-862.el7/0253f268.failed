net/mlx5e: add IPV6 dependency

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [infiniband] lx5e: add IPV6 dependency (Don Dutile) [1385309 1385649 1386645 1409099 1456667 1456687]
Rebuild_FUZZ: 90.91%
commit-author Arnd Bergmann <arnd@arndb.de>
commit 0253f2681f4445e9003fb27dc743ef7d25e8f3b9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/0253f268.failed

The ethernet support now calls directly into the ipv6 core code, which
fails if IPV6 is a loadable module but mlx5 is built-in:

drivers/net/ethernet/mellanox/mlx5/core/en_tc.o: In function `mlx5e_create_encap_header_ipv6':
en_tc.c:(.text.mlx5e_create_encap_header_ipv6+0x110): undefined reference to `ip6_route_output_flags'

This adds a dependency to ensure that MLX5_CORE_EN can only be built
if we are able link the kernel successfully. The downside is that the
ethernet option can be hidden. Alternatively we could make MLX5_CORE
depend on "IPV6 || !IPV6", which would force MLX5_CORE to be a module
when IPV6 is, including in configurations where we don't use the ethernet
support at all.

	Signed-off-by: Arnd Bergmann <arnd@arndb.de>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 0253f2681f4445e9003fb27dc743ef7d25e8f3b9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/Kconfig
diff --cc drivers/net/ethernet/mellanox/mlx5/core/Kconfig
index 521cfdb7d11e,117170014e88..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/Kconfig
+++ b/drivers/net/ethernet/mellanox/mlx5/core/Kconfig
@@@ -14,7 -14,8 +14,12 @@@ config MLX5_COR
  config MLX5_CORE_EN
  	bool "Mellanox Technologies ConnectX-4 Ethernet support"
  	depends on NETDEVICES && ETHERNET && PCI && MLX5_CORE
++<<<<<<< HEAD
 +	select PTP_1588_CLOCK
++=======
+ 	depends on IPV6=y || IPV6=n || MLX5_CORE=m
+ 	imply PTP_1588_CLOCK
++>>>>>>> 0253f2681f44 (net/mlx5e: add IPV6 dependency)
  	default n
  	---help---
  	  Ethernet support in Mellanox Technologies ConnectX-4 NIC.
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/Kconfig
