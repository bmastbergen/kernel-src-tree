fib_trie: Fix uninitialized variable warning

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Alexander Duyck <alexander.h.duyck@redhat.com>
commit 61f0d861fc6924fa673ecf1128a911d49cb10dc8
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/61f0d861.failed

The 0-day kernel test infrastructure reported a use of uninitialized
variable warning for local_table due to the fact that the local and main
allocations had been swapped from the original setup.  This change corrects
that by making it so that we free the main table if the local table
allocation fails.

Fixes: 0ddcf43d5 ("ipv4: FIB Local/MAIN table collapse")

	Signed-off-by: Alexander Duyck <alexander.h.duyck@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 61f0d861fc6924fa673ecf1128a911d49cb10dc8)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv4/fib_frontend.c
diff --cc net/ipv4/fib_frontend.c
index a1edce8ca987,c1caf9ded280..000000000000
--- a/net/ipv4/fib_frontend.c
+++ b/net/ipv4/fib_frontend.c
@@@ -52,14 -52,14 +52,22 @@@ static int __net_init fib4_rules_init(s
  {
  	struct fib_table *local_table, *main_table;
  
++<<<<<<< HEAD
 +	local_table = fib_trie_table(RT_TABLE_LOCAL);
- 	if (local_table == NULL)
++=======
+ 	main_table  = fib_trie_table(RT_TABLE_MAIN, NULL);
+ 	if (main_table == NULL)
  		return -ENOMEM;
  
+ 	local_table = fib_trie_table(RT_TABLE_LOCAL, main_table);
++>>>>>>> 61f0d861fc69 (fib_trie: Fix uninitialized variable warning)
+ 	if (local_table == NULL)
+ 		goto fail;
+ 
 +	main_table  = fib_trie_table(RT_TABLE_MAIN);
 +	if (main_table == NULL)
 +		goto fail;
 +
  	hlist_add_head_rcu(&local_table->tb_hlist,
  				&net->ipv4.fib_table_hash[TABLE_LOCAL_INDEX]);
  	hlist_add_head_rcu(&main_table->tb_hlist,
* Unmerged path net/ipv4/fib_frontend.c
