RDMA/bnxt_re: Add bnxt_re driver build support

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Selvin Xavier <selvin.xavier@broadcom.com>
commit 592e8b3226a2b6d116589908d96c45fa13302ad7
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/592e8b32.failed

Makefile and Kconfig changes for enabling bnxt_re compilation

	Signed-off-by: Devesh Sharma <devesh.sharma@broadcom.com>
	Signed-off-by: Somnath Kotur <somnath.kotur@broadcom.com>
	Signed-off-by: Sriharsha Basavapatna <sriharsha.basavapatna@broadcom.com>
	Signed-off-by: Selvin Xavier <selvin.xavier@broadcom.com>
	Reviewed-by: Leon Romanovsky <leonro@mellanox.com>
	Signed-off-by: Doug Ledford <dledford@redhat.com>
(cherry picked from commit 592e8b3226a2b6d116589908d96c45fa13302ad7)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	MAINTAINERS
diff --cc MAINTAINERS
index e3aefd4b774e,468d2e8e2d4d..000000000000
--- a/MAINTAINERS
+++ b/MAINTAINERS
@@@ -1830,9 -2795,33 +1830,36 @@@ S:	Maintaine
  F:	drivers/bcma/
  F:	include/linux/bcma/
  
++<<<<<<< HEAD
++=======
+ BROADCOM SYSTEMPORT ETHERNET DRIVER
+ M:	Florian Fainelli <f.fainelli@gmail.com>
+ L:	netdev@vger.kernel.org
+ S:	Supported
+ F:	drivers/net/ethernet/broadcom/bcmsysport.*
+ 
+ BROADCOM VULCAN ARM64 SOC
+ M:	Jayachandran C. <c.jayachandran@gmail.com>
+ M:	bcm-kernel-feedback-list@broadcom.com
+ L:	linux-arm-kernel@lists.infradead.org (moderated for non-subscribers)
+ S:	Maintained
+ F:	arch/arm64/boot/dts/broadcom/vulcan*
+ 
+ BROADCOM NETXTREME-E ROCE DRIVER
+ M:	Selvin Xavier <selvin.xavier@broadcom.com>
+ M:	Devesh Sharma <devesh.sharma@broadcom.com>
+ M:	Somnath Kotur <somnath.kotur@broadcom.com>
+ M:	Sriharsha Basavapatna <sriharsha.basavapatna@broadcom.com>
+ L:	linux-rdma@vger.kernel.org
+ W:	http://www.broadcom.com
+ S:	Supported
+ F:	drivers/infiniband/hw/bnxt_re/
+ F:	include/uapi/rdma/bnxt_re-abi.h
+ 
++>>>>>>> 592e8b3226a2 (RDMA/bnxt_re: Add bnxt_re driver build support)
  BROCADE BFA FC SCSI DRIVER
 -M:	Anil Gurumurthy <anil.gurumurthy@qlogic.com>
 -M:	Sudarsana Kalluru <sudarsana.kalluru@qlogic.com>
 +M:	Anil Gurumurthy <agurumur@brocade.com>
 +M:	Vijaya Mohan Guvva <vmohan@brocade.com>
  L:	linux-scsi@vger.kernel.org
  S:	Supported
  F:	drivers/scsi/bfa/
* Unmerged path MAINTAINERS
diff --git a/drivers/infiniband/Kconfig b/drivers/infiniband/Kconfig
index b45fab8c00a9..e3656817d0cd 100644
--- a/drivers/infiniband/Kconfig
+++ b/drivers/infiniband/Kconfig
@@ -93,4 +93,6 @@ source "drivers/infiniband/hw/hfi1/Kconfig"
 
 source "drivers/infiniband/hw/qedr/Kconfig"
 
+source "drivers/infiniband/hw/bnxt_re/Kconfig"
+
 endif # INFINIBAND
diff --git a/drivers/infiniband/hw/Makefile b/drivers/infiniband/hw/Makefile
index 530cd544fdd1..17953833aeb2 100644
--- a/drivers/infiniband/hw/Makefile
+++ b/drivers/infiniband/hw/Makefile
@@ -13,3 +13,4 @@ obj-$(CONFIG_INFINIBAND_OCRDMA)		+= ocrdma/
 obj-$(CONFIG_INFINIBAND_USNIC)		+= usnic/
 obj-$(CONFIG_INFINIBAND_HFI1)		+= hfi1/
 obj-$(CONFIG_INFINIBAND_QEDR)		+= qedr/
+obj-$(CONFIG_INFINIBAND_BNXT_RE)	+= bnxt_re/
diff --git a/drivers/infiniband/hw/bnxt_re/Kconfig b/drivers/infiniband/hw/bnxt_re/Kconfig
new file mode 100644
index 000000000000..cd0175e32584
--- /dev/null
+++ b/drivers/infiniband/hw/bnxt_re/Kconfig
@@ -0,0 +1,9 @@
+config INFINIBAND_BNXT_RE
+    tristate "Broadcom Netxtreme HCA support"
+    depends on ETHERNET && NETDEVICES && PCI && INET
+    select NET_VENDOR_BROADCOM
+    select BNXT
+    ---help---
+	  This driver supports Broadcom NetXtreme-E 10/25/40/50 gigabit
+	  RoCE HCAs.  To compile this driver as a module, choose M here:
+	  the module will be called bnxt_re.
diff --git a/drivers/infiniband/hw/bnxt_re/Makefile b/drivers/infiniband/hw/bnxt_re/Makefile
new file mode 100644
index 000000000000..036f84efbc73
--- /dev/null
+++ b/drivers/infiniband/hw/bnxt_re/Makefile
@@ -0,0 +1,6 @@
+
+ccflags-y := -Idrivers/net/ethernet/broadcom/bnxt
+obj-$(CONFIG_INFINIBAND_BNXT_RE) += bnxt_re.o
+bnxt_re-y := main.o ib_verbs.o \
+	     qplib_res.o qplib_rcfw.o	\
+	     qplib_sp.o qplib_fp.o
