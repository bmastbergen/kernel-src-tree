sched/headers: Prepare for new header dependencies before moving code to <uapi/linux/sched/types.h>

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Ingo Molnar <mingo@kernel.org>
commit ae7e81c077d60507dcec139e40a6d10cf932cf4b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/ae7e81c0.failed

We are going to move scheduler ABI details to <uapi/linux/sched/types.h>,
which will be used from a number of .c files.

Create empty placeholder header that maps to <linux/types.h>.

Include the new header in the files that are going to need it.

	Acked-by: Linus Torvalds <torvalds@linux-foundation.org>
	Cc: Mike Galbraith <efault@gmx.de>
	Cc: Peter Zijlstra <peterz@infradead.org>
	Cc: Thomas Gleixner <tglx@linutronix.de>
	Cc: linux-kernel@vger.kernel.org
	Signed-off-by: Ingo Molnar <mingo@kernel.org>
(cherry picked from commit ae7e81c077d60507dcec139e40a6d10cf932cf4b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/arm/common/bL_switcher.c
#	crypto/crypto_engine.c
#	drivers/firmware/psci_checker.c
#	drivers/staging/android/ion/ion_heap.c
#	drivers/tty/serial/sc16is7xx.c
#	kernel/locking/locktorture.c
#	kernel/rcu/rcuperf.c
#	kernel/rcu/rcutorture.c
#	kernel/rcu/tree.c
#	kernel/rcu/tree_plugin.h
#	kernel/sched/core.c
#	kernel/sched/cpufreq_schedutil.c
diff --cc kernel/sched/core.c
index 108629661cfb,ed39d1d0b64a..000000000000
--- a/kernel/sched/core.c
+++ b/kernel/sched/core.c
@@@ -1,80 -1,28 +1,91 @@@
  /*
   *  kernel/sched/core.c
   *
 - *  Core kernel scheduler code and related syscalls
 + *  Kernel scheduler and related syscalls
   *
   *  Copyright (C) 1991-2002  Linus Torvalds
 + *
 + *  1996-12-23  Modified by Dave Grothe to fix bugs in semaphores and
 + *		make semaphores SMP safe
 + *  1998-11-19	Implemented schedule_timeout() and related stuff
 + *		by Andrea Arcangeli
 + *  2002-01-04	New ultra-scalable O(1) scheduler by Ingo Molnar:
 + *		hybrid priority-list and round-robin design with
 + *		an array-switch method of distributing timeslices
 + *		and per-CPU runqueues.  Cleanups and useful suggestions
 + *		by Davide Libenzi, preemptible kernel bits by Robert Love.
 + *  2003-09-03	Interactivity tuning by Con Kolivas.
 + *  2004-04-02	Scheduler domains code by Nick Piggin
 + *  2007-04-15  Work begun on replacing all interactivity tuning with a
 + *              fair scheduling design by Con Kolivas.
 + *  2007-05-05  Load balancing (smp-nice) and other improvements
 + *              by Peter Williams
 + *  2007-05-06  Interactivity improvements to CFS by Mike Galbraith
 + *  2007-07-01  Group scheduling enhancements by Srivatsa Vaddagiri
 + *  2007-11-29  RT balancing improvements by Steven Rostedt, Gregory Haskins,
 + *              Thomas Gleixner, Mike Kravetz
   */
++<<<<<<< HEAD
++=======
+ #include <linux/sched.h>
+ #include <linux/sched/clock.h>
+ #include <uapi/linux/sched/types.h>
+ #include <linux/cpuset.h>
+ #include <linux/delayacct.h>
+ #include <linux/init_task.h>
+ #include <linux/context_tracking.h>
+ #include <linux/rcupdate_wait.h>
++>>>>>>> ae7e81c077d6 (sched/headers: Prepare for new header dependencies before moving code to <uapi/linux/sched/types.h>)
  
 -#include <linux/blkdev.h>
 -#include <linux/kprobes.h>
 -#include <linux/mmu_context.h>
 +#include <linux/mm.h>
  #include <linux/module.h>
  #include <linux/nmi.h>
 -#include <linux/prefetch.h>
 -#include <linux/profile.h>
 +#include <linux/init.h>
 +#include <linux/uaccess.h>
 +#include <linux/highmem.h>
 +#include <asm/mmu_context.h>
 +#include <linux/interrupt.h>
 +#include <linux/capability.h>
 +#include <linux/completion.h>
 +#include <linux/kernel_stat.h>
 +#include <linux/debug_locks.h>
 +#include <linux/perf_event.h>
  #include <linux/security.h>
 +#include <linux/notifier.h>
 +#include <linux/profile.h>
 +#include <linux/freezer.h>
 +#include <linux/vmalloc.h>
 +#include <linux/blkdev.h>
 +#include <linux/delay.h>
 +#include <linux/pid_namespace.h>
 +#include <linux/smp.h>
 +#include <linux/threads.h>
 +#include <linux/timer.h>
 +#include <linux/rcupdate.h>
 +#include <linux/cpu.h>
 +#include <linux/cpuset.h>
 +#include <linux/percpu.h>
 +#include <linux/proc_fs.h>
 +#include <linux/seq_file.h>
 +#include <linux/sysctl.h>
  #include <linux/syscalls.h>
 +#include <linux/times.h>
 +#include <linux/tsacct_kern.h>
 +#include <linux/kprobes.h>
 +#include <linux/delayacct.h>
 +#include <linux/unistd.h>
 +#include <linux/pagemap.h>
 +#include <linux/hrtimer.h>
 +#include <linux/tick.h>
 +#include <linux/debugfs.h>
 +#include <linux/ctype.h>
 +#include <linux/ftrace.h>
 +#include <linux/slab.h>
 +#include <linux/init_task.h>
 +#include <linux/binfmts.h>
 +#include <linux/context_tracking.h>
 +#include <linux/compiler.h>
 +#include <linux/frame.h>
  
  #include <asm/switch_to.h>
  #include <asm/tlb.h>
* Unmerged path arch/arm/common/bL_switcher.c
* Unmerged path crypto/crypto_engine.c
* Unmerged path drivers/firmware/psci_checker.c
* Unmerged path drivers/staging/android/ion/ion_heap.c
* Unmerged path drivers/tty/serial/sc16is7xx.c
* Unmerged path kernel/locking/locktorture.c
* Unmerged path kernel/rcu/rcuperf.c
* Unmerged path kernel/rcu/rcutorture.c
* Unmerged path kernel/rcu/tree.c
* Unmerged path kernel/rcu/tree_plugin.h
* Unmerged path kernel/sched/cpufreq_schedutil.c
* Unmerged path arch/arm/common/bL_switcher.c
* Unmerged path crypto/crypto_engine.c
diff --git a/drivers/acpi/acpi_pad.c b/drivers/acpi/acpi_pad.c
index 54c0c178d2da..a697ffbf8a2a 100644
--- a/drivers/acpi/acpi_pad.c
+++ b/drivers/acpi/acpi_pad.c
@@ -24,6 +24,7 @@
 #include <linux/init.h>
 #include <linux/types.h>
 #include <linux/kthread.h>
+#include <uapi/linux/sched/types.h>
 #include <linux/freezer.h>
 #include <linux/cpu.h>
 #include <linux/clockchips.h>
diff --git a/drivers/block/drbd/drbd_receiver.c b/drivers/block/drbd/drbd_receiver.c
index 4222affff488..9bfd7222e7d2 100644
--- a/drivers/block/drbd/drbd_receiver.c
+++ b/drivers/block/drbd/drbd_receiver.c
@@ -36,6 +36,7 @@
 #include <linux/memcontrol.h>
 #include <linux/mm_inline.h>
 #include <linux/slab.h>
+#include <uapi/linux/sched/types.h>
 #include <linux/pkt_sched.h>
 #define __KERNEL_SYSCALLS__
 #include <linux/unistd.h>
* Unmerged path drivers/firmware/psci_checker.c
diff --git a/drivers/gpu/drm/amd/scheduler/gpu_scheduler.c b/drivers/gpu/drm/amd/scheduler/gpu_scheduler.c
index 1bf83ed113b3..16f96563cd2b 100644
--- a/drivers/gpu/drm/amd/scheduler/gpu_scheduler.c
+++ b/drivers/gpu/drm/amd/scheduler/gpu_scheduler.c
@@ -24,6 +24,7 @@
 #include <linux/kthread.h>
 #include <linux/wait.h>
 #include <linux/sched.h>
+#include <uapi/linux/sched/types.h>
 #include <drm/drmP.h>
 #include "gpu_scheduler.h"
 
diff --git a/drivers/gpu/drm/i915/intel_breadcrumbs.c b/drivers/gpu/drm/i915/intel_breadcrumbs.c
index c9c46a538edb..81ebc546fec6 100644
--- a/drivers/gpu/drm/i915/intel_breadcrumbs.c
+++ b/drivers/gpu/drm/i915/intel_breadcrumbs.c
@@ -23,6 +23,7 @@
  */
 
 #include <linux/kthread.h>
+#include <uapi/linux/sched/types.h>
 
 #include "i915_drv.h"
 
diff --git a/drivers/media/pci/ivtv/ivtv-driver.c b/drivers/media/pci/ivtv/ivtv-driver.c
index 07b8460953b6..6e2adc6d1d95 100644
--- a/drivers/media/pci/ivtv/ivtv-driver.c
+++ b/drivers/media/pci/ivtv/ivtv-driver.c
@@ -60,6 +60,7 @@
 #include <media/saa7115.h>
 #include <media/v4l2-chip-ident.h>
 #include "tuner-xc2028.h"
+#include <uapi/linux/sched/types.h>
 
 /* If you have already X v4l cards, then set this to X. This way
    the device numbers stay matched. Example: you have a WinTV card
diff --git a/drivers/mmc/core/sdio_irq.c b/drivers/mmc/core/sdio_irq.c
index f1faf9acc007..ff3fa0d29544 100644
--- a/drivers/mmc/core/sdio_irq.c
+++ b/drivers/mmc/core/sdio_irq.c
@@ -15,6 +15,7 @@
 
 #include <linux/kernel.h>
 #include <linux/sched.h>
+#include <uapi/linux/sched/types.h>
 #include <linux/kthread.h>
 #include <linux/export.h>
 #include <linux/wait.h>
diff --git a/drivers/spi/spi.c b/drivers/spi/spi.c
index bff6fccdf1f3..4e4eddab755f 100644
--- a/drivers/spi/spi.c
+++ b/drivers/spi/spi.c
@@ -34,6 +34,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/export.h>
 #include <linux/sched/rt.h>
+#include <uapi/linux/sched/types.h>
 #include <linux/delay.h>
 #include <linux/kthread.h>
 #include <linux/ioport.h>
* Unmerged path drivers/staging/android/ion/ion_heap.c
diff --git a/drivers/thermal/intel_powerclamp.c b/drivers/thermal/intel_powerclamp.c
index 9c253c7b902f..86658d889c65 100644
--- a/drivers/thermal/intel_powerclamp.c
+++ b/drivers/thermal/intel_powerclamp.c
@@ -51,6 +51,7 @@
 #include <linux/debugfs.h>
 #include <linux/seq_file.h>
 #include <linux/sched/rt.h>
+#include <uapi/linux/sched/types.h>
 
 #include <asm/nmi.h>
 #include <asm/msr.h>
* Unmerged path drivers/tty/serial/sc16is7xx.c
diff --git a/include/uapi/linux/sched/types.h b/include/uapi/linux/sched/types.h
new file mode 100644
index 000000000000..d162d315f4b5
--- /dev/null
+++ b/include/uapi/linux/sched/types.h
@@ -0,0 +1,6 @@
+#ifndef _UAPI_LINUX_SCHED_TYPES_H
+#define _UAPI_LINUX_SCHED_TYPES_H
+
+#include <linux/types.h>
+
+#endif /* _UAPI_LINUX_SCHED_TYPES_H */
diff --git a/kernel/irq/manage.c b/kernel/irq/manage.c
index 039e1265e89e..52f031565bca 100644
--- a/kernel/irq/manage.c
+++ b/kernel/irq/manage.c
@@ -17,6 +17,7 @@
 #include <linux/slab.h>
 #include <linux/sched.h>
 #include <linux/sched/rt.h>
+#include <uapi/linux/sched/types.h>
 #include <linux/task_work.h>
 
 #include "internals.h"
diff --git a/kernel/kthread.c b/kernel/kthread.c
index 703d91082618..4456bd90c399 100644
--- a/kernel/kthread.c
+++ b/kernel/kthread.c
@@ -5,6 +5,7 @@
  * even if we're invoked from userspace (think modprobe, hotplug cpu,
  * etc.).
  */
+#include <uapi/linux/sched/types.h>
 #include <linux/sched.h>
 #include <linux/kthread.h>
 #include <linux/completion.h>
* Unmerged path kernel/locking/locktorture.c
* Unmerged path kernel/rcu/rcuperf.c
* Unmerged path kernel/rcu/rcutorture.c
* Unmerged path kernel/rcu/tree.c
* Unmerged path kernel/rcu/tree_plugin.h
* Unmerged path kernel/sched/core.c
* Unmerged path kernel/sched/cpufreq_schedutil.c
diff --git a/kernel/trace/ring_buffer_benchmark.c b/kernel/trace/ring_buffer_benchmark.c
index a5457d577b98..f63e622579de 100644
--- a/kernel/trace/ring_buffer_benchmark.c
+++ b/kernel/trace/ring_buffer_benchmark.c
@@ -6,6 +6,7 @@
 #include <linux/ring_buffer.h>
 #include <linux/completion.h>
 #include <linux/kthread.h>
+#include <uapi/linux/sched/types.h>
 #include <linux/module.h>
 #include <linux/time.h>
 #include <asm/local.h>
diff --git a/kernel/trace/trace_selftest.c b/kernel/trace/trace_selftest.c
index e6525a50f501..96a7d8f4a4c1 100644
--- a/kernel/trace/trace_selftest.c
+++ b/kernel/trace/trace_selftest.c
@@ -1,5 +1,6 @@
 /* Include in trace.c */
 
+#include <uapi/linux/sched/types.h>
 #include <linux/stringify.h>
 #include <linux/kthread.h>
 #include <linux/delay.h>
diff --git a/kernel/watchdog.c b/kernel/watchdog.c
index 704b2184e535..ed4ba7eb1d52 100644
--- a/kernel/watchdog.c
+++ b/kernel/watchdog.c
@@ -19,6 +19,7 @@
 #include <linux/sysctl.h>
 #include <linux/smpboot.h>
 #include <linux/sched/rt.h>
+#include <uapi/linux/sched/types.h>
 #include <linux/tick.h>
 #include <linux/workqueue.h>
 
