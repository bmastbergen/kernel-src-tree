drm/vblank: Fix flip event vblank count

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Ville Syrj채l채 <ville.syrjala@linux.intel.com>
commit 632c6e4edef17c40bba3be67c980d959790d142f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/632c6e4e.failed

On machines where the vblank interrupt fires some time after the start
of vblank (or we just manage to race with the vblank interrupt handler)
we will currently stuff a stale vblank counter value into the flip event,
and thus we'll prematurely complete the flip.

Switch over to drm_crtc_accurate_vblank_count() to make sure we have an
up to date counter value, crucially also remember to add the +1 so that
the delayed vblank interrupt won't complete the flip prematurely.

	Cc: stable@vger.kernel.org
	Cc: Daniel Vetter <daniel@ffwll.ch>
	Suggested-by: Daniel Vetter <daniel@ffwll.ch>
	Signed-off-by: Ville Syrj채l채 <ville.syrjala@linux.intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20171010133322.24029-1-ville.syrjala@linux.intel.com
	Reviewed-by: Daniel Vetter <daniel@ffwll.ch> #irc
(cherry picked from commit 632c6e4edef17c40bba3be67c980d959790d142f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/drm_vblank.c
* Unmerged path drivers/gpu/drm/drm_vblank.c
* Unmerged path drivers/gpu/drm/drm_vblank.c
