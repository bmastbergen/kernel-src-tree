ACPICA: Dispatch active GPEs at init time

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Rafael J. Wysocki <rafael.j.wysocki@intel.com>
commit ecc1165b8b743fd1503b9c799ae3a9933b89877b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/ecc1165b.failed

In some cases GPEs are already active when they are enabled by
acpi_ev_initialize_gpe_block() and whatever happens next may depend
on the result of handling the events signaled by them, so the
events should not be discarded (which is what happens currently) and
they should be handled as soon as reasonably possible.

For this reason, modify acpi_ev_initialize_gpe_block() to
dispatch GPEs with the status flag set in-band right after
enabling them.

	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
	Tested-by: Mika Westerberg <mika.westerberg@linux.intel.com>
(cherry picked from commit ecc1165b8b743fd1503b9c799ae3a9933b89877b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/acpi/acpica/evgpeblk.c
diff --cc drivers/acpi/acpica/evgpeblk.c
index ef2c009793e7,c27386cca493..000000000000
--- a/drivers/acpi/acpica/evgpeblk.c
+++ b/drivers/acpi/acpica/evgpeblk.c
@@@ -474,12 -476,10 +477,17 @@@ acpi_ev_initialize_gpe_block(struct acp
  
  			/*
  			 * Ignore GPEs that have no corresponding _Lxx/_Exx method
- 			 * and GPEs that are used to wake the system
+ 			 * and GPEs that are used for wakeup
  			 */
++<<<<<<< HEAD
 +			if (((gpe_event_info->flags & ACPI_GPE_DISPATCH_MASK) ==
 +			     ACPI_GPE_DISPATCH_NONE)
 +			    || ((gpe_event_info->flags & ACPI_GPE_DISPATCH_MASK)
 +				== ACPI_GPE_DISPATCH_HANDLER)
++=======
+ 			if ((ACPI_GPE_DISPATCH_TYPE(gpe_event_info->flags) !=
+ 			     ACPI_GPE_DISPATCH_METHOD)
++>>>>>>> ecc1165b8b74 (ACPICA: Dispatch active GPEs at init time)
  			    || (gpe_event_info->flags & ACPI_GPE_CAN_WAKE)) {
  				continue;
  			}
* Unmerged path drivers/acpi/acpica/evgpeblk.c
