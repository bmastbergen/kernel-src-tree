mlxsw: spectrum_router: Set abort trap for IPv6

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Ido Schimmel <idosch@mellanox.com>
commit bc65a8a4f4d214c30c21cba90607c93ac676f6cf
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/bc65a8a4.failed

When we fail to insert a route we invoke the abort mechanism which
flushes all the tables and inserts a default route in each, so that all
packets incoming to the router will be trapped to the CPU.

Upon abort, add an IPv6 default route to the IPv6 tables.

	Signed-off-by: Ido Schimmel <idosch@mellanox.com>
	Signed-off-by: Jiri Pirko <jiri@mellanox.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit bc65a8a4f4d214c30c21cba90607c93ac676f6cf)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlxsw/spectrum_router.c
diff --cc drivers/net/ethernet/mellanox/mlxsw/spectrum_router.c
index ba2b4952cadc,0017a611ed16..000000000000
--- a/drivers/net/ethernet/mellanox/mlxsw/spectrum_router.c
+++ b/drivers/net/ethernet/mellanox/mlxsw/spectrum_router.c
@@@ -2642,7 -2992,10 +2655,14 @@@ static void mlxsw_sp_router_fib_event_w
  		break;
  	case FIB_EVENT_RULE_ADD: /* fall through */
  	case FIB_EVENT_RULE_DEL:
++<<<<<<< HEAD
 +		mlxsw_sp_router_fib4_abort(mlxsw_sp);
++=======
+ 		rule = fib_work->fr_info.rule;
+ 		if (!fib4_rule_default(rule) && !rule->l3mdev)
+ 			mlxsw_sp_router_fib_abort(mlxsw_sp);
+ 		fib_rule_put(rule);
++>>>>>>> bc65a8a4f4d2 (mlxsw: spectrum_router: Set abort trap for IPv6)
  		break;
  	case FIB_EVENT_NH_ADD: /* fall through */
  	case FIB_EVENT_NH_DEL:
* Unmerged path drivers/net/ethernet/mellanox/mlxsw/spectrum_router.c
