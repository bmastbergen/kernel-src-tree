x86/intel_rdt: Init padding only if a device exists

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [x86] intel_rdt: Init padding only if a device exists (Jiri Olsa) [1379551]
Rebuild_FUZZ: 95.92%
commit-author Thomas Gleixner <tglx@linutronix.de>
commit 06b57e4550d400c2e7dcafbde6fdb1fcb6fcdcee
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/06b57e45.failed

If no device exists it's pointless to calculate the padding data for the
schemata files.

	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Cc: ravi.v.shankar@intel.com
	Cc: tony.luck@intel.com
	Cc: fenghua.yu@intel.com
	Cc: vikas.shivappa@intel.com
(cherry picked from commit 06b57e4550d400c2e7dcafbde6fdb1fcb6fcdcee)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/kernel/cpu/intel_rdt.c
diff --cc arch/x86/kernel/cpu/intel_rdt.c
index ad087dd4421e,2802cad0371d..000000000000
--- a/arch/x86/kernel/cpu/intel_rdt.c
+++ b/arch/x86/kernel/cpu/intel_rdt.c
@@@ -470,10 -408,11 +468,18 @@@ static int __init intel_rdt_late_init(v
  	if (!get_rdt_resources())
  		return -ENODEV;
  
++<<<<<<< HEAD
 +	cpu_notifier_register_begin();
 +	state = rdt_notifier_init();
 +	cpu_notifier_register_done();
 +
++=======
+ 	rdt_init_padding();
+ 
+ 	state = cpuhp_setup_state(CPUHP_AP_ONLINE_DYN,
+ 				  "x86/rdt/cat:online:",
+ 				  intel_rdt_online_cpu, intel_rdt_offline_cpu);
++>>>>>>> 06b57e4550d4 (x86/intel_rdt: Init padding only if a device exists)
  	if (state < 0)
  		return state;
  
* Unmerged path arch/x86/kernel/cpu/intel_rdt.c
