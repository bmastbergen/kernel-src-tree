cxgb4i : Call into recently added cxgb4 ipv6 api

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [scsi] cxgb4i: Call into recently added cxgb4 ipv6 api (Arjun Vynipadath) [1458307]
Rebuild_FUZZ: 98.95%
commit-author Anish Bhatt <anish@chelsio.com>
commit 211a84e3c188c67bfa22f1e7e1cd228709f6299b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/211a84e3.failed

Get a reference on every ipv6 address we offload to hardware so that it cannot
be prematurely cleared out before cleanup.

	Signed-off-by: Anish Bhatt <anish@chelsio.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 211a84e3c188c67bfa22f1e7e1cd228709f6299b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/cxgbi/cxgb4i/cxgb4i.c
diff --cc drivers/scsi/cxgbi/cxgb4i/cxgb4i.c
index 3596aa632c93,dd00e5fe4a5e..000000000000
--- a/drivers/scsi/cxgbi/cxgb4i/cxgb4i.c
+++ b/drivers/scsi/cxgbi/cxgb4i/cxgb4i.c
@@@ -1637,15 -1405,17 +1647,24 @@@ static int init_act_open(struct cxgbi_s
  	}
  	cxgbi_sock_get(csk);
  
++<<<<<<< HEAD
 +	if (is_t4(lldi->adapter_type)) {
++=======
+ #if IS_ENABLED(CONFIG_IPV6)
+ 	if (csk->csk_family == AF_INET6)
+ 		cxgb4_clip_get(ndev, (const u32 *)&csk->saddr6.sin6_addr, 1);
+ #endif
+ 
+ 	if (t4) {
++>>>>>>> 211a84e3c188 (cxgb4i : Call into recently added cxgb4 ipv6 api)
  		size = sizeof(struct cpl_act_open_req);
  		size6 = sizeof(struct cpl_act_open_req6);
 -	} else {
 +	} else if (is_t5(lldi->adapter_type)) {
  		size = sizeof(struct cpl_t5_act_open_req);
  		size6 = sizeof(struct cpl_t5_act_open_req6);
 +	} else {
 +		size = sizeof(struct cpl_t6_act_open_req);
 +		size6 = sizeof(struct cpl_t6_act_open_req6);
  	}
  
  	if (csk->csk_family == AF_INET)
* Unmerged path drivers/scsi/cxgbi/cxgb4i/cxgb4i.c
