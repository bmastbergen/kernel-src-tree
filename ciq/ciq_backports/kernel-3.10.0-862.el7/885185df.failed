qede: Free netdevice only after stoping slowpath

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Mintz, Yuval <Yuval.Mintz@cavium.com>
commit 885185dfc49bde35b45046bb6b7384eca68e404f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/885185df.failed

qed needs to be informed of the removal of the qede interface
prior to its actual removal, as qede has some registered callbacks
that might get called async to the removal flow.

	Signed-off-by: Yuval Mintz <Yuval.Mintz@cavium.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 885185dfc49bde35b45046bb6b7384eca68e404f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/qlogic/qede/qede_main.c
diff --cc drivers/net/ethernet/qlogic/qede/qede_main.c
index ca645148d03f,88453ed1a5bf..000000000000
--- a/drivers/net/ethernet/qlogic/qede/qede_main.c
+++ b/drivers/net/ethernet/qlogic/qede/qede_main.c
@@@ -961,7 -952,9 +961,13 @@@ static void __qede_remove(struct pci_de
  
  	pci_set_drvdata(pdev, NULL);
  
++<<<<<<< HEAD
 +	free_netdev(ndev);
++=======
+ 	/* Release edev's reference to XDP's bpf if such exist */
+ 	if (edev->xdp_prog)
+ 		bpf_prog_put(edev->xdp_prog);
++>>>>>>> 885185dfc49b (qede: Free netdevice only after stoping slowpath)
  
  	/* Use global ops since we've freed edev */
  	qed_ops->common->slowpath_stop(cdev);
* Unmerged path drivers/net/ethernet/qlogic/qede/qede_main.c
