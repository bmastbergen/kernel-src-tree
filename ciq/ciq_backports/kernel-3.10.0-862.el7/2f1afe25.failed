cifs: Use smb 2 - 3 and cifsacl mount options getacl functions

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Shirish Pargaonkar <shirishpargaonkar@gmail.com>
commit 2f1afe25997fc28027ae95d89ccf03e1eef2dca1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/2f1afe25.failed

Fill in smb2/3 query acl functions in ops structures and use them.

	Signed-off-by: Shirish Pargaonkar <shirishpargaonkar@gmail.com>
	Reviewed-by: Pavel Shilovsky <pshilov@microsoft.com>
	Signed-off-by: Steve French <smfrench@gmail.com>
(cherry picked from commit 2f1afe25997fc28027ae95d89ccf03e1eef2dca1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/cifs/smb2ops.c
diff --cc fs/cifs/smb2ops.c
index f4acb0a6593b,f1d9c191c4e4..000000000000
--- a/fs/cifs/smb2ops.c
+++ b/fs/cifs/smb2ops.c
@@@ -1631,9 -2489,16 +1732,19 @@@ struct smb_version_operations smb20_ope
  	.set_oplock_level = smb2_set_oplock_level,
  	.create_lease_buf = smb2_create_lease_buf,
  	.parse_lease_buf = smb2_parse_lease_buf,
 -	.copychunk_range = smb2_copychunk_range,
 +	.clone_range = smb2_clone_range,
  	.wp_retry_size = smb2_wp_retry_size,
  	.dir_needs_close = smb2_dir_needs_close,
++<<<<<<< HEAD
++=======
+ 	.get_dfs_refer = smb2_get_dfs_refer,
+ 	.select_sectype = smb2_select_sectype,
+ #ifdef CONFIG_CIFS_ACL
+ 	.get_acl = get_smb2_acl,
+ 	.get_acl_by_fid = get_smb2_acl_by_fid,
+ /*	.set_acl = set_smb3_acl, */
+ #endif /* CIFS_ACL */
++>>>>>>> 2f1afe25997f (cifs: Use smb 2 - 3 and cifsacl mount options getacl functions)
  };
  
  struct smb_version_operations smb21_operations = {
@@@ -1715,6 -2581,13 +1826,16 @@@
  	.wp_retry_size = smb2_wp_retry_size,
  	.dir_needs_close = smb2_dir_needs_close,
  	.enum_snapshots = smb3_enum_snapshots,
++<<<<<<< HEAD
++=======
+ 	.get_dfs_refer = smb2_get_dfs_refer,
+ 	.select_sectype = smb2_select_sectype,
+ #ifdef CONFIG_CIFS_ACL
+ 	.get_acl = get_smb2_acl,
+ 	.get_acl_by_fid = get_smb2_acl_by_fid,
+ /*	.set_acl = set_smb3_acl, */
+ #endif /* CIFS_ACL */
++>>>>>>> 2f1afe25997f (cifs: Use smb 2 - 3 and cifsacl mount options getacl functions)
  };
  
  struct smb_version_operations smb30_operations = {
@@@ -1802,6 -2676,17 +1923,20 @@@
  	.dir_needs_close = smb2_dir_needs_close,
  	.fallocate = smb3_fallocate,
  	.enum_snapshots = smb3_enum_snapshots,
++<<<<<<< HEAD
++=======
+ 	.init_transform_rq = smb3_init_transform_rq,
+ 	.free_transform_rq = smb3_free_transform_rq,
+ 	.is_transform_hdr = smb3_is_transform_hdr,
+ 	.receive_transform = smb3_receive_transform,
+ 	.get_dfs_refer = smb2_get_dfs_refer,
+ 	.select_sectype = smb2_select_sectype,
+ #ifdef CONFIG_CIFS_ACL
+ 	.get_acl = get_smb2_acl,
+ 	.get_acl_by_fid = get_smb2_acl_by_fid,
+ /*	.set_acl = set_smb3_acl, */
+ #endif /* CIFS_ACL */
++>>>>>>> 2f1afe25997f (cifs: Use smb 2 - 3 and cifsacl mount options getacl functions)
  };
  
  #ifdef CONFIG_CIFS_SMB311
* Unmerged path fs/cifs/smb2ops.c
