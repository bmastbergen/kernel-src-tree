dm mpath: cleanup QUEUE_IF_NO_PATH bit manipulation by introducing assign_bit()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Bart Van Assche <bart.vanassche@sandisk.com>
commit 9a8ac3ae682e8760afebab71556a9a8d1b18f906
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/9a8ac3ae.failed

No functional change but makes the code easier to read.

	Signed-off-by: Bart Van Assche <bart.vanassche@sandisk.com>
	Reviewed-by: Hannes Reinecke <hare@suse.com>
	Signed-off-by: Mike Snitzer <snitzer@redhat.com>
(cherry picked from commit 9a8ac3ae682e8760afebab71556a9a8d1b18f906)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/md/dm-mpath.c
diff --cc drivers/md/dm-mpath.c
index 745e8192f19b,cc529537c8ce..000000000000
--- a/drivers/md/dm-mpath.c
+++ b/drivers/md/dm-mpath.c
@@@ -738,23 -629,11 +746,31 @@@ static int queue_if_no_path(struct mult
  	unsigned long flags;
  
  	spin_lock_irqsave(&m->lock, flags);
++<<<<<<< HEAD
 +
 +	if (save_old_value) {
 +		if (test_bit(MPATHF_QUEUE_IF_NO_PATH, &m->flags))
 +			set_bit(MPATHF_SAVED_QUEUE_IF_NO_PATH, &m->flags);
 +		else
 +			clear_bit(MPATHF_SAVED_QUEUE_IF_NO_PATH, &m->flags);
 +	} else {
 +		if (queue_if_no_path)
 +			set_bit(MPATHF_SAVED_QUEUE_IF_NO_PATH, &m->flags);
 +		else
 +			clear_bit(MPATHF_SAVED_QUEUE_IF_NO_PATH, &m->flags);
 +	}
 +	if (queue_if_no_path)
 +		set_bit(MPATHF_QUEUE_IF_NO_PATH, &m->flags);
 +	else
 +		clear_bit(MPATHF_QUEUE_IF_NO_PATH, &m->flags);
 +
++=======
+ 	assign_bit((save_old_value && test_bit(MPATHF_QUEUE_IF_NO_PATH, &m->flags)) ||
+ 		   (!save_old_value && queue_if_no_path),
+ 		   MPATHF_SAVED_QUEUE_IF_NO_PATH, &m->flags);
+ 	assign_bit(queue_if_no_path || dm_noflush_suspending(m->ti),
+ 		   MPATHF_QUEUE_IF_NO_PATH, &m->flags);
++>>>>>>> 9a8ac3ae682e (dm mpath: cleanup QUEUE_IF_NO_PATH bit manipulation by introducing assign_bit())
  	spin_unlock_irqrestore(&m->lock, flags);
  
  	if (!queue_if_no_path) {
* Unmerged path drivers/md/dm-mpath.c
