sch_sfq: fix null pointer dereference on init failure

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Nikolay Aleksandrov <nikolay@cumulusnetworks.com>
commit e232657661242cc8a169595160847b3e66aa7056
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/e2326576.failed

Currently only a memory allocation failure can lead to this, so let's
initialize the timer first.

Fixes: 6529eaba33f0 ("net: sched: introduce tcf block infractructure")
	Signed-off-by: Nikolay Aleksandrov <nikolay@cumulusnetworks.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit e232657661242cc8a169595160847b3e66aa7056)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/sched/sch_sfq.c
diff --cc net/sched/sch_sfq.c
index fa59fff16a4d,fc69fc5956e9..000000000000
--- a/net/sched/sch_sfq.c
+++ b/net/sched/sch_sfq.c
@@@ -726,10 -714,15 +726,18 @@@ static int sfq_init(struct Qdisc *sch, 
  {
  	struct sfq_sched_data *q = qdisc_priv(sch);
  	int i;
++<<<<<<< HEAD
++=======
+ 	int err;
  
  	setup_deferrable_timer(&q->perturb_timer, sfq_perturbation,
  			       (unsigned long)sch);
  
+ 	err = tcf_block_get(&q->block, &q->filter_list);
+ 	if (err)
+ 		return err;
++>>>>>>> e23265766124 (sch_sfq: fix null pointer dereference on init failure)
+ 
  	for (i = 0; i < SFQ_MAX_DEPTH + 1; i++) {
  		q->dep[i].next = i + SFQ_MAX_FLOWS;
  		q->dep[i].prev = i + SFQ_MAX_FLOWS;
* Unmerged path net/sched/sch_sfq.c
