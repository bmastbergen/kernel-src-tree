kvm: svm: fix unsigned compare less than zero comparison

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Colin Ian King <colin.king@canonical.com>
commit adad0d02a7d3c958121a4eb9d126015a2353db94
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/adad0d02.failed

vm_data->avic_vm_id is a u32, so the check for a error
return (less than zero) such as -EAGAIN from
avic_get_next_vm_id currently has no effect whatsoever.
Fix this by using a temporary int for the comparison
and assign vm_data->avic_vm_id to this. I used an explicit
u32 cast in the assignment to show why vm_data->avic_vm_id
cannot be used in the assign/compare steps.

	Signed-off-by: Colin Ian King <colin.king@canonical.com>
	Acked-by: Joerg Roedel <jroedel@suse.de>
	Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>
(cherry picked from commit adad0d02a7d3c958121a4eb9d126015a2353db94)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/kvm/svm.c
diff --cc arch/x86/kvm/svm.c
index 198bcf62dccf,9b4221471e3d..000000000000
--- a/arch/x86/kvm/svm.c
+++ b/arch/x86/kvm/svm.c
@@@ -1332,7 -1411,8 +1332,12 @@@ static void avic_vm_destroy(struct kvm 
  
  static int avic_vm_init(struct kvm *kvm)
  {
++<<<<<<< HEAD
 +	int err = -ENOMEM;
++=======
+ 	unsigned long flags;
+ 	int vm_id, err = -ENOMEM;
++>>>>>>> adad0d02a7d3 (kvm: svm: fix unsigned compare less than zero comparison)
  	struct kvm_arch *vm_data = &kvm->arch;
  	struct page *p_page;
  	struct page *l_page;
* Unmerged path arch/x86/kvm/svm.c
