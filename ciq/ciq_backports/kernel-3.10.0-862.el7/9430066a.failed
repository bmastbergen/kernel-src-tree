tpm: adjust return value of tpm_read_log

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Jason Gunthorpe <jgunthorpe@obsidianresearch.com>
commit 9430066a15d6f55a3d008a6f99bb462480870207
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/9430066a.failed

	Signed-off-by: Jason Gunthorpe <jgunthorpe@obsidianresearch.com>
	Reviewed-by: Jarkko Sakkinen <jarkko.sakkinen@linux.intel.com>
	Signed-off-by: Jarkko Sakkinen <jarkko.sakkinen@linux.intel.com>
(cherry picked from commit 9430066a15d6f55a3d008a6f99bb462480870207)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/char/tpm/tpm_eventlog.c
diff --cc drivers/char/tpm/tpm_eventlog.c
index 34f0921f0203,11bb1138a828..000000000000
--- a/drivers/char/tpm/tpm_eventlog.c
+++ b/drivers/char/tpm/tpm_eventlog.c
@@@ -368,14 -368,22 +368,27 @@@ static int tpm_read_log(struct tpm_chi
  	}
  
  	rc = tpm_read_log_acpi(chip);
 -	if (rc != -ENODEV)
 +	if ((rc == 0) || (rc == -ENOMEM))
  		return rc;
  
 -	return tpm_read_log_of(chip);
 +	rc = tpm_read_log_of(chip);
 +
 +	return rc;
  }
  
++<<<<<<< HEAD
++=======
+ /*
+  * tpm_bios_log_setup() - Read the event log from the firmware
+  * @chip: TPM chip to use.
+  *
+  * If an event log is found then the securityfs files are setup to
+  * export it to userspace, otherwise nothing is done.
+  *
+  * Returns -ENODEV if the firmware has no event log or securityfs is not
+  * supported.
+  */
++>>>>>>> 9430066a15d6 (tpm: adjust return value of tpm_read_log)
  int tpm_bios_log_setup(struct tpm_chip *chip)
  {
  	const char *name = dev_name(&chip->dev);
* Unmerged path drivers/char/tpm/tpm_eventlog.c
