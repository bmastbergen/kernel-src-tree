nvme: add hostid token to fabric options

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [nvme] add hostid token to fabric options (Ewan Milne) [1508065]
Rebuild_FUZZ: 91.89%
commit-author Johannes Thumshirn <jthumshirn@suse.de>
commit 6bfe04255d5ed5643ee4c2d9b09b337398f8cb6a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/6bfe0425.failed

Currently we have no way to define a stable host-id but always use the one
which is randomly generated when we add the host or use the default host.

Provide a "hostid=%s" for user-space to pass in a persistent host-id which
overrides the randomly generated one.

	Signed-off-by: Johannes Thumshirn <jthumshirn@suse.de>
	Reviewed-by: Christoph Hellwig <hch@lst.de>
	Reviewed-by: Sagi Grimberg <sagi@grimberg.me>
	Signed-off-by: Keith Busch <keith.busch@intel.com>
	Signed-off-by: Jens Axboe <axboe@kernel.dk>
(cherry picked from commit 6bfe04255d5ed5643ee4c2d9b09b337398f8cb6a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/nvme/host/fabrics.c
diff --cc drivers/nvme/host/fabrics.c
index ce43cf05bc46,7ca2d4d70aec..000000000000
--- a/drivers/nvme/host/fabrics.c
+++ b/drivers/nvme/host/fabrics.c
@@@ -58,7 -58,6 +58,10 @@@ static struct nvmf_host *nvmf_host_add(
  
  	kref_init(&host->ref);
  	memcpy(host->nqn, hostnqn, NVMF_NQN_SIZE);
++<<<<<<< HEAD
 +	uuid_be_gen(&host->id);
++=======
++>>>>>>> 6bfe04255d5e (nvme: add hostid token to fabric options)
  
  	list_add_tail(&host->list, &nvmf_hosts);
  out_unlock:
@@@ -75,7 -74,6 +78,10 @@@ static struct nvmf_host *nvmf_host_defa
  		return NULL;
  
  	kref_init(&host->ref);
++<<<<<<< HEAD
 +	uuid_be_gen(&host->id);
++=======
++>>>>>>> 6bfe04255d5e (nvme: add hostid token to fabric options)
  	snprintf(host->nqn, NVMF_NQN_SIZE,
  		"nqn.2014-08.org.nvmexpress:NVMf:uuid:%pUb", &host->id);
  
* Unmerged path drivers/nvme/host/fabrics.c
diff --git a/drivers/nvme/host/fabrics.h b/drivers/nvme/host/fabrics.h
index f5a9c1fb186f..f85004bf7725 100644
--- a/drivers/nvme/host/fabrics.h
+++ b/drivers/nvme/host/fabrics.h
@@ -56,6 +56,7 @@ enum {
 	NVMF_OPT_RECONNECT_DELAY = 1 << 9,
 	NVMF_OPT_HOST_TRADDR	= 1 << 10,
 	NVMF_OPT_CTRL_LOSS_TMO	= 1 << 11,
+	NVMF_OPT_HOST_ID	= 1 << 12,
 };
 
 /**
