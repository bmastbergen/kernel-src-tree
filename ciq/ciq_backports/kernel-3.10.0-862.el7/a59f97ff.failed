ovl: remove unneeded check for IS_ERR()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Amir Goldstein <amir73il@gmail.com>
commit a59f97ff66f0058702ed6f6e26dd8fa3c34caf62
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/a59f97ff.failed

ovl_workdir_create() returns a valid index dentry or NULL.

	Reported-by: Dan Carpenter <dan.carpenter@oracle.com>
	Signed-off-by: Amir Goldstein <amir73il@gmail.com>
	Signed-off-by: Miklos Szeredi <mszeredi@redhat.com>
(cherry picked from commit a59f97ff66f0058702ed6f6e26dd8fa3c34caf62)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/overlayfs/super.c
diff --cc fs/overlayfs/super.c
index 311aedaffa1b,c88493b01d8d..000000000000
--- a/fs/overlayfs/super.c
+++ b/fs/overlayfs/super.c
@@@ -1434,11 -1044,47 +1434,50 @@@ static int ovl_fill_super(struct super_
  	/* If the upper fs is nonexistent, we mark overlayfs r/o too */
  	if (!ufs->upper_mnt)
  		sb->s_flags |= MS_RDONLY;
++<<<<<<< HEAD
++=======
+ 	else if (ufs->upper_mnt->mnt_sb != ufs->same_sb)
+ 		ufs->same_sb = NULL;
+ 
+ 	if (!(ovl_force_readonly(ufs)) && ufs->config.index) {
+ 		/* Verify lower root is upper root origin */
+ 		err = ovl_verify_origin(upperpath.dentry, ufs->lower_mnt[0],
+ 					stack[0].dentry, false, true);
+ 		if (err) {
+ 			pr_err("overlayfs: failed to verify upper root origin\n");
+ 			goto out_put_lower_mnt;
+ 		}
+ 
+ 		ufs->indexdir = ovl_workdir_create(sb, ufs, workpath.dentry,
+ 						   OVL_INDEXDIR_NAME, true);
+ 		if (ufs->indexdir) {
+ 			/* Verify upper root is index dir origin */
+ 			err = ovl_verify_origin(ufs->indexdir, ufs->upper_mnt,
+ 						upperpath.dentry, true, true);
+ 			if (err)
+ 				pr_err("overlayfs: failed to verify index dir origin\n");
+ 
+ 			/* Cleanup bad/stale/orphan index entries */
+ 			if (!err)
+ 				err = ovl_indexdir_cleanup(ufs->indexdir,
+ 							   ufs->upper_mnt,
+ 							   stack, numlower);
+ 		}
+ 		if (err || !ufs->indexdir)
+ 			pr_warn("overlayfs: try deleting index dir or mounting with '-o index=off' to disable inodes index.\n");
+ 		if (err)
+ 			goto out_put_indexdir;
+ 	}
+ 
+ 	/* Show index=off/on in /proc/mounts for any of the reasons above */
+ 	if (!ufs->indexdir)
+ 		ufs->config.index = false;
++>>>>>>> a59f97ff66f0 (ovl: remove unneeded check for IS_ERR())
  
  	if (remote)
 -		sb->s_d_op = &ovl_reval_dentry_operations;
 +		sb->s_d_op = &ovl_reval_dentry_operations.ops;
  	else
 -		sb->s_d_op = &ovl_dentry_operations;
 +		sb->s_d_op = &ovl_dentry_operations.ops;
  
  	err = -ENOMEM;
  	ufs->creator_cred = cred = prepare_creds();
* Unmerged path fs/overlayfs/super.c
