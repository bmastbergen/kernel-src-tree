thunderbolt: Do not touch the hardware if the NHI is gone on resume

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
Rebuild_CHGLOG: - [thunderbolt] Do not touch the hardware if the NHI is gone on resume (Jeremy McNicoll) [1172010]
Rebuild_FUZZ: 89.26%
commit-author Mika Westerberg <mika.westerberg@linux.intel.com>
commit bdccf295d7cdf6f28ceec1dcc31a79d0a1697d21
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/bdccf295.failed

On PCs the NHI host controller is only present when there is a device
connected. When the last device is disconnected the host controller will
dissappear shortly (within 10s). Now if that happens when we are
suspended we should not try to touch the hardware anymore, so add a flag
for this and check it before we re-enable rings.

	Signed-off-by: Mika Westerberg <mika.westerberg@linux.intel.com>
	Reviewed-by: Yehezkel Bernat <yehezkel.bernat@intel.com>
	Reviewed-by: Michael Jamet <michael.jamet@intel.com>
	Reviewed-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
	Signed-off-by: Andreas Noever <andreas.noever@gmail.com>
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit bdccf295d7cdf6f28ceec1dcc31a79d0a1697d21)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/thunderbolt/nhi.c
#	drivers/thunderbolt/nhi.h
* Unmerged path drivers/thunderbolt/nhi.c
* Unmerged path drivers/thunderbolt/nhi.h
* Unmerged path drivers/thunderbolt/nhi.c
* Unmerged path drivers/thunderbolt/nhi.h
