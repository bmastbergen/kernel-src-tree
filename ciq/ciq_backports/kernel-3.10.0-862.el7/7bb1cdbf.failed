s390: wire up memfd_create syscall

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Heiko Carstens <heiko.carstens@de.ibm.com>
commit 7bb1cdbfe2b07d9272b4b132511c82527314b00f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/7bb1cdbf.failed

	Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
(cherry picked from commit 7bb1cdbfe2b07d9272b4b132511c82527314b00f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/s390/include/uapi/asm/unistd.h
#	arch/s390/kernel/compat_wrapper.c
#	arch/s390/kernel/syscalls.S
diff --cc arch/s390/include/uapi/asm/unistd.h
index 4e8ebbbe2c05,940ac49198db..000000000000
--- a/arch/s390/include/uapi/asm/unistd.h
+++ b/arch/s390/include/uapi/asm/unistd.h
@@@ -280,17 -280,13 +280,22 @@@
  #define __NR_s390_runtime_instr 342
  #define __NR_kcmp		343
  #define __NR_finit_module	344
 -#define __NR_sched_setattr	345
 -#define __NR_sched_getattr	346
 -#define __NR_renameat2		347
 -#define __NR_seccomp		348
 +#define __NR_sched_setattr 345
 +#define __NR_sched_getattr 346
 +/* Number 347 is reserved for sys_renameat2 */
 +/* Number 348 is reserved for sys_seccomp */
  #define __NR_getrandom		349
++<<<<<<< HEAD
 +/* Number 350 is reserved for sys_memfd_create */
 +/* Number 351 is reserved for sys_bpf */
 +#define __NR_s390_pci_mmio_write	352
 +#define __NR_s390_pci_mmio_read		353
 +#define __NR_copy_file_range	375
 +#define NR_syscalls 376
++=======
+ #define __NR_memfd_create	350
+ #define NR_syscalls 351
++>>>>>>> 7bb1cdbfe2b0 (s390: wire up memfd_create syscall)
  
  /* 
   * There are some system calls that are not present on 64 bit, some
diff --cc arch/s390/kernel/syscalls.S
index 1dc392c977aa,6fe886ac2db5..000000000000
--- a/arch/s390/kernel/syscalls.S
+++ b/arch/s390/kernel/syscalls.S
@@@ -339,48 -339,23 +339,65 @@@ SYSCALL(sys_epoll_create1,sys_epoll_cre
  SYSCALL(sys_preadv,sys_preadv,compat_sys_preadv)
  SYSCALL(sys_pwritev,sys_pwritev,compat_sys_pwritev)
  SYSCALL(sys_rt_tgsigqueueinfo,sys_rt_tgsigqueueinfo,compat_sys_rt_tgsigqueueinfo) /* 330 */
 -SYSCALL(sys_perf_event_open,sys_perf_event_open,compat_sys_perf_event_open)
 -SYSCALL(sys_fanotify_init,sys_fanotify_init,compat_sys_fanotify_init)
 +SYSCALL(sys_perf_event_open,sys_perf_event_open,sys_perf_event_open_wrapper)
 +SYSCALL(sys_fanotify_init,sys_fanotify_init,sys_fanotify_init_wrapper)
  SYSCALL(sys_fanotify_mark,sys_fanotify_mark,compat_sys_fanotify_mark)
 -SYSCALL(sys_prlimit64,sys_prlimit64,compat_sys_prlimit64)
 -SYSCALL(sys_name_to_handle_at,sys_name_to_handle_at,compat_sys_name_to_handle_at) /* 335 */
 +SYSCALL(sys_prlimit64,sys_prlimit64,sys_prlimit64_wrapper)
 +SYSCALL(sys_name_to_handle_at,sys_name_to_handle_at,sys_name_to_handle_at_wrapper) /* 335 */
  SYSCALL(sys_open_by_handle_at,sys_open_by_handle_at,compat_sys_open_by_handle_at)
++<<<<<<< HEAD
 +SYSCALL(sys_clock_adjtime,sys_clock_adjtime,compat_sys_clock_adjtime_wrapper)
 +SYSCALL(sys_syncfs,sys_syncfs,sys_syncfs_wrapper)
 +SYSCALL(sys_setns,sys_setns,sys_setns_wrapper)
 +SYSCALL(sys_process_vm_readv,sys_process_vm_readv,compat_sys_process_vm_readv_wrapper) /* 340 */
 +SYSCALL(sys_process_vm_writev,sys_process_vm_writev,compat_sys_process_vm_writev_wrapper)
 +SYSCALL(sys_ni_syscall,sys_s390_runtime_instr,sys_s390_runtime_instr_wrapper)
 +SYSCALL(sys_kcmp,sys_kcmp,sys_kcmp_wrapper)
 +SYSCALL(sys_finit_module,sys_finit_module,sys_finit_module_wrapper)
 +SYSCALL(sys_sched_setattr,sys_sched_setattr,sys_sched_setattr_wrapper) /* 345 */
 +SYSCALL(sys_sched_getattr,sys_sched_getattr,sys_sched_getattr_wrapper)
 +NI_SYSCALL					/* 347 sys_renameat2 */
 +NI_SYSCALL					/* 348 sys_seccomp */
 +SYSCALL(sys_getrandom,sys_getrandom,sys_getrandom_wrapper)
 +NI_SYSCALL					/* 350 sys_memfd_create */
 +NI_SYSCALL					/* 351 sys_bpf */
 +SYSCALL(sys_ni_syscall,sys_s390_pci_mmio_write,sys_s390_pci_mmio_write_wrapper)
 +SYSCALL(sys_ni_syscall,sys_s390_pci_mmio_read,sys_s390_pci_mmio_read_wrapper)
 +NI_SYSCALL					/* 354 sys_execveat */
 +NI_SYSCALL					/* 355 sys_userfaultfd */
 +NI_SYSCALL					/* 356 sys_membarrier */
 +NI_SYSCALL					/* 357 sys_recvmmsg */
 +NI_SYSCALL					/* 358 sys_sendmmsg */
 +NI_SYSCALL					/* 359 sys_socket */
 +NI_SYSCALL					/* 360 sys_socketpair */
 +NI_SYSCALL					/* 361 sys_bind */
 +NI_SYSCALL					/* 362 sys_connect */
 +NI_SYSCALL					/* 363 sys_listen */
 +NI_SYSCALL					/* 364 sys_accept4 */
 +NI_SYSCALL					/* 365 sys_getsockopt */
 +NI_SYSCALL					/* 366 sys_setsockopt */
 +NI_SYSCALL					/* 367 sys_getsockname */
 +NI_SYSCALL					/* 368 sys_getpeername */
 +NI_SYSCALL					/* 369 sys_sendto */
 +NI_SYSCALL					/* 370 sys_sendmsg */
 +NI_SYSCALL					/* 371 sys_recvfrom */
 +NI_SYSCALL					/* 372 sys_recvmsg */
 +NI_SYSCALL					/* 373 sys_shutdown */
 +NI_SYSCALL					/* 374 sys_mlock2 */
 +SYSCALL(sys_copy_file_range,sys_copy_file_range,sys_copy_file_range_wrapper) /* 375 */
++=======
+ SYSCALL(sys_clock_adjtime,sys_clock_adjtime,compat_sys_clock_adjtime)
+ SYSCALL(sys_syncfs,sys_syncfs,compat_sys_syncfs)
+ SYSCALL(sys_setns,sys_setns,compat_sys_setns)
+ SYSCALL(sys_process_vm_readv,sys_process_vm_readv,compat_sys_process_vm_readv) /* 340 */
+ SYSCALL(sys_process_vm_writev,sys_process_vm_writev,compat_sys_process_vm_writev)
+ SYSCALL(sys_ni_syscall,sys_s390_runtime_instr,compat_sys_s390_runtime_instr)
+ SYSCALL(sys_kcmp,sys_kcmp,compat_sys_kcmp)
+ SYSCALL(sys_finit_module,sys_finit_module,compat_sys_finit_module)
+ SYSCALL(sys_sched_setattr,sys_sched_setattr,compat_sys_sched_setattr) /* 345 */
+ SYSCALL(sys_sched_getattr,sys_sched_getattr,compat_sys_sched_getattr)
+ SYSCALL(sys_renameat2,sys_renameat2,compat_sys_renameat2)
+ SYSCALL(sys_seccomp,sys_seccomp,compat_sys_seccomp)
+ SYSCALL(sys_getrandom,sys_getrandom,compat_sys_getrandom)
+ SYSCALL(sys_memfd_create,sys_memfd_create,compat_sys_memfd_create) /* 350 */
++>>>>>>> 7bb1cdbfe2b0 (s390: wire up memfd_create syscall)
* Unmerged path arch/s390/kernel/compat_wrapper.c
* Unmerged path arch/s390/include/uapi/asm/unistd.h
* Unmerged path arch/s390/kernel/compat_wrapper.c
* Unmerged path arch/s390/kernel/syscalls.S
