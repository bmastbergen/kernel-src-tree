target/configfs: handle match_int() errors

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author David Disseldorp <ddiss@suse.de>
commit c20910264c367a5dfbf6c09e8ec2ff0c5c52857a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/c2091026.failed

As a follow up to ce31c1b0dc4038a1dec64585d892adb73d9c45f4 - there are
still a few LIO match_int() calls that don't check the return value.
Propagate errors rather than using the potentially uninitialised result.

	Signed-off-by: David Disseldorp <ddiss@suse.de>
	Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>
(cherry picked from commit c20910264c367a5dfbf6c09e8ec2ff0c5c52857a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/target/target_core_configfs.c
diff --cc drivers/target/target_core_configfs.c
index 60cccf317ddb,c2e9fea90b4a..000000000000
--- a/drivers/target/target_core_configfs.c
+++ b/drivers/target/target_core_configfs.c
@@@ -1201,8 -1681,10 +1209,15 @@@ static ssize_t target_core_dev_pr_store
  			all_tg_pt = (int)arg;
  			break;
  		case Opt_mapped_lun:
++<<<<<<< HEAD
 +			match_int(args, &arg);
 +			mapped_lun = (u32)arg;
++=======
+ 			ret = match_int(args, &arg);
+ 			if (ret)
+ 				goto out;
+ 			mapped_lun = (u64)arg;
++>>>>>>> c20910264c36 (target/configfs: handle match_int() errors)
  			break;
  		/*
  		 * PR APTPL Metadata for Target Port
@@@ -1233,11 -1717,15 +1250,20 @@@
  			tpgt = (u16)arg;
  			break;
  		case Opt_port_rtpi:
- 			match_int(args, &arg);
+ 			ret = match_int(args, &arg);
+ 			if (ret)
+ 				goto out;
  			break;
  		case Opt_target_lun:
++<<<<<<< HEAD
 +			match_int(args, &arg);
 +			target_lun = (u32)arg;
++=======
+ 			ret = match_int(args, &arg);
+ 			if (ret)
+ 				goto out;
+ 			target_lun = (u64)arg;
++>>>>>>> c20910264c36 (target/configfs: handle match_int() errors)
  			break;
  		default:
  			break;
* Unmerged path drivers/target/target_core_configfs.c
