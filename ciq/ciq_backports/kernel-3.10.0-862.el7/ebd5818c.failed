bnxt_en: Fix a variable scoping in bnxt_hwrm_do_send_msg()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Vasundhara Volam <vasundhara-v.volam@broadcom.com>
commit ebd5818cc5d4847897d7fe872e2d9799d7b7fcbb
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/ebd5818c.failed

short_input variable is assigned to another data pointer which is
referred out of its scope. Fix it by moving short_input definition
to the beginning of bnxt_hwrm_do_send_msg() function.

No failure has been reported so far due to this issue.

Fixes: e605db801bde ("bnxt_en: Support for Short Firmware Message")
	Signed-off-by: Vasundhara Volam <vasundhara-v.volam@broadcom.com>
	Signed-off-by: Michael Chan <michael.chan@broadcom.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit ebd5818cc5d4847897d7fe872e2d9799d7b7fcbb)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/broadcom/bnxt/bnxt.c
diff --cc drivers/net/ethernet/broadcom/bnxt/bnxt.c
index c325a10cc99e,28f5e94274ee..000000000000
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt.c
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt.c
@@@ -3122,12 -3367,37 +3122,43 @@@ static int bnxt_hwrm_do_send_msg(struc
  	__le32 *resp_len, *valid;
  	u16 cp_ring_id, len = 0;
  	struct hwrm_err_output *resp = bp->hwrm_cmd_resp_addr;
++<<<<<<< HEAD
++=======
+ 	u16 max_req_len = BNXT_HWRM_MAX_REQ_LEN;
+ 	struct hwrm_short_input short_input = {0};
++>>>>>>> ebd5818cc5d4 (bnxt_en: Fix a variable scoping in bnxt_hwrm_do_send_msg())
  
  	req->seq_id = cpu_to_le16(bp->hwrm_cmd_seq++);
  	memset(resp, 0, PAGE_SIZE);
  	cp_ring_id = le16_to_cpu(req->cmpl_ring);
  	intr_process = (cp_ring_id == INVALID_HW_RING_ID) ? 0 : 1;
  
++<<<<<<< HEAD
++=======
+ 	if (bp->flags & BNXT_FLAG_SHORT_CMD) {
+ 		void *short_cmd_req = bp->hwrm_short_cmd_req_addr;
+ 
+ 		memcpy(short_cmd_req, req, msg_len);
+ 		memset(short_cmd_req + msg_len, 0, BNXT_HWRM_MAX_REQ_LEN -
+ 						   msg_len);
+ 
+ 		short_input.req_type = req->req_type;
+ 		short_input.signature =
+ 				cpu_to_le16(SHORT_REQ_SIGNATURE_SHORT_CMD);
+ 		short_input.size = cpu_to_le16(msg_len);
+ 		short_input.req_addr =
+ 			cpu_to_le64(bp->hwrm_short_cmd_req_dma_addr);
+ 
+ 		data = (u32 *)&short_input;
+ 		msg_len = sizeof(short_input);
+ 
+ 		/* Sync memory write before updating doorbell */
+ 		wmb();
+ 
+ 		max_req_len = BNXT_HWRM_SHORT_REQ_LEN;
+ 	}
+ 
++>>>>>>> ebd5818cc5d4 (bnxt_en: Fix a variable scoping in bnxt_hwrm_do_send_msg())
  	/* Write request msg to hwrm channel */
  	__iowrite32_copy(bp->bar0, data, msg_len / 4);
  
* Unmerged path drivers/net/ethernet/broadcom/bnxt/bnxt.c
