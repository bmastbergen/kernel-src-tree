perf tools: Don't include terminal handling headers in util.h

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-862.el7
commit-author Arnaldo Carvalho de Melo <acme@redhat.com>
commit b0742e90f5ab904aa835350c28bcec48e9109379
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-862.el7/b0742e90.failed

Continuing the disentanglement, mostly the TUI needs CTRL(c), that is
in sys/ttydefaults.h and term.c needs the termios headers.

And term.h needs to be added to a few places too.

	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Jiri Olsa <jolsa@kernel.org>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Wang Nan <wangnan0@huawei.com>
Link: http://lkml.kernel.org/n/tip-il19zna7qj9ytavdbwlipc7t@git.kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit b0742e90f5ab904aa835350c28bcec48e9109379)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/ui/browsers/annotate.c
#	tools/perf/util/parse-events.c
#	tools/perf/util/util.h
diff --cc tools/perf/ui/browsers/annotate.c
index ba36aac340bc,d990ad08a3c6..000000000000
--- a/tools/perf/ui/browsers/annotate.c
+++ b/tools/perf/ui/browsers/annotate.c
@@@ -9,7 -9,10 +9,12 @@@
  #include "../../util/symbol.h"
  #include "../../util/evsel.h"
  #include "../../util/config.h"
 -#include <inttypes.h>
  #include <pthread.h>
++<<<<<<< HEAD
++=======
+ #include <linux/kernel.h>
+ #include <sys/ttydefaults.h>
++>>>>>>> b0742e90f5ab (perf tools: Don't include terminal handling headers in util.h)
  
  struct disasm_line_samples {
  	double		percent;
diff --cc tools/perf/util/parse-events.c
index 3c6f7bbf0303,f3dd1aa59a25..000000000000
--- a/tools/perf/util/parse-events.c
+++ b/tools/perf/util/parse-events.c
@@@ -1,6 -1,7 +1,11 @@@
  #include <linux/hw_breakpoint.h>
  #include <linux/err.h>
++<<<<<<< HEAD
 +#include "util.h"
++=======
+ #include <errno.h>
+ #include "term.h"
++>>>>>>> b0742e90f5ab (perf tools: Don't include terminal handling headers in util.h)
  #include "../perf.h"
  #include "evlist.h"
  #include "evsel.h"
diff --cc tools/perf/util/util.h
index 3821ee26013a,fa8c2e59a0bc..000000000000
--- a/tools/perf/util/util.h
+++ b/tools/perf/util/util.h
@@@ -17,8 -17,6 +17,11 @@@
  #include <stdlib.h>
  #include <stdarg.h>
  #include <string.h>
++<<<<<<< HEAD
 +#include <term.h>
 +#include <errno.h>
++=======
++>>>>>>> b0742e90f5ab (perf tools: Don't include terminal handling headers in util.h)
  #include <limits.h>
  #include <sys/param.h>
  #include <sys/types.h>
@@@ -36,12 -34,8 +39,13 @@@
  #include <sys/ioctl.h>
  #include <linux/kernel.h>
  #include <linux/types.h>
- #include <sys/ttydefaults.h>
  #include <api/fs/tracing_path.h>
- #include <termios.h>
  #include <linux/bitops.h>
++<<<<<<< HEAD
 +#include <termios.h>
 +#include "strlist.h"
++=======
++>>>>>>> b0742e90f5ab (perf tools: Don't include terminal handling headers in util.h)
  
  extern char buildid_dir[];
  
diff --git a/tools/perf/builtin-kvm.c b/tools/perf/builtin-kvm.c
index 693f98cb99a8..bec77fcbd119 100644
--- a/tools/perf/builtin-kvm.c
+++ b/tools/perf/builtin-kvm.c
@@ -3,6 +3,7 @@
 
 #include "util/evsel.h"
 #include "util/evlist.h"
+#include "util/term.h"
 #include "util/util.h"
 #include "util/cache.h"
 #include "util/symbol.h"
diff --git a/tools/perf/builtin-top.c b/tools/perf/builtin-top.c
index 7a57bb6621b0..0831ccbc3b87 100644
--- a/tools/perf/builtin-top.c
+++ b/tools/perf/builtin-top.c
@@ -40,6 +40,7 @@
 #include "util/cpumap.h"
 #include "util/xyarray.h"
 #include "util/sort.h"
+#include "util/term.h"
 #include "util/intlist.h"
 #include "util/parse-branch-options.h"
 #include "arch/common.h"
* Unmerged path tools/perf/ui/browsers/annotate.c
diff --git a/tools/perf/ui/browsers/header.c b/tools/perf/ui/browsers/header.c
index edbeaaf31ace..e2c9390ff4c5 100644
--- a/tools/perf/ui/browsers/header.c
+++ b/tools/perf/ui/browsers/header.c
@@ -8,6 +8,8 @@
 #include "util/header.h"
 #include "util/session.h"
 
+#include <sys/ttydefaults.h>
+
 static void ui_browser__argv_write(struct ui_browser *browser,
 				   void *entry, int row)
 {
diff --git a/tools/perf/ui/browsers/hists.c b/tools/perf/ui/browsers/hists.c
index 38be9b0f7fe0..0dce917cdbec 100644
--- a/tools/perf/ui/browsers/hists.c
+++ b/tools/perf/ui/browsers/hists.c
@@ -2,6 +2,7 @@
 #include <stdlib.h>
 #include <string.h>
 #include <linux/rbtree.h>
+#include <sys/ttydefaults.h>
 
 #include "../../util/evsel.h"
 #include "../../util/evlist.h"
* Unmerged path tools/perf/util/parse-events.c
diff --git a/tools/perf/util/term.c b/tools/perf/util/term.c
index 90b47d8aa19c..8f254a74d97d 100644
--- a/tools/perf/util/term.c
+++ b/tools/perf/util/term.c
@@ -1,4 +1,8 @@
-#include "util.h"
+#include "term.h"
+#include <stdlib.h>
+#include <termios.h>
+#include <unistd.h>
+#include <sys/ioctl.h>
 
 void get_term_dimensions(struct winsize *ws)
 {
* Unmerged path tools/perf/util/util.h
