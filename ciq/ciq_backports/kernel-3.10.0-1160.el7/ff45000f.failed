powerpc/boot: Request no dynamic linker for boot wrapper

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1160.el7
Rebuild_CHGLOG: - [powerpc] boot: Request no dynamic linker for boot wrapper (Yauheni Kaliuta) [1657540]
Rebuild_FUZZ: 92.31%
commit-author Nicholas Piggin <npiggin@gmail.com>
commit ff45000fcb56b5b0f1a14a865d3541746d838a0a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1160.el7/ff45000f.failed

The boot wrapper performs its own relocations and does not require
PT_INTERP segment. However currently we don't tell the linker that.

Prior to binutils 2.28 that works OK. But since binutils commit
1a9ccd70f9a7 ("Fix the linker so that it will not silently generate ELF
binaries with invalid program headers. Fix readelf to report such
invalid binaries.") binutils tries to create a program header segment
due to PT_INTERP, and the link fails because there is no space for it:

  ld: arch/powerpc/boot/zImage.pseries: Not enough room for program headers, try linking with -N
  ld: final link failed: Bad value

So tell the linker not to do that, by passing --no-dynamic-linker.

	Cc: stable@vger.kernel.org
	Reported-by: Anton Blanchard <anton@samba.org>
	Signed-off-by: Nicholas Piggin <npiggin@gmail.com>
[mpe: Drop dependency on ld-version.sh and massage change log]
	Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
(cherry picked from commit ff45000fcb56b5b0f1a14a865d3541746d838a0a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/powerpc/boot/wrapper
diff --cc arch/powerpc/boot/wrapper
index 299f327fb510,76fe3ccfd381..000000000000
--- a/arch/powerpc/boot/wrapper
+++ b/arch/powerpc/boot/wrapper
@@@ -388,7 -467,8 +410,12 @@@ if [ "$platform" != "miboot" ]; the
      if [ -n "$link_address" ] ; then
          text_start="-Ttext $link_address"
      fi
++<<<<<<< HEAD
 +    ${CROSS}ld -m $format -T $lds $text_start $pie -o "$ofile" \
++=======
+ #link everything
+     ${CROSS}ld -m $format -T $lds $text_start $pie $nodl -o "$ofile" \
++>>>>>>> ff45000fcb56 (powerpc/boot: Request no dynamic linker for boot wrapper)
  	$platformo $tmp $object/wrapper.a
      rm $tmp
  fi
* Unmerged path arch/powerpc/boot/wrapper
