x86/cpufeature: Fix various quality problems in the <asm/cpu_device_hd.h> header

jira LE-1907
cve CVE-2020-0543
Rebuild_History Non-Buildable kernel-3.10.0-1160.el7
commit-author Ingo Molnar <mingo@kernel.org>
commit 266d63a7d9d48c6d5dee486378ec0e8c86c4d74a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1160.el7/266d63a7.failed

Thomas noticed that the new arch/x86/include/asm/cpu_device_id.h header is
a train-wreck that didn't incorporate review feedback like not using __u8
in kernel-only headers.

While at it also fix all the *other* problems this header has:

 - Use canonical names for the header guards. It's inexplicable why a non-standard
   guard was used.

 - Don't define the header guard to 1. Plus annotate the closing #endif as done
   absolutely every other header. Again, an inexplicable source of noise.

 - Move the kernel API calls provided by this header next to each other, there's
   absolutely no reason to have them spread apart in the header.

 - Align the INTEL_CPU_DESC() macro initializations vertically, this is easier to
   read and it's also the canonical style.

 - Actually name the macro arguments properly: instead of 'mod, step, rev',
   spell out 'model, stepping, revision' - it's not like we have a lack of
   characters in this header.

 - Actually make arguments macro-safe - again it's inexplicable why it wasn't
   done properly to begin with.

Quite amazing how many problems a 41 lines header can contain.

This kind of code quality is unacceptable, and it slipped through the
review net of 2 developers and 2 maintainers, including myself, until
Thomas noticed it. :-/

	Reported-by: Thomas Gleixner <tglx@linutronix.de>
	Cc: Andi Kleen <ak@linux.intel.com>
	Cc: Kan Liang <kan.liang@linux.intel.com>
	Cc: Peter Zijlstra (Intel) <peterz@infradead.org>
	Cc: Borislav Petkov <bp@alien8.de>
	Cc: Linus Torvalds <torvalds@linux-foundation.org>
	Cc: linux-kernel@vger.kernel.org
	Signed-off-by: Ingo Molnar <mingo@kernel.org>
(cherry picked from commit 266d63a7d9d48c6d5dee486378ec0e8c86c4d74a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/include/asm/cpu_device_id.h
diff --cc arch/x86/include/asm/cpu_device_id.h
index 0d72cb7c4c6e,31c379c1da41..000000000000
--- a/arch/x86/include/asm/cpu_device_id.h
+++ b/arch/x86/include/asm/cpu_device_id.h
@@@ -1,5 -1,6 +1,11 @@@
++<<<<<<< HEAD
 +#ifndef _CPU_DEVICE_ID
 +#define _CPU_DEVICE_ID 1
++=======
+ /* SPDX-License-Identifier: GPL-2.0 */
+ #ifndef _ASM_X86_CPU_DEVICE_ID
+ #define _ASM_X86_CPU_DEVICE_ID
++>>>>>>> 266d63a7d9d4 (x86/cpufeature: Fix various quality problems in the <asm/cpu_device_hd.h> header)
  
  /*
   * Declare drivers belonging to specific x86 CPUs
* Unmerged path arch/x86/include/asm/cpu_device_id.h
