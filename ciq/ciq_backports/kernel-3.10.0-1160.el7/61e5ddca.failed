x86/platform/uv: Save OEM_ID from ACPI MADT probe

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1160.el7
commit-author Mike Travis <mike.travis@hpe.com>
commit 61e5ddca9c2a312f933bf5b12bc08484189fefe6
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1160.el7/61e5ddca.failed

Save the OEM_ID and OEM_TABLE_ID passed to the apic driver probe function
for later use.  Also, convert the char list arg passed from the kernel
to a true null-terminated string.

	Signed-off-by: Mike Travis <mike.travis@hpe.com>
	Reviewed-by: Steve Wahl <steve.wahl@hpe.com>
	Reviewed-by: Dimitri Sivanich <dimitri.sivanich@hpe.com>
	Cc: Andrew Morton <akpm@linux-foundation.org>
	Cc: Borislav Petkov <bp@alien8.de>
	Cc: Christoph Hellwig <hch@infradead.org>
	Cc: H. Peter Anvin <hpa@zytor.com>
	Cc: Hedi Berriche <hedi.berriche@hpe.com>
	Cc: Justin Ernst <justin.ernst@hpe.com>
	Cc: Linus Torvalds <torvalds@linux-foundation.org>
	Cc: Peter Zijlstra <peterz@infradead.org>
	Cc: Russ Anderson <russ.anderson@hpe.com>
	Cc: Thomas Gleixner <tglx@linutronix.de>
Link: https://lkml.kernel.org/r/20190910145839.732237241@stormcage.eag.rdlabs.hpecorp.net
	Signed-off-by: Ingo Molnar <mingo@kernel.org>
(cherry picked from commit 61e5ddca9c2a312f933bf5b12bc08484189fefe6)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/kernel/apic/x2apic_uv_x.c
diff --cc arch/x86/kernel/apic/x2apic_uv_x.c
index b9f18051b988,66b38a608c76..000000000000
--- a/arch/x86/kernel/apic/x2apic_uv_x.c
+++ b/arch/x86/kernel/apic/x2apic_uv_x.c
@@@ -7,51 -7,36 +7,63 @@@
   *
   * Copyright (C) 2007-2014 Silicon Graphics, Inc. All rights reserved.
   */
 -#include <linux/crash_dump.h>
 -#include <linux/cpuhotplug.h>
  #include <linux/cpumask.h>
 +#include <linux/hardirq.h>
  #include <linux/proc_fs.h>
 -#include <linux/memory.h>
 -#include <linux/export.h>
 +#include <linux/threads.h>
 +#include <linux/kernel.h>
 +#include <linux/module.h>
 +#include <linux/string.h>
 +#include <linux/ctype.h>
 +#include <linux/sched.h>
 +#include <linux/timer.h>
 +#include <linux/slab.h>
 +#include <linux/cpu.h>
 +#include <linux/init.h>
 +#include <linux/io.h>
  #include <linux/pci.h>
++<<<<<<< HEAD
 +#include <linux/kdebug.h>
 +#include <linux/delay.h>
 +#include <linux/crash_dump.h>
 +#include <linux/memory.h>
++=======
+ #include <linux/acpi.h>
++>>>>>>> 61e5ddca9c2a (x86/platform/uv: Save OEM_ID from ACPI MADT probe)
  
 -#include <asm/e820/api.h>
  #include <asm/uv/uv_mmrs.h>
  #include <asm/uv/uv_hub.h>
 +#include <asm/current.h>
 +#include <asm/pgtable.h>
  #include <asm/uv/bios.h>
  #include <asm/uv/uv.h>
  #include <asm/apic.h>
 -
 -static DEFINE_PER_CPU(int, x2apic_extra_bits);
 -
 -static enum uv_system_type	uv_system_type;
 -static bool			uv_hubless_system;
 -static u64			gru_start_paddr, gru_end_paddr;
 -static u64			gru_dist_base, gru_first_node_paddr = -1LL, gru_last_node_paddr;
 -static u64			gru_dist_lmask, gru_dist_umask;
 -static union uvh_apicid		uvh_apicid;
 -
 +#include <asm/ipi.h>
 +#include <asm/smp.h>
 +#include <asm/x86_init.h>
 +#include <asm/emergency-restart.h>
 +#include <asm/nmi.h>
 +
 +DEFINE_PER_CPU(int, x2apic_extra_bits);
 +
 +#define PR_DEVEL(fmt, args...)	pr_devel("%s: " fmt, __func__, args)
 +
++<<<<<<< HEAD
 +static enum uv_system_type uv_system_type;
 +static bool uv_hubless_system;
 +static u64 gru_start_paddr, gru_end_paddr;
 +static u64 gru_dist_base, gru_first_node_paddr = -1LL, gru_last_node_paddr;
 +static u64 gru_dist_lmask, gru_dist_umask;
 +static union uvh_apicid uvh_apicid;
 +
 +/* info derived from CPUID */
++=======
+ /* Unpack OEM/TABLE ID's to be NULL terminated strings */
+ static u8 oem_id[ACPI_OEM_ID_SIZE + 1];
+ static u8 oem_table_id[ACPI_OEM_TABLE_ID_SIZE + 1];
+ 
+ /* Information derived from CPUID: */
++>>>>>>> 61e5ddca9c2a (x86/platform/uv: Save OEM_ID from ACPI MADT probe)
  static struct {
  	unsigned int apicid_shift;
  	unsigned int apicid_mask;
* Unmerged path arch/x86/kernel/apic/x2apic_uv_x.c
