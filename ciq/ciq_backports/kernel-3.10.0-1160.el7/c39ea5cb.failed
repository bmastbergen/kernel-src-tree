hv_netvsc: Fix tx_table init in rndis_set_subchannel()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1160.el7
commit-author Haiyang Zhang <haiyangz@microsoft.com>
commit c39ea5cba5a2e97fc01b78c85208bf31383b399c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1160.el7/c39ea5cb.failed

Host can provide send indirection table messages anytime after RSS is
enabled by calling rndis_filter_set_rss_param(). So the host provided
table values may be overwritten by the initialization in
rndis_set_subchannel().

To prevent this problem, move the tx_table initialization before calling
rndis_filter_set_rss_param().

Fixes: a6fb6aa3cfa9 ("hv_netvsc: Set tx_table to equal weight after subchannels open")
	Signed-off-by: Haiyang Zhang <haiyangz@microsoft.com>
	Signed-off-by: Jakub Kicinski <jakub.kicinski@netronome.com>
(cherry picked from commit c39ea5cba5a2e97fc01b78c85208bf31383b399c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/hyperv/rndis_filter.c
diff --cc drivers/net/hyperv/rndis_filter.c
index 7036e03ad76a,05bc5ec8bb1f..000000000000
--- a/drivers/net/hyperv/rndis_filter.c
+++ b/drivers/net/hyperv/rndis_filter.c
@@@ -1098,7 -1171,10 +1098,14 @@@ int rndis_set_subchannel(struct net_dev
  	wait_event(nvdev->subchan_open,
  		   atomic_read(&nvdev->open_chn) == nvdev->num_chn);
  
++<<<<<<< HEAD
 +	/* ignore failues from setting rss parameters, still have channels */
++=======
+ 	for (i = 0; i < VRSS_SEND_TAB_SIZE; i++)
+ 		ndev_ctx->tx_table[i] = i % nvdev->num_chn;
+ 
+ 	/* ignore failures from setting rss parameters, still have channels */
++>>>>>>> c39ea5cba5a2 (hv_netvsc: Fix tx_table init in rndis_set_subchannel())
  	if (dev_info)
  		rndis_filter_set_rss_param(rdev, dev_info->rss_key);
  	else
* Unmerged path drivers/net/hyperv/rndis_filter.c
