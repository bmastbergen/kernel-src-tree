scsi: scsi_debug: Avoid PI being disabled when TPGS is enabled

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1160.el7
commit-author Martin K. Petersen <martin.petersen@oracle.com>
commit 70bdf2026d905b8bfa0a455d35018df3e9777a6c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1160.el7/70bdf202.failed

It was not possible to enable both T10 PI and TPGS because they share
the same byte in the INQUIRY response. Logically OR the TPGS value
instead of using assignment.

	Reported-by: Ritika Srivastava <ritika.srivastava@oracle.com>
	Reviewed-by: Bart Van Assche <Bart.VanAssche@sandisk.com>
	Reviewed-by: Ewan D. Milne <emilne@redhat.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit 70bdf2026d905b8bfa0a455d35018df3e9777a6c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/scsi_debug.c
diff --cc drivers/scsi/scsi_debug.c
index 2e2fce2c8837,dc095a292c61..000000000000
--- a/drivers/scsi/scsi_debug.c
+++ b/drivers/scsi/scsi_debug.c
@@@ -929,13 -1398,13 +929,19 @@@ static int resp_inquiry(struct scsi_cmn
  		return ret;
  	}
  	/* drops through here for a standard inquiry */
 -	arr[1] = sdebug_removable ? 0x80 : 0;	/* Removable disk */
 -	arr[2] = sdebug_scsi_level;
 +	arr[1] = scsi_debug_removable ? 0x80 : 0;	/* Removable disk */
 +	arr[2] = scsi_debug_scsi_level;
  	arr[3] = 2;    /* response_data_format==2 */
  	arr[4] = SDEBUG_LONG_INQ_SZ - 5;
++<<<<<<< HEAD
 +	arr[5] = scsi_debug_dif ? 1 : 0; /* PROTECT bit */
 +	if (0 == scsi_debug_vpd_use_hostno)
 +		arr[5] = 0x10; /* claim: implicit TGPS */
++=======
+ 	arr[5] = (int)have_dif_prot;	/* PROTECT bit */
+ 	if (sdebug_vpd_use_hostno == 0)
+ 		arr[5] |= 0x10; /* claim: implicit TPGS */
++>>>>>>> 70bdf2026d90 (scsi: scsi_debug: Avoid PI being disabled when TPGS is enabled)
  	arr[6] = 0x10; /* claim: MultiP */
  	/* arr[6] |= 0x40; ... claim: EncServ (enclosure services) */
  	arr[7] = 0xa; /* claim: LINKED + CMDQUE */
* Unmerged path drivers/scsi/scsi_debug.c
