ALSA: usb-audio: Add quirk for Pioneer DJ DDJ-SR2

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-326.el8
commit-author Takashi Iwai <tiwai@suse.de>
commit 2c854e5c63ac56e7e0633fb6140c1bdf4d3dad96
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-326.el8/2c854e5c.failed

Yet another quirk for Pioneer DJ DDJ-SR2, which is quite similar like
other DJ DDJ models but with slightly different EPs or channels.

	Reported-by: Geraldo <geraldogabriel@gmail.com>
Link: https://lore.kernel.org/r/20201130083714.10640-1-tiwai@suse.de
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit 2c854e5c63ac56e7e0633fb6140c1bdf4d3dad96)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/usb/quirks-table.h
diff --cc sound/usb/quirks-table.h
index 6ba6a03cdcea,0e11cb96fa8c..000000000000
--- a/sound/usb/quirks-table.h
+++ b/sound/usb/quirks-table.h
@@@ -3532,6 -3525,119 +3532,122 @@@ AU0828_DEVICE(0x2040, 0x7270, "Hauppaug
  
  {
  	/*
++<<<<<<< HEAD
++=======
+ 	 * PIONEER DJ DDJ-RR
+ 	 * PCM is 6 channels out & 4 channels in @ 44.1 fixed
+ 	 */
+ 	USB_DEVICE_VENDOR_SPEC(0x2b73, 0x000d),
+ 	.driver_info = (unsigned long) &(const struct snd_usb_audio_quirk) {
+ 		.ifnum = QUIRK_ANY_INTERFACE,
+ 		.type = QUIRK_COMPOSITE,
+ 		.data = (const struct snd_usb_audio_quirk[]) {
+ 			{
+ 				.ifnum = 0,
+ 				.type = QUIRK_AUDIO_FIXED_ENDPOINT,
+ 				.data = &(const struct audioformat) {
+ 					.formats = SNDRV_PCM_FMTBIT_S24_3LE,
+ 					.channels = 6, //Master, Headphones & Booth
+ 					.iface = 0,
+ 					.altsetting = 1,
+ 					.altset_idx = 1,
+ 					.endpoint = 0x01,
+ 					.ep_attr = USB_ENDPOINT_XFER_ISOC|
+ 						   USB_ENDPOINT_SYNC_ASYNC,
+ 					.rates = SNDRV_PCM_RATE_44100,
+ 					.rate_min = 44100,
+ 					.rate_max = 44100,
+ 					.nr_rates = 1,
+ 					.rate_table = (unsigned int[]) { 44100 }
+ 				}
+ 			},
+ 			{
+ 				.ifnum = 0,
+ 				.type = QUIRK_AUDIO_FIXED_ENDPOINT,
+ 				.data = &(const struct audioformat) {
+ 					.formats = SNDRV_PCM_FMTBIT_S24_3LE,
+ 					.channels = 4, //2x RCA inputs (CH1 & CH2)
+ 					.iface = 0,
+ 					.altsetting = 1,
+ 					.altset_idx = 1,
+ 					.endpoint = 0x82,
+ 					.ep_attr = USB_ENDPOINT_XFER_ISOC|
+ 						 USB_ENDPOINT_SYNC_ASYNC|
+ 						 USB_ENDPOINT_USAGE_IMPLICIT_FB,
+ 					.rates = SNDRV_PCM_RATE_44100,
+ 					.rate_min = 44100,
+ 					.rate_max = 44100,
+ 					.nr_rates = 1,
+ 					.rate_table = (unsigned int[]) { 44100 }
+ 				}
+ 			},
+ 			{
+ 				.ifnum = -1
+ 			}
+ 		}
+ 	}
+ },
+ 
+ {
+ 	/*
+ 	 * PIONEER DJ DDJ-SR2
+ 	 * PCM is 4 channels out, 6 channels in @ 44.1 fixed
+ 	 * The Feedback for the output is the input
+ 	 */
+ 	USB_DEVICE_VENDOR_SPEC(0x2b73, 0x001e),
+ 		.driver_info = (unsigned long) &(const struct snd_usb_audio_quirk) {
+ 		.ifnum = QUIRK_ANY_INTERFACE,
+ 		.type = QUIRK_COMPOSITE,
+ 		.data = (const struct snd_usb_audio_quirk[]) {
+ 			{
+ 				.ifnum = 0,
+ 				.type = QUIRK_AUDIO_FIXED_ENDPOINT,
+ 				.data = &(const struct audioformat) {
+ 					.formats = SNDRV_PCM_FMTBIT_S24_3LE,
+ 					.channels = 4,
+ 					.iface = 0,
+ 					.altsetting = 1,
+ 					.altset_idx = 1,
+ 					.endpoint = 0x01,
+ 					.ep_attr = USB_ENDPOINT_XFER_ISOC|
+ 						USB_ENDPOINT_SYNC_ASYNC,
+ 					.rates = SNDRV_PCM_RATE_44100,
+ 					.rate_min = 44100,
+ 					.rate_max = 44100,
+ 					.nr_rates = 1,
+ 					.rate_table = (unsigned int[]) { 44100 }
+ 				}
+ 			},
+ 			{
+ 				.ifnum = 0,
+ 				.type = QUIRK_AUDIO_FIXED_ENDPOINT,
+ 				.data = &(const struct audioformat) {
+ 					.formats = SNDRV_PCM_FMTBIT_S24_3LE,
+ 					.channels = 6,
+ 					.iface = 0,
+ 					.altsetting = 1,
+ 					.altset_idx = 1,
+ 					.endpoint = 0x82,
+ 					.ep_attr = USB_ENDPOINT_XFER_ISOC|
+ 						USB_ENDPOINT_SYNC_ASYNC|
+ 					USB_ENDPOINT_USAGE_IMPLICIT_FB,
+ 					.rates = SNDRV_PCM_RATE_44100,
+ 					.rate_min = 44100,
+ 					.rate_max = 44100,
+ 					.nr_rates = 1,
+ 					.rate_table = (unsigned int[]) { 44100 }
+ 				}
+ 			},
+ 			{
+ 				.ifnum = -1
+ 			}
+ 		}
+ 	}
+ },
+ 
+ {
+ 	/*
++>>>>>>> 2c854e5c63ac (ALSA: usb-audio: Add quirk for Pioneer DJ DDJ-SR2)
  	 * Pioneer DJ DJM-900NXS2
  	 * 10 channels playback & 12 channels capture @ 44.1/48/96kHz S24LE
  	 */
* Unmerged path sound/usb/quirks-table.h
