net/mlx5e: Enable napi in channel's activation stage

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-326.el8
commit-author Tariq Toukan <tariqt@mellanox.com>
commit 7637e499e219ae89e5c42d947b96603ef3ab5a44
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-326.el8/7637e499.failed

The channel's napi is first needed upon activation, not creation.
Minimize its enabled scope by moving it from the channel's open/close
stage into the activate/deactivate stage.

	Signed-off-by: Tariq Toukan <tariqt@mellanox.com>
	Reviewed-by: Maxim Mikityanskiy <maximmi@mellanox.com>
	Signed-off-by: Saeed Mahameed <saeedm@nvidia.com>
(cherry picked from commit 7637e499e219ae89e5c42d947b96603ef3ab5a44)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/en/ptp.c
#	drivers/net/ethernet/mellanox/mlx5/core/en_main.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/en_main.c
index 4b7d83e6ef25,41c611197211..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_main.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_main.c
@@@ -2030,6 -2078,9 +2027,12 @@@ static void mlx5e_deactivate_channel(st
  	mlx5e_deactivate_icosq(&c->icosq);
  	for (tc = 0; tc < c->num_tc; tc++)
  		mlx5e_deactivate_txqsq(&c->sq[tc]);
++<<<<<<< HEAD
++=======
+ 	mlx5e_qos_deactivate_queues(c);
+ 
+ 	napi_disable(&c->napi);
++>>>>>>> 7637e499e219 (net/mlx5e: Enable napi in channel's activation stage)
  }
  
  static void mlx5e_close_channel(struct mlx5e_channel *c)
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en/ptp.c
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en/ptp.c
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en_main.c
