ALSA: usb-audio: Add Pioneer DJM-850 to quirks-table

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-326.el8
commit-author Nicolas MURE <nicolas.mure2019@gmail.com>
commit a3c30b0cb6d05f5bf66d1a5d42e876f31753a447
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-326.el8/a3c30b0c.failed

Declare the Pioneer DJM-850 interfaces for capture and playback.

See https://github.com/nm2107/Pioneer-DJM-850-driver-reverse-engineering/blob/172fb9a61055960c88c67b7c416fe5bf3609807b/doc/usb-device-specifications.md
for the complete device spec.

	Signed-off-by: Nicolas MURE <nicolas.mure2019@gmail.com>
Link: https://lore.kernel.org/r/20210301152729.18094-2-nicolas.mure2019@gmail.com
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit a3c30b0cb6d05f5bf66d1a5d42e876f31753a447)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/usb/quirks-table.h
diff --cc sound/usb/quirks-table.h
index dda4a7c239d9,9716a9f7c095..000000000000
--- a/sound/usb/quirks-table.h
+++ b/sound/usb/quirks-table.h
@@@ -3693,6 -3757,186 +3693,189 @@@ AU0828_DEVICE(0x2040, 0x7270, "Hauppaug
  		}
  	}
  },
++<<<<<<< HEAD
++=======
+ {
+ 	/*
+ 	 * Pioneer DJ DJM-750
+ 	 * 8 channels playback & 8 channels capture @ 44.1/48/96kHz S24LE
+ 	 */
+ 	USB_DEVICE_VENDOR_SPEC(0x08e4, 0x017f),
+ 	.driver_info = (unsigned long) &(const struct snd_usb_audio_quirk) {
+ 		.ifnum = QUIRK_ANY_INTERFACE,
+ 		.type = QUIRK_COMPOSITE,
+ 		.data = (const struct snd_usb_audio_quirk[]) {
+ 			{
+ 				.ifnum = 0,
+ 				.type = QUIRK_AUDIO_FIXED_ENDPOINT,
+ 				.data = &(const struct audioformat) {
+ 					.formats = SNDRV_PCM_FMTBIT_S24_3LE,
+ 					.channels = 8,
+ 					.iface = 0,
+ 					.altsetting = 1,
+ 					.altset_idx = 1,
+ 					.endpoint = 0x05,
+ 					.ep_attr = USB_ENDPOINT_XFER_ISOC|
+ 					    USB_ENDPOINT_SYNC_ASYNC,
+ 					.rates = SNDRV_PCM_RATE_44100|
+ 						SNDRV_PCM_RATE_48000|
+ 						SNDRV_PCM_RATE_96000,
+ 					.rate_min = 44100,
+ 					.rate_max = 96000,
+ 					.nr_rates = 3,
+ 					.rate_table = (unsigned int[]) { 44100, 48000, 96000 }
+ 				}
+ 			},
+ 			{
+ 				.ifnum = 0,
+ 				.type = QUIRK_AUDIO_FIXED_ENDPOINT,
+ 				.data = &(const struct audioformat) {
+ 					.formats = SNDRV_PCM_FMTBIT_S24_3LE,
+ 					.channels = 8,
+ 					.iface = 0,
+ 					.altsetting = 1,
+ 					.altset_idx = 1,
+ 					.endpoint = 0x86,
+ 					.ep_idx = 1,
+ 					.ep_attr = USB_ENDPOINT_XFER_ISOC|
+ 						USB_ENDPOINT_SYNC_ASYNC|
+ 						USB_ENDPOINT_USAGE_IMPLICIT_FB,
+ 					.rates = SNDRV_PCM_RATE_44100|
+ 						SNDRV_PCM_RATE_48000|
+ 						SNDRV_PCM_RATE_96000,
+ 					.rate_min = 44100,
+ 					.rate_max = 96000,
+ 					.nr_rates = 3,
+ 					.rate_table = (unsigned int[]) { 44100, 48000, 96000 }
+ 				}
+ 			},
+ 			{
+ 				.ifnum = -1
+ 			}
+ 		}
+ 	}
+ },
+ {
+ 	/*
+ 	 * Pioneer DJ DJM-850
+ 	 * 8 channels playback and 8 channels capture @ 44.1/48/96kHz S24LE
+ 	 * Playback on EP 0x05
+ 	 * Capture on EP 0x86
+ 	 */
+ 	USB_DEVICE_VENDOR_SPEC(0x08e4, 0x0163),
+ 	.driver_info = (unsigned long) &(const struct snd_usb_audio_quirk) {
+ 		.ifnum = QUIRK_ANY_INTERFACE,
+ 		.type = QUIRK_COMPOSITE,
+ 		.data = (const struct snd_usb_audio_quirk[]) {
+ 			{
+ 				.ifnum = 0,
+ 				.type = QUIRK_AUDIO_FIXED_ENDPOINT,
+ 				.data = &(const struct audioformat) {
+ 					.formats = SNDRV_PCM_FMTBIT_S24_3LE,
+ 					.channels = 8,
+ 					.iface = 0,
+ 					.altsetting = 1,
+ 					.altset_idx = 1,
+ 					.endpoint = 0x05,
+ 					.ep_attr = USB_ENDPOINT_XFER_ISOC|
+ 					    USB_ENDPOINT_SYNC_ASYNC|
+ 						USB_ENDPOINT_USAGE_DATA,
+ 					.rates = SNDRV_PCM_RATE_44100|
+ 						SNDRV_PCM_RATE_48000|
+ 						SNDRV_PCM_RATE_96000,
+ 					.rate_min = 44100,
+ 					.rate_max = 96000,
+ 					.nr_rates = 3,
+ 					.rate_table = (unsigned int[]) { 44100, 48000, 96000 }
+ 				}
+ 			},
+ 			{
+ 				.ifnum = 0,
+ 				.type = QUIRK_AUDIO_FIXED_ENDPOINT,
+ 				.data = &(const struct audioformat) {
+ 					.formats = SNDRV_PCM_FMTBIT_S24_3LE,
+ 					.channels = 8,
+ 					.iface = 0,
+ 					.altsetting = 1,
+ 					.altset_idx = 1,
+ 					.endpoint = 0x86,
+ 					.ep_idx = 1,
+ 					.ep_attr = USB_ENDPOINT_XFER_ISOC|
+ 						USB_ENDPOINT_SYNC_ASYNC|
+ 						USB_ENDPOINT_USAGE_DATA,
+ 					.rates = SNDRV_PCM_RATE_44100|
+ 						SNDRV_PCM_RATE_48000|
+ 						SNDRV_PCM_RATE_96000,
+ 					.rate_min = 44100,
+ 					.rate_max = 96000,
+ 					.nr_rates = 3,
+ 					.rate_table = (unsigned int[]) { 44100, 48000, 96000 }
+ 				}
+ 			},
+ 			{
+ 				.ifnum = -1
+ 			}
+ 		}
+ 	}
+ },
+ {
+ 	/*
+ 	 * Pioneer DJ DJM-450
+ 	 * PCM is 8 channels out @ 48 fixed (endpoint 0x01)
+ 	 * and 8 channels in @ 48 fixed (endpoint 0x82).
+ 	 */
+ 	USB_DEVICE_VENDOR_SPEC(0x2b73, 0x0013),
+ 	.driver_info = (unsigned long) &(const struct snd_usb_audio_quirk) {
+ 		.ifnum = QUIRK_ANY_INTERFACE,
+ 		.type = QUIRK_COMPOSITE,
+ 		.data = (const struct snd_usb_audio_quirk[]) {
+ 			{
+ 				.ifnum = 0,
+ 				.type = QUIRK_AUDIO_FIXED_ENDPOINT,
+ 				.data = &(const struct audioformat) {
+ 					.formats = SNDRV_PCM_FMTBIT_S24_3LE,
+ 					.channels = 8, // outputs
+ 					.iface = 0,
+ 					.altsetting = 1,
+ 					.altset_idx = 1,
+ 					.endpoint = 0x01,
+ 					.ep_attr = USB_ENDPOINT_XFER_ISOC|
+ 						USB_ENDPOINT_SYNC_ASYNC,
+ 					.rates = SNDRV_PCM_RATE_48000,
+ 					.rate_min = 48000,
+ 					.rate_max = 48000,
+ 					.nr_rates = 1,
+ 					.rate_table = (unsigned int[]) { 48000 }
+ 					}
+ 			},
+ 			{
+ 				.ifnum = 0,
+ 				.type = QUIRK_AUDIO_FIXED_ENDPOINT,
+ 				.data = &(const struct audioformat) {
+ 					.formats = SNDRV_PCM_FMTBIT_S24_3LE,
+ 					.channels = 8, // inputs
+ 					.iface = 0,
+ 					.altsetting = 1,
+ 					.altset_idx = 1,
+ 					.endpoint = 0x82,
+ 					.ep_idx = 1,
+ 					.ep_attr = USB_ENDPOINT_XFER_ISOC|
+ 						USB_ENDPOINT_SYNC_ASYNC|
+ 						USB_ENDPOINT_USAGE_IMPLICIT_FB,
+ 					.rates = SNDRV_PCM_RATE_48000,
+ 					.rate_min = 48000,
+ 					.rate_max = 48000,
+ 					.nr_rates = 1,
+ 					.rate_table = (unsigned int[]) { 48000 }
+ 				}
+ 			},
+ 			{
+ 				.ifnum = -1
+ 			}
+ 		}
+ 	}
+ },
++>>>>>>> a3c30b0cb6d0 (ALSA: usb-audio: Add Pioneer DJM-850 to quirks-table)
  
  #undef USB_DEVICE_VENDOR_SPEC
  #undef USB_AUDIO_DEVICE
* Unmerged path sound/usb/quirks-table.h
