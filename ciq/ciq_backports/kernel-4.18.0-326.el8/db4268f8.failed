dma-mapping: move valid_dma_direction to dma-direction.h

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-326.el8
commit-author Christoph Hellwig <hch@lst.de>
commit db4268f8c575617bacdeff862c7de674dbf65075
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-326.el8/db4268f8.failed

Move the valid_dma_direction helper to a more suitable header, and
clean it up to use the proper enum as well as removing pointless braces.

	Signed-off-by: Christoph Hellwig <hch@lst.de>
(cherry picked from commit db4268f8c575617bacdeff862c7de674dbf65075)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/linux/dma-mapping.h
diff --cc include/linux/dma-mapping.h
index 345f9e13b263,51e93d44b826..000000000000
--- a/include/linux/dma-mapping.h
+++ b/include/linux/dma-mapping.h
@@@ -146,21 -138,7 +146,25 @@@ extern const struct dma_map_ops dma_dum
  
  #define DMA_BIT_MASK(n)	(((n) == 64) ? ~0ULL : ((1ULL<<(n))-1))
  
++<<<<<<< HEAD
 +#define DMA_MASK_NONE	0x0ULL
 +
 +static inline int valid_dma_direction(int dma_direction)
 +{
 +	return ((dma_direction == DMA_BIDIRECTIONAL) ||
 +		(dma_direction == DMA_TO_DEVICE) ||
 +		(dma_direction == DMA_FROM_DEVICE));
 +}
 +
 +static inline int is_device_dma_capable(struct device *dev)
 +{
 +	return dev->dma_mask != NULL && *dev->dma_mask != DMA_MASK_NONE;
 +}
 +
 +#ifdef CONFIG_HAVE_GENERIC_DMA_COHERENT
++=======
+ #ifdef CONFIG_DMA_DECLARE_COHERENT
++>>>>>>> db4268f8c575 (dma-mapping: move valid_dma_direction to dma-direction.h)
  /*
   * These three functions are only for dma allocator.
   * Don't use them in device drivers.
diff --git a/include/linux/dma-direction.h b/include/linux/dma-direction.h
index 9c96e30e6a0b..a2fe4571bc92 100644
--- a/include/linux/dma-direction.h
+++ b/include/linux/dma-direction.h
@@ -9,4 +9,10 @@ enum dma_data_direction {
 	DMA_NONE = 3,
 };
 
-#endif
+static inline int valid_dma_direction(enum dma_data_direction dir)
+{
+	return dir == DMA_BIDIRECTIONAL || dir == DMA_TO_DEVICE ||
+		dir == DMA_FROM_DEVICE;
+}
+
+#endif /* _LINUX_DMA_DIRECTION_H */
* Unmerged path include/linux/dma-mapping.h
