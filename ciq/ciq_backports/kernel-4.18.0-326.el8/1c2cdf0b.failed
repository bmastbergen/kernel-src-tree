net/mlx5e: Set PTP channel pointer explicitly to NULL

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-326.el8
commit-author Aya Levin <ayal@nvidia.com>
commit 1c2cdf0b603a3b0c763288ad92e9f3f1555925cf
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-326.el8/1c2cdf0b.failed

When closing the PTP channel, set its pointer explicitly to NULL. PTP
channel is opened on demand, the code verify the pointer validity before
access. Nullify it when closing the PTP channel to avoid unexpected
behavior.

Fixes: 145e5637d941 ("net/mlx5e: Add TX PTP port object support")
	Signed-off-by: Aya Levin <ayal@nvidia.com>
	Reviewed-by: Tariq Toukan <tariqt@nvidia.com>
	Signed-off-by: Saeed Mahameed <saeedm@nvidia.com>
(cherry picked from commit 1c2cdf0b603a3b0c763288ad92e9f3f1555925cf)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/en_main.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/en_main.c
index ff399043f394,66d23cd275c1..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_main.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_main.c
@@@ -2416,6 -2503,11 +2416,14 @@@ void mlx5e_close_channels(struct mlx5e_
  {
  	int i;
  
++<<<<<<< HEAD
++=======
+ 	if (chs->port_ptp) {
+ 		mlx5e_port_ptp_close(chs->port_ptp);
+ 		chs->port_ptp = NULL;
+ 	}
+ 
++>>>>>>> 1c2cdf0b603a (net/mlx5e: Set PTP channel pointer explicitly to NULL)
  	for (i = 0; i < chs->num; i++)
  		mlx5e_close_channel(chs->c[i]);
  
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en_main.c
