net/mlx5: E-switch, Set per vport table default group number

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-326.el8
commit-author Chris Mi <cmi@nvidia.com>
commit c1904360dde8fb4f79bec4751c7540df10d57ec2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-326.el8/c1904360.failed

Different per voprt table is created using a different per vport table
namespace. Because we can't use variable to set the namespace member
value.  If max group number is 0 in the namespace, use the eswitch
default max group number.

	Signed-off-by: Chris Mi <cmi@nvidia.com>
	Reviewed-by: Oz Shlomo <ozsh@nvidia.com>
	Reviewed-by: Mark Bloch <mbloch@nvidia.com>
	Signed-off-by: Saeed Mahameed <saeedm@nvidia.com>
(cherry picked from commit c1904360dde8fb4f79bec4751c7540df10d57ec2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/esw/vporttbl.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/esw/vporttbl.c
index 8219c5d50db0,9e72118f2e4c..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/esw/vporttbl.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/esw/vporttbl.c
@@@ -29,9 -28,13 +29,17 @@@ esw_vport_tbl_create(struct mlx5_eswitc
  	struct mlx5_flow_table_attr ft_attr = {};
  	struct mlx5_flow_table *fdb;
  
++<<<<<<< HEAD
 +	ft_attr.autogroup.max_num_groups = MLX5_ESW_VPORT_TBL_NUM_GROUPS;
 +	ft_attr.max_fte = MLX5_ESW_VPORT_TABLE_SIZE;
++=======
+ 	if (vport_ns->max_num_groups)
+ 		ft_attr.autogroup.max_num_groups = vport_ns->max_num_groups;
+ 	else
+ 		ft_attr.autogroup.max_num_groups = esw->params.large_group_num;
+ 	ft_attr.max_fte = vport_ns->max_fte;
++>>>>>>> c1904360dde8 (net/mlx5: E-switch, Set per vport table default group number)
  	ft_attr.prio = FDB_PER_VPORT;
 -	ft_attr.flags = vport_ns->flags;
  	fdb = mlx5_create_auto_grouped_flow_table(ns, &ft_attr);
  	if (IS_ERR(fdb)) {
  		esw_warn(esw->dev, "Failed to create per vport FDB Table err %ld\n",
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/esw/vporttbl.c
