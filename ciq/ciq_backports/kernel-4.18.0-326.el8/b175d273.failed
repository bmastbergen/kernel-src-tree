USB: legotower: fix logical error in recent commit

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-326.el8
commit-author Alan Stern <stern@rowland.harvard.edu>
commit b175d273d4e4100b66e68f0675fef7a3c07a7957
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-326.el8/b175d273.failed

Commit d9f0d82f06c6 ("USB: legousbtower: use usb_control_msg_recv()")
contained an elementary logical error.  The check of the return code
from the new usb_control_msg_recv() function was inverted.

Reported-and-tested-by: syzbot+9be25235b7a69b24d117@syzkaller.appspotmail.com
	Signed-off-by: Alan Stern <stern@rowland.harvard.edu>
Link: https://lore.kernel.org/r/20201208163042.GD1298255@rowland.harvard.edu
Fixes: d9f0d82f06c6 ("USB: legousbtower: use usb_control_msg_recv()")
	Cc: stable <stable@vger.kernel.org>
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit b175d273d4e4100b66e68f0675fef7a3c07a7957)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/usb/misc/legousbtower.c
diff --cc drivers/usb/misc/legousbtower.c
index f922544056de,1c9e09138c10..000000000000
--- a/drivers/usb/misc/legousbtower.c
+++ b/drivers/usb/misc/legousbtower.c
@@@ -798,25 -788,16 +798,37 @@@ static int tower_probe(struct usb_inter
  	dev->interrupt_in_interval = interrupt_in_interval ? interrupt_in_interval : dev->interrupt_in_endpoint->bInterval;
  	dev->interrupt_out_interval = interrupt_out_interval ? interrupt_out_interval : dev->interrupt_out_endpoint->bInterval;
  
 +	get_version_reply = kmalloc(sizeof(*get_version_reply), GFP_KERNEL);
 +	if (!get_version_reply) {
 +		retval = -ENOMEM;
 +		goto error;
 +	}
 +
  	/* get the firmware version and log it */
++<<<<<<< HEAD
 +	result = usb_control_msg(udev,
 +				 usb_rcvctrlpipe(udev, 0),
 +				 LEGO_USB_TOWER_REQUEST_GET_VERSION,
 +				 USB_TYPE_VENDOR | USB_DIR_IN | USB_RECIP_DEVICE,
 +				 0,
 +				 0,
 +				 get_version_reply,
 +				 sizeof(*get_version_reply),
 +				 1000);
 +	if (result != sizeof(*get_version_reply)) {
 +		if (result >= 0)
 +			result = -EIO;
++=======
+ 	result = usb_control_msg_recv(udev, 0,
+ 				      LEGO_USB_TOWER_REQUEST_GET_VERSION,
+ 				      USB_TYPE_VENDOR | USB_DIR_IN | USB_RECIP_DEVICE,
+ 				      0,
+ 				      0,
+ 				      &get_version_reply,
+ 				      sizeof(get_version_reply),
+ 				      1000, GFP_KERNEL);
+ 	if (result) {
++>>>>>>> b175d273d4e4 (USB: legotower: fix logical error in recent commit)
  		dev_err(idev, "get version request failed: %d\n", result);
  		retval = result;
  		goto error;
* Unmerged path drivers/usb/misc/legousbtower.c
