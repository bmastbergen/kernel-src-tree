ibmvnic: print reset reason as a string

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-326.el8
commit-author Lijun Pan <lijunp213@gmail.com>
commit caee7bf5b0a9a1b0956b5910f0c44278ec1a9bb4
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-326.el8/caee7bf5.failed

The reset reason can be added or deleted over different versions
of the source code. Print a string instead of a number.

	Signed-off-by: Lijun Pan <lijunp213@gmail.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit caee7bf5b0a9a1b0956b5910f0c44278ec1a9bb4)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/ibm/ibmvnic.c
diff --cc drivers/net/ethernet/ibm/ibmvnic.c
index c3c11936a552,5c89dd7fa3de..000000000000
--- a/drivers/net/ethernet/ibm/ibmvnic.c
+++ b/drivers/net/ethernet/ibm/ibmvnic.c
@@@ -2416,9 -2383,8 +2436,14 @@@ static int ibmvnic_reset(struct ibmvnic
  	list_for_each(entry, &adapter->rwi_list) {
  		tmp = list_entry(entry, struct ibmvnic_rwi, list);
  		if (tmp->reset_reason == reason) {
++<<<<<<< HEAD
 +			netdev_dbg(netdev, "Skipping matching reset, reason=%d\n",
 +				   reason);
 +			spin_unlock_irqrestore(&adapter->rwi_lock, flags);
++=======
+ 			netdev_dbg(netdev, "Skipping matching reset, reason=%s\n",
+ 				   reset_reason_to_string(reason));
++>>>>>>> caee7bf5b0a9 (ibmvnic: print reset reason as a string)
  			ret = EBUSY;
  			goto err;
  		}
@@@ -2440,12 -2404,18 +2465,17 @@@
  	}
  	rwi->reset_reason = reason;
  	list_add_tail(&rwi->list, &adapter->rwi_list);
++<<<<<<< HEAD
 +	spin_unlock_irqrestore(&adapter->rwi_lock, flags);
 +	netdev_dbg(adapter->netdev, "Scheduling reset (reason %d)\n", reason);
++=======
+ 	netdev_dbg(adapter->netdev, "Scheduling reset (reason %s)\n",
+ 		   reset_reason_to_string(reason));
++>>>>>>> caee7bf5b0a9 (ibmvnic: print reset reason as a string)
  	schedule_work(&adapter->ibmvnic_reset);
  
 -	ret = 0;
 +	return 0;
  err:
 -	/* ibmvnic_close() below can block, so drop the lock first */
 -	spin_unlock_irqrestore(&adapter->rwi_lock, flags);
 -
 -	if (ret == ENOMEM)
 -		ibmvnic_close(netdev);
 -
  	return -ret;
  }
  
* Unmerged path drivers/net/ethernet/ibm/ibmvnic.c
