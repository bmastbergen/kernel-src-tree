iommu/arm-smmu: Move Arm SMMU drivers into their own subdirectory

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-326.el8
commit-author Will Deacon <will@kernel.org>
commit e86d1aa8b60f7ea18d36f50296d7d20eb2852e7e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-326.el8/e86d1aa8.failed

The Arm SMMU drivers are getting fat on vendor value-add, so move them
to their own subdirectory out of the way of the other IOMMU drivers.

	Suggested-by: Joerg Roedel <joro@8bytes.org>
	Signed-off-by: Will Deacon <will@kernel.org>
(cherry picked from commit e86d1aa8b60f7ea18d36f50296d7d20eb2852e7e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	MAINTAINERS
#	drivers/iommu/Makefile
#	drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.c
#	drivers/iommu/arm/arm-smmu/arm-smmu-qcom.c
diff --cc MAINTAINERS
index 3c3ba1dd9b1c,e15470442d3e..000000000000
--- a/MAINTAINERS
+++ b/MAINTAINERS
@@@ -1167,9 -1497,10 +1167,15 @@@ M:	Will Deacon <will.deacon@arm.com
  R:	Robin Murphy <robin.murphy@arm.com>
  L:	linux-arm-kernel@lists.infradead.org (moderated for non-subscribers)
  S:	Maintained
++<<<<<<< HEAD
 +F:	drivers/iommu/arm-smmu*
++=======
+ F:	Documentation/devicetree/bindings/iommu/arm,smmu*
+ F:	drivers/iommu/arm/
+ F:	drivers/iommu/io-pgtable-arm-v7s.c
++>>>>>>> e86d1aa8b60f (iommu/arm-smmu: Move Arm SMMU drivers into their own subdirectory)
  F:	drivers/iommu/io-pgtable-arm.c
 +F:	drivers/iommu/io-pgtable-arm-v7s.c
  
  ARM SUB-ARCHITECTURES
  L:	linux-arm-kernel@lists.infradead.org (moderated for non-subscribers)
@@@ -14409,8 -16810,10 +14415,12 @@@ F:	drivers/i2c/busses/i2c-tegra.
  
  TEGRA IOMMU DRIVERS
  M:	Thierry Reding <thierry.reding@gmail.com>
 -R:	Krishna Reddy <vdumpa@nvidia.com>
  L:	linux-tegra@vger.kernel.org
  S:	Supported
++<<<<<<< HEAD
++=======
+ F:	drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.c
++>>>>>>> e86d1aa8b60f (iommu/arm-smmu: Move Arm SMMU drivers into their own subdirectory)
  F:	drivers/iommu/tegra*
  
  TEGRA KBC DRIVER
diff --cc drivers/iommu/Makefile
index f4971e82f358,d971cffc810b..000000000000
--- a/drivers/iommu/Makefile
+++ b/drivers/iommu/Makefile
@@@ -1,5 -1,5 +1,9 @@@
  # SPDX-License-Identifier: GPL-2.0
++<<<<<<< HEAD
 +obj-y += amd/ intel/
++=======
+ obj-y += arm/
++>>>>>>> e86d1aa8b60f (iommu/arm-smmu: Move Arm SMMU drivers into their own subdirectory)
  obj-$(CONFIG_IOMMU_API) += iommu.o
  obj-$(CONFIG_IOMMU_API) += iommu-traces.o
  obj-$(CONFIG_IOMMU_API) += iommu-sysfs.o
@@@ -12,11 -12,16 +16,22 @@@ obj-$(CONFIG_IOASID) += ioasid.
  obj-$(CONFIG_IOMMU_IOVA) += iova.o
  obj-$(CONFIG_OF_IOMMU)	+= of_iommu.o
  obj-$(CONFIG_MSM_IOMMU) += msm_iommu.o
++<<<<<<< HEAD
 +obj-$(CONFIG_ARM_SMMU) += arm_smmu.o
 +arm_smmu-objs += arm-smmu.o arm-smmu-impl.o
 +obj-$(CONFIG_ARM_SMMU_V3) += arm-smmu-v3.o
++=======
+ obj-$(CONFIG_AMD_IOMMU) += amd/iommu.o amd/init.o amd/quirks.o
+ obj-$(CONFIG_AMD_IOMMU_DEBUGFS) += amd/debugfs.o
+ obj-$(CONFIG_AMD_IOMMU_V2) += amd/iommu_v2.o
+ obj-$(CONFIG_DMAR_TABLE) += intel/dmar.o
+ obj-$(CONFIG_INTEL_IOMMU) += intel/iommu.o intel/pasid.o
+ obj-$(CONFIG_INTEL_IOMMU) += intel/trace.o
+ obj-$(CONFIG_INTEL_IOMMU_DEBUGFS) += intel/debugfs.o
+ obj-$(CONFIG_INTEL_IOMMU_SVM) += intel/svm.o
++>>>>>>> e86d1aa8b60f (iommu/arm-smmu: Move Arm SMMU drivers into their own subdirectory)
  obj-$(CONFIG_IPMMU_VMSA) += ipmmu-vmsa.o
 -obj-$(CONFIG_IRQ_REMAP) += intel/irq_remapping.o irq_remapping.o
 +obj-$(CONFIG_IRQ_REMAP) += irq_remapping.o
  obj-$(CONFIG_MTK_IOMMU) += mtk_iommu.o
  obj-$(CONFIG_MTK_IOMMU_V1) += mtk_iommu_v1.o
  obj-$(CONFIG_OMAP_IOMMU) += omap-iommu.o
* Unmerged path drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.c
* Unmerged path drivers/iommu/arm/arm-smmu/arm-smmu-qcom.c
* Unmerged path MAINTAINERS
* Unmerged path drivers/iommu/Makefile
diff --git a/drivers/iommu/arm/Makefile b/drivers/iommu/arm/Makefile
new file mode 100644
index 000000000000..0f9efeab709f
--- /dev/null
+++ b/drivers/iommu/arm/Makefile
@@ -0,0 +1,2 @@
+# SPDX-License-Identifier: GPL-2.0
+obj-y += arm-smmu/ arm-smmu-v3/
diff --git a/drivers/iommu/arm/arm-smmu-v3/Makefile b/drivers/iommu/arm/arm-smmu-v3/Makefile
new file mode 100644
index 000000000000..569e24e9f162
--- /dev/null
+++ b/drivers/iommu/arm/arm-smmu-v3/Makefile
@@ -0,0 +1,2 @@
+# SPDX-License-Identifier: GPL-2.0
+obj-$(CONFIG_ARM_SMMU_V3) += arm-smmu-v3.o
diff --git a/drivers/iommu/arm-smmu-v3.c b/drivers/iommu/arm/arm-smmu-v3/arm-smmu-v3.c
similarity index 100%
rename from drivers/iommu/arm-smmu-v3.c
rename to drivers/iommu/arm/arm-smmu-v3/arm-smmu-v3.c
diff --git a/drivers/iommu/arm/arm-smmu/Makefile b/drivers/iommu/arm/arm-smmu/Makefile
new file mode 100644
index 000000000000..e240a7bcf310
--- /dev/null
+++ b/drivers/iommu/arm/arm-smmu/Makefile
@@ -0,0 +1,4 @@
+# SPDX-License-Identifier: GPL-2.0
+obj-$(CONFIG_QCOM_IOMMU) += qcom_iommu.o
+obj-$(CONFIG_ARM_SMMU) += arm_smmu.o
+arm_smmu-objs += arm-smmu.o arm-smmu-impl.o arm-smmu-nvidia.o arm-smmu-qcom.o
diff --git a/drivers/iommu/arm-smmu-impl.c b/drivers/iommu/arm/arm-smmu/arm-smmu-impl.c
similarity index 100%
rename from drivers/iommu/arm-smmu-impl.c
rename to drivers/iommu/arm/arm-smmu/arm-smmu-impl.c
* Unmerged path drivers/iommu/arm/arm-smmu/arm-smmu-nvidia.c
* Unmerged path drivers/iommu/arm/arm-smmu/arm-smmu-qcom.c
diff --git a/drivers/iommu/arm-smmu.c b/drivers/iommu/arm/arm-smmu/arm-smmu.c
similarity index 100%
rename from drivers/iommu/arm-smmu.c
rename to drivers/iommu/arm/arm-smmu/arm-smmu.c
diff --git a/drivers/iommu/arm-smmu.h b/drivers/iommu/arm/arm-smmu/arm-smmu.h
similarity index 100%
rename from drivers/iommu/arm-smmu.h
rename to drivers/iommu/arm/arm-smmu/arm-smmu.h
diff --git a/drivers/iommu/qcom_iommu.c b/drivers/iommu/arm/arm-smmu/qcom_iommu.c
similarity index 100%
rename from drivers/iommu/qcom_iommu.c
rename to drivers/iommu/arm/arm-smmu/qcom_iommu.c
