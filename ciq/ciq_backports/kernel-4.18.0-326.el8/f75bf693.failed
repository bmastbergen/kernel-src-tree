platform/x86: intel_pmc_core: add ACPI dependency

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-326.el8
commit-author Arnd Bergmann <arnd@arndb.de>
commit f75bf693c919438cbe44717d63aa11856a062b9a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-326.el8/f75bf693.failed

The driver now fails to build without ACPI:

drivers/platform/x86/intel_pmc_core.c: In function 'pmc_core_get_tgl_lpm_reqs':
drivers/platform/x86/intel_pmc_core.c:617:41: error: invalid use of undefined type 'struct acpi_device'
  617 |         out_obj = acpi_evaluate_dsm(adev->handle, &s0ix_dsm_guid, 0,

This could probably be made optional, but it won't be used without
ACPI in practice, so just add a Kconfig dependency.

Fixes: 428131364f00 ("platform/x86: intel_pmc_core: Get LPM requirements for Tiger Lake")
	Signed-off-by: Arnd Bergmann <arnd@arndb.de>
Link: https://lore.kernel.org/r/20210421134957.3329062-1-arnd@kernel.org
	Signed-off-by: Hans de Goede <hdegoede@redhat.com>
(cherry picked from commit f75bf693c919438cbe44717d63aa11856a062b9a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/platform/x86/Kconfig
diff --cc drivers/platform/x86/Kconfig
index 4ffe971c8841,2714f7c3843e..000000000000
--- a/drivers/platform/x86/Kconfig
+++ b/drivers/platform/x86/Kconfig
@@@ -1203,17 -1169,48 +1203,54 @@@ config INTEL_BXTWC_PMIC_TM
  	  This driver enables the alarm wakeup functionality in the TMU unit
  	  of Whiskey Cove PMIC.
  
 -config INTEL_CHTDC_TI_PWRBTN
 -	tristate "Intel Cherry Trail Dollar Cove TI power button driver"
 -	depends on INTEL_SOC_PMIC_CHTDC_TI
 -	depends on INPUT
 -	help
 -	  This option adds a power button driver driver for Dollar Cove TI
 -	  PMIC on Intel Cherry Trail devices.
 -
 +config SURFACE_PRO3_BUTTON
 +	tristate "Power/home/volume buttons driver for Microsoft Surface Pro 3/4 tablet"
 +	depends on ACPI && INPUT
 +	---help---
 +	  This driver handles the power/home/volume buttons on the Microsoft Surface Pro 3/4 tablet.
 +
++<<<<<<< HEAD
 +config SURFACE_3_BUTTON
 +	tristate "Power/home/volume buttons driver for Microsoft Surface 3 tablet"
 +	depends on ACPI && KEYBOARD_GPIO && I2C
 +	---help---
 +	  This driver handles the power/home/volume buttons on the Microsoft Surface 3 tablet.
++=======
+ 	  To compile this driver as a module, choose M here: the module
+ 	  will be called intel_chtdc_ti_pwrbtn.
+ 
+ config INTEL_MRFLD_PWRBTN
+ 	tristate "Intel Merrifield Basin Cove power button driver"
+ 	depends on INTEL_SOC_PMIC_MRFLD
+ 	depends on INPUT
+ 	help
+ 	  This option adds a power button driver for Basin Cove PMIC
+ 	  on Intel Merrifield devices.
+ 
+ 	  To compile this driver as a module, choose M here: the module
+ 	  will be called intel_mrfld_pwrbtn.
+ 
+ config INTEL_PMC_CORE
+ 	tristate "Intel PMC Core driver"
+ 	depends on PCI
+ 	depends on ACPI
+ 	help
+ 	  The Intel Platform Controller Hub for Intel Core SoCs provides access
+ 	  to Power Management Controller registers via various interfaces. This
+ 	  driver can utilize debugging capabilities and supported features as
+ 	  exposed by the Power Management Controller. It also may perform some
+ 	  tasks in the PMC in order to enable transition into the SLPS0 state.
+ 	  It should be selected on all Intel platforms supported by the driver.
+ 
+ 	  Supported features:
+ 		- SLP_S0_RESIDENCY counter
+ 		- PCH IP Power Gating status
+ 		- LTR Ignore / LTR Show
+ 		- MPHY/PLL gating status (Sunrisepoint PCH only)
+ 		- SLPS0 Debug registers (Cannonlake/Icelake PCH)
+ 		- Low Power Mode registers (Tigerlake and beyond)
+ 		- PMC quirks as needed to enable SLPS0/S0ix
++>>>>>>> f75bf693c919 (platform/x86: intel_pmc_core: add ACPI dependency)
  
  config INTEL_PMT_CLASS
  	tristate
* Unmerged path drivers/platform/x86/Kconfig
