iommu/arm-smmu: Update impl quirks comment

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-326.el8
commit-author Robin Murphy <robin.murphy@arm.com>
commit 976492922a6a9c06f6f61436848adf2f03702e5c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-326.el8/97649292.failed

The comment about implementation and integration quirks being
mutually-exclusive is out of date, and in fact the code is already
structured for the case it anticipates, so document that properly.

	Signed-off-by: Robin Murphy <robin.murphy@arm.com>
Link: https://lore.kernel.org/r/1e742177e084621f3454fbaf768325a6c215656a.1592994291.git.robin.murphy@arm.com
	Signed-off-by: Will Deacon <will@kernel.org>
(cherry picked from commit 976492922a6a9c06f6f61436848adf2f03702e5c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/iommu/arm-smmu-impl.c
diff --cc drivers/iommu/arm-smmu-impl.c
index 3a1a5d8188d6,1fb4bb994dbf..000000000000
--- a/drivers/iommu/arm-smmu-impl.c
+++ b/drivers/iommu/arm-smmu-impl.c
@@@ -150,11 -150,12 +150,10 @@@ static const struct arm_smmu_impl arm_m
  
  struct arm_smmu_device *arm_smmu_impl_init(struct arm_smmu_device *smmu)
  {
 -	const struct device_node *np = smmu->dev->of_node;
 -
  	/*
- 	 * We will inevitably have to combine model-specific implementation
- 	 * quirks with platform-specific integration quirks, but everything
- 	 * we currently support happens to work out as straightforward
- 	 * mutually-exclusive assignments.
+ 	 * Set the impl for model-specific implementation quirks first,
+ 	 * such that platform integration quirks can pick it up and
+ 	 * inherit from it if necessary.
  	 */
  	switch (smmu->model) {
  	case ARM_MMU500:
@@@ -166,9 -167,13 +165,14 @@@
  		break;
  	}
  
++<<<<<<< HEAD
 +	if (of_property_read_bool(smmu->dev->of_node,
 +				  "calxeda,smmu-secure-config-access"))
++=======
+ 	/* This is implicitly MMU-400 */
+ 	if (of_property_read_bool(np, "calxeda,smmu-secure-config-access"))
++>>>>>>> 976492922a6a (iommu/arm-smmu: Update impl quirks comment)
  		smmu->impl = &calxeda_impl;
  
 -	if (of_device_is_compatible(np, "qcom,sdm845-smmu-500") ||
 -	    of_device_is_compatible(np, "qcom,sc7180-smmu-500"))
 -		return qcom_smmu_impl_init(smmu);
 -
  	return smmu;
  }
* Unmerged path drivers/iommu/arm-smmu-impl.c
