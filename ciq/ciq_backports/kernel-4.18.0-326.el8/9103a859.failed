selftests/bpf: Xsk selftests - DRV POLL, NOPOLL

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-326.el8
commit-author Weqaar Janjua <weqaar.janjua@gmail.com>
commit 9103a8594d9324d8e1512442ba580e4e91d42c2d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-326.el8/9103a859.failed

Adds following tests:

2. AF_XDP DRV/Native mode
   Works on any netdevice with XDP_REDIRECT support, driver dependent.
   Processes packets before SKB allocation. Provides better performance
   than SKB. Driver hook available just after DMA of buffer descriptor.
   a. nopoll
   b. poll
   * Only copy mode is supported because veth does not currently support
     zero-copy mode

	Signed-off-by: Weqaar Janjua <weqaar.a.janjua@intel.com>
	Signed-off-by: Daniel Borkmann <daniel@iogearbox.net>
	Tested-by: Yonghong Song <yhs@fb.com>
	Acked-by: Björn Töpel <bjorn.topel@intel.com>
Link: https://lore.kernel.org/bpf/20201207215333.11586-4-weqaar.a.janjua@intel.com
(cherry picked from commit 9103a8594d9324d8e1512442ba580e4e91d42c2d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/testing/selftests/bpf/test_xsk.sh
#	tools/testing/selftests/bpf/xdpxceiver.c
#	tools/testing/selftests/bpf/xdpxceiver.h
diff --cc tools/testing/selftests/bpf/test_xsk.sh
index cae4c5574c4c,aad8065637fd..000000000000
--- a/tools/testing/selftests/bpf/test_xsk.sh
+++ b/tools/testing/selftests/bpf/test_xsk.sh
@@@ -138,6 -149,54 +138,57 @@@ retval=$
  test_status $retval "${TEST_NAME}"
  statusList+=($retval)
  
++<<<<<<< HEAD
++=======
+ ### TEST 2
+ TEST_NAME="SKB NOPOLL"
+ 
+ vethXDPgeneric ${VETH0} ${VETH1} ${NS1}
+ 
+ params=("-S")
+ execxdpxceiver params
+ 
+ retval=$?
+ test_status $retval "${TEST_NAME}"
+ statusList+=($retval)
+ 
+ ### TEST 3
+ TEST_NAME="SKB POLL"
+ 
+ vethXDPgeneric ${VETH0} ${VETH1} ${NS1}
+ 
+ params=("-S" "-p")
+ execxdpxceiver params
+ 
+ retval=$?
+ test_status $retval "${TEST_NAME}"
+ statusList+=($retval)
+ 
+ ### TEST 4
+ TEST_NAME="DRV NOPOLL"
+ 
+ vethXDPnative ${VETH0} ${VETH1} ${NS1}
+ 
+ params=("-N")
+ execxdpxceiver params
+ 
+ retval=$?
+ test_status $retval "${TEST_NAME}"
+ statusList+=($retval)
+ 
+ ### TEST 5
+ TEST_NAME="DRV POLL"
+ 
+ vethXDPnative ${VETH0} ${VETH1} ${NS1}
+ 
+ params=("-N" "-p")
+ execxdpxceiver params
+ 
+ retval=$?
+ test_status $retval "${TEST_NAME}"
+ statusList+=($retval)
+ 
++>>>>>>> 9103a8594d93 (selftests/bpf: Xsk selftests - DRV POLL, NOPOLL)
  ## END TESTS
  
  cleanup_exit ${VETH0} ${VETH1} ${NS1}
* Unmerged path tools/testing/selftests/bpf/xdpxceiver.c
* Unmerged path tools/testing/selftests/bpf/xdpxceiver.h
* Unmerged path tools/testing/selftests/bpf/test_xsk.sh
* Unmerged path tools/testing/selftests/bpf/xdpxceiver.c
* Unmerged path tools/testing/selftests/bpf/xdpxceiver.h
