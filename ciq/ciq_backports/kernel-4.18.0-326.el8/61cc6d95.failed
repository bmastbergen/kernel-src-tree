drm/qxl: fix prime vmap

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-326.el8
commit-author Gerd Hoffmann <kraxel@redhat.com>
commit 61cc6d9513a93fba795bfd3d95e1dce125467e4f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-326.el8/61cc6d95.failed

Use the correct vmap variant.  We don't have a reservation here,
so we can't use the _locked version.

	Signed-off-by: Gerd Hoffmann <kraxel@redhat.com>
	Acked-by: Thomas Zimmermann <tzimmermann@suse.de>
Link: http://patchwork.freedesktop.org/patch/msgid/20210217123213.2199186-8-kraxel@redhat.com
(cherry picked from commit 61cc6d9513a93fba795bfd3d95e1dce125467e4f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/qxl/qxl_prime.c
diff --cc drivers/gpu/drm/qxl/qxl_prime.c
index 7d3816fca5a8,0628d1cc91fe..000000000000
--- a/drivers/gpu/drm/qxl/qxl_prime.c
+++ b/drivers/gpu/drm/qxl/qxl_prime.c
@@@ -54,24 -54,24 +54,32 @@@ struct drm_gem_object *qxl_gem_prime_im
  	return ERR_PTR(-ENOSYS);
  }
  
 -int qxl_gem_prime_vmap(struct drm_gem_object *obj, struct dma_buf_map *map)
 +void *qxl_gem_prime_vmap(struct drm_gem_object *obj)
  {
  	struct qxl_bo *bo = gem_to_qxl_bo(obj);
 +	void *ptr;
  	int ret;
  
++<<<<<<< HEAD
 +	ret = qxl_bo_kmap(bo, &ptr);
++=======
+ 	ret = qxl_bo_vmap(bo, map);
++>>>>>>> 61cc6d9513a9 (drm/qxl: fix prime vmap)
  	if (ret < 0)
 -		return ret;
 +		return ERR_PTR(ret);
  
 -	return 0;
 +	return ptr;
  }
  
 -void qxl_gem_prime_vunmap(struct drm_gem_object *obj,
 -			  struct dma_buf_map *map)
 +void qxl_gem_prime_vunmap(struct drm_gem_object *obj, void *vaddr)
  {
  	struct qxl_bo *bo = gem_to_qxl_bo(obj);
  
++<<<<<<< HEAD
 +	qxl_bo_kunmap(bo);
++=======
+ 	qxl_bo_vunmap(bo);
++>>>>>>> 61cc6d9513a9 (drm/qxl: fix prime vmap)
  }
  
  int qxl_gem_prime_mmap(struct drm_gem_object *obj,
* Unmerged path drivers/gpu/drm/qxl/qxl_prime.c
