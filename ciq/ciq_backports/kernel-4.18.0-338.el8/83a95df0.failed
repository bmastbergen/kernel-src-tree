ch_ktls: stop the txq if reaches threshold

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-338.el8
commit-author Rohit Maheshwari <rohitm@chelsio.com>
commit 83a95df04bee77c74df5151c961b19d870a70180
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-338.el8/83a95df0.failed

Stop the queue and ask for the credits if queue reaches to
threashold.

Fixes: 5a4b9fe7fece ("cxgb4/chcr: complete record tx handling")
	Signed-off-by: Rohit Maheshwari <rohitm@chelsio.com>
	Signed-off-by: Jakub Kicinski <kuba@kernel.org>
(cherry picked from commit 83a95df04bee77c74df5151c961b19d870a70180)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/crypto/chelsio/chcr_ktls.c
diff --cc drivers/crypto/chelsio/chcr_ktls.c
index 7f91252315ab,c24485c0d512..000000000000
--- a/drivers/crypto/chelsio/chcr_ktls.c
+++ b/drivers/crypto/chelsio/chcr_ktls.c
@@@ -758,10 -831,11 +758,15 @@@ static void *chcr_write_cpl_set_tcb_ulp
   */
  static int chcr_ktls_xmit_tcb_cpls(struct chcr_ktls_info *tx_info,
  				   struct sge_eth_txq *q, u64 tcp_seq,
 -				   u64 tcp_ack, u64 tcp_win, bool offset)
 +				   u64 tcp_ack, u64 tcp_win)
  {
  	bool first_wr = ((tx_info->prev_ack == 0) && (tx_info->prev_win == 0));
++<<<<<<< HEAD:drivers/crypto/chelsio/chcr_ktls.c
 +	u32 len, cpl = 0, ndesc, wr_len;
++=======
+ 	struct ch_ktls_port_stats_debug *port_stats;
+ 	u32 len, cpl = 0, ndesc, wr_len, wr_mid = 0;
++>>>>>>> 83a95df04bee (ch_ktls: stop the txq if reaches threshold):drivers/net/ethernet/chelsio/inline_crypto/ch_ktls/chcr_ktls.c
  	struct fw_ulptx_wr *wr;
  	int credits;
  	void *pos;
* Unmerged path drivers/crypto/chelsio/chcr_ktls.c
