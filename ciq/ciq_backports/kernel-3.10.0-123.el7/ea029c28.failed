drm/vmwgfx: Resource evict fixes

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [drm] vmwgfx: Resource evict fixes (Rob Clark) [1054409]
Rebuild_FUZZ: 93.33%
commit-author Thomas Hellstrom <thellstrom@vmware.com>
commit ea029c28deadc33d2af4baf26810dd5fc44d4926
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/ea029c28.failed

Fix an error message that was incorrectly blaming device resource id
shortage.

Also make sure we correctly catch resource eviction errors, that
could otherwise lead to evictable resources temporarily not being on the
LRU list.

	Signed-off-by: Thomas Hellstrom <thellstrom@vmware.com>
	Reviewed-by: Jakob Bornecrantz <jakob@vmware.com>
	Cc: stable@vger.kernel.org
(cherry picked from commit ea029c28deadc33d2af4baf26810dd5fc44d4926)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/vmwgfx/vmwgfx_resource.c
diff --cc drivers/gpu/drm/vmwgfx/vmwgfx_resource.c
index bc784254e78e,941e5ffd1c72..000000000000
--- a/drivers/gpu/drm/vmwgfx/vmwgfx_resource.c
+++ b/drivers/gpu/drm/vmwgfx/vmwgfx_resource.c
@@@ -1097,7 -1105,8 +1100,12 @@@ int vmw_resource_do_evict(struct vmw_re
  	BUG_ON(!func->may_evict);
  
  	val_buf.bo = NULL;
++<<<<<<< HEAD
 +	ret = vmw_resource_check_buffer(res, true, &val_buf);
++=======
+ 	ret = vmw_resource_check_buffer(res, &ticket, interruptible,
+ 					&val_buf);
++>>>>>>> ea029c28dead (drm/vmwgfx: Resource evict fixes)
  	if (unlikely(ret != 0))
  		return ret;
  
* Unmerged path drivers/gpu/drm/vmwgfx/vmwgfx_resource.c
