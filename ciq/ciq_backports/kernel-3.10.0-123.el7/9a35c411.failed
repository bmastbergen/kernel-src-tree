Input: wacom - add support for three new Intuos Pro devices

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [input] wacom: add support for three new Intuos Pro devices (Aristeu Rozanski) [1022595]
Rebuild_FUZZ: 90.91%
commit-author Ping Cheng <pinglinux@gmail.com>
commit 9a35c411f904a662d3a39edea406d95ead8acea6
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/9a35c411.failed

	Acked-by: Chris Bagwell <chris@cnpbagwell.com>
	Signed-off-by: Ping Cheng <pingc@wacom.com>
	Signed-off-by: Dmitry Torokhov <dmitry.torokhov@gmail.com>
(cherry picked from commit 9a35c411f904a662d3a39edea406d95ead8acea6)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/input/tablet/wacom_wac.c
diff --cc drivers/input/tablet/wacom_wac.c
index 6ec20361dc85,9c8eded2e504..000000000000
--- a/drivers/input/tablet/wacom_wac.c
+++ b/drivers/input/tablet/wacom_wac.c
@@@ -628,7 -628,23 +628,27 @@@ static int wacom_intuos_irq(struct waco
  			} else {
  				input_report_abs(input, ABS_MISC, 0);
  			}
++<<<<<<< HEAD
 +		} else if (features->type >= INTUOS5S && features->type <= INTUOS5L) {
++=======
+ 		} else if (features->type == CINTIQ_HYBRID) {
+ 			/*
+ 			 * Do not send hardware buttons under Android. They
+ 			 * are already sent to the system through GPIO (and
+ 			 * have different meaning).
+ 			 */
+ 			input_report_key(input, BTN_1, (data[4] & 0x01));
+ 			input_report_key(input, BTN_2, (data[4] & 0x02));
+ 			input_report_key(input, BTN_3, (data[4] & 0x04));
+ 			input_report_key(input, BTN_4, (data[4] & 0x08));
+ 
+ 			input_report_key(input, BTN_5, (data[4] & 0x10));  /* Right  */
+ 			input_report_key(input, BTN_6, (data[4] & 0x20));  /* Up     */
+ 			input_report_key(input, BTN_7, (data[4] & 0x40));  /* Left   */
+ 			input_report_key(input, BTN_8, (data[4] & 0x80));  /* Down   */
+ 			input_report_key(input, BTN_0, (data[3] & 0x01));  /* Center */
+ 		} else if (features->type >= INTUOS5S && features->type <= INTUOSPL) {
++>>>>>>> 9a35c411f904 (Input: wacom - add support for three new Intuos Pro devices)
  			int i;
  
  			/* Touch ring mode switch has no capacitive sensor */
@@@ -2249,7 -2327,12 +2299,10 @@@ const struct usb_device_id wacom_ids[] 
  	{ USB_DEVICE_WACOM(0x100) },
  	{ USB_DEVICE_WACOM(0x101) },
  	{ USB_DEVICE_WACOM(0x10D) },
 -	{ USB_DEVICE_WACOM(0x300) },
 -	{ USB_DEVICE_WACOM(0x301) },
  	{ USB_DEVICE_WACOM(0x304) },
+ 	{ USB_DEVICE_DETAILED(0x314, USB_CLASS_HID, 0, 0) },
+ 	{ USB_DEVICE_DETAILED(0x315, USB_CLASS_HID, 0, 0) },
+ 	{ USB_DEVICE_DETAILED(0x317, USB_CLASS_HID, 0, 0) },
  	{ USB_DEVICE_WACOM(0x4001) },
  	{ USB_DEVICE_WACOM(0x47) },
  	{ USB_DEVICE_WACOM(0xF4) },
diff --git a/drivers/input/tablet/wacom_sys.c b/drivers/input/tablet/wacom_sys.c
index 96b0f1a1181f..94d3f6b7ef9f 100644
--- a/drivers/input/tablet/wacom_sys.c
+++ b/drivers/input/tablet/wacom_sys.c
@@ -716,7 +716,7 @@ static int wacom_led_control(struct wacom *wacom)
 		return -ENOMEM;
 
 	if (wacom->wacom_wac.features.type >= INTUOS5S &&
-	    wacom->wacom_wac.features.type <= INTUOS5L)	{
+	    wacom->wacom_wac.features.type <= INTUOSPL) {
 		/*
 		 * Touch Ring and crop mark LED luminance may take on
 		 * one of four values:
@@ -978,6 +978,9 @@ static int wacom_initialize_leds(struct wacom *wacom)
 	case INTUOS5S:
 	case INTUOS5:
 	case INTUOS5L:
+	case INTUOSPS:
+	case INTUOSPM:
+	case INTUOSPL:
 		if (wacom->wacom_wac.features.device_type == BTN_TOOL_PEN) {
 			wacom->led.select[0] = 0;
 			wacom->led.select[1] = 0;
@@ -1024,6 +1027,9 @@ static void wacom_destroy_leds(struct wacom *wacom)
 	case INTUOS5S:
 	case INTUOS5:
 	case INTUOS5L:
+	case INTUOSPS:
+	case INTUOSPM:
+	case INTUOSPL:
 		if (wacom->wacom_wac.features.device_type == BTN_TOOL_PEN)
 			sysfs_remove_group(&wacom->intf->dev.kobj,
 					   &intuos5_led_attr_group);
@@ -1299,7 +1305,7 @@ static int wacom_probe(struct usb_interface *intf, const struct usb_device_id *i
 	 * HID descriptor. If this is the touch interface (wMaxPacketSize
 	 * of WACOM_PKGLEN_BBTOUCH3), override the table values.
 	 */
-	if (features->type >= INTUOS5S && features->type <= INTUOS5L) {
+	if (features->type >= INTUOS5S && features->type <= INTUOSPL) {
 		if (endpoint->wMaxPacketSize == WACOM_PKGLEN_BBTOUCH3) {
 			features->device_type = BTN_TOOL_FINGER;
 			features->pktlen = WACOM_PKGLEN_BBTOUCH3;
* Unmerged path drivers/input/tablet/wacom_wac.c
diff --git a/drivers/input/tablet/wacom_wac.h b/drivers/input/tablet/wacom_wac.h
index dfc9e08e7f70..d6dec5800791 100644
--- a/drivers/input/tablet/wacom_wac.h
+++ b/drivers/input/tablet/wacom_wac.h
@@ -76,6 +76,9 @@ enum {
 	INTUOS5S,
 	INTUOS5,
 	INTUOS5L,
+	INTUOSPS,
+	INTUOSPM,
+	INTUOSPL,
 	WACOM_21UX2,
 	WACOM_22HD,
 	DTK,
