[SCSI] hpsa: do not require board "not ready" status after hard reset

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [scsi] hpsa: do not require board "not ready" status after hard reset (Tomas Henzl) [1056703]
Rebuild_FUZZ: 94.66%
commit-author Stephen M. Cameron <scameron@beardog.cce.hp.com>
commit 0ddf1d77505fd97daa7fc70bb0498c54a5c33725
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/0ddf1d77.failed

Immediately following a hard board reset, There are some
mandatory delays during which we must not access the board
and during which we might miss the "not ready" status,
therefore it is a mistake to look for and expect to see
the "not ready" status.

	Signed-off-by: Stephen M. Cameron <scameron@beardog.cce.hp.com>
	Signed-off-by: James Bottomley <JBottomley@Parallels.com>
(cherry picked from commit 0ddf1d77505fd97daa7fc70bb0498c54a5c33725)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/hpsa.c
diff --cc drivers/scsi/hpsa.c
index 7d31d231e9b2,d5f2ff9918fa..000000000000
--- a/drivers/scsi/hpsa.c
+++ b/drivers/scsi/hpsa.c
@@@ -3980,16 -4048,6 +3980,19 @@@ static int hpsa_kdump_hard_reset_contro
  	   need a little pause here */
  	msleep(HPSA_POST_RESET_PAUSE_MSECS);
  
++<<<<<<< HEAD
 +	/* Wait for board to become not ready, then ready. */
 +	dev_info(&pdev->dev, "Waiting for board to reset.\n");
 +	rc = hpsa_wait_for_board_state(pdev, vaddr, BOARD_NOT_READY);
 +	if (rc) {
 +		dev_warn(&pdev->dev,
 +			"failed waiting for board to reset."
 +			" Will try soft reset.\n");
 +		rc = -ENOTSUPP; /* Not expected, but try soft reset later */
 +		goto unmap_cfgtable;
 +	}
++=======
++>>>>>>> 0ddf1d77505f ([SCSI] hpsa: do not require board "not ready" status after hard reset)
  	rc = hpsa_wait_for_board_state(pdev, vaddr, BOARD_READY);
  	if (rc) {
  		dev_warn(&pdev->dev,
* Unmerged path drivers/scsi/hpsa.c
