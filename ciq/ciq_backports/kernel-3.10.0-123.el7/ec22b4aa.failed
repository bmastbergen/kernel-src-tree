drm/mgag200: fix typo causing bw limits to be ignored on some chips

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [drm] mgag200: fix typo causing bw limits to be ignored on some chips (Dave Airlie) [1045495]
Rebuild_FUZZ: 96.92%
commit-author Dave Airlie <airlied@redhat.com>
commit ec22b4aa993abbd18f5bbbcb20a1c56be3b1d38b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/ec22b4aa.failed

mode->mdev otherwise the bw limits never kick in.

Reported in RHEL testing.

	Cc: stable@vger.kernel.org
	Signed-off-by: Dave Airlie <airlied@redhat.com>
(cherry picked from commit ec22b4aa993abbd18f5bbbcb20a1c56be3b1d38b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/mgag200/mgag200_mode.c
diff --cc drivers/gpu/drm/mgag200/mgag200_mode.c
index ee66badc8bb6,968374776db9..000000000000
--- a/drivers/gpu/drm/mgag200/mgag200_mode.c
+++ b/drivers/gpu/drm/mgag200/mgag200_mode.c
@@@ -1421,7 -1489,45 +1421,49 @@@ static int mga_vga_mode_valid(struct dr
  	int bpp = 32;
  	int i = 0;
  
++<<<<<<< HEAD
 +	/* FIXME: Add bandwidth and g200se limitations */
++=======
+ 	if (IS_G200_SE(mdev)) {
+ 		if (mdev->unique_rev_id == 0x01) {
+ 			if (mode->hdisplay > 1600)
+ 				return MODE_VIRTUAL_X;
+ 			if (mode->vdisplay > 1200)
+ 				return MODE_VIRTUAL_Y;
+ 			if (mga_vga_calculate_mode_bandwidth(mode, bpp)
+ 				> (24400 * 1024))
+ 				return MODE_BANDWIDTH;
+ 		} else if (mdev->unique_rev_id >= 0x02) {
+ 			if (mode->hdisplay > 1920)
+ 				return MODE_VIRTUAL_X;
+ 			if (mode->vdisplay > 1200)
+ 				return MODE_VIRTUAL_Y;
+ 			if (mga_vga_calculate_mode_bandwidth(mode, bpp)
+ 				> (30100 * 1024))
+ 				return MODE_BANDWIDTH;
+ 		}
+ 	} else if (mdev->type == G200_WB) {
+ 		if (mode->hdisplay > 1280)
+ 			return MODE_VIRTUAL_X;
+ 		if (mode->vdisplay > 1024)
+ 			return MODE_VIRTUAL_Y;
+ 		if (mga_vga_calculate_mode_bandwidth(mode,
+ 			bpp > (31877 * 1024)))
+ 			return MODE_BANDWIDTH;
+ 	} else if (mdev->type == G200_EV &&
+ 		(mga_vga_calculate_mode_bandwidth(mode, bpp)
+ 			> (32700 * 1024))) {
+ 		return MODE_BANDWIDTH;
+ 	} else if (mdev->type == G200_EH &&
+ 		(mga_vga_calculate_mode_bandwidth(mode, bpp)
+ 			> (37500 * 1024))) {
+ 		return MODE_BANDWIDTH;
+ 	} else if (mdev->type == G200_ER &&
+ 		(mga_vga_calculate_mode_bandwidth(mode,
+ 			bpp) > (55000 * 1024))) {
+ 		return MODE_BANDWIDTH;
+ 	}
++>>>>>>> ec22b4aa993a (drm/mgag200: fix typo causing bw limits to be ignored on some chips)
  
  	if (mode->crtc_hdisplay > 2048 || mode->crtc_hsync_start > 4096 ||
  	    mode->crtc_hsync_end > 4096 || mode->crtc_htotal > 4096 ||
* Unmerged path drivers/gpu/drm/mgag200/mgag200_mode.c
