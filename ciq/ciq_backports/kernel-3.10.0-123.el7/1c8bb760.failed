bnx2[x]: Make module parameters readable

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [ethernet] bnx2{,x}: Make module parameters readable (Neil Horman) [1062836]
Rebuild_FUZZ: 93.83%
commit-author James M Leddy <james.leddy@redhat.com>
commit 1c8bb760b632b4328f06066a6813f3758e54d8cb
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/1c8bb760.failed

Occasionally users want to know what parameters their Broadcom drivers
are running with. For example, a user may want to know if MSI is
disabled.

This patch has been compile tested.

	Signed-off-by: James M Leddy <james.leddy@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 1c8bb760b632b4328f06066a6813f3758e54d8cb)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/broadcom/bnx2x/bnx2x_main.c
diff --cc drivers/net/ethernet/broadcom/bnx2x/bnx2x_main.c
index ce79afe707aa,7d4382286457..000000000000
--- a/drivers/net/ethernet/broadcom/bnx2x/bnx2x_main.c
+++ b/drivers/net/ethernet/broadcom/bnx2x/bnx2x_main.c
@@@ -93,17 -94,17 +93,27 @@@ MODULE_FIRMWARE(FW_FILE_NAME_E1)
  MODULE_FIRMWARE(FW_FILE_NAME_E1H);
  MODULE_FIRMWARE(FW_FILE_NAME_E2);
  
++<<<<<<< HEAD
 +int num_queues;
 +module_param(num_queues, int, 0);
++=======
+ int bnx2x_num_queues;
+ module_param_named(num_queues, bnx2x_num_queues, int, S_IRUGO);
++>>>>>>> 1c8bb760b632 (bnx2[x]: Make module parameters readable)
  MODULE_PARM_DESC(num_queues,
  		 " Set number of queues (default is as a number of CPUs)");
  
  static int disable_tpa;
- module_param(disable_tpa, int, 0);
+ module_param(disable_tpa, int, S_IRUGO);
  MODULE_PARM_DESC(disable_tpa, " Disable the TPA (LRO) feature");
  
++<<<<<<< HEAD
 +int int_mode;
 +module_param(int_mode, int, 0);
++=======
+ static int int_mode;
+ module_param(int_mode, int, S_IRUGO);
++>>>>>>> 1c8bb760b632 (bnx2[x]: Make module parameters readable)
  MODULE_PARM_DESC(int_mode, " Force interrupt mode other than MSI-X "
  				"(1 INT#x; 2 MSI)");
  
diff --git a/drivers/net/ethernet/broadcom/bnx2.c b/drivers/net/ethernet/broadcom/bnx2.c
index dbb103eb609a..0440bcd391f8 100644
--- a/drivers/net/ethernet/broadcom/bnx2.c
+++ b/drivers/net/ethernet/broadcom/bnx2.c
@@ -86,7 +86,7 @@ MODULE_FIRMWARE(FW_RV2P_FILE_09_Ax);
 
 static int disable_msi = 0;
 
-module_param(disable_msi, int, 0);
+module_param(disable_msi, int, S_IRUGO);
 MODULE_PARM_DESC(disable_msi, "Disable Message Signaled Interrupt (MSI)");
 
 typedef enum {
* Unmerged path drivers/net/ethernet/broadcom/bnx2x/bnx2x_main.c
