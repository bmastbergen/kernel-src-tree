gfs2: set FILE_CREATED

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
commit-author Miklos Szeredi <mszeredi@suse.cz>
commit c5bf8fef52ce184bd48b76d1881df07b43f5091b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/c5bf8fef.failed

In gfs2_create_inode() set FILE_CREATED in *opened.

	Signed-off-by: Miklos Szeredi <mszeredi@suse.cz>
	Cc: Steven Whitehouse <swhiteho@redhat.com>
	Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
(cherry picked from commit c5bf8fef52ce184bd48b76d1881df07b43f5091b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/gfs2/inode.c
diff --cc fs/gfs2/inode.c
index 06ca4e826edd,ced3257f06e8..000000000000
--- a/fs/gfs2/inode.c
+++ b/fs/gfs2/inode.c
@@@ -686,10 -693,14 +686,18 @@@ static int gfs2_create_inode(struct ino
  		goto fail_gunlock3;
  
  	mark_inode_dirty(inode);
++<<<<<<< HEAD
++=======
+ 	d_instantiate(dentry, inode);
+ 	if (file) {
+ 		*opened |= FILE_CREATED;
+ 		error = finish_open(file, dentry, gfs2_open_common, opened);
+ 	}
++>>>>>>> c5bf8fef52ce (gfs2: set FILE_CREATED)
  	gfs2_glock_dq_uninit(ghs);
  	gfs2_glock_dq_uninit(ghs + 1);
 -	return error;
 +	d_instantiate(dentry, inode);
 +	return 0;
  
  fail_gunlock3:
  	gfs2_glock_dq_uninit(ghs + 1);
* Unmerged path fs/gfs2/inode.c
