EDAC: Correct workqueue setup path

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [edac] Correct workqueue setup path (Aristeu Rozanski) [1055892]
Rebuild_FUZZ: 90.32%
commit-author Borislav Petkov <bp@suse.de>
commit cb6ef42e516cb8948f15e4b70dc03af8020050a2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/cb6ef42e.failed

We're using edac_mc_workq_setup() both on the init path, when
we load an edac driver and when we change the polling period
(edac_mc_reset_delay_period) through /sys/.../edac_mc_poll_msec.

On that second path we don't need to init the workqueue which has been
initialized already.

Thanks to Tejun for workqueue insights.

	Signed-off-by: Borislav Petkov <bp@suse.de>
Link: http://lkml.kernel.org/r/1391457913-881-1-git-send-email-prarit@redhat.com
	Cc: <stable@vger.kernel.org>
(cherry picked from commit cb6ef42e516cb8948f15e4b70dc03af8020050a2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/edac/edac_mc.c
diff --cc drivers/edac/edac_mc.c
index 27e86d938262,33edd6766344..000000000000
--- a/drivers/edac/edac_mc.c
+++ b/drivers/edac/edac_mc.c
@@@ -609,7 -614,7 +612,11 @@@ void edac_mc_reset_delay_period(int val
  	list_for_each(item, &mc_devices) {
  		mci = list_entry(item, struct mem_ctl_info, link);
  
++<<<<<<< HEAD
 +		edac_mc_workq_setup(mci, (unsigned long) value);
++=======
+ 		edac_mc_workq_setup(mci, value, false);
++>>>>>>> cb6ef42e516c (EDAC: Correct workqueue setup path)
  	}
  
  	mutex_unlock(&mem_ctls_mutex);
* Unmerged path drivers/edac/edac_mc.c
