netpoll: fix position of network header

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
commit-author Amerigo Wang <amwang@redhat.com>
commit 00f97da17a0c8d656d0c9a60b1d7f38735f69817
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/00f97da1.failed

Similar to the problem in pktgen, netpoll uses skb_tail_offset()
too, as the code is copied from pktgen.

Also use return values of skb_put() directly, this will simiplify
the code.

	Reported-by: Thomas Graf <tgraf@suug.ch>
	Cc: Thomas Graf <tgraf@suug.ch>
	Cc: Daniel Borkmann <dborkmann@redhat.com>
	Cc: David S. Miller <davem@davemloft.net>
	Signed-off-by: Cong Wang <amwang@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 00f97da17a0c8d656d0c9a60b1d7f38735f69817)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/core/netpoll.c
diff --cc net/core/netpoll.c
index cec074be8c43,03c8ec3edc72..000000000000
--- a/net/core/netpoll.c
+++ b/net/core/netpoll.c
@@@ -701,10 -697,7 +698,14 @@@ static void netpoll_neigh_reply(struct 
  			hdr->saddr = *saddr;
  			hdr->daddr = *daddr;
  
++<<<<<<< HEAD
 +			send_skb->transport_header = send_skb->tail;
 +			skb_put(send_skb, size);
 +
 +			icmp6h = (struct icmp6hdr *)skb_transport_header(skb);
++=======
+ 			icmp6h = (struct icmp6hdr *) skb_put(send_skb, sizeof(struct icmp6hdr));
++>>>>>>> 00f97da17a0c (netpoll: fix position of network header)
  			icmp6h->icmp6_type = NDISC_NEIGHBOUR_ADVERTISEMENT;
  			icmp6h->icmp6_router = 0;
  			icmp6h->icmp6_solicited = 1;
* Unmerged path net/core/netpoll.c
