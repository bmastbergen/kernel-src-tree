xfs: remove the quotaoff log format from the quotaoff log item

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
commit-author Christoph Hellwig <hch@infradead.org>
commit ffda4e83aa107ff55345dc583efdb24fca486fb5
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/ffda4e83.failed

This one doesn't save a whole lot of memory, but still makes the
code simpler.

	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Reviewed-by: Dave Chinner <dchinner@redhat.com>
	Signed-off-by: Dave Chinner <david@fromorbit.com>
(cherry picked from commit ffda4e83aa107ff55345dc583efdb24fca486fb5)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/xfs/xfs_dquot_item.c
diff --cc fs/xfs/xfs_dquot_item.c
index e838d84b4e85,f33fbaaa4d8a..000000000000
--- a/fs/xfs/xfs_dquot_item.c
+++ b/fs/xfs/xfs_dquot_item.c
@@@ -301,23 -289,17 +301,27 @@@ xfs_qm_qoff_logitem_size
  STATIC void
  xfs_qm_qoff_logitem_format(
  	struct xfs_log_item	*lip,
 -	struct xfs_log_vec	*lv)
 +	struct xfs_log_iovec	*log_vector)
  {
  	struct xfs_qoff_logitem	*qflip = QOFF_ITEM(lip);
++<<<<<<< HEAD
 +
 +	ASSERT(qflip->qql_format.qf_type == XFS_LI_QUOTAOFF);
 +
 +	log_vector->i_addr = &qflip->qql_format;
 +	log_vector->i_len = sizeof(xfs_qoff_logitem_t);
 +	log_vector->i_type = XLOG_REG_TYPE_QUOTAOFF;
 +	qflip->qql_format.qf_size = 1;
++=======
+ 	struct xfs_log_iovec	*vecp = NULL;
+ 	struct xfs_qoff_logformat *qlf;
+ 
+ 	qlf = xlog_prepare_iovec(lv, &vecp, XLOG_REG_TYPE_QUOTAOFF);
+ 	qlf->qf_type = XFS_LI_QUOTAOFF;
+ 	qlf->qf_size = 1;
+ 	qlf->qf_flags = qflip->qql_flags;
+ 	xlog_finish_iovec(lv, vecp, sizeof(struct xfs_qoff_logitem));
++>>>>>>> ffda4e83aa10 (xfs: remove the quotaoff log format from the quotaoff log item)
  }
  
  /*
* Unmerged path fs/xfs/xfs_dquot_item.c
diff --git a/fs/xfs/xfs_dquot_item.h b/fs/xfs/xfs_dquot_item.h
index 5acae2ada70b..420760515c1d 100644
--- a/fs/xfs/xfs_dquot_item.h
+++ b/fs/xfs/xfs_dquot_item.h
@@ -33,7 +33,7 @@ typedef struct xfs_dq_logitem {
 typedef struct xfs_qoff_logitem {
 	xfs_log_item_t		 qql_item;	/* common portion */
 	struct xfs_qoff_logitem *qql_start_lip; /* qoff-start logitem, if any */
-	xfs_qoff_logformat_t	 qql_format;	/* logged structure */
+	unsigned int		qql_flags;
 } xfs_qoff_logitem_t;
 
 
