USB: io_ti: move port initialisation to probe

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [usb] io_ti: move port initialisation to probe (Don Zickus) [895641]
Rebuild_FUZZ: 94.12%
commit-author Johan Hovold <jhovold@gmail.com>
commit 0fce06da6bb49a3973b7c2ab174761fbc848ca6c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/0fce06da.failed

Move port initialisation code from open to probe where it belongs.

	Signed-off-by: Johan Hovold <jhovold@gmail.com>
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 0fce06da6bb49a3973b7c2ab174761fbc848ca6c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/usb/serial/io_ti.c
diff --cc drivers/usb/serial/io_ti.c
index d29bc7e10ab5,9c18f5985c8d..000000000000
--- a/drivers/usb/serial/io_ti.c
+++ b/drivers/usb/serial/io_ti.c
@@@ -1727,23 -1728,7 +1727,27 @@@ static int edge_open(struct tty_struct 
  	if (edge_port == NULL)
  		return -ENODEV;
  
++<<<<<<< HEAD
 +	port_number = port->number - port->serial->minor;
 +	switch (port_number) {
 +	case 0:
 +		edge_port->uart_base = UMPMEM_BASE_UART1;
 +		edge_port->dma_address = UMPD_OEDB1_ADDRESS;
 +		break;
 +	case 1:
 +		edge_port->uart_base = UMPMEM_BASE_UART2;
 +		edge_port->dma_address = UMPD_OEDB2_ADDRESS;
 +		break;
 +	default:
 +		dev_err(&port->dev, "Unknown port number!!!\n");
 +		return -ENODEV;
 +	}
 +
 +	dev_dbg(&port->dev, "%s - port_number = %d, uart_base = %04x, dma_address = %04x\n",
 +		__func__, port_number, edge_port->uart_base, edge_port->dma_address);
++=======
+ 	port_number = port->port_number;
++>>>>>>> 0fce06da6bb4 (USB: io_ti: move port initialisation to probe)
  
  	dev = port->serial->dev;
  
* Unmerged path drivers/usb/serial/io_ti.c
