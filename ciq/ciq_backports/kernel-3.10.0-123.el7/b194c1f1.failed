neigh: fix setting of default gc_* values

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
commit-author Jiri Pirko <jiri@resnulli.us>
commit b194c1f1dbd5f2671e49e0ac801b1b78dc7de93b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/b194c1f1.failed

This patch fixes bug introduced by:
commit 1d4c8c29841b9991cdf3c7cc4ba7f96a94f104ca
"neigh: restore old behaviour of default parms values"

The thing is that in neigh_sysctl_register, extra1 and extra2 which were
previously set for NEIGH_VAR_GC_* are overwritten. That leads to
nonsense int limits for gc_* variables. So fix this by not touching
extra* fields for gc_* variables.

	Signed-off-by: Jiri Pirko <jiri@resnulli.us>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit b194c1f1dbd5f2671e49e0ac801b1b78dc7de93b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/core/neighbour.c
diff --cc net/core/neighbour.c
index 0c576d4ff3f4,e1aa0f36cfe7..000000000000
--- a/net/core/neighbour.c
+++ b/net/core/neighbour.c
@@@ -2954,21 -3046,11 +2954,29 @@@ int neigh_sysctl_register(struct net_de
  	if (!t)
  		goto err;
  
++<<<<<<< HEAD
 +	t->neigh_vars[NEIGH_VAR_MCAST_PROBE].data  = &p->mcast_probes;
 +	t->neigh_vars[NEIGH_VAR_UCAST_PROBE].data  = &p->ucast_probes;
 +	t->neigh_vars[NEIGH_VAR_APP_PROBE].data  = &p->app_probes;
 +	t->neigh_vars[NEIGH_VAR_RETRANS_TIME].data  = &p->retrans_time;
 +	t->neigh_vars[NEIGH_VAR_BASE_REACHABLE_TIME].data  = &p->base_reachable_time;
 +	t->neigh_vars[NEIGH_VAR_DELAY_PROBE_TIME].data  = &p->delay_probe_time;
 +	t->neigh_vars[NEIGH_VAR_GC_STALETIME].data  = &p->gc_staletime;
 +	t->neigh_vars[NEIGH_VAR_QUEUE_LEN].data  = &p->queue_len_bytes;
 +	t->neigh_vars[NEIGH_VAR_QUEUE_LEN_BYTES].data  = &p->queue_len_bytes;
 +	t->neigh_vars[NEIGH_VAR_PROXY_QLEN].data  = &p->proxy_qlen;
 +	t->neigh_vars[NEIGH_VAR_ANYCAST_DELAY].data  = &p->anycast_delay;
 +	t->neigh_vars[NEIGH_VAR_PROXY_DELAY].data = &p->proxy_delay;
 +	t->neigh_vars[NEIGH_VAR_LOCKTIME].data = &p->locktime;
 +	t->neigh_vars[NEIGH_VAR_RETRANS_TIME_MS].data  = &p->retrans_time;
 +	t->neigh_vars[NEIGH_VAR_BASE_REACHABLE_TIME_MS].data  = &p->base_reachable_time;
++=======
+ 	for (i = 0; i < NEIGH_VAR_GC_INTERVAL; i++) {
+ 		t->neigh_vars[i].data += (long) p;
+ 		t->neigh_vars[i].extra1 = dev;
+ 		t->neigh_vars[i].extra2 = p;
+ 	}
++>>>>>>> b194c1f1dbd5 (neigh: fix setting of default gc_* values)
  
  	if (dev) {
  		dev_name_source = dev->name;
* Unmerged path net/core/neighbour.c
