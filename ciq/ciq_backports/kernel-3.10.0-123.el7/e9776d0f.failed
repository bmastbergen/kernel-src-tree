SUNRPC: Fix a pipe_version reference leak

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
commit-author Trond Myklebust <trond.myklebust@primarydata.com>
commit e9776d0f4adee8877145672f6416b06b57f2dc27
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/e9776d0f.failed

In gss_alloc_msg(), if the call to gss_encode_v1_msg() fails, we
want to release the reference to the pipe_version that was obtained
earlier in the function.

Fixes: 9d3a2260f0f4b (SUNRPC: Fix buffer overflow checking in...)
	Signed-off-by: Trond Myklebust <trond.myklebust@primarydata.com>
(cherry picked from commit e9776d0f4adee8877145672f6416b06b57f2dc27)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/sunrpc/auth_gss/auth_gss.c
diff --cc net/sunrpc/auth_gss/auth_gss.c
index f4ce22581ce4,36e431ee1c90..000000000000
--- a/net/sunrpc/auth_gss/auth_gss.c
+++ b/net/sunrpc/auth_gss/auth_gss.c
@@@ -470,9 -498,18 +470,24 @@@ gss_alloc_msg(struct gss_auth *gss_auth
  		gss_encode_v0_msg(gss_msg);
  		break;
  	default:
++<<<<<<< HEAD
 +		gss_encode_v1_msg(gss_msg, service_name, gss_auth->target_name);
++=======
+ 		err = gss_encode_v1_msg(gss_msg, service_name, gss_auth->target_name);
+ 		if (err)
+ 			goto err_put_pipe_version;
++>>>>>>> e9776d0f4ade (SUNRPC: Fix a pipe_version reference leak)
  	};
 -	kref_get(&gss_auth->kref);
  	return gss_msg;
++<<<<<<< HEAD
++=======
+ err_put_pipe_version:
+ 	put_pipe_version(gss_auth->net);
+ err_free_msg:
+ 	kfree(gss_msg);
+ err:
+ 	return ERR_PTR(err);
++>>>>>>> e9776d0f4ade (SUNRPC: Fix a pipe_version reference leak)
  }
  
  static struct gss_upcall_msg *
* Unmerged path net/sunrpc/auth_gss/auth_gss.c
