[SCSI] pm80xx: Queue rotation logic for inbound and outbound queues.

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [scsi] pm80xx: Queue rotation logic for inbound and outbound queues (Rich Bono) [1019457]
Rebuild_FUZZ: 93.75%
commit-author Anand Kumar Santhanam <AnandKumar.Santhanam@pmcs.com>
commit f9cd6cbd80d1d5963ffd0eab3970235cd4205984
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/f9cd6cbd.failed

	Signed-off-by: Anandkumar.Santhanam@pmcs.com
	Reviewed-by: Jack Wang <jinpu.wang@profitbricks.com>
	Signed-off-by: James Bottomley <JBottomley@Parallels.com>
(cherry picked from commit f9cd6cbd80d1d5963ffd0eab3970235cd4205984)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/pm8001/pm80xx_hwi.c
diff --cc drivers/scsi/pm8001/pm80xx_hwi.c
index 81b9cc17d6b6,fa06f24e1656..000000000000
--- a/drivers/scsi/pm8001/pm80xx_hwi.c
+++ b/drivers/scsi/pm8001/pm80xx_hwi.c
@@@ -3630,8 -3629,10 +3629,15 @@@ static int pm80xx_chip_ssp_io_req(struc
  		ssp_cmd.ssp_iu.efb_prio_attr |= 0x80;
  	ssp_cmd.ssp_iu.efb_prio_attr |= (task->ssp_task.task_prio << 3);
  	ssp_cmd.ssp_iu.efb_prio_attr |= (task->ssp_task.task_attr & 7);
++<<<<<<< HEAD
 +	memcpy(ssp_cmd.ssp_iu.cdb, task->ssp_task.cdb, 16);
 +	circularQ = &pm8001_ha->inbnd_q_tbl[0];
++=======
+ 	memcpy(ssp_cmd.ssp_iu.cdb, task->ssp_task.cmd->cmnd,
+ 		       task->ssp_task.cmd->cmd_len);
+ 	q_index = (u32) (pm8001_dev->id & 0x00ffffff) % PM8001_MAX_INB_NUM;
+ 	circularQ = &pm8001_ha->inbnd_q_tbl[q_index];
++>>>>>>> f9cd6cbd80d1 ([SCSI] pm80xx: Queue rotation logic for inbound and outbound queues.)
  
  	/* Check if encryption is set */
  	if (pm8001_ha->chip->encrypt &&
@@@ -3679,7 -3680,7 +3685,11 @@@
  	} else {
  		PM8001_IO_DBG(pm8001_ha, pm8001_printk(
  			"Sending Normal SAS command 0x%x inb q %x\n",
++<<<<<<< HEAD
 +			task->ssp_task.cdb[0], inb));
++=======
+ 			task->ssp_task.cmd->cmnd[0], q_index));
++>>>>>>> f9cd6cbd80d1 ([SCSI] pm80xx: Queue rotation logic for inbound and outbound queues.)
  		/* fill in PRD (scatter/gather) table, if any */
  		if (task->num_scatter > 1) {
  			pm8001_chip_make_sg(task->scatter, ccb->n_elem,
* Unmerged path drivers/scsi/pm8001/pm80xx_hwi.c
