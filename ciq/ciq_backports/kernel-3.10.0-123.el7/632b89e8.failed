xfs: fix static and extern sparse warnings

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
commit-author Dave Chinner <dchinner@redhat.com>
commit 632b89e82bf1c04c251924b49adc689f7b346321
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/632b89e8.failed

The kbuild test robot indicated that there were some new sparse
warnings in fs/xfs/xfs_dquot_buf.c. Actually, there were a lot more
that is wasn't warning about, so fix them all up.

	Reported-by: kbuild test robot
	Signed-off-by: Dave Chinner <dchinner@redhat.com>
	Reviewed-by: Ben Myers <bpm@sgi.com>
	Signed-off-by: Ben Myers <bpm@sgi.com>

(cherry picked from commit 632b89e82bf1c04c251924b49adc689f7b346321)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/xfs/xfs_alloc_btree.c
#	fs/xfs/xfs_attr_leaf.c
#	fs/xfs/xfs_attr_remote.c
#	fs/xfs/xfs_bit.c
#	fs/xfs/xfs_da_format.c
#	fs/xfs/xfs_dquot_buf.c
#	fs/xfs/xfs_ialloc_btree.c
#	fs/xfs/xfs_rtbitmap.c
diff --cc fs/xfs/xfs_alloc_btree.c
index cafc90251d19,13085429e523..000000000000
--- a/fs/xfs/xfs_alloc_btree.c
+++ b/fs/xfs/xfs_alloc_btree.c
@@@ -17,9 -17,10 +17,16 @@@
   */
  #include "xfs.h"
  #include "xfs_fs.h"
++<<<<<<< HEAD
 +#include "xfs_types.h"
 +#include "xfs_log.h"
 +#include "xfs_trans.h"
++=======
+ #include "xfs_shared.h"
+ #include "xfs_format.h"
+ #include "xfs_log_format.h"
+ #include "xfs_trans_resv.h"
++>>>>>>> 632b89e82bf1 (xfs: fix static and extern sparse warnings)
  #include "xfs_sb.h"
  #include "xfs_ag.h"
  #include "xfs_mount.h"
diff --cc fs/xfs/xfs_attr_leaf.c
index 86db20a9cc02,7b126f46a2f9..000000000000
--- a/fs/xfs/xfs_attr_leaf.c
+++ b/fs/xfs/xfs_attr_leaf.c
@@@ -18,11 -18,11 +18,18 @@@
   */
  #include "xfs.h"
  #include "xfs_fs.h"
++<<<<<<< HEAD
 +#include "xfs_types.h"
++=======
+ #include "xfs_shared.h"
+ #include "xfs_format.h"
+ #include "xfs_log_format.h"
+ #include "xfs_trans_resv.h"
++>>>>>>> 632b89e82bf1 (xfs: fix static and extern sparse warnings)
  #include "xfs_bit.h"
 +#include "xfs_log.h"
 +#include "xfs_trans.h"
 +#include "xfs_trans_priv.h"
  #include "xfs_sb.h"
  #include "xfs_ag.h"
  #include "xfs_mount.h"
diff --cc fs/xfs/xfs_attr_remote.c
index 712a502de619,739e0a52deda..000000000000
--- a/fs/xfs/xfs_attr_remote.c
+++ b/fs/xfs/xfs_attr_remote.c
@@@ -18,11 -18,11 +18,18 @@@
   */
  #include "xfs.h"
  #include "xfs_fs.h"
++<<<<<<< HEAD
 +#include "xfs_types.h"
++=======
+ #include "xfs_shared.h"
+ #include "xfs_format.h"
+ #include "xfs_log_format.h"
+ #include "xfs_trans_resv.h"
++>>>>>>> 632b89e82bf1 (xfs: fix static and extern sparse warnings)
  #include "xfs_bit.h"
 +#include "xfs_log.h"
 +#include "xfs_trans.h"
 +#include "xfs_trans_priv.h"
  #include "xfs_sb.h"
  #include "xfs_ag.h"
  #include "xfs_mount.h"
diff --cc fs/xfs/xfs_bit.c
index 48228848f5ae,0e8885a59646..000000000000
--- a/fs/xfs/xfs_bit.c
+++ b/fs/xfs/xfs_bit.c
@@@ -16,10 -16,8 +16,15 @@@
   * Inc.,  51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
   */
  #include "xfs.h"
++<<<<<<< HEAD
 +#include "xfs_bit.h"
 +#include "xfs_log.h"
 +#include "xfs_trans.h"
 +#include "xfs_buf_item.h"
++=======
+ #include "xfs_log_format.h"
+ #include "xfs_bit.h"
++>>>>>>> 632b89e82bf1 (xfs: fix static and extern sparse warnings)
  
  /*
   * XFS bit manipulation routines, used in non-realtime code.
diff --cc fs/xfs/xfs_ialloc_btree.c
index 5448eb6b8c12,c8fa5bbb36de..000000000000
--- a/fs/xfs/xfs_ialloc_btree.c
+++ b/fs/xfs/xfs_ialloc_btree.c
@@@ -17,10 -17,11 +17,17 @@@
   */
  #include "xfs.h"
  #include "xfs_fs.h"
++<<<<<<< HEAD
 +#include "xfs_types.h"
++=======
+ #include "xfs_shared.h"
+ #include "xfs_format.h"
+ #include "xfs_log_format.h"
+ #include "xfs_trans_resv.h"
++>>>>>>> 632b89e82bf1 (xfs: fix static and extern sparse warnings)
  #include "xfs_bit.h"
 +#include "xfs_log.h"
 +#include "xfs_trans.h"
  #include "xfs_sb.h"
  #include "xfs_ag.h"
  #include "xfs_mount.h"
* Unmerged path fs/xfs/xfs_da_format.c
* Unmerged path fs/xfs/xfs_dquot_buf.c
* Unmerged path fs/xfs/xfs_rtbitmap.c
* Unmerged path fs/xfs/xfs_alloc_btree.c
* Unmerged path fs/xfs/xfs_attr_leaf.c
* Unmerged path fs/xfs/xfs_attr_remote.c
* Unmerged path fs/xfs/xfs_bit.c
diff --git a/fs/xfs/xfs_bmap_btree.c b/fs/xfs/xfs_bmap_btree.c
index cf3bc76710c3..9b580635f204 100644
--- a/fs/xfs/xfs_bmap_btree.c
+++ b/fs/xfs/xfs_bmap_btree.c
@@ -17,6 +17,7 @@
  */
 #include "xfs.h"
 #include "xfs_fs.h"
+#include "xfs_shared.h"
 #include "xfs_format.h"
 #include "xfs_bit.h"
 #include "xfs_log.h"
diff --git a/fs/xfs/xfs_buf_item.c b/fs/xfs/xfs_buf_item.c
index f1d85cfc0a54..ece6c9888d6f 100644
--- a/fs/xfs/xfs_buf_item.c
+++ b/fs/xfs/xfs_buf_item.c
@@ -808,7 +808,7 @@ xfs_buf_item_init(
  * Mark bytes first through last inclusive as dirty in the buf
  * item's bitmap.
  */
-void
+static void
 xfs_buf_item_log_segment(
 	struct xfs_buf_log_item	*bip,
 	uint			first,
* Unmerged path fs/xfs/xfs_da_format.c
* Unmerged path fs/xfs/xfs_dquot_buf.c
* Unmerged path fs/xfs/xfs_ialloc_btree.c
* Unmerged path fs/xfs/xfs_rtbitmap.c
diff --git a/fs/xfs/xfs_sb.c b/fs/xfs/xfs_sb.c
index b4762279bb78..b6ab26e6ec64 100644
--- a/fs/xfs/xfs_sb.c
+++ b/fs/xfs/xfs_sb.c
@@ -17,6 +17,7 @@
  */
 #include "xfs.h"
 #include "xfs_fs.h"
+#include "xfs_shared.h"
 #include "xfs_format.h"
 #include "xfs_bit.h"
 #include "xfs_log.h"
diff --git a/fs/xfs/xfs_super.c b/fs/xfs/xfs_super.c
index 54773aabb88d..d121719e952b 100644
--- a/fs/xfs/xfs_super.c
+++ b/fs/xfs/xfs_super.c
@@ -1167,7 +1167,7 @@ xfs_restore_resvblks(struct xfs_mount *mp)
  * Note: xfs_log_quiesce() stops background log work - the callers must ensure
  * it is started again when appropriate.
  */
-void
+static void
 xfs_quiesce_attr(
 	struct xfs_mount	*mp)
 {
