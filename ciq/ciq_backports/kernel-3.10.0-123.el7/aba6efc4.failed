Memory hotplug: Move alternative function definitions to header

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [mm] memory_hotplug: Move alternative function definitions to header (Myron Stowe) [991615]
Rebuild_FUZZ: 98.41%
commit-author Rafael J. Wysocki <rafael.j.wysocki@intel.com>
commit aba6efc47133af4941cda16e690f71b7ad894da2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/aba6efc4.failed

Move the definitions of offline_pages() and remove_memory()
for CONFIG_MEMORY_HOTREMOVE to memory_hotplug.h, where they belong,
and make them static inline.

	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit aba6efc47133af4941cda16e690f71b7ad894da2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	mm/memory_hotplug.c
diff --cc mm/memory_hotplug.c
index ce6091c362f3,490e3d401e2c..000000000000
--- a/mm/memory_hotplug.c
+++ b/mm/memory_hotplug.c
@@@ -1874,17 -1821,6 +1874,21 @@@ repeat
  	try_offline_node(nid);
  
  	unlock_memory_hotplug();
 +
 +	return 0;
  }
++<<<<<<< HEAD
 +#else
 +int offline_pages(unsigned long start_pfn, unsigned long nr_pages)
 +{
 +	return -EINVAL;
 +}
 +int remove_memory(int nid, u64 start, u64 size)
 +{
 +	return -EINVAL;
 +}
 +#endif /* CONFIG_MEMORY_HOTREMOVE */
++=======
++>>>>>>> aba6efc47133 (Memory hotplug: Move alternative function definitions to header)
  EXPORT_SYMBOL_GPL(remove_memory);
+ #endif /* CONFIG_MEMORY_HOTREMOVE */
diff --git a/include/linux/memory_hotplug.h b/include/linux/memory_hotplug.h
index 2975b7b2a9d8..65175f45c753 100644
--- a/include/linux/memory_hotplug.h
+++ b/include/linux/memory_hotplug.h
@@ -234,6 +234,8 @@ static inline void unlock_memory_hotplug(void) {}
 
 extern int is_mem_section_removable(unsigned long pfn, unsigned long nr_pages);
 extern void try_offline_node(int nid);
+extern int offline_pages(unsigned long start_pfn, unsigned long nr_pages);
+extern void remove_memory(int nid, u64 start, u64 size);
 
 #else
 static inline int is_mem_section_removable(unsigned long pfn,
@@ -243,6 +245,13 @@ static inline int is_mem_section_removable(unsigned long pfn,
 }
 
 static inline void try_offline_node(int nid) {}
+
+static inline int offline_pages(unsigned long start_pfn, unsigned long nr_pages)
+{
+	return -EINVAL;
+}
+
+static inline void remove_memory(int nid, u64 start, u64 size) {}
 #endif /* CONFIG_MEMORY_HOTREMOVE */
 
 extern int walk_memory_range(unsigned long start_pfn, unsigned long end_pfn,
* Unmerged path mm/memory_hotplug.c
