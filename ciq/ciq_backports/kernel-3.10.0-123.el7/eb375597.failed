c2port: convert class code to use dev_groups

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [net] core: convert class code to use dev_groups (Jiri Benc) [1037452]
Rebuild_FUZZ: 95.35%
commit-author Greg Kroah-Hartman <gregkh@linuxfoundation.org>
commit eb375597e2d456499bfa427fb398ab36bdc837e5
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/eb375597.failed

The dev_attrs field of struct class is going away soon, dev_groups
should be used instead.  This converts the c2port class code to use the
correct field.

	Cc: Rodolfo Giometti <giometti@linux.it>
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit eb375597e2d456499bfa427fb398ab36bdc837e5)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/misc/c2port/core.c
diff --cc drivers/misc/c2port/core.c
index f32550a74bdd,abe6e251e368..000000000000
--- a/drivers/misc/c2port/core.c
+++ b/drivers/misc/c2port/core.c
@@@ -850,31 -860,32 +860,29 @@@ static ssize_t c2port_write_flash_data(
  /*
   * Class attributes
   */
- 
- static struct device_attribute c2port_attrs[] = {
- 	__ATTR(name, 0444, c2port_show_name, NULL),
- 	__ATTR(flash_blocks_num, 0444, c2port_show_flash_blocks_num, NULL),
- 	__ATTR(flash_block_size, 0444, c2port_show_flash_block_size, NULL),
- 	__ATTR(flash_size, 0444, c2port_show_flash_size, NULL),
- 	__ATTR(access, 0644, c2port_show_access, c2port_store_access),
- 	__ATTR(reset, 0200, NULL, c2port_store_reset),
- 	__ATTR(dev_id, 0444, c2port_show_dev_id, NULL),
- 	__ATTR(rev_id, 0444, c2port_show_rev_id, NULL),
- 
- 	__ATTR(flash_access, 0644, c2port_show_flash_access,
- 					c2port_store_flash_access),
- 	__ATTR(flash_erase, 0200, NULL, c2port_store_flash_erase),
- 	__ATTR_NULL,
+ static struct attribute *c2port_attrs[] = {
+ 	&dev_attr_name.attr,
+ 	&dev_attr_flash_blocks_num.attr,
+ 	&dev_attr_flash_block_size.attr,
+ 	&dev_attr_flash_size.attr,
+ 	&dev_attr_access.attr,
+ 	&dev_attr_reset.attr,
+ 	&dev_attr_dev_id.attr,
+ 	&dev_attr_rev_id.attr,
+ 	&dev_attr_flash_access.attr,
+ 	&dev_attr_flash_erase.attr,
+ 	NULL,
  };
+ ATTRIBUTE_GROUPS(c2port);
  
 -static struct bin_attribute c2port_bin_attrs[] = {
 -	{
 -		.attr	= {
 -			.name	= "flash_data",
 -			.mode	= 0644
 -		},
 -		.read	= c2port_read_flash_data,
 -		.write	= c2port_write_flash_data,
 -		/* .size is computed at run-time */
 +static struct bin_attribute c2port_bin_attrs = {
 +	.attr	= {
 +		.name	= "flash_data",
 +		.mode	= 0644
  	},
 -	__ATTR_NULL
 +	.read	= c2port_read_flash_data,
 +	.write	= c2port_write_flash_data,
 +	/* .size is computed at run-time */
  };
  
  /*
@@@ -984,7 -987,8 +992,12 @@@ static int __init c2port_init(void
  		printk(KERN_ERR "c2port: failed to allocate class\n");
  		return PTR_ERR(c2port_class);
  	}
++<<<<<<< HEAD
 +	c2port_class->dev_attrs = c2port_attrs;
++=======
+ 	c2port_class->dev_groups = c2port_groups;
+ 	c2port_class->dev_bin_attrs = c2port_bin_attrs;
++>>>>>>> eb375597e2d4 (c2port: convert class code to use dev_groups)
  
  	return 0;
  }
* Unmerged path drivers/misc/c2port/core.c
