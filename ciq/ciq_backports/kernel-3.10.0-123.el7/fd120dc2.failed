powerpc/mm: Fix compile error of pgtable-ppc64.h

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [powerpc] mm: Fix compile error of pgtable-ppc64.h (Steve Best) [1047636]
Rebuild_FUZZ: 90.91%
commit-author Li Zhong <zhong@linux.vnet.ibm.com>
commit fd120dc2e205d2318a8b47d6d8098b789e3af67d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/fd120dc2.failed

It seems that forward declaration couldn't work well with typedef, use
struct spinlock directly to avoiding following build errors:

In file included from include/linux/spinlock.h:81,
                 from include/linux/seqlock.h:35,
                 from include/linux/time.h:5,
                 from include/uapi/linux/timex.h:56,
                 from include/linux/timex.h:56,
                 from include/linux/sched.h:17,
                 from arch/powerpc/kernel/asm-offsets.c:17:
include/linux/spinlock_types.h:76: error: redefinition of typedef 'spinlock_t'
/root/linux-next/arch/powerpc/include/asm/pgtable-ppc64.h:563: note: previous declaration of 'spinlock_t' was here

	Signed-off-by: Li Zhong <zhong@linux.vnet.ibm.com>
	Signed-off-by: Aneesh Kumar K.V <aneesh.kumar@linux.vnet.ibm.com>
	Signed-off-by: Benjamin Herrenschmidt <benh@kernel.crashing.org>
(cherry picked from commit fd120dc2e205d2318a8b47d6d8098b789e3af67d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/powerpc/include/asm/pgtable-ppc64.h
diff --cc arch/powerpc/include/asm/pgtable-ppc64.h
index e71bd25d62d7,bc141c950b1e..000000000000
--- a/arch/powerpc/include/asm/pgtable-ppc64.h
+++ b/arch/powerpc/include/asm/pgtable-ppc64.h
@@@ -557,5 -558,19 +557,22 @@@ extern pgtable_t pgtable_trans_huge_wit
  #define __HAVE_ARCH_PMDP_INVALIDATE
  extern void pmdp_invalidate(struct vm_area_struct *vma, unsigned long address,
  			    pmd_t *pmdp);
++<<<<<<< HEAD
++=======
+ 
+ #define pmd_move_must_withdraw pmd_move_must_withdraw
+ struct spinlock;
+ static inline int pmd_move_must_withdraw(struct spinlock *new_pmd_ptl,
+ 					 struct spinlock *old_pmd_ptl)
+ {
+ 	/*
+ 	 * Archs like ppc64 use pgtable to store per pmd
+ 	 * specific information. So when we switch the pmd,
+ 	 * we should also withdraw and deposit the pgtable
+ 	 */
+ 	return true;
+ }
+ 
++>>>>>>> fd120dc2e205 (powerpc/mm: Fix compile error of pgtable-ppc64.h)
  #endif /* __ASSEMBLY__ */
  #endif /* _ASM_POWERPC_PGTABLE_PPC64_H_ */
* Unmerged path arch/powerpc/include/asm/pgtable-ppc64.h
