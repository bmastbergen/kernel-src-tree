cpufreq: powerpc: move cpufreq driver to drivers/cpufreq

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [cpufreq] powerpc: move cpufreq driver to drivers/cpufreq (Myron Stowe) [991615]
Rebuild_FUZZ: 91.26%
commit-author Viresh Kumar <viresh.kumar@linaro.org>
commit 7fb6a53db58c729ff470095371f431b6d66c527b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/7fb6a53d.failed

Move cpufreq driver of powerpc platform to drivers/cpufreq.

	Signed-off-by: Viresh Kumar <viresh.kumar@linaro.org>
	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit 7fb6a53db58c729ff470095371f431b6d66c527b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/cpufreq/Kconfig.powerpc
#	drivers/cpufreq/Makefile
diff --cc drivers/cpufreq/Kconfig.powerpc
index 9c926ca0d718,c48f83c93a96..000000000000
--- a/drivers/cpufreq/Kconfig.powerpc
+++ b/drivers/cpufreq/Kconfig.powerpc
@@@ -23,3 -23,39 +23,42 @@@ config CPU_FREQ_MAPL
  	help
  	  This adds support for frequency switching on Maple 970FX
  	  Evaluation Board and compatible boards (IBM JS2x blades).
++<<<<<<< HEAD
++=======
+ 
+ config PPC_CORENET_CPUFREQ
+ 	tristate "CPU frequency scaling driver for Freescale E500MC SoCs"
+ 	depends on PPC_E500MC && OF && COMMON_CLK
+ 	select CPU_FREQ_TABLE
+ 	select CLK_PPC_CORENET
+ 	help
+ 	  This adds the CPUFreq driver support for Freescale e500mc,
+ 	  e5500 and e6500 series SoCs which are capable of changing
+ 	  the CPU's frequency dynamically.
+ 
+ config CPU_FREQ_PMAC
+ 	bool "Support for Apple PowerBooks"
+ 	depends on ADB_PMU && PPC32
+ 	select CPU_FREQ_TABLE
+ 	help
+ 	  This adds support for frequency switching on Apple PowerBooks,
+ 	  this currently includes some models of iBook & Titanium
+ 	  PowerBook.
+ 
+ config CPU_FREQ_PMAC64
+ 	bool "Support for some Apple G5s"
+ 	depends on PPC_PMAC && PPC64
+ 	select CPU_FREQ_TABLE
+ 	help
+ 	  This adds support for frequency switching on Apple iMac G5,
+ 	  and some of the more recent desktop G5 machines as well.
+ 
+ config PPC_PASEMI_CPUFREQ
+ 	bool "Support for PA Semi PWRficient"
+ 	depends on PPC_PASEMI
+ 	select CPU_FREQ_TABLE
+ 	default y
+ 	help
+ 	  This adds the support for frequency switching on PA Semi
+ 	  PWRficient processors.
++>>>>>>> 7fb6a53db58c (cpufreq: powerpc: move cpufreq driver to drivers/cpufreq)
diff --cc drivers/cpufreq/Makefile
index 315b9231feb1,2de2af2ca3b1..000000000000
--- a/drivers/cpufreq/Makefile
+++ b/drivers/cpufreq/Makefile
@@@ -79,6 -79,10 +79,13 @@@ obj-$(CONFIG_CPU_FREQ_CBE)		+= ppc-cbe-
  ppc-cbe-cpufreq-y			+= ppc_cbe_cpufreq_pervasive.o ppc_cbe_cpufreq.o
  obj-$(CONFIG_CPU_FREQ_CBE_PMI)		+= ppc_cbe_cpufreq_pmi.o
  obj-$(CONFIG_CPU_FREQ_MAPLE)		+= maple-cpufreq.o
++<<<<<<< HEAD
++=======
+ obj-$(CONFIG_PPC_CORENET_CPUFREQ)   += ppc-corenet-cpufreq.o
+ obj-$(CONFIG_CPU_FREQ_PMAC)		+= pmac32-cpufreq.o
+ obj-$(CONFIG_CPU_FREQ_PMAC64)		+= pmac64-cpufreq.o
+ obj-$(CONFIG_PPC_PASEMI_CPUFREQ)	+= pasemi-cpufreq.o
++>>>>>>> 7fb6a53db58c (cpufreq: powerpc: move cpufreq driver to drivers/cpufreq)
  
  ##################################################################################
  # Other platform drivers
diff --git a/arch/powerpc/platforms/Kconfig b/arch/powerpc/platforms/Kconfig
index b62aab3e22ec..e17cdfc5ba40 100644
--- a/arch/powerpc/platforms/Kconfig
+++ b/arch/powerpc/platforms/Kconfig
@@ -193,37 +193,6 @@ config PPC_IO_WORKAROUNDS
 
 source "drivers/cpufreq/Kconfig"
 
-menu "CPU Frequency drivers"
-	depends on CPU_FREQ
-
-config CPU_FREQ_PMAC
-	bool "Support for Apple PowerBooks"
-	depends on ADB_PMU && PPC32
-	select CPU_FREQ_TABLE
-	help
-	  This adds support for frequency switching on Apple PowerBooks,
-	  this currently includes some models of iBook & Titanium
-	  PowerBook.
-
-config CPU_FREQ_PMAC64
-	bool "Support for some Apple G5s"
-	depends on PPC_PMAC && PPC64
-	select CPU_FREQ_TABLE
-	help
-	  This adds support for frequency switching on Apple iMac G5,
-	  and some of the more recent desktop G5 machines as well.
-
-config PPC_PASEMI_CPUFREQ
-	bool "Support for PA Semi PWRficient"
-	depends on PPC_PASEMI
-	default y
-	select CPU_FREQ_TABLE
-	help
-	  This adds the support for frequency switching on PA Semi
-	  PWRficient processors.
-
-endmenu
-
 menu "CPUIdle driver"
 
 source "drivers/cpuidle/Kconfig"
diff --git a/arch/powerpc/platforms/pasemi/Makefile b/arch/powerpc/platforms/pasemi/Makefile
index ce6d789e0741..8e8d4cae5ebe 100644
--- a/arch/powerpc/platforms/pasemi/Makefile
+++ b/arch/powerpc/platforms/pasemi/Makefile
@@ -1,3 +1,2 @@
 obj-y	+= setup.o pci.o time.o idle.o powersave.o iommu.o dma_lib.o misc.o
 obj-$(CONFIG_PPC_PASEMI_MDIO)	+= gpio_mdio.o
-obj-$(CONFIG_PPC_PASEMI_CPUFREQ) += cpufreq.o
diff --git a/arch/powerpc/platforms/powermac/Makefile b/arch/powerpc/platforms/powermac/Makefile
index ea47df66fee5..52c6ce1cc985 100644
--- a/arch/powerpc/platforms/powermac/Makefile
+++ b/arch/powerpc/platforms/powermac/Makefile
@@ -9,8 +9,6 @@ obj-y				+= pic.o setup.o time.o feature.o pci.o \
 				   sleep.o low_i2c.o cache.o pfunc_core.o \
 				   pfunc_base.o udbg_scc.o udbg_adb.o
 obj-$(CONFIG_PMAC_BACKLIGHT)	+= backlight.o
-obj-$(CONFIG_CPU_FREQ_PMAC)	+= cpufreq_32.o
-obj-$(CONFIG_CPU_FREQ_PMAC64)	+= cpufreq_64.o
 # CONFIG_NVRAM is an arch. independent tristate symbol, for pmac32 we really
 # need this to be a bool.  Cheat here and pretend CONFIG_NVRAM=m is really
 # CONFIG_NVRAM=y
* Unmerged path drivers/cpufreq/Kconfig.powerpc
* Unmerged path drivers/cpufreq/Makefile
diff --git a/arch/powerpc/platforms/pasemi/cpufreq.c b/drivers/cpufreq/pasemi-cpufreq.c
similarity index 100%
rename from arch/powerpc/platforms/pasemi/cpufreq.c
rename to drivers/cpufreq/pasemi-cpufreq.c
diff --git a/arch/powerpc/platforms/powermac/cpufreq_32.c b/drivers/cpufreq/pmac32-cpufreq.c
similarity index 100%
rename from arch/powerpc/platforms/powermac/cpufreq_32.c
rename to drivers/cpufreq/pmac32-cpufreq.c
diff --git a/arch/powerpc/platforms/powermac/cpufreq_64.c b/drivers/cpufreq/pmac64-cpufreq.c
similarity index 100%
rename from arch/powerpc/platforms/powermac/cpufreq_64.c
rename to drivers/cpufreq/pmac64-cpufreq.c
