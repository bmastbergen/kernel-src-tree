USB: WUSBCORE: fix resource cleanup in error path in __wa_xfer_setup_segs

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [usb] wusbcore: fix resource cleanup in error path in __wa_xfer_setup_segs (Don Zickus) [895641]
Rebuild_FUZZ: 96.45%
commit-author Thomas Pugliese <thomas.pugliese@gmail.com>
commit 11b1bf81bf68cab0ad7d7d4d08dbfb236d5cbcaa
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/11b1bf81.failed

Use usb_free_urb instead of kfree in error path and point to the correct
URB.  Also remember to clean up the sg list for the URB if it was allocated.

	Signed-off-by: Thomas Pugliese <thomas.pugliese@gmail.com>
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 11b1bf81bf68cab0ad7d7d4d08dbfb236d5cbcaa)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/usb/wusbcore/wa-xfer.c
diff --cc drivers/usb/wusbcore/wa-xfer.c
index 1f0c207f2a51,75a2bea62102..000000000000
--- a/drivers/usb/wusbcore/wa-xfer.c
+++ b/drivers/usb/wusbcore/wa-xfer.c
@@@ -690,6 -803,8 +690,11 @@@ static int __wa_xfer_setup_segs(struct 
  	}
  	return 0;
  
++<<<<<<< HEAD
++=======
+ error_sg_alloc:
+ 	usb_free_urb(xfer->seg[cnt]->dto_urb);
++>>>>>>> 11b1bf81bf68 (USB: WUSBCORE: fix resource cleanup in error path in __wa_xfer_setup_segs)
  error_dto_alloc:
  	kfree(xfer->seg[cnt]);
  	cnt--;
* Unmerged path drivers/usb/wusbcore/wa-xfer.c
