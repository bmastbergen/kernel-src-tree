usb: misc: usb3503: Factor out I2C probe

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [usb] misc/usb3503: Factor out I2C probe (Don Zickus) [895641]
Rebuild_FUZZ: 89.19%
commit-author Mark Brown <broonie@linaro.org>
commit 2487e3ee33dd6c4fa3dabbe11bc988883be81f1e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/2487e3ee.failed

In preparation for supporting operation without an I2C control interface
factor out the I2C-specific parts of the probe routine from those that
don't do any register I/O.

	Signed-off-by: Mark Brown <broonie@linaro.org>
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 2487e3ee33dd6c4fa3dabbe11bc988883be81f1e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/usb/misc/usb3503.c
diff --cc drivers/usb/misc/usb3503.c
index 085255aa5f13,ca0f789d78a3..000000000000
--- a/drivers/usb/misc/usb3503.c
+++ b/drivers/usb/misc/usb3503.c
@@@ -156,12 -156,12 +156,19 @@@ static const struct regmap_config usb35
  	.max_register = USB3503_RESET,
  };
  
- static int usb3503_probe(struct i2c_client *i2c, const struct i2c_device_id *id)
+ static int usb3503_probe(struct usb3503 *hub)
  {
++<<<<<<< HEAD
 +	struct usb3503_platform_data *pdata = i2c->dev.platform_data;
 +	struct device_node *np = i2c->dev.of_node;
 +	struct usb3503 *hub;
 +	int err = -ENOMEM;
++=======
+ 	struct device *dev = hub->dev;
+ 	struct usb3503_platform_data *pdata = dev_get_platdata(dev);
+ 	struct device_node *np = dev->of_node;
+ 	int err;
++>>>>>>> 2487e3ee33dd (usb: misc: usb3503: Factor out I2C probe)
  	u32 mode = USB3503_MODE_UNKNOWN;
  	const u32 *property;
  	int len;
* Unmerged path drivers/usb/misc/usb3503.c
