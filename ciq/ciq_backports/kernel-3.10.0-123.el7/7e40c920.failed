perf tools: fix a typo of a Power7 event name

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [powerpc] perf: fix a typo of a Power7 event name (Steve Best) [1009105]
Rebuild_FUZZ: 92.86%
commit-author Runzhen Wang <runzhen@linux.vnet.ibm.com>
commit 7e40c92019cef784fffbdfc51c6e731e7ee6ba10
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/7e40c920.failed

In the Power7 PMU guide:
https://www.power.org/documentation/commonly-used-metrics-for-performance-analysis/
PM_BRU_MPRED is referred to as PM_BR_MPRED.

It fixed the typo by changing the name of the event in kernel and
documentation accordingly.

This patch changes the ABI, there are some reasons I think it's ok:

- It is relatively new interface, specific to the Power7 platform.

- No tools that we know of actually use this interface at this point
 (none are listed near the interface).

- Users of this interface (eg oprofile users migrating to perf)
  would be more used to the "PM_BR_MPRED" rather than "PM_BRU_MPRED".

- These are in the ABI/testing at this point rather than ABI/stable,
  so hoping we have some wiggle room.

	Signed-off-by: Runzhen Wang <runzhen@linux.vnet.ibm.com>
	Acked-by: Michael Ellerman <michael@ellerman.id.au>
	Cc: icycoder@gmail.com
	Cc: linuxppc-dev@lists.ozlabs.org
	Cc: Michael Ellerman <michael@ellerman.id.au>
	Cc: Paul Mackerras <paulus@samba.org>
	Cc: Runzhen Wang <runzhew@clemson.edu>
	Cc: Sukadev Bhattiprolu <sukadev@linux.vnet.ibm.com>
	Cc: Xiao Guangrong <xiaoguangrong@linux.vnet.ibm.com>
Link: http://lkml.kernel.org/r/1372407297-6996-2-git-send-email-runzhen@linux.vnet.ibm.com
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 7e40c92019cef784fffbdfc51c6e731e7ee6ba10)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	Documentation/ABI/testing/sysfs-bus-event_source-devices-events
#	arch/powerpc/perf/power7-pmu.c
diff --cc Documentation/ABI/testing/sysfs-bus-event_source-devices-events
index 0adeb524c0d4,3c1cc24361bd..000000000000
--- a/Documentation/ABI/testing/sysfs-bus-event_source-devices-events
+++ b/Documentation/ABI/testing/sysfs-bus-event_source-devices-events
@@@ -27,14 -27,36 +27,44 @@@ Description:	Generic performance monito
  		"basename".
  
  
++<<<<<<< HEAD
 +What: 		/sys/devices/cpu/events/PM_LD_MISS_L1
++=======
+ What: 		/sys/devices/cpu/events/PM_1PLUS_PPC_CMPL
+ 		/sys/devices/cpu/events/PM_BRU_FIN
+ 		/sys/devices/cpu/events/PM_BR_MPRED
+ 		/sys/devices/cpu/events/PM_CMPLU_STALL
+ 		/sys/devices/cpu/events/PM_CMPLU_STALL_BRU
+ 		/sys/devices/cpu/events/PM_CMPLU_STALL_DCACHE_MISS
+ 		/sys/devices/cpu/events/PM_CMPLU_STALL_DFU
+ 		/sys/devices/cpu/events/PM_CMPLU_STALL_DIV
+ 		/sys/devices/cpu/events/PM_CMPLU_STALL_ERAT_MISS
+ 		/sys/devices/cpu/events/PM_CMPLU_STALL_FXU
+ 		/sys/devices/cpu/events/PM_CMPLU_STALL_IFU
+ 		/sys/devices/cpu/events/PM_CMPLU_STALL_LSU
+ 		/sys/devices/cpu/events/PM_CMPLU_STALL_REJECT
+ 		/sys/devices/cpu/events/PM_CMPLU_STALL_SCALAR
+ 		/sys/devices/cpu/events/PM_CMPLU_STALL_SCALAR_LONG
+ 		/sys/devices/cpu/events/PM_CMPLU_STALL_STORE
+ 		/sys/devices/cpu/events/PM_CMPLU_STALL_THRD
+ 		/sys/devices/cpu/events/PM_CMPLU_STALL_VECTOR
+ 		/sys/devices/cpu/events/PM_CMPLU_STALL_VECTOR_LONG
+ 		/sys/devices/cpu/events/PM_CYC
+ 		/sys/devices/cpu/events/PM_GCT_NOSLOT_BR_MPRED
+ 		/sys/devices/cpu/events/PM_GCT_NOSLOT_BR_MPRED_IC_MISS
+ 		/sys/devices/cpu/events/PM_GCT_NOSLOT_CYC
+ 		/sys/devices/cpu/events/PM_GCT_NOSLOT_IC_MISS
+ 		/sys/devices/cpu/events/PM_GRP_CMPL
+ 		/sys/devices/cpu/events/PM_INST_CMPL
+ 		/sys/devices/cpu/events/PM_LD_MISS_L1
++>>>>>>> 7e40c92019ce (perf tools: fix a typo of a Power7 event name)
  		/sys/devices/cpu/events/PM_LD_REF_L1
 -		/sys/devices/cpu/events/PM_RUN_CYC
 -		/sys/devices/cpu/events/PM_RUN_INST_CMPL
 +		/sys/devices/cpu/events/PM_CYC
 +		/sys/devices/cpu/events/PM_BRU_FIN
 +		/sys/devices/cpu/events/PM_GCT_NOSLOT_CYC
 +		/sys/devices/cpu/events/PM_BRU_MPRED
 +		/sys/devices/cpu/events/PM_INST_CMPL
 +		/sys/devices/cpu/events/PM_CMPLU_STALL
  
  Date:		2013/01/08
  
diff --cc arch/powerpc/perf/power7-pmu.c
index 3c475d6267c7,d1821b8bbc4c..000000000000
--- a/arch/powerpc/perf/power7-pmu.c
+++ b/arch/powerpc/perf/power7-pmu.c
@@@ -60,8 -60,31 +60,8 @@@
  #define	PME_PM_LD_REF_L1		0xc880
  #define	PME_PM_LD_MISS_L1		0x400f0
  #define	PME_PM_BRU_FIN			0x10068
- #define	PME_PM_BRU_MPRED		0x400f6
+ #define	PME_PM_BR_MPRED			0x400f6
  
 -#define PME_PM_CMPLU_STALL_FXU			0x20014
 -#define PME_PM_CMPLU_STALL_DIV			0x40014
 -#define PME_PM_CMPLU_STALL_SCALAR		0x40012
 -#define PME_PM_CMPLU_STALL_SCALAR_LONG		0x20018
 -#define PME_PM_CMPLU_STALL_VECTOR		0x2001c
 -#define PME_PM_CMPLU_STALL_VECTOR_LONG		0x4004a
 -#define PME_PM_CMPLU_STALL_LSU			0x20012
 -#define PME_PM_CMPLU_STALL_REJECT		0x40016
 -#define PME_PM_CMPLU_STALL_ERAT_MISS		0x40018
 -#define PME_PM_CMPLU_STALL_DCACHE_MISS		0x20016
 -#define PME_PM_CMPLU_STALL_STORE		0x2004a
 -#define PME_PM_CMPLU_STALL_THRD			0x1001c
 -#define PME_PM_CMPLU_STALL_IFU			0x4004c
 -#define PME_PM_CMPLU_STALL_BRU			0x4004e
 -#define PME_PM_GCT_NOSLOT_IC_MISS		0x2001a
 -#define PME_PM_GCT_NOSLOT_BR_MPRED		0x4001a
 -#define PME_PM_GCT_NOSLOT_BR_MPRED_IC_MISS	0x4001c
 -#define PME_PM_GRP_CMPL				0x30004
 -#define PME_PM_1PLUS_PPC_CMPL			0x100f2
 -#define PME_PM_CMPLU_STALL_DFU			0x2003c
 -#define PME_PM_RUN_CYC				0x200f4
 -#define PME_PM_RUN_INST_CMPL			0x400fa
 -
  /*
   * Layout of constraint bits:
   * 6666555555555544444444443333333333222222222211111111110000000000
@@@ -391,8 -414,33 +391,8 @@@ POWER_EVENT_ATTR(INST_CMPL,			INST_CMPL
  POWER_EVENT_ATTR(LD_REF_L1,			LD_REF_L1);
  POWER_EVENT_ATTR(LD_MISS_L1,			LD_MISS_L1);
  POWER_EVENT_ATTR(BRU_FIN,			BRU_FIN)
- POWER_EVENT_ATTR(BRU_MPRED,			BRU_MPRED);
+ POWER_EVENT_ATTR(BR_MPRED,			BR_MPRED);
  
 -POWER_EVENT_ATTR(CMPLU_STALL_FXU,		CMPLU_STALL_FXU);
 -POWER_EVENT_ATTR(CMPLU_STALL_DIV,		CMPLU_STALL_DIV);
 -POWER_EVENT_ATTR(CMPLU_STALL_SCALAR,		CMPLU_STALL_SCALAR);
 -POWER_EVENT_ATTR(CMPLU_STALL_SCALAR_LONG,	CMPLU_STALL_SCALAR_LONG);
 -POWER_EVENT_ATTR(CMPLU_STALL_VECTOR,		CMPLU_STALL_VECTOR);
 -POWER_EVENT_ATTR(CMPLU_STALL_VECTOR_LONG,	CMPLU_STALL_VECTOR_LONG);
 -POWER_EVENT_ATTR(CMPLU_STALL_LSU,		CMPLU_STALL_LSU);
 -POWER_EVENT_ATTR(CMPLU_STALL_REJECT,		CMPLU_STALL_REJECT);
 -
 -POWER_EVENT_ATTR(CMPLU_STALL_ERAT_MISS,		CMPLU_STALL_ERAT_MISS);
 -POWER_EVENT_ATTR(CMPLU_STALL_DCACHE_MISS,	CMPLU_STALL_DCACHE_MISS);
 -POWER_EVENT_ATTR(CMPLU_STALL_STORE,		CMPLU_STALL_STORE);
 -POWER_EVENT_ATTR(CMPLU_STALL_THRD,		CMPLU_STALL_THRD);
 -POWER_EVENT_ATTR(CMPLU_STALL_IFU,		CMPLU_STALL_IFU);
 -POWER_EVENT_ATTR(CMPLU_STALL_BRU,		CMPLU_STALL_BRU);
 -POWER_EVENT_ATTR(GCT_NOSLOT_IC_MISS,		GCT_NOSLOT_IC_MISS);
 -
 -POWER_EVENT_ATTR(GCT_NOSLOT_BR_MPRED,		GCT_NOSLOT_BR_MPRED);
 -POWER_EVENT_ATTR(GCT_NOSLOT_BR_MPRED_IC_MISS,	GCT_NOSLOT_BR_MPRED_IC_MISS);
 -POWER_EVENT_ATTR(GRP_CMPL,			GRP_CMPL);
 -POWER_EVENT_ATTR(1PLUS_PPC_CMPL,		1PLUS_PPC_CMPL);
 -POWER_EVENT_ATTR(CMPLU_STALL_DFU,		CMPLU_STALL_DFU);
 -POWER_EVENT_ATTR(RUN_CYC,			RUN_CYC);
 -POWER_EVENT_ATTR(RUN_INST_CMPL,			RUN_INST_CMPL);
 -
  static struct attribute *power7_events_attr[] = {
  	GENERIC_EVENT_PTR(CYC),
  	GENERIC_EVENT_PTR(GCT_NOSLOT_CYC),
@@@ -410,7 -458,32 +410,36 @@@
  	POWER_EVENT_PTR(LD_REF_L1),
  	POWER_EVENT_PTR(LD_MISS_L1),
  	POWER_EVENT_PTR(BRU_FIN),
++<<<<<<< HEAD
 +	POWER_EVENT_PTR(BRU_MPRED),
++=======
+ 	POWER_EVENT_PTR(BR_MPRED),
+ 
+ 	POWER_EVENT_PTR(CMPLU_STALL_FXU),
+ 	POWER_EVENT_PTR(CMPLU_STALL_DIV),
+ 	POWER_EVENT_PTR(CMPLU_STALL_SCALAR),
+ 	POWER_EVENT_PTR(CMPLU_STALL_SCALAR_LONG),
+ 	POWER_EVENT_PTR(CMPLU_STALL_VECTOR),
+ 	POWER_EVENT_PTR(CMPLU_STALL_VECTOR_LONG),
+ 	POWER_EVENT_PTR(CMPLU_STALL_LSU),
+ 	POWER_EVENT_PTR(CMPLU_STALL_REJECT),
+ 
+ 	POWER_EVENT_PTR(CMPLU_STALL_ERAT_MISS),
+ 	POWER_EVENT_PTR(CMPLU_STALL_DCACHE_MISS),
+ 	POWER_EVENT_PTR(CMPLU_STALL_STORE),
+ 	POWER_EVENT_PTR(CMPLU_STALL_THRD),
+ 	POWER_EVENT_PTR(CMPLU_STALL_IFU),
+ 	POWER_EVENT_PTR(CMPLU_STALL_BRU),
+ 	POWER_EVENT_PTR(GCT_NOSLOT_IC_MISS),
+ 	POWER_EVENT_PTR(GCT_NOSLOT_BR_MPRED),
+ 
+ 	POWER_EVENT_PTR(GCT_NOSLOT_BR_MPRED_IC_MISS),
+ 	POWER_EVENT_PTR(GRP_CMPL),
+ 	POWER_EVENT_PTR(1PLUS_PPC_CMPL),
+ 	POWER_EVENT_PTR(CMPLU_STALL_DFU),
+ 	POWER_EVENT_PTR(RUN_CYC),
+ 	POWER_EVENT_PTR(RUN_INST_CMPL),
++>>>>>>> 7e40c92019ce (perf tools: fix a typo of a Power7 event name)
  	NULL
  };
  
* Unmerged path Documentation/ABI/testing/sysfs-bus-event_source-devices-events
* Unmerged path arch/powerpc/perf/power7-pmu.c
