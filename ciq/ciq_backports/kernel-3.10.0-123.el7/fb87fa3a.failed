ALSA: hda - define is_haswell() to check if a display audio codec is Haswell

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [alsa] hda: define is_haswell() to check if a display audio codec is Haswell (Jaroslav Kysela) [1044022]
Rebuild_FUZZ: 93.79%
commit-author Mengdong Lin <mengdong.lin@intel.com>
commit fb87fa3a79823c15e70d4fc7653bde59f8556ca1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/fb87fa3a.failed

To apply Haswell specific fixings, this patch defines is_haswell() to check
whether a display audio codec is Haswell, to avoid explicitly checking Haswell
vendor ID everywhere.

	Signed-off-by: Mengdong Lin <mengdong.lin@intel.com>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit fb87fa3a79823c15e70d4fc7653bde59f8556ca1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/pci/hda/patch_hdmi.c
diff --cc sound/pci/hda/patch_hdmi.c
index 0540f8983942,009bcccbee7a..000000000000
--- a/sound/pci/hda/patch_hdmi.c
+++ b/sound/pci/hda/patch_hdmi.c
@@@ -1339,6 -1356,18 +1341,21 @@@ static void hdmi_present_sense(struct h
  			       eld->eld_size);
  		pin_eld->eld_size = eld->eld_size;
  		pin_eld->info = eld->info;
++<<<<<<< HEAD
++=======
+ 
+ 		/* Haswell-specific workaround: re-setup when the transcoder is
+ 		 * changed during the stream playback
+ 		 */
+ 		if (is_haswell(codec) &&
+ 		    eld->eld_valid && !old_eld_valid && per_pin->setup) {
+ 			snd_hda_codec_write(codec, pin_nid, 0,
+ 					    AC_VERB_SET_AMP_GAIN_MUTE,
+ 					    AMP_OUT_UNMUTE);
+ 			hdmi_setup_audio_infoframe(codec, per_pin,
+ 						   per_pin->non_pcm);
+ 		}
++>>>>>>> fb87fa3a7982 (ALSA: hda - define is_haswell() to check if a display audio codec is Haswell)
  	}
  	mutex_unlock(&pin_eld->lock);
  
* Unmerged path sound/pci/hda/patch_hdmi.c
