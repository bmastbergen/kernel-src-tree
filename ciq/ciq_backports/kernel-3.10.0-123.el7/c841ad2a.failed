ALSA: hda - Try to allow haswell HDMI audio even without powerwell

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [alsa] hda: Try to allow haswell HDMI audio even without powerwell (Jaroslav Kysela) [1044022]
Rebuild_FUZZ: 92.80%
commit-author David Henningsson <david.henningsson@canonical.com>
commit c841ad2a9b86c7317dc7e4fe4e03bc56a6c0d6e8
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/c841ad2a.failed

If compiled without CONFIG_SND_HDA_I915, the audio driver cannot
request power well. However, if the power well is on for other
reasons, maybe audio can still work. Therefore, do not skip the
card completely if compiled without CONFIG_SND_HDA_I915.

	Signed-off-by: David Henningsson <david.henningsson@canonical.com>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit c841ad2a9b86c7317dc7e4fe4e03bc56a6c0d6e8)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/pci/hda/hda_intel.c
diff --cc sound/pci/hda/hda_intel.c
index cfca97ee3127,c6c98298ac39..000000000000
--- a/sound/pci/hda/hda_intel.c
+++ b/sound/pci/hda/hda_intel.c
@@@ -3785,6 -3852,19 +3785,21 @@@ static int azx_probe_continue(struct az
  	int dev = chip->dev_index;
  	int err;
  
++<<<<<<< HEAD
++=======
+ 	/* Request power well for Haswell HDA controller and codec */
+ 	if (chip->driver_caps & AZX_DCAPS_I915_POWERWELL) {
+ #ifdef CONFIG_SND_HDA_I915
+ 		err = hda_i915_init();
+ 		if (err < 0) {
+ 			snd_printk(KERN_ERR SFX "Error request power-well from i915\n");
+ 			goto out_free;
+ 		}
+ #endif
+ 		hda_display_power(true);
+ 	}
+ 
++>>>>>>> c841ad2a9b86 (ALSA: hda - Try to allow haswell HDMI audio even without powerwell)
  	err = azx_first_init(chip);
  	if (err < 0)
  		goto out_free;
* Unmerged path sound/pci/hda/hda_intel.c
