nfs: handle servers that support only ALLOW ACE type.

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [fs] nfs: handle servers that support only ALLOW ACE type (Steve Dickson) [1059241 919382]
Rebuild_FUZZ: 99.05%
commit-author Malahal Naineni <malahal@us.ibm.com>
commit 7dd7d95916fe7c8494aa8708204d5a2b8689d270
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/7dd7d959.failed

Currently we support ACLs if the NFS server file system supports both
ALLOW and DENY ACE types. This patch makes the Linux client work with
ACLs even if the server supports only 'ALLOW' ACE type.

	Signed-off-by: Malahal Naineni <malahal@us.ibm.com>
	Signed-off-by: Trond Myklebust <trond.myklebust@primarydata.com>
(cherry picked from commit 7dd7d95916fe7c8494aa8708204d5a2b8689d270)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/nfs/nfs4proc.c
diff --cc fs/nfs/nfs4proc.c
index 72a1ffb66b55,ed10d0d4f860..000000000000
--- a/fs/nfs/nfs4proc.c
+++ b/fs/nfs/nfs4proc.c
@@@ -2532,8 -2742,10 +2532,15 @@@ static int _nfs4_server_capabilities(st
  				NFS_CAP_SYMLINKS|NFS_CAP_FILEID|
  				NFS_CAP_MODE|NFS_CAP_NLINK|NFS_CAP_OWNER|
  				NFS_CAP_OWNER_GROUP|NFS_CAP_ATIME|
++<<<<<<< HEAD
 +				NFS_CAP_CTIME|NFS_CAP_MTIME);
 +		if (res.attr_bitmask[0] & FATTR4_WORD0_ACL)
++=======
+ 				NFS_CAP_CTIME|NFS_CAP_MTIME|
+ 				NFS_CAP_SECURITY_LABEL);
+ 		if (res.attr_bitmask[0] & FATTR4_WORD0_ACL &&
+ 				res.acl_bitmask & ACL4_SUPPORT_ALLOW_ACL)
++>>>>>>> 7dd7d95916fe (nfs: handle servers that support only ALLOW ACE type.)
  			server->caps |= NFS_CAP_ACLS;
  		if (res.has_links != 0)
  			server->caps |= NFS_CAP_HARDLINKS;
* Unmerged path fs/nfs/nfs4proc.c
