net: remove last caller of skb_tail_offset() and itself

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
Rebuild_CHGLOG: - [net] remove last caller of skb_tail_offset() and itself (Jiri Pirko) [1068666]
Rebuild_FUZZ: 95.24%
commit-author Cong Wang <amwang@redhat.com>
commit 30f3a40f9a2a2869a560a9cb9ef488d10c803e14
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/30f3a40f.failed

Similar to the following commits:

commit 00f97da17a0c8d656d0c9 (netpoll: fix position of network header)
commit 525cebedb32a87fa48584 (pktgen: Fix position of ip and udp header)

using skb_tail_offset() seems not correct since the offset
is based on head pointer.

With the last caller removed, skb_tail_offset() can be killed
finally.

	Cc: Thomas Graf <tgraf@suug.ch>
	Cc: Daniel Borkmann <dborkmann@redhat.com>
	Cc: David S. Miller <davem@davemloft.net>
	Signed-off-by: Cong Wang <amwang@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 30f3a40f9a2a2869a560a9cb9ef488d10c803e14)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/linux/skbuff.h
#	net/ipv4/ipmr.c
diff --cc include/linux/skbuff.h
index 68e9d4dbcf3b,a7393adea0b5..000000000000
--- a/include/linux/skbuff.h
+++ b/include/linux/skbuff.h
@@@ -1392,6 -1395,7 +1392,10 @@@ static inline void skb_set_tail_pointer
  	skb_reset_tail_pointer(skb);
  	skb->tail += offset;
  }
++<<<<<<< HEAD
++=======
+ 
++>>>>>>> 30f3a40f9a2a (net: remove last caller of skb_tail_offset() and itself)
  #else /* NET_SKBUFF_DATA_USES_OFFSET */
  static inline unsigned char *skb_tail_pointer(const struct sk_buff *skb)
  {
diff --cc net/ipv4/ipmr.c
index 9d9610ae7855,132a09664704..000000000000
--- a/net/ipv4/ipmr.c
+++ b/net/ipv4/ipmr.c
@@@ -980,7 -980,7 +980,11 @@@ static int ipmr_cache_report(struct mr_
  
  	/* Copy the IP header */
  
++<<<<<<< HEAD
 +	skb->network_header = skb->tail;
++=======
+ 	skb_set_network_header(skb, skb->len);
++>>>>>>> 30f3a40f9a2a (net: remove last caller of skb_tail_offset() and itself)
  	skb_put(skb, ihl);
  	skb_copy_to_linear_data(skb, pkt->data, ihl);
  	ip_hdr(skb)->protocol = 0;	/* Flag to the kernel this is a route add */
* Unmerged path include/linux/skbuff.h
* Unmerged path net/ipv4/ipmr.c
