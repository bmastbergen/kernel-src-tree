GFS2: d_splice_alias() can't return error

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-123.el7
commit-author Miklos Szeredi <mszeredi@suse.cz>
commit 0d0d110720d7960b77c03c9f2597faaff4b484ae
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-123.el7/0d0d1107.failed

unless it was given an IS_ERR(inode), which isn't the case here.  So clean
up the unnecessary error handling in gfs2_create_inode().

This paves the way for real fixes (hence the stable Cc).

	Signed-off-by: Miklos Szeredi <mszeredi@suse.cz>
	Signed-off-by: Steven Whitehouse <swhiteho@redhat.com>
	Cc: stable@vger.kernel.org
(cherry picked from commit 0d0d110720d7960b77c03c9f2597faaff4b484ae)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/gfs2/inode.c
diff --cc fs/gfs2/inode.c
index 06ca4e826edd,6d7f976aa328..000000000000
--- a/fs/gfs2/inode.c
+++ b/fs/gfs2/inode.c
@@@ -593,6 -579,25 +593,28 @@@ static int gfs2_create_inode(struct ino
  	if (error)
  		goto fail_gunlock;
  
++<<<<<<< HEAD
++=======
+ 	inode = gfs2_dir_search(dir, &dentry->d_name, !S_ISREG(mode) || excl);
+ 	error = PTR_ERR(inode);
+ 	if (!IS_ERR(inode)) {
+ 		d = d_splice_alias(inode, dentry);
+ 		error = 0;
+ 		if (file) {
+ 			if (d == NULL)
+ 				d = dentry;
+ 			if (S_ISREG(inode->i_mode))
+ 				error = finish_open(file, d, gfs2_open_common, opened);
+ 			else
+ 				error = finish_no_open(file, d);
+ 		}
+ 		gfs2_glock_dq_uninit(ghs);
+ 		return error;
+ 	} else if (error != -ENOENT) {
+ 		goto fail_gunlock;
+ 	}
+ 
++>>>>>>> 0d0d110720d7 (GFS2: d_splice_alias() can't return error)
  	arq = error = gfs2_diradd_alloc_required(dir, name);
  	if (error < 0)
  		goto fail_gunlock;
* Unmerged path fs/gfs2/inode.c
