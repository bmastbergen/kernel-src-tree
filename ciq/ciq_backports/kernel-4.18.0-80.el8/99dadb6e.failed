selftests/bpf: add test for multiple programs

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-80.el8
commit-author Jakub Kicinski <jakub.kicinski@netronome.com>
commit 99dadb6e3ec130800d199ec42fff03242b1be1eb
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-80.el8/99dadb6e.failed

Add tests for having an XDP program attached in the driver and
another one attached in HW simultaneously.

	Signed-off-by: Jakub Kicinski <jakub.kicinski@netronome.com>
	Reviewed-by: Quentin Monnet <quentin.monnet@netronome.com>
	Signed-off-by: Daniel Borkmann <daniel@iogearbox.net>
(cherry picked from commit 99dadb6e3ec130800d199ec42fff03242b1be1eb)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/testing/selftests/bpf/test_offload.py
diff --cc tools/testing/selftests/bpf/test_offload.py
index be800d0e7a84,b746227eaff2..000000000000
--- a/tools/testing/selftests/bpf/test_offload.py
+++ b/tools/testing/selftests/bpf/test_offload.py
@@@ -814,10 -819,10 +819,17 @@@ try
           "Device parameters reported for non-offloaded program")
  
      start_test("Test XDP prog replace with bad flags...")
++<<<<<<< HEAD
 +    ret, _, err = sim.set_xdp(obj, "offload", force=True,
 +                              fail=False, include_stderr=True)
 +    fail(ret == 0, "Replaced XDP program with a program in different mode")
 +    check_extack_nsim(err, "program loaded with different flags.", args)
++=======
+     ret, _, err = sim.set_xdp(obj, "generic", force=True,
+                               fail=False, include_stderr=True)
+     fail(ret == 0, "Replaced XDP program with a program in different mode")
+     fail(err.count("File exists") != 1, "Replaced driver XDP with generic")
++>>>>>>> 99dadb6e3ec1 (selftests/bpf: add test for multiple programs)
      ret, _, err = sim.set_xdp(obj, "", force=True,
                                fail=False, include_stderr=True)
      fail(ret == 0, "Replaced XDP program with a program in different mode")
* Unmerged path tools/testing/selftests/bpf/test_offload.py
