nfp: flower: reject tunnel encap with ipv6 outer headers for offloading

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-80.el8
commit-author Louis Peens <louis.peens@netronome.com>
commit 224de549f0beca58fb95c0b8da9cb2bfa8c6cc12
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-80.el8/224de549.failed

This fixes a bug where ipv6 tunnels would report that it is
getting offloaded to hardware but would actually be rejected
by hardware.

Fixes: b27d6a95a70d ("nfp: compile flower vxlan tunnel set actions")
	Signed-off-by: Louis Peens <louis.peens@netronome.com>
	Reviewed-by: John Hurley <john.hurley@netronome.com>
	Reviewed-by: Simon Horman <simon.horman@netronome.com>
	Reviewed-by: Jakub Kicinski <jakub.kicinski@netronome.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 224de549f0beca58fb95c0b8da9cb2bfa8c6cc12)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/netronome/nfp/flower/action.c
diff --cc drivers/net/ethernet/netronome/nfp/flower/action.c
index c881440e89f0,46ba0cf257c6..000000000000
--- a/drivers/net/ethernet/netronome/nfp/flower/action.c
+++ b/drivers/net/ethernet/netronome/nfp/flower/action.c
@@@ -45,6 -46,17 +45,20 @@@
  #include "main.h"
  #include "../nfp_net_repr.h"
  
++<<<<<<< HEAD
++=======
+ /* The kernel versions of TUNNEL_* are not ABI and therefore vulnerable
+  * to change. Such changes will break our FW ABI.
+  */
+ #define NFP_FL_TUNNEL_CSUM			cpu_to_be16(0x01)
+ #define NFP_FL_TUNNEL_KEY			cpu_to_be16(0x04)
+ #define NFP_FL_TUNNEL_GENEVE_OPT		cpu_to_be16(0x0800)
+ #define NFP_FL_SUPPORTED_TUNNEL_INFO_FLAGS	IP_TUNNEL_INFO_TX
+ #define NFP_FL_SUPPORTED_IPV4_UDP_TUN_FLAGS	(NFP_FL_TUNNEL_CSUM | \
+ 						 NFP_FL_TUNNEL_KEY | \
+ 						 NFP_FL_TUNNEL_GENEVE_OPT)
+ 
++>>>>>>> 224de549f0be (nfp: flower: reject tunnel encap with ipv6 outer headers for offloading)
  static void nfp_fl_pop_vlan(struct nfp_fl_pop_vlan *pop_vlan)
  {
  	size_t act_size = sizeof(struct nfp_fl_pop_vlan);
* Unmerged path drivers/net/ethernet/netronome/nfp/flower/action.c
