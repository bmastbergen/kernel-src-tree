net/mlx5: Reorganize the makefile

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-80.el8
commit-author Saeed Mahameed <saeedm@mellanox.com>
commit a8274b854b5e7c78187d7b9eaf701e1f6e1ccfcb
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-80.el8/a8274b85.failed

Reorganize the Makefile and group files together according to their
functionality and importance.

	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
(cherry picked from commit a8274b854b5e7c78187d7b9eaf701e1f6e1ccfcb)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/Makefile
diff --cc drivers/net/ethernet/mellanox/mlx5/core/Makefile
index 4ff226a37f16,d324a3884462..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/Makefile
+++ b/drivers/net/ethernet/mellanox/mlx5/core/Makefile
@@@ -5,29 -14,48 +14,60 @@@ obj-$(CONFIG_MLX5_CORE) += mlx5_core.
  mlx5_core-y :=	main.o cmd.o debugfs.o fw.o eq.o uar.o pagealloc.o \
  		health.o mcg.o cq.o srq.o alloc.o qp.o port.o mr.o pd.o \
  		mad.o transobj.o vport.o sriov.o fs_cmd.o fs_core.o \
 -		fs_counters.o rl.o lag.o dev.o wq.o lib/gid.o  \
 -		diag/fs_tracepoint.o diag/fw_tracer.o
 +		fs_counters.o rl.o lag.o dev.o wq.o lib/gid.o lib/clock.o \
 +		diag/fs_tracepoint.o
  
++<<<<<<< HEAD
 +mlx5_core-$(CONFIG_MLX5_ACCEL) += accel/ipsec.o accel/tls.o
 +
 +mlx5_core-$(CONFIG_MLX5_FPGA) += fpga/cmd.o fpga/core.o fpga/conn.o fpga/sdk.o \
 +		fpga/ipsec.o fpga/tls.o
 +
++=======
+ #
+ # Netdev basic
+ #
++>>>>>>> a8274b854b5e (net/mlx5: Reorganize the makefile)
  mlx5_core-$(CONFIG_MLX5_CORE_EN) += en_main.o en_common.o en_fs.o en_ethtool.o \
 -		en_tx.o en_rx.o en_dim.o en_txrx.o en/xdp.o en_stats.o \
 -		en_selftest.o en/port.o
 +		en_tx.o en_rx.o en_dim.o en_txrx.o en/xdp.o en_stats.o vxlan.o \
 +		en_arfs.o en_fs_ethtool.o en_selftest.o en/port.o
  
++<<<<<<< HEAD
 +mlx5_core-$(CONFIG_MLX5_MPFS) += lib/mpfs.o
++=======
+ #
+ # Netdev extra
+ #
+ mlx5_core-$(CONFIG_MLX5_EN_ARFS)     += en_arfs.o
+ mlx5_core-$(CONFIG_MLX5_EN_RXNFC)    += en_fs_ethtool.o
+ mlx5_core-$(CONFIG_MLX5_CORE_EN_DCB) += en_dcbnl.o en/port_buffer.o
+ mlx5_core-$(CONFIG_MLX5_ESWITCH)     += en_rep.o en_tc.o
++>>>>>>> a8274b854b5e (net/mlx5: Reorganize the makefile)
  
- mlx5_core-$(CONFIG_MLX5_ESWITCH) += eswitch.o eswitch_offloads.o en_rep.o en_tc.o
- 
- mlx5_core-$(CONFIG_MLX5_CORE_EN_DCB) +=  en_dcbnl.o en/port_buffer.o
+ #
+ # Core extra
+ #
+ mlx5_core-$(CONFIG_MLX5_ESWITCH)   += eswitch.o eswitch_offloads.o
+ mlx5_core-$(CONFIG_MLX5_MPFS)      += lib/mpfs.o
+ mlx5_core-$(CONFIG_VXLAN)          += lib/vxlan.o
+ mlx5_core-$(CONFIG_PTP_1588_CLOCK) += lib/clock.o
  
+ #
+ # Ipoib netdev
+ #
  mlx5_core-$(CONFIG_MLX5_CORE_IPOIB) += ipoib/ipoib.o ipoib/ethtool.o ipoib/ipoib_vlan.o
  
+ #
+ # Accelerations & FPGA
+ #
+ mlx5_core-$(CONFIG_MLX5_ACCEL) += accel/ipsec.o accel/tls.o
+ 
+ mlx5_core-$(CONFIG_MLX5_FPGA) += fpga/cmd.o fpga/core.o fpga/conn.o fpga/sdk.o \
+ 				 fpga/ipsec.o fpga/tls.o
+ 
  mlx5_core-$(CONFIG_MLX5_EN_IPSEC) += en_accel/ipsec.o en_accel/ipsec_rxtx.o \
- 		en_accel/ipsec_stats.o
+ 				     en_accel/ipsec_stats.o
  
- mlx5_core-$(CONFIG_MLX5_EN_TLS) +=  en_accel/tls.o en_accel/tls_rxtx.o en_accel/tls_stats.o
+ mlx5_core-$(CONFIG_MLX5_EN_TLS) += en_accel/tls.o en_accel/tls_rxtx.o en_accel/tls_stats.o
  
  CFLAGS_tracepoint.o := -I$(src)
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/Makefile
