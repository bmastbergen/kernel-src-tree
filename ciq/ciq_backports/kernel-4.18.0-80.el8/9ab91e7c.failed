arm64: default to the direct mapping in get_arch_dma_ops

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-80.el8
commit-author Christoph Hellwig <hch@lst.de>
commit 9ab91e7c5c514b675470d9b57393cbe455722060
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-80.el8/9ab91e7c.failed

Otherwise the direct mapping won't work at all given that a NULL
dev->dma_ops causes a fallback.  Note that we already explicitly set
dev->dma_ops to dma_dummy_ops for dma-incapable devices, so this
fallback should not be needed anyway.

Fixes: 356da6d0cd ("dma-mapping: bypass indirect calls for dma-direct")
	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Reported-by: Marek Szyprowski <m.szyprowski@samsung.com>
	Tested-by: Marek Szyprowski <m.szyprowski@samsung.com>
	Reviewed-by: Robin Murphy <robin.murphy@arm.com>
(cherry picked from commit 9ab91e7c5c514b675470d9b57393cbe455722060)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/arm64/include/asm/dma-mapping.h
diff --cc arch/arm64/include/asm/dma-mapping.h
index b7847eb8a7bb,95dbf3ef735a..000000000000
--- a/arch/arm64/include/asm/dma-mapping.h
+++ b/arch/arm64/include/asm/dma-mapping.h
@@@ -24,15 -24,9 +24,19 @@@
  #include <xen/xen.h>
  #include <asm/xen/hypervisor.h>
  
 +extern const struct dma_map_ops dummy_dma_ops;
 +
  static inline const struct dma_map_ops *get_arch_dma_ops(struct bus_type *bus)
  {
++<<<<<<< HEAD
 +	/*
 +	 * We expect no ISA devices, and all other DMA masters are expected to
 +	 * have someone call arch_setup_dma_ops at device creation time.
 +	 */
 +	return &dummy_dma_ops;
++=======
+ 	return NULL;
++>>>>>>> 9ab91e7c5c51 (arm64: default to the direct mapping in get_arch_dma_ops)
  }
  
  void arch_setup_dma_ops(struct device *dev, u64 dma_base, u64 size,
* Unmerged path arch/arm64/include/asm/dma-mapping.h
