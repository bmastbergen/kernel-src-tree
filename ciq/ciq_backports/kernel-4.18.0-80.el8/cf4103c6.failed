net: hns3: Fix for using wrong mask and shift in hclge_get_ring_chain_from_mbx

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-80.el8
commit-author Fuyun Liang <liangfuyun1@huawei.com>
commit cf4103c699c2b3dd88bea169f47ad75d872b4a80
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-80.el8/cf4103c6.failed

HCLGE_INT_GL_IDX_M and HCLGE_INT_GL_IDX_S are used to set fireware
cmd. When getting int_gl value from mailbox message, we should use
HNAE3_RING_GL_IDX_M and HNAE3_RING_GL_IDX_S.

Fixes: 79eee4108541 ("net: hns3: add int_gl_idx setup for VF")
	Signed-off-by: Fuyun Liang <liangfuyun1@huawei.com>
	Signed-off-by: Peng Li <lipeng321@huawei.com>
	Signed-off-by: Salil Mehta <salil.mehta@huawei.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit cf4103c699c2b3dd88bea169f47ad75d872b4a80)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_mbx.c
diff --cc drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_mbx.c
index 7541cb9b71ce,9d36bccde31b..000000000000
--- a/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_mbx.c
+++ b/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_mbx.c
@@@ -128,12 -128,12 +128,18 @@@ static int hclge_get_ring_chain_from_mb
  		HCLGE_MBX_RING_NODE_VARIABLE_NUM))
  		return -ENOMEM;
  
 -	hnae3_set_bit(ring_chain->flag, HNAE3_RING_TYPE_B, req->msg[3]);
 +	hnae_set_bit(ring_chain->flag, HNAE3_RING_TYPE_B, req->msg[3]);
  	ring_chain->tqp_index =
  			hclge_get_queue_id(vport->nic.kinfo.tqp[req->msg[4]]);
++<<<<<<< HEAD
 +	hnae_set_field(ring_chain->int_gl_idx, HCLGE_INT_GL_IDX_M,
 +		       HCLGE_INT_GL_IDX_S,
 +		       req->msg[5]);
++=======
+ 	hnae3_set_field(ring_chain->int_gl_idx, HNAE3_RING_GL_IDX_M,
+ 			HNAE3_RING_GL_IDX_S,
+ 			req->msg[5]);
++>>>>>>> cf4103c699c2 (net: hns3: Fix for using wrong mask and shift in hclge_get_ring_chain_from_mbx)
  
  	cur_chain = ring_chain;
  
@@@ -151,10 -151,10 +157,17 @@@
  			[req->msg[HCLGE_MBX_RING_NODE_VARIABLE_NUM * i +
  			HCLGE_MBX_RING_MAP_BASIC_MSG_NUM + 1]]);
  
++<<<<<<< HEAD
 +		hnae_set_field(new_chain->int_gl_idx, HCLGE_INT_GL_IDX_M,
 +			       HCLGE_INT_GL_IDX_S,
 +			       req->msg[HCLGE_MBX_RING_NODE_VARIABLE_NUM * i +
 +			       HCLGE_MBX_RING_MAP_BASIC_MSG_NUM + 2]);
++=======
+ 		hnae3_set_field(new_chain->int_gl_idx, HNAE3_RING_GL_IDX_M,
+ 				HNAE3_RING_GL_IDX_S,
+ 				req->msg[HCLGE_MBX_RING_NODE_VARIABLE_NUM * i +
+ 				HCLGE_MBX_RING_MAP_BASIC_MSG_NUM + 2]);
++>>>>>>> cf4103c699c2 (net: hns3: Fix for using wrong mask and shift in hclge_get_ring_chain_from_mbx)
  
  		cur_chain->next = new_chain;
  		cur_chain = new_chain;
* Unmerged path drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_mbx.c
