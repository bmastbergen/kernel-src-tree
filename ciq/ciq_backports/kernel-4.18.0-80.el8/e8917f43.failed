net: sched: act_gact: remove dependency on rtnl lock

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-80.el8
Rebuild_CHGLOG: - [net] sched: act_gact: remove dependency on rtnl lock (Ivan Vecera) [1638022]
Rebuild_FUZZ: 94.95%
commit-author Vlad Buslov <vladbu@mellanox.com>
commit e8917f437006686b8fa1b9e54f31d7abc0ea7e97
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-80.el8/e8917f43.failed

Use tcf spinlock to protect gact action private state from concurrent
modification during dump and init. Remove rtnl assertion that is no longer
necessary.

	Signed-off-by: Vlad Buslov <vladbu@mellanox.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit e8917f437006686b8fa1b9e54f31d7abc0ea7e97)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/sched/act_gact.c
diff --cc net/sched/act_gact.c
index ea5ed2de5910,bfccd34a3968..000000000000
--- a/net/sched/act_gact.c
+++ b/net/sched/act_gact.c
@@@ -170,9 -178,8 +172,14 @@@ static int tcf_gact_dump(struct sk_buf
  	struct tcf_gact *gact = to_gact(a);
  	struct tc_gact opt = {
  		.index   = gact->tcf_index,
++<<<<<<< HEAD
 +		.refcnt  = gact->tcf_refcnt - ref,
 +		.bindcnt = gact->tcf_bindcnt - bind,
 +		.action  = gact->tcf_action,
++=======
+ 		.refcnt  = refcount_read(&gact->tcf_refcnt) - ref,
+ 		.bindcnt = atomic_read(&gact->tcf_bindcnt) - bind,
++>>>>>>> e8917f437006 (net: sched: act_gact: remove dependency on rtnl lock)
  	};
  	struct tcf_t t;
  
* Unmerged path net/sched/act_gact.c
