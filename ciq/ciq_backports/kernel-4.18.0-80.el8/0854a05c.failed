rcu: Remove rsp parameter from rcu_gp_kthread() and friends

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-80.el8
commit-author Paul E. McKenney <paulmck@linux.vnet.ibm.com>
commit 0854a05c9fa554930174f0fa7453c18f99108a4a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-80.el8/0854a05c.failed

There now is only one rcu_state structure in a given build of the
Linux kernel, so there is no need to pass it as a parameter to RCU's
functions.  This commit therefore removes the rsp parameter from
rcu_gp_init(), rcu_gp_fqs_check_wake(), rcu_gp_fqs(), rcu_gp_cleanup(),
and rcu_gp_kthread().

	Signed-off-by: Paul E. McKenney <paulmck@linux.vnet.ibm.com>
(cherry picked from commit 0854a05c9fa554930174f0fa7453c18f99108a4a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	kernel/rcu/tree.c
diff --cc kernel/rcu/tree.c
index 259124e06a76,af4aeaaee046..000000000000
--- a/kernel/rcu/tree.c
+++ b/kernel/rcu/tree.c
@@@ -1960,10 -1961,10 +1961,10 @@@ static bool rcu_gp_init(void
  }
  
  /*
 - * Helper function for swait_event_idle_exclusive() wakeup at force-quiescent-state
 + * Helper function for swait_event_idle() wakeup at force-quiescent-state
   * time.
   */
- static bool rcu_gp_fqs_check_wake(struct rcu_state *rsp, int *gfp)
+ static bool rcu_gp_fqs_check_wake(int *gfp)
  {
  	struct rcu_node *rnp = rcu_get_root();
  
@@@ -2136,8 -2139,8 +2139,13 @@@ static int __noreturn rcu_gp_kthread(vo
  					       READ_ONCE(rsp->gp_seq),
  					       TPS("fqswait"));
  			rsp->gp_state = RCU_GP_WAIT_FQS;
++<<<<<<< HEAD
 +			ret = swait_event_idle_timeout(rsp->gp_wq,
 +					rcu_gp_fqs_check_wake(rsp, &gf), j);
++=======
+ 			ret = swait_event_idle_timeout_exclusive(rsp->gp_wq,
+ 					rcu_gp_fqs_check_wake(&gf), j);
++>>>>>>> 0854a05c9fa5 (rcu: Remove rsp parameter from rcu_gp_kthread() and friends)
  			rsp->gp_state = RCU_GP_DOING_FQS;
  			/* Locking provides needed memory barriers. */
  			/* If grace period done, leave loop. */
* Unmerged path kernel/rcu/tree.c
