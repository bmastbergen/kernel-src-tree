iommu/vt-d: remove the mapping_error dma_map_ops method

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-80.el8
commit-author Christoph Hellwig <hch@lst.de>
commit 524a669bdd5ff45cb927f0c524ed4e7a4fb3650b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-80.el8/524a669b.failed

Return DMA_MAPPING_ERROR instead of 0 on a dma mapping failure and let
the core dma-mapping code handle the rest.

	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Acked-by: Linus Torvalds <torvalds@linux-foundation.org>
(cherry picked from commit 524a669bdd5ff45cb927f0c524ed4e7a4fb3650b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/iommu/intel-iommu.c
diff --cc drivers/iommu/intel-iommu.c
index b8ab57ce970b,0ad67d65bbce..000000000000
--- a/drivers/iommu/intel-iommu.c
+++ b/drivers/iommu/intel-iommu.c
@@@ -3885,22 -3865,14 +3885,29 @@@ static int intel_map_sg(struct device *
  	return nelems;
  }
  
++<<<<<<< HEAD
 +static int intel_mapping_error(struct device *dev, dma_addr_t dma_addr)
 +{
 +	return !dma_addr;
 +}
 +
 +const struct dma_map_ops intel_dma_ops = {
++=======
+ static const struct dma_map_ops intel_dma_ops = {
++>>>>>>> 524a669bdd5f (iommu/vt-d: remove the mapping_error dma_map_ops method)
  	.alloc = intel_alloc_coherent,
  	.free = intel_free_coherent,
  	.map_sg = intel_map_sg,
  	.unmap_sg = intel_unmap_sg,
  	.map_page = intel_map_page,
  	.unmap_page = intel_unmap_page,
++<<<<<<< HEAD
 +	.mapping_error = intel_mapping_error,
 +#ifdef CONFIG_X86
++=======
++>>>>>>> 524a669bdd5f (iommu/vt-d: remove the mapping_error dma_map_ops method)
  	.dma_supported = dma_direct_supported,
 +#endif
  };
  
  static inline int iommu_domain_cache_init(void)
* Unmerged path drivers/iommu/intel-iommu.c
