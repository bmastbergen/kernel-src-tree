mt76: remove MT76_STATE_PM in tx path

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-315.el8
commit-author Lorenzo Bianconi <lorenzo@kernel.org>
commit 37a8648889f6aa398be67e254834372f5d5f8a78
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-315.el8/37a86488.failed

since tx/rx path is now relying pm ref counting, get rid of MT76_STATE_PM
check in the tx path

	Signed-off-by: Lorenzo Bianconi <lorenzo@kernel.org>
	Signed-off-by: Felix Fietkau <nbd@nbd.name>
(cherry picked from commit 37a8648889f6aa398be67e254834372f5d5f8a78)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/wireless/mediatek/mt76/tx.c
diff --cc drivers/net/wireless/mediatek/mt76/tx.c
index a3689d8e2307,236eaa351f53..000000000000
--- a/drivers/net/wireless/mediatek/mt76/tx.c
+++ b/drivers/net/wireless/mediatek/mt76/tx.c
@@@ -454,17 -459,17 +453,28 @@@ mt76_txq_schedule_list(struct mt76_phy 
  	struct mt76_wcid *wcid;
  	int ret = 0;
  
 +	spin_lock_bh(&q->lock);
  	while (1) {
++<<<<<<< HEAD
 +		if (test_bit(MT76_STATE_PM, &phy->state) ||
 +		    test_bit(MT76_RESET, &phy->state)) {
 +			ret = -EBUSY;
 +			break;
++=======
+ 		int n_frames = 0;
+ 
+ 		if (test_bit(MT76_RESET, &phy->state))
+ 			return -EBUSY;
+ 
+ 		if (dev->queue_ops->tx_cleanup &&
+ 		    q->queued + 2 * MT_TXQ_FREE_THR >= q->ndesc) {
+ 			dev->queue_ops->tx_cleanup(dev, q, false);
++>>>>>>> 37a8648889f6 (mt76: remove MT76_STATE_PM in tx path)
  		}
  
 +		if (mt76_txq_stopped(q))
 +			break;
 +
  		txq = ieee80211_next_txq(phy->hw, qid);
  		if (!txq)
  			break;
* Unmerged path drivers/net/wireless/mediatek/mt76/tx.c
