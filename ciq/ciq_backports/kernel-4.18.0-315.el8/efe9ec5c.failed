mt76: connac: remove MT76_STATE_PM in mac_tx_free

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-315.el8
commit-author Lorenzo Bianconi <lorenzo@kernel.org>
commit efe9ec5cec38181bf4faa871c73b63c4d25efef0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-315.el8/efe9ec5c.failed

Get rid of MT76_STATE_PM chec in mt7615_mac_tx_free and
mt7921_mac_tx_free since we already rely on mt76_connac_pm_unref in the
NAPI callback.
Remove mt76_connac_power_save_sched calls in mt7615_mac_tx_free and
mt7921_mac_tx_free

	Signed-off-by: Lorenzo Bianconi <lorenzo@kernel.org>
	Signed-off-by: Felix Fietkau <nbd@nbd.name>
(cherry picked from commit efe9ec5cec38181bf4faa871c73b63c4d25efef0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/wireless/mediatek/mt76/mt7615/mac.c
#	drivers/net/wireless/mediatek/mt76/mt7921/mac.c
diff --cc drivers/net/wireless/mediatek/mt76/mt7615/mac.c
index 1b8b80e3739d,ad1e236727cb..000000000000
--- a/drivers/net/wireless/mediatek/mt76/mt7615/mac.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7615/mac.c
@@@ -1495,7 -1518,6 +1492,10 @@@ static void mt7615_mac_tx_free(struct m
  	mt7615_mac_sta_poll(dev);
  	rcu_read_unlock();
  
++<<<<<<< HEAD
 +	mt7615_pm_power_save_sched(dev);
++=======
++>>>>>>> efe9ec5cec38 (mt76: connac: remove MT76_STATE_PM in mac_tx_free)
  	mt76_worker_schedule(&dev->mt76.tx_worker);
  }
  
diff --cc drivers/net/wireless/mediatek/mt76/mt7921/mac.c
index bcbd59a23f9b,a8247a6d5bc7..000000000000
--- a/drivers/net/wireless/mediatek/mt76/mt7921/mac.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7921/mac.c
@@@ -1010,6 -1042,9 +1010,12 @@@ void mt7921_mac_tx_free(struct mt7921_d
  		skb_list_del_init(skb);
  		napi_consume_skb(skb, 1);
  	}
++<<<<<<< HEAD
++=======
+ 
+ 	mt7921_mac_sta_poll(dev);
+ 	mt76_worker_schedule(&dev->mt76.tx_worker);
++>>>>>>> efe9ec5cec38 (mt76: connac: remove MT76_STATE_PM in mac_tx_free)
  }
  
  void mt7921_tx_complete_skb(struct mt76_dev *mdev, struct mt76_queue_entry *e)
* Unmerged path drivers/net/wireless/mediatek/mt76/mt7615/mac.c
* Unmerged path drivers/net/wireless/mediatek/mt76/mt7921/mac.c
