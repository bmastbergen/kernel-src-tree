mt76: mt7921: check mcu returned values in mt7921_start

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-315.el8
commit-author Lorenzo Bianconi <lorenzo@kernel.org>
commit f92f81d35ac26f8a519866f1b561743fe70e33a5
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-315.el8/f92f81d3.failed

Properly check returned values from mcu utility routines in
mt7921_start.

	Signed-off-by: Lorenzo Bianconi <lorenzo@kernel.org>
	Signed-off-by: Felix Fietkau <nbd@nbd.name>
(cherry picked from commit f92f81d35ac26f8a519866f1b561743fe70e33a5)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/wireless/mediatek/mt76/mt7921/main.c
diff --cc drivers/net/wireless/mediatek/mt76/mt7921/main.c
index 8d5583df8b4e,043dd77bdbe7..000000000000
--- a/drivers/net/wireless/mediatek/mt76/mt7921/main.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7921/main.c
@@@ -173,21 -173,31 +173,44 @@@ static int mt7921_start(struct ieee8021
  {
  	struct mt7921_dev *dev = mt7921_hw_dev(hw);
  	struct mt7921_phy *phy = mt7921_hw_phy(hw);
+ 	int err;
  
++<<<<<<< HEAD
 +	mutex_lock(&dev->mt76.mutex);
 +
 +	mt7921_mcu_set_mac(dev, 0, true, false);
 +	mt7921_mcu_set_channel_domain(phy);
 +	mt7921_mcu_set_chan_info(phy, MCU_EXT_CMD_SET_RX_PATH);
++=======
+ 	mt7921_mutex_acquire(dev);
+ 
+ 	err = mt76_connac_mcu_set_mac_enable(&dev->mt76, 0, true, false);
+ 	if (err)
+ 		goto out;
+ 
+ 	err = mt76_connac_mcu_set_channel_domain(phy->mt76);
+ 	if (err)
+ 		goto out;
+ 
+ 	err = mt7921_mcu_set_chan_info(phy, MCU_EXT_CMD_SET_RX_PATH);
+ 	if (err)
+ 		goto out;
+ 
++>>>>>>> f92f81d35ac2 (mt76: mt7921: check mcu returned values in mt7921_start)
  	mt7921_mac_reset_counters(phy);
  	set_bit(MT76_STATE_RUNNING, &phy->mt76->state);
  
  	ieee80211_queue_delayed_work(hw, &phy->mt76->mac_work,
  				     MT7921_WATCHDOG_TIME);
++<<<<<<< HEAD
 +
 +	mutex_unlock(&dev->mt76.mutex);
++=======
+ out:
+ 	mt7921_mutex_release(dev);
++>>>>>>> f92f81d35ac2 (mt76: mt7921: check mcu returned values in mt7921_start)
  
- 	return 0;
+ 	return err;
  }
  
  static void mt7921_stop(struct ieee80211_hw *hw)
* Unmerged path drivers/net/wireless/mediatek/mt76/mt7921/main.c
