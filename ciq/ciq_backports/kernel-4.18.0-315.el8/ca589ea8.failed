s390/idle: fix suspicious RCU usage

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-315.el8
commit-author Peter Zijlstra <peterz@infradead.org>
commit ca589ea8d1b64938329c016a5c07fc2eea985712
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-315.el8/ca589ea8.failed

After commit eb1f00237aca ("lockdep,trace: Expose tracepoints") the
lock tracepoints are visible to lockdep and RCU-lockdep is finding a
bunch more RCU violations that were previously hidden.

Switch the idle->seqcount over to using raw_write_*() to avoid the
lockdep annotation and thus the lock tracepoints.

	Reported-by: Guenter Roeck <linux@roeck-us.net>
	Signed-off-by: Peter Zijlstra (Intel) <peterz@infradead.org>
	Signed-off-by: Heiko Carstens <hca@linux.ibm.com>
	Signed-off-by: Vasily Gorbik <gor@linux.ibm.com>
(cherry picked from commit ca589ea8d1b64938329c016a5c07fc2eea985712)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/s390/kernel/idle.c
diff --cc arch/s390/kernel/idle.c
index 8f8456816d83,f7f1e64e0d98..000000000000
--- a/arch/s390/kernel/idle.c
+++ b/arch/s390/kernel/idle.c
@@@ -33,13 -33,13 +33,17 @@@ void enabled_wait(void
  		PSW_MASK_IO | PSW_MASK_EXT | PSW_MASK_MCHECK;
  	clear_cpu_flag(CIF_NOHZ_DELAY);
  
 -	local_irq_save(flags);
  	/* Call the assembler magic in entry.S */
  	psw_idle(idle, psw_mask);
 -	local_irq_restore(flags);
 +
 +	trace_hardirqs_off();
  
  	/* Account time spent with enabled wait psw loaded as idle time. */
++<<<<<<< HEAD
 +	write_seqcount_begin(&idle->seqcount);
++=======
+ 	raw_write_seqcount_begin(&idle->seqcount);
++>>>>>>> ca589ea8d1b6 (s390/idle: fix suspicious RCU usage)
  	idle_time = idle->clock_idle_exit - idle->clock_idle_enter;
  	idle->clock_idle_enter = idle->clock_idle_exit = 0ULL;
  	idle->idle_time += idle_time;
* Unmerged path arch/s390/kernel/idle.c
