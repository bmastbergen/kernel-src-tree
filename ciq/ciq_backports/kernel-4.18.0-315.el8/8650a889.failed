md/raid10: extend r10bio devs to raid disks

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-315.el8
commit-author Xiao Ni <xni@redhat.com>
commit 8650a889017cb1f6ea6813ccf83a2e9f6fa49dd3
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-315.el8/8650a889.failed

Now it allocs r10bio->devs[conf->copies]. Discard bio needs to submit
to all member disks and it needs to use r10bio. So extend to
r10bio->devs[geo.raid_disks].

	Reviewed-by: Coly Li <colyli@suse.de>
	Signed-off-by: Xiao Ni <xni@redhat.com>
	Signed-off-by: Song Liu <songliubraving@fb.com>
(cherry picked from commit 8650a889017cb1f6ea6813ccf83a2e9f6fa49dd3)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/md/raid10.c
diff --cc drivers/md/raid10.c
index 0a0ceb929204,f2ec44fda1a0..000000000000
--- a/drivers/md/raid10.c
+++ b/drivers/md/raid10.c
@@@ -1527,8 -1492,7 +1526,12 @@@ static void __make_request(struct mdde
  	r10_bio->mddev = mddev;
  	r10_bio->sector = bio->bi_iter.bi_sector;
  	r10_bio->state = 0;
++<<<<<<< HEAD
 +	r10_bio->read_slot = -1;
 +	memset(r10_bio->devs, 0, sizeof(r10_bio->devs[0]) * conf->copies);
++=======
+ 	memset(r10_bio->devs, 0, sizeof(r10_bio->devs[0]) * conf->geo.raid_disks);
++>>>>>>> 8650a889017c (md/raid10: extend r10bio devs to raid disks)
  
  	if (bio_data_dir(bio) == READ)
  		raid10_read_request(mddev, bio, r10_bio);
* Unmerged path drivers/md/raid10.c
