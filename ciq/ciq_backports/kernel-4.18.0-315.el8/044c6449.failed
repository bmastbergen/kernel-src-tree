xfs: drop unused ioend private merge and setfilesize code

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-315.el8
commit-author Brian Foster <bfoster@redhat.com>
commit 044c6449f18f174ba8d86640936add3fc7582e49
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-315.el8/044c6449.failed

XFS no longer attaches anthing to ioend->io_private. Remove the
unnecessary ->io_private merging code. This removes the only remaining
user of xfs_setfilesize_ioend() so remove that function as well.

	Signed-off-by: Brian Foster <bfoster@redhat.com>
	Reviewed-by: Christoph Hellwig <hch@lst.de>
	Reviewed-by: Darrick J. Wong <djwong@kernel.org>
	Signed-off-by: Darrick J. Wong <djwong@kernel.org>
(cherry picked from commit 044c6449f18f174ba8d86640936add3fc7582e49)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/xfs/xfs_aops.c
diff --cc fs/xfs/xfs_aops.c
index 58e937be24ce,796fc4b48585..000000000000
--- a/fs/xfs/xfs_aops.c
+++ b/fs/xfs/xfs_aops.c
@@@ -112,31 -85,6 +112,34 @@@ xfs_setfilesize
  	return __xfs_setfilesize(ip, tp, offset, size);
  }
  
++<<<<<<< HEAD
 +STATIC int
 +xfs_setfilesize_ioend(
 +	struct iomap_ioend	*ioend,
 +	int			error)
 +{
 +	struct xfs_inode	*ip = XFS_I(ioend->io_inode);
 +	struct xfs_trans	*tp = ioend->io_private;
 +
 +	/*
 +	 * The transaction may have been allocated in the I/O submission thread,
 +	 * thus we need to mark ourselves as being in a transaction manually.
 +	 * Similarly for freeze protection.
 +	 */
 +	current_set_flags_nested(&tp->t_pflags, PF_MEMALLOC_NOFS);
 +	__sb_writers_acquired(VFS_I(ip)->i_sb, SB_FREEZE_FS);
 +
 +	/* we abort the update if there was an IO error */
 +	if (error) {
 +		xfs_trans_cancel(tp);
 +		return error;
 +	}
 +
 +	return __xfs_setfilesize(ip, tp, ioend->io_offset, ioend->io_size);
 +}
 +
++=======
++>>>>>>> 044c6449f18f (xfs: drop unused ioend private merge and setfilesize code)
  /*
   * IO write completion.
   */
* Unmerged path fs/xfs/xfs_aops.c
