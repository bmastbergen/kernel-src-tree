mt76: mt7915: stop ext_phy queue when mac reset happens

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-315.el8
commit-author Ryder Lee <ryder.lee@mediatek.com>
commit 6636539283780a0c34880e43a2f4ada561509f61
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-315.el8/66365392.failed

Stop Tx burst for ext_phy after mac reset.

	Signed-off-by: Ryder Lee <ryder.lee@mediatek.com>
	Signed-off-by: Felix Fietkau <nbd@nbd.name>
(cherry picked from commit 6636539283780a0c34880e43a2f4ada561509f61)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/wireless/mediatek/mt76/mt7915/mac.c
diff --cc drivers/net/wireless/mediatek/mt76/mt7915/mac.c
index fe20a844fa3b,d3a6312c058c..000000000000
--- a/drivers/net/wireless/mediatek/mt76/mt7915/mac.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7915/mac.c
@@@ -1508,10 -1606,11 +1508,18 @@@ void mt7915_mac_reset_work(struct work_
  	set_bit(MT76_RESET, &dev->mphy.state);
  	set_bit(MT76_MCU_RESET, &dev->mphy.state);
  	wake_up(&dev->mt76.mcu.wait);
++<<<<<<< HEAD
 +	cancel_delayed_work_sync(&dev->phy.mac_work);
 +	if (phy2)
 +		cancel_delayed_work_sync(&phy2->mac_work);
 +
++=======
+ 	cancel_delayed_work_sync(&dev->mphy.mac_work);
+ 	if (phy2) {
+ 		set_bit(MT76_RESET, &phy2->mt76->state);
+ 		cancel_delayed_work_sync(&phy2->mt76->mac_work);
+ 	}
++>>>>>>> 663653928378 (mt76: mt7915: stop ext_phy queue when mac reset happens)
  	/* lock/unlock all queues to ensure that no tx is pending */
  	mt76_txq_schedule_all(&dev->mphy);
  	if (ext_phy)
* Unmerged path drivers/net/wireless/mediatek/mt76/mt7915/mac.c
