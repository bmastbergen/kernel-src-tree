rtw88: coex: set 4 slot TDMA for BT link and WL busy

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-315.el8
commit-author Ching-Te Ku <ku920601@realtek.com>
commit 5f782c11569d5703c8ded6913481b55c254512f2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-315.el8/5f782c11.failed

To protect both of WL/BT performance while BT is under re-link state.
4-slot mode TDMA can make the re-link more sensitive and mitigate the WL
throughput drop.

	Signed-off-by: Ching-Te Ku <ku920601@realtek.com>
	Signed-off-by: Ping-Ke Shih <pkshih@realtek.com>
	Signed-off-by: Kalle Valo <kvalo@codeaurora.org>
Link: https://lore.kernel.org/r/20210112021135.3823-1-pkshih@realtek.com
(cherry picked from commit 5f782c11569d5703c8ded6913481b55c254512f2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/wireless/realtek/rtw88/coex.c
diff --cc drivers/net/wireless/realtek/rtw88/coex.c
index efd15821c4ab,ea2be1e25065..000000000000
--- a/drivers/net/wireless/realtek/rtw88/coex.c
+++ b/drivers/net/wireless/realtek/rtw88/coex.c
@@@ -1531,13 -1614,25 +1532,35 @@@ static void rtw_coex_action_bt_relink(s
  	rtw_coex_set_ant_path(rtwdev, false, COEX_SET_ANT_2G);
  	rtw_coex_set_rf_para(rtwdev, chip->wl_rf_para_rx[0]);
  
++<<<<<<< HEAD
 +	if (efuse->share_ant) {
 +		/* Shared-Ant */
 +		table_case = 1;
 +		tdma_case = 0;
 +	} else {
 +		/* Non-Shared-Ant */
 +		table_case = 100;
++=======
+ 	if (efuse->share_ant) { /* Shared-Ant */
+ 		if (coex_stat->wl_gl_busy) {
+ 			table_case = 26;
+ 			if (coex_stat->bt_hid_exist &&
+ 			    coex_stat->bt_profile_num == 1) {
+ 				slot_type = TDMA_4SLOT;
+ 				tdma_case = 20;
+ 			} else {
+ 				tdma_case = 20;
+ 			}
+ 		} else {
+ 			table_case = 1;
+ 			tdma_case = 0;
+ 		}
+ 	} else { /* Non-Shared-Ant */
+ 		if (coex_stat->wl_gl_busy)
+ 			table_case = 115;
+ 		else
+ 			table_case = 100;
++>>>>>>> 5f782c11569d (rtw88: coex: set 4 slot TDMA for BT link and WL busy)
  		tdma_case = 100;
  	}
  
* Unmerged path drivers/net/wireless/realtek/rtw88/coex.c
