platform/x86: intel_pmt_telemetry: Add dependency on MFD_INTEL_PMT

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-315.el8
commit-author David E. Box <david.e.box@linux.intel.com>
commit f3f6da5014dea3cc005b36948abe3664b5d1f7d3
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-315.el8/f3f6da50.failed

All devices that expose Intel Platform Monitoring Technology (PMT)
telemetry are currently owned by the intel_pmt MFD driver. Therefore make
the telemetry driver depend on the MFD driver for build.

Fixes: 68fe8e6e2c4b ("platform/x86: Intel PMT Telemetry capability driver")
	Signed-off-by: David E. Box <david.e.box@linux.intel.com>
Link: https://lore.kernel.org/r/20210126205508.30907-2-david.e.box@linux.intel.com
	Signed-off-by: Hans de Goede <hdegoede@redhat.com>
(cherry picked from commit f3f6da5014dea3cc005b36948abe3664b5d1f7d3)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/platform/x86/Kconfig
diff --cc drivers/platform/x86/Kconfig
index 2a795afbb303,c23040af770d..000000000000
--- a/drivers/platform/x86/Kconfig
+++ b/drivers/platform/x86/Kconfig
@@@ -1033,110 -1248,15 +1033,121 @@@ config INTEL_IM
  
  	  If you are running on a Galileo/Quark say Y here.
  
 -config INTEL_IPS
 -	tristate "Intel Intelligent Power Sharing"
 -	depends on ACPI && PCI
 +config INTEL_PMC_CORE
 +	tristate "Intel PMC Core driver"
 +	depends on PCI
 +	---help---
 +	  The Intel Platform Controller Hub for Intel Core SoCs provides access
 +	  to Power Management Controller registers via a PCI interface. This
 +	  driver can utilize debugging capabilities and supported features as
 +	  exposed by the Power Management Controller.
 +
 +	  Supported features:
 +		- SLP_S0_RESIDENCY counter
 +		- PCH IP Power Gating status
 +		- LTR Ignore
 +		- MPHY/PLL gating status (Sunrisepoint PCH only)
 +
 +config IBM_RTL
 +	tristate "Device driver to enable PRTL support"
 +	depends on PCI
 +	---help---
 +	 Enable support for IBM Premium Real Time Mode (PRTM).
 +	 This module will allow you the enter and exit PRTM in the BIOS via
 +	 sysfs on platforms that support this feature.  System in PRTM will
 +	 not receive CPU-generated SMIs for recoverable errors.  Use of this
 +	 feature without proper support may void your hardware warranty.
 +
 +	 If the proper BIOS support is found the driver will load and create
 +	 /sys/devices/system/ibm_rtl/.  The "state" variable will indicate
 +	 whether or not the BIOS is in PRTM.
 +	 state = 0 (BIOS SMIs on)
 +	 state = 1 (BIOS SMIs off)
 +
 +config XO1_RFKILL
 +	tristate "OLPC XO-1 software RF kill switch"
 +	depends on OLPC || COMPILE_TEST
 +	depends on RFKILL
 +	---help---
 +	  Support for enabling/disabling the WLAN interface on the OLPC XO-1
 +	  laptop.
 +
 +config XO15_EBOOK
 +	tristate "OLPC XO-1.5 ebook switch"
 +	depends on OLPC || COMPILE_TEST
 +	depends on ACPI && INPUT
 +	---help---
 +	  Support for the ebook switch on the OLPC XO-1.5 laptop.
 +
 +	  This switch is triggered as the screen is rotated and folded down to
 +	  convert the device into ebook form.
 +
 +config SAMSUNG_LAPTOP
 +	tristate "Samsung Laptop driver"
 +	depends on RFKILL || RFKILL = n
 +	depends on ACPI_VIDEO || ACPI_VIDEO = n
 +	depends on BACKLIGHT_CLASS_DEVICE
 +	select LEDS_CLASS
 +	select NEW_LEDS
 +	---help---
 +	  This module implements a driver for a wide range of different
 +	  Samsung laptops.  It offers control over the different
 +	  function keys, wireless LED, LCD backlight level.
 +
 +	  It may also provide some sysfs files described in
 +	  <file:Documentation/ABI/testing/sysfs-driver-samsung-laptop>
 +
 +	  To compile this driver as a module, choose M here: the module
 +	  will be called samsung-laptop.
 +
++<<<<<<< HEAD
 +config MXM_WMI
 +       tristate "WMI support for MXM Laptop Graphics"
 +       depends on ACPI_WMI
 +       ---help---
 +          MXM is a standard for laptop graphics cards, the WMI interface
 +	  is required for switchable nvidia graphics machines
++=======
++config INTEL_PMT_TELEMETRY
++	tristate "Intel Platform Monitoring Technology (PMT) Telemetry driver"
++	depends on MFD_INTEL_PMT
++	select INTEL_PMT_CLASS
+ 	help
 -	  Intel Calpella platforms support dynamic power sharing between the
 -	  CPU and GPU, maximizing performance in a given TDP.  This driver,
 -	  along with the CPU frequency and i915 drivers, provides that
 -	  functionality.  If in doubt, say Y here; it will only load on
 -	  supported platforms.
++	  The Intel Platform Monitory Technology (PMT) Telemetry driver provides
++	  access to hardware telemetry metrics on devices that support the
++	  feature.
++>>>>>>> f3f6da5014de (platform/x86: intel_pmt_telemetry: Add dependency on MFD_INTEL_PMT)
 +
 +config INTEL_OAKTRAIL
 +	tristate "Intel Oaktrail Platform Extras"
 +	depends on ACPI
 +	depends on ACPI_VIDEO || ACPI_VIDEO = n
 +	depends on RFKILL && BACKLIGHT_CLASS_DEVICE && ACPI
 +	---help---
 +	  Intel Oaktrail platform need this driver to provide interfaces to
 +	  enable/disable the Camera, WiFi, BT etc. devices. If in doubt, say Y
 +	  here; it will only load on supported platforms.
 +
 +config SAMSUNG_Q10
 +	tristate "Samsung Q10 Extras"
 +	depends on ACPI
 +	select BACKLIGHT_CLASS_DEVICE
 +	---help---
 +	  This driver provides support for backlight control on Samsung Q10
 +	  and related laptops, including Dell Latitude X200.
 +
 +config APPLE_GMUX
 +	tristate "Apple Gmux Driver"
 +	depends on ACPI && PCI
 +	depends on PNP
 +	depends on BACKLIGHT_CLASS_DEVICE
 +	depends on BACKLIGHT_APPLE=n || BACKLIGHT_APPLE
 +	depends on ACPI_VIDEO=n || ACPI_VIDEO
 +	---help---
 +	  This driver provides support for the gmux device found on many
 +	  Apple laptops, which controls the display mux for the hybrid
 +	  graphics as well as the backlight. Currently only backlight
 +	  control is supported by the driver.
  
  config INTEL_RST
          tristate "Intel Rapid Start Technology Driver"
* Unmerged path drivers/platform/x86/Kconfig
