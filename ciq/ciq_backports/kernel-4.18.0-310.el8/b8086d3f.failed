block: use revalidate_disk_size in set_capacity_revalidate_and_notify

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-310.el8
commit-author Christoph Hellwig <hch@lst.de>
commit b8086d3f5a0e88b1912d55a158b8a6a43ad6604b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-310.el8/b8086d3f.failed

Only virtio_blk and xen-blkfront set the revalidate argument to true,
and both do not implement the ->revalidate_disk method.  So switch
to the helper that just updates the size instead.

	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Reviewed-by: Josef Bacik <josef@toxicpanda.com>
	Reviewed-by: Johannes Thumshirn <johannes.thumshirn@wdc.com>
	Signed-off-by: Jens Axboe <axboe@kernel.dk>
(cherry picked from commit b8086d3f5a0e88b1912d55a158b8a6a43ad6604b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	block/genhd.c
#	include/linux/genhd.h
diff --cc block/genhd.c
index e5a406eac921,081f1039d936..000000000000
--- a/block/genhd.c
+++ b/block/genhd.c
@@@ -49,8 -49,8 +49,13 @@@ static void disk_release_events(struct 
   * Set disk capacity and notify if the size is not currently
   * zero and will not be set to zero
   */
++<<<<<<< HEAD
 +bool set_capacity_revalidate_and_notify(struct gendisk *disk, sector_t size,
 +					bool revalidate)
++=======
+ void set_capacity_revalidate_and_notify(struct gendisk *disk, sector_t size,
+ 					bool update_bdev)
++>>>>>>> b8086d3f5a0e (block: use revalidate_disk_size in set_capacity_revalidate_and_notify)
  {
  	sector_t capacity = get_capacity(disk);
  
diff --cc include/linux/genhd.h
index 0fcca343e13b,02a73198b289..000000000000
--- a/include/linux/genhd.h
+++ b/include/linux/genhd.h
@@@ -441,8 -313,8 +441,13 @@@ static inline int get_disk_ro(struct ge
  extern void disk_block_events(struct gendisk *disk);
  extern void disk_unblock_events(struct gendisk *disk);
  extern void disk_flush_events(struct gendisk *disk, unsigned int mask);
++<<<<<<< HEAD
 +extern bool set_capacity_revalidate_and_notify(struct gendisk *disk,
 +			sector_t size, bool revalidate);
++=======
+ void set_capacity_revalidate_and_notify(struct gendisk *disk, sector_t size,
+ 		bool update_bdev);
++>>>>>>> b8086d3f5a0e (block: use revalidate_disk_size in set_capacity_revalidate_and_notify)
  extern unsigned int disk_clear_events(struct gendisk *disk, unsigned int mask);
  
  /* drivers/char/random.c */
* Unmerged path block/genhd.c
* Unmerged path include/linux/genhd.h
