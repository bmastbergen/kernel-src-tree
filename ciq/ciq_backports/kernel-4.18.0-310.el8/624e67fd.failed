nvmet: remove extra variable in smart log nsid

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-310.el8
commit-author Chaitanya Kulkarni <chaitanya.kulkarni@wdc.com>
commit 624e67fdf9a657fe437d84dd9f28b35e594183dd
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-310.el8/624e67fd.failed

We remove the extra local variable struct nvmet_ns in
nvmet_get_smart_log_nsid() since req already has ns member that can be
reused, this also eliminates the explicit call to nvmet_put_namespace()
which is already present in the request completion path.

	Signed-off-by: Chaitanya Kulkarni <chaitanya.kulkarni@wdc.com>
	Reviewed-by: Sagi Grimberg <sagi@grimberg.me>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
(cherry picked from commit 624e67fdf9a657fe437d84dd9f28b35e594183dd)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/nvme/target/admin-cmd.c
diff --cc drivers/nvme/target/admin-cmd.c
index 8ae2ca8bdd24,de804d9762dd..000000000000
--- a/drivers/nvme/target/admin-cmd.c
+++ b/drivers/nvme/target/admin-cmd.c
@@@ -93,15 -86,15 +93,24 @@@ static u16 nvmet_get_smart_log_nsid(str
  	}
  
  	/* we don't have the right data for file backed ns */
- 	if (!ns->bdev)
- 		goto out;
+ 	if (!req->ns->bdev)
+ 		return NVME_SC_SUCCESS;
  
++<<<<<<< HEAD
 +	host_reads = part_stat_read(ns->bdev->bd_part, ios[READ]);
 +	data_units_read = DIV_ROUND_UP(part_stat_read(ns->bdev->bd_part,
 +		sectors[READ]), 1000);
 +	host_writes = part_stat_read(ns->bdev->bd_part, ios[WRITE]);
 +	data_units_written = DIV_ROUND_UP(part_stat_read(ns->bdev->bd_part,
 +		sectors[WRITE]), 1000);
++=======
+ 	host_reads = part_stat_read(req->ns->bdev, ios[READ]);
+ 	data_units_read =
+ 		DIV_ROUND_UP(part_stat_read(req->ns->bdev, sectors[READ]), 1000);
+ 	host_writes = part_stat_read(req->ns->bdev, ios[WRITE]);
+ 	data_units_written =
+ 		DIV_ROUND_UP(part_stat_read(req->ns->bdev, sectors[WRITE]), 1000);
++>>>>>>> 624e67fdf9a6 (nvmet: remove extra variable in smart log nsid)
  
  	put_unaligned_le64(host_reads, &slog->host_reads[0]);
  	put_unaligned_le64(data_units_read, &slog->data_units_read[0]);
* Unmerged path drivers/nvme/target/admin-cmd.c
