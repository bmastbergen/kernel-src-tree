nbd: remove the call to set_blocksize

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-310.el8
commit-author Christoph Hellwig <hch@lst.de>
commit ee4bf648635055d2b76afadaf34236c8b2d852a7
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-310.el8/ee4bf648.failed

Block driver have no business setting the file system concept of a
block size.

	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Reviewed-by: Josef Bacik <josef@toxicpanda.com>
	Signed-off-by: Jens Axboe <axboe@kernel.dk>
(cherry picked from commit ee4bf648635055d2b76afadaf34236c8b2d852a7)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/block/nbd.c
diff --cc drivers/block/nbd.c
index d393d6149779,a9a0b49ff161..000000000000
--- a/drivers/block/nbd.c
+++ b/drivers/block/nbd.c
@@@ -306,14 -309,12 +306,21 @@@ static void nbd_size_update(struct nbd_
  	}
  	blk_queue_logical_block_size(nbd->disk->queue, config->blksize);
  	blk_queue_physical_block_size(nbd->disk->queue, config->blksize);
 -	set_capacity(nbd->disk, nr_sectors);
 +	set_capacity(nbd->disk, config->bytesize >> 9);
  	if (bdev) {
++<<<<<<< HEAD
 +		if (bdev->bd_disk) {
 +			bd_set_size(bdev, config->bytesize);
 +			if (start)
 +				set_blocksize(bdev, config->blksize);
 +		} else
 +			bdev->bd_invalidated = 1;
++=======
+ 		if (bdev->bd_disk)
+ 			bd_set_nr_sectors(bdev, nr_sectors);
+ 		else
+ 			set_bit(GD_NEED_PART_SCAN, &nbd->disk->state);
++>>>>>>> ee4bf6486350 (nbd: remove the call to set_blocksize)
  		bdput(bdev);
  	}
  	kobject_uevent(&nbd_to_dev(nbd)->kobj, KOBJ_CHANGE);
* Unmerged path drivers/block/nbd.c
