net/sunrpc: Fix return value for sysctl sunrpc.transports

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-310.el8
commit-author Artur Molchanov <arturmolchanov@gmail.com>
commit c09f56b8f68d4d536bff518227aea323b835b2ce
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-310.el8/c09f56b8.failed

Fix returning value for sysctl sunrpc.transports.
Return error code from sysctl proc_handler function proc_do_xprt instead of number of the written bytes.
Otherwise sysctl returns random garbage for this key.

Since v1:
- Handle negative returned value from memory_read_from_buffer as an error

	Signed-off-by: Artur Molchanov <arturmolchanov@gmail.com>
	Cc: stable@vger.kernel.org
	Signed-off-by: J. Bruce Fields <bfields@redhat.com>
(cherry picked from commit c09f56b8f68d4d536bff518227aea323b835b2ce)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/sunrpc/sysctl.c
diff --cc net/sunrpc/sysctl.c
index 85c80cfd3813,e81a28f30f1d..000000000000
--- a/net/sunrpc/sysctl.c
+++ b/net/sunrpc/sysctl.c
@@@ -69,7 -70,13 +69,17 @@@ static int proc_do_xprt(struct ctl_tabl
  		return 0;
  	}
  	len = svc_print_xprts(tmpbuf, sizeof(tmpbuf));
++<<<<<<< HEAD
 +	return simple_read_from_buffer(buffer, *lenp, ppos, tmpbuf, len);
++=======
+ 	*lenp = memory_read_from_buffer(buffer, *lenp, ppos, tmpbuf, len);
+ 
+ 	if (*lenp < 0) {
+ 		*lenp = 0;
+ 		return -EINVAL;
+ 	}
+ 	return 0;
++>>>>>>> c09f56b8f68d (net/sunrpc: Fix return value for sysctl sunrpc.transports)
  }
  
  static int
* Unmerged path net/sunrpc/sysctl.c
