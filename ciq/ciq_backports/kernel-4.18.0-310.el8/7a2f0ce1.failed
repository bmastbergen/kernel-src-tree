loop: use set_disk_ro

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-310.el8
commit-author Christoph Hellwig <hch@lst.de>
commit 7a2f0ce19f2e2ed93b5ace60375b908392ec8afb
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-310.el8/7a2f0ce1.failed

Use set_disk_ro instead of set_device_ro to match all other block
drivers and to ensure all partitions mirror the read-only flag.

	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Jens Axboe <axboe@kernel.dk>
(cherry picked from commit 7a2f0ce19f2e2ed93b5ace60375b908392ec8afb)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/block/loop.c
diff --cc drivers/block/loop.c
index 1628cb73fbe1,027f5724fe2c..000000000000
--- a/drivers/block/loop.c
+++ b/drivers/block/loop.c
@@@ -1147,9 -1138,7 +1147,13 @@@ static int loop_configure(struct loop_d
  	if (error)
  		goto out_unlock;
  
++<<<<<<< HEAD
 +	error = 0;
 +
 +	set_device_ro(bdev, (lo->lo_flags & LO_FLAGS_READ_ONLY) != 0);
++=======
+ 	set_disk_ro(lo->lo_disk, (lo->lo_flags & LO_FLAGS_READ_ONLY) != 0);
++>>>>>>> 7a2f0ce19f2e (loop: use set_disk_ro)
  
  	lo->use_dio = lo->lo_flags & LO_FLAGS_DIRECT_IO;
  	lo->lo_device = bdev;
* Unmerged path drivers/block/loop.c
