bus: mhi: core: Drop the references to mhi_dev in mhi_destroy_device()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-310.el8
commit-author Manivannan Sadhasivam <manivannan.sadhasivam@linaro.org>
commit 3eb583a6d0aee952715d34f2bbf58db52c5e7c5e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-310.el8/3eb583a6.failed

For some scenarios like controller suspend and resume, mhi_destroy_device()
will get called without mhi_unregister_controller(). In that case, the
references to the mhi_dev created for the channels will not be dropped
but the channels will be destroyed as per the spec. This will cause issue
during resume as the channels will not be created due to the fact that
mhi_dev is not NULL.

Hence, this change decrements the refcount for mhi_dev in
mhi_destroy_device() for concerned channels and also sets mhi_dev to NULL
in release_device().

	Reported-by: Carl Huang <cjhuang@codeaurora.org>
	Reviewed-by: Jeffrey Hugo <jhugo@codeaurora.org>
	Signed-off-by: Manivannan Sadhasivam <manivannan.sadhasivam@linaro.org>
Link: https://lore.kernel.org/r/20200324061050.14845-5-manivannan.sadhasivam@linaro.org
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 3eb583a6d0aee952715d34f2bbf58db52c5e7c5e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/bus/mhi/core/init.c
#	drivers/bus/mhi/core/main.c
* Unmerged path drivers/bus/mhi/core/init.c
* Unmerged path drivers/bus/mhi/core/main.c
* Unmerged path drivers/bus/mhi/core/init.c
* Unmerged path drivers/bus/mhi/core/main.c
