bus: mhi: core: Handle disable transitions in state worker

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-310.el8
commit-author Hemant Kumar <hemantk@codeaurora.org>
commit 3c1bd0047124f506294520341cfe03e19ea773e3
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-310.el8/3c1bd004.failed

Mission mode transition is handled by state worker thread but
power off is not. There is a possibility while mission mode
transition is in progress which calls MHI client driver probe,
power off is issued by MHI controller. This results into client
driver probe and remove running in parallel and causes use after
free situation. By queuing disable transition work when mission
mode is in progress prevents the race condition.

	Signed-off-by: Hemant Kumar <hemantk@codeaurora.org>
	Reviewed-by: Jeffrey Hugo <jhugo@codeaurora.org>
	Reviewed-by: Manivannan Sadhasivam <manivannan.sadhasivam@linaro.org>
	Signed-off-by: Manivannan Sadhasivam <manivannan.sadhasivam@linaro.org>
Link: https://lore.kernel.org/r/20200521170249.21795-11-manivannan.sadhasivam@linaro.org
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 3c1bd0047124f506294520341cfe03e19ea773e3)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/bus/mhi/core/init.c
#	drivers/bus/mhi/core/internal.h
#	drivers/bus/mhi/core/pm.c
* Unmerged path drivers/bus/mhi/core/init.c
* Unmerged path drivers/bus/mhi/core/internal.h
* Unmerged path drivers/bus/mhi/core/pm.c
* Unmerged path drivers/bus/mhi/core/init.c
* Unmerged path drivers/bus/mhi/core/internal.h
* Unmerged path drivers/bus/mhi/core/pm.c
