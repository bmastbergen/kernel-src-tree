powerpc/spinlocks: Refactor SHARED_PROCESSOR

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-310.el8
commit-author Christopher M. Riedl <cmr@informatik.wtf>
commit d57b78353a99f5d813248954dd7d0527a01751ac
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-310.el8/d57b7835.failed

Determining if a processor is in shared processor mode is not a constant
so don't hide it behind a #define.

	Signed-off-by: Christopher M. Riedl <cmr@informatik.wtf>
	Reviewed-by: Andrew Donnellan <ajd@linux.ibm.com>
	Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
Link: https://lore.kernel.org/r/20190813031314.1828-2-cmr@informatik.wtf
(cherry picked from commit d57b78353a99f5d813248954dd7d0527a01751ac)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/powerpc/include/asm/spinlock.h
diff --cc arch/powerpc/include/asm/spinlock.h
index b322a6b3c984,e9c60fbcc8fe..000000000000
--- a/arch/powerpc/include/asm/spinlock.h
+++ b/arch/powerpc/include/asm/spinlock.h
@@@ -108,7 -101,6 +108,10 @@@ static inline int arch_spin_trylock(arc
  
  #if defined(CONFIG_PPC_SPLPAR)
  /* We only yield to the hypervisor if we are in shared processor mode */
++<<<<<<< HEAD
 +#define SHARED_PROCESSOR (static_branch_unlikely(&shared_processor))
++=======
++>>>>>>> d57b78353a99 (powerpc/spinlocks: Refactor SHARED_PROCESSOR)
  extern void __spin_yield(arch_spinlock_t *lock);
  extern void __rw_yield(arch_rwlock_t *lock);
  #else /* SPLPAR */
* Unmerged path arch/powerpc/include/asm/spinlock.h
