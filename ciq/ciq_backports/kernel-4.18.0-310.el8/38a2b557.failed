sr: simplify sr_block_revalidate_disk

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-310.el8
commit-author Christoph Hellwig <hch@lst.de>
commit 38a2b557e23874dd5ed3c767d57d28b2d10b7683
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-310.el8/38a2b557.failed

Both callers have a valid CD struture available, so rely on that instead
of getting another reference.  Also move the function to avoid a forward
declaration.

	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Reviewed-by: Johannes Thumshirn <johannes.thumshirn@wdc.com>
	Reviewed-by: Hannes Reinecke <hare@suse.de>
	Signed-off-by: Jens Axboe <axboe@kernel.dk>
(cherry picked from commit 38a2b557e23874dd5ed3c767d57d28b2d10b7683)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/sr.c
diff --cc drivers/scsi/sr.c
index 5b84cb3167ae,2b43c0f97442..000000000000
--- a/drivers/scsi/sr.c
+++ b/drivers/scsi/sr.c
@@@ -528,7 -540,8 +539,12 @@@ static int sr_block_open(struct block_d
  
  	sdev = cd->device;
  	scsi_autopm_get_device(sdev);
++<<<<<<< HEAD
 +	check_disk_change(bdev);
++=======
+ 	if (bdev_check_media_change(bdev))
+ 		sr_revalidate_disk(cd);
++>>>>>>> 38a2b557e238 (sr: simplify sr_block_revalidate_disk)
  
  	mutex_lock(&cd->lock);
  	ret = cdrom_open(&cd->cdi, bdev, mode);
@@@ -756,6 -793,7 +752,10 @@@ static int sr_probe(struct device *dev
  
  	dev_set_drvdata(dev, cd);
  	disk->flags |= GENHD_FL_REMOVABLE;
++<<<<<<< HEAD
++=======
+ 	sr_revalidate_disk(cd);
++>>>>>>> 38a2b557e238 (sr: simplify sr_block_revalidate_disk)
  	device_add_disk(&sdev->sdev_gendev, disk, NULL);
  
  	sdev_printk(KERN_DEBUG, sdev,
* Unmerged path drivers/scsi/sr.c
