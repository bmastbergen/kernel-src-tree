bus: mhi: core: Introduce sysfs entries for MHI

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-310.el8
commit-author Bhaumik Bhatt <bbhatt@codeaurora.org>
commit 21cb9b18edea0c3533799069abc95c9c55c8607d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-310.el8/21cb9b18.failed

Introduce sysfs entries to enable userspace clients the ability to read
the serial number and the OEM PK Hash values obtained from BHI. OEMs
need to read these device-specific hardware information values through
userspace for factory testing purposes and cannot be exposed via degbufs
as it may remain disabled for performance reasons. Also, update the
documentation for ABI to include these entries.

	Reviewed-by: Manivannan Sadhasivam <manivannan.sadhasivam@linaro.org>
[mani: used dev_groups to manage sysfs attributes]
	Signed-off-by: Bhaumik Bhatt <bbhatt@codeaurora.org>
	Signed-off-by: Manivannan Sadhasivam <manivannan.sadhasivam@linaro.org>
Link: https://lore.kernel.org/r/20200929175218.8178-16-manivannan.sadhasivam@linaro.org
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 21cb9b18edea0c3533799069abc95c9c55c8607d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	MAINTAINERS
#	drivers/bus/mhi/core/init.c
diff --cc MAINTAINERS
index e4ec93b44e67,a7975cb55438..000000000000
--- a/MAINTAINERS
+++ b/MAINTAINERS
@@@ -9551,13 -11327,47 +9551,34 @@@ F:	Documentation/hwmon/menf21bm
  
  MESON AO CEC DRIVER FOR AMLOGIC SOCS
  M:	Neil Armstrong <narmstrong@baylibre.com>
 -L:	linux-media@vger.kernel.org
 +L:	linux-media@lists.freedesktop.org
  L:	linux-amlogic@lists.infradead.org
 -S:	Supported
  W:	http://linux-meson.com/
 -T:	git git://linuxtv.org/media_tree.git
 -F:	Documentation/devicetree/bindings/media/amlogic,meson-gx-ao-cec.yaml
 -F:	drivers/media/platform/meson/ao-cec-g12a.c
 -F:	drivers/media/platform/meson/ao-cec.c
 -
 -MESON NAND CONTROLLER DRIVER FOR AMLOGIC SOCS
 -M:	Liang Yang <liang.yang@amlogic.com>
 -L:	linux-mtd@lists.infradead.org
 -S:	Maintained
 -F:	Documentation/devicetree/bindings/mtd/amlogic,meson-nand.txt
 -F:	drivers/mtd/nand/raw/meson_*
 -
 -MESON VIDEO DECODER DRIVER FOR AMLOGIC SOCS
 -M:	Maxime Jourdan <mjourdan@baylibre.com>
 -M:	Neil Armstrong <narmstrong@baylibre.com>
 -L:	linux-media@vger.kernel.org
 -L:	linux-amlogic@lists.infradead.org
  S:	Supported
 +F:	drivers/media/platform/meson/ao-cec.c
 +F:	Documentation/devicetree/bindings/media/meson-ao-cec.txt
  T:	git git://linuxtv.org/media_tree.git
++<<<<<<< HEAD
++=======
+ F:	Documentation/devicetree/bindings/media/amlogic,gx-vdec.yaml
+ F:	drivers/staging/media/meson/vdec/
+ 
+ METHODE UDPU SUPPORT
+ M:	Vladimir Vid <vladimir.vid@sartura.hr>
+ S:	Maintained
+ F:	arch/arm64/boot/dts/marvell/armada-3720-uDPU.dts
+ 
+ MHI BUS
+ M:	Manivannan Sadhasivam <manivannan.sadhasivam@linaro.org>
+ M:	Hemant Kumar <hemantk@codeaurora.org>
+ L:	linux-arm-msm@vger.kernel.org
+ S:	Maintained
+ T:	git git://git.kernel.org/pub/scm/linux/kernel/git/mani/mhi.git
+ F:	Documentation/ABI/stable/sysfs-bus-mhi
+ F:	Documentation/mhi/
+ F:	drivers/bus/mhi/
+ F:	include/linux/mhi.h
++>>>>>>> 21cb9b18edea (bus: mhi: core: Introduce sysfs entries for MHI)
  
  MICROBLAZE ARCHITECTURE
  M:	Michal Simek <monstr@monstr.eu>
* Unmerged path drivers/bus/mhi/core/init.c
diff --git a/Documentation/ABI/stable/sysfs-bus-mhi b/Documentation/ABI/stable/sysfs-bus-mhi
new file mode 100644
index 000000000000..ecfe7662f8d0
--- /dev/null
+++ b/Documentation/ABI/stable/sysfs-bus-mhi
@@ -0,0 +1,21 @@
+What:		/sys/bus/mhi/devices/.../serialnumber
+Date:		Sept 2020
+KernelVersion:	5.10
+Contact:	Bhaumik Bhatt <bbhatt@codeaurora.org>
+Description:	The file holds the serial number of the client device obtained
+		using a BHI (Boot Host Interface) register read after at least
+		one attempt to power up the device has been done. If read
+		without having the device power on at least once, the file will
+		read all 0's.
+Users:		Any userspace application or clients interested in device info.
+
+What:		/sys/bus/mhi/devices/.../oem_pk_hash
+Date:		Sept 2020
+KernelVersion:	5.10
+Contact:	Bhaumik Bhatt <bbhatt@codeaurora.org>
+Description:	The file holds the OEM PK Hash value of the endpoint device
+		obtained using a BHI (Boot Host Interface) register read after
+		at least one attempt to power up the device has been done. If
+		read without having the device power on at least once, the file
+		will read all 0's.
+Users:		Any userspace application or clients interested in device info.
* Unmerged path MAINTAINERS
* Unmerged path drivers/bus/mhi/core/init.c
