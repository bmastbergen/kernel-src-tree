bus: mhi: core: Handle write lock properly in mhi_pm_m0_transition

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-310.el8
commit-author Hemant Kumar <hemantk@codeaurora.org>
commit 3bc1a5f431618a656bbf674a4627ef4da3a0d893
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-310.el8/3bc1a5f4.failed

Take write lock only to protect db_mode member of mhi channel.
This allows rest of the mhi channels to just take read lock which
fine grains the locking. It prevents channel readers to starve if
they try to enter critical section after a writer.

	Signed-off-by: Hemant Kumar <hemantk@codeaurora.org>
	Reviewed-by: Manivannan Sadhasivam <manivannan.sadhasivam@linaro.org>
	Signed-off-by: Manivannan Sadhasivam <manivannan.sadhasivam@linaro.org>
Link: https://lore.kernel.org/r/20200521170249.21795-14-manivannan.sadhasivam@linaro.org
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 3bc1a5f431618a656bbf674a4627ef4da3a0d893)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/bus/mhi/core/pm.c
* Unmerged path drivers/bus/mhi/core/pm.c
* Unmerged path drivers/bus/mhi/core/pm.c
