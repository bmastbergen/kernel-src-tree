rculist: Add brackets around cond argument in __list_check_rcu macro

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-310.el8
commit-author Amol Grover <frextrite@gmail.com>
commit 4dfd5cd83dc4458049c7f6eb9c4f361acc4239ea
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-310.el8/4dfd5cd8.failed

Passing a complex lockdep condition to __list_check_rcu results
in false positive lockdep splat due to incorrect expression
evaluation.

For example, a lockdep check condition `cond1 || cond2` is
evaluated as `!cond1 || cond2 && !rcu_read_lock_any_held()`
which, according to operator precedence, evaluates to
`!cond1 || (cond2 && !rcu_read_lock_any_held())`.
This would result in a lockdep splat when cond1 is false
and cond2 is true which is logically incorrect.

	Signed-off-by: Amol Grover <frextrite@gmail.com>
	Acked-by: Joel Fernandes (Google) <joel@joelfernandes.org>
	Signed-off-by: Paul E. McKenney <paulmck@kernel.org>
(cherry picked from commit 4dfd5cd83dc4458049c7f6eb9c4f361acc4239ea)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/linux/rculist.h
diff --cc include/linux/rculist.h
index 77c819d4ad00,8214cdc715f2..000000000000
--- a/include/linux/rculist.h
+++ b/include/linux/rculist.h
@@@ -60,15 -60,9 +60,18 @@@ static inline void INIT_LIST_HEAD_RCU(s
  #define __list_check_rcu(dummy, cond, extra...)				\
  	({								\
  	check_arg_count_one(extra);					\
- 	RCU_LOCKDEP_WARN(!cond && !rcu_read_lock_any_held(),		\
+ 	RCU_LOCKDEP_WARN(!(cond) && !rcu_read_lock_any_held(),		\
  			 "RCU-list traversed in non-reader section!");	\
  	})
++<<<<<<< HEAD
 +
 +#define __list_check_srcu(cond)					 \
 +	({								 \
 +	RCU_LOCKDEP_WARN(!(cond),					 \
 +		"RCU-list traversed without holding the required lock!");\
 +	})
++=======
++>>>>>>> 4dfd5cd83dc4 (rculist: Add brackets around cond argument in __list_check_rcu macro)
  #else
  #define __list_check_rcu(dummy, cond, extra...)				\
  	({ check_arg_count_one(extra); })
* Unmerged path include/linux/rculist.h
