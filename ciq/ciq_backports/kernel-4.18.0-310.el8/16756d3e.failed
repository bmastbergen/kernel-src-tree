ethtool: pause: make sure we init driver stats

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-310.el8
commit-author Jakub Kicinski <kuba@kernel.org>
commit 16756d3e77ad58cd07e36cbed724aa13ae5a0278
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-310.el8/16756d3e.failed

The intention was for pause statistics to not be reported
when driver does not have the relevant callback (only
report an empty netlink nest). What happens currently
we report all 0s instead. Make sure statistics are
initialized to "not set" (which is -1) so the dumping
code skips them.

Fixes: 9a27a33027f2 ("ethtool: add standard pause stats")
	Signed-off-by: Jakub Kicinski <kuba@kernel.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 16756d3e77ad58cd07e36cbed724aa13ae5a0278)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ethtool/pause.c
diff --cc net/ethtool/pause.c
index 8df854266d33,d4ac02718b72..000000000000
--- a/net/ethtool/pause.c
+++ b/net/ethtool/pause.c
@@@ -33,10 -37,17 +33,23 @@@ static int pause_prepare_data(const str
  
  	if (!dev->ethtool_ops->get_pauseparam)
  		return -EOPNOTSUPP;
++<<<<<<< HEAD
++=======
+ 
+ 	ethtool_stats_init((u64 *)&data->pausestat,
+ 			   sizeof(data->pausestat) / 8);
+ 
++>>>>>>> 16756d3e77ad (ethtool: pause: make sure we init driver stats)
  	ret = ethnl_ops_begin(dev);
  	if (ret < 0)
  		return ret;
  	dev->ethtool_ops->get_pauseparam(dev, &data->pauseparam);
++<<<<<<< HEAD
++=======
+ 	if (req_base->flags & ETHTOOL_FLAG_STATS &&
+ 	    dev->ethtool_ops->get_pause_stats)
+ 		dev->ethtool_ops->get_pause_stats(dev, &data->pausestat);
++>>>>>>> 16756d3e77ad (ethtool: pause: make sure we init driver stats)
  	ethnl_ops_complete(dev);
  
  	return 0;
* Unmerged path net/ethtool/pause.c
