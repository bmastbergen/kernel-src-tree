perf auxtrace: Move perf_evsel__find_pmu()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Adrian Hunter <adrian.hunter@intel.com>
commit f306de275b7c18da9ab060acb3dfa91c09e9ae89
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/f306de27.failed

Move perf_evsel__find_pmu() so it can be used without forward
declaration.

	Signed-off-by: Adrian Hunter <adrian.hunter@intel.com>
	Cc: Jiri Olsa <jolsa@redhat.com>
Link: http://lore.kernel.org/lkml/20191115124225.5247-5-adrian.hunter@intel.com
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit f306de275b7c18da9ab060acb3dfa91c09e9ae89)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/util/auxtrace.c
diff --cc tools/perf/util/auxtrace.c
index 130597309e55,263d1d9d8987..000000000000
--- a/tools/perf/util/auxtrace.c
+++ b/tools/perf/util/auxtrace.c
@@@ -59,10 -50,25 +59,22 @@@
  #include "intel-bts.h"
  #include "arm-spe.h"
  #include "s390-cpumsf.h"
 -#include "util/mmap.h"
  
  #include <linux/ctype.h>
 -#include <linux/kernel.h>
  #include "symbol/kallsyms.h"
 -#include <internal/lib.h>
  
+ static struct perf_pmu *perf_evsel__find_pmu(struct evsel *evsel)
+ {
+ 	struct perf_pmu *pmu = NULL;
+ 
+ 	while ((pmu = perf_pmu__scan(pmu)) != NULL) {
+ 		if (pmu->type == evsel->core.attr.type)
+ 			break;
+ 	}
+ 
+ 	return pmu;
+ }
+ 
  static bool auxtrace__dont_decode(struct perf_session *session)
  {
  	return !session->itrace_synth_opts ||
@@@ -2186,19 -2192,7 +2198,23 @@@ out_exit
  	return err;
  }
  
++<<<<<<< HEAD
 +static struct perf_pmu *perf_evsel__find_pmu(struct perf_evsel *evsel)
 +{
 +	struct perf_pmu *pmu = NULL;
 +
 +	while ((pmu = perf_pmu__scan(pmu)) != NULL) {
 +		if (pmu->type == evsel->attr.type)
 +			break;
 +	}
 +
 +	return pmu;
 +}
 +
 +static int perf_evsel__nr_addr_filter(struct perf_evsel *evsel)
++=======
+ static int perf_evsel__nr_addr_filter(struct evsel *evsel)
++>>>>>>> f306de275b7c (perf auxtrace: Move perf_evsel__find_pmu())
  {
  	struct perf_pmu *pmu = perf_evsel__find_pmu(evsel);
  	int nr_addr_filters = 0;
* Unmerged path tools/perf/util/auxtrace.c
