KVM: SVM: Annotate svm_x86_ops as __initdata

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Sean Christopherson <sean.j.christopherson@intel.com>
commit 9c14ee21fcf74ac1f31e11180bf0dfd928c912cc
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/9c14ee21.failed

Tag svm_x86_ops with __initdata now the the struct is copied by value to
a common x86 instance of kvm_x86_ops as part of kvm_init().

	Signed-off-by: Sean Christopherson <sean.j.christopherson@intel.com>
Message-Id: <20200321202603.19355-10-sean.j.christopherson@intel.com>
	Reviewed-by: Vitaly Kuznetsov <vkuznets@redhat.com>
	Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>
(cherry picked from commit 9c14ee21fcf74ac1f31e11180bf0dfd928c912cc)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/kvm/svm.c
diff --cc arch/x86/kvm/svm.c
index dd22d2cd361d,26f709cfff1d..000000000000
--- a/arch/x86/kvm/svm.c
+++ b/arch/x86/kvm/svm.c
@@@ -7417,12 -7336,25 +7417,33 @@@ static bool svm_apic_init_signal_blocke
  		   (svm->vmcb->control.intercept & (1ULL << INTERCEPT_INIT));
  }
  
++<<<<<<< HEAD
 +static struct kvm_x86_ops svm_x86_ops __ro_after_init = {
 +	.cpu_has_kvm_support = has_svm,
 +	.disabled_by_bios = is_disabled,
 +	.hardware_setup = svm_hardware_setup,
++=======
+ static bool svm_check_apicv_inhibit_reasons(ulong bit)
+ {
+ 	ulong supported = BIT(APICV_INHIBIT_REASON_DISABLE) |
+ 			  BIT(APICV_INHIBIT_REASON_HYPERV) |
+ 			  BIT(APICV_INHIBIT_REASON_NESTED) |
+ 			  BIT(APICV_INHIBIT_REASON_IRQWIN) |
+ 			  BIT(APICV_INHIBIT_REASON_PIT_REINJ) |
+ 			  BIT(APICV_INHIBIT_REASON_X2APIC);
+ 
+ 	return supported & BIT(bit);
+ }
+ 
+ static void svm_pre_update_apicv_exec_ctrl(struct kvm *kvm, bool activate)
+ {
+ 	avic_update_access_page(kvm, activate);
+ }
+ 
+ static struct kvm_x86_ops svm_x86_ops __initdata = {
++>>>>>>> 9c14ee21fcf7 (KVM: SVM: Annotate svm_x86_ops as __initdata)
  	.hardware_unsetup = svm_hardware_teardown,
 +	.check_processor_compatibility = svm_check_processor_compat,
  	.hardware_enable = svm_hardware_enable,
  	.hardware_disable = svm_hardware_disable,
  	.cpu_has_accelerated_tpr = svm_cpu_has_accelerated_tpr,
* Unmerged path arch/x86/kvm/svm.c
