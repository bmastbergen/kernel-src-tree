libperf: Merge libperf_set_print() into libperf_init()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Jiri Olsa <jolsa@kernel.org>
commit 428dab813a56ce9402f359dc35a3ccdfcaea9429
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/428dab81.failed

The libperf_set_print() function needs to be called in any case so let's
merge it with libperf_init(), so we have just one init function.

	Signed-off-by: Jiri Olsa <jolsa@kernel.org>
	Cc: Alexander Shishkin <alexander.shishkin@linux.intel.com>
	Cc: Michael Petlan <mpetlan@redhat.com>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Peter Zijlstra <a.p.zijlstra@chello.nl>
Link: http://lore.kernel.org/lkml/20190913132355.21634-34-jolsa@kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 428dab813a56ce9402f359dc35a3ccdfcaea9429)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/lib/core.c
#	tools/perf/lib/include/perf/core.h
#	tools/perf/lib/libperf.map
#	tools/perf/perf.c
diff --cc tools/perf/lib/core.c
index 29d5e3348718,d0b9ae422b9f..000000000000
--- a/tools/perf/lib/core.c
+++ b/tools/perf/lib/core.c
@@@ -32,3 -29,9 +27,12 @@@ void libperf_print(enum libperf_print_l
  	__libperf_pr(level, format, args);
  	va_end(args);
  }
++<<<<<<< HEAD
++=======
+ 
+ void libperf_init(libperf_print_fn_t fn)
+ {
+ 	page_size = sysconf(_SC_PAGE_SIZE);
+ 	__libperf_pr = fn;
+ }
++>>>>>>> 428dab813a56 (libperf: Merge libperf_set_print() into libperf_init())
diff --cc tools/perf/lib/include/perf/core.h
index c341a7b2c874,cfd70e720c1c..000000000000
--- a/tools/perf/lib/include/perf/core.h
+++ b/tools/perf/lib/include/perf/core.h
@@@ -17,6 -17,6 +17,10 @@@ enum libperf_print_level 
  typedef int (*libperf_print_fn_t)(enum libperf_print_level level,
  				  const char *, va_list ap);
  
++<<<<<<< HEAD
 +LIBPERF_API void libperf_set_print(libperf_print_fn_t fn);
++=======
+ LIBPERF_API void libperf_init(libperf_print_fn_t fn);
++>>>>>>> 428dab813a56 (libperf: Merge libperf_set_print() into libperf_init())
  
  #endif /* __LIBPERF_CORE_H */
diff --cc tools/perf/lib/libperf.map
index 3536242c545c,5eb0150ccdc6..000000000000
--- a/tools/perf/lib/libperf.map
+++ b/tools/perf/lib/libperf.map
@@@ -1,6 -1,44 +1,48 @@@
  LIBPERF_0.0.1 {
  	global:
++<<<<<<< HEAD
 +		libperf_set_print;
++=======
+ 		libperf_init;
+ 		perf_cpu_map__dummy_new;
+ 		perf_cpu_map__get;
+ 		perf_cpu_map__put;
+ 		perf_cpu_map__new;
+ 		perf_cpu_map__read;
+ 		perf_cpu_map__nr;
+ 		perf_cpu_map__cpu;
+ 		perf_cpu_map__empty;
+ 		perf_cpu_map__max;
+ 		perf_thread_map__new_dummy;
+ 		perf_thread_map__set_pid;
+ 		perf_thread_map__comm;
+ 		perf_thread_map__nr;
+ 		perf_thread_map__pid;
+ 		perf_thread_map__get;
+ 		perf_thread_map__put;
+ 		perf_evsel__new;
+ 		perf_evsel__delete;
+ 		perf_evsel__enable;
+ 		perf_evsel__disable;
+ 		perf_evsel__init;
+ 		perf_evsel__open;
+ 		perf_evsel__close;
+ 		perf_evsel__read;
+ 		perf_evsel__cpus;
+ 		perf_evsel__threads;
+ 		perf_evsel__attr;
+ 		perf_evlist__new;
+ 		perf_evlist__delete;
+ 		perf_evlist__open;
+ 		perf_evlist__close;
+ 		perf_evlist__enable;
+ 		perf_evlist__disable;
+ 		perf_evlist__init;
+ 		perf_evlist__add;
+ 		perf_evlist__remove;
+ 		perf_evlist__next;
+ 		perf_evlist__set_maps;
++>>>>>>> 428dab813a56 (libperf: Merge libperf_set_print() into libperf_init())
  	local:
  		*;
  };
diff --cc tools/perf/perf.c
index 34763a9b873d,27f94b0bb874..000000000000
--- a/tools/perf/perf.c
+++ b/tools/perf/perf.c
@@@ -433,8 -446,7 +439,12 @@@ int main(int argc, const char **argv
  	exec_cmd_init("perf", PREFIX, PERF_EXEC_PATH, EXEC_PATH_ENVIRONMENT);
  	pager_init(PERF_PAGER_ENVIRONMENT);
  
++<<<<<<< HEAD
 +	/* The page_size is placed in util object. */
 +	page_size = sysconf(_SC_PAGE_SIZE);
++=======
+ 	libperf_init(libperf_print);
++>>>>>>> 428dab813a56 (libperf: Merge libperf_set_print() into libperf_init())
  
  	cmd = extract_argv0_path(argv[0]);
  	if (!cmd)
* Unmerged path tools/perf/lib/core.c
* Unmerged path tools/perf/lib/include/perf/core.h
* Unmerged path tools/perf/lib/libperf.map
* Unmerged path tools/perf/perf.c
