ASoC: Intel: boards: drop reverse deps for SND_HDA_CODEC_HDMI

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
Rebuild_CHGLOG: - [sound] ALSA: ASoC: Intel: boards: drop reverse deps for SND_HDA_CODEC_HDMI (Jaroslav Kysela) [1797509]
Rebuild_FUZZ: 95.31%
commit-author Kai Vehmanen <kai.vehmanen@linux.intel.com>
commit 5c82813ce43e3a2017c43b32a57dc7a8802d9ad4
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/5c82813c.failed

Having a reverse dependency to a config that has its own additional
dependencies, is generally not recommended. And this applies to
select statements for SND_HDA_CODEC_HDMI, e.g. the case where SND_HDA
and SND_SOC_SOF_HDA are built as modules, but the machine driver is
built-in, leading to compile errors (reported as
i386-randconfig-e003-20200206).

Give up on trying to define different dependencies based on SOF/SST
selection, and simply add a "depends on" for SND_HDA_CODEC_HDMI. This
fixes the issue with randconfigs. Only downside is that SND_HDA_CODEC_HDMI
may be built unnecessarily in some cases, but this seems like the lesser
evil.

Fixes: aa2b4a5 ('ASoC: Intel: boards: fix incorrect HDMI Kconfig dependency')
	Reported-by: kbuild test robot <lkp@intel.com>
	Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>
	Signed-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
Link: https://lore.kernel.org/r/20200312194859.4051-2-pierre-louis.bossart@linux.intel.com
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit 5c82813ce43e3a2017c43b32a57dc7a8802d9ad4)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/intel/boards/Kconfig
diff --cc sound/soc/intel/boards/Kconfig
index 84e3003c0985,67d85a7be559..000000000000
--- a/sound/soc/intel/boards/Kconfig
+++ b/sound/soc/intel/boards/Kconfig
@@@ -428,6 -431,7 +431,10 @@@ if SND_SOC_INTEL_SKYLAKE_HDAUDIO_CODEC 
  
  config SND_SOC_INTEL_SKL_HDA_DSP_GENERIC_MACH
  	tristate "SKL/KBL/BXT/APL with HDA Codecs"
++<<<<<<< HEAD
++=======
+ 	depends on SND_HDA_CODEC_HDMI
++>>>>>>> 5c82813ce43e (ASoC: Intel: boards: drop reverse deps for SND_HDA_CODEC_HDMI)
  	select SND_SOC_HDAC_HDMI
  	select SND_SOC_DMIC
  	# SND_SOC_HDAC_HDA is already selected
@@@ -483,34 -488,35 +491,50 @@@ config SND_SOC_INTEL_CML_LP_DA7219_MAX9
  	   If unsure select "N".
  
  config SND_SOC_INTEL_SOF_CML_RT1011_RT5682_MACH
++<<<<<<< HEAD
 +        tristate "CML with RT1011 and RT5682 in I2S Mode"
 +        depends on I2C && ACPI
 +        depends on MFD_INTEL_LPSS || COMPILE_TEST
 +        select SND_SOC_RT1011
 +        select SND_SOC_RT5682
 +        select SND_SOC_DMIC
 +        select SND_SOC_HDAC_HDMI
 +        help
 +          This adds support for ASoC machine driver for SOF platform with
 +          RT1011 + RT5682 I2S codec.
 +          Say Y if you have such a device.
 +          If unsure select "N".
++=======
+ 	tristate "CML with RT1011 and RT5682 in I2S Mode"
+ 	depends on I2C && ACPI
+ 	depends on MFD_INTEL_LPSS || COMPILE_TEST
+ 	depends on SND_HDA_CODEC_HDMI
+ 	select SND_SOC_RT1011
+ 	select SND_SOC_RT5682
+ 	select SND_SOC_DMIC
+ 	select SND_SOC_HDAC_HDMI
+ 	help
+ 	  This adds support for ASoC machine driver for SOF platform with
+ 	  RT1011 + RT5682 I2S codec.
+ 	  Say Y if you have such a device.
+ 	  If unsure select "N".
++>>>>>>> 5c82813ce43e (ASoC: Intel: boards: drop reverse deps for SND_HDA_CODEC_HDMI)
  
  endif ## SND_SOC_SOF_COMETLAKE_LP && SND_SOC_SOF_HDA_LINK
  
  if SND_SOC_SOF_JASPERLAKE
  
  config SND_SOC_INTEL_SOF_DA7219_MAX98373_MACH
 -	tristate "SOF with DA7219 and MAX98373 in I2S Mode"
 +	tristate "SOF with DA7219 and MAX98373/MAX98360A in I2S Mode"
  	depends on I2C && ACPI
  	depends on MFD_INTEL_LPSS || COMPILE_TEST
+ 	depends on SND_HDA_CODEC_HDMI
  	select SND_SOC_DA7219
  	select SND_SOC_MAX98373
  	select SND_SOC_DMIC
- 	select SND_HDA_CODEC_HDMI if SND_SOC_SOF_HDA_AUDIO_CODEC
  	help
  	  This adds support for ASoC machine driver for SOF platforms
 -	  with DA7219 + MAX98373 I2S audio codec.
 +	  with DA7219 + MAX98373/MAX98360A I2S audio codec.
  	  Say Y if you have such a device.
  	  If unsure select "N".
  
* Unmerged path sound/soc/intel/boards/Kconfig
