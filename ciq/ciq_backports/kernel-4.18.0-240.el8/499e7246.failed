scsi: megaraid_sas: Reset adapter if FW is not in READY state after device resume

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Anand Lodnoor <anand.lodnoor@broadcom.com>
commit 499e7246d6daa7c2655958e81febfbd76af1bc75
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/499e7246.failed

After device resume we expect the firmware to be in READY state.
Transition to READY might fail due to unhandled exceptions, such as an
internal error or a hardware failure. Retry initiating chip reset and wait
for the controller to come to ready state.

Link: https://lore.kernel.org/r/1579000882-20246-2-git-send-email-anand.lodnoor@broadcom.com
	Signed-off-by: Chandrakanth Patil <chandrakanth.patil@broadcom.com>
	Signed-off-by: Anand Lodnoor <anand.lodnoor@broadcom.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit 499e7246d6daa7c2655958e81febfbd76af1bc75)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/megaraid/megaraid_sas_base.c
diff --cc drivers/scsi/megaraid/megaraid_sas_base.c
index 74c4ba914dcf,6a01a605508b..000000000000
--- a/drivers/scsi/megaraid/megaraid_sas_base.c
+++ b/drivers/scsi/megaraid/megaraid_sas_base.c
@@@ -7586,6 -7592,8 +7586,11 @@@ megasas_resume(struct pci_dev *pdev
  	int rval;
  	struct Scsi_Host *host;
  	struct megasas_instance *instance;
++<<<<<<< HEAD
++=======
+ 	int irq_flags = PCI_IRQ_LEGACY;
+ 	u32 status_reg;
++>>>>>>> 499e7246d6da (scsi: megaraid_sas: Reset adapter if FW is not in READY state after device resume)
  
  	instance = pci_get_drvdata(pdev);
  
* Unmerged path drivers/scsi/megaraid/megaraid_sas_base.c
