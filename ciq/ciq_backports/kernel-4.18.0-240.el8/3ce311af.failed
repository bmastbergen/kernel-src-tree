libperf: Move to tools/lib/perf

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Jiri Olsa <jolsa@kernel.org>
commit 3ce311afb5583cf3d3b7f54ab088949da28aea05
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/3ce311af.failed

Move libperf from its current location under tools/perf to a separate
directory under tools/lib/.

Also change various paths (mainly includes) to reflect the libperf move
to a separate directory and add a new directory under MANIFEST.

	Signed-off-by: Jiri Olsa <jolsa@kernel.org>
	Tested-by: Arnaldo Carvalho de Melo <acme@redhat.com>
	Cc: Alexander Shishkin <alexander.shishkin@linux.intel.com>
	Cc: Michael Petlan <mpetlan@redhat.com>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Peter Zijlstra <peterz@infradead.org>
Link: http://lore.kernel.org/lkml/20191206210612.8676-2-jolsa@kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 3ce311afb5583cf3d3b7f54ab088949da28aea05)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/lib/perf/cpumap.c
#	tools/lib/perf/evlist.c
#	tools/lib/perf/evsel.c
#	tools/lib/perf/include/internal/cpumap.h
#	tools/lib/perf/include/internal/evlist.h
#	tools/lib/perf/include/internal/evsel.h
#	tools/lib/perf/include/internal/lib.h
#	tools/lib/perf/include/internal/mmap.h
#	tools/lib/perf/include/internal/tests.h
#	tools/lib/perf/include/internal/threadmap.h
#	tools/lib/perf/include/internal/xyarray.h
#	tools/lib/perf/include/perf/cpumap.h
#	tools/lib/perf/include/perf/evlist.h
#	tools/lib/perf/include/perf/evsel.h
#	tools/lib/perf/include/perf/mmap.h
#	tools/lib/perf/include/perf/threadmap.h
#	tools/lib/perf/lib.c
#	tools/lib/perf/mmap.c
#	tools/lib/perf/tests/Makefile
#	tools/lib/perf/tests/test-cpumap.c
#	tools/lib/perf/tests/test-evlist.c
#	tools/lib/perf/tests/test-evsel.c
#	tools/lib/perf/tests/test-threadmap.c
#	tools/lib/perf/threadmap.c
#	tools/lib/perf/xyarray.c
#	tools/perf/lib/include/internal/xyarray.h
#	tools/perf/util/xyarray.h
* Unmerged path tools/lib/perf/cpumap.c
* Unmerged path tools/lib/perf/evlist.c
* Unmerged path tools/lib/perf/evsel.c
* Unmerged path tools/lib/perf/include/internal/cpumap.h
* Unmerged path tools/lib/perf/include/internal/evlist.h
* Unmerged path tools/lib/perf/include/internal/evsel.h
* Unmerged path tools/lib/perf/include/internal/lib.h
* Unmerged path tools/lib/perf/include/internal/mmap.h
* Unmerged path tools/lib/perf/include/internal/tests.h
* Unmerged path tools/lib/perf/include/internal/threadmap.h
* Unmerged path tools/lib/perf/include/internal/xyarray.h
* Unmerged path tools/lib/perf/include/perf/cpumap.h
* Unmerged path tools/lib/perf/include/perf/evlist.h
* Unmerged path tools/lib/perf/include/perf/evsel.h
* Unmerged path tools/lib/perf/include/perf/mmap.h
* Unmerged path tools/lib/perf/include/perf/threadmap.h
* Unmerged path tools/lib/perf/lib.c
* Unmerged path tools/lib/perf/mmap.c
* Unmerged path tools/lib/perf/tests/Makefile
* Unmerged path tools/lib/perf/tests/test-cpumap.c
* Unmerged path tools/lib/perf/tests/test-evlist.c
* Unmerged path tools/lib/perf/tests/test-evsel.c
* Unmerged path tools/lib/perf/tests/test-threadmap.c
* Unmerged path tools/lib/perf/threadmap.c
* Unmerged path tools/lib/perf/xyarray.c
* Unmerged path tools/perf/lib/include/internal/xyarray.h
* Unmerged path tools/perf/util/xyarray.h
diff --git a/tools/perf/lib/Build b/tools/lib/perf/Build
similarity index 100%
rename from tools/perf/lib/Build
rename to tools/lib/perf/Build
diff --git a/tools/perf/lib/Documentation/Makefile b/tools/lib/perf/Documentation/Makefile
similarity index 100%
rename from tools/perf/lib/Documentation/Makefile
rename to tools/lib/perf/Documentation/Makefile
diff --git a/tools/perf/lib/Documentation/man/libperf.rst b/tools/lib/perf/Documentation/man/libperf.rst
similarity index 100%
rename from tools/perf/lib/Documentation/man/libperf.rst
rename to tools/lib/perf/Documentation/man/libperf.rst
diff --git a/tools/perf/lib/Documentation/tutorial/tutorial.rst b/tools/lib/perf/Documentation/tutorial/tutorial.rst
similarity index 100%
rename from tools/perf/lib/Documentation/tutorial/tutorial.rst
rename to tools/lib/perf/Documentation/tutorial/tutorial.rst
diff --git a/tools/perf/lib/Makefile b/tools/lib/perf/Makefile
similarity index 99%
rename from tools/perf/lib/Makefile
rename to tools/lib/perf/Makefile
index 71da7acddad6..82dad1249f1d 100644
--- a/tools/perf/lib/Makefile
+++ b/tools/lib/perf/Makefile
@@ -60,7 +60,7 @@ else
 endif
 
 INCLUDES = \
--I$(srctree)/tools/perf/lib/include \
+-I$(srctree)/tools/lib/perf/include \
 -I$(srctree)/tools/lib/ \
 -I$(srctree)/tools/include \
 -I$(srctree)/tools/arch/$(SRCARCH)/include/ \
diff --git a/tools/perf/lib/core.c b/tools/lib/perf/core.c
similarity index 100%
rename from tools/perf/lib/core.c
rename to tools/lib/perf/core.c
* Unmerged path tools/lib/perf/cpumap.c
* Unmerged path tools/lib/perf/evlist.c
* Unmerged path tools/lib/perf/evsel.c
* Unmerged path tools/lib/perf/include/internal/cpumap.h
* Unmerged path tools/lib/perf/include/internal/evlist.h
* Unmerged path tools/lib/perf/include/internal/evsel.h
* Unmerged path tools/lib/perf/include/internal/lib.h
* Unmerged path tools/lib/perf/include/internal/mmap.h
* Unmerged path tools/lib/perf/include/internal/tests.h
* Unmerged path tools/lib/perf/include/internal/threadmap.h
* Unmerged path tools/lib/perf/include/internal/xyarray.h
diff --git a/tools/perf/lib/include/perf/core.h b/tools/lib/perf/include/perf/core.h
similarity index 100%
rename from tools/perf/lib/include/perf/core.h
rename to tools/lib/perf/include/perf/core.h
* Unmerged path tools/lib/perf/include/perf/cpumap.h
diff --git a/tools/perf/lib/include/perf/event.h b/tools/lib/perf/include/perf/event.h
similarity index 100%
rename from tools/perf/lib/include/perf/event.h
rename to tools/lib/perf/include/perf/event.h
* Unmerged path tools/lib/perf/include/perf/evlist.h
* Unmerged path tools/lib/perf/include/perf/evsel.h
* Unmerged path tools/lib/perf/include/perf/mmap.h
* Unmerged path tools/lib/perf/include/perf/threadmap.h
diff --git a/tools/perf/lib/internal.h b/tools/lib/perf/internal.h
similarity index 100%
rename from tools/perf/lib/internal.h
rename to tools/lib/perf/internal.h
* Unmerged path tools/lib/perf/lib.c
diff --git a/tools/perf/lib/libperf.map b/tools/lib/perf/libperf.map
similarity index 100%
rename from tools/perf/lib/libperf.map
rename to tools/lib/perf/libperf.map
diff --git a/tools/perf/lib/libperf.pc.template b/tools/lib/perf/libperf.pc.template
similarity index 100%
rename from tools/perf/lib/libperf.pc.template
rename to tools/lib/perf/libperf.pc.template
* Unmerged path tools/lib/perf/mmap.c
* Unmerged path tools/lib/perf/tests/Makefile
* Unmerged path tools/lib/perf/tests/test-cpumap.c
* Unmerged path tools/lib/perf/tests/test-evlist.c
* Unmerged path tools/lib/perf/tests/test-evsel.c
* Unmerged path tools/lib/perf/tests/test-threadmap.c
* Unmerged path tools/lib/perf/threadmap.c
* Unmerged path tools/lib/perf/xyarray.c
diff --git a/tools/perf/MANIFEST b/tools/perf/MANIFEST
index 70f1ff4e2eb4..ae2aab5b1be0 100644
--- a/tools/perf/MANIFEST
+++ b/tools/perf/MANIFEST
@@ -7,6 +7,7 @@ tools/lib/traceevent
 tools/lib/api
 tools/lib/bpf
 tools/lib/subcmd
+tools/lib/perf
 tools/lib/argv_split.c
 tools/lib/ctype.c
 tools/lib/hweight.c
diff --git a/tools/perf/Makefile.config b/tools/perf/Makefile.config
index 39c2d941d769..2f8b99c12176 100644
--- a/tools/perf/Makefile.config
+++ b/tools/perf/Makefile.config
@@ -276,7 +276,7 @@ ifeq ($(DEBUG),0)
   endif
 endif
 
-INC_FLAGS += -I$(src-perf)/lib/include
+INC_FLAGS += -I$(srctree)/tools/lib/perf/include
 INC_FLAGS += -I$(src-perf)/util/include
 INC_FLAGS += -I$(src-perf)/arch/$(SRCARCH)/include
 INC_FLAGS += -I$(srctree)/tools/include/
diff --git a/tools/perf/Makefile.perf b/tools/perf/Makefile.perf
index 92ef740cb7af..6e892a95dc8a 100644
--- a/tools/perf/Makefile.perf
+++ b/tools/perf/Makefile.perf
@@ -227,7 +227,7 @@ LIB_DIR         = $(srctree)/tools/lib/api/
 TRACE_EVENT_DIR = $(srctree)/tools/lib/traceevent/
 BPF_DIR         = $(srctree)/tools/lib/bpf/
 SUBCMD_DIR      = $(srctree)/tools/lib/subcmd/
-LIBPERF_DIR     = $(srctree)/tools/perf/lib/
+LIBPERF_DIR     = $(srctree)/tools/lib/perf/
 
 # Set FEATURE_TESTS to 'all' so all possible feature checkers are executed.
 # Without this setting the output feature dump file misses some features, for
* Unmerged path tools/perf/lib/include/internal/xyarray.h
* Unmerged path tools/perf/util/xyarray.h
