i2c: acpi: put device when verifying client fails

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Wolfram Sang <wsa+renesas@sang-engineering.com>
commit 8daee952b4389729358665fb91949460641659d4
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/8daee952.failed

i2c_verify_client() can fail, so we need to put the device when that
happens.

Fixes: 525e6fabeae2 ("i2c / ACPI: add support for ACPI reconfigure notifications")
	Reported-by: Geert Uytterhoeven <geert+renesas@glider.be>
	Signed-off-by: Wolfram Sang <wsa+renesas@sang-engineering.com>
	Reviewed-by: Geert Uytterhoeven <geert+renesas@glider.be>
	Reviewed-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
	Acked-by: Mika Westerberg <mika.westerberg@linux.intel.com>
	Signed-off-by: Wolfram Sang <wsa@the-dreams.de>
(cherry picked from commit 8daee952b4389729358665fb91949460641659d4)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/i2c/i2c-core-acpi.c
diff --cc drivers/i2c/i2c-core-acpi.c
index bdb838081083,8b0ff780919b..000000000000
--- a/drivers/i2c/i2c-core-acpi.c
+++ b/drivers/i2c/i2c-core-acpi.c
@@@ -402,10 -394,17 +402,23 @@@ EXPORT_SYMBOL_GPL(i2c_acpi_find_adapter
  static struct i2c_client *i2c_acpi_find_client_by_adev(struct acpi_device *adev)
  {
  	struct device *dev;
+ 	struct i2c_client *client;
  
++<<<<<<< HEAD
 +	dev = bus_find_device(&i2c_bus_type, NULL, adev,
 +			      i2c_acpi_find_match_device);
 +	return dev ? i2c_verify_client(dev) : NULL;
++=======
+ 	dev = bus_find_device_by_acpi_dev(&i2c_bus_type, adev);
+ 	if (!dev)
+ 		return NULL;
+ 
+ 	client = i2c_verify_client(dev);
+ 	if (!client)
+ 		put_device(dev);
+ 
+ 	return client;
++>>>>>>> 8daee952b438 (i2c: acpi: put device when verifying client fails)
  }
  
  static int i2c_acpi_notify(struct notifier_block *nb, unsigned long value,
* Unmerged path drivers/i2c/i2c-core-acpi.c
