nvme: force complete cancelled requests

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Keith Busch <kbusch@kernel.org>
commit 3382a567efd4015697f087f2e91ac08b90577876
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/3382a567.failed

Use blk_mq_foce_complete_rq() to bypass fake timeout error injection so
that request reclaim may proceed.

	Signed-off-by: Keith Busch <kbusch@kernel.org>
	Reviewed-by: Johannes Thumshirn <johannes.thumshirn@wdc.com>
	Reviewed-by: Ming Lei <ming.lei@redhat.com>
	Reviewed-by: Daniel Wagner <dwagner@suse.de>
	Signed-off-by: Jens Axboe <axboe@kernel.dk>
(cherry picked from commit 3382a567efd4015697f087f2e91ac08b90577876)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/nvme/host/core.c
diff --cc drivers/nvme/host/core.c
index 54bfa09c007b,cbf171636766..000000000000
--- a/drivers/nvme/host/core.c
+++ b/drivers/nvme/host/core.c
@@@ -295,8 -309,8 +295,13 @@@ bool nvme_cancel_request(struct reques
  	if (blk_mq_request_completed(req))
  		return true;
  
++<<<<<<< HEAD
 +	nvme_req(req)->status = NVME_SC_ABORT_REQ;
 +	blk_mq_complete_request(req);
++=======
+ 	nvme_req(req)->status = NVME_SC_HOST_ABORTED_CMD;
+ 	blk_mq_force_complete_rq(req);
++>>>>>>> 3382a567efd4 (nvme: force complete cancelled requests)
  	return true;
  }
  EXPORT_SYMBOL_GPL(nvme_cancel_request);
* Unmerged path drivers/nvme/host/core.c
