ALSA: usb-audio: Convert to the common vmalloc memalloc

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Takashi Iwai <tiwai@suse.de>
commit b315997d7c2295b2b32cb661a584208ab05ffaea
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/b315997d.failed

The recent change (*) in the ALSA memalloc core allows us to drop the
special vmalloc-specific allocation and page handling.  This patch
coverts to the common code.
(*) 1fe7f397cfe2: ALSA: memalloc: Add vmalloc buffer allocation
                  support
    7e8edae39fd1: ALSA: pcm: Handle special page mapping in the
                  default mmap handler

Also, since the SG-buffer-specific PCM ops becomes identical with the
normal PCM ops, unify them again to the single ops, too.

Link: https://lore.kernel.org/r/20191105151856.10785-9-tiwai@suse.de
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit b315997d7c2295b2b32cb661a584208ab05ffaea)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/usb/pcm.c
diff --cc sound/usb/pcm.c
index bccb2ff9cd72,9c8930bb00c8..000000000000
--- a/sound/usb/pcm.c
+++ b/sound/usb/pcm.c
@@@ -780,14 -781,14 +780,23 @@@ static int snd_usb_hw_params(struct snd
  	struct audioformat *fmt;
  	int ret;
  
++<<<<<<< HEAD
 +	if (snd_usb_use_vmalloc)
 +		ret = snd_pcm_lib_alloc_vmalloc_buffer(substream,
 +						       params_buffer_bytes(hw_params));
 +	else
 +		ret = snd_pcm_lib_malloc_pages(substream,
 +					       params_buffer_bytes(hw_params));
++=======
+ 	ret = snd_media_start_pipeline(subs);
+ 	if (ret)
+ 		return ret;
+ 
+ 	ret = snd_pcm_lib_malloc_pages(substream,
+ 				       params_buffer_bytes(hw_params));
++>>>>>>> b315997d7c22 (ALSA: usb-audio: Convert to the common vmalloc memalloc)
  	if (ret < 0)
 -		goto stop_pipeline;
 +		return ret;
  
  	subs->pcm_format = params_format(hw_params);
  	subs->period_bytes = params_period_bytes(hw_params);
* Unmerged path sound/usb/pcm.c
