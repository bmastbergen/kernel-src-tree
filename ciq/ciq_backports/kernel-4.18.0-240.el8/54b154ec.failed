net/mlx5e: CT: Map 128 bits labels to 32 bit map ID

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Eli Britstein <elibr@mellanox.com>
commit 54b154ecfb8c66dfeba6578a64e79c2104da4ced
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/54b154ec.failed

The 128 bits ct_label field is matched using a 32 bit hardware register.
As such, only the lower 32 bits of ct_label field are offloaded. Change
this logic to support setting and matching higher bits too.
Map the 128 bits data to a unique 32 bits ID. Matching is done as exact
match of the mapping ID of key & mask.

	Signed-off-by: Eli Britstein <elibr@mellanox.com>
	Reviewed-by: Oz Shlomo <ozsh@mellanox.com>
	Reviewed-by: Roi Dayan <roid@mellanox.com>
	Reviewed-by: Maor Dickman <maord@mellanox.com>
	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
(cherry picked from commit 54b154ecfb8c66dfeba6578a64e79c2104da4ced)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/en/tc_ct.c
#	drivers/net/ethernet/mellanox/mlx5/core/en/tc_ct.h
#	drivers/net/ethernet/mellanox/mlx5/core/en_tc.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/en_tc.c
index 23a1c21d8bab,7a0c22d05575..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_tc.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_tc.c
@@@ -3644,7 -4400,13 +3644,17 @@@ __mlx5e_add_fdb_flow(struct mlx5e_priv 
  	if (err)
  		goto err_free;
  
++<<<<<<< HEAD
 +	err = parse_tc_fdb_actions(priv, &rule->action, flow, extack);
++=======
+ 	/* actions validation depends on parsing the ct matches first */
+ 	err = mlx5_tc_ct_parse_match(priv, &parse_attr->spec, f,
+ 				     &flow->esw_attr->ct_attr, extack);
+ 	if (err)
+ 		goto err_free;
+ 
+ 	err = parse_tc_fdb_actions(priv, &rule->action, flow, extack, filter_dev);
++>>>>>>> 54b154ecfb8c (net/mlx5e: CT: Map 128 bits labels to 32 bit map ID)
  	if (err)
  		goto err_free;
  
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en/tc_ct.c
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en/tc_ct.h
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en/tc_ct.c
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en/tc_ct.h
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en_tc.c
