EDAC/mce_amd: Print !SMCA processor warning only once

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Prarit Bhargava <prarit@redhat.com>
commit 52cff04a81e9571735976e4d70984e89a7ee3885
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/52cff04a.failed

This warning is output for every virtual CPU in a guest on an EPYC 2
system because kvm doesn't enable SMCA. Once is enough too.

 [ bp: Massage. ]

	Signed-off-by: Prarit Bhargava <prarit@redhat.com>
	Signed-off-by: Borislav Petkov <bp@suse.de>
Link: https://lkml.kernel.org/r/20200217134627.19765-1-prarit@redhat.com
(cherry picked from commit 52cff04a81e9571735976e4d70984e89a7ee3885)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/edac/mce_amd.c
diff --cc drivers/edac/mce_amd.c
index 714e605cce26,8874b7722b2f..000000000000
--- a/drivers/edac/mce_amd.c
+++ b/drivers/edac/mce_amd.c
@@@ -1204,12 -1238,9 +1204,18 @@@ static int __init mce_amd_init(void
  		break;
  
  	case 0x17:
++<<<<<<< HEAD
 +		xec_mask = 0x3f;
 +		if (!boot_cpu_has(X86_FEATURE_SMCA)) {
 +			printk(KERN_WARNING "Decoding supported only on Scalable MCA processors.\n");
 +			goto err_out;
 +		}
 +		break;
++=======
+ 	case 0x18:
+ 		pr_warn_once("Decoding supported only on Scalable MCA processors.\n");
+ 		return -EINVAL;
++>>>>>>> 52cff04a81e9 (EDAC/mce_amd: Print !SMCA processor warning only once)
  
  	default:
  		printk(KERN_WARNING "Huh? What family is it: 0x%x?!\n", c->x86);
* Unmerged path drivers/edac/mce_amd.c
