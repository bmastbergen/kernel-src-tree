io_uring: cleanup io_import_fixed()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Pavel Begunkov <asml.silence@gmail.com>
commit 7d009165550adc64e3561c65ecce564125052e00
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/7d009165.failed

Clean io_import_fixed() call site and make it return proper type.

	Signed-off-by: Pavel Begunkov <asml.silence@gmail.com>
	Signed-off-by: Jens Axboe <axboe@kernel.dk>
(cherry picked from commit 7d009165550adc64e3561c65ecce564125052e00)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/io_uring.c
diff --cc fs/io_uring.c
index 9058714611f6,e44b0e01f1b5..000000000000
--- a/fs/io_uring.c
+++ b/fs/io_uring.c
@@@ -1100,9 -1481,18 +1100,24 @@@ static inline void io_rw_done(struct ki
  	}
  }
  
++<<<<<<< HEAD
 +static int io_import_fixed(struct io_ring_ctx *ctx, int rw,
 +			   const struct io_uring_sqe *sqe,
 +			   struct iov_iter *iter)
++=======
+ static void kiocb_done(struct kiocb *kiocb, ssize_t ret, struct io_kiocb **nxt,
+ 		       bool in_async)
+ {
+ 	if (in_async && ret >= 0 && kiocb->ki_complete == io_complete_rw)
+ 		*nxt = __io_complete_rw(kiocb, ret);
+ 	else
+ 		io_rw_done(kiocb, ret);
+ }
+ 
+ static ssize_t io_import_fixed(struct io_ring_ctx *ctx, int rw,
+ 			       const struct io_uring_sqe *sqe,
+ 			       struct iov_iter *iter)
++>>>>>>> 7d009165550a (io_uring: cleanup io_import_fixed())
  {
  	size_t len = READ_ONCE(sqe->len);
  	struct io_mapped_ubuf *imu;
@@@ -1193,14 -1581,12 +1208,18 @@@ static ssize_t io_import_iovec(struct i
  	 * flag.
  	 */
  	opcode = READ_ONCE(sqe->opcode);
++<<<<<<< HEAD
 +	if (opcode == IORING_OP_READ_FIXED ||
 +	    opcode == IORING_OP_WRITE_FIXED) {
 +		ssize_t ret = io_import_fixed(ctx, rw, sqe, iter);
++=======
+ 	if (opcode == IORING_OP_READ_FIXED || opcode == IORING_OP_WRITE_FIXED) {
++>>>>>>> 7d009165550a (io_uring: cleanup io_import_fixed())
  		*iovec = NULL;
- 		return ret;
+ 		return io_import_fixed(req->ctx, rw, sqe, iter);
  	}
  
 -	if (!req->has_user)
 +	if (!s->has_user)
  		return -EFAULT;
  
  #ifdef CONFIG_COMPAT
* Unmerged path fs/io_uring.c
