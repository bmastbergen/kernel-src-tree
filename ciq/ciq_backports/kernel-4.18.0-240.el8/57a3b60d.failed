ath10k: Add optional qdss clk

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Bjorn Andersson <bjorn.andersson@linaro.org>
commit 57a3b60ddbfa87e8707c453c69915a3c5d2c9e50
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/57a3b60d.failed

The WiFi firmware found on sm8150 requires that the QDSS clock is
ticking in order to operate, so add an optional clock to the binding to
allow this to be specified in the sm8150 dts and add the clock to the
list of clocks in the driver.

	Signed-off-by: Bjorn Andersson <bjorn.andersson@linaro.org>
	Acked-by: Rob Herring <robh@kernel.org>
	Signed-off-by: Kalle Valo <kvalo@codeaurora.org>
(cherry picked from commit 57a3b60ddbfa87e8707c453c69915a3c5d2c9e50)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	Documentation/devicetree/bindings/net/wireless/qcom,ath10k.txt
diff --cc Documentation/devicetree/bindings/net/wireless/qcom,ath10k.txt
index 7fd4e8ce4149,3fc2cce4626b..000000000000
--- a/Documentation/devicetree/bindings/net/wireless/qcom,ath10k.txt
+++ b/Documentation/devicetree/bindings/net/wireless/qcom,ath10k.txt
@@@ -37,12 -49,9 +37,18 @@@ Optional properties
  - clocks: List of clock specifiers, must contain an entry for each required
            entry in clock-names.
  - clock-names: Should contain the clock names "wifi_wcss_cmd", "wifi_wcss_ref",
++<<<<<<< HEAD
 +               "wifi_wcss_rtc".
 +- interrupts: List of interrupt lines. Must contain an entry
 +	      for each entry in the interrupt-names property.
 +- interrupt-names: Must include the entries for MSI interrupt
 +		   names ("msi0" to "msi15") and legacy interrupt
 +		   name ("legacy"),
++=======
+ 	       "wifi_wcss_rtc" for "qcom,ipq4019-wifi" compatible target and
+ 	       "cxo_ref_clk_pin" and optionally "qdss" for "qcom,wcn3990-wifi"
+ 	       compatible target.
++>>>>>>> 57a3b60ddbfa (ath10k: Add optional qdss clk)
  - qcom,msi_addr: MSI interrupt address.
  - qcom,msi_base: Base value to add before writing MSI data into
  		MSI address register.
* Unmerged path Documentation/devicetree/bindings/net/wireless/qcom,ath10k.txt
diff --git a/drivers/net/wireless/ath/ath10k/snoc.c b/drivers/net/wireless/ath/ath10k/snoc.c
index fc377bb35fc7..564484d71439 100644
--- a/drivers/net/wireless/ath/ath10k/snoc.c
+++ b/drivers/net/wireless/ath/ath10k/snoc.c
@@ -46,7 +46,7 @@ static const char * const ath10k_regulators[] = {
 };
 
 static const char * const ath10k_clocks[] = {
-	"cxo_ref_clk_pin",
+	"cxo_ref_clk_pin", "qdss",
 };
 
 static void ath10k_snoc_htc_tx_cb(struct ath10k_ce_pipe *ce_state);
