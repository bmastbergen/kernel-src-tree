KVM: Introduce pv check helpers

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Wanpeng Li <wanpengli@tencent.com>
commit a262bca3aba03f0696995beb223c610e47533db3
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/a262bca3.failed

Introduce some pv check helpers for consistency.

	Suggested-by: Vitaly Kuznetsov <vkuznets@redhat.com>
	Reviewed-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>
	Signed-off-by: Wanpeng Li <wanpengli@tencent.com>
	Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>
(cherry picked from commit a262bca3aba03f0696995beb223c610e47533db3)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/kernel/kvm.c
diff --cc arch/x86/kernel/kvm.c
index c64795383341,7bc0fff3f8e6..000000000000
--- a/arch/x86/kernel/kvm.c
+++ b/arch/x86/kernel/kvm.c
@@@ -632,14 -636,12 +652,20 @@@ static void __init kvm_guest_init(void
  
  	if (kvm_para_has_feature(KVM_FEATURE_STEAL_TIME)) {
  		has_steal_clock = 1;
 -		pv_ops.time.steal_clock = kvm_steal_clock;
 +		pv_time_ops.steal_clock = kvm_steal_clock;
  	}
  
++<<<<<<< HEAD
 +	if (kvm_para_has_feature(KVM_FEATURE_PV_TLB_FLUSH) &&
 +	    !kvm_para_has_hint(KVM_HINTS_REALTIME) &&
 +	    kvm_para_has_feature(KVM_FEATURE_STEAL_TIME)) {
 +		pv_mmu_ops.flush_tlb_others = kvm_flush_tlb_others;
 +		pv_mmu_ops.tlb_remove_table = tlb_remove_table;
++=======
+ 	if (pv_tlb_flush_supported()) {
+ 		pv_ops.mmu.flush_tlb_others = kvm_flush_tlb_others;
+ 		pv_ops.mmu.tlb_remove_table = tlb_remove_table;
++>>>>>>> a262bca3aba0 (KVM: Introduce pv check helpers)
  	}
  
  	if (kvm_para_has_feature(KVM_FEATURE_PV_EOI))
* Unmerged path arch/x86/kernel/kvm.c
