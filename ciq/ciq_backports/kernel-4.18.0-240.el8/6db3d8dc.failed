vhost/vsock: switch to a mutex for vhost_vsock_hash

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
Rebuild_CHGLOG: - [vhost] vsock: switch to a mutex for vhost_vsock_hash (Stefano Garzarella) [1861762]
Rebuild_FUZZ: 93.75%
commit-author Stefan Hajnoczi <stefanha@redhat.com>
commit 6db3d8dc5d73b269987fae60745bb20eae97af61
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/6db3d8dc.failed

Now that there are no more data path users of vhost_vsock_lock, it can
be turned into a mutex.  It's only used by .release() and in the
.ioctl() path.

Depends-on: <20181105103547.22018-1-stefanha@redhat.com>
	Suggested-by: Jason Wang <jasowang@redhat.com>
	Signed-off-by: Stefan Hajnoczi <stefanha@redhat.com>
	Signed-off-by: Michael S. Tsirkin <mst@redhat.com>
	Acked-by: Jason Wang <jasowang@redhat.com>
(cherry picked from commit 6db3d8dc5d73b269987fae60745bb20eae97af61)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/vhost/vsock.c
diff --cc drivers/vhost/vsock.c
index d4101b45a7bb,bc42d38ae031..000000000000
--- a/drivers/vhost/vsock.c
+++ b/drivers/vhost/vsock.c
@@@ -735,8 -642,8 +735,13 @@@ static int vhost_vsock_set_cid(struct v
  		hash_del_rcu(&vsock->hash);
  
  	vsock->guest_cid = guest_cid;
++<<<<<<< HEAD
 +	hash_add_rcu(vhost_vsock_hash, &vsock->hash, vsock->guest_cid);
 +	spin_unlock_bh(&vhost_vsock_lock);
++=======
+ 	hash_add_rcu(vhost_vsock_hash, &vsock->hash, guest_cid);
+ 	mutex_unlock(&vhost_vsock_mutex);
++>>>>>>> 6db3d8dc5d73 (vhost/vsock: switch to a mutex for vhost_vsock_hash)
  
  	return 0;
  }
* Unmerged path drivers/vhost/vsock.c
