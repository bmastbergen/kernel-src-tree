xprtrdma: Remove rpcrdma_sendctx::sc_xprt

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Chuck Lever <chuck.lever@oracle.com>
commit f995879ec4aa8b50c3924fda3014b0ab9acad7bd
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/f995879e.failed

Micro-optimization: Save eight bytes in a frequently allocated
structure.

	Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
	Signed-off-by: Anna Schumaker <Anna.Schumaker@Netapp.com>
(cherry picked from commit f995879ec4aa8b50c3924fda3014b0ab9acad7bd)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/sunrpc/xprtrdma/verbs.c
diff --cc net/sunrpc/xprtrdma/verbs.c
index cfae694214c1,3ab086aa69bb..000000000000
--- a/net/sunrpc/xprtrdma/verbs.c
+++ b/net/sunrpc/xprtrdma/verbs.c
@@@ -73,10 -74,12 +73,11 @@@
  /*
   * internal functions
   */
- static void rpcrdma_sendctx_put_locked(struct rpcrdma_sendctx *sc);
+ static void rpcrdma_sendctx_put_locked(struct rpcrdma_xprt *r_xprt,
+ 				       struct rpcrdma_sendctx *sc);
  static void rpcrdma_reqs_reset(struct rpcrdma_xprt *r_xprt);
 -static void rpcrdma_reps_destroy(struct rpcrdma_buffer *buf);
  static void rpcrdma_mrs_create(struct rpcrdma_xprt *r_xprt);
 -static void rpcrdma_mrs_destroy(struct rpcrdma_xprt *r_xprt);
 +static void rpcrdma_mrs_destroy(struct rpcrdma_buffer *buf);
  static struct rpcrdma_regbuf *
  rpcrdma_regbuf_alloc(size_t size, enum dma_data_direction direction,
  		     gfp_t flags);
@@@ -520,10 -519,9 +521,16 @@@ int rpcrdma_ep_create(struct rpcrdma_xp
  	init_waitqueue_head(&ep->rep_connect_wait);
  	ep->rep_receive_count = 0;
  
++<<<<<<< HEAD
 +	sendcq = ib_alloc_cq(ia->ri_id->device, NULL,
 +			     ep->rep_attr.cap.max_send_wr + 1,
 +			     ia->ri_id->device->num_comp_vectors > 1 ? 1 : 0,
 +			     IB_POLL_WORKQUEUE);
++=======
+ 	sendcq = ib_alloc_cq_any(ia->ri_id->device, r_xprt,
+ 				 ep->rep_attr.cap.max_send_wr + 1,
+ 				 IB_POLL_WORKQUEUE);
++>>>>>>> f995879ec4aa (xprtrdma: Remove rpcrdma_sendctx::sc_xprt)
  	if (IS_ERR(sendcq)) {
  		rc = PTR_ERR(sendcq);
  		goto out1;
* Unmerged path net/sunrpc/xprtrdma/verbs.c
diff --git a/net/sunrpc/xprtrdma/xprt_rdma.h b/net/sunrpc/xprtrdma/xprt_rdma.h
index 2dbd229358d4..b7af129eb637 100644
--- a/net/sunrpc/xprtrdma/xprt_rdma.h
+++ b/net/sunrpc/xprtrdma/xprt_rdma.h
@@ -223,12 +223,10 @@ enum {
 /* struct rpcrdma_sendctx - DMA mapped SGEs to unmap after Send completes
  */
 struct rpcrdma_req;
-struct rpcrdma_xprt;
 struct rpcrdma_sendctx {
 	struct ib_send_wr	sc_wr;
 	struct ib_cqe		sc_cqe;
 	struct ib_device	*sc_device;
-	struct rpcrdma_xprt	*sc_xprt;
 	struct rpcrdma_req	*sc_req;
 	unsigned int		sc_unmap_count;
 	struct ib_sge		sc_sges[];
