drm/amd/display: Calculate scaling ratios on every medium/full update

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Nicholas Kazlauskas <nicholas.kazlauskas@amd.com>
commit 3bae20137cae6c03f58f96c0bc9f3d46f0bc17d4
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/3bae2013.failed

[Why]
If a plane isn't being actively enabled or disabled then DC won't
always recalculate scaling rects and ratios for the primary plane.

This results in only a partial or corrupted rect being displayed on
the screen instead of scaling to fit the screen.

[How]
Add back the logic to recalculate the scaling rects into
dc_commit_updates_for_stream since this is the expected place to
do it in DC.

This was previously removed a few years ago to fix an underscan issue
but underscan is still functional now with this change - and it should
be, since this is only updating to the latest plane state getting passed
in.

	Signed-off-by: Nicholas Kazlauskas <nicholas.kazlauskas@amd.com>
	Reviewed-by: Aric Cyr <Aric.Cyr@amd.com>
	Acked-by: Rodrigo Siqueira <Rodrigo.Siqueira@amd.com>
	Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
(cherry picked from commit 3bae20137cae6c03f58f96c0bc9f3d46f0bc17d4)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/amd/display/dc/core/dc.c
diff --cc drivers/gpu/drm/amd/display/dc/core/dc.c
index d8c0d01bb191,512703eeaf82..000000000000
--- a/drivers/gpu/drm/amd/display/dc/core/dc.c
+++ b/drivers/gpu/drm/amd/display/dc/core/dc.c
@@@ -2096,7 -2504,8 +2096,12 @@@ void dc_commit_updates_for_stream(struc
  
  		if (update_type >= UPDATE_TYPE_MED) {
  			for (j = 0; j < dc->res_pool->pipe_count; j++) {
++<<<<<<< HEAD
 +				struct pipe_ctx *pipe_ctx = &context->res_ctx.pipe_ctx[j];
++=======
+ 				struct pipe_ctx *pipe_ctx =
+ 					&context->res_ctx.pipe_ctx[j];
++>>>>>>> 3bae20137cae (drm/amd/display: Calculate scaling ratios on every medium/full update)
  
  				if (pipe_ctx->plane_state != surface)
  					continue;
* Unmerged path drivers/gpu/drm/amd/display/dc/core/dc.c
