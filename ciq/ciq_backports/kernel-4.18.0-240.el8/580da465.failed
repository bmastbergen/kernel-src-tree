nfsd4: add filename to states output

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Achilles Gaikwad <agaikwad@redhat.com>
commit 580da465a0328d597df0087800717814a62da638
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/580da465.failed

Add filename to states output for ease of debugging.

	Signed-off-by: Achilles Gaikwad <agaikwad@redhat.com>
	Signed-off-by: Kenneth Dsouza <kdsouza@redhat.com>
	Signed-off-by: J. Bruce Fields <bfields@redhat.com>
(cherry picked from commit 580da465a0328d597df0087800717814a62da638)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/nfsd/nfs4state.c
diff --cc fs/nfsd/nfs4state.c
index ca69d814b393,2c8567b32990..000000000000
--- a/fs/nfsd/nfs4state.c
+++ b/fs/nfsd/nfs4state.c
@@@ -2314,9 -2406,14 +2314,18 @@@ static void states_stop(struct seq_fil
  	spin_unlock(&clp->cl_lock);
  }
  
++<<<<<<< HEAD
 +static void nfs4_show_superblock(struct seq_file *s, struct file *f)
++=======
+ static void nfs4_show_fname(struct seq_file *s, struct nfsd_file *f)
+ {
+          seq_printf(s, "filename: \"%pD2\"", f->nf_file);
+ }
+ 
+ static void nfs4_show_superblock(struct seq_file *s, struct nfsd_file *f)
++>>>>>>> 580da465a032 (nfsd4: add filename to states output)
  {
 -	struct inode *inode = f->nf_inode;
 +	struct inode *inode = file_inode(f);
  
  	seq_printf(s, "superblock: \"%02x:%02x:%ld\"",
  					MAJOR(inode->i_sb->s_dev),
@@@ -2367,9 -2464,11 +2376,11 @@@ static int nfs4_show_open(struct seq_fi
  
  	nfs4_show_superblock(s, file);
  	seq_printf(s, ", ");
+ 	nfs4_show_fname(s, file);
+ 	seq_printf(s, ", ");
  	nfs4_show_owner(s, oo);
  	seq_printf(s, " }\n");
 -	nfsd_file_put(file);
 +	fput(file);
  
  	return 0;
  }
@@@ -2400,9 -2499,11 +2411,11 @@@ static int nfs4_show_lock(struct seq_fi
  	nfs4_show_superblock(s, file);
  	/* XXX: open stateid? */
  	seq_printf(s, ", ");
+ 	nfs4_show_fname(s, file);
+ 	seq_printf(s, ", ");
  	nfs4_show_owner(s, oo);
  	seq_printf(s, " }\n");
 -	nfsd_file_put(file);
 +	fput(file);
  
  	return 0;
  }
* Unmerged path fs/nfsd/nfs4state.c
