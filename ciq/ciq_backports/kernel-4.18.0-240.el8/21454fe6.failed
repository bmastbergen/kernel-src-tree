drm/nouveau: gr/gk20a: Use firmware version 0

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Thierry Reding <treding@nvidia.com>
commit 21454fe697fde188ad6fb541f94b9838fa73ab38
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/21454fe6.failed

Tegra firmware doesn't actually use any version numbers and passing -1
causes the existing firmware binaries not to be found. Use version 0 to
find the correct files.

Fixes: ef16dc278ec2 ("drm/nouveau/gr/gf100-: select implementation based on available FW")
	Signed-off-by: Thierry Reding <treding@nvidia.com>
	Reviewed-by: Emil Velikov <emil.l.velikov@gmail.com>
	Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
(cherry picked from commit 21454fe697fde188ad6fb541f94b9838fa73ab38)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/nouveau/nvkm/engine/gr/gk20a.c
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/gr/gk20a.c
index 500cb08dd608,e56880f3e3bd..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gk20a.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gk20a.c
@@@ -340,3 -318,46 +340,49 @@@ gk20a_gr_new(struct nvkm_device *device
  
  	return 0;
  }
++<<<<<<< HEAD
++=======
+ 
+ #if IS_ENABLED(CONFIG_ARCH_TEGRA_124_SOC) || IS_ENABLED(CONFIG_ARCH_TEGRA_132_SOC)
+ MODULE_FIRMWARE("nvidia/gk20a/fecs_data.bin");
+ MODULE_FIRMWARE("nvidia/gk20a/fecs_inst.bin");
+ MODULE_FIRMWARE("nvidia/gk20a/gpccs_data.bin");
+ MODULE_FIRMWARE("nvidia/gk20a/gpccs_inst.bin");
+ MODULE_FIRMWARE("nvidia/gk20a/sw_bundle_init.bin");
+ MODULE_FIRMWARE("nvidia/gk20a/sw_ctx.bin");
+ MODULE_FIRMWARE("nvidia/gk20a/sw_method_init.bin");
+ MODULE_FIRMWARE("nvidia/gk20a/sw_nonctx.bin");
+ #endif
+ 
+ static int
+ gk20a_gr_load(struct gf100_gr *gr, int ver, const struct gf100_gr_fwif *fwif)
+ {
+ 	struct nvkm_subdev *subdev = &gr->base.engine.subdev;
+ 
+ 	if (nvkm_firmware_load_blob(subdev, "", "fecs_inst", ver,
+ 				    &gr->fecs.inst) ||
+ 	    nvkm_firmware_load_blob(subdev, "", "fecs_data", ver,
+ 				    &gr->fecs.data) ||
+ 	    nvkm_firmware_load_blob(subdev, "", "gpccs_inst", ver,
+ 				    &gr->gpccs.inst) ||
+ 	    nvkm_firmware_load_blob(subdev, "", "gpccs_data", ver,
+ 				    &gr->gpccs.data))
+ 		return -ENOENT;
+ 
+ 	gr->firmware = true;
+ 
+ 	return gk20a_gr_load_sw(gr, "", ver);
+ }
+ 
+ static const struct gf100_gr_fwif
+ gk20a_gr_fwif[] = {
+ 	{ 0, gk20a_gr_load, &gk20a_gr },
+ 	{}
+ };
+ 
+ int
+ gk20a_gr_new(struct nvkm_device *device, int index, struct nvkm_gr **pgr)
+ {
+ 	return gf100_gr_new_(gk20a_gr_fwif, device, index, pgr);
+ }
++>>>>>>> 21454fe697fd (drm/nouveau: gr/gk20a: Use firmware version 0)
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/gr/gk20a.c
