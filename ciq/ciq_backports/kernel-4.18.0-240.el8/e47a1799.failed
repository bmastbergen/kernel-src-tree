bpf, testing: Add missing object file to TEST_FILES

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Anders Roxell <anders.roxell@linaro.org>
commit e47a179997ceee6864fbae620eee09ea9c345a4d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/e47a1799.failed

When installing kselftests to its own directory and run the
test_lwt_ip_encap.sh it will complain that test_lwt_ip_encap.o can't be
found. Same with the test_tc_edt.sh test it will complain that
test_tc_edt.o can't be found.

  $ ./test_lwt_ip_encap.sh
  starting egress IPv4 encap test
  Error opening object test_lwt_ip_encap.o: No such file or directory
  Object hashing failed!
  Cannot initialize ELF context!
  Failed to parse eBPF program: Invalid argument

Rework to add test_lwt_ip_encap.o and test_tc_edt.o to TEST_FILES so the
object file gets installed when installing kselftest.

Fixes: 74b5a5968fe8 ("selftests/bpf: Replace test_progs and test_maps w/ general rule")
	Signed-off-by: Anders Roxell <anders.roxell@linaro.org>
	Signed-off-by: Daniel Borkmann <daniel@iogearbox.net>
	Acked-by: Song Liu <songliubraving@fb.com>
Link: https://lore.kernel.org/bpf/20191111161728.8854-1-anders.roxell@linaro.org
(cherry picked from commit e47a179997ceee6864fbae620eee09ea9c345a4d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/testing/selftests/bpf/Makefile
diff --cc tools/testing/selftests/bpf/Makefile
index 5f86f43d0e39,b03dc2298fea..000000000000
--- a/tools/testing/selftests/bpf/Makefile
+++ b/tools/testing/selftests/bpf/Makefile
@@@ -27,28 -30,16 +27,34 @@@ TEST_GEN_PROGS = test_verifier test_ta
  	test_sock test_btf test_sockmap get_cgroup_id_user test_socket_cookie \
  	test_cgroup_storage test_select_reuseport \
  	test_netcnt test_tcpnotify_user test_sock_fields test_sysctl test_hashmap \
 -	test_cgroup_attach xdping test_progs-no_alu32
 +	test_btf_dump test_cgroup_attach test_sockopt test_sockopt_sk \
 +	test_sockopt_multi test_tcp_rtt
 +
 +BPF_OBJ_FILES = $(patsubst %.c,%.o, $(notdir $(wildcard progs/*.c)))
 +TEST_GEN_FILES = $(BPF_OBJ_FILES)
 +
 +BTF_C_FILES = $(wildcard progs/btf_dump_test_case_*.c)
 +TEST_FILES = $(BTF_C_FILES)
 +
 +# Also test sub-register code-gen if LLVM has eBPF v3 processor support which
 +# contains both ALU32 and JMP32 instructions.
 +SUBREG_CODEGEN := $(shell echo "int cal(int a) { return a > 0; }" | \
 +			$(CLANG) -target bpf -O2 -emit-llvm -S -x c - -o - | \
 +			$(LLC) -mattr=+alu32 -mcpu=v3 2>&1 | \
 +			grep 'if w')
 +ifneq ($(SUBREG_CODEGEN),)
 +TEST_GEN_FILES += $(patsubst %.o,alu32/%.o, $(BPF_OBJ_FILES))
 +endif
  
 -# Also test bpf-gcc, if present
++<<<<<<< HEAD
  ifneq ($(BPF_GCC),)
 -TEST_GEN_PROGS += test_progs-bpf_gcc
 +TEST_GEN_FILES += $(patsubst %.o,bpf_gcc/%.o, $(BPF_OBJ_FILES))
  endif
 -
++=======
+ TEST_GEN_FILES =
+ TEST_FILES = test_lwt_ip_encap.o \
+ 	test_tc_edt.o
++>>>>>>> e47a179997ce (bpf, testing: Add missing object file to TEST_FILES)
  
  # Order correspond to 'make run_tests' order
  TEST_PROGS := test_kmod.sh \
* Unmerged path tools/testing/selftests/bpf/Makefile
