drm/bridge: analogix-anx78xx: Fix drm_dp_link helper removal

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Torsten Duwe <duwe@lst.de>
commit 3e138a63d6674a4567a018a31e467567c40b14d5
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/3e138a63.failed

drm_dp_link_rate_to_bw_code and ...bw_code_to_link_rate simply divide by
and multiply with 27000, respectively. Avoid an overflow in the u8 dpcd[0]
and the multiply+divide alltogether.

	Signed-off-by: Torsten Duwe <duwe@lst.de>
Fixes: ff1e8fb68ea0 ("drm/bridge: analogix-anx78xx: Avoid drm_dp_link helpers")
	Cc: Thierry Reding <treding@nvidia.com>
	Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
	Cc: Andrzej Hajda <a.hajda@samsung.com>
	Cc: Neil Armstrong <narmstrong@baylibre.com>
	Cc: Laurent Pinchart <Laurent.pinchart@ideasonboard.com>
	Cc: Jonas Karlman <jonas@kwiboo.se>
	Cc: Jernej Skrabec <jernej.skrabec@siol.net>
	Cc: <stable@vger.kernel.org> # v5.5+
	Reviewed-by: Thierry Reding <treding@nvidia.com>
	Signed-off-by: Thomas Zimmermann <tzimmermann@suse.de>
Link: https://patchwork.freedesktop.org/patch/msgid/20200218155744.9675368BE1@verein.lst.de
(cherry picked from commit 3e138a63d6674a4567a018a31e467567c40b14d5)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/bridge/analogix-anx78xx.c
diff --cc drivers/gpu/drm/bridge/analogix-anx78xx.c
index 56df07cdab68,864423f59d66..000000000000
--- a/drivers/gpu/drm/bridge/analogix-anx78xx.c
+++ b/drivers/gpu/drm/bridge/analogix-anx78xx.c
@@@ -842,9 -722,9 +842,15 @@@ static int anx78xx_dp_link_training(str
  	if (err)
  		return err;
  
++<<<<<<< HEAD:drivers/gpu/drm/bridge/analogix-anx78xx.c
 +	value = drm_dp_link_rate_to_bw_code(anx78xx->link.rate);
 +	err = regmap_write(anx78xx->map[I2C_IDX_TX_P0],
 +			   SP_DP_MAIN_LINK_BW_SET_REG, value);
++=======
+ 	err = regmap_write(anx78xx->map[I2C_IDX_TX_P0],
+ 			   SP_DP_MAIN_LINK_BW_SET_REG,
+ 			   anx78xx->dpcd[DP_MAX_LINK_RATE]);
++>>>>>>> 3e138a63d667 (drm/bridge: analogix-anx78xx: Fix drm_dp_link helper removal):drivers/gpu/drm/bridge/analogix/analogix-anx78xx.c
  	if (err)
  		return err;
  
* Unmerged path drivers/gpu/drm/bridge/analogix-anx78xx.c
