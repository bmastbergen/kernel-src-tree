ASoC: rt5682: move DAI clock registry to I2S mode

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
Rebuild_CHGLOG: - [sound] ALSA: ASoC: rt5682: move DAI clock registry to I2S mode (Jaroslav Kysela) [1797509]
Rebuild_FUZZ: 94.23%
commit-author Shuming Fan <shumingf@realtek.com>
commit 914f674bec6efe42f9d6b036850a618fd1698290
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/914f674b.failed

The SoundWire mode doesn't need the DAI clocks.
Therefore, the DAI clock registry moves to I2S mode case.

	Signed-off-by: Shuming Fan <shumingf@realtek.com>
Link: https://lore.kernel.org/r/20200327073849.18291-1-shumingf@realtek.com
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit 914f674bec6efe42f9d6b036850a618fd1698290)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/codecs/rt5682.c
diff --cc sound/soc/codecs/rt5682.c
index 810ecd9ca49b,ce4fe7a683f9..000000000000
--- a/sound/soc/codecs/rt5682.c
+++ b/sound/soc/codecs/rt5682.c
@@@ -2843,26 -2856,36 +2843,59 @@@ static int rt5682_probe(struct snd_soc_
  #endif
  	rt5682->component = component;
  
++<<<<<<< HEAD
 +#ifdef CONFIG_COMMON_CLK
 +	/* Check if MCLK provided */
 +	rt5682->mclk = devm_clk_get(component->dev, "mclk");
 +	if (IS_ERR(rt5682->mclk)) {
 +		if (PTR_ERR(rt5682->mclk) != -ENOENT) {
 +			ret = PTR_ERR(rt5682->mclk);
 +			return ret;
 +		}
 +		rt5682->mclk = NULL;
 +	}
 +
 +	/* Register CCF DAI clock control */
 +	ret = rt5682_register_dai_clks(component);
 +	if (ret)
 +		return ret;
 +
 +	/* Initial setup for CCF */
 +	rt5682->lrck[RT5682_AIF1] = CLK_48;
 +#endif
 +
++=======
+ 	if (rt5682->is_sdw) {
+ 		slave = rt5682->slave;
+ 		time = wait_for_completion_timeout(
+ 			&slave->initialization_complete,
+ 			msecs_to_jiffies(RT5682_PROBE_TIMEOUT));
+ 		if (!time) {
+ 			dev_err(&slave->dev, "Initialization not complete, timed out\n");
+ 			return -ETIMEDOUT;
+ 		}
+ 	} else {
+ #ifdef CONFIG_COMMON_CLK
+ 		/* Check if MCLK provided */
+ 		rt5682->mclk = devm_clk_get(component->dev, "mclk");
+ 		if (IS_ERR(rt5682->mclk)) {
+ 			if (PTR_ERR(rt5682->mclk) != -ENOENT) {
+ 				ret = PTR_ERR(rt5682->mclk);
+ 				return ret;
+ 			}
+ 			rt5682->mclk = NULL;
+ 		} else {
+ 			/* Register CCF DAI clock control */
+ 			ret = rt5682_register_dai_clks(component);
+ 			if (ret)
+ 				return ret;
+ 		}
+ 		/* Initial setup for CCF */
+ 		rt5682->lrck[RT5682_AIF1] = CLK_48;
+ #endif
+ 	}
+ 
++>>>>>>> 914f674bec6e (ASoC: rt5682: move DAI clock registry to I2S mode)
  	return 0;
  }
  
* Unmerged path sound/soc/codecs/rt5682.c
