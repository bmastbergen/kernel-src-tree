memblock: add align parameter to memblock_alloc_node()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Mike Rapoport <rppt@linux.vnet.ibm.com>
commit 3913c8f9f96bb75a062ad16ea10a1cdad48bb716
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/3913c8f9.failed

With the align parameter memblock_alloc_node() can be used as drop in
replacement for alloc_bootmem_pages_node() and __alloc_bootmem_node(),
which is done in the following patches.

Link: http://lkml.kernel.org/r/1536927045-23536-15-git-send-email-rppt@linux.vnet.ibm.com
	Signed-off-by: Mike Rapoport <rppt@linux.vnet.ibm.com>
	Cc: Catalin Marinas <catalin.marinas@arm.com>
	Cc: Chris Zankel <chris@zankel.net>
	Cc: "David S. Miller" <davem@davemloft.net>
	Cc: Geert Uytterhoeven <geert@linux-m68k.org>
	Cc: Greentime Hu <green.hu@gmail.com>
	Cc: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
	Cc: Guan Xuetao <gxt@pku.edu.cn>
	Cc: Ingo Molnar <mingo@redhat.com>
	Cc: "James E.J. Bottomley" <jejb@parisc-linux.org>
	Cc: Jonas Bonn <jonas@southpole.se>
	Cc: Jonathan Corbet <corbet@lwn.net>
	Cc: Ley Foon Tan <lftan@altera.com>
	Cc: Mark Salter <msalter@redhat.com>
	Cc: Martin Schwidefsky <schwidefsky@de.ibm.com>
	Cc: Matt Turner <mattst88@gmail.com>
	Cc: Michael Ellerman <mpe@ellerman.id.au>
	Cc: Michal Hocko <mhocko@suse.com>
	Cc: Michal Simek <monstr@monstr.eu>
	Cc: Palmer Dabbelt <palmer@sifive.com>
	Cc: Paul Burton <paul.burton@mips.com>
	Cc: Richard Kuo <rkuo@codeaurora.org>
	Cc: Richard Weinberger <richard@nod.at>
	Cc: Rich Felker <dalias@libc.org>
	Cc: Russell King <linux@armlinux.org.uk>
	Cc: Serge Semin <fancer.lancer@gmail.com>
	Cc: Thomas Gleixner <tglx@linutronix.de>
	Cc: Tony Luck <tony.luck@intel.com>
	Cc: Vineet Gupta <vgupta@synopsys.com>
	Cc: Yoshinori Sato <ysato@users.sourceforge.jp>
	Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
	Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
(cherry picked from commit 3913c8f9f96bb75a062ad16ea10a1cdad48bb716)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/linux/bootmem.h
#	mm/sparse.c
diff --cc include/linux/bootmem.h
index 42515195d7d8,3896af205303..000000000000
--- a/include/linux/bootmem.h
+++ b/include/linux/bootmem.h
@@@ -233,10 -156,10 +233,17 @@@ static inline void * __init memblock_vi
  						    NUMA_NO_NODE);
  }
  
++<<<<<<< HEAD
 +static inline void * __init memblock_virt_alloc_node(
 +						phys_addr_t size, int nid)
 +{
 +	return memblock_virt_alloc_try_nid(size, 0, BOOTMEM_LOW_LIMIT,
++=======
+ static inline void * __init memblock_alloc_node(
+ 		phys_addr_t size, phys_addr_t align, int nid)
+ {
+ 	return memblock_alloc_try_nid(size, align, BOOTMEM_LOW_LIMIT,
++>>>>>>> 3913c8f9f96b (memblock: add align parameter to memblock_alloc_node())
  					    BOOTMEM_ALLOC_ACCESSIBLE, nid);
  }
  
diff --cc mm/sparse.c
index 743faed13a8f,d1296610562b..000000000000
--- a/mm/sparse.c
+++ b/mm/sparse.c
@@@ -68,7 -68,7 +68,11 @@@ static noinline struct mem_section __re
  	if (slab_is_available())
  		section = kzalloc_node(array_size, GFP_KERNEL, nid);
  	else
++<<<<<<< HEAD
 +		section = memblock_virt_alloc_node(array_size, nid);
++=======
+ 		section = memblock_alloc_node(array_size, 0, nid);
++>>>>>>> 3913c8f9f96b (memblock: add align parameter to memblock_alloc_node())
  
  	return section;
  }
* Unmerged path include/linux/bootmem.h
* Unmerged path mm/sparse.c
