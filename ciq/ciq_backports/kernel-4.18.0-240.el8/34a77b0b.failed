drm/i915: Add Wa_1605460711 / Wa_1408767742 to ICL and EHL

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Matt Roper <matthew.d.roper@intel.com>
commit 34a77b0b7b867d24945be7722ce1543c48161450
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/34a77b0b.failed

This workaround appears under two different numbers (and with somewhat
confused stepping applicability on ICL).  Ultimately it appears we
should just implement this for all stepping of ICL and EHL.

Note that this is identical to Wa_1407928979:tgl that already exists in
our driver too...yet another number referencing the same actual
workaround.

	Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20200311162300.1838847-7-matthew.d.roper@intel.com
	Reviewed-by: Mika Kuoppala <mika.kuoppala@linux.intel.com>
(cherry picked from commit 34a77b0b7b867d24945be7722ce1543c48161450)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/gt/intel_workarounds.c
diff --cc drivers/gpu/drm/i915/gt/intel_workarounds.c
index f8ed29b62e58,5176ad1a3976..000000000000
--- a/drivers/gpu/drm/i915/gt/intel_workarounds.c
+++ b/drivers/gpu/drm/i915/gt/intel_workarounds.c
@@@ -1296,10 -1461,44 +1296,47 @@@ rcs_engine_wa_init(struct intel_engine_
  		wa_write_or(wal,
  			    GEN7_SARCHKMD,
  			    GEN7_DISABLE_SAMPLER_PREFETCH);
++<<<<<<< HEAD
++=======
+ 
+ 		/* Wa_1409178092:icl */
+ 		wa_write_masked_or(wal,
+ 				   GEN11_SCRATCH2,
+ 				   GEN11_COHERENT_PARTIAL_WRITE_MERGE_ENABLE,
+ 				   0);
+ 
+ 		/* WaEnable32PlaneMode:icl */
+ 		wa_masked_en(wal, GEN9_CSFE_CHICKEN1_RCS,
+ 			     GEN11_ENABLE_32_PLANE_MODE);
+ 
+ 		/*
+ 		 * Wa_1408615072:icl,ehl  (vsunit)
+ 		 * Wa_1407596294:icl,ehl  (hsunit)
+ 		 */
+ 		wa_write_or(wal, UNSLICE_UNIT_LEVEL_CLKGATE,
+ 			    VSUNIT_CLKGATE_DIS | HSUNIT_CLKGATE_DIS);
+ 
+ 		/* Wa_1407352427:icl,ehl */
+ 		wa_write_or(wal, UNSLICE_UNIT_LEVEL_CLKGATE2,
+ 			    PSDUNIT_CLKGATE_DIS);
+ 
+ 		/* Wa_1406680159:icl,ehl */
+ 		wa_write_or(wal,
+ 			    SUBSLICE_UNIT_LEVEL_CLKGATE,
+ 			    GWUNIT_CLKGATE_DIS);
+ 
+ 		/*
+ 		 * Wa_1408767742:icl[a2..forever],ehl[all]
+ 		 * Wa_1605460711:icl[a0..c0]
+ 		 */
+ 		wa_write_or(wal,
+ 			    GEN7_FF_THREAD_MODE,
+ 			    GEN12_FF_TESSELATION_DOP_GATE_DISABLE);
++>>>>>>> 34a77b0b7b86 (drm/i915: Add Wa_1605460711 / Wa_1408767742 to ICL and EHL)
  	}
  
 -	if (IS_GEN_RANGE(i915, 9, 12)) {
 -		/* FtrPerCtxtPreemptionGranularityControl:skl,bxt,kbl,cfl,cnl,icl,tgl */
 +	if (IS_GEN_RANGE(i915, 9, 11)) {
 +		/* FtrPerCtxtPreemptionGranularityControl:skl,bxt,kbl,cfl,cnl,icl */
  		wa_masked_en(wal,
  			     GEN7_FF_SLICE_CS_CHICKEN1,
  			     GEN9_FFSC_PERCTX_PREEMPT_CTRL);
* Unmerged path drivers/gpu/drm/i915/gt/intel_workarounds.c
