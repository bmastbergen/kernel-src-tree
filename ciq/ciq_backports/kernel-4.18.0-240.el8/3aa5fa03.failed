io_uring: kill dead REQ_F_LINK_DONE flag

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Jens Axboe <axboe@kernel.dk>
commit 3aa5fa030558e2b0da284fd069aeb7178543c987
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/3aa5fa03.failed

We had no more use for this flag after the conversion to io-wq, kill it
off.

Fixes: 561fb04a6a22 ("io_uring: replace workqueue usage with io-wq")
	Signed-off-by: Jens Axboe <axboe@kernel.dk>
(cherry picked from commit 3aa5fa030558e2b0da284fd069aeb7178543c987)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/io_uring.c
diff --cc fs/io_uring.c
index fca9cdc96d77,cfdb51dd669e..000000000000
--- a/fs/io_uring.c
+++ b/fs/io_uring.c
@@@ -334,9 -329,12 +334,8 @@@ struct io_kiocb 
  #define REQ_F_IO_DRAIN		16	/* drain existing IO first */
  #define REQ_F_IO_DRAINED	32	/* drain done */
  #define REQ_F_LINK		64	/* linked sqes */
- #define REQ_F_LINK_DONE		128	/* linked sqes done */
  #define REQ_F_FAIL_LINK		256	/* fail rest of links */
  #define REQ_F_SHADOW_DRAIN	512	/* link-drain shadow req */
 -#define REQ_F_TIMEOUT		1024	/* timeout request */
 -#define REQ_F_ISREG		2048	/* regular file */
 -#define REQ_F_MUST_PUNT		4096	/* must be punted even for NONBLOCK */
 -#define REQ_F_INFLIGHT		8192	/* on inflight list */
  	u64			user_data;
  	u32			result;
  	u32			sequence;
@@@ -650,9 -730,14 +649,20 @@@ static void io_req_link_next(struct io_
  			nxt->flags |= REQ_F_LINK;
  		}
  
++<<<<<<< HEAD
 +		nxt->flags |= REQ_F_LINK_DONE;
 +		INIT_WORK(&nxt->work, io_sq_wq_submit_work);
 +		io_queue_async_work(req->ctx, nxt);
++=======
+ 		/*
+ 		 * If we're in async work, we can continue processing the chain
+ 		 * in this context instead of having to queue up new async work.
+ 		 */
+ 		if (nxtptr && current_work())
+ 			*nxtptr = nxt;
+ 		else
+ 			io_queue_async_work(req->ctx, nxt);
++>>>>>>> 3aa5fa030558 (io_uring: kill dead REQ_F_LINK_DONE flag)
  	}
  }
  
* Unmerged path fs/io_uring.c
