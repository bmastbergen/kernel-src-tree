KVM: VMX: Directly use VMX capabilities helper to detect RDTSCP support

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Sean Christopherson <sean.j.christopherson@intel.com>
commit a7a200eb4c698b70f60a1b8e4e2c6e1c3fcb982e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/a7a200eb.failed

Use cpu_has_vmx_rdtscp() directly when computing secondary exec controls
and drop the now defunct vmx_rdtscp_supported().

No functional change intended.

	Reviewed-by: Vitaly Kuznetsov <vkuznets@redhat.com>
	Signed-off-by: Sean Christopherson <sean.j.christopherson@intel.com>
	Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>
(cherry picked from commit a7a200eb4c698b70f60a1b8e4e2c6e1c3fcb982e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/kvm/vmx/vmx.c
diff --cc arch/x86/kvm/vmx/vmx.c
index b4f527d117f1,e5aeb6f038e6..000000000000
--- a/arch/x86/kvm/vmx/vmx.c
+++ b/arch/x86/kvm/vmx/vmx.c
@@@ -1701,16 -1687,6 +1701,19 @@@ static void vmx_queue_exception(struct 
  	vmx_clear_hlt(vcpu);
  }
  
++<<<<<<< HEAD
 +static bool vmx_rdtscp_supported(void)
 +{
 +	return cpu_has_vmx_rdtscp();
 +}
 +
 +static bool vmx_invpcid_supported(void)
 +{
 +	return cpu_has_vmx_invpcid();
 +}
 +
++=======
++>>>>>>> a7a200eb4c69 (KVM: VMX: Directly use VMX capabilities helper to detect RDTSCP support)
  /*
   * Swap MSR entry in host/guest MSR entry array.
   */
* Unmerged path arch/x86/kvm/vmx/vmx.c
