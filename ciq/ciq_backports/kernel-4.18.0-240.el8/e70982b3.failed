pinctrl: baytrail: Move IRQ valid mask initialization to a dedicated callback

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Andy Shevchenko <andriy.shevchenko@linux.intel.com>
commit e70982b3abec4fb6e2ce9489f071080ca84e4bc7
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/e70982b3.failed

There is a logical continuation of the commit 5fbe5b5883f8 ("gpio: Initialize
the irqchip valid_mask with a callback") to split IRQ initialization to
hardware and valid mask setup parts.

	Acked-by: Hans de Goede <hdegoede@redhat.com>
	Acked-by: Mika Westerberg <mika.westerberg@linux.intel.com>
	Reviewed-by: Linus Walleij <linus.walleij@linaro.org>
	Signed-off-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
(cherry picked from commit e70982b3abec4fb6e2ce9489f071080ca84e4bc7)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/pinctrl/intel/pinctrl-baytrail.c
diff --cc drivers/pinctrl/intel/pinctrl-baytrail.c
index e4fb0870066b,ea61a19857c1..000000000000
--- a/drivers/pinctrl/intel/pinctrl-baytrail.c
+++ b/drivers/pinctrl/intel/pinctrl-baytrail.c
@@@ -1443,12 -1429,14 +1443,16 @@@ static void byt_gpio_irq_handler(struc
  	chip->irq_eoi(data);
  }
  
 -static void byt_init_irq_valid_mask(struct gpio_chip *chip,
 -				    unsigned long *valid_mask,
 -				    unsigned int ngpios)
 +static void byt_gpio_irq_init_hw(struct byt_gpio *vg)
  {
++<<<<<<< HEAD
 +	struct gpio_chip *gc = &vg->chip;
++=======
+ 	struct byt_gpio *vg = gpiochip_get_data(chip);
++>>>>>>> e70982b3abec (pinctrl: baytrail: Move IRQ valid mask initialization to a dedicated callback)
  	struct device *dev = &vg->pdev->dev;
  	void __iomem *reg;
- 	u32 base, value;
+ 	u32 value;
  	int i;
  
  	/*
@@@ -1469,7 -1457,7 +1473,11 @@@
  
  		value = readl(reg);
  		if (value & BYT_DIRECT_IRQ_EN) {
++<<<<<<< HEAD
 +			clear_bit(i, gc->irq.valid_mask);
++=======
+ 			clear_bit(i, valid_mask);
++>>>>>>> e70982b3abec (pinctrl: baytrail: Move IRQ valid mask initialization to a dedicated callback)
  			dev_dbg(dev, "excluding GPIO %d from IRQ domain\n", i);
  		} else if ((value & BYT_PIN_MUX) == byt_get_gpio_mux(vg, i)) {
  			byt_gpio_clear_triggering(vg, i);
* Unmerged path drivers/pinctrl/intel/pinctrl-baytrail.c
