perf/x86/cstate: Add Tremont support

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Kan Liang <kan.liang@linux.intel.com>
commit ecf71fbccb9ac5cb964eb7de59bb9da3755b7885
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/ecf71fbc.failed

Tremont is Intel's successor to Goldmont Plus. From the perspective of
Intel cstate residency counters, there is nothing changed compared with
Goldmont Plus and Goldmont.

Share glm_cstates with Goldmont Plus and Goldmont.
Update the comments for Tremont.

	Signed-off-by: Kan Liang <kan.liang@linux.intel.com>
	Signed-off-by: Peter Zijlstra (Intel) <peterz@infradead.org>
	Signed-off-by: Ingo Molnar <mingo@kernel.org>
	Reviewed-by: Andi Kleen <ak@linux.intel.com>
Link: https://lkml.kernel.org/r/1580236279-35492-2-git-send-email-kan.liang@linux.intel.com
(cherry picked from commit ecf71fbccb9ac5cb964eb7de59bb9da3755b7885)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/events/intel/cstate.c
diff --cc arch/x86/events/intel/cstate.c
index 3bd898f59953,4814c964692c..000000000000
--- a/arch/x86/events/intel/cstate.c
+++ b/arch/x86/events/intel/cstate.c
@@@ -50,7 -50,8 +50,12 @@@
   *	MSR_CORE_C6_RESIDENCY: CORE C6 Residency Counter
   *			       perf code: 0x02
   *			       Available model: SLM,AMT,NHM,WSM,SNB,IVB,HSW,BDW,
++<<<<<<< HEAD
 + *						SKL,KNL,GLM,CNL,KBL,CML
++=======
+  *						SKL,KNL,GLM,CNL,KBL,CML,ICL,TGL,
+  *						TNT
++>>>>>>> ecf71fbccb9a (perf/x86/cstate: Add Tremont support)
   *			       Scope: Core
   *	MSR_CORE_C7_RESIDENCY: CORE C7 Residency Counter
   *			       perf code: 0x03
@@@ -59,17 -61,18 +64,31 @@@
   *	MSR_PKG_C2_RESIDENCY:  Package C2 Residency Counter.
   *			       perf code: 0x00
   *			       Available model: SNB,IVB,HSW,BDW,SKL,KNL,GLM,CNL,
++<<<<<<< HEAD
 + *						KBL,CML
++=======
+  *						KBL,CML,ICL,TGL,TNT
++>>>>>>> ecf71fbccb9a (perf/x86/cstate: Add Tremont support)
   *			       Scope: Package (physical package)
   *	MSR_PKG_C3_RESIDENCY:  Package C3 Residency Counter.
   *			       perf code: 0x01
   *			       Available model: NHM,WSM,SNB,IVB,HSW,BDW,SKL,KNL,
++<<<<<<< HEAD
 + *						GLM,CNL,KBL,CML
 + *			       Scope: Package (physical package)
 + *	MSR_PKG_C6_RESIDENCY:  Package C6 Residency Counter.
 + *			       perf code: 0x02
 + *			       Available model: SLM,AMT,NHM,WSM,SNB,IVB,HSW,BDW
 + *						SKL,KNL,GLM,CNL,KBL,CML
++=======
+  *						GLM,CNL,KBL,CML,ICL,TGL,TNT
+  *			       Scope: Package (physical package)
+  *	MSR_PKG_C6_RESIDENCY:  Package C6 Residency Counter.
+  *			       perf code: 0x02
+  *			       Available model: SLM,AMT,NHM,WSM,SNB,IVB,HSW,BDW,
+  *						SKL,KNL,GLM,CNL,KBL,CML,ICL,TGL,
+  *						TNT
++>>>>>>> ecf71fbccb9a (perf/x86/cstate: Add Tremont support)
   *			       Scope: Package (physical package)
   *	MSR_PKG_C7_RESIDENCY:  Package C7 Residency Counter.
   *			       perf code: 0x03
@@@ -86,7 -89,8 +105,12 @@@
   *			       Scope: Package (physical package)
   *	MSR_PKG_C10_RESIDENCY: Package C10 Residency Counter.
   *			       perf code: 0x06
++<<<<<<< HEAD
 + *			       Available model: HSW ULT,KBL,GLM,CNL,CML
++=======
+  *			       Available model: HSW ULT,KBL,GLM,CNL,CML,ICL,TGL,
+  *						TNT
++>>>>>>> ecf71fbccb9a (perf/x86/cstate: Add Tremont support)
   *			       Scope: Package (physical package)
   *
   */
@@@ -624,13 -641,16 +648,14 @@@ static const struct x86_cpu_id intel_cs
  	X86_CSTATES_MODEL(INTEL_FAM6_XEON_PHI_KNL, knl_cstates),
  	X86_CSTATES_MODEL(INTEL_FAM6_XEON_PHI_KNM, knl_cstates),
  
 -	X86_CSTATES_MODEL(INTEL_FAM6_ATOM_GOLDMONT,   glm_cstates),
 +	X86_CSTATES_MODEL(INTEL_FAM6_ATOM_GOLDMONT, glm_cstates),
  	X86_CSTATES_MODEL(INTEL_FAM6_ATOM_GOLDMONT_D, glm_cstates),
- 
  	X86_CSTATES_MODEL(INTEL_FAM6_ATOM_GOLDMONT_PLUS, glm_cstates),
+ 	X86_CSTATES_MODEL(INTEL_FAM6_ATOM_TREMONT_D, glm_cstates),
+ 	X86_CSTATES_MODEL(INTEL_FAM6_ATOM_TREMONT, glm_cstates),
  
 -	X86_CSTATES_MODEL(INTEL_FAM6_ICELAKE_L, icl_cstates),
 -	X86_CSTATES_MODEL(INTEL_FAM6_ICELAKE,   icl_cstates),
 -	X86_CSTATES_MODEL(INTEL_FAM6_TIGERLAKE_L, icl_cstates),
 -	X86_CSTATES_MODEL(INTEL_FAM6_TIGERLAKE, icl_cstates),
 +	X86_CSTATES_MODEL(INTEL_FAM6_ICELAKE_L, snb_cstates),
 +	X86_CSTATES_MODEL(INTEL_FAM6_ICELAKE, snb_cstates),
  	{ },
  };
  MODULE_DEVICE_TABLE(x86cpu, intel_cstates_match);
* Unmerged path arch/x86/events/intel/cstate.c
