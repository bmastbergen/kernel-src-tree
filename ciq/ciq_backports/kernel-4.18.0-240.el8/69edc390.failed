drm/i915/ggtt: do not set bits 1-11 in gen12 ptes

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
commit 69edc390a54268d41e45089cb972bf71510f5f07
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/69edc390.failed

On TGL, bits 2-4 in the GGTT PTE are not ignored anymore and are
instead used for some extra VT-d capabilities. We don't (yet?) have
support for those capabilities, but, given that we shared the pte_encode
function betweed GGTT and PPGTT, we still set those bits to the PPGTT
PPAT values. The DMA engine gets very confused when those bits are
set while the iommu is enabled, leading to errors. E.g. when loading
the GuC we get:

[    9.796218] DMAR: DRHD: handling fault status reg 2
[    9.796235] DMAR: [DMA Write] Request device [00:02.0] PASID ffffffff fault addr 0 [fault reason 02] Present bit in context entry is clear
[    9.899215] [drm:intel_guc_fw_upload [i915]] *ERROR* GuC firmware signature verification failed

To fix this, just have dedicated gen8_pte_encode function per type of
gtt. Also, explicitly set vm->pte_encode for gen8_ppgtt, even if we
don't use it, to make sure we don't accidentally assign it to the GGTT
one, like we do for gen6_ppgtt, in case we need it in the future.

	Reported-by: "Sodhi, Vunny" <vunny.sodhi@intel.com>
	Signed-off-by: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
	Cc: Chris Wilson <chris@chris-wilson.co.uk>
	Cc: Mika Kuoppala <mika.kuoppala@linux.intel.com>
	Cc: Matthew Auld <matthew.auld@intel.com>
	Cc: Michal Wajdeczko <michal.wajdeczko@intel.com>
	Reviewed-by: Mika Kuoppala <mika.kuoppala@linux.intel.com>
	Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
Link: https://patchwork.freedesktop.org/patch/msgid/20200226185657.26445-1-daniele.ceraolospurio@intel.com
(cherry picked from commit 69edc390a54268d41e45089cb972bf71510f5f07)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/gt/gen8_ppgtt.c
#	drivers/gpu/drm/i915/gt/intel_ggtt.c
#	drivers/gpu/drm/i915/gt/intel_gtt.c
#	drivers/gpu/drm/i915/gt/intel_gtt.h
* Unmerged path drivers/gpu/drm/i915/gt/gen8_ppgtt.c
* Unmerged path drivers/gpu/drm/i915/gt/intel_ggtt.c
* Unmerged path drivers/gpu/drm/i915/gt/intel_gtt.c
* Unmerged path drivers/gpu/drm/i915/gt/intel_gtt.h
* Unmerged path drivers/gpu/drm/i915/gt/gen8_ppgtt.c
* Unmerged path drivers/gpu/drm/i915/gt/intel_ggtt.c
* Unmerged path drivers/gpu/drm/i915/gt/intel_gtt.c
* Unmerged path drivers/gpu/drm/i915/gt/intel_gtt.h
