ALSA: usb-audio: Apply 48kHz fixed rate playback for Jabra Evolve 65 headset

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Takashi Iwai <tiwai@suse.de>
commit 74f73476c3755664504b7d266b5e8f91050ffed9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/74f73476.failed

Jabra Evolve 65 headset appears as if supporting lower rates than
48kHz, but it actually doesn't work but with 48kHz for playback.

This patch applies a workaround to enforce the 48kHz like LINE6
devices already did.  The workaround is put in a unified helper
function, set_fixed_rate(), to be called from both places now.

BugLink: https://bugzilla.kernel.org/show_bug.cgi?id=206149
Link: https://lore.kernel.org/r/20200211111419.5895-1-tiwai@suse.de
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit 74f73476c3755664504b7d266b5e8f91050ffed9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/usb/format.c
diff --cc sound/usb/format.c
index 450c82072f60,50cb183958bf..000000000000
--- a/sound/usb/format.c
+++ b/sound/usb/format.c
@@@ -296,17 -317,10 +317,24 @@@ static int line6_parse_audio_format_rat
  	case USB_ID(0x0e41, 0x4242): /* Line6 Helix Rack */
  	case USB_ID(0x0e41, 0x4244): /* Line6 Helix LT */
  	case USB_ID(0x0e41, 0x4246): /* Line6 HX-Stomp */
++<<<<<<< HEAD
 +		/* supported rates: 48Khz */
 +		kfree(fp->rate_table);
 +		fp->rate_table = kmalloc(sizeof(int), GFP_KERNEL);
 +		if (!fp->rate_table)
 +			return -ENOMEM;
 +		fp->nr_rates = 1;
 +		fp->rate_min = 48000;
 +		fp->rate_max = 48000;
 +		fp->rates = SNDRV_PCM_RATE_48000;
 +		fp->rate_table[0] = 48000;
 +		return 0;
++=======
+ 	case USB_ID(0x0e41, 0x4248): /* Line6 Helix >= fw 2.82 */
+ 	case USB_ID(0x0e41, 0x4249): /* Line6 Helix Rack >= fw 2.82 */
+ 	case USB_ID(0x0e41, 0x424a): /* Line6 Helix LT >= fw 2.82 */
+ 		return set_fixed_rate(fp, 48000, SNDRV_PCM_RATE_48000);
++>>>>>>> 74f73476c375 (ALSA: usb-audio: Apply 48kHz fixed rate playback for Jabra Evolve 65 headset)
  	}
  
  	return -ENODEV;
* Unmerged path sound/usb/format.c
