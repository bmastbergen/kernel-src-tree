perf evswitch: Introduce init() method to set the on/off evsels from the command line

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Arnaldo Carvalho de Melo <acme@redhat.com>
commit 124e02be72fdff05ab5d7f004a3c0d4061569380
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/124e02be.failed

Another step in having all the boilerplate in just one place to then use
in the other tools.

	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: Florian Weimer <fweimer@redhat.com>
	Cc: Jiri Olsa <jolsa@kernel.org>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: William Cohen <wcohen@redhat.com>
Link: https://lkml.kernel.org/n/tip-snreb1wmwyjei3eefwotxp1l@git.kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 124e02be72fdff05ab5d7f004a3c0d4061569380)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/builtin-script.c
#	tools/perf/util/evswitch.c
#	tools/perf/util/evswitch.h
diff --cc tools/perf/builtin-script.c
index e747fa78aabb,1764efd16cd4..000000000000
--- a/tools/perf/builtin-script.c
+++ b/tools/perf/builtin-script.c
@@@ -3863,6 -3868,10 +3863,13 @@@ int cmd_script(int argc, const char **a
  						  script.range_num);
  	}
  
++<<<<<<< HEAD
++=======
+ 	err = evswitch__init(&script.evswitch, session->evlist, stderr);
+ 	if (err)
+ 		goto out_delete;
+ 
++>>>>>>> 124e02be72fd (perf evswitch: Introduce init() method to set the on/off evsels from the command line)
  	err = __cmd_script(&script);
  
  	flush_scripting();
diff --cc tools/perf/util/evswitch.h
index bb88e8002f39,fd30460b6218..000000000000
--- a/tools/perf/util/evswitch.h
+++ b/tools/perf/util/evswitch.h
@@@ -13,4 -16,16 +15,19 @@@ struct evswitch 
  	bool	     show_on_off_events;
  };
  
++<<<<<<< HEAD
++=======
+ int evswitch__init(struct evswitch *evswitch, struct evlist *evlist, FILE *fp);
+ 
+ bool evswitch__discard(struct evswitch *evswitch, struct evsel *evsel);
+ 
+ #define OPTS_EVSWITCH(evswitch)								  \
+ 	OPT_STRING(0, "switch-on", &(evswitch)->on_name,				  \
+ 		   "event", "Consider events after the ocurrence of this event"),	  \
+ 	OPT_STRING(0, "switch-off", &(evswitch)->off_name,				  \
+ 		   "event", "Stop considering events after the ocurrence of this event"), \
+ 	OPT_BOOLEAN(0, "show-on-off-events", &(evswitch)->show_on_off_events,		  \
+ 		    "Show the on/off switch events, used with --switch-on and --switch-off")
+ 
++>>>>>>> 124e02be72fd (perf evswitch: Introduce init() method to set the on/off evsels from the command line)
  #endif /* __PERF_EVSWITCH_H */
* Unmerged path tools/perf/util/evswitch.c
* Unmerged path tools/perf/builtin-script.c
* Unmerged path tools/perf/util/evswitch.c
* Unmerged path tools/perf/util/evswitch.h
