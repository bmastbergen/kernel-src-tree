modpost: always show verbose warning for section mismatch

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Masahiro Yamada <yamada.masahiro@socionext.com>
commit 46c7dd56d54133e3fb9414844d90e563627f3feb
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/46c7dd56.failed

Unless CONFIG_DEBUG_SECTION_MISMATCH is enabled, modpost only shows
the number of section mismatches.

If you want to know the symbols causing the issue, you need to rebuild
with CONFIG_DEBUG_SECTION_MISMATCH. It is tedious.

I think it is fine to show annoying warning when a new section mismatch
comes in.

	Signed-off-by: Masahiro Yamada <yamada.masahiro@socionext.com>
(cherry picked from commit 46c7dd56d54133e3fb9414844d90e563627f3feb)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	scripts/mod/modpost.c
diff --cc scripts/mod/modpost.c
index 668b67778301,0b0d1080b1c5..000000000000
--- a/scripts/mod/modpost.c
+++ b/scripts/mod/modpost.c
@@@ -2420,7 -2428,7 +2415,11 @@@ int main(int argc, char **argv
  	struct ext_sym_list *extsym_iter;
  	struct ext_sym_list *extsym_start = NULL;
  
++<<<<<<< HEAD
 +	while ((opt = getopt(argc, argv, "i:I:e:mnsST:o:awM:K:E")) != -1) {
++=======
+ 	while ((opt = getopt(argc, argv, "i:I:e:mnsT:o:awE")) != -1) {
++>>>>>>> 46c7dd56d541 (modpost: always show verbose warning for section mismatch)
  		switch (opt) {
  		case 'i':
  			kernel_read = optarg;
diff --git a/scripts/Makefile.modpost b/scripts/Makefile.modpost
index c2baa37f47db..c039e317b3a2 100644
--- a/scripts/Makefile.modpost
+++ b/scripts/Makefile.modpost
@@ -77,7 +77,6 @@ modpost = scripts/mod/modpost                    \
  $(if $(KBUILD_EXTMOD),-I $(modulesymfile))      \
  $(if $(KBUILD_EXTRA_SYMBOLS), $(patsubst %, -e %,$(KBUILD_EXTRA_SYMBOLS))) \
  $(if $(KBUILD_EXTMOD),-o $(modulesymfile))      \
- $(if $(CONFIG_DEBUG_SECTION_MISMATCH),,-S)      \
  $(if $(CONFIG_SECTION_MISMATCH_WARN_ONLY),,-E)  \
  $(if $(KBUILD_EXTMOD)$(KBUILD_MODPOST_WARN),-w)
 
* Unmerged path scripts/mod/modpost.c
