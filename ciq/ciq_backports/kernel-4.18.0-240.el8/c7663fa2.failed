gpio: Move gpiochip_lock/unlock_as_irq to gpio/driver.h

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author YueHaibing <yuehaibing@huawei.com>
commit c7663fa2a6631e5dddc1b7b2ba2e905ddffaff90
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/c7663fa2.failed

If CONFIG_GPIOLIB is not, gpiochip_lock/unlock_as_irq will
conflict as this:

In file included from sound/soc/codecs/wm5100.c:18:0:
./include/linux/gpio.h:224:19: error: static declaration of gpiochip_lock_as_irq follows non-static declaration
 static inline int gpiochip_lock_as_irq(struct gpio_chip *chip,
                   ^~~~~~~~~~~~~~~~~~~~
In file included from sound/soc/codecs/wm5100.c:17:0:
./include/linux/gpio/driver.h:494:5: note: previous declaration of gpiochip_lock_as_irq was here
 int gpiochip_lock_as_irq(struct gpio_chip *chip, unsigned int offset);
     ^~~~~~~~~~~~~~~~~~~~
In file included from sound/soc/codecs/wm5100.c:18:0:
./include/linux/gpio.h:231:20: error: static declaration of gpiochip_unlock_as_irq follows non-static declaration
 static inline void gpiochip_unlock_as_irq(struct gpio_chip *chip,
                    ^~~~~~~~~~~~~~~~~~~~~~
In file included from sound/soc/codecs/wm5100.c:17:0:
./include/linux/gpio/driver.h:495:6: note: previous declaration of gpiochip_unlock_as_irq was here
 void gpiochip_unlock_as_irq(struct gpio_chip *chip, unsigned int offset);
     ^~~~~~~~~~~~~~~~~~~~~~

Move them to gpio/driver.h and use CONFIG_GPIOLIB guard this.

	Reported-by: Hulk Robot <hulkci@huawei.com>
Fixes: d74be6dfea1b ("gpio: remove gpiod_lock/unlock_as_irq()")
	Signed-off-by: YueHaibing <yuehaibing@huawei.com>
Link: https://lore.kernel.org/r/20190822031817.32888-1-yuehaibing@huawei.com
	Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
(cherry picked from commit c7663fa2a6631e5dddc1b7b2ba2e905ddffaff90)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/linux/gpio/driver.h
diff --cc include/linux/gpio/driver.h
index 07332890d9f4,8d06a054abc8..000000000000
--- a/include/linux/gpio/driver.h
+++ b/include/linux/gpio/driver.h
@@@ -599,10 -720,9 +596,16 @@@ void gpiochip_free_own_desc(struct gpio
  void devprop_gpiochip_set_names(struct gpio_chip *chip,
  				const struct fwnode_handle *fwnode);
  
++<<<<<<< HEAD
 +
 +#ifdef CONFIG_GPIOLIB
 +
 +struct gpio_chip *gpiod_to_chip(const struct gpio_desc *desc);
++=======
+ /* lock/unlock as IRQ */
+ int gpiochip_lock_as_irq(struct gpio_chip *chip, unsigned int offset);
+ void gpiochip_unlock_as_irq(struct gpio_chip *chip, unsigned int offset);
++>>>>>>> c7663fa2a663 (gpio: Move gpiochip_lock/unlock_as_irq to gpio/driver.h)
  
  #else /* CONFIG_GPIOLIB */
  
@@@ -613,6 -733,18 +616,18 @@@ static inline struct gpio_chip *gpiod_t
  	return ERR_PTR(-ENODEV);
  }
  
+ static inline int gpiochip_lock_as_irq(struct gpio_chip *chip,
+ 				       unsigned int offset)
+ {
+ 	WARN_ON(1);
+ 	return -EINVAL;
+ }
+ 
+ static inline void gpiochip_unlock_as_irq(struct gpio_chip *chip,
+ 					  unsigned int offset)
+ {
+ 	WARN_ON(1);
+ }
  #endif /* CONFIG_GPIOLIB */
  
 -#endif
 +#endif /* __LINUX_GPIO_DRIVER_H */
diff --git a/include/linux/gpio.h b/include/linux/gpio.h
index f757a58191a6..2157717c2136 100644
--- a/include/linux/gpio.h
+++ b/include/linux/gpio.h
@@ -221,19 +221,6 @@ static inline int gpio_to_irq(unsigned gpio)
 	return -EINVAL;
 }
 
-static inline int gpiochip_lock_as_irq(struct gpio_chip *chip,
-				       unsigned int offset)
-{
-	WARN_ON(1);
-	return -EINVAL;
-}
-
-static inline void gpiochip_unlock_as_irq(struct gpio_chip *chip,
-					  unsigned int offset)
-{
-	WARN_ON(1);
-}
-
 static inline int irq_to_gpio(unsigned irq)
 {
 	/* irq can never have been returned from gpio_to_irq() */
* Unmerged path include/linux/gpio/driver.h
