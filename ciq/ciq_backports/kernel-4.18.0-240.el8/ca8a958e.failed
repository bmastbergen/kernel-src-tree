pinctrl: baytrail: Pass irqchip when adding gpiochip

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Andy Shevchenko <andriy.shevchenko@linux.intel.com>
commit ca8a958e2acb418846e6506f3ff2cdf161a3c806
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/ca8a958e.failed

We need to convert all old gpio irqchips to pass the irqchip
setup along when adding the gpio_chip. For more info see
drivers/gpio/TODO.

For chained irqchips this is a pretty straight-forward conversion.

	Cc: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
	Cc: Mika Westerberg <mika.westerberg@linux.intel.com>
	Cc: Thierry Reding <treding@nvidia.com>
	Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
	Signed-off-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
	Reviewed-by: Mika Westerberg <mika.westerberg@linux.intel.com>
	Reviewed-by: Hans de Goede <hdegoede@redhat.com>
	Tested-by: Hans de Goede <hdegoede@redhat.com>
(cherry picked from commit ca8a958e2acb418846e6506f3ff2cdf161a3c806)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/pinctrl/intel/pinctrl-baytrail.c
diff --cc drivers/pinctrl/intel/pinctrl-baytrail.c
index e4fb0870066b,55141d5de29e..000000000000
--- a/drivers/pinctrl/intel/pinctrl-baytrail.c
+++ b/drivers/pinctrl/intel/pinctrl-baytrail.c
@@@ -1443,9 -1437,23 +1443,27 @@@ static void byt_gpio_irq_handler(struc
  	chip->irq_eoi(data);
  }
  
++<<<<<<< HEAD
 +static void byt_gpio_irq_init_hw(struct byt_gpio *vg)
++=======
+ static void byt_init_irq_valid_mask(struct gpio_chip *chip,
+ 				    unsigned long *valid_mask,
+ 				    unsigned int ngpios)
  {
- 	struct gpio_chip *gc = &vg->chip;
+ 	/*
+ 	 * FIXME: currently the valid_mask is filled in as part of
+ 	 * initializing the irq_chip below in byt_gpio_irq_init_hw().
+ 	 * when converting this driver to the new way of passing the
+ 	 * gpio_irq_chip along when adding the gpio_chip, move the
+ 	 * mask initialization into this callback instead. Right now
+ 	 * this callback is here to make sure the mask gets allocated.
+ 	 */
+ }
+ 
+ static int byt_gpio_irq_init_hw(struct gpio_chip *chip)
++>>>>>>> ca8a958e2acb (pinctrl: baytrail: Pass irqchip when adding gpiochip)
+ {
+ 	struct byt_gpio *vg = gpiochip_get_data(chip);
  	struct device *dev = &vg->pdev->dev;
  	void __iomem *reg;
  	u32 base, value;
* Unmerged path drivers/pinctrl/intel/pinctrl-baytrail.c
