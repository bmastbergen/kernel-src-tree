bdi: add a ->dev_name field to struct backing_dev_info

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Christoph Hellwig <hch@lst.de>
commit 6bd87eec23cbc9ed222bed0f5b5b02bf300e9a8d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/6bd87eec.failed

Cache a copy of the name for the life time of the backing_dev_info
structure so that we can reference it even after unregistering.

Fixes: 68f23b89067f ("memcg: fix a crash in wb_workfn when a device disappears")
	Reported-by: Yufen Yu <yuyufen@huawei.com>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Reviewed-by: Jan Kara <jack@suse.cz>
	Reviewed-by: Bart Van Assche <bvanassche@acm.org>
	Signed-off-by: Jens Axboe <axboe@kernel.dk>
(cherry picked from commit 6bd87eec23cbc9ed222bed0f5b5b02bf300e9a8d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	mm/backing-dev.c
diff --cc mm/backing-dev.c
index 00277c8855c6,efc5b83acd2d..000000000000
--- a/mm/backing-dev.c
+++ b/mm/backing-dev.c
@@@ -975,6 -1044,14 +976,17 @@@ void bdi_put(struct backing_dev_info *b
  }
  EXPORT_SYMBOL(bdi_put);
  
++<<<<<<< HEAD
++=======
+ const char *bdi_dev_name(struct backing_dev_info *bdi)
+ {
+ 	if (!bdi || !bdi->dev)
+ 		return bdi_unknown_name;
+ 	return bdi->dev_name;
+ }
+ EXPORT_SYMBOL_GPL(bdi_dev_name);
+ 
++>>>>>>> 6bd87eec23cb (bdi: add a ->dev_name field to struct backing_dev_info)
  static wait_queue_head_t congestion_wqh[2] = {
  		__WAIT_QUEUE_HEAD_INITIALIZER(congestion_wqh[0]),
  		__WAIT_QUEUE_HEAD_INITIALIZER(congestion_wqh[1])
diff --git a/include/linux/backing-dev-defs.h b/include/linux/backing-dev-defs.h
index e1771d339f1b..ad360356a0af 100644
--- a/include/linux/backing-dev-defs.h
+++ b/include/linux/backing-dev-defs.h
@@ -224,6 +224,7 @@ struct backing_dev_info {
 	wait_queue_head_t wb_waitq;
 
 	struct device *dev;
+	char dev_name[64];
 	struct device *owner;
 
 	struct timer_list laptop_mode_wb_timer;
* Unmerged path mm/backing-dev.c
