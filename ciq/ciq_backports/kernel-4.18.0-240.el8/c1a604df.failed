perf tools: Remove needless perf.h include directive from headers

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Arnaldo Carvalho de Melo <acme@redhat.com>
commit c1a604dff486399ae0be95e6396e0158df95ad5d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/c1a604df.failed

Its not needed there, add it to the places that need it and were getting
it via those headers.

	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: Jiri Olsa <jolsa@kernel.org>
	Cc: Namhyung Kim <namhyung@kernel.org>
Link: https://lkml.kernel.org/n/tip-5yulx1u16vyd0zmrbg1tjhju@git.kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit c1a604dff486399ae0be95e6396e0158df95ad5d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/builtin-script.c
#	tools/perf/util/evlist.c
#	tools/perf/util/evlist.h
#	tools/perf/util/session.c
diff --cc tools/perf/builtin-script.c
index 315e8eb7f02d,f3b31c6ed15f..000000000000
--- a/tools/perf/builtin-script.c
+++ b/tools/perf/builtin-script.c
@@@ -51,7 -50,10 +51,14 @@@
  #include <fcntl.h>
  #include <unistd.h>
  #include <subcmd/pager.h>
++<<<<<<< HEAD
 +#include <linux/err.h>
++=======
+ #include <perf/evlist.h>
+ #include "util/record.h"
+ #include "util/util.h"
+ #include "perf.h"
++>>>>>>> c1a604dff486 (perf tools: Remove needless perf.h include directive from headers)
  
  #include <linux/ctype.h>
  
diff --cc tools/perf/util/evlist.c
index 29a998d183ce,71b231c7097f..000000000000
--- a/tools/perf/util/evlist.c
+++ b/tools/perf/util/evlist.c
@@@ -17,6 -16,8 +17,11 @@@
  #include "evsel.h"
  #include "debug.h"
  #include "units.h"
++<<<<<<< HEAD
++=======
+ #include "util.h"
+ #include "../perf.h"
++>>>>>>> c1a604dff486 (perf tools: Remove needless perf.h include directive from headers)
  #include "asm/bug.h"
  #include "bpf-event.h"
  #include <signal.h>
diff --cc tools/perf/util/evlist.h
index 49354fe24d5f,ee288644e9e4..000000000000
--- a/tools/perf/util/evlist.h
+++ b/tools/perf/util/evlist.h
@@@ -8,7 -8,7 +8,11 @@@
  #include <linux/list.h>
  #include <api/fd/array.h>
  #include <stdio.h>
++<<<<<<< HEAD
 +#include "../perf.h"
++=======
+ #include <internal/evlist.h>
++>>>>>>> c1a604dff486 (perf tools: Remove needless perf.h include directive from headers)
  #include "event.h"
  #include "evsel.h"
  #include "mmap.h"
diff --cc tools/perf/util/session.c
index 82adeb8dfbcf,82bd5d4361f0..000000000000
--- a/tools/perf/util/session.c
+++ b/tools/perf/util/session.c
@@@ -27,8 -28,9 +27,13 @@@
  #include "thread-stack.h"
  #include "sample-raw.h"
  #include "stat.h"
++<<<<<<< HEAD
++=======
+ #include "util.h"
+ #include "../perf.h"
++>>>>>>> c1a604dff486 (perf tools: Remove needless perf.h include directive from headers)
  #include "arch/common.h"
 +#include <linux/err.h>
  
  #ifdef HAVE_ZSTD_SUPPORT
  static int perf_session__process_compressed_event(struct perf_session *session,
diff --git a/tools/perf/builtin-c2c.c b/tools/perf/builtin-c2c.c
index 0630f22b0b56..428f9e6966ac 100644
--- a/tools/perf/builtin-c2c.c
+++ b/tools/perf/builtin-c2c.c
@@ -36,6 +36,7 @@
 #include "thread.h"
 #include "mem2node.h"
 #include "symbol.h"
+#include "../perf.h"
 
 struct c2c_hists {
 	struct hists		hists;
diff --git a/tools/perf/builtin-diff.c b/tools/perf/builtin-diff.c
index d3d931f6aa1e..c0cbd11ec3a5 100644
--- a/tools/perf/builtin-diff.c
+++ b/tools/perf/builtin-diff.c
@@ -6,6 +6,7 @@
  * DSOs and symbol information, sort them and produce a diff.
  */
 #include "builtin.h"
+#include "perf.h"
 
 #include "util/debug.h"
 #include "util/event.h"
diff --git a/tools/perf/builtin-record.c b/tools/perf/builtin-record.c
index 6caefa2bcf6c..faadfe8854d7 100644
--- a/tools/perf/builtin-record.c
+++ b/tools/perf/builtin-record.c
@@ -42,6 +42,7 @@
 #include "util/units.h"
 #include "util/bpf-event.h"
 #include "asm/bug.h"
+#include "perf.h"
 
 #include <errno.h>
 #include <inttypes.h>
* Unmerged path tools/perf/builtin-script.c
diff --git a/tools/perf/builtin-stat.c b/tools/perf/builtin-stat.c
index b71c4390d333..d25ae12744ef 100644
--- a/tools/perf/builtin-stat.c
+++ b/tools/perf/builtin-stat.c
@@ -43,6 +43,7 @@
 
 #include "perf.h"
 #include "builtin.h"
+#include "perf.h"
 #include "util/cgroup.h"
 #include <subcmd/parse-options.h>
 #include "util/parse-events.h"
diff --git a/tools/perf/builtin-trace.c b/tools/perf/builtin-trace.c
index 4b81b4c2c4c2..fe96378bb83f 100644
--- a/tools/perf/builtin-trace.c
+++ b/tools/perf/builtin-trace.c
@@ -51,6 +51,7 @@
 #include "string2.h"
 #include "syscalltbl.h"
 #include "rb_resort.h"
+#include "../perf.h"
 
 #include <errno.h>
 #include <inttypes.h>
diff --git a/tools/perf/perf.c b/tools/perf/perf.c
index 34763a9b873d..2f2918eb2616 100644
--- a/tools/perf/perf.c
+++ b/tools/perf/perf.c
@@ -8,6 +8,7 @@
  * perf top, perf record, perf report, etc.) are started.
  */
 #include "builtin.h"
+#include "perf.h"
 
 #include "util/env.h"
 #include <subcmd/exec-cmd.h>
diff --git a/tools/perf/ui/browsers/hists.c b/tools/perf/ui/browsers/hists.c
index bef534a58839..af9dd4a0804b 100644
--- a/tools/perf/ui/browsers/hists.c
+++ b/tools/perf/ui/browsers/hists.c
@@ -22,6 +22,7 @@
 #include "../../util/top.h"
 #include "../../util/thread.h"
 #include "../../arch/common.h"
+#include "../../perf.h"
 
 #include "../browsers/hists.h"
 #include "../helpline.h"
diff --git a/tools/perf/ui/browsers/res_sample.c b/tools/perf/ui/browsers/res_sample.c
index 50288209a3b8..57237537db58 100644
--- a/tools/perf/ui/browsers/res_sample.c
+++ b/tools/perf/ui/browsers/res_sample.c
@@ -8,6 +8,7 @@
 #include "time-utils.h"
 #include "../util.h"
 #include "../../util/util.h"
+#include "../../perf.h"
 #include <linux/time64.h>
 #include <linux/zalloc.h>
 
diff --git a/tools/perf/ui/browsers/scripts.c b/tools/perf/ui/browsers/scripts.c
index b2271b3e1877..f866931fc6f3 100644
--- a/tools/perf/ui/browsers/scripts.c
+++ b/tools/perf/ui/browsers/scripts.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include "../../builtin.h"
+#include "../../perf.h"
 #include "../../util/sort.h"
 #include "../../util/util.h"
 #include "../../util/hist.h"
diff --git a/tools/perf/ui/hist.c b/tools/perf/ui/hist.c
index 412d6f1626e3..ff1df928bf16 100644
--- a/tools/perf/ui/hist.c
+++ b/tools/perf/ui/hist.c
@@ -9,6 +9,7 @@
 #include "../util/sort.h"
 #include "../util/evsel.h"
 #include "../util/evlist.h"
+#include "../perf.h"
 
 /* hist period print (hpp) functions */
 
diff --git a/tools/perf/ui/tui/setup.c b/tools/perf/ui/tui/setup.c
index 3ad0d3363ac6..2881982b483c 100644
--- a/tools/perf/ui/tui/setup.c
+++ b/tools/perf/ui/tui/setup.c
@@ -11,6 +11,7 @@
 #include "../../util/cache.h"
 #include "../../util/debug.h"
 #include "../../util/util.h"
+#include "../../perf.h"
 #include "../browser.h"
 #include "../helpline.h"
 #include "../ui.h"
diff --git a/tools/perf/util/auxtrace.h b/tools/perf/util/auxtrace.h
index 48376e23c130..28dca97be414 100644
--- a/tools/perf/util/auxtrace.h
+++ b/tools/perf/util/auxtrace.h
@@ -25,7 +25,6 @@
 #include <linux/types.h>
 #include <asm/bitsperlong.h>
 
-#include "../perf.h"
 #include "event.h"
 #include "session.h"
 #include "debug.h"
diff --git a/tools/perf/util/callchain.c b/tools/perf/util/callchain.c
index ec1fd070380a..02a8349a8930 100644
--- a/tools/perf/util/callchain.c
+++ b/tools/perf/util/callchain.c
@@ -28,6 +28,7 @@
 #include "callchain.h"
 #include "branch.h"
 #include "symbol.h"
+#include "../perf.h"
 
 #define CALLCHAIN_PARAM_DEFAULT			\
 	.mode		= CHAIN_GRAPH_ABS,	\
diff --git a/tools/perf/util/event.c b/tools/perf/util/event.c
index 3df19da29403..36122af04eb8 100644
--- a/tools/perf/util/event.c
+++ b/tools/perf/util/event.c
@@ -29,6 +29,7 @@
 #include "stat.h"
 #include "session.h"
 #include "bpf-event.h"
+#include "../perf.h"
 
 #define DEFAULT_PROC_MAP_PARSE_TIMEOUT 500
 
diff --git a/tools/perf/util/event.h b/tools/perf/util/event.h
index ba0ec1b6aad3..83baa70fe5c2 100644
--- a/tools/perf/util/event.h
+++ b/tools/perf/util/event.h
@@ -9,7 +9,6 @@
 #include <linux/perf_event.h>
 #include <perf/event.h>
 
-#include "../perf.h"
 #include "build-id.h"
 #include "perf_regs.h"
 
* Unmerged path tools/perf/util/evlist.c
* Unmerged path tools/perf/util/evlist.h
diff --git a/tools/perf/util/mmap.c b/tools/perf/util/mmap.c
index 850493205040..97a97fa4d3ce 100644
--- a/tools/perf/util/mmap.c
+++ b/tools/perf/util/mmap.c
@@ -17,6 +17,7 @@
 #include "debug.h"
 #include "event.h"
 #include "mmap.h"
+#include "../perf.h"
 #include "util.h" /* page_size */
 
 size_t perf_mmap__mmap_len(struct perf_mmap *map)
* Unmerged path tools/perf/util/session.c
diff --git a/tools/perf/util/top.c b/tools/perf/util/top.c
index 4c8da8c4435f..5606eaf08ab5 100644
--- a/tools/perf/util/top.c
+++ b/tools/perf/util/top.c
@@ -13,6 +13,7 @@
 #include "parse-events.h"
 #include "symbol.h"
 #include "top.h"
+#include "../perf.h"
 #include <inttypes.h>
 
 #define SNPRINTF(buf, size, fmt, args...) \
