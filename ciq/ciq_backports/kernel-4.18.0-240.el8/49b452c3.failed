libbpf: Fix type of old_fd in bpf_xdp_set_link_opts

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Toke Høiland-Jørgensen <toke@redhat.com>
commit 49b452c382da2c2d1ccee1265cbb92da905c82f7
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/49b452c3.failed

The 'old_fd' parameter used for atomic replacement of XDP programs is
supposed to be an FD, but was left as a u32 from an earlier iteration of
the patch that added it. It was converted to an int when read, so things
worked correctly even with negative values, but better change the
definition to correctly reflect the intention.

Fixes: bd5ca3ef93cd ("libbpf: Add function to set link XDP fd while specifying old program")
	Reported-by: David Ahern <dsahern@gmail.com>
	Signed-off-by: Toke Høiland-Jørgensen <toke@redhat.com>
	Signed-off-by: Daniel Borkmann <daniel@iogearbox.net>
	Acked-by: David Ahern <dsahern@gmail.com>
	Acked-by: Song Liu <songliubraving@fb.com>
Link: https://lore.kernel.org/bpf/20200414145025.182163-1-toke@redhat.com
(cherry picked from commit 49b452c382da2c2d1ccee1265cbb92da905c82f7)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/lib/bpf/libbpf.h
diff --cc tools/lib/bpf/libbpf.h
index e454ceec9fa2,f1dacecb1619..000000000000
--- a/tools/lib/bpf/libbpf.h
+++ b/tools/lib/bpf/libbpf.h
@@@ -407,7 -456,15 +407,16 @@@ struct xdp_link_info 
  	__u8 attach_mode;
  };
  
++<<<<<<< HEAD
++=======
+ struct bpf_xdp_set_link_opts {
+ 	size_t sz;
+ 	int old_fd;
+ };
+ #define bpf_xdp_set_link_opts__last_field old_fd
+ 
++>>>>>>> 49b452c382da (libbpf: Fix type of old_fd in bpf_xdp_set_link_opts)
  LIBBPF_API int bpf_set_link_xdp_fd(int ifindex, int fd, __u32 flags);
 -LIBBPF_API int bpf_set_link_xdp_fd_opts(int ifindex, int fd, __u32 flags,
 -					const struct bpf_xdp_set_link_opts *opts);
  LIBBPF_API int bpf_get_link_xdp_id(int ifindex, __u32 *prog_id, __u32 flags);
  LIBBPF_API int bpf_get_link_xdp_info(int ifindex, struct xdp_link_info *info,
  				     size_t info_size, __u32 flags);
* Unmerged path tools/lib/bpf/libbpf.h
