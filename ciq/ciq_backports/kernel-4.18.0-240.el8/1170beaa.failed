xdp: Simplify __bpf_tx_xdp_map()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Björn Töpel <bjorn.topel@intel.com>
commit 1170beaa3fa3c3381fd820e9d05b84d168fe1dab
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/1170beaa.failed

The explicit error checking is not needed. Simply return the error
instead.

	Signed-off-by: Björn Töpel <bjorn.topel@intel.com>
	Signed-off-by: Alexei Starovoitov <ast@kernel.org>
	Acked-by: Toke Høiland-Jørgensen <toke@redhat.com>
Link: https://lore.kernel.org/bpf/20191219061006.21980-9-bjorn.topel@gmail.com
(cherry picked from commit 1170beaa3fa3c3381fd820e9d05b84d168fe1dab)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/core/filter.c
diff --cc net/core/filter.c
index 100e9b841116,217af9974c86..000000000000
--- a/net/core/filter.c
+++ b/net/core/filter.c
@@@ -3524,34 -3510,16 +3524,41 @@@ err
  }
  
  static int __bpf_tx_xdp_map(struct net_device *dev_rx, void *fwd,
- 			    struct bpf_map *map,
- 			    struct xdp_buff *xdp)
+ 			    struct bpf_map *map, struct xdp_buff *xdp)
  {
- 	int err;
- 
  	switch (map->map_type) {
++<<<<<<< HEAD
 +	case BPF_MAP_TYPE_DEVMAP: {
 +		struct bpf_dtab_netdev *dst = fwd;
 +
 +		err = dev_map_enqueue(dst, xdp, dev_rx);
 +		if (unlikely(err))
 +			return err;
 +		break;
 +	}
 +	case BPF_MAP_TYPE_CPUMAP: {
 +		struct bpf_cpu_map_entry *rcpu = fwd;
 +
 +		err = cpu_map_enqueue(rcpu, xdp, dev_rx);
 +		if (unlikely(err))
 +			return err;
 +		break;
 +	}
 +	case BPF_MAP_TYPE_XSKMAP: {
 +		struct xdp_sock *xs = fwd;
 +
 +		err = __xsk_map_redirect(xs, xdp);
 +		return err;
 +	}
++=======
+ 	case BPF_MAP_TYPE_DEVMAP:
+ 	case BPF_MAP_TYPE_DEVMAP_HASH:
+ 		return dev_map_enqueue(fwd, xdp, dev_rx);
+ 	case BPF_MAP_TYPE_CPUMAP:
+ 		return cpu_map_enqueue(fwd, xdp, dev_rx);
+ 	case BPF_MAP_TYPE_XSKMAP:
+ 		return __xsk_map_redirect(fwd, xdp);
++>>>>>>> 1170beaa3fa3 (xdp: Simplify __bpf_tx_xdp_map())
  	default:
  		break;
  	}
* Unmerged path net/core/filter.c
