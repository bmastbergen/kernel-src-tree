perf evlist: Remove unused perf_evlist__fprintf() method

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Arnaldo Carvalho de Melo <acme@redhat.com>
commit bd70462062f36bec9d93d3900addfca4f8ec718f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/bd704620.failed

Ditch it, noone is using it, one more stdio.h include in a hot header.

Fix the fallout in parse-events.y, where we end up using a FILE pointer,
I think due to YYDEBUG being set and in some places, like Amazon Linux 1
we don't get stdio.h included by luck, like in most other places, add a
explicit stdio.h include directive.

	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: Jiri Olsa <jolsa@kernel.org>
	Cc: Namhyung Kim <namhyung@kernel.org>
Link: https://lkml.kernel.org/n/tip-37k5q0lhdbo2hvvfbnnzn7og@git.kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit bd70462062f36bec9d93d3900addfca4f8ec718f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/util/evlist.c
#	tools/perf/util/evlist.h
diff --cc tools/perf/util/evlist.c
index 29a998d183ce,84c42790dab3..000000000000
--- a/tools/perf/util/evlist.c
+++ b/tools/perf/util/evlist.c
@@@ -1575,20 -1421,7 +1575,24 @@@ int perf_evlist__parse_sample_timestamp
  	return perf_evsel__parse_sample_timestamp(evsel, event, timestamp);
  }
  
++<<<<<<< HEAD
 +size_t perf_evlist__fprintf(struct perf_evlist *evlist, FILE *fp)
 +{
 +	struct perf_evsel *evsel;
 +	size_t printed = 0;
 +
 +	evlist__for_each_entry(evlist, evsel) {
 +		printed += fprintf(fp, "%s%s", evsel->idx ? ", " : "",
 +				   perf_evsel__name(evsel));
 +	}
 +
 +	return printed + fprintf(fp, "\n");
 +}
 +
 +int perf_evlist__strerror_open(struct perf_evlist *evlist,
++=======
+ int perf_evlist__strerror_open(struct evlist *evlist,
++>>>>>>> bd70462062f3 (perf evlist: Remove unused perf_evlist__fprintf() method)
  			       int err, char *buf, size_t size)
  {
  	int printed, value;
diff --cc tools/perf/util/evlist.h
index 49354fe24d5f,7cfe75522ba5..000000000000
--- a/tools/perf/util/evlist.h
+++ b/tools/perf/util/evlist.h
@@@ -7,12 -7,11 +7,18 @@@
  #include <linux/refcount.h>
  #include <linux/list.h>
  #include <api/fd/array.h>
++<<<<<<< HEAD
 +#include <stdio.h>
 +#include "../perf.h"
 +#include "event.h"
++=======
+ #include <internal/evlist.h>
+ #include <internal/evsel.h>
+ #include "events_stats.h"
++>>>>>>> bd70462062f3 (perf evlist: Remove unused perf_evlist__fprintf() method)
  #include "evsel.h"
 -#include <pthread.h>
 +#include "mmap.h"
 +#include "util.h"
  #include <signal.h>
  #include <unistd.h>
  
@@@ -216,36 -222,38 +222,41 @@@ int perf_evlist__parse_sample_timestamp
  					union perf_event *event,
  					u64 *timestamp);
  
 -bool perf_evlist__valid_sample_type(struct evlist *evlist);
 -bool perf_evlist__valid_sample_id_all(struct evlist *evlist);
 -bool perf_evlist__valid_read_format(struct evlist *evlist);
 +bool perf_evlist__valid_sample_type(struct perf_evlist *evlist);
 +bool perf_evlist__valid_sample_id_all(struct perf_evlist *evlist);
 +bool perf_evlist__valid_read_format(struct perf_evlist *evlist);
  
 -void perf_evlist__splice_list_tail(struct evlist *evlist,
 +void perf_evlist__splice_list_tail(struct perf_evlist *evlist,
  				   struct list_head *list);
  
 -static inline bool perf_evlist__empty(struct evlist *evlist)
 +static inline bool perf_evlist__empty(struct perf_evlist *evlist)
  {
 -	return list_empty(&evlist->core.entries);
 +	return list_empty(&evlist->entries);
  }
  
 -static inline struct evsel *evlist__first(struct evlist *evlist)
 +static inline struct perf_evsel *perf_evlist__first(struct perf_evlist *evlist)
  {
 -	struct perf_evsel *evsel = perf_evlist__first(&evlist->core);
 -
 -	return container_of(evsel, struct evsel, core);
 +	return list_entry(evlist->entries.next, struct perf_evsel, node);
  }
  
 -static inline struct evsel *evlist__last(struct evlist *evlist)
 +static inline struct perf_evsel *perf_evlist__last(struct perf_evlist *evlist)
  {
 -	struct perf_evsel *evsel = perf_evlist__last(&evlist->core);
 -
 -	return container_of(evsel, struct evsel, core);
 +	return list_entry(evlist->entries.prev, struct perf_evsel, node);
  }
  
++<<<<<<< HEAD
 +size_t perf_evlist__fprintf(struct perf_evlist *evlist, FILE *fp);
 +
 +int perf_evlist__strerror_open(struct perf_evlist *evlist, int err, char *buf, size_t size);
 +int perf_evlist__strerror_mmap(struct perf_evlist *evlist, int err, char *buf, size_t size);
++=======
+ int perf_evlist__strerror_open(struct evlist *evlist, int err, char *buf, size_t size);
+ int perf_evlist__strerror_mmap(struct evlist *evlist, int err, char *buf, size_t size);
++>>>>>>> bd70462062f3 (perf evlist: Remove unused perf_evlist__fprintf() method)
  
 -bool perf_evlist__can_select_event(struct evlist *evlist, const char *str);
 -void perf_evlist__to_front(struct evlist *evlist,
 -			   struct evsel *move_evsel);
 +bool perf_evlist__can_select_event(struct perf_evlist *evlist, const char *str);
 +void perf_evlist__to_front(struct perf_evlist *evlist,
 +			   struct perf_evsel *move_evsel);
  
  /**
   * __evlist__for_each_entry - iterate thru all the evsels
* Unmerged path tools/perf/util/evlist.c
* Unmerged path tools/perf/util/evlist.h
diff --git a/tools/perf/util/parse-events.y b/tools/perf/util/parse-events.y
index f1c36ed1cf36..65809ad67808 100644
--- a/tools/perf/util/parse-events.y
+++ b/tools/perf/util/parse-events.y
@@ -9,6 +9,7 @@
 #define YYDEBUG 1
 
 #include <fnmatch.h>
+#include <stdio.h>
 #include <linux/compiler.h>
 #include <linux/list.h>
 #include <linux/types.h>
