ASoC: SOF: Intel: do not disable i915 power during probe

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
Rebuild_CHGLOG: - [sound] ALSA: ASoC: SOF: Intel: do not disable i915 power during probe (Jaroslav Kysela) [1797509]
Rebuild_FUZZ: 94.92%
commit-author Kai Vehmanen <kai.vehmanen@linux.intel.com>
commit 0c75419a94a20b2bf791825a665d8b64cf7c560d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/0c75419a.failed

Change HDA probe behaviour slightly so that i915 power is not
turned off if i915 audio codecs are found in the initial probe done
by SOF Intel driver, and power is kept on until HDA codec driver
probe runs.

This will reduce number of mode sets on platforms with low
minimum CDCLK (like GLK) and brings the SOF probe sequence closer
to legacy HDA driver in terms of i915 audio codec power management.

BugLink: https://github.com/thesofproject/linux/issues/1642
	Signed-off-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>
Link: https://lore.kernel.org/r/20200120160117.29130-3-kai.vehmanen@linux.intel.com
Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit 0c75419a94a20b2bf791825a665d8b64cf7c560d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/sof/intel/hda.c
diff --cc sound/soc/sof/intel/hda.c
index bfdb817b3780,65b86dd044f1..000000000000
--- a/sound/soc/sof/intel/hda.c
+++ b/sound/soc/sof/intel/hda.c
@@@ -478,7 -380,8 +478,12 @@@ static int hda_init_caps(struct snd_sof
  	/* create codec instances */
  	hda_codec_probe_bus(sdev, hda_codec_use_common_hdmi);
  
++<<<<<<< HEAD
 +	hda_codec_i915_put(sdev);
++=======
+ 	if (!HDA_IDISP_CODEC(bus->codec_mask))
+ 		hda_codec_i915_display_power(sdev, false);
++>>>>>>> 0c75419a94a2 (ASoC: SOF: Intel: do not disable i915 power during probe)
  
  	/*
  	 * we are done probing so decrement link counts
* Unmerged path sound/soc/sof/intel/hda.c
