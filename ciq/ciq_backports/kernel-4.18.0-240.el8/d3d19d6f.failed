fbdev: potential information leak in do_fb_ioctl()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Dan Carpenter <dan.carpenter@oracle.com>
commit d3d19d6fc5736a798b118971935ce274f7deaa82
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/d3d19d6f.failed

The "fix" struct has a 2 byte hole after ->ywrapstep and the
"fix = info->fix;" assignment doesn't necessarily clear it.  It depends
on the compiler.  The solution is just to replace the assignment with an
memcpy().

Fixes: 1f5e31d7e55a ("fbmem: don't call copy_from/to_user() with mutex held")
	Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
	Cc: Andrew Morton <akpm@linux-foundation.org>
	Cc: Arnd Bergmann <arnd@arndb.de>
	Cc: "Eric W. Biederman" <ebiederm@xmission.com>
	Cc: Andrea Righi <righi.andrea@gmail.com>
	Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
	Cc: Sam Ravnborg <sam@ravnborg.org>
	Cc: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
	Cc: Daniel Thompson <daniel.thompson@linaro.org>
	Cc: Peter Rosin <peda@axentia.se>
	Cc: Jani Nikula <jani.nikula@intel.com>
	Cc: Gerd Hoffmann <kraxel@redhat.com>
	Signed-off-by: Bartlomiej Zolnierkiewicz <b.zolnierkie@samsung.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20200113100132.ixpaymordi24n3av@kili.mountain
(cherry picked from commit d3d19d6fc5736a798b118971935ce274f7deaa82)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/video/fbdev/core/fbmem.c
diff --cc drivers/video/fbdev/core/fbmem.c
index 25a78b78ae25,bb8d8dbc0461..000000000000
--- a/drivers/video/fbdev/core/fbmem.c
+++ b/drivers/video/fbdev/core/fbmem.c
@@@ -1114,9 -1114,8 +1114,14 @@@ static long do_fb_ioctl(struct fb_info 
  			ret = -EFAULT;
  		break;
  	case FBIOGET_FSCREENINFO:
++<<<<<<< HEAD
 +		if (!lock_fb_info(info))
 +			return -ENODEV;
 +		fix = info->fix;
++=======
+ 		lock_fb_info(info);
+ 		memcpy(&fix, &info->fix, sizeof(fix));
++>>>>>>> d3d19d6fc573 (fbdev: potential information leak in do_fb_ioctl())
  		if (info->flags & FBINFO_HIDE_SMEM_START)
  			fix.smem_start = 0;
  		unlock_fb_info(info);
* Unmerged path drivers/video/fbdev/core/fbmem.c
