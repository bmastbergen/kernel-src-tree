io_uring: remove extra ->file check

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Pavel Begunkov <asml.silence@gmail.com>
commit 9250f9ee194dc3dcee28a42a1533fa2cc0edd215
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/9250f9ee.failed

It won't ever get into io_prep_rw() when req->file haven't been set in
io_req_set_file(), hence remove the check.

	Signed-off-by: Pavel Begunkov <asml.silence@gmail.com>
	Signed-off-by: Jens Axboe <axboe@kernel.dk>
(cherry picked from commit 9250f9ee194dc3dcee28a42a1533fa2cc0edd215)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/io_uring.c
diff --cc fs/io_uring.c
index 943ec60fc256,a3c75aff8d10..000000000000
--- a/fs/io_uring.c
+++ b/fs/io_uring.c
@@@ -1033,13 -1862,14 +1033,18 @@@ static int io_prep_rw(struct io_kiocb *
  	unsigned ioprio;
  	int ret;
  
++<<<<<<< HEAD
 +	if (!req->file)
 +		return -EBADF;
 +
 +	if (force_nonblock && !io_file_supports_async(req->file))
 +		force_nonblock = false;
++=======
+ 	if (S_ISREG(file_inode(req->file)->i_mode))
+ 		req->flags |= REQ_F_ISREG;
++>>>>>>> 9250f9ee194d (io_uring: remove extra ->file check)
  
  	kiocb->ki_pos = READ_ONCE(sqe->off);
 -	if (kiocb->ki_pos == -1 && !(req->file->f_mode & FMODE_STREAM)) {
 -		req->flags |= REQ_F_CUR_POS;
 -		kiocb->ki_pos = req->file->f_pos;
 -	}
  	kiocb->ki_flags = iocb_flags(kiocb->ki_filp);
  	kiocb->ki_hint = ki_hint_validate(file_write_hint(kiocb->ki_filp));
  
* Unmerged path fs/io_uring.c
