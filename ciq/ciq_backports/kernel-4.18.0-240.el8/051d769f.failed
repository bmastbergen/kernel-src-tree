i2c: i801: Add support for Intel Tiger Lake

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Jarkko Nikula <jarkko.nikula@linux.intel.com>
commit 051d769f0a36b4642897d909cef980f944ae20ab
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/051d769f.failed

Add SMBUS PCI ID for Intel Tiger Lake -LP.

	Signed-off-by: Jarkko Nikula <jarkko.nikula@linux.intel.com>
	Reviewed-by: Jean Delvare <jdelvare@suse.de>
	Signed-off-by: Wolfram Sang <wsa@the-dreams.de>
(cherry picked from commit 051d769f0a36b4642897d909cef980f944ae20ab)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	Documentation/i2c/busses/i2c-i801
#	drivers/i2c/busses/Kconfig
#	drivers/i2c/busses/i2c-i801.c
diff --cc Documentation/i2c/busses/i2c-i801
index c50370b2970d,04b5de80ce4e..000000000000
--- a/Documentation/i2c/busses/i2c-i801
+++ b/Documentation/i2c/busses/i2c-i801
@@@ -41,6 -37,8 +41,11 @@@ Supported adapters
    * Intel Cedar Fork (PCH)
    * Intel Ice Lake (PCH)
    * Intel Comet Lake (PCH)
++<<<<<<< HEAD
++=======
+   * Intel Elkhart Lake (PCH)
+   * Intel Tiger Lake (PCH)
++>>>>>>> 051d769f0a36 (i2c: i801: Add support for Intel Tiger Lake)
     Datasheets: Publicly available at the Intel website
  
  On Intel Patsburg and later chipsets, both the normal host SMBus controller
diff --cc drivers/i2c/busses/Kconfig
index 0231ba35bd7f,09367fc014c3..000000000000
--- a/drivers/i2c/busses/Kconfig
+++ b/drivers/i2c/busses/Kconfig
@@@ -136,6 -143,8 +136,11 @@@ config I2C_I80
  	    Cedar Fork (PCH)
  	    Ice Lake (PCH)
  	    Comet Lake (PCH)
++<<<<<<< HEAD
++=======
+ 	    Elkhart Lake (PCH)
+ 	    Tiger Lake (PCH)
++>>>>>>> 051d769f0a36 (i2c: i801: Add support for Intel Tiger Lake)
  
  	  This driver can also be built as a module.  If so, the module
  	  will be called i2c-i801.
diff --cc drivers/i2c/busses/i2c-i801.c
index f30c6c674282,9db190783684..000000000000
--- a/drivers/i2c/busses/i2c-i801.c
+++ b/drivers/i2c/busses/i2c-i801.c
@@@ -72,6 -72,8 +72,11 @@@
   * Cedar Fork (PCH)		0x18df	32	hard	yes	yes	yes
   * Ice Lake-LP (PCH)		0x34a3	32	hard	yes	yes	yes
   * Comet Lake (PCH)		0x02a3	32	hard	yes	yes	yes
++<<<<<<< HEAD
++=======
+  * Elkhart Lake (PCH)		0x4b23	32	hard	yes	yes	yes
+  * Tiger Lake-LP (PCH)		0xa0a3	32	hard	yes	yes	yes
++>>>>>>> 051d769f0a36 (i2c: i801: Add support for Intel Tiger Lake)
   *
   * Features supported by this driver:
   * Software PEC				no
@@@ -1042,6 -1076,8 +1048,11 @@@ static const struct pci_device_id i801_
  	{ PCI_DEVICE(PCI_VENDOR_ID_INTEL, PCI_DEVICE_ID_INTEL_CANNONLAKE_LP_SMBUS) },
  	{ PCI_DEVICE(PCI_VENDOR_ID_INTEL, PCI_DEVICE_ID_INTEL_ICELAKE_LP_SMBUS) },
  	{ PCI_DEVICE(PCI_VENDOR_ID_INTEL, PCI_DEVICE_ID_INTEL_COMETLAKE_SMBUS) },
++<<<<<<< HEAD
++=======
+ 	{ PCI_DEVICE(PCI_VENDOR_ID_INTEL, PCI_DEVICE_ID_INTEL_ELKHART_LAKE_SMBUS) },
+ 	{ PCI_DEVICE(PCI_VENDOR_ID_INTEL, PCI_DEVICE_ID_INTEL_TIGERLAKE_LP_SMBUS) },
++>>>>>>> 051d769f0a36 (i2c: i801: Add support for Intel Tiger Lake)
  	{ 0, }
  };
  
@@@ -1557,23 -1703,18 +1568,31 @@@ static int i801_probe(struct pci_dev *d
  	switch (dev->device) {
  	case PCI_DEVICE_ID_INTEL_SUNRISEPOINT_H_SMBUS:
  	case PCI_DEVICE_ID_INTEL_SUNRISEPOINT_LP_SMBUS:
 -	case PCI_DEVICE_ID_INTEL_CANNONLAKE_H_SMBUS:
 -	case PCI_DEVICE_ID_INTEL_CANNONLAKE_LP_SMBUS:
  	case PCI_DEVICE_ID_INTEL_LEWISBURG_SMBUS:
  	case PCI_DEVICE_ID_INTEL_LEWISBURG_SSKU_SMBUS:
 -	case PCI_DEVICE_ID_INTEL_CDF_SMBUS:
  	case PCI_DEVICE_ID_INTEL_DNV_SMBUS:
  	case PCI_DEVICE_ID_INTEL_KABYLAKE_PCH_H_SMBUS:
++<<<<<<< HEAD
++=======
+ 	case PCI_DEVICE_ID_INTEL_ICELAKE_LP_SMBUS:
+ 	case PCI_DEVICE_ID_INTEL_COMETLAKE_SMBUS:
+ 	case PCI_DEVICE_ID_INTEL_ELKHART_LAKE_SMBUS:
+ 	case PCI_DEVICE_ID_INTEL_TIGERLAKE_LP_SMBUS:
+ 		priv->features |= FEATURE_BLOCK_PROC;
++>>>>>>> 051d769f0a36 (i2c: i801: Add support for Intel Tiger Lake)
 +		priv->features |= FEATURE_I2C_BLOCK_READ;
 +		priv->features |= FEATURE_IRQ;
 +		priv->features |= FEATURE_SMBUS_PEC;
 +		priv->features |= FEATURE_BLOCK_BUFFER;
 +		priv->features |= FEATURE_TCO_SPT;
 +		priv->features |= FEATURE_HOST_NOTIFY;
 +		break;
 +
 +	case PCI_DEVICE_ID_INTEL_CANNONLAKE_H_SMBUS:
 +	case PCI_DEVICE_ID_INTEL_CANNONLAKE_LP_SMBUS:
 +	case PCI_DEVICE_ID_INTEL_CDF_SMBUS:
 +	case PCI_DEVICE_ID_INTEL_ICELAKE_LP_SMBUS:
 +	case PCI_DEVICE_ID_INTEL_COMETLAKE_SMBUS:
  		priv->features |= FEATURE_I2C_BLOCK_READ;
  		priv->features |= FEATURE_IRQ;
  		priv->features |= FEATURE_SMBUS_PEC;
* Unmerged path Documentation/i2c/busses/i2c-i801
* Unmerged path drivers/i2c/busses/Kconfig
* Unmerged path drivers/i2c/busses/i2c-i801.c
