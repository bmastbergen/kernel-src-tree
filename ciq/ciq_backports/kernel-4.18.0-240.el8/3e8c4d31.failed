drivers: thermal: Move various drivers for intel platforms into a subdir

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Amit Kucheria <amit.kucheria@linaro.org>
commit 3e8c4d31f8eddc957ee293b3556586ee698d9a21
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/3e8c4d31.failed

This cleans up the directory a bit, now that we have several other
platforms using platform-specific sub-directories. Compile-tested with
ARCH=x86 defconfig and the drivers explicitly enabled with menuconfig.

	Signed-off-by: Amit Kucheria <amit.kucheria@linaro.org>
	Acked-by: Daniel Lezcano <daniel.lezcano@linaro.org>
	Signed-off-by: Zhang Rui <rui.zhang@intel.com>
(cherry picked from commit 3e8c4d31f8eddc957ee293b3556586ee698d9a21)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/thermal/Kconfig
#	drivers/thermal/Makefile
diff --cc drivers/thermal/Kconfig
index 8590dccd524a,772ab9dadda7..000000000000
--- a/drivers/thermal/Kconfig
+++ b/drivers/thermal/Kconfig
@@@ -327,84 -326,6 +327,87 @@@ config DA9062_THERMA
  	  zone.
  	  Compatible with the DA9062 and DA9061 PMICs.
  
++<<<<<<< HEAD
 +config INTEL_POWERCLAMP
 +	tristate "Intel PowerClamp idle injection driver"
 +	depends on THERMAL
 +	depends on X86
 +	depends on CPU_SUP_INTEL
 +	help
 +	  Enable this to enable Intel PowerClamp idle injection driver. This
 +	  enforce idle time which results in more package C-state residency. The
 +	  user interface is exposed via generic thermal framework.
 +
 +config X86_PKG_TEMP_THERMAL
 +	tristate "X86 package temperature thermal driver"
 +	depends on X86_THERMAL_VECTOR
 +	select THERMAL_GOV_USER_SPACE
 +	select THERMAL_WRITABLE_TRIPS
 +	default m
 +	help
 +	  Enable this to register CPU digital sensor for package temperature as
 +	  thermal zone. Each package will have its own thermal zone. There are
 +	  two trip points which can be set by user to get notifications via thermal
 +	  notification methods.
 +
 +config INTEL_SOC_DTS_IOSF_CORE
 +	tristate
 +	depends on X86 && PCI
 +	select IOSF_MBI
 +	help
 +	  This is becoming a common feature for Intel SoCs to expose the additional
 +	  digital temperature sensors (DTSs) using side band interface (IOSF). This
 +	  implements the common set of helper functions to register, get temperature
 +	  and get/set thresholds on DTSs.
 +
 +config INTEL_SOC_DTS_THERMAL
 +	tristate "Intel SoCs DTS thermal driver"
 +	depends on X86 && PCI
 +	select INTEL_SOC_DTS_IOSF_CORE
 +	select THERMAL_WRITABLE_TRIPS
 +	help
 +	  Enable this to register Intel SoCs (e.g. Bay Trail) platform digital
 +	  temperature sensor (DTS). These SoCs have two additional DTSs in
 +	  addition to DTSs on CPU cores. Each DTS will be registered as a
 +	  thermal zone. There are two trip points. One of the trip point can
 +	  be set by user mode programs to get notifications via Linux thermal
 +	  notification methods.The other trip is a critical trip point, which
 +	  was set by the driver based on the TJ MAX temperature.
 +
 +config INTEL_QUARK_DTS_THERMAL
 +	tristate "Intel Quark DTS thermal driver"
 +	depends on X86_INTEL_QUARK
 +	help
 +	  Enable this to register Intel Quark SoC (e.g. X1000) platform digital
 +	  temperature sensor (DTS). For X1000 SoC, it has one on-die DTS.
 +	  The DTS will be registered as a thermal zone. There are two trip points:
 +	  hot & critical. The critical trip point default value is set by
 +	  underlying BIOS/Firmware.
 +
 +menu "ACPI INT340X thermal drivers"
 +source drivers/thermal/int340x_thermal/Kconfig
 +endmenu
 +
 +config INTEL_BXT_PMIC_THERMAL
 +	tristate "Intel Broxton PMIC thermal driver"
 +	depends on X86 && INTEL_SOC_PMIC_BXTWC && REGMAP
 +	help
 +	  Select this driver for Intel Broxton PMIC with ADC channels monitoring
 +	  system temperature measurements and alerts.
 +	  This driver is used for monitoring the ADC channels of PMIC and handles
 +	  the alert trip point interrupts and notifies the thermal framework with
 +	  the trip point and temperature details of the zone.
 +
 +config INTEL_PCH_THERMAL
 +	tristate "Intel PCH Thermal Reporting Driver"
 +	depends on X86 && PCI
 +	help
 +	  Enable this to support thermal reporting on certain intel PCHs.
 +	  Thermal reporting device will provide temperature reading,
 +	  programmable trip points and other information.
 +
++=======
++>>>>>>> 3e8c4d31f8ed (drivers: thermal: Move various drivers for intel platforms into a subdir)
  config MTK_THERMAL
  	tristate "Temperature sensor driver for mediatek SoCs"
  	depends on ARCH_MEDIATEK || COMPILE_TEST
@@@ -416,9 -337,13 +419,14 @@@
  	  Enable this option if you want to have support for thermal management
  	  controller present in Mediatek SoCs
  
+ menu "Intel thermal drivers"
+ depends on X86 || X86_INTEL_QUARK || COMPILE_TEST
+ source "drivers/thermal/intel/Kconfig"
+ endmenu
+ 
  menu "Broadcom thermal drivers"
 -depends on ARCH_BCM || ARCH_BRCMSTB || ARCH_BCM2835 || COMPILE_TEST
 +depends on ARCH_BCM || ARCH_BRCMSTB || ARCH_BCM2835 || ARCH_BCM_IPROC || \
 +		COMPILE_TEST
  source "drivers/thermal/broadcom/Kconfig"
  endmenu
  
diff --cc drivers/thermal/Makefile
index 610344eb3e03,0b5d33a49b3e..000000000000
--- a/drivers/thermal/Makefile
+++ b/drivers/thermal/Makefile
@@@ -44,16 -44,9 +44,16 @@@ obj-$(CONFIG_IMX_THERMAL)	+= imx_therma
  obj-$(CONFIG_MAX77620_THERMAL)	+= max77620_thermal.o
  obj-$(CONFIG_QORIQ_THERMAL)	+= qoriq_thermal.o
  obj-$(CONFIG_DA9062_THERMAL)	+= da9062-thermal.o
- obj-$(CONFIG_INTEL_POWERCLAMP)	+= intel_powerclamp.o
- obj-$(CONFIG_X86_PKG_TEMP_THERMAL)	+= x86_pkg_temp_thermal.o
- obj-$(CONFIG_INTEL_SOC_DTS_IOSF_CORE)	+= intel_soc_dts_iosf.o
- obj-$(CONFIG_INTEL_SOC_DTS_THERMAL)	+= intel_soc_dts_thermal.o
- obj-$(CONFIG_INTEL_QUARK_DTS_THERMAL)	+= intel_quark_dts_thermal.o
+ obj-y				+= intel/
  obj-$(CONFIG_TI_SOC_THERMAL)	+= ti-soc-thermal/
++<<<<<<< HEAD
 +obj-$(CONFIG_INT340X_THERMAL)  += int340x_thermal/
 +obj-$(CONFIG_INTEL_BXT_PMIC_THERMAL) += intel_bxt_pmic_thermal.o
 +obj-$(CONFIG_INTEL_PCH_THERMAL)	+= intel_pch_thermal.o
 +obj-$(CONFIG_ST_THERMAL)	+= st/
++=======
+ obj-y				+= st/
++>>>>>>> 3e8c4d31f8ed (drivers: thermal: Move various drivers for intel platforms into a subdir)
  obj-$(CONFIG_QCOM_TSENS)	+= qcom/
  obj-y				+= tegra/
  obj-$(CONFIG_HISI_THERMAL)     += hisi_thermal.o
* Unmerged path drivers/thermal/Kconfig
* Unmerged path drivers/thermal/Makefile
diff --git a/drivers/thermal/intel/Kconfig b/drivers/thermal/intel/Kconfig
new file mode 100644
index 000000000000..9c06d4ad7c97
--- /dev/null
+++ b/drivers/thermal/intel/Kconfig
@@ -0,0 +1,77 @@
+config INTEL_POWERCLAMP
+	tristate "Intel PowerClamp idle injection driver"
+	depends on THERMAL
+	depends on X86
+	depends on CPU_SUP_INTEL
+	help
+	  Enable this to enable Intel PowerClamp idle injection driver. This
+	  enforce idle time which results in more package C-state residency. The
+	  user interface is exposed via generic thermal framework.
+
+config X86_PKG_TEMP_THERMAL
+	tristate "X86 package temperature thermal driver"
+	depends on X86_THERMAL_VECTOR
+	select THERMAL_GOV_USER_SPACE
+	select THERMAL_WRITABLE_TRIPS
+	default m
+	help
+	  Enable this to register CPU digital sensor for package temperature as
+	  thermal zone. Each package will have its own thermal zone. There are
+	  two trip points which can be set by user to get notifications via thermal
+	  notification methods.
+
+config INTEL_SOC_DTS_IOSF_CORE
+	tristate
+	depends on X86 && PCI
+	select IOSF_MBI
+	help
+	  This is becoming a common feature for Intel SoCs to expose the additional
+	  digital temperature sensors (DTSs) using side band interface (IOSF). This
+	  implements the common set of helper functions to register, get temperature
+	  and get/set thresholds on DTSs.
+
+config INTEL_SOC_DTS_THERMAL
+	tristate "Intel SoCs DTS thermal driver"
+	depends on X86 && PCI && ACPI
+	select INTEL_SOC_DTS_IOSF_CORE
+	select THERMAL_WRITABLE_TRIPS
+	help
+	  Enable this to register Intel SoCs (e.g. Bay Trail) platform digital
+	  temperature sensor (DTS). These SoCs have two additional DTSs in
+	  addition to DTSs on CPU cores. Each DTS will be registered as a
+	  thermal zone. There are two trip points. One of the trip point can
+	  be set by user mode programs to get notifications via Linux thermal
+	  notification methods.The other trip is a critical trip point, which
+	  was set by the driver based on the TJ MAX temperature.
+
+config INTEL_QUARK_DTS_THERMAL
+	tristate "Intel Quark DTS thermal driver"
+	depends on X86_INTEL_QUARK
+	help
+	  Enable this to register Intel Quark SoC (e.g. X1000) platform digital
+	  temperature sensor (DTS). For X1000 SoC, it has one on-die DTS.
+	  The DTS will be registered as a thermal zone. There are two trip points:
+	  hot & critical. The critical trip point default value is set by
+	  underlying BIOS/Firmware.
+
+menu "ACPI INT340X thermal drivers"
+source drivers/thermal/intel/int340x_thermal/Kconfig
+endmenu
+
+config INTEL_BXT_PMIC_THERMAL
+	tristate "Intel Broxton PMIC thermal driver"
+	depends on X86 && INTEL_SOC_PMIC_BXTWC && REGMAP
+	help
+	  Select this driver for Intel Broxton PMIC with ADC channels monitoring
+	  system temperature measurements and alerts.
+	  This driver is used for monitoring the ADC channels of PMIC and handles
+	  the alert trip point interrupts and notifies the thermal framework with
+	  the trip point and temperature details of the zone.
+
+config INTEL_PCH_THERMAL
+	tristate "Intel PCH Thermal Reporting Driver"
+	depends on X86 && PCI
+	help
+	  Enable this to support thermal reporting on certain intel PCHs.
+	  Thermal reporting device will provide temperature reading,
+	  programmable trip points and other information.
diff --git a/drivers/thermal/intel/Makefile b/drivers/thermal/intel/Makefile
new file mode 100644
index 000000000000..0d9736ced5d4
--- /dev/null
+++ b/drivers/thermal/intel/Makefile
@@ -0,0 +1,12 @@
+# SPDX-License-Identifier: GPL-2.0
+#
+# Makefile for various Intel thermal drivers.
+
+obj-$(CONFIG_INTEL_POWERCLAMP)	+= intel_powerclamp.o
+obj-$(CONFIG_X86_PKG_TEMP_THERMAL)	+= x86_pkg_temp_thermal.o
+obj-$(CONFIG_INTEL_SOC_DTS_IOSF_CORE)	+= intel_soc_dts_iosf.o
+obj-$(CONFIG_INTEL_SOC_DTS_THERMAL)	+= intel_soc_dts_thermal.o
+obj-$(CONFIG_INTEL_QUARK_DTS_THERMAL)	+= intel_quark_dts_thermal.o
+obj-$(CONFIG_INT340X_THERMAL)  += int340x_thermal/
+obj-$(CONFIG_INTEL_BXT_PMIC_THERMAL) += intel_bxt_pmic_thermal.o
+obj-$(CONFIG_INTEL_PCH_THERMAL)	+= intel_pch_thermal.o
diff --git a/drivers/thermal/int340x_thermal/Kconfig b/drivers/thermal/intel/int340x_thermal/Kconfig
similarity index 100%
rename from drivers/thermal/int340x_thermal/Kconfig
rename to drivers/thermal/intel/int340x_thermal/Kconfig
diff --git a/drivers/thermal/int340x_thermal/Makefile b/drivers/thermal/intel/int340x_thermal/Makefile
similarity index 100%
rename from drivers/thermal/int340x_thermal/Makefile
rename to drivers/thermal/intel/int340x_thermal/Makefile
diff --git a/drivers/thermal/int340x_thermal/acpi_thermal_rel.c b/drivers/thermal/intel/int340x_thermal/acpi_thermal_rel.c
similarity index 100%
rename from drivers/thermal/int340x_thermal/acpi_thermal_rel.c
rename to drivers/thermal/intel/int340x_thermal/acpi_thermal_rel.c
diff --git a/drivers/thermal/int340x_thermal/acpi_thermal_rel.h b/drivers/thermal/intel/int340x_thermal/acpi_thermal_rel.h
similarity index 100%
rename from drivers/thermal/int340x_thermal/acpi_thermal_rel.h
rename to drivers/thermal/intel/int340x_thermal/acpi_thermal_rel.h
diff --git a/drivers/thermal/int340x_thermal/int3400_thermal.c b/drivers/thermal/intel/int340x_thermal/int3400_thermal.c
similarity index 100%
rename from drivers/thermal/int340x_thermal/int3400_thermal.c
rename to drivers/thermal/intel/int340x_thermal/int3400_thermal.c
diff --git a/drivers/thermal/int340x_thermal/int3402_thermal.c b/drivers/thermal/intel/int340x_thermal/int3402_thermal.c
similarity index 100%
rename from drivers/thermal/int340x_thermal/int3402_thermal.c
rename to drivers/thermal/intel/int340x_thermal/int3402_thermal.c
diff --git a/drivers/thermal/int340x_thermal/int3403_thermal.c b/drivers/thermal/intel/int340x_thermal/int3403_thermal.c
similarity index 100%
rename from drivers/thermal/int340x_thermal/int3403_thermal.c
rename to drivers/thermal/intel/int340x_thermal/int3403_thermal.c
diff --git a/drivers/thermal/int340x_thermal/int3406_thermal.c b/drivers/thermal/intel/int340x_thermal/int3406_thermal.c
similarity index 100%
rename from drivers/thermal/int340x_thermal/int3406_thermal.c
rename to drivers/thermal/intel/int340x_thermal/int3406_thermal.c
diff --git a/drivers/thermal/int340x_thermal/int340x_thermal_zone.c b/drivers/thermal/intel/int340x_thermal/int340x_thermal_zone.c
similarity index 100%
rename from drivers/thermal/int340x_thermal/int340x_thermal_zone.c
rename to drivers/thermal/intel/int340x_thermal/int340x_thermal_zone.c
diff --git a/drivers/thermal/int340x_thermal/int340x_thermal_zone.h b/drivers/thermal/intel/int340x_thermal/int340x_thermal_zone.h
similarity index 100%
rename from drivers/thermal/int340x_thermal/int340x_thermal_zone.h
rename to drivers/thermal/intel/int340x_thermal/int340x_thermal_zone.h
diff --git a/drivers/thermal/int340x_thermal/processor_thermal_device.c b/drivers/thermal/intel/int340x_thermal/processor_thermal_device.c
similarity index 100%
rename from drivers/thermal/int340x_thermal/processor_thermal_device.c
rename to drivers/thermal/intel/int340x_thermal/processor_thermal_device.c
diff --git a/drivers/thermal/intel_bxt_pmic_thermal.c b/drivers/thermal/intel/intel_bxt_pmic_thermal.c
similarity index 100%
rename from drivers/thermal/intel_bxt_pmic_thermal.c
rename to drivers/thermal/intel/intel_bxt_pmic_thermal.c
diff --git a/drivers/thermal/intel_pch_thermal.c b/drivers/thermal/intel/intel_pch_thermal.c
similarity index 100%
rename from drivers/thermal/intel_pch_thermal.c
rename to drivers/thermal/intel/intel_pch_thermal.c
diff --git a/drivers/thermal/intel_powerclamp.c b/drivers/thermal/intel/intel_powerclamp.c
similarity index 100%
rename from drivers/thermal/intel_powerclamp.c
rename to drivers/thermal/intel/intel_powerclamp.c
diff --git a/drivers/thermal/intel_quark_dts_thermal.c b/drivers/thermal/intel/intel_quark_dts_thermal.c
similarity index 100%
rename from drivers/thermal/intel_quark_dts_thermal.c
rename to drivers/thermal/intel/intel_quark_dts_thermal.c
diff --git a/drivers/thermal/intel_soc_dts_iosf.c b/drivers/thermal/intel/intel_soc_dts_iosf.c
similarity index 100%
rename from drivers/thermal/intel_soc_dts_iosf.c
rename to drivers/thermal/intel/intel_soc_dts_iosf.c
diff --git a/drivers/thermal/intel_soc_dts_iosf.h b/drivers/thermal/intel/intel_soc_dts_iosf.h
similarity index 100%
rename from drivers/thermal/intel_soc_dts_iosf.h
rename to drivers/thermal/intel/intel_soc_dts_iosf.h
diff --git a/drivers/thermal/intel_soc_dts_thermal.c b/drivers/thermal/intel/intel_soc_dts_thermal.c
similarity index 100%
rename from drivers/thermal/intel_soc_dts_thermal.c
rename to drivers/thermal/intel/intel_soc_dts_thermal.c
diff --git a/drivers/thermal/x86_pkg_temp_thermal.c b/drivers/thermal/intel/x86_pkg_temp_thermal.c
similarity index 100%
rename from drivers/thermal/x86_pkg_temp_thermal.c
rename to drivers/thermal/intel/x86_pkg_temp_thermal.c
