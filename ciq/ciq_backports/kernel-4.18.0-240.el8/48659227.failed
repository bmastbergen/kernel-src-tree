pinctrl: iproc: allow for error from platform_get_irq()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Chris Packham <chris.packham@alliedtelesis.co.nz>
commit 48659227e0a1d7897a4942c7b2cf925b581b6bf7
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/48659227.failed

platform_get_irq() can return an error code. Allow for this when getting
the irq.

Fixes: 6f265e5d4da7 ("pinctrl: bcm-iproc: Pass irqchip when adding gpiochip")
	Signed-off-by: Chris Packham <chris.packham@alliedtelesis.co.nz>
Link: https://lore.kernel.org/r/20191003000310.17099-2-chris.packham@alliedtelesis.co.nz
	Acked-by: Scott Branden <scott.branden@broadcom.com>
	Signed-off-by: Linus Walleij <linus.walleij@linaro.org>
(cherry picked from commit 48659227e0a1d7897a4942c7b2cf925b581b6bf7)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/pinctrl/bcm/pinctrl-iproc-gpio.c
diff --cc drivers/pinctrl/bcm/pinctrl-iproc-gpio.c
index a6edeb9581d7,42f7ab383ad9..000000000000
--- a/drivers/pinctrl/bcm/pinctrl-iproc-gpio.c
+++ b/drivers/pinctrl/bcm/pinctrl-iproc-gpio.c
@@@ -792,11 -845,21 +792,16 @@@ static int iproc_gpio_probe(struct plat
  
  	/* optional GPIO interrupt support */
  	irq = platform_get_irq(pdev, 0);
++<<<<<<< HEAD
 +	if (irq) {
++=======
+ 	if (irq > 0) {
+ 		struct irq_chip *irqc;
++>>>>>>> 48659227e0a1 (pinctrl: iproc: allow for error from platform_get_irq())
  		struct gpio_irq_chip *girq;
  
 -		irqc = &chip->irqchip;
 -		irqc->name = "bcm-iproc-gpio";
 -		irqc->irq_ack = iproc_gpio_irq_ack;
 -		irqc->irq_mask = iproc_gpio_irq_mask;
 -		irqc->irq_unmask = iproc_gpio_irq_unmask;
 -		irqc->irq_set_type = iproc_gpio_irq_set_type;
 -		irqc->irq_enable = iproc_gpio_irq_unmask;
 -		irqc->irq_disable = iproc_gpio_irq_mask;
 -
  		girq = &gc->irq;
 -		girq->chip = irqc;
 +		girq->chip = &iproc_gpio_irq_chip;
  		girq->parent_handler = iproc_gpio_irq_handler;
  		girq->num_parents = 1;
  		girq->parents = devm_kcalloc(dev, 1,
* Unmerged path drivers/pinctrl/bcm/pinctrl-iproc-gpio.c
