perf report/top: Allow pressing hotkeys in the options popup menu

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Arnaldo Carvalho de Melo <acme@redhat.com>
commit 4c8b9c0f4281c8517542c26425aade3a31988575
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/4c8b9c0f.failed

When the users presses ENTER in the main 'perf report/top' screen a
popup menu is presented, in it some hotkeys are suggested as
alternatives to using the menu, or for additional features.

At that point the user may try those hotkeys, so allow for that by
recording the key used and exiting, the caller then can check for that
possibility and process the hotkey.

I.e. try pressing ENTER, and then 'k' to exit and zoom into the kernel
map, using ESC then zooms out, etc.

	Reviewed-by: Jiri Olsa <jolsa@kernel.org>
	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: Andi Kleen <ak@linux.intel.com>
	Cc: Jin Yao <yao.jin@linux.intel.com>
	Cc: Kan Liang <kan.liang@intel.com>
	Cc: Linus Torvalds <torvalds@linux-foundation.org>
	Cc: Namhyung Kim <namhyung@kernel.org>
Link: https://lkml.kernel.org/n/tip-ujfq3fw44kf6qrtfajl5dcsp@git.kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 4c8b9c0f4281c8517542c26425aade3a31988575)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/ui/browsers/hists.c
diff --cc tools/perf/ui/browsers/hists.c
index 3386768d57cb,8776b1cb29b7..000000000000
--- a/tools/perf/ui/browsers/hists.c
+++ b/tools/perf/ui/browsers/hists.c
@@@ -2975,13 -2995,13 +2975,20 @@@ static int perf_evsel__hists_browse(str
  	while (1) {
  		struct thread *thread = NULL;
  		struct map *map = NULL;
- 		int choice = 0;
+ 		int choice;
  		int socked_id = -1;
  
++<<<<<<< HEAD
 +		nr_options = 0;
 +
 +		key = hist_browser__run(browser, helpline,
 +					warn_lost_event);
++=======
+ 		key = 0; // reset key
+ do_hotkey:		 // key came straight from options ui__popup_menu()
+ 		choice = nr_options = 0;
+ 		key = hist_browser__run(browser, helpline, warn_lost_event, key);
++>>>>>>> 4c8b9c0f4281 (perf report/top: Allow pressing hotkeys in the options popup menu)
  
  		if (browser->he_selection != NULL) {
  			thread = hist_browser__selected_thread(browser);
* Unmerged path tools/perf/ui/browsers/hists.c
