drm/i915/tgl: Initialize multicast register steering for workarounds

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Matt Roper <matthew.d.roper@intel.com>
commit 2a040f0d08c3811f33b9880f5c0d84cb66e8fd74
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/2a040f0d.failed

Even though the bspec is missing gen12 register details for the MCR
selector register (0xFDC), this is confirmed by hardware folks to be a
mistake; the register does exist and we do indeed need to steer
multicast register reads to an appropriate instance the same as we did
on gen11.

Note that despite the lack of documentation we were still using the MCR
selector to read INSTDONE and such in read_subslice_reg() too.

	Cc: Matt Atwood <matthew.s.atwood@intel.com>
	Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20200414211118.2787489-4-matthew.d.roper@intel.com
	Reviewed-by: Jos√© Roberto de Souza <jose.souza@intel.com>
(cherry picked from commit 2a040f0d08c3811f33b9880f5c0d84cb66e8fd74)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/gt/intel_workarounds.c
diff --cc drivers/gpu/drm/i915/gt/intel_workarounds.c
index f8ed29b62e58,adddc5c93b48..000000000000
--- a/drivers/gpu/drm/i915/gt/intel_workarounds.c
+++ b/drivers/gpu/drm/i915/gt/intel_workarounds.c
@@@ -898,6 -933,29 +898,32 @@@ icl_gt_workarounds_init(struct drm_i915
  	wa_write_or(wal,
  		    GAMT_CHKN_BIT_REG,
  		    GAMT_CHKN_DISABLE_L3_COH_PIPE);
++<<<<<<< HEAD
++=======
+ 
+ 	/* Wa_1607087056:icl */
+ 	wa_write_or(wal,
+ 		    SLICE_UNIT_LEVEL_CLKGATE,
+ 		    L3_CLKGATE_DIS | L3_CR2X_CLKGATE_DIS);
+ }
+ 
+ static void
+ tgl_gt_workarounds_init(struct drm_i915_private *i915, struct i915_wa_list *wal)
+ {
+ 	wa_init_mcr(i915, wal);
+ 
+ 	/* Wa_1409420604:tgl */
+ 	if (IS_TGL_REVID(i915, TGL_REVID_A0, TGL_REVID_A0))
+ 		wa_write_or(wal,
+ 			    SUBSLICE_UNIT_LEVEL_CLKGATE2,
+ 			    CPSSUNIT_CLKGATE_DIS);
+ 
+ 	/* Wa_1607087056:tgl also know as BUG:1409180338 */
+ 	if (IS_TGL_REVID(i915, TGL_REVID_A0, TGL_REVID_A0))
+ 		wa_write_or(wal,
+ 			    SLICE_UNIT_LEVEL_CLKGATE,
+ 			    L3_CLKGATE_DIS | L3_CR2X_CLKGATE_DIS);
++>>>>>>> 2a040f0d08c3 (drm/i915/tgl: Initialize multicast register steering for workarounds)
  }
  
  static void
* Unmerged path drivers/gpu/drm/i915/gt/intel_workarounds.c
