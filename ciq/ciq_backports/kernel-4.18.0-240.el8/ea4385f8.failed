perf top: Decay all events in the evlist

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Namhyung Kim <namhyung@kernel.org>
commit ea4385f804eadce3f4fd8698d4ffd9e85fb6d5e0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/ea4385f8.failed

Currently perf top only decays entries in a selected evsel.  I don't
know whether it's intended (maybe due to performance reason?) but anyway
it might show incorrect output when event group is used since users will
see leader event is decayed but others are not.

This patch moves the decay code into perf_top__resort_hists() so that
stdio and TUI code shared the logic.

	Signed-off-by: Namhyung Kim <namhyung@kernel.org>
	Cc: Jiri Olsa <jolsa@redhat.com>
Link: http://lkml.kernel.org/r/20190827231555.121411-1-namhyung@kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit ea4385f804eadce3f4fd8698d4ffd9e85fb6d5e0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/builtin-top.c
diff --cc tools/perf/builtin-top.c
index 95aec2602043,104dbb1095c5..000000000000
--- a/tools/perf/builtin-top.c
+++ b/tools/perf/builtin-top.c
@@@ -579,8 -578,6 +580,11 @@@ static bool perf_top__handle_keypress(s
  static void perf_top__sort_new_samples(void *arg)
  {
  	struct perf_top *t = arg;
++<<<<<<< HEAD
 +	struct perf_evsel *evsel = t->sym_evsel;
 +	struct hists *hists;
++=======
++>>>>>>> ea4385f804ea (perf top: Decay all events in the evlist)
  
  	if (t->evlist->selected != NULL)
  		t->sym_evsel = t->evlist->selected;
* Unmerged path tools/perf/builtin-top.c
