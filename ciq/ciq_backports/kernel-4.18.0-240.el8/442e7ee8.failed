drm/i915: Add intel_atomic_get_bw_*_state helpers

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Stanislav Lisovskiy <stanislav.lisovskiy@intel.com>
commit 442e7ee834e8528ec85ea0df3c76bfe6c6742f5a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/442e7ee8.failed

Add correspondent helpers to be able to get old/new bandwidth
global state object.

v2: - Fixed typo in function call
v3: - Changed new functions naming to use convention proposed
      by Jani Nikula, i.e intel_bw_* in intel_bw.c file.
v4: - Change function naming back to intel_atomic* pattern,
      was decided to rename in a separate patch series.
v5: - Fix function naming to match existing practices(Ville)
v6: - Removed spurious whitespace
v7: - Removed bw_state NULL checks(Ville)

	Reviewed-by: Ville Syrj채l채 <ville.syrjala@linux.intel.com>
	Signed-off-by: Stanislav Lisovskiy <stanislav.lisovskiy@intel.com>
	Signed-off-by: Ville Syrj채l채 <ville.syrjala@linux.intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20200415143911.10244-3-stanislav.lisovskiy@intel.com
(cherry picked from commit 442e7ee834e8528ec85ea0df3c76bfe6c6742f5a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/display/intel_bw.c
#	drivers/gpu/drm/i915/display/intel_bw.h
diff --cc drivers/gpu/drm/i915/display/intel_bw.c
index 7b908e10d32e,4aa54fcb0629..000000000000
--- a/drivers/gpu/drm/i915/display/intel_bw.c
+++ b/drivers/gpu/drm/i915/display/intel_bw.c
@@@ -322,6 -375,41 +322,44 @@@ static unsigned int intel_bw_data_rate(
  	return data_rate;
  }
  
++<<<<<<< HEAD
++=======
+ struct intel_bw_state *
+ intel_atomic_get_old_bw_state(struct intel_atomic_state *state)
+ {
+ 	struct drm_i915_private *dev_priv = to_i915(state->base.dev);
+ 	struct intel_global_state *bw_state;
+ 
+ 	bw_state = intel_atomic_get_old_global_obj_state(state, &dev_priv->bw_obj);
+ 
+ 	return to_intel_bw_state(bw_state);
+ }
+ 
+ struct intel_bw_state *
+ intel_atomic_get_new_bw_state(struct intel_atomic_state *state)
+ {
+ 	struct drm_i915_private *dev_priv = to_i915(state->base.dev);
+ 	struct intel_global_state *bw_state;
+ 
+ 	bw_state = intel_atomic_get_new_global_obj_state(state, &dev_priv->bw_obj);
+ 
+ 	return to_intel_bw_state(bw_state);
+ }
+ 
+ struct intel_bw_state *
+ intel_atomic_get_bw_state(struct intel_atomic_state *state)
+ {
+ 	struct drm_i915_private *dev_priv = to_i915(state->base.dev);
+ 	struct intel_global_state *bw_state;
+ 
+ 	bw_state = intel_atomic_get_global_obj_state(state, &dev_priv->bw_obj);
+ 	if (IS_ERR(bw_state))
+ 		return ERR_CAST(bw_state);
+ 
+ 	return to_intel_bw_state(bw_state);
+ }
+ 
++>>>>>>> 442e7ee834e8 (drm/i915: Add intel_atomic_get_bw_*_state helpers)
  int intel_bw_atomic_check(struct intel_atomic_state *state)
  {
  	struct drm_i915_private *dev_priv = to_i915(state->base.dev);
diff --cc drivers/gpu/drm/i915/display/intel_bw.h
index e9d9c6d63bc3,ac004d6f4276..000000000000
--- a/drivers/gpu/drm/i915/display/intel_bw.h
+++ b/drivers/gpu/drm/i915/display/intel_bw.h
@@@ -24,19 -24,14 +24,30 @@@ struct intel_bw_state 
  
  #define to_intel_bw_state(x) container_of((x), struct intel_bw_state, base)
  
++<<<<<<< HEAD
 +static inline struct intel_bw_state *
 +intel_atomic_get_bw_state(struct intel_atomic_state *state)
 +{
 +	struct drm_i915_private *dev_priv = to_i915(state->base.dev);
 +	struct drm_private_state *bw_state;
 +
 +	bw_state = drm_atomic_get_private_obj_state(&state->base,
 +						    &dev_priv->bw_obj);
 +	if (IS_ERR(bw_state))
 +		return ERR_CAST(bw_state);
 +
 +	return to_intel_bw_state(bw_state);
 +}
++=======
+ struct intel_bw_state *
+ intel_atomic_get_old_bw_state(struct intel_atomic_state *state);
+ 
+ struct intel_bw_state *
+ intel_atomic_get_new_bw_state(struct intel_atomic_state *state);
+ 
+ struct intel_bw_state *
+ intel_atomic_get_bw_state(struct intel_atomic_state *state);
++>>>>>>> 442e7ee834e8 (drm/i915: Add intel_atomic_get_bw_*_state helpers)
  
  void intel_bw_init_hw(struct drm_i915_private *dev_priv);
  int intel_bw_init(struct drm_i915_private *dev_priv);
* Unmerged path drivers/gpu/drm/i915/display/intel_bw.c
* Unmerged path drivers/gpu/drm/i915/display/intel_bw.h
