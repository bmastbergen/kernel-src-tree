KVM: arm64: Clean up kvm makefiles

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Fuad Tabba <tabba@google.com>
commit 25357de01b95140ecacd4d9347d74df2dda789f2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/25357de0.failed

Consolidate references to the CONFIG_KVM configuration item to encompass
entire folders rather than per line.

	Signed-off-by: Fuad Tabba <tabba@google.com>
	Signed-off-by: Marc Zyngier <maz@kernel.org>
	Acked-by: Will Deacon <will@kernel.org>
Link: https://lore.kernel.org/r/20200505154520.194120-5-tabba@google.com
(cherry picked from commit 25357de01b95140ecacd4d9347d74df2dda789f2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/arm64/kvm/Makefile
#	arch/arm64/kvm/hyp/Makefile
diff --cc arch/arm64/kvm/Makefile
index 3ac1a64d2fb9,8d3d9513cbfe..000000000000
--- a/arch/arm64/kvm/Makefile
+++ b/arch/arm64/kvm/Makefile
@@@ -7,31 -7,21 +7,49 @@@ ccflags-y += -I $(srctree)/$(src) -I $(
  
  KVM=../../../virt/kvm
  
 -obj-$(CONFIG_KVM) += kvm.o
 -obj-$(CONFIG_KVM) += hyp/
 +obj-$(CONFIG_KVM_ARM_HOST) += kvm.o
 +obj-$(CONFIG_KVM_ARM_HOST) += hyp/
  
++<<<<<<< HEAD
 +kvm-$(CONFIG_KVM_ARM_HOST) += $(KVM)/kvm_main.o $(KVM)/coalesced_mmio.o $(KVM)/eventfd.o $(KVM)/vfio.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/arm.o $(KVM)/arm/mmu.o $(KVM)/arm/mmio.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/psci.o $(KVM)/arm/perf.o
 +
 +kvm-$(CONFIG_KVM_ARM_HOST) += inject_fault.o regmap.o va_layout.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += hyp.o hyp-init.o handle_exit.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += guest.o debug.o reset.o sys_regs.o sys_regs_generic_v8.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += vgic-sys-reg-v3.o fpsimd.o pmu.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/aarch32.o
 +
 +kvm-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/vgic/vgic.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/vgic/vgic-init.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/vgic/vgic-irqfd.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/vgic/vgic-v2.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/vgic/vgic-v3.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/vgic/vgic-v4.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/vgic/vgic-mmio.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/vgic/vgic-mmio-v2.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/vgic/vgic-mmio-v3.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/vgic/vgic-kvm-device.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/vgic/vgic-its.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/vgic/vgic-debug.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += $(KVM)/irqchip.o
 +kvm-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/arch_timer.o
 +kvm-$(CONFIG_KVM_ARM_PMU) += $(KVM)/arm/pmu.o
++=======
+ kvm-y := $(KVM)/kvm_main.o $(KVM)/coalesced_mmio.o $(KVM)/eventfd.o \
+ 	 $(KVM)/vfio.o $(KVM)/irqchip.o \
+ 	 arm.o mmu.o mmio.o psci.o perf.o hypercalls.o pvtime.o \
+ 	 inject_fault.o regmap.o va_layout.o hyp.o hyp-init.o handle_exit.o \
+ 	 guest.o debug.o reset.o sys_regs.o sys_regs_generic_v8.o \
+ 	 vgic-sys-reg-v3.o fpsimd.o pmu.o \
+ 	 aarch32.o arch_timer.o \
+ 	 vgic/vgic.o vgic/vgic-init.o \
+ 	 vgic/vgic-irqfd.o vgic/vgic-v2.o \
+ 	 vgic/vgic-v3.o vgic/vgic-v4.o \
+ 	 vgic/vgic-mmio.o vgic/vgic-mmio-v2.o \
+ 	 vgic/vgic-mmio-v3.o vgic/vgic-kvm-device.o \
+ 	 vgic/vgic-its.o vgic/vgic-debug.o
+ 
+ kvm-$(CONFIG_KVM_ARM_PMU)  += pmu-emul.o
++>>>>>>> 25357de01b95 (KVM: arm64: Clean up kvm makefiles)
diff --cc arch/arm64/kvm/hyp/Makefile
index c49551d048ae,8c9880783839..000000000000
--- a/arch/arm64/kvm/hyp/Makefile
+++ b/arch/arm64/kvm/hyp/Makefile
@@@ -3,22 -3,13 +3,29 @@@
  # Makefile for Kernel-based Virtual Machine module, HYP part
  #
  
 -ccflags-y += -fno-stack-protector -DDISABLE_BRANCH_PROFILING \
 -		$(DISABLE_STACKLEAK_PLUGIN)
 +ccflags-y += -fno-stack-protector -DDISABLE_BRANCH_PROFILING
  
++<<<<<<< HEAD
 +KVM=../../../../virt/kvm
 +
 +obj-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/hyp/vgic-v3-sr.o
 +obj-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/hyp/timer-sr.o
 +obj-$(CONFIG_KVM_ARM_HOST) += $(KVM)/arm/hyp/aarch32.o
 +
 +obj-$(CONFIG_KVM_ARM_HOST) += vgic-v2-cpuif-proxy.o
 +obj-$(CONFIG_KVM_ARM_HOST) += sysreg-sr.o
 +obj-$(CONFIG_KVM_ARM_HOST) += debug-sr.o
 +obj-$(CONFIG_KVM_ARM_HOST) += entry.o
 +obj-$(CONFIG_KVM_ARM_HOST) += switch.o
 +obj-$(CONFIG_KVM_ARM_HOST) += fpsimd.o
 +obj-$(CONFIG_KVM_ARM_HOST) += tlb.o
 +obj-$(CONFIG_KVM_ARM_HOST) += hyp-entry.o
++=======
+ obj-$(CONFIG_KVM) += hyp.o
+ 
+ hyp-y := vgic-v3-sr.o timer-sr.o aarch32.o vgic-v2-cpuif-proxy.o sysreg-sr.o \
+ 	 debug-sr.o entry.o switch.o fpsimd.o tlb.o hyp-entry.o
++>>>>>>> 25357de01b95 (KVM: arm64: Clean up kvm makefiles)
  
  # KVM code is run at a different exception code with a different map, so
  # compiler instrumentation that inserts callbacks or checks into the code may
* Unmerged path arch/arm64/kvm/Makefile
* Unmerged path arch/arm64/kvm/hyp/Makefile
