media: cec: move compat_ioctl handling to cec-api.c

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Arnd Bergmann <arnd@arndb.de>
commit e6c8320648a27d2f43bf56c6215fa48d85bf47c6
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/e6c83206.failed

All the CEC ioctls are compatible, and they are only implemented
in one driver, so we can simply let this driver handle them
natively.

	Signed-off-by: Arnd Bergmann <arnd@arndb.de>
	Reviewed-by: Hans Verkuil <hans.verkuil@cisco.com>
	Signed-off-by: Mauro Carvalho Chehab <mchehab+samsung@kernel.org>
(cherry picked from commit e6c8320648a27d2f43bf56c6215fa48d85bf47c6)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/compat_ioctl.c
diff --cc fs/compat_ioctl.c
index 52e8324e4cf7,33f48933a865..000000000000
--- a/fs/compat_ioctl.c
+++ b/fs/compat_ioctl.c
@@@ -1198,28 -1192,9 +1198,31 @@@ COMPATIBLE_IOCTL(VIDEO_FAST_FORWARD
  COMPATIBLE_IOCTL(VIDEO_SLOWMOTION)
  COMPATIBLE_IOCTL(VIDEO_GET_CAPABILITIES)
  COMPATIBLE_IOCTL(VIDEO_CLEAR_BUFFER)
 +COMPATIBLE_IOCTL(VIDEO_SET_ID)
  COMPATIBLE_IOCTL(VIDEO_SET_STREAMTYPE)
  COMPATIBLE_IOCTL(VIDEO_SET_FORMAT)
 +COMPATIBLE_IOCTL(VIDEO_SET_SYSTEM)
 +COMPATIBLE_IOCTL(VIDEO_SET_HIGHLIGHT)
 +COMPATIBLE_IOCTL(VIDEO_SET_SPU)
 +COMPATIBLE_IOCTL(VIDEO_GET_NAVI)
 +COMPATIBLE_IOCTL(VIDEO_SET_ATTRIBUTES)
  COMPATIBLE_IOCTL(VIDEO_GET_SIZE)
++<<<<<<< HEAD
 +COMPATIBLE_IOCTL(VIDEO_GET_FRAME_RATE)
 +/* cec */
 +COMPATIBLE_IOCTL(CEC_ADAP_G_CAPS)
 +COMPATIBLE_IOCTL(CEC_ADAP_G_LOG_ADDRS)
 +COMPATIBLE_IOCTL(CEC_ADAP_S_LOG_ADDRS)
 +COMPATIBLE_IOCTL(CEC_ADAP_G_PHYS_ADDR)
 +COMPATIBLE_IOCTL(CEC_ADAP_S_PHYS_ADDR)
 +COMPATIBLE_IOCTL(CEC_G_MODE)
 +COMPATIBLE_IOCTL(CEC_S_MODE)
 +COMPATIBLE_IOCTL(CEC_TRANSMIT)
 +COMPATIBLE_IOCTL(CEC_RECEIVE)
 +COMPATIBLE_IOCTL(CEC_DQEVENT)
 +
++=======
++>>>>>>> e6c8320648a2 (media: cec: move compat_ioctl handling to cec-api.c)
  /* joystick */
  COMPATIBLE_IOCTL(JSIOCGVERSION)
  COMPATIBLE_IOCTL(JSIOCGAXES)
diff --git a/drivers/media/cec/cec-api.c b/drivers/media/cec/cec-api.c
index b6536bbad530..9067728feb60 100644
--- a/drivers/media/cec/cec-api.c
+++ b/drivers/media/cec/cec-api.c
@@ -665,6 +665,7 @@ const struct file_operations cec_devnode_fops = {
 	.owner = THIS_MODULE,
 	.open = cec_open,
 	.unlocked_ioctl = cec_ioctl,
+	.compat_ioctl = cec_ioctl,
 	.release = cec_release,
 	.poll = cec_poll,
 	.llseek = no_llseek,
* Unmerged path fs/compat_ioctl.c
