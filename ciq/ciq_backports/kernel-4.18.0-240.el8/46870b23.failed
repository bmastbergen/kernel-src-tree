RDMA/odp: Remove broken debugging call to invalidate_range

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-240.el8
commit-author Jason Gunthorpe <jgg@ziepe.ca>
commit 46870b2391d5163e84180e051fdabadd502d8b44
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-240.el8/46870b23.failed

invalidate_range() also obtains the umem_mutex which is being held at this
point, so if this path were was ever called it would deadlock. Thus
conclude the debugging never triggers and rework it into a simple WARN_ON
and leave things as they are.

While here add a note to explain how we could possibly get inconsistent
page pointers.

Link: https://lore.kernel.org/r/20191009160934.3143-16-jgg@ziepe.ca
	Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
(cherry picked from commit 46870b2391d5163e84180e051fdabadd502d8b44)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/core/umem_odp.c
diff --cc drivers/infiniband/core/umem_odp.c
index 3b8387b6ca80,d7d5fadf0899..000000000000
--- a/drivers/infiniband/core/umem_odp.c
+++ b/drivers/infiniband/core/umem_odp.c
@@@ -488,10 -506,8 +488,9 @@@ static int ib_umem_odp_map_dma_single_p
  		u64 access_mask,
  		unsigned long current_seq)
  {
 -	struct ib_device *dev = umem_odp->umem.ibdev;
 +	struct ib_ucontext *context = umem_odp->umem.context;
 +	struct ib_device *dev = context->device;
  	dma_addr_t dma_addr;
- 	int remove_existing_mapping = 0;
  	int ret = 0;
  
  	/*
@@@ -526,19 -556,6 +539,22 @@@
  
  out:
  	put_user_page(page);
++<<<<<<< HEAD
 +
 +	if (remove_existing_mapping) {
 +		ib_umem_notifier_start_account(umem_odp);
 +		context->invalidate_range(
 +			umem_odp,
 +			ib_umem_start(umem_odp) +
 +				(page_index << umem_odp->page_shift),
 +			ib_umem_start(umem_odp) +
 +				((page_index + 1) << umem_odp->page_shift));
 +		ib_umem_notifier_end_account(umem_odp);
 +		ret = -EAGAIN;
 +	}
 +
++=======
++>>>>>>> 46870b2391d5 (RDMA/odp: Remove broken debugging call to invalidate_range)
  	return ret;
  }
  
* Unmerged path drivers/infiniband/core/umem_odp.c
