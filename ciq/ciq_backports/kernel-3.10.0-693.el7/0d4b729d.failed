cxgb4: Fix uld_send() for ctrl pkts

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Arjun V <arjun@chelsio.com>
commit 0d4b729dac35bb265533c79b554578a5ec6df384
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/0d4b729d.failed

Without any uld being loaded, uld_txq_info[] will be NULL. uld_send()
is also used for sending control work requests(for eg: setting filter)
that dont require any ulds to be loaded. Hence move uld_txq_info[]
assignment after ctrl_xmit().

Also added a NULL check for uld_txq_info[].

Fixes: 94cdb8bb993a (cxgb4: Add support for dynamic allocation
       of resources for ULD).
	Signed-off-by: Arjun V <arjun@chelsio.com>
	Signed-off-by: Casey Leedom <leedom@chelsio.com>
	Signed-off-by: Ganesh Goudar <ganeshgr@chelsio.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 0d4b729dac35bb265533c79b554578a5ec6df384)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/chelsio/cxgb4/sge.c
diff --cc drivers/net/ethernet/chelsio/cxgb4/sge.c
index 66aedc0b4e81,09653ae0d2b1..000000000000
--- a/drivers/net/ethernet/chelsio/cxgb4/sge.c
+++ b/drivers/net/ethernet/chelsio/cxgb4/sge.c
@@@ -1728,7 -1780,15 +1728,19 @@@ static inline int ofld_send(struct adap
  			idx = 0;
  		return ctrl_xmit(&adap->sge.ctrlq[idx], skb);
  	}
++<<<<<<< HEAD
 +	return ofld_xmit(&adap->sge.ofldtxq[idx], skb);
++=======
+ 
+ 	txq_info = adap->sge.uld_txq_info[tx_uld_type];
+ 	if (unlikely(!txq_info)) {
+ 		WARN_ON(true);
+ 		return NET_XMIT_DROP;
+ 	}
+ 
+ 	txq = &txq_info->uldtxq[idx];
+ 	return ofld_xmit(txq, skb);
++>>>>>>> 0d4b729dac35 (cxgb4: Fix uld_send() for ctrl pkts)
  }
  
  /**
* Unmerged path drivers/net/ethernet/chelsio/cxgb4/sge.c
