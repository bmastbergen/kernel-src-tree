ASoC: Intel: Skylake: Fix to turn off hdmi power on probe failure

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [sound] alsa: asoc: intel: skylake: Fix to turn off hdmi power on probe failure (Jaroslav Kysela) [1399503]
Rebuild_FUZZ: 95.59%
commit-author Sodhi, VunnyX <vunnyx.sodhi@intel.com>
commit 7a5857c3c282c12a8bd0cfd2dd4a17a9252c2b4d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/7a5857c3.failed

HDMI codec is required to be powered up before controller initialization
for successful enumeration of codec. If the probe fails it needs to be
powered off to balance the power state of HDMI codec.

This fix balances the reference count in the error path before turning
off the codec.

	Reported-by: Takashi Sakamoto <o-takashi@sakamocchi.jp>
	Signed-off-by: Sodhi, VunnyX <vunnyx.sodhi@intel.com>
	Signed-off-by: Subhransu S. Prusty <subhransu.s.prusty@intel.com>
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit 7a5857c3c282c12a8bd0cfd2dd4a17a9252c2b4d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/intel/skylake/skl.c
diff --cc sound/soc/intel/skylake/skl.c
index e97daebabf90,3fc30cbe83c1..000000000000
--- a/sound/soc/intel/skylake/skl.c
+++ b/sound/soc/intel/skylake/skl.c
@@@ -744,6 -744,11 +744,14 @@@ out_dsp_free
  	skl_free_dsp(skl);
  out_mach_free:
  	skl_machine_device_unregister(skl);
++<<<<<<< HEAD
++=======
+ out_nhlt_free:
+ 	skl_nhlt_free(skl->nhlt);
+ out_display_power_off:
+ 	if (IS_ENABLED(CONFIG_SND_SOC_HDAC_HDMI))
+ 		snd_hdac_display_power(bus, false);
++>>>>>>> 7a5857c3c282 (ASoC: Intel: Skylake: Fix to turn off hdmi power on probe failure)
  out_free:
  	skl->init_failed = 1;
  	skl_free(ebus);
* Unmerged path sound/soc/intel/skylake/skl.c
