amd-xgbe-phy: Provide support for auto-negotiation timeout

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Lendacky, Thomas <Thomas.Lendacky@amd.com>
commit 9ae5eecdba7297725b280e81e905f48f85f9ffe7
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/9ae5eecd.failed

Currently, there is no interrupt code that indicates auto-negotiation
has timed out. If the auto-negotiation has timed out then the start of
a new auto-negotiation will begin again with a new base page being
received. The state machine could be in a state that is not expecting
this interrupt code which results in an error during auto-negotiation.

Update the code to timestamp when the auto-negotiation starts.  Should
another page received interrupt code occur before auto-negotiation has
completed but after the auto-negotiation timeout, then reset the state
machine to allow the auto-negotiation to continue.

	Signed-off-by: Tom Lendacky <thomas.lendacky@amd.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 9ae5eecdba7297725b280e81e905f48f85f9ffe7)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/phy/amd-xgbe-phy.c
diff --cc drivers/net/phy/amd-xgbe-phy.c
index f9c133845302,fb276f64cd64..000000000000
--- a/drivers/net/phy/amd-xgbe-phy.c
+++ b/drivers/net/phy/amd-xgbe-phy.c
@@@ -76,6 -76,9 +76,12 @@@
  #include <linux/of_device.h>
  #include <linux/uaccess.h>
  #include <linux/bitops.h>
++<<<<<<< HEAD
++=======
+ #include <linux/property.h>
+ #include <linux/acpi.h>
+ #include <linux/jiffies.h>
++>>>>>>> 9ae5eecdba72 (amd-xgbe-phy: Provide support for auto-negotiation timeout)
  
  MODULE_AUTHOR("Tom Lendacky <thomas.lendacky@amd.com>");
  MODULE_LICENSE("Dual BSD/GPL");
* Unmerged path drivers/net/phy/amd-xgbe-phy.c
