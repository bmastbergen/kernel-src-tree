ntb_perf: clear link_is_up flag when the link goes down.

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [ntb] ntb_perf: clear link_is_up flag when the link goes down (Suravee Suthikulpanit) [1303727]
Rebuild_FUZZ: 99.10%
commit-author Logan Gunthorpe <logang@deltatee.com>
commit 35539b54ac339e2b2dee8c74bc9f0b06f11b11cf
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/35539b54.failed

When the link goes down, the link_is_up flag did not return to
false. This could have caused some subtle corner case bugs
when the link goes up and down quickly.

Once that was fixed, there was found to be a race if the link was
brought down then immediately up. The link_cleanup work would
occasionally be scheduled after the next link up event. This would
cancel the link_work that was supposed to occur and leave ntb_perf
in an unusable state.

To fix this we get rid of the link_cleanup work and put the actions
directly in the link_down event.

	Signed-off-by: Logan Gunthorpe <logang@deltatee.com>
	Acked-by: Dave Jiang <dave.jiang@intel.com>
	Signed-off-by: Jon Mason <jdmason@kudzu.us>
(cherry picked from commit 35539b54ac339e2b2dee8c74bc9f0b06f11b11cf)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/ntb/test/ntb_perf.c
* Unmerged path drivers/ntb/test/ntb_perf.c
* Unmerged path drivers/ntb/test/ntb_perf.c
