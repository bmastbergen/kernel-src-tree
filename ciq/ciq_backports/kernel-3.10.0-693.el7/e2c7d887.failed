HID: wacom: check for wacom->shared before following the pointer

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [hid] wacom: check for wacom->shared before following the pointer (Aristeu Rozanski) [1346348 1388646 1385026]
Rebuild_FUZZ: 95.93%
commit-author Benjamin Tissoires <benjamin.tissoires@redhat.com>
commit e2c7d8877e5caa2356b5bc8207535e83b126f653
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/e2c7d887.failed

486b908 (HID: wacom: do not send pen events before touch is up/forced out)
introduces a kernel oops when plugging a tablet without touch.

wacom->shared is null for these devices so this leads to a null pointer
exception.

Change the condition to make it clear that what we need is wacom->shared
not NULL.

	Signed-off-by: Benjamin Tissoires <benjamin.tissoires@redhat.com>
	Signed-off-by: Jiri Kosina <jkosina@suse.cz>
(cherry picked from commit e2c7d8877e5caa2356b5bc8207535e83b126f653)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/hid/wacom_wac.c
diff --cc drivers/hid/wacom_wac.c
index 27dda3639500,bbe32d66e500..000000000000
--- a/drivers/hid/wacom_wac.c
+++ b/drivers/hid/wacom_wac.c
@@@ -446,8 -551,15 +446,20 @@@ static int wacom_intuos_inout(struct wa
  	   (features->type == CINTIQ && !(data[1] & 0x40)))
  		return 1;
  
++<<<<<<< HEAD
 +	/* Range Report */
 +	if ((data[1] & 0xfe) == 0x20) {
++=======
+ 	if (wacom->shared) {
+ 		wacom->shared->stylus_in_proximity = true;
+ 
+ 		if (wacom->shared->touch_down)
+ 			return 1;
+ 	}
+ 
+ 	/* in Range while exiting */
+ 	if (((data[1] & 0xfe) == 0x20) && wacom->reporting_data) {
++>>>>>>> e2c7d8877e5c (HID: wacom: check for wacom->shared before following the pointer)
  		input_report_key(input, BTN_TOUCH, 0);
  		input_report_abs(input, ABS_PRESSURE, 0);
  		input_report_abs(input, ABS_DISTANCE, wacom->features.distance_max);
* Unmerged path drivers/hid/wacom_wac.c
