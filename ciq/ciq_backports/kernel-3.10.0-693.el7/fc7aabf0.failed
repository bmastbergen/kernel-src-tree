amd-xgbe: Remove manual check and set of dma_mask pointer

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Lendacky, Thomas <Thomas.Lendacky@amd.com>
commit fc7aabf0072fb9540f275f07afaf0724fbf6a176
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/fc7aabf0.failed

The underlying device support will set the device dma_mask pointer
if DMA is set up properly for the device.  Remove the check for and
assignment of dma_mask when it is null. Instead, just error out if
the dma_set_mask_and_coherent function fails because dma_mask is null.

	Signed-off-by: Tom Lendacky <thomas.lendacky@amd.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit fc7aabf0072fb9540f275f07afaf0724fbf6a176)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/amd/xgbe/xgbe-main.c
diff --cc drivers/net/ethernet/amd/xgbe/xgbe-main.c
index 51cdca78ec38,fb7c961da49f..000000000000
--- a/drivers/net/ethernet/amd/xgbe/xgbe-main.c
+++ b/drivers/net/ethernet/amd/xgbe/xgbe-main.c
@@@ -330,20 -674,14 +330,28 @@@ static int xgbe_probe(struct platform_d
  	/* Populate the hardware features */
  	xgbe_get_all_hw_features(pdata);
  
 -	/* Set default configuration data */
 -	xgbe_default_config(pdata);
 +	/* Retrieve the MAC address */
 +	mac_addr = of_get_mac_address(dev->of_node);
 +	if (!mac_addr) {
 +		dev_err(dev, "invalid mac address for this device\n");
 +		ret = -EINVAL;
 +		goto err_io;
 +	}
 +	memcpy(netdev->dev_addr, mac_addr, netdev->addr_len);
  
++<<<<<<< HEAD
 +	/* Retrieve the PHY mode - it must be "xgmii" */
 +	pdata->phy_mode = of_get_phy_mode(dev->of_node);
 +	if (pdata->phy_mode != PHY_INTERFACE_MODE_XGMII) {
 +		dev_err(dev, "invalid phy-mode specified for this device\n");
 +		ret = -EINVAL;
++=======
+ 	/* Set the DMA mask */
+ 	ret = dma_set_mask_and_coherent(dev,
+ 					DMA_BIT_MASK(pdata->hw_feat.dma_width));
+ 	if (ret) {
+ 		dev_err(dev, "dma_set_mask_and_coherent failed\n");
++>>>>>>> fc7aabf0072f (amd-xgbe: Remove manual check and set of dma_mask pointer)
  		goto err_io;
  	}
  
* Unmerged path drivers/net/ethernet/amd/xgbe/xgbe-main.c
