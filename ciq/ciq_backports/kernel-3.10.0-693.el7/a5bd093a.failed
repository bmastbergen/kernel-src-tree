crypto: ccp - Update CCP build support

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [crypto] ccp - Update CCP build support (Suravee Suthikulpanit) [1390820]
Rebuild_FUZZ: 88.24%
commit-author Tom Lendacky <thomas.lendacky@amd.com>
commit a5bd093af0d11611b765d3cbd354e0a39975caab
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/a5bd093a.failed

Add HAS_IOMEM as a Kconfig dependency. Always include ccp-platform.c
in the CCP build and conditionally include ccp-pci.c.

	Signed-off-by: Tom Lendacky <thomas.lendacky@amd.com>
	Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>
(cherry picked from commit a5bd093af0d11611b765d3cbd354e0a39975caab)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/crypto/Kconfig
#	drivers/crypto/ccp/Makefile
diff --cc drivers/crypto/Kconfig
index 20527bb8586f,b840b79655bc..000000000000
--- a/drivers/crypto/Kconfig
+++ b/drivers/crypto/Kconfig
@@@ -378,14 -389,51 +378,46 @@@ config CRYPTO_DEV_ATMEL_SH
  	  To compile this driver as a module, choose M here: the module
  	  will be called atmel-sha.
  
++<<<<<<< HEAD
++=======
+ config CRYPTO_DEV_CCP
+ 	bool "Support for AMD Cryptographic Coprocessor"
+ 	depends on ((X86 && PCI) || ARM64) && HAS_IOMEM
+ 	default n
+ 	help
+ 	  The AMD Cryptographic Coprocessor provides hardware support
+ 	  for encryption, hashing and related operations.
+ 
+ if CRYPTO_DEV_CCP
+ 	source "drivers/crypto/ccp/Kconfig"
+ endif
+ 
+ config CRYPTO_DEV_MXS_DCP
+ 	tristate "Support for Freescale MXS DCP"
+ 	depends on ARCH_MXS
+ 	select CRYPTO_SHA1
+ 	select CRYPTO_SHA256
+ 	select CRYPTO_CBC
+ 	select CRYPTO_ECB
+ 	select CRYPTO_AES
+ 	select CRYPTO_BLKCIPHER
+ 	select CRYPTO_ALGAPI
+ 	help
+ 	  The Freescale i.MX23/i.MX28 has SHA1/SHA256 and AES128 CBC/ECB
+ 	  co-processor on the die.
+ 
+ 	  To compile this driver as a module, choose M here: the module
+ 	  will be called mxs-dcp.
+ 
++>>>>>>> a5bd093af0d1 (crypto: ccp - Update CCP build support)
  source "drivers/crypto/qat/Kconfig"
  
 -config CRYPTO_DEV_QCE
 -	tristate "Qualcomm crypto engine accelerator"
 -	depends on (ARCH_QCOM || COMPILE_TEST) && HAS_DMA && HAS_IOMEM
 -	select CRYPTO_AES
 -	select CRYPTO_DES
 -	select CRYPTO_ECB
 -	select CRYPTO_CBC
 -	select CRYPTO_XTS
 -	select CRYPTO_CTR
 -	select CRYPTO_ALGAPI
 -	select CRYPTO_BLKCIPHER
 +config CRYPTO_DEV_VMX
 +	bool "Support for VMX cryptographic acceleration instructions"
 +	depends on PPC64
  	help
 -	  This driver supports Qualcomm crypto engine accelerator
 -	  hardware. To compile this driver as a module, choose M here. The
 -	  module will be called qcrypto.
 +	  Support for VMX cryptographic acceleration instructions.
 +
 +source "drivers/crypto/vmx/Kconfig"
  
  endif # CRYPTO_HW
* Unmerged path drivers/crypto/ccp/Makefile
* Unmerged path drivers/crypto/Kconfig
* Unmerged path drivers/crypto/ccp/Makefile
