tools/power turbostat: use intel-family.h model strings

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [tools] power turbostat: use intel-family.h model strings (Steve Best) [1379780]
Rebuild_FUZZ: 94.23%
commit-author Len Brown <len.brown@intel.com>
commit 869ce69e1e8ae7e6fa4a1a90887e5f94eac653eb
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/869ce69e.failed

All except for model 1F, a Nehalem, which is currently incorrectly
indentified as a Westmere in that new header.

	Signed-off-by: Len Brown <len.brown@intel.com>
(cherry picked from commit 869ce69e1e8ae7e6fa4a1a90887e5f94eac653eb)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/power/x86/turbostat/turbostat.c
diff --cc tools/power/x86/turbostat/turbostat.c
index 977a47d35105,2056c148c684..000000000000
--- a/tools/power/x86/turbostat/turbostat.c
+++ b/tools/power/x86/turbostat/turbostat.c
@@@ -2204,40 -2631,40 +2205,56 @@@ void rapl_probe(unsigned int family, un
  		return;
  
  	switch (model) {
- 	case 0x2A:
- 	case 0x3A:
- 	case 0x3C:	/* HSW */
- 	case 0x45:	/* HSW */
- 	case 0x46:	/* HSW */
- 	case 0x3D:	/* BDW */
- 	case 0x47:	/* BDW */
+ 	case INTEL_FAM6_SANDYBRIDGE:
+ 	case INTEL_FAM6_IVYBRIDGE:
+ 	case INTEL_FAM6_HASWELL_CORE:	/* HSW */
+ 	case INTEL_FAM6_HASWELL_ULT:	/* HSW */
+ 	case INTEL_FAM6_HASWELL_GT3E:	/* HSW */
+ 	case INTEL_FAM6_BROADWELL_CORE:	/* BDW */
+ 	case INTEL_FAM6_BROADWELL_GT3E:	/* BDW */
  		do_rapl = RAPL_PKG | RAPL_CORES | RAPL_CORE_POLICY | RAPL_GFX | RAPL_PKG_POWER_INFO;
  		break;
- 	case 0x5C:	/* BXT */
+ 	case INTEL_FAM6_ATOM_GOLDMONT:	/* BXT */
  		do_rapl = RAPL_PKG | RAPL_PKG_POWER_INFO;
  		break;
- 	case 0x4E:	/* SKL */
- 	case 0x5E:	/* SKL */
- 	case 0x8E:	/* KBL */
- 	case 0x9E:	/* KBL */
+ 	case INTEL_FAM6_SKYLAKE_MOBILE:	/* SKL */
+ 	case INTEL_FAM6_SKYLAKE_DESKTOP:	/* SKL */
+ 	case INTEL_FAM6_KABYLAKE_MOBILE:	/* KBL */
+ 	case INTEL_FAM6_KABYLAKE_DESKTOP:	/* KBL */
  		do_rapl = RAPL_PKG | RAPL_DRAM | RAPL_DRAM_PERF_STATUS | RAPL_PKG_PERF_STATUS | RAPL_PKG_POWER_INFO;
  		break;
++<<<<<<< HEAD
 +	case 0x3F:	/* HSX */
 +		do_rapl = RAPL_PKG | RAPL_DRAM | RAPL_DRAM_PERF_STATUS | RAPL_PKG_PERF_STATUS | RAPL_PKG_POWER_INFO;
 +		break;
 +	case 0x2D:
 +	case 0x3E:
 +	case 0x4F:	/* BDX */
 +	case 0x56:	/* BDX-DE */
 +	case 0x55:	/* SKX */
 +	case 0x57:	/* KNL */
 +		do_rapl = RAPL_PKG | RAPL_DRAM | RAPL_DRAM_POWER_INFO | RAPL_DRAM_PERF_STATUS | RAPL_PKG_PERF_STATUS | RAPL_PKG_POWER_INFO;
 +		break;
 +	case 0x37:	/* BYT */
 +	case 0x4D:	/* AVN */
++=======
+ 	case INTEL_FAM6_HASWELL_X:	/* HSX */
+ 	case INTEL_FAM6_BROADWELL_X:	/* BDX */
+ 	case INTEL_FAM6_BROADWELL_XEON_D:	/* BDX-DE */
+ 	case INTEL_FAM6_SKYLAKE_X:	/* SKX */
+ 	case INTEL_FAM6_XEON_PHI_KNL:	/* KNL */
+ 		do_rapl = RAPL_PKG | RAPL_DRAM | RAPL_DRAM_POWER_INFO | RAPL_DRAM_PERF_STATUS | RAPL_PKG_PERF_STATUS | RAPL_PKG_POWER_INFO;
+ 		break;
+ 	case INTEL_FAM6_SANDYBRIDGE_X:
+ 	case INTEL_FAM6_IVYBRIDGE_X:
+ 		do_rapl = RAPL_PKG | RAPL_CORES | RAPL_CORE_POLICY | RAPL_DRAM | RAPL_DRAM_POWER_INFO | RAPL_PKG_PERF_STATUS | RAPL_DRAM_PERF_STATUS | RAPL_PKG_POWER_INFO;
+ 		break;
+ 	case INTEL_FAM6_ATOM_SILVERMONT1:	/* BYT */
+ 	case INTEL_FAM6_ATOM_SILVERMONT2:	/* AVN */
++>>>>>>> 869ce69e1e8a (tools/power turbostat: use intel-family.h model strings)
  		do_rapl = RAPL_PKG | RAPL_CORES;
  		break;
- 	case 0x5f:	/* DNV */
+ 	case INTEL_FAM6_ATOM_DENVERTON:	/* DNV */
  		do_rapl = RAPL_PKG | RAPL_DRAM | RAPL_DRAM_POWER_INFO | RAPL_DRAM_PERF_STATUS | RAPL_PKG_PERF_STATUS | RAPL_PKG_POWER_INFO | RAPL_CORES_ENERGY_STATUS;
  		break;
  	default:
diff --git a/tools/power/x86/turbostat/Makefile b/tools/power/x86/turbostat/Makefile
index e367b1a85d70..2c68a782cb53 100644
--- a/tools/power/x86/turbostat/Makefile
+++ b/tools/power/x86/turbostat/Makefile
@@ -10,6 +10,7 @@ endif
 turbostat : turbostat.c
 CFLAGS +=	-Wall
 CFLAGS +=	-DMSRHEADER='"../../../../arch/x86/include/asm/msr-index.h"'
+CFLAGS +=	-DINTEL_FAMILY_HEADER='"../../../../arch/x86/include/asm/intel-family.h"'
 
 %: %.c
 	@mkdir -p $(BUILD_OUTPUT)
* Unmerged path tools/power/x86/turbostat/turbostat.c
