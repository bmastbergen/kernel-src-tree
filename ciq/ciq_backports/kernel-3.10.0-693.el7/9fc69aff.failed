amd-xgbe: Use the Tx queue count for Tx flow control support

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Lendacky, Thomas <Thomas.Lendacky@amd.com>
commit 9fc69affda1b576c0b4c2aed8acb9cf3de3349ba
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/9fc69aff.failed

When configuring Tx flow control the Rx queue count was used instead of
the Tx queue count for looping through the Tx hardware queues. Fix the
code to use the Tx queue count.

	Signed-off-by: Tom Lendacky <thomas.lendacky@amd.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 9fc69affda1b576c0b4c2aed8acb9cf3de3349ba)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/amd/xgbe/xgbe-dev.c
diff --cc drivers/net/ethernet/amd/xgbe/xgbe-dev.c
index e0e01d713934,6d0207eac265..000000000000
--- a/drivers/net/ethernet/amd/xgbe/xgbe-dev.c
+++ b/drivers/net/ethernet/amd/xgbe/xgbe-dev.c
@@@ -346,7 -348,7 +346,11 @@@ static int xgbe_disable_tx_flow_control
  
  	/* Clear MAC flow control */
  	max_q_count = XGMAC_MAX_FLOW_CONTROL_QUEUES;
++<<<<<<< HEAD
 +	q_count = min_t(unsigned int, pdata->hw_feat.rx_q_cnt, max_q_count);
++=======
+ 	q_count = min_t(unsigned int, pdata->tx_q_count, max_q_count);
++>>>>>>> 9fc69affda1b (amd-xgbe: Use the Tx queue count for Tx flow control support)
  	reg = MAC_Q0TFCR;
  	for (i = 0; i < q_count; i++) {
  		reg_val = XGMAC_IOREAD(pdata, reg);
@@@ -371,7 -373,7 +375,11 @@@ static int xgbe_enable_tx_flow_control(
  
  	/* Set MAC flow control */
  	max_q_count = XGMAC_MAX_FLOW_CONTROL_QUEUES;
++<<<<<<< HEAD
 +	q_count = min_t(unsigned int, pdata->hw_feat.rx_q_cnt, max_q_count);
++=======
+ 	q_count = min_t(unsigned int, pdata->tx_q_count, max_q_count);
++>>>>>>> 9fc69affda1b (amd-xgbe: Use the Tx queue count for Tx flow control support)
  	reg = MAC_Q0TFCR;
  	for (i = 0; i < q_count; i++) {
  		reg_val = XGMAC_IOREAD(pdata, reg);
* Unmerged path drivers/net/ethernet/amd/xgbe/xgbe-dev.c
