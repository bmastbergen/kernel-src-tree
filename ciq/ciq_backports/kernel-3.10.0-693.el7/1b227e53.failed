ip6_gre: Fix MTU setting for ip6gretap

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Haishuang Yan <yanhaishuang@cmss.chinamobile.com>
commit 1b227e536662eae4b7beee3037edbecdc577495f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/1b227e53.failed

When creat an ip6gretap interface with an unreachable route,
the MTU is about 14 bytes larger than what was needed.

If the remote address is reachable:
ping6 2001:0:130::1 -c 2
PING 2001:0:130::1(2001:0:130::1) 56 data bytes
64 bytes from 2001:0:130::1: icmp_seq=1 ttl=64 time=1.46 ms
64 bytes from 2001:0:130::1: icmp_seq=2 ttl=64 time=81.1 ms

	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 1b227e536662eae4b7beee3037edbecdc577495f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv6/ip6_gre.c
diff --cc net/ipv6/ip6_gre.c
index de87857f678f,a6fe3397728c..000000000000
--- a/net/ipv6/ip6_gre.c
+++ b/net/ipv6/ip6_gre.c
@@@ -1180,6 -1021,17 +1180,20 @@@ static int ip6gre_tunnel_init_common(st
  		return ret;
  	}
  
++<<<<<<< HEAD
++=======
+ 	tunnel->tun_hlen = gre_calc_hlen(tunnel->parms.o_flags);
+ 	tunnel->hlen = tunnel->tun_hlen + tunnel->encap_hlen;
+ 	t_hlen = tunnel->hlen + sizeof(struct ipv6hdr);
+ 
+ 	dev->hard_header_len = LL_MAX_HEADER + t_hlen;
+ 	dev->mtu = ETH_DATA_LEN - t_hlen;
+ 	if (dev->type == ARPHRD_ETHER)
+ 		dev->mtu -= ETH_HLEN;
+ 	if (!(tunnel->parms.flags & IP6_TNL_F_IGN_ENCAP_LIMIT))
+ 		dev->mtu -= 8;
+ 
++>>>>>>> 1b227e536662 (ip6_gre: Fix MTU setting for ip6gretap)
  	return 0;
  }
  
* Unmerged path net/ipv6/ip6_gre.c
