s390: wire up seccomp and getrandom syscalls

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Heiko Carstens <heiko.carstens@de.ibm.com>
commit b8a7a990ed24af7711455fb5347b914cd07ae169
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/b8a7a990.failed

	Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
(cherry picked from commit b8a7a990ed24af7711455fb5347b914cd07ae169)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/s390/include/uapi/asm/unistd.h
#	arch/s390/kernel/compat_wrapper.c
#	arch/s390/kernel/syscalls.S
diff --cc arch/s390/include/uapi/asm/unistd.h
index 25de1b52cfb3,9f5b88b32288..000000000000
--- a/arch/s390/include/uapi/asm/unistd.h
+++ b/arch/s390/include/uapi/asm/unistd.h
@@@ -280,16 -280,12 +280,25 @@@
  #define __NR_s390_runtime_instr 342
  #define __NR_kcmp		343
  #define __NR_finit_module	344
++<<<<<<< HEAD
 +#define __NR_sched_setattr 345
 +#define __NR_sched_getattr 346
 +/* Number 347 is reserved for sys_renameat2 */
 +/* Number 348 is reserved for sys_seccomp */
 +/* Number 349 is reserved for sys_getrandom */
 +/* Number 350 is reserved for sys_memfd_create */
 +/* Number 351 is reserved for sys_bpf */
 +#define __NR_s390_pci_mmio_write	352
 +#define __NR_s390_pci_mmio_read		353
 +#define NR_syscalls 354
++=======
+ #define __NR_sched_setattr	345
+ #define __NR_sched_getattr	346
+ #define __NR_renameat2		347
+ #define __NR_seccomp		348
+ #define __NR_getrandom		349
+ #define NR_syscalls 350
++>>>>>>> b8a7a990ed24 (s390: wire up seccomp and getrandom syscalls)
  
  /* 
   * There are some system calls that are not present on 64 bit, some
diff --cc arch/s390/kernel/syscalls.S
index 43ed37d807d4,e193b9e6dac8..000000000000
--- a/arch/s390/kernel/syscalls.S
+++ b/arch/s390/kernel/syscalls.S
@@@ -339,26 -339,22 +339,42 @@@ SYSCALL(sys_epoll_create1,sys_epoll_cre
  SYSCALL(sys_preadv,sys_preadv,compat_sys_preadv)
  SYSCALL(sys_pwritev,sys_pwritev,compat_sys_pwritev)
  SYSCALL(sys_rt_tgsigqueueinfo,sys_rt_tgsigqueueinfo,compat_sys_rt_tgsigqueueinfo) /* 330 */
 -SYSCALL(sys_perf_event_open,sys_perf_event_open,compat_sys_perf_event_open)
 -SYSCALL(sys_fanotify_init,sys_fanotify_init,compat_sys_fanotify_init)
 +SYSCALL(sys_perf_event_open,sys_perf_event_open,sys_perf_event_open_wrapper)
 +SYSCALL(sys_fanotify_init,sys_fanotify_init,sys_fanotify_init_wrapper)
  SYSCALL(sys_fanotify_mark,sys_fanotify_mark,compat_sys_fanotify_mark)
 -SYSCALL(sys_prlimit64,sys_prlimit64,compat_sys_prlimit64)
 -SYSCALL(sys_name_to_handle_at,sys_name_to_handle_at,compat_sys_name_to_handle_at) /* 335 */
 +SYSCALL(sys_prlimit64,sys_prlimit64,sys_prlimit64_wrapper)
 +SYSCALL(sys_name_to_handle_at,sys_name_to_handle_at,sys_name_to_handle_at_wrapper) /* 335 */
  SYSCALL(sys_open_by_handle_at,sys_open_by_handle_at,compat_sys_open_by_handle_at)
++<<<<<<< HEAD
 +SYSCALL(sys_clock_adjtime,sys_clock_adjtime,compat_sys_clock_adjtime_wrapper)
 +SYSCALL(sys_syncfs,sys_syncfs,sys_syncfs_wrapper)
 +SYSCALL(sys_setns,sys_setns,sys_setns_wrapper)
 +SYSCALL(sys_process_vm_readv,sys_process_vm_readv,compat_sys_process_vm_readv_wrapper) /* 340 */
 +SYSCALL(sys_process_vm_writev,sys_process_vm_writev,compat_sys_process_vm_writev_wrapper)
 +SYSCALL(sys_ni_syscall,sys_s390_runtime_instr,sys_s390_runtime_instr_wrapper)
 +SYSCALL(sys_kcmp,sys_kcmp,sys_kcmp_wrapper)
 +SYSCALL(sys_finit_module,sys_finit_module,sys_finit_module_wrapper)
 +SYSCALL(sys_sched_setattr,sys_sched_setattr,sys_sched_setattr_wrapper) /* 345 */
 +SYSCALL(sys_sched_getattr,sys_sched_getattr,sys_sched_getattr_wrapper)
 +NI_SYSCALL					/* 347 sys_renameat2 */
 +NI_SYSCALL					/* 348 sys_seccomp */
 +NI_SYSCALL					/* 349 sys_getrandom */
 +NI_SYSCALL					/* 350 sys_memfd_create */
 +NI_SYSCALL					/* 351 sys_bpf */
 +SYSCALL(sys_ni_syscall,sys_s390_pci_mmio_write,sys_s390_pci_mmio_write_wrapper)
 +SYSCALL(sys_ni_syscall,sys_s390_pci_mmio_read,sys_s390_pci_mmio_read_wrapper)
++=======
+ SYSCALL(sys_clock_adjtime,sys_clock_adjtime,compat_sys_clock_adjtime)
+ SYSCALL(sys_syncfs,sys_syncfs,compat_sys_syncfs)
+ SYSCALL(sys_setns,sys_setns,compat_sys_setns)
+ SYSCALL(sys_process_vm_readv,sys_process_vm_readv,compat_sys_process_vm_readv) /* 340 */
+ SYSCALL(sys_process_vm_writev,sys_process_vm_writev,compat_sys_process_vm_writev)
+ SYSCALL(sys_ni_syscall,sys_s390_runtime_instr,compat_sys_s390_runtime_instr)
+ SYSCALL(sys_kcmp,sys_kcmp,compat_sys_kcmp)
+ SYSCALL(sys_finit_module,sys_finit_module,compat_sys_finit_module)
+ SYSCALL(sys_sched_setattr,sys_sched_setattr,compat_sys_sched_setattr) /* 345 */
+ SYSCALL(sys_sched_getattr,sys_sched_getattr,compat_sys_sched_getattr)
+ SYSCALL(sys_renameat2,sys_renameat2,compat_sys_renameat2)
+ SYSCALL(sys_seccomp,sys_seccomp,compat_sys_seccomp)
+ SYSCALL(sys_getrandom,sys_getrandom,compat_sys_getrandom)
++>>>>>>> b8a7a990ed24 (s390: wire up seccomp and getrandom syscalls)
* Unmerged path arch/s390/kernel/compat_wrapper.c
* Unmerged path arch/s390/include/uapi/asm/unistd.h
* Unmerged path arch/s390/kernel/compat_wrapper.c
* Unmerged path arch/s390/kernel/syscalls.S
