xfs: remove XBF_WRITE flag wrapper macros

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Dave Chinner <dchinner@redhat.com>
commit b68c08219a6726fb68dca2d56e024d2e2c1654f5
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/b68c0821.failed

They only set/clear/check a flag, no need for obfuscating this
with a macro.

	Signed-off-by: Dave Chinner <dchinner@redhat.com>
	Reviewed-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Dave Chinner <david@fromorbit.com>


(cherry picked from commit b68c08219a6726fb68dca2d56e024d2e2c1654f5)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/xfs/xfs_buf.h
#	fs/xfs/xfs_log.c
#	fs/xfs/xfs_log_recover.c
diff --cc fs/xfs/xfs_buf.h
index 648b20e00240,a1189625cca4..000000000000
--- a/fs/xfs/xfs_buf.h
+++ b/fs/xfs/xfs_buf.h
@@@ -346,22 -321,6 +346,25 @@@ void xfs_buf_stale(struct xfs_buf *bp)
  #define XFS_BUF_UNSTALE(bp)	((bp)->b_flags &= ~XBF_STALE)
  #define XFS_BUF_ISSTALE(bp)	((bp)->b_flags & XBF_STALE)
  
++<<<<<<< HEAD
 +#define XFS_BUF_DONE(bp)	((bp)->b_flags |= XBF_DONE)
 +#define XFS_BUF_UNDONE(bp)	((bp)->b_flags &= ~XBF_DONE)
 +#define XFS_BUF_ISDONE(bp)	((bp)->b_flags & XBF_DONE)
 +
 +#define XFS_BUF_ASYNC(bp)	((bp)->b_flags |= XBF_ASYNC)
 +#define XFS_BUF_UNASYNC(bp)	((bp)->b_flags &= ~XBF_ASYNC)
 +#define XFS_BUF_ISASYNC(bp)	((bp)->b_flags & XBF_ASYNC)
 +
 +#define XFS_BUF_READ(bp)	((bp)->b_flags |= XBF_READ)
 +#define XFS_BUF_UNREAD(bp)	((bp)->b_flags &= ~XBF_READ)
 +#define XFS_BUF_ISREAD(bp)	((bp)->b_flags & XBF_READ)
 +
 +#define XFS_BUF_WRITE(bp)	((bp)->b_flags |= XBF_WRITE)
 +#define XFS_BUF_UNWRITE(bp)	((bp)->b_flags &= ~XBF_WRITE)
 +#define XFS_BUF_ISWRITE(bp)	((bp)->b_flags & XBF_WRITE)
 +
++=======
++>>>>>>> b68c08219a67 (xfs: remove XBF_WRITE flag wrapper macros)
  /*
   * These macros use the IO block map rather than b_bn. b_bn is now really
   * just for the buffer cache index for cached buffers. As IO does not use b_bn
diff --cc fs/xfs/xfs_log.c
index 747a315eb12b,edf20b204235..000000000000
--- a/fs/xfs/xfs_log.c
+++ b/fs/xfs/xfs_log.c
@@@ -1866,8 -1865,7 +1866,12 @@@ xlog_sync
  	bp->b_io_length = BTOBB(count);
  	bp->b_fspriv = iclog;
  	XFS_BUF_ZEROFLAGS(bp);
++<<<<<<< HEAD
 +	XFS_BUF_ASYNC(bp);
 +	bp->b_flags |= XBF_SYNCIO;
++=======
+ 	bp->b_flags |= (XBF_ASYNC | XBF_SYNCIO | XBF_WRITE);
++>>>>>>> b68c08219a67 (xfs: remove XBF_WRITE flag wrapper macros)
  
  	if (log->l_mp->m_flags & XFS_MOUNT_BARRIER) {
  		bp->b_flags |= XBF_FUA;
@@@ -1912,8 -1909,7 +1915,12 @@@
  				(char *)&iclog->ic_header + count, split);
  		bp->b_fspriv = iclog;
  		XFS_BUF_ZEROFLAGS(bp);
++<<<<<<< HEAD
 +		XFS_BUF_ASYNC(bp);
 +		bp->b_flags |= XBF_SYNCIO;
++=======
+ 		bp->b_flags |= (XBF_ASYNC | XBF_SYNCIO | XBF_WRITE);
++>>>>>>> b68c08219a67 (xfs: remove XBF_WRITE flag wrapper macros)
  		if (log->l_mp->m_flags & XFS_MOUNT_BARRIER)
  			bp->b_flags |= XBF_FUA;
  
diff --cc fs/xfs/xfs_log_recover.c
index 67ded68898f9,50a75ecf279e..000000000000
--- a/fs/xfs/xfs_log_recover.c
+++ b/fs/xfs/xfs_log_recover.c
@@@ -5077,10 -4926,9 +5077,16 @@@ xlog_do_recover
  	 * updates, re-read in the superblock and reverify it.
  	 */
  	bp = xfs_getsb(log->l_mp, 0);
++<<<<<<< HEAD
 +	XFS_BUF_UNDONE(bp);
 +	ASSERT(!(XFS_BUF_ISWRITE(bp)));
 +	XFS_BUF_READ(bp);
 +	XFS_BUF_UNASYNC(bp);
++=======
+ 	bp->b_flags &= ~(XBF_DONE | XBF_ASYNC);
+ 	ASSERT(!(bp->b_flags & XBF_WRITE));
+ 	bp->b_flags |= XBF_READ;
++>>>>>>> b68c08219a67 (xfs: remove XBF_WRITE flag wrapper macros)
  	bp->b_ops = &xfs_sb_buf_ops;
  
  	error = xfs_buf_submit_wait(bp);
* Unmerged path fs/xfs/xfs_buf.h
* Unmerged path fs/xfs/xfs_log.c
* Unmerged path fs/xfs/xfs_log_recover.c
