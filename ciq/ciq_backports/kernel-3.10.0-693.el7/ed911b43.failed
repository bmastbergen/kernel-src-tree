pvclock: Get rid of __pvclock_read_cycles in function pvclock_read_flags

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Minfei Huang <mnghuan@gmail.com>
commit ed911b43adb889c37a37fa57a995f0b460c633b6
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/ed911b43.failed

There is a generic function __pvclock_read_cycles to be used to get both
flags and cycles. For function pvclock_read_flags, it's useless to get
cycles value. To make this function be more effective, get this variable
flags directly in function.

	Signed-off-by: Minfei Huang <mnghuan@gmail.com>
	Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>
(cherry picked from commit ed911b43adb889c37a37fa57a995f0b460c633b6)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/kernel/pvclock.c
diff --cc arch/x86/kernel/pvclock.c
index 2f355d229a58,06c58ce46762..000000000000
--- a/arch/x86/kernel/pvclock.c
+++ b/arch/x86/kernel/pvclock.c
@@@ -64,8 -64,13 +64,17 @@@ u8 pvclock_read_flags(struct pvclock_vc
  	u8 flags;
  
  	do {
++<<<<<<< HEAD
 +		version = __pvclock_read_cycles(src, &ret, &flags);
++=======
+ 		version = src->version;
+ 		/* Make the latest version visible */
+ 		smp_rmb();
+ 
+ 		flags = src->flags;
+ 		/* Make sure that the version double-check is last. */
+ 		smp_rmb();
++>>>>>>> ed911b43adb8 (pvclock: Get rid of __pvclock_read_cycles in function pvclock_read_flags)
  	} while ((src->version & 1) || version != src->version);
  
  	return flags & valid_flags;
* Unmerged path arch/x86/kernel/pvclock.c
