tools/power turbostat: CPUID(0x16) leaf shows base, max, and bus frequency

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [tools] power turbostat: CPUID(0x16) leaf shows base, max, and bus frequency (Prarit Bhargava) [1422076]
Rebuild_FUZZ: 95.77%
commit-author Len Brown <len.brown@intel.com>
commit 61a87ba7893a256d86c7eea6a7ab10d38ccac9b2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/61a87ba7.failed

This CPUID leaf is available on Skylake:

CPUID(0x16): base_mhz: 1500 max_mhz: 2200 bus_mhz: 100

	Signed-off-by: Len Brown <len.brown@intel.com>
(cherry picked from commit 61a87ba7893a256d86c7eea6a7ab10d38ccac9b2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/power/x86/turbostat/turbostat.c
diff --cc tools/power/x86/turbostat/turbostat.c
index 14d5a1ce6257,4c4470f3ac65..000000000000
--- a/tools/power/x86/turbostat/turbostat.c
+++ b/tools/power/x86/turbostat/turbostat.c
@@@ -2697,9 -2673,22 +2697,9 @@@ guess
  
  	return 0;
  }
 -
 -void decode_misc_enable_msr(void)
 -{
 -	unsigned long long msr;
 -
 -	if (!get_msr(base_cpu, MSR_IA32_MISC_ENABLE, &msr))
 -		fprintf(stderr, "cpu%d: MSR_IA32_MISC_ENABLE: 0x%08llx (%s %s %s)\n",
 -			base_cpu, msr,
 -			msr & (1 << 3) ? "TCC" : "",
 -			msr & (1 << 16) ? "EIST" : "",
 -			msr & (1 << 18) ? "MONITOR" : "");
 -}
 -
  void process_cpuid()
  {
- 	unsigned int eax, ebx, ecx, edx, max_level;
+ 	unsigned int eax, ebx, ecx, edx, max_level, max_extended_level;
  	unsigned int fms, family, model, stepping;
  
  	eax = ebx = ecx = edx = 0;
@@@ -2763,7 -2762,10 +2763,14 @@@
  			do_ptm ? "" : "No ",
  			has_epb ? "" : "No ");
  
++<<<<<<< HEAD
 +	if (max_level > 0x15) {
++=======
+ 	if (debug)
+ 		decode_misc_enable_msr();
+ 
+ 	if (max_level >= 0x15) {
++>>>>>>> 61a87ba7893a (tools/power turbostat: CPUID(0x16) leaf shows base, max, and bus frequency)
  		unsigned int eax_crystal;
  		unsigned int ebx_tsc;
  
@@@ -3158,7 -3164,7 +3178,11 @@@ int get_and_dump_counters(void
  }
  
  void print_version() {
++<<<<<<< HEAD
 +	fprintf(stderr, "turbostat version 4.12 5 Apr 2016"
++=======
+ 	fprintf(stderr, "turbostat version 4.9 22 Nov, 2015"
++>>>>>>> 61a87ba7893a (tools/power turbostat: CPUID(0x16) leaf shows base, max, and bus frequency)
  		" - Len Brown <lenb@kernel.org>\n");
  }
  
* Unmerged path tools/power/x86/turbostat/turbostat.c
