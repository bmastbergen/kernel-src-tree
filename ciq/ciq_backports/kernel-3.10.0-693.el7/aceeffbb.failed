zfcp: trace full payload of all SAN records (req,resp,iels)

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [s390] zfcp: trace full payload of all SAN records (req, resp, iels) (Hendrik Brueckner) [1391534]
Rebuild_FUZZ: 98.33%
commit-author Steffen Maier <maier@linux.vnet.ibm.com>
commit aceeffbb59bb91404a0bda32a542d7ebf878433a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/aceeffbb.failed

This was lost with commit 2c55b750a884b86dea8b4cc5f15e1484cc47a25c
("[SCSI] zfcp: Redesign of the debug tracing for SAN records.")
but is necessary for problem determination, e.g. to see the
currently active zone set during automatic port scan.

For the large GPN_FT response (4 pages), save space by not dumping
any empty residual entries.

	Signed-off-by: Steffen Maier <maier@linux.vnet.ibm.com>
Fixes: 2c55b750a884 ("[SCSI] zfcp: Redesign of the debug tracing for SAN records.")
	Cc: <stable@vger.kernel.org> #2.6.38+
	Reviewed-by: Alexey Ishchuk <aishchuk@linux.vnet.ibm.com>
	Reviewed-by: Benjamin Block <bblock@linux.vnet.ibm.com>
	Reviewed-by: Hannes Reinecke <hare@suse.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit aceeffbb59bb91404a0bda32a542d7ebf878433a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/s390/scsi/zfcp_dbf.c
diff --cc drivers/s390/scsi/zfcp_dbf.c
index b92faed3bf21,637cf8973c9e..000000000000
--- a/drivers/s390/scsi/zfcp_dbf.c
+++ b/drivers/s390/scsi/zfcp_dbf.c
@@@ -3,7 -3,7 +3,11 @@@
   *
   * Debug traces for zfcp.
   *
++<<<<<<< HEAD
 + * Copyright IBM Corp. 2002, 2013
++=======
+  * Copyright IBM Corp. 2002, 2016
++>>>>>>> aceeffbb59bb (zfcp: trace full payload of all SAN records (req,resp,iels))
   */
  
  #define KMSG_COMPONENT "zfcp"
* Unmerged path drivers/s390/scsi/zfcp_dbf.c
diff --git a/drivers/s390/scsi/zfcp_dbf.h b/drivers/s390/scsi/zfcp_dbf.h
index 9c87b60c3f27..c5f992571c37 100644
--- a/drivers/s390/scsi/zfcp_dbf.h
+++ b/drivers/s390/scsi/zfcp_dbf.h
@@ -110,6 +110,7 @@ struct zfcp_dbf_san {
 	u32 d_id;
 #define ZFCP_DBF_SAN_MAX_PAYLOAD (FC_CT_HDR_LEN + 32)
 	char payload[ZFCP_DBF_SAN_MAX_PAYLOAD];
+	u16 pl_len;
 } __packed;
 
 /**
