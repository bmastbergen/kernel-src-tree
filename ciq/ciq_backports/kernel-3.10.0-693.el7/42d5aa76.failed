ipv4: fib: Send deletion notification with actual FIB alias type

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Ido Schimmel <idosch@mellanox.com>
commit 42d5aa76ec8fc9602922cc590a437ecd6693523b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/42d5aa76.failed

When a FIB alias is removed, a notification is sent using the type
passed from user space - can be RTN_UNSPEC - instead of the actual type
of the removed alias. This is problematic for listeners of the FIB
notification chain, as several FIB aliases can exist with matching
parameters, but the type.

Solve this by passing the actual type of the removed FIB alias.

	Signed-off-by: Ido Schimmel <idosch@mellanox.com>
	Signed-off-by: Jiri Pirko <jiri@mellanox.com>
CC: Patrick McHardy <kaber@trash.net>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 42d5aa76ec8fc9602922cc590a437ecd6693523b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv4/fib_trie.c
diff --cc net/ipv4/fib_trie.c
index a731822edc22,b0bfb1cc791a..000000000000
--- a/net/ipv4/fib_trie.c
+++ b/net/ipv4/fib_trie.c
@@@ -1480,6 -1652,9 +1480,12 @@@ int fib_table_delete(struct fib_table *
  	if (!fa_to_delete)
  		return -ESRCH;
  
++<<<<<<< HEAD
++=======
+ 	call_fib_entry_notifiers(net, FIB_EVENT_ENTRY_DEL, key, plen,
+ 				 fa_to_delete->fa_info, tos,
+ 				 fa_to_delete->fa_type, tb->tb_id, 0);
++>>>>>>> 42d5aa76ec8f (ipv4: fib: Send deletion notification with actual FIB alias type)
  	rtmsg_fib(RTM_DELROUTE, htonl(key), fa_to_delete, plen, tb->tb_id,
  		  &cfg->fc_nlinfo, 0);
  
* Unmerged path net/ipv4/fib_trie.c
