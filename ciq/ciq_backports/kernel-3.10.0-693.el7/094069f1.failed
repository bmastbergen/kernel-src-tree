flexfiles: remove pointless setting of NFS_LAYOUT_RETURN_REQUESTED

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Jeff Layton <jlayton@poochiereds.net>
commit 094069f1d96f691637b5c335f5eb79566d2457ff
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/094069f1.failed

Setting just the NFS_LAYOUT_RETURN_REQUESTED flag doesn't do anything,
unless there are lsegs that are also being marked for return. At the
point where that happens this flag is also set, so these set_bit calls
don't do anything useful.

	Signed-off-by: Jeff Layton <jeff.layton@primarydata.com>
	Signed-off-by: Anna Schumaker <Anna.Schumaker@Netapp.com>
(cherry picked from commit 094069f1d96f691637b5c335f5eb79566d2457ff)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/nfs/flexfilelayout/flexfilelayout.c
#	fs/nfs/flexfilelayout/flexfilelayoutdev.c
diff --cc fs/nfs/flexfilelayout/flexfilelayout.c
index d18d3f87f08b,40bccb2c06d1..000000000000
--- a/fs/nfs/flexfilelayout/flexfilelayout.c
+++ b/fs/nfs/flexfilelayout/flexfilelayout.c
@@@ -1270,8 -1270,6 +1270,11 @@@ static int ff_layout_read_done_cb(struc
  					hdr->pgio_mirror_idx + 1,
  					&hdr->pgio_mirror_idx))
  			goto out_eagain;
++<<<<<<< HEAD
 +		set_bit(NFS_LAYOUT_RETURN_BEFORE_CLOSE,
 +			&hdr->lseg->pls_layout->plh_flags);
++=======
++>>>>>>> 094069f1d96f (flexfiles: remove pointless setting of NFS_LAYOUT_RETURN_REQUESTED)
  		pnfs_read_resend_pnfs(hdr);
  		return task->tk_status;
  	case -NFS4ERR_RESET_TO_MDS:
diff --cc fs/nfs/flexfilelayout/flexfilelayoutdev.c
index bd81ba177b3b,bb598923b2ef..000000000000
--- a/fs/nfs/flexfilelayout/flexfilelayoutdev.c
+++ b/fs/nfs/flexfilelayout/flexfilelayoutdev.c
@@@ -393,13 -394,7 +393,17 @@@ nfs4_ff_layout_prepare_ds(struct pnfs_l
  					 mirror, lseg->pls_range.offset,
  					 lseg->pls_range.length, NFS4ERR_NXIO,
  					 OP_ILLEGAL, GFP_NOIO);
++<<<<<<< HEAD
 +		if (!fail_return) {
 +			if (ff_layout_has_available_ds(lseg))
 +				set_bit(NFS_LAYOUT_RETURN_BEFORE_CLOSE,
 +					&lseg->pls_layout->plh_flags);
 +			else
 +				pnfs_error_mark_layout_for_return(ino, lseg);
 +		} else
++=======
+ 		if (fail_return || !ff_layout_has_available_ds(lseg))
++>>>>>>> 094069f1d96f (flexfiles: remove pointless setting of NFS_LAYOUT_RETURN_REQUESTED)
  			pnfs_error_mark_layout_for_return(ino, lseg);
  		ds = NULL;
  	}
* Unmerged path fs/nfs/flexfilelayout/flexfilelayout.c
* Unmerged path fs/nfs/flexfilelayout/flexfilelayoutdev.c
