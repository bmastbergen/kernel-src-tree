x86, boot: Use the usual -y -n mechanism for objects in vmlinux

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [x86] boot: Use the usual -y -n mechanism for objects in vmlinux (Baoquan He) [1290840]
Rebuild_FUZZ: 95.87%
commit-author Josh Triplett <josh@joshtriplett.org>
commit 9a1cb47112eff140659f04c261ca19fb1f002607
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/9a1cb471.failed

Switch VMLINUX_OBJS to vmlinux-objs-y, to eliminate Makefile
conditionals in favor of vmlinux-objs-$(CONFIG_*) constructs.

This does not change the generated code at all.

	Signed-off-by: Josh Triplett <josh@joshtriplett.org>
(cherry picked from commit 9a1cb47112eff140659f04c261ca19fb1f002607)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/boot/compressed/Makefile
diff --cc arch/x86/boot/compressed/Makefile
index 1dc427850e11,80709a98cc9c..000000000000
--- a/arch/x86/boot/compressed/Makefile
+++ b/arch/x86/boot/compressed/Makefile
@@@ -26,20 -26,16 +26,25 @@@ LDFLAGS_vmlinux := -
  hostprogs-y	:= mkpiggy
  HOST_EXTRACFLAGS += -I$(srctree)/tools/include
  
- VMLINUX_OBJS = $(obj)/vmlinux.lds $(obj)/head_$(BITS).o $(obj)/misc.o \
+ vmlinux-objs-y := $(obj)/vmlinux.lds $(obj)/head_$(BITS).o $(obj)/misc.o \
  	$(obj)/string.o $(obj)/cmdline.o $(obj)/early_serial_console.o \
 -	$(obj)/piggy.o $(obj)/cpuflags.o $(obj)/aslr.o
 +	$(obj)/piggy.o
  
  $(obj)/eboot.o: KBUILD_CFLAGS += -fshort-wchar -mno-red-zone
  
++<<<<<<< HEAD
 +ifeq ($(CONFIG_EFI_STUB), y)
 +	VMLINUX_OBJS += $(obj)/eboot.o $(obj)/efi_stub_$(BITS).o
 +endif
 +ifeq ($(CONFIG_EFI_MIXED), y)
 +	VMLINUX_OBJS += $(obj)/efi_thunk_$(BITS).o
 +endif
++=======
+ vmlinux-objs-$(CONFIG_EFI_STUB) += $(obj)/eboot.o $(obj)/efi_stub_$(BITS).o \
+ 	$(objtree)/drivers/firmware/efi/libstub/lib.a
++>>>>>>> 9a1cb47112ef (x86, boot: Use the usual -y -n mechanism for objects in vmlinux)
  
- $(obj)/vmlinux: $(VMLINUX_OBJS) FORCE
+ $(obj)/vmlinux: $(vmlinux-objs-y) FORCE
  	$(call if_changed,ld)
  	@:
  
* Unmerged path arch/x86/boot/compressed/Makefile
