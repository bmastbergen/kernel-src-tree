pull bumping refcount into ->kill()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Al Viro <viro@zeniv.linux.org.uk>
commit 32426f6653cbfde1ca16aff27a530ee36332f796
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/32426f66.failed

there will be one more change of ->kill() calling conventions; this
isn't final.

	Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
(cherry picked from commit 32426f6653cbfde1ca16aff27a530ee36332f796)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/fs_pin.c
#	kernel/acct.c
diff --cc kernel/acct.c
index 7ffb48430dba,a74f3d1a0c26..000000000000
--- a/kernel/acct.c
+++ b/kernel/acct.c
@@@ -209,6 -185,25 +209,28 @@@ static void acct_kill(struct bsd_acct_s
  	}
  }
  
++<<<<<<< HEAD
++=======
+ static void acct_pin_kill(struct fs_pin *pin)
+ {
+ 	struct bsd_acct_struct *acct;
+ 	acct = container_of(pin, struct bsd_acct_struct, pin);
+ 	if (!atomic_long_inc_not_zero(&pin->count)) {
+ 		rcu_read_unlock();
+ 		cpu_relax();
+ 		return;
+ 	}
+ 	rcu_read_unlock();
+ 	mutex_lock(&acct->lock);
+ 	if (!acct->ns) {
+ 		mutex_unlock(&acct->lock);
+ 		acct_put(acct);
+ 		acct = NULL;
+ 	}
+ 	acct_kill(acct, NULL);
+ }
+ 
++>>>>>>> 32426f6653cb (pull bumping refcount into ->kill())
  static int acct_on(struct filename *pathname)
  {
  	struct file *file;
* Unmerged path fs/fs_pin.c
* Unmerged path fs/fs_pin.c
* Unmerged path kernel/acct.c
