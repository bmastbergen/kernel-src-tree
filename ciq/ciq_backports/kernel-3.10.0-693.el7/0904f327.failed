IB/hfi1: Remove unnecessary done label in hfi1_write_iter

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Ira Weiny <ira.weiny@intel.com>
commit 0904f32796d4bb2d8102cd0056d8634f247ce45a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/0904f327.failed

Simple code clean up of hfi1_write_iter.

	Reviewed-by: Dennis Dalessandro <dennis.dalessandro@intel.com>
	Signed-off-by: Ira Weiny <ira.weiny@intel.com>
	Signed-off-by: Dennis Dalessandro <dennis.dalessandro@intel.com>
	Signed-off-by: Doug Ledford <dledford@redhat.com>
(cherry picked from commit 0904f32796d4bb2d8102cd0056d8634f247ce45a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/hw/hfi1/file_ops.c
diff --cc drivers/infiniband/hw/hfi1/file_ops.c
index bd431292a676,2f097d942f9c..000000000000
--- a/drivers/infiniband/hw/hfi1/file_ops.c
+++ b/drivers/infiniband/hw/hfi1/file_ops.c
@@@ -404,17 -392,14 +404,25 @@@ static ssize_t hfi1_aio_write(struct ki
  	struct hfi1_filedata *fd = kiocb->ki_filp->private_data;
  	struct hfi1_user_sdma_pkt_q *pq = fd->pq;
  	struct hfi1_user_sdma_comp_q *cq = fd->cq;
++<<<<<<< HEAD
 +	int ret = 0, done = 0, reqs = 0;
++=======
+ 	int done = 0, reqs = 0;
+ 	unsigned long dim = from->nr_segs;
++>>>>>>> 0904f32796d4 (IB/hfi1: Remove unnecessary done label in hfi1_write_iter)
  
- 	if (!cq || !pq) {
- 		ret = -EIO;
- 		goto done;
- 	}
+ 	if (!cq || !pq)
+ 		return -EIO;
  
++<<<<<<< HEAD
 +	if (!dim) {
 +		ret = -EINVAL;
 +		goto done;
 +	}
++=======
+ 	if (!iter_is_iovec(from) || !dim)
+ 		return -EINVAL;
++>>>>>>> 0904f32796d4 (IB/hfi1: Remove unnecessary done label in hfi1_write_iter)
  
  	hfi1_cdbg(SDMA, "SDMA request from %u:%u (%lu)",
  		  fd->uctxt->ctxt, fd->subctxt, dim);
@@@ -428,10 -412,12 +435,12 @@@
  		unsigned long count = 0;
  
  		ret = hfi1_user_sdma_process_request(
 -			kiocb->ki_filp,	(struct iovec *)(from->iov + done),
 +			kiocb->ki_filp,	(struct iovec *)(iovec + done),
  			dim, &count);
- 		if (ret)
- 			goto done;
+ 		if (ret) {
+ 			reqs = ret;
+ 			break;
+ 		}
  		dim -= count;
  		done += count;
  		reqs++;
* Unmerged path drivers/infiniband/hw/hfi1/file_ops.c
