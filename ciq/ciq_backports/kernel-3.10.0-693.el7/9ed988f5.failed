md/r5cache: refactoring journal recovery code

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [md] r5cache: refactoring journal recovery code (Jes Sorensen) [1380016]
Rebuild_FUZZ: 96.55%
commit-author Song Liu <songliubraving@fb.com>
commit 9ed988f5dc673f009d78f7ac55c5da88e1cf58a0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/9ed988f5.failed

1. rename r5l_read_meta_block() as r5l_recovery_read_meta_block();
2. pull the code that initialize r5l_meta_block from
   r5l_log_write_empty_meta_block() to a separate function
   r5l_recovery_create_empty_meta_block(), so that we can reuse this
   piece of code.

	Signed-off-by: Song Liu <songliubraving@fb.com>
	Signed-off-by: Shaohua Li <shli@fb.com>
(cherry picked from commit 9ed988f5dc673f009d78f7ac55c5da88e1cf58a0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/md/raid5-cache.c
diff --cc drivers/md/raid5-cache.c
index f9e52fb68a1e,390be840c764..000000000000
--- a/drivers/md/raid5-cache.c
+++ b/drivers/md/raid5-cache.c
@@@ -1062,8 -1556,19 +1061,23 @@@ r5l_recovery_create_empty_meta_block(st
  	mb->position = cpu_to_le64(pos);
  	crc = crc32c_le(log->uuid_checksum, mb, PAGE_SIZE);
  	mb->checksum = cpu_to_le32(crc);
+ }
  
++<<<<<<< HEAD
 +	if (!sync_page_io(log->rdev, pos, PAGE_SIZE, page, WRITE_FUA, false)) {
++=======
+ static int r5l_log_write_empty_meta_block(struct r5l_log *log, sector_t pos,
+ 					  u64 seq)
+ {
+ 	struct page *page;
+ 
+ 	page = alloc_page(GFP_KERNEL);
+ 	if (!page)
+ 		return -ENOMEM;
+ 	r5l_recovery_create_empty_meta_block(log, page, pos, seq);
+ 	if (!sync_page_io(log->rdev, pos, PAGE_SIZE, page, REQ_OP_WRITE,
+ 			  WRITE_FUA, false)) {
++>>>>>>> 9ed988f5dc67 (md/r5cache: refactoring journal recovery code)
  		__free_page(page);
  		return -EIO;
  	}
* Unmerged path drivers/md/raid5-cache.c
