HID: wacom: Do not repeatedly attempt to set device mode on error

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [hid] wacom: Do not repeatedly attempt to set device mode on error (Aristeu Rozanski) [1346348 1388646 1385026]
Rebuild_FUZZ: 96.00%
commit-author Jason Gerecke <killertofu@gmail.com>
commit 64d0ed94f5dfde5efac15941128f60edf7f15c17
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/64d0ed94.failed

As an extension of aef3156d7, there is no sense in repeatedly calling the
'wacom_set_report' and 'wacom_get_report' functions if they return an
error. Getting an error from them implies that the device is out to lunch:
either a hard error code was returned or repeated attempts at recovering
from a "soft" error all failed. In either case, doing even more retries is
not likely to resolve whatever is wrong.

	Signed-off-by: Jason Gerecke <jason.gerecke@wacom.com>
	Signed-off-by: Jiri Kosina <jkosina@suse.cz>
(cherry picked from commit 64d0ed94f5dfde5efac15941128f60edf7f15c17)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/hid/wacom_sys.c
diff --cc drivers/hid/wacom_sys.c
index 527bf559d1db,6edb7d136476..000000000000
--- a/drivers/hid/wacom_sys.c
+++ b/drivers/hid/wacom_sys.c
@@@ -544,12 -330,12 +544,18 @@@ static int wacom_set_device_mode(struc
  		rep_data[0] = report_id;
  		rep_data[1] = mode;
  
 -		error = wacom_set_report(hdev, HID_FEATURE_REPORT, rep_data,
 -					 length, 1);
 +		error = wacom_set_report(intf, WAC_HID_FEATURE_REPORT,
 +		                         report_id, rep_data, length, 1);
  		if (error >= 0)
++<<<<<<< HEAD
 +			error = wacom_get_report(intf, WAC_HID_FEATURE_REPORT,
 +			                         report_id, rep_data, length, 1);
 +	} while ((error < 0 || rep_data[1] != mode) && limit++ < WAC_MSG_RETRIES);
++=======
+ 			error = wacom_get_report(hdev, HID_FEATURE_REPORT,
+ 			                         rep_data, length, 1);
+ 	} while (error >= 0 && rep_data[1] != mode && limit++ < WAC_MSG_RETRIES);
++>>>>>>> 64d0ed94f5df (HID: wacom: Do not repeatedly attempt to set device mode on error)
  
  	kfree(rep_data);
  
* Unmerged path drivers/hid/wacom_sys.c
