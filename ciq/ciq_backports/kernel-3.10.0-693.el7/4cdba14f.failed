x86/KASLR: Handle the memory limit specified by the 'memmap=' and 'mem=' boot options

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [x86] kaslr: Handle the memory limit specified by the 'memmap=' and 'mem=' boot options (Baoquan He) [1440928]
Rebuild_FUZZ: 97.59%
commit-author Baoquan He <bhe@redhat.com>
commit 4cdba14f84c9102c4434384731cd61018b970d59
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/4cdba14f.failed

The 'mem=' boot option limits the max address a system can use - any memory
region above the limit will be removed.

Furthermore, the 'memmap=nn[KMG]' variant (with no offset specified) has the same
behaviour as 'mem='.

KASLR needs to consider this when choosing the random position for
decompressing the kernel. Do it.

	Tested-by: Masayoshi Mizuma <m.mizuma@jp.fujitsu.com>
	Signed-off-by: Baoquan He <bhe@redhat.com>
	Acked-by: Kees Cook <keescook@chromium.org>
	Cc: Linus Torvalds <torvalds@linux-foundation.org>
	Cc: Peter Zijlstra <peterz@infradead.org>
	Cc: Thomas Gleixner <tglx@linutronix.de>
	Cc: dan.j.williams@intel.com
	Cc: douly.fnst@cn.fujitsu.com
	Cc: dyoung@redhat.com
Link: http://lkml.kernel.org/r/1494654390-23861-3-git-send-email-bhe@redhat.com
	Signed-off-by: Ingo Molnar <mingo@kernel.org>
(cherry picked from commit 4cdba14f84c9102c4434384731cd61018b970d59)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/boot/compressed/kaslr.c
* Unmerged path arch/x86/boot/compressed/kaslr.c
* Unmerged path arch/x86/boot/compressed/kaslr.c
