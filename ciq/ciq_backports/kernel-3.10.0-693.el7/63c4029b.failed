dell-laptop: use dell_smbios_find_token() instead of find_token_id()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Michał Kępień <kernel@kempniu.pl>
commit 63c4029bdfc220ec3a1fa9135f5db3bdcd93b502
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/63c4029b.failed

Replace all uses of find_token_id() with dell_smbios_find_token() to
avoid directly accessing the da_tokens table.

	Signed-off-by: Michał Kępień <kernel@kempniu.pl>
	Reviewed-by: Pali Rohár <pali.rohar@gmail.com>
	Signed-off-by: Darren Hart <dvhart@linux.intel.com>
(cherry picked from commit 63c4029bdfc220ec3a1fa9135f5db3bdcd93b502)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/platform/x86/dell-laptop.c
diff --cc drivers/platform/x86/dell-laptop.c
index 87688ae0318c,4d1694d972b1..000000000000
--- a/drivers/platform/x86/dell-laptop.c
+++ b/drivers/platform/x86/dell-laptop.c
@@@ -1452,45 -1325,47 +1452,68 @@@ static int kbd_set_state_safe(struct kb
  
  static int kbd_set_token_bit(u8 bit)
  {
++<<<<<<< HEAD
 +	int id;
++=======
+ 	struct calling_interface_buffer *buffer;
+ 	struct calling_interface_token *token;
++>>>>>>> 63c4029bdfc2 (dell-laptop: use dell_smbios_find_token() instead of find_token_id())
  	int ret;
  
  	if (bit >= ARRAY_SIZE(kbd_tokens))
  		return -EINVAL;
  
- 	id = find_token_id(kbd_tokens[bit]);
- 	if (id == -1)
+ 	token = dell_smbios_find_token(kbd_tokens[bit]);
+ 	if (!token)
  		return -EINVAL;
  
++<<<<<<< HEAD
 +	get_buffer();
 +	buffer->input[0] = da_tokens[id].location;
 +	buffer->input[1] = da_tokens[id].value;
 +	dell_send_request(buffer, 1, 0);
++=======
+ 	buffer = dell_smbios_get_buffer();
+ 	buffer->input[0] = token->location;
+ 	buffer->input[1] = token->value;
+ 	dell_smbios_send_request(1, 0);
++>>>>>>> 63c4029bdfc2 (dell-laptop: use dell_smbios_find_token() instead of find_token_id())
  	ret = buffer->output[0];
 -	dell_smbios_release_buffer();
 +	release_buffer();
  
  	return dell_smi_error(ret);
  }
  
  static int kbd_get_token_bit(u8 bit)
  {
++<<<<<<< HEAD
 +	int id;
++=======
+ 	struct calling_interface_buffer *buffer;
+ 	struct calling_interface_token *token;
++>>>>>>> 63c4029bdfc2 (dell-laptop: use dell_smbios_find_token() instead of find_token_id())
  	int ret;
  	int val;
  
  	if (bit >= ARRAY_SIZE(kbd_tokens))
  		return -EINVAL;
  
- 	id = find_token_id(kbd_tokens[bit]);
- 	if (id == -1)
+ 	token = dell_smbios_find_token(kbd_tokens[bit]);
+ 	if (!token)
  		return -EINVAL;
  
++<<<<<<< HEAD
 +	get_buffer();
 +	buffer->input[0] = da_tokens[id].location;
 +	dell_send_request(buffer, 0, 0);
++=======
+ 	buffer = dell_smbios_get_buffer();
+ 	buffer->input[0] = token->location;
+ 	dell_smbios_send_request(0, 0);
++>>>>>>> 63c4029bdfc2 (dell-laptop: use dell_smbios_find_token() instead of find_token_id())
  	ret = buffer->output[0];
  	val = buffer->output[1];
 -	dell_smbios_release_buffer();
 +	release_buffer();
  
  	if (ret)
  		return dell_smi_error(ret);
* Unmerged path drivers/platform/x86/dell-laptop.c
