xfs: don't pass value into attr ->put_listent

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Eric Sandeen <sandeen@sandeen.net>
commit e5bd12bfea60af455f4cbad494e4ac1082e3abd6
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/e5bd12bf.failed

The value is not used; only names and value lengths are
returned.  Remove the argument.

	Signed-off-by: Eric Sandeen <sandeen@redhat.com>
	Reviewed-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Dave Chinner <david@fromorbit.com>


(cherry picked from commit e5bd12bfea60af455f4cbad494e4ac1082e3abd6)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/xfs/xfs_attr_list.c
diff --cc fs/xfs/xfs_attr_list.c
index 4fa14820e2e2,d30dbfae05fe..000000000000
--- a/fs/xfs/xfs_attr_list.c
+++ b/fs/xfs/xfs_attr_list.c
@@@ -106,9 -106,9 +106,15 @@@ xfs_attr_shortform_list(xfs_attr_list_c
  					   sfe->flags,
  					   sfe->nameval,
  					   (int)sfe->namelen,
++<<<<<<< HEAD
 +					   (int)sfe->valuelen,
 +					   &sfe->nameval[sfe->namelen]);
 +
++=======
+ 					   (int)sfe->valuelen);
+ 			if (error)
+ 				return error;
++>>>>>>> e5bd12bfea60 (xfs: don't pass value into attr ->put_listent)
  			/*
  			 * Either search callback finished early or
  			 * didn't fit it all in the buffer after all.
diff --git a/fs/xfs/xfs_attr.h b/fs/xfs/xfs_attr.h
index dd4824589470..ea5267eecd4e 100644
--- a/fs/xfs/xfs_attr.h
+++ b/fs/xfs/xfs_attr.h
@@ -113,7 +113,7 @@ typedef struct attrlist_cursor_kern {
 
 
 typedef int (*put_listent_func_t)(struct xfs_attr_list_context *, int,
-			      unsigned char *, int, int, unsigned char *);
+			      unsigned char *, int, int);
 
 typedef struct xfs_attr_list_context {
 	struct xfs_inode		*dp;		/* inode */
* Unmerged path fs/xfs/xfs_attr_list.c
diff --git a/fs/xfs/xfs_xattr.c b/fs/xfs/xfs_xattr.c
index 2a753b46d3d8..fe15bc281eb1 100644
--- a/fs/xfs/xfs_xattr.c
+++ b/fs/xfs/xfs_xattr.c
@@ -159,8 +159,7 @@ xfs_xattr_put_listent(
 	int		flags,
 	unsigned char	*name,
 	int		namelen,
-	int		valuelen,
-	unsigned char	*value)
+	int		valuelen)
 {
 	unsigned int prefix_len = xfs_xattr_prefix_len(flags);
 	char *offset;
