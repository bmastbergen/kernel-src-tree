fold dup_mnt_ns() into its only surviving caller

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Al Viro <viro@zeniv.linux.org.uk>
commit 9559f68915024ece8be3781003f25aef3677e574
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/9559f689.failed

should've been done 6 years ago...

	Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
(cherry picked from commit 9559f68915024ece8be3781003f25aef3677e574)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/namespace.c
diff --cc fs/namespace.c
index 63d62ad44cff,c8d214ce30c6..000000000000
--- a/fs/namespace.c
+++ b/fs/namespace.c
@@@ -2508,29 -2470,6 +2513,32 @@@ struct mnt_namespace *copy_mnt_ns(unsig
  	return new_ns;
  }
  
++<<<<<<< HEAD
 +struct mnt_namespace *copy_mnt_ns(unsigned long flags, struct mnt_namespace *ns,
 +		struct user_namespace *user_ns, struct fs_struct *new_fs)
 +{
 +	struct mnt_namespace *new_ns;
 +
 +	BUG_ON(!ns);
 +	get_mnt_ns(ns);
 +
 +	if (!(flags & CLONE_NEWNS))
 +		return ns;
 +
 +	/* Unprivileged creation currently disabled in RHEL7  */
 +	if (!capable(CAP_SYS_ADMIN)) {
 +		put_mnt_ns(ns);
 +		return ERR_PTR(-EPERM);
 +	}
 +
 +	new_ns = dup_mnt_ns(ns, user_ns, new_fs);
 +
 +	put_mnt_ns(ns);
 +	return new_ns;
 +}
 +
++=======
++>>>>>>> 9559f6891502 (fold dup_mnt_ns() into its only surviving caller)
  /**
   * create_mnt_ns - creates a private namespace and adds a root filesystem
   * @mnt: pointer to the new root filesystem mountpoint
* Unmerged path fs/namespace.c
