rtnl: expose physical switch id for particular device

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Jiri Pirko <jiri@resnulli.us>
commit 82f2841291cfaf4d225aa1766424280254d3e3b2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/82f28412.failed

The netdevice represents a port in a switch, it will expose
IFLA_PHYS_SWITCH_ID value via rtnl. Two netdevices with the same value
belong to one physical switch.

	Signed-off-by: Jiri Pirko <jiri@resnulli.us>
	Reviewed-by: Thomas Graf <tgraf@suug.ch>
	Acked-by: John Fastabend <john.r.fastabend@intel.com>
	Acked-by: Andy Gospodarek <gospo@cumulusnetworks.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 82f2841291cfaf4d225aa1766424280254d3e3b2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/uapi/linux/if_link.h
#	net/core/rtnetlink.c
diff --cc include/uapi/linux/if_link.h
index 1b43f8aab560,623f1a7c7627..000000000000
--- a/include/uapi/linux/if_link.h
+++ b/include/uapi/linux/if_link.h
@@@ -153,8 -145,7 +153,12 @@@ enum 
  	IFLA_CARRIER,
  	IFLA_PHYS_PORT_ID,
  	IFLA_CARRIER_CHANGES,
++<<<<<<< HEAD
 +	__RH_RESERVED_IFLA_PHYS_SWITCH_ID,
 +	IFLA_LINK_NETNSID,
++=======
+ 	IFLA_PHYS_SWITCH_ID,
++>>>>>>> 82f2841291cf (rtnl: expose physical switch id for particular device)
  	__IFLA_MAX
  };
  
diff --cc net/core/rtnetlink.c
index 590c29aca2b6,aa5cd2c53a56..000000000000
--- a/net/core/rtnetlink.c
+++ b/net/core/rtnetlink.c
@@@ -1304,7 -1222,7 +1327,11 @@@ static const struct nla_policy ifla_pol
  	[IFLA_NUM_RX_QUEUES]	= { .type = NLA_U32 },
  	[IFLA_PHYS_PORT_ID]	= { .type = NLA_BINARY, .len = MAX_PHYS_ITEM_ID_LEN },
  	[IFLA_CARRIER_CHANGES]	= { .type = NLA_U32 },  /* ignored */
++<<<<<<< HEAD
 +	[IFLA_LINK_NETNSID]	= { .type = NLA_S32 },
++=======
+ 	[IFLA_PHYS_SWITCH_ID]	= { .type = NLA_BINARY, .len = MAX_PHYS_ITEM_ID_LEN },
++>>>>>>> 82f2841291cf (rtnl: expose physical switch id for particular device)
  };
  
  static const struct nla_policy ifla_info_policy[IFLA_INFO_MAX+1] = {
* Unmerged path include/uapi/linux/if_link.h
* Unmerged path net/core/rtnetlink.c
