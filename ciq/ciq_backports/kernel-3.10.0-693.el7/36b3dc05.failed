Btrfs: self-tests: Fix test_bitmaps fail on 64k sectorsize

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Feifei Xu <xufeifei@linux.vnet.ibm.com>
commit 36b3dc05b4650e81eca7d60d548a92b014595eb1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/36b3dc05.failed

With 64K sectorsize, 1G sized block group cannot span across bitmaps.
To execute test_bitmaps() function, this commit allocates
"BITS_PER_BITMAP * sectorsize + PAGE_SIZE" sized block group.

	Reviewed-by: Josef Bacik <jbacik@fb.com>
	Reviewed-by: Chandan Rajendra <chandan@linux.vnet.ibm.com>
	Signed-off-by: Feifei Xu <xufeifei@linux.vnet.ibm.com>
	Signed-off-by: David Sterba <dsterba@suse.com>
(cherry picked from commit 36b3dc05b4650e81eca7d60d548a92b014595eb1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/btrfs/tests/free-space-tests.c
diff --cc fs/btrfs/tests/free-space-tests.c
index 69a11e63d668,3956bb2ff84c..000000000000
--- a/fs/btrfs/tests/free-space-tests.c
+++ b/fs/btrfs/tests/free-space-tests.c
@@@ -893,7 -843,13 +893,17 @@@ int btrfs_test_free_space_cache(void
  
  	test_msg("Running btrfs free space cache tests\n");
  
++<<<<<<< HEAD
 +	cache = init_test_block_group();
++=======
+ 	/*
+ 	 * For ppc64 (with 64k page size), bytes per bitmap might be
+ 	 * larger than 1G.  To make bitmap test available in ppc64,
+ 	 * alloc dummy block group whose size cross bitmaps.
+ 	 */
+ 	cache = btrfs_alloc_dummy_block_group(BITS_PER_BITMAP * sectorsize
+ 					+ PAGE_SIZE, sectorsize);
++>>>>>>> 36b3dc05b465 (Btrfs: self-tests: Fix test_bitmaps fail on 64k sectorsize)
  	if (!cache) {
  		test_msg("Couldn't run the tests\n");
  		return 0;
* Unmerged path fs/btrfs/tests/free-space-tests.c
