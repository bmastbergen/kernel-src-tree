eth: Pull header from first fragment via eth_get_headlen

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Alexander Duyck <aduyck@mirantis.com>
commit d975ddd69698d068a8ebd294c382f1c791b380da
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/d975ddd6.failed

We want to try and pull the L4 header in if it is available in the first
fragment.  As such add the flag to indicate we want to pull the headers on
the first fragment in.

	Signed-off-by: Alexander Duyck <aduyck@mirantis.com>
	Acked-by: Tom Herbert <tom@herbertland.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit d975ddd69698d068a8ebd294c382f1c791b380da)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ethernet/eth.c
diff --cc net/ethernet/eth.c
index de86b55317f9,66dff5e3d772..000000000000
--- a/net/ethernet/eth.c
+++ b/net/ethernet/eth.c
@@@ -167,9 -134,9 +168,15 @@@ u32 eth_get_headlen(void *data, unsigne
  		return len;
  
  	/* parse any remaining L2/L3 headers, check for L4 */
++<<<<<<< HEAD
 +	if (!__skb_flow_dissect(NULL, &keys, data,
 +				eth->h_proto, sizeof(*eth), len))
 +		return max_t(u32, keys.thoff, sizeof(*eth));
++=======
+ 	if (!skb_flow_dissect_flow_keys_buf(&keys, data, eth->h_proto,
+ 					    sizeof(*eth), len, flags))
+ 		return max_t(u32, keys.control.thoff, sizeof(*eth));
++>>>>>>> d975ddd69698 (eth: Pull header from first fragment via eth_get_headlen)
  
  	/* parse for any L4 headers */
  	return min_t(u32, __skb_get_poff(NULL, data, &keys, len), len);
* Unmerged path net/ethernet/eth.c
