bridge: Fix br_should_learn to check vlan_enabled

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Vlad Yasevich <vyasevich@gmail.com>
commit c095f248e63ada504dd90c90baae673ae10ee3fe
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/c095f248.failed

As Toshiaki Makita pointed out, the BRIDGE_INPUT_SKB_CB will
not be initialized in br_should_learn() as that function
is called only from br_handle_local_finish().  That is
an input handler for link-local ethernet traffic so it perfectly
correct to check br->vlan_enabled here.

	Reported-by: Toshiaki Makita<toshiaki.makita1@gmail.com>
Fixes: 20adfa1 bridge: Check if vlan filtering is enabled only once.
	Signed-off-by: Vladislav Yasevich <vyasevic@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit c095f248e63ada504dd90c90baae673ae10ee3fe)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/bridge/br_vlan.c
diff --cc net/bridge/br_vlan.c
index 234e9acde00a,3ba57fcdcd13..000000000000
--- a/net/bridge/br_vlan.c
+++ b/net/bridge/br_vlan.c
@@@ -278,6 -279,7 +278,10 @@@ bool br_should_learn(struct net_bridge_
  	struct net_bridge *br = p->br;
  	struct net_port_vlans *v;
  
++<<<<<<< HEAD
++=======
+ 	/* If filtering was disabled at input, let it pass. */
++>>>>>>> c095f248e63a (bridge: Fix br_should_learn to check vlan_enabled)
  	if (!br->vlan_enabled)
  		return true;
  
* Unmerged path net/bridge/br_vlan.c
