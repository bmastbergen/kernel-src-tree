md/raid1: change printk() to pr_*()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [md] raid1: change printk() to pr_*() (Jes Sorensen) [1380016]
Rebuild_FUZZ: 95.52%
commit-author NeilBrown <neilb@suse.com>
commit 1d41c216febe43150e99b24fde5eda9e8097dccc
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/1d41c216.failed

	Signed-off-by: NeilBrown <neilb@suse.com>
	Signed-off-by: Shaohua Li <shli@fb.com>
(cherry picked from commit 1d41c216febe43150e99b24fde5eda9e8097dccc)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/md/raid1.c
diff --cc drivers/md/raid1.c
index 61555b115942,15f0b552bf48..000000000000
--- a/drivers/md/raid1.c
+++ b/drivers/md/raid1.c
@@@ -350,13 -347,10 +350,20 @@@ static void raid1_end_read_request(stru
  		 * oops, read error:
  		 */
  		char b[BDEVNAME_SIZE];
++<<<<<<< HEAD
 +		printk_ratelimited(
 +			KERN_ERR "md/raid1:%s: %s: "
 +			"rescheduling sector %llu\n",
 +			mdname(conf->mddev),
 +			bdevname(conf->mirrors[mirror].rdev->bdev,
 +				 b),
 +			(unsigned long long)r1_bio->sector);
++=======
+ 		pr_err_ratelimited("md/raid1:%s: %s: rescheduling sector %llu\n",
+ 				   mdname(conf->mddev),
+ 				   bdevname(rdev->bdev, b),
+ 				   (unsigned long long)r1_bio->sector);
++>>>>>>> 1d41c216febe (md/raid1: change printk() to pr_*())
  		set_bit(R1BIO_ReadError, &r1_bio->state);
  		reschedule_retry(r1_bio);
  		/* don't drop the reference on read_disk yet */
@@@ -1486,13 -1456,12 +1493,22 @@@ static void raid1_error(struct mddev *m
  	 * if recovery is running, make sure it aborts.
  	 */
  	set_bit(MD_RECOVERY_INTR, &mddev->recovery);
++<<<<<<< HEAD
 +	set_bit(MD_CHANGE_DEVS, &mddev->flags);
 +	set_bit(MD_CHANGE_PENDING, &mddev->flags);
 +	printk(KERN_ALERT
 +	       "md/raid1:%s: Disk failure on %s, disabling device.\n"
 +	       "md/raid1:%s: Operation continuing on %d devices.\n",
 +	       mdname(mddev), bdevname(rdev->bdev, b),
 +	       mdname(mddev), conf->raid_disks - mddev->degraded);
++=======
+ 	set_mask_bits(&mddev->flags, 0,
+ 		      BIT(MD_CHANGE_DEVS) | BIT(MD_CHANGE_PENDING));
+ 	pr_crit("md/raid1:%s: Disk failure on %s, disabling device.\n"
+ 		"md/raid1:%s: Operation continuing on %d devices.\n",
+ 		mdname(mddev), bdevname(rdev->bdev, b),
+ 		mdname(mddev), conf->raid_disks - mddev->degraded);
++>>>>>>> 1d41c216febe (md/raid1: change printk() to pr_*())
  }
  
  static void print_conf(struct r1conf *conf)
@@@ -2350,27 -2315,21 +2362,35 @@@ read_more
  		raid_end_bio_io(r1_bio);
  	} else {
  		const unsigned long do_sync
 -			= r1_bio->master_bio->bi_opf & REQ_SYNC;
 +			= r1_bio->master_bio->bi_rw & REQ_SYNC;
 +		if (bio) {
 +			r1_bio->bios[r1_bio->read_disk] =
 +				mddev->ro ? IO_BLOCKED : NULL;
 +			bio_put(bio);
 +		}
  		r1_bio->read_disk = disk;
  		bio = bio_clone_mddev(r1_bio->master_bio, GFP_NOIO, mddev);
 -		bio_trim(bio, r1_bio->sector - bio->bi_iter.bi_sector,
 -			 max_sectors);
 +		bio_trim(bio, r1_bio->sector - bio->bi_sector, max_sectors);
  		r1_bio->bios[r1_bio->read_disk] = bio;
  		rdev = conf->mirrors[disk].rdev;
++<<<<<<< HEAD
 +		printk_ratelimited(KERN_ERR
 +				   "md/raid1:%s: redirecting sector %llu"
 +				   " to other mirror: %s\n",
 +				   mdname(mddev),
 +				   (unsigned long long)r1_bio->sector,
 +				   bdevname(rdev->bdev, b));
 +		bio->bi_sector = r1_bio->sector + rdev->data_offset;
++=======
+ 		pr_info_ratelimited("md/raid1:%s: redirecting sector %llu to other mirror: %s\n",
+ 				    mdname(mddev),
+ 				    (unsigned long long)r1_bio->sector,
+ 				    bdevname(rdev->bdev, b));
+ 		bio->bi_iter.bi_sector = r1_bio->sector + rdev->data_offset;
++>>>>>>> 1d41c216febe (md/raid1: change printk() to pr_*())
  		bio->bi_bdev = rdev->bdev;
  		bio->bi_end_io = raid1_end_read_request;
 -		bio_set_op_attrs(bio, REQ_OP_READ, do_sync);
 +		bio->bi_rw = READ | do_sync;
  		bio->bi_private = r1_bio;
  		if (max_sectors < r1_bio->sectors) {
  			/* Drat - have to split this up more */
* Unmerged path drivers/md/raid1.c
