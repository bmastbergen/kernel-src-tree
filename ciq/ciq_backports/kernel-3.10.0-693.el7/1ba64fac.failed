geneve: testing the wrong variable in geneve6_build_skb()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Dan Carpenter <dan.carpenter@oracle.com>
commit 1ba64facae5739d91884f8f34f25fef1cb66d930
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/1ba64fac.failed

We intended to test "err" and not "skb".

Fixes: aed069df099c ('ip_tunnel_core: iptunnel_handle_offloads returns int and doesn't free skb')
	Signed-off-by: Dan Carpenter <dan.carpenter@oracle.com>
	Acked-by: Alexander Duyck <aduyck@mirantis.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 1ba64facae5739d91884f8f34f25fef1cb66d930)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/geneve.c
diff --cc drivers/net/geneve.c
index cd018ae81338,512dbe013713..000000000000
--- a/drivers/net/geneve.c
+++ b/drivers/net/geneve.c
@@@ -730,16 -729,12 +730,21 @@@ static int geneve6_build_skb(struct dst
  	min_headroom = LL_RESERVED_SPACE(dst->dev) + dst->header_len
  			+ GENEVE_BASE_HLEN + opt_len + sizeof(struct ipv6hdr);
  	err = skb_cow_head(skb, min_headroom);
 -	if (unlikely(err))
 +	if (unlikely(err)) {
 +		kfree_skb(skb);
  		goto free_dst;
 +	}
  
++<<<<<<< HEAD
 +	skb = udp_tunnel_handle_offloads(skb, udp_sum);
 +	if (IS_ERR(skb)) {
 +		err = PTR_ERR(skb);
++=======
+ 	err = udp_tunnel_handle_offloads(skb, udp_sum);
+ 	if (err)
++>>>>>>> 1ba64facae57 (geneve: testing the wrong variable in geneve6_build_skb())
  		goto free_dst;
 +	}
  
  	gnvh = (struct genevehdr *)__skb_push(skb, sizeof(*gnvh) + opt_len);
  	geneve_build_header(gnvh, tun_flags, vni, opt_len, opt);
* Unmerged path drivers/net/geneve.c
