perf record: Fix error paths

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Adrian Hunter <adrian.hunter@intel.com>
commit 5c01ad60b8a23f8ff59b9a5a756f07ed08f0b6d1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/5c01ad60.failed

Some error paths do not tidy-up. Fix that.

	Signed-off-by: Adrian Hunter <adrian.hunter@intel.com>
	Cc: Jiri Olsa <jolsa@redhat.com>
	Cc: Masami Hiramatsu <mhiramat@kernel.org>
	Cc: Mathieu Poirier <mathieu.poirier@linaro.org>
Link: http://lkml.kernel.org/r/1474641528-18776-6-git-send-email-adrian.hunter@intel.com
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 5c01ad60b8a23f8ff59b9a5a756f07ed08f0b6d1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/builtin-record.c
diff --cc tools/perf/builtin-record.c
index 9dd9b9ad314f,962adcfc43a5..000000000000
--- a/tools/perf/builtin-record.c
+++ b/tools/perf/builtin-record.c
@@@ -1369,8 -1579,19 +1369,22 @@@ int cmd_record(int argc, const char **a
  	err = auxtrace_parse_snapshot_options(rec->itr, &rec->opts,
  					      rec->opts.auxtrace_snapshot_opts);
  	if (err)
- 		return err;
+ 		goto out;
+ 
++<<<<<<< HEAD
++=======
+ 	if (dry_run)
+ 		goto out;
+ 
+ 	err = bpf__setup_stdout(rec->evlist);
+ 	if (err) {
+ 		bpf__strerror_setup_stdout(rec->evlist, err, errbuf, sizeof(errbuf));
+ 		pr_err("ERROR: Setup BPF stdout failed: %s\n",
+ 			 errbuf);
+ 		goto out;
+ 	}
  
++>>>>>>> 5c01ad60b8a2 (perf record: Fix error paths)
  	err = -ENOMEM;
  
  	symbol__init(NULL);
* Unmerged path tools/perf/builtin-record.c
