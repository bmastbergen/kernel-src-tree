tpm: Add TPM 2.0 support to the Nuvoton i2c driver (NPCT6xx family)

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Jason Gunthorpe <jgunthorpe@obsidianresearch.com>
commit 82cc1a49b6358394938e759dc4c22b2be773bbad
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/82cc1a49.failed

The command flow is exactly the same, the core simply needs to be
told to enable TPM2 mode when the compatible string indicates a
TPM2.

	Signed-off-by: Andrew Azmansky <andrew.zamansky@nuvoton.com>
	Tested-by: Andrew Zamansky <andrew.zamansky@nuvoton.com>
	Signed-off-by: Jason Gunthorpe <jgunthorpe@obsidianresearch.com>
	Acked-by: Rob Herring <robh@kernel.org>
	Reviewed-by: Jarkko Sakkinen <jarkko.sakkinen@linux.intel.com>
	Signed-off-by: Jarkko Sakkinen <jarkko.sakkinen@linux.intel.com>
(cherry picked from commit 82cc1a49b6358394938e759dc4c22b2be773bbad)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/char/tpm/tpm_i2c_nuvoton.c
diff --cc drivers/char/tpm/tpm_i2c_nuvoton.c
index b34e74193908,e3a9155ee671..000000000000
--- a/drivers/char/tpm/tpm_i2c_nuvoton.c
+++ b/drivers/char/tpm/tpm_i2c_nuvoton.c
@@@ -641,8 -655,7 +655,12 @@@ static struct i2c_driver i2c_nuvoton_dr
  	.probe = i2c_nuvoton_probe,
  	.remove = i2c_nuvoton_remove,
  	.driver = {
++<<<<<<< HEAD
 +		.name = I2C_DRIVER_NAME,
 +		.owner = THIS_MODULE,
++=======
+ 		.name = "tpm_i2c_nuvoton",
++>>>>>>> 82cc1a49b635 (tpm: Add TPM 2.0 support to the Nuvoton i2c driver (NPCT6xx family))
  		.pm = &i2c_nuvoton_pm_ops,
  		.of_match_table = of_match_ptr(i2c_nuvoton_of_match),
  	},
diff --git a/Documentation/devicetree/bindings/i2c/trivial-devices.txt b/Documentation/devicetree/bindings/i2c/trivial-devices.txt
index f1fb26eed0e9..9aaecc1c186a 100644
--- a/Documentation/devicetree/bindings/i2c/trivial-devices.txt
+++ b/Documentation/devicetree/bindings/i2c/trivial-devices.txt
@@ -46,6 +46,7 @@ national,lm75		I2C TEMP SENSOR
 national,lm80		Serial Interface ACPI-Compatible Microprocessor System Hardware Monitor
 national,lm92		±0.33°C Accurate, 12-Bit + Sign Temperature Sensor and Thermal Window Comparator with Two-Wire Interface
 nuvoton,npct501		i2c trusted platform module (TPM)
+nuvoton,npct601		i2c trusted platform module (TPM2)
 nxp,pca9556		Octal SMBus and I2C registered interface
 nxp,pca9557		8-bit I2C-bus and SMBus I/O port with reset
 nxp,pcf8563		Real-time clock/calendar
* Unmerged path drivers/char/tpm/tpm_i2c_nuvoton.c
