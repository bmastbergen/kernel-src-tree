tpm: Only call pm_runtime_get_sync if device has a parent

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Stefan Berger <stefanb@linux.vnet.ibm.com>
commit 6804f6bba09997393904a112f2043963a8e08abf
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/6804f6bb.failed

Only call pm_runtime_get_sync if the device has a parent. This
change fixes a crash in the tpm_vtpm_proxy driver since that
driver does not have a parent device.

	Signed-off-by: Stefan Berger <stefanb@linux.vnet.ibm.com>
	Reviewed-by: Jarkko Sakkinen <jarkko.sakkinen@linux.intel.com>
	Signed-off-by: Jarkko Sakkinen <jarkko.sakkinen@linux.intel.com>
(cherry picked from commit 6804f6bba09997393904a112f2043963a8e08abf)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/char/tpm/tpm-interface.c
diff --cc drivers/char/tpm/tpm-interface.c
index 8dd4f93138b9,a2688ac2b48f..000000000000
--- a/drivers/char/tpm/tpm-interface.c
+++ b/drivers/char/tpm/tpm-interface.c
@@@ -400,7 -401,8 +401,12 @@@ out_recv
  		dev_err(&chip->dev,
  			"tpm_transmit: tpm_recv: error %zd\n", rc);
  out:
++<<<<<<< HEAD
 +	pm_runtime_put(chip->dev.parent);
++=======
+ 	if (chip->dev.parent)
+ 		pm_runtime_put_sync(chip->dev.parent);
++>>>>>>> 6804f6bba099 (tpm: Only call pm_runtime_get_sync if device has a parent)
  
  	if (!(flags & TPM_TRANSMIT_UNLOCKED))
  		mutex_unlock(&chip->tpm_mutex);
* Unmerged path drivers/char/tpm/tpm-interface.c
