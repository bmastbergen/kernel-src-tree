nvme: Use blk-mq helper for IO termination

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [nvme] Use blk-mq helper for IO termination (David Milburn) [1384066]
Rebuild_FUZZ: 92.31%
commit-author Sagi Grimberg <sagig@mellanox.com>
commit 82b4552b91c40626a90a20291aab1137c638b512
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/82b4552b.failed

blk-mq offers a tagset iterator so let's use that
instead of using nvme_clear_queues.

Note, we changed nvme_queue_cancel_ios name to nvme_cancel_io
as there is no concept of a queue now in this function (we
also lost the print).

	Signed-off-by: Sagi Grimberg <sagig@mellanox.com>
	Reviewed-by: Christoph Hellwig <hch@lst.de>
	Acked-by: Keith Busch <keith.busch@intel.com>
	Reviewed-by: Johannes Thumshirn <jthumshirn@suse.de>
	Signed-off-by: Jens Axboe <axboe@fb.com>
(cherry picked from commit 82b4552b91c40626a90a20291aab1137c638b512)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/nvme/host/pci.c
diff --cc drivers/nvme/host/pci.c
index 7029a03e05b6,bd0d39482e83..000000000000
--- a/drivers/nvme/host/pci.c
+++ b/drivers/nvme/host/pci.c
@@@ -926,8 -973,7 +926,12 @@@ static void nvme_cancel_io(struct reque
  	if (!blk_mq_request_started(req))
  		return;
  
++<<<<<<< HEAD
 +	dev_dbg_ratelimited(nvmeq->q_dmadev,
 +		 "Cancelling I/O %d QID %d\n", req->tag, nvmeq->qid);
++=======
+ 	dev_dbg_ratelimited(dev->ctrl.device, "Cancelling I/O %d", req->tag);
++>>>>>>> 82b4552b91c4 (nvme: Use blk-mq helper for IO termination)
  
  	status = NVME_SC_ABORT_REQ;
  	if (blk_queue_dying(req->q))
* Unmerged path drivers/nvme/host/pci.c
