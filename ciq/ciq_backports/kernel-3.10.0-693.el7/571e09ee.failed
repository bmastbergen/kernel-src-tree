IB/mlx4: Use boottime

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Abhilash Jindal <klock.android@gmail.com>
commit 571e09eeff544e5562bd2a704f1fe91083f7592f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/571e09ee.failed

Wall time obtained from ktime_get_real_ns is susceptible to sudden jumps due to
user setting the time or due to NTP.  Boot time is constantly increasing time
better suited for comparing two timestamps.

	Signed-off-by: Abhilash Jindal <klock.android@gmail.com>
	Reviewed-by: Leon Romanovsky <leonro@mellanox.com>
	Signed-off-by: Doug Ledford <dledford@redhat.com>
(cherry picked from commit 571e09eeff544e5562bd2a704f1fe91083f7592f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/hw/mlx4/alias_GUID.c
diff --cc drivers/infiniband/hw/mlx4/alias_GUID.c
index 8699122a27fe,c74ef2620b85..000000000000
--- a/drivers/infiniband/hw/mlx4/alias_GUID.c
+++ b/drivers/infiniband/hw/mlx4/alias_GUID.c
@@@ -310,7 -310,7 +310,11 @@@ static void aliasguid_query_handler(in
  	if (status) {
  		pr_debug("(port: %d) failed: status = %d\n",
  			 cb_ctx->port, status);
++<<<<<<< HEAD
 +		rec->time_to_run = ktime_to_ns(ktime_get_real()) + 1 * NSEC_PER_SEC;
++=======
+ 		rec->time_to_run = ktime_get_boot_ns() + 1 * NSEC_PER_SEC;
++>>>>>>> 571e09eeff54 (IB/mlx4: Use boottime)
  		goto out;
  	}
  
@@@ -416,7 -416,7 +420,11 @@@ next_entry
  			 be64_to_cpu((__force __be64)rec->guid_indexes),
  			 be64_to_cpu((__force __be64)applied_guid_indexes),
  			 be64_to_cpu((__force __be64)declined_guid_indexes));
++<<<<<<< HEAD
 +		rec->time_to_run = ktime_to_ns(ktime_get_real()) +
++=======
+ 		rec->time_to_run = ktime_get_boot_ns() +
++>>>>>>> 571e09eeff54 (IB/mlx4: Use boottime)
  			resched_delay_sec * NSEC_PER_SEC;
  	} else {
  		rec->status = MLX4_GUID_INFO_STATUS_SET;
@@@ -708,7 -708,7 +716,11 @@@ static int get_low_record_time_index(st
  		}
  	}
  	if (resched_delay_sec) {
++<<<<<<< HEAD
 +		u64 curr_time = ktime_to_ns(ktime_get_real());
++=======
+ 		u64 curr_time = ktime_get_boot_ns();
++>>>>>>> 571e09eeff54 (IB/mlx4: Use boottime)
  
  		*resched_delay_sec = (low_record_time < curr_time) ? 0 :
  			div_u64((low_record_time - curr_time), NSEC_PER_SEC);
* Unmerged path drivers/infiniband/hw/mlx4/alias_GUID.c
