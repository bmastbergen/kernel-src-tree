tools lib api: Add str_error_c to libapi

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Arnaldo Carvalho de Melo <acme@redhat.com>
commit 8149a774d53afeaf5eb337a813f828f8b8ce68da
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/8149a774.failed

Because it uses that function, which would lead every tool using it
to need to link against tools/lib/str_error_r.o.

This fixes building tools/vm/, that links with libapi.

	Reported-by: Arjan van de Ven <arjan@linux.intel.com>
	Reported-by: Randy Dunlap <rdunlap@infradead.org>
	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Jiri Olsa <jolsa@kernel.org>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Wang Nan <wangnan0@huawei.com>
Fixes: b31e3e3316a7 ("tools lib api fs: Use str_error_r()")
Link: http://lkml.kernel.org/n/tip-aedt3qzibhnhaov2j4caqi61@git.kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 8149a774d53afeaf5eb337a813f828f8b8ce68da)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/util/python-ext-sources
diff --cc tools/perf/util/python-ext-sources
index 8162ba0e2e57,b7d4f4aeee61..000000000000
--- a/tools/perf/util/python-ext-sources
+++ b/tools/perf/util/python-ext-sources
@@@ -13,6 -13,7 +13,10 @@@ util/cpumap.
  ../lib/bitmap.c
  ../lib/find_bit.c
  ../lib/hweight.c
++<<<<<<< HEAD
++=======
+ ../lib/vsprintf.c
++>>>>>>> 8149a774d53a (tools lib api: Add str_error_c to libapi)
  util/thread_map.c
  util/util.c
  util/xyarray.c
diff --git a/tools/lib/api/Build b/tools/lib/api/Build
index 954c644f7ad9..6e2373db5598 100644
--- a/tools/lib/api/Build
+++ b/tools/lib/api/Build
@@ -2,3 +2,8 @@ libapi-y += fd/
 libapi-y += fs/
 libapi-y += cpu.o
 libapi-y += debug.o
+libapi-y += str_error_r.o
+
+$(OUTPUT)str_error_r.o: ../str_error_r.c FORCE
+	$(call rule_mkdir)
+	$(call if_changed_dep,cc_o_c)
* Unmerged path tools/perf/util/python-ext-sources
