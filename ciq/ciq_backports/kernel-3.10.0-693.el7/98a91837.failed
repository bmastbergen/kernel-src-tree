perf rb_resort: Rename for_each() macros to for_each_entry()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Arnaldo Carvalho de Melo <acme@redhat.com>
commit 98a91837dd1751e730f8265129b376450f41dcfd
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/98a91837.failed

To match the semantics for list.h in the kernel, that are the
interface we use in them.

	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Jiri Olsa <jolsa@kernel.org>
	Cc: Milian Wolff <milian.wolff@kdab.com>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Taeung Song <treeze.taeung@gmail.com>
	Cc: Wang Nan <wangnan0@huawei.com>
Link: http://lkml.kernel.org/n/tip-iaxuq2yu43mtb504j96q0axs@git.kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 98a91837dd1751e730f8265129b376450f41dcfd)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/builtin-trace.c
diff --cc tools/perf/builtin-trace.c
index fea73b2a93b2,cf90de811523..000000000000
--- a/tools/perf/builtin-trace.c
+++ b/tools/perf/builtin-trace.c
@@@ -2518,15 -2618,21 +2518,24 @@@ static int trace__fprintf_one_thread(st
  
  static size_t trace__fprintf_thread_summary(struct trace *trace, FILE *fp)
  {
 -	DECLARE_RESORT_RB_MACHINE_THREADS(threads, trace->host);
 -	size_t printed = trace__fprintf_threads_header(fp);
 -	struct rb_node *nd;
 +	struct summary_data data = {
 +		.fp = fp,
 +		.trace = trace
 +	};
 +	data.printed = trace__fprintf_threads_header(fp);
  
 -	if (threads == NULL) {
 -		fprintf(fp, "%s", "Error sorting output by nr_events!\n");
 -		return 0;
 -	}
 +	machine__for_each_thread(trace->host, trace__fprintf_one_thread, &data);
  
++<<<<<<< HEAD
 +	return data.printed;
++=======
+ 	resort_rb__for_each_entry(nd, threads)
+ 		printed += trace__fprintf_thread(fp, threads_entry->thread, trace);
+ 
+ 	resort_rb__delete(threads);
+ 
+ 	return printed;
++>>>>>>> 98a91837dd17 (perf rb_resort: Rename for_each() macros to for_each_entry())
  }
  
  static int trace__set_duration(const struct option *opt, const char *str,
* Unmerged path tools/perf/builtin-trace.c
diff --git a/tools/perf/util/rb_resort.h b/tools/perf/util/rb_resort.h
index abc76e3d3098..808cc45611fe 100644
--- a/tools/perf/util/rb_resort.h
+++ b/tools/perf/util/rb_resort.h
@@ -35,7 +35,7 @@ DEFINE_RB_RESORT_RB(threads, strcmp(a->thread->shortname,
 
 	struct rb_node *nd;
 
-	resort_rb__for_each(nd, threads) {
+	resort_rb__for_each_entry(nd, threads) {
 		struct thread *t = threads_entry;
 		printf("%s: %d\n", t->shortname, t->tid);
 	}
@@ -123,7 +123,7 @@ static void __name##_sorted__init_entry(struct rb_node *nd,			\
 struct __name##_sorted_entry *__name##_entry;					\
 struct __name##_sorted *__name = __name##_sorted__new
 
-#define resort_rb__for_each(__nd, __name)					\
+#define resort_rb__for_each_entry(__nd, __name)					\
 	for (__nd = rb_first(&__name->entries);					\
 	     __name##_entry = rb_entry(__nd, struct __name##_sorted_entry,	\
 				       rb_node), __nd;				\
