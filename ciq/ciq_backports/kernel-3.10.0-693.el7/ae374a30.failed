lpfc: Fix scsi task management error message.

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [scsi] lpfc: Fix scsi task management error message (Maurizio Lombardi) [1451022]
Rebuild_FUZZ: 98.88%
commit-author James Smart <james.smart@avagotech.com>
commit ae374a308cbfeab3cf72ef7c57695d2145defeab
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/ae374a30.failed

TMF's were getting error messages on FCP_RSP errors (underrun). Underruns
aren't meaningful in the scenario. Change the error message to filter out
these response check errors, and don't unconditionally mark the cmd as
in error.

	Signed-off-by: Dick Kennedy <dick.kennedy@avagotech.com>
	Signed-off-by: James Smart <james.smart@avagotech.com>
	Reviewed-by: Hannes Reinecke <hare@suse.de>
	Signed-off-by: James Bottomley <JBottomley@Odin.com>
(cherry picked from commit ae374a308cbfeab3cf72ef7c57695d2145defeab)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/lpfc/lpfc_scsi.c
diff --cc drivers/scsi/lpfc/lpfc_scsi.c
index 91cc6b746952,e5eb40d2c512..000000000000
--- a/drivers/scsi/lpfc/lpfc_scsi.c
+++ b/drivers/scsi/lpfc/lpfc_scsi.c
@@@ -5127,13 -5011,16 +5127,26 @@@ lpfc_send_taskmgmt(struct lpfc_vport *v
  					  iocbq, iocbqrsp, lpfc_cmd->timeout);
  	if ((status != IOCB_SUCCESS) ||
  	    (iocbqrsp->iocb.ulpStatus != IOSTAT_SUCCESS)) {
++<<<<<<< HEAD
 +		lpfc_printf_vlog(vport, KERN_ERR, LOG_FCP,
 +			 "0727 TMF %s to TGT %d LUN %d failed (%d, %d) "
 +			 "iocb_flag x%x\n",
 +			 lpfc_taskmgmt_name(task_mgmt_cmd),
 +			 tgt_id, lun_id, iocbqrsp->iocb.ulpStatus,
 +			 iocbqrsp->iocb.un.ulpWord[4],
 +			 iocbq->iocb_flag);
++=======
+ 		if (status != IOCB_SUCCESS ||
+ 		    iocbqrsp->iocb.ulpStatus != IOSTAT_FCP_RSP_ERROR)
+ 			lpfc_printf_vlog(vport, KERN_ERR, LOG_FCP,
+ 					 "0727 TMF %s to TGT %d LUN %llu "
+ 					 "failed (%d, %d) iocb_flag x%x\n",
+ 					 lpfc_taskmgmt_name(task_mgmt_cmd),
+ 					 tgt_id, lun_id,
+ 					 iocbqrsp->iocb.ulpStatus,
+ 					 iocbqrsp->iocb.un.ulpWord[4],
+ 					 iocbq->iocb_flag);
++>>>>>>> ae374a308cbf (lpfc: Fix scsi task management error message.)
  		/* if ulpStatus != IOCB_SUCCESS, then status == IOCB_SUCCESS */
  		if (status == IOCB_SUCCESS) {
  			if (iocbqrsp->iocb.ulpStatus == IOSTAT_FCP_RSP_ERROR)
* Unmerged path drivers/scsi/lpfc/lpfc_scsi.c
