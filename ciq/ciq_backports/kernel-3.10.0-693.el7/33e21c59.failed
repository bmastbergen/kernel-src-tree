net/mlx5e: remove IEEE/CEE mode check when setting DCBX mode

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [netdrv] mlx5e: remove IEEE/CEE mode check when setting DCBX mode (Jonathan Toppins) [1448565]
Rebuild_FUZZ: 96.55%
commit-author Huy Nguyen <huyn@mellanox.com>
commit 33e21c59526e9147d7c68913995298f10c35cd6f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/33e21c59.failed

Currently, the function setdcbx fails if the request dcbx mode
is either IEEE or CEE. We remove the IEEE/CEE mode check because
we support both IEEE and CEE interfaces.

Fixes: 3a6a931dfb8e ("net/mlx5e: Support DCBX CEE API")
	Signed-off-by: Huy Nguyen <huyn@mellanox.com>
	Reviewed-by: Daniel Jurgens <danielj@mellanox.com>
	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 33e21c59526e9147d7c68913995298f10c35cd6f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/en_dcbnl.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/en_dcbnl.c
index 762af16ed021,8fa23f6a1f67..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_dcbnl.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_dcbnl.c
@@@ -227,10 -299,29 +227,36 @@@ static u8 mlx5e_dcbnl_getdcbx(struct ne
  
  static u8 mlx5e_dcbnl_setdcbx(struct net_device *dev, u8 mode)
  {
++<<<<<<< HEAD
 +	if ((mode & DCB_CAP_DCBX_LLD_MANAGED) ||
 +	    (mode & DCB_CAP_DCBX_VER_CEE) ||
 +	    !(mode & DCB_CAP_DCBX_VER_IEEE) ||
 +	    !(mode & DCB_CAP_DCBX_HOST))
++=======
+ 	struct mlx5e_priv *priv = netdev_priv(dev);
+ 	struct mlx5e_dcbx *dcbx = &priv->dcbx;
+ 
+ 	if (mode & DCB_CAP_DCBX_LLD_MANAGED)
+ 		return 1;
+ 
+ 	if ((!mode) && MLX5_CAP_GEN(priv->mdev, dcbx)) {
+ 		if (dcbx->mode == MLX5E_DCBX_PARAM_VER_OPER_AUTO)
+ 			return 0;
+ 
+ 		/* set dcbx to fw controlled */
+ 		if (!mlx5e_dcbnl_set_dcbx_mode(priv, MLX5E_DCBX_PARAM_VER_OPER_AUTO)) {
+ 			dcbx->mode = MLX5E_DCBX_PARAM_VER_OPER_AUTO;
+ 			return 0;
+ 		}
+ 
+ 		return 1;
+ 	}
+ 
+ 	if (!(mode & DCB_CAP_DCBX_HOST))
+ 		return 1;
+ 
+ 	if (mlx5e_dcbnl_switch_to_host_mode(netdev_priv(dev)))
++>>>>>>> 33e21c59526e (net/mlx5e: remove IEEE/CEE mode check when setting DCBX mode)
  		return 1;
  
  	return 0;
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en_dcbnl.c
