net_sched: fix unused variables in __gnet_stats_copy_basic_cpu()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [net] sched: fix unused variables in __gnet_stats_copy_basic_cpu() (Ivan Vecera) [1428588]
Rebuild_FUZZ: 96.77%
commit-author WANG Cong <xiyou.wangcong@gmail.com>
commit 02c0fc1b8f41e6e895d6573615ba8ff549b685d2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/02c0fc1b.failed

Probably not a big deal, but we'd better just use the
one we get in retry loop.

Fixes: commit 22e0f8b9322cb1a48b1357e8 ("net: sched: make bstats per cpu and estimator RCU safe")
	Reported-by: Joe Perches <joe@perches.com>
	Cc: John Fastabend <john.fastabend@gmail.com>
	Signed-off-by: Cong Wang <xiyou.wangcong@gmail.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 02c0fc1b8f41e6e895d6573615ba8ff549b685d2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/core/gen_stats.c
diff --cc net/core/gen_stats.c
index 9d3d9e78397b,0c08062d1796..000000000000
--- a/net/core/gen_stats.c
+++ b/net/core/gen_stats.c
@@@ -97,6 -97,43 +97,46 @@@ gnet_stats_start_copy(struct sk_buff *s
  }
  EXPORT_SYMBOL(gnet_stats_start_copy);
  
++<<<<<<< HEAD
++=======
+ static void
+ __gnet_stats_copy_basic_cpu(struct gnet_stats_basic_packed *bstats,
+ 			    struct gnet_stats_basic_cpu __percpu *cpu)
+ {
+ 	int i;
+ 
+ 	for_each_possible_cpu(i) {
+ 		struct gnet_stats_basic_cpu *bcpu = per_cpu_ptr(cpu, i);
+ 		unsigned int start;
+ 		u64 bytes;
+ 		u32 packets;
+ 
+ 		do {
+ 			start = u64_stats_fetch_begin_irq(&bcpu->syncp);
+ 			bytes = bcpu->bstats.bytes;
+ 			packets = bcpu->bstats.packets;
+ 		} while (u64_stats_fetch_retry_irq(&bcpu->syncp, start));
+ 
+ 		bstats->bytes += bytes;
+ 		bstats->packets += packets;
+ 	}
+ }
+ 
+ void
+ __gnet_stats_copy_basic(struct gnet_stats_basic_packed *bstats,
+ 			struct gnet_stats_basic_cpu __percpu *cpu,
+ 			struct gnet_stats_basic_packed *b)
+ {
+ 	if (cpu) {
+ 		__gnet_stats_copy_basic_cpu(bstats, cpu);
+ 	} else {
+ 		bstats->bytes = b->bytes;
+ 		bstats->packets = b->packets;
+ 	}
+ }
+ EXPORT_SYMBOL(__gnet_stats_copy_basic);
+ 
++>>>>>>> 02c0fc1b8f41 (net_sched: fix unused variables in __gnet_stats_copy_basic_cpu())
  /**
   * gnet_stats_copy_basic - copy basic statistics into statistic TLV
   * @d: dumping handle
* Unmerged path net/core/gen_stats.c
