perf tools: Remove needless includes from cache.h

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Arnaldo Carvalho de Melo <acme@redhat.com>
commit 175729fc2c5144e9eee06b3483c5c9798f7062a5
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/175729fc.failed

The cache.h header doesn't use any of the definitions in some of the
headers it includes, ditch them and fix the fallout, where files were
getting stuff they needed just because they were including it, sometimes
not using what it really exports at all.

	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Jiri Olsa <jolsa@kernel.org>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Wang Nan <wangnan0@huawei.com>
Link: http://lkml.kernel.org/n/tip-l6r2bmj8h1g3e01wr981on0n@git.kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 175729fc2c5144e9eee06b3483c5c9798f7062a5)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/tests/llvm.c
#	tools/perf/util/alias.c
#	tools/perf/util/llvm-utils.c
diff --cc tools/perf/util/alias.c
index c0b43ee40d95,6455471d9cd1..000000000000
--- a/tools/perf/util/alias.c
+++ b/tools/perf/util/alias.c
@@@ -1,4 -1,6 +1,9 @@@
  #include "cache.h"
++<<<<<<< HEAD
++=======
+ #include "util.h"
+ #include "config.h"
++>>>>>>> 175729fc2c51 (perf tools: Remove needless includes from cache.h)
  
  static const char *alias_key;
  static char *alias_val;
diff --cc tools/perf/util/llvm-utils.c
index 5887bb8c1243,bf7216b8731d..000000000000
--- a/tools/perf/util/llvm-utils.c
+++ b/tools/perf/util/llvm-utils.c
@@@ -3,18 -3,22 +3,28 @@@
   * Copyright (C) 2015, Huawei Inc.
   */
  
++<<<<<<< HEAD
++=======
+ #include <errno.h>
+ #include <limits.h>
++>>>>>>> 175729fc2c51 (perf tools: Remove needless includes from cache.h)
  #include <stdio.h>
 -#include <stdlib.h>
 +#include <sys/utsname.h>
 +#include "util.h"
  #include "debug.h"
  #include "llvm-utils.h"
++<<<<<<< HEAD
 +#include "cache.h"
++=======
+ #include "config.h"
+ #include "util.h"
++>>>>>>> 175729fc2c51 (perf tools: Remove needless includes from cache.h)
  
  #define CLANG_BPF_CMD_DEFAULT_TEMPLATE				\
 -		"$CLANG_EXEC -D__KERNEL__ -D__NR_CPUS__=$NR_CPUS "\
 -		"-DLINUX_VERSION_CODE=$LINUX_VERSION_CODE "	\
 -		"$CLANG_OPTIONS $KERNEL_INC_OPTIONS "		\
 -		"-Wno-unused-value -Wno-pointer-sign "		\
 -		"-working-directory $WORKING_DIR "		\
 -		"-c \"$CLANG_SOURCE\" -target bpf -O2 -o -"
 +		"$CLANG_EXEC -D__KERNEL__ $CLANG_OPTIONS "	\
 +		"$KERNEL_INC_OPTIONS -Wno-unused-value "	\
 +		"-Wno-pointer-sign -working-directory "		\
 +		"$WORKING_DIR -c \"$CLANG_SOURCE\" -target bpf -O2 -o -"
  
  struct llvm_param llvm_param = {
  	.clang_path = "clang",
* Unmerged path tools/perf/tests/llvm.c
diff --git a/tools/perf/arch/common.c b/tools/perf/arch/common.c
index ee6966812a5a..886dd2aaff0d 100644
--- a/tools/perf/arch/common.c
+++ b/tools/perf/arch/common.c
@@ -1,6 +1,7 @@
 #include <stdio.h>
 #include <sys/utsname.h>
 #include "common.h"
+#include "../util/util.h"
 #include "../util/debug.h"
 
 const char *const arm_triplets[] = {
* Unmerged path tools/perf/tests/llvm.c
diff --git a/tools/perf/ui/gtk/util.c b/tools/perf/ui/gtk/util.c
index 52e7fc48af9f..00b91921edb1 100644
--- a/tools/perf/ui/gtk/util.c
+++ b/tools/perf/ui/gtk/util.c
@@ -1,4 +1,5 @@
 #include "../util.h"
+#include "../../util/util.h"
 #include "../../util/debug.h"
 #include "gtk.h"
 
diff --git a/tools/perf/ui/helpline.c b/tools/perf/ui/helpline.c
index 700fb3cfa1c7..5b74a7eba210 100644
--- a/tools/perf/ui/helpline.c
+++ b/tools/perf/ui/helpline.c
@@ -5,6 +5,7 @@
 #include "../debug.h"
 #include "helpline.h"
 #include "ui.h"
+#include "../util.h"
 
 char ui_helpline__current[512];
 
diff --git a/tools/perf/ui/tui/setup.c b/tools/perf/ui/tui/setup.c
index 7dfeba0a91f3..4ea2ba861fc2 100644
--- a/tools/perf/ui/tui/setup.c
+++ b/tools/perf/ui/tui/setup.c
@@ -1,3 +1,4 @@
+#include <errno.h>
 #include <signal.h>
 #include <stdbool.h>
 #ifdef HAVE_BACKTRACE_SUPPORT
@@ -6,6 +7,7 @@
 
 #include "../../util/cache.h"
 #include "../../util/debug.h"
+#include "../../util/util.h"
 #include "../browser.h"
 #include "../helpline.h"
 #include "../ui.h"
* Unmerged path tools/perf/util/alias.c
diff --git a/tools/perf/util/cache.h b/tools/perf/util/cache.h
index 0a3814d0511b..9fb1a48241da 100644
--- a/tools/perf/util/cache.h
+++ b/tools/perf/util/cache.h
@@ -1,11 +1,8 @@
 #ifndef __PERF_CACHE_H
 #define __PERF_CACHE_H
 
-#include <stdbool.h>
-#include "util.h"
 #include "strbuf.h"
 #include <subcmd/pager.h>
-#include "../perf.h"
 #include "../ui/ui.h"
 
 #include <linux/string.h>
diff --git a/tools/perf/util/levenshtein.c b/tools/perf/util/levenshtein.c
index e521d1516df6..f616e4f65b67 100644
--- a/tools/perf/util/levenshtein.c
+++ b/tools/perf/util/levenshtein.c
@@ -1,5 +1,7 @@
-#include "cache.h"
 #include "levenshtein.h"
+#include <errno.h>
+#include <stdlib.h>
+#include <string.h>
 
 /*
  * This function implements the Damerau-Levenshtein algorithm to
* Unmerged path tools/perf/util/llvm-utils.c
diff --git a/tools/perf/util/path.c b/tools/perf/util/path.c
index 3bf6bf82ff2d..cdd0f66819bd 100644
--- a/tools/perf/util/path.c
+++ b/tools/perf/util/path.c
@@ -11,6 +11,8 @@
  * which is what it's designed for.
  */
 #include "cache.h"
+#include "util.h"
+#include <limits.h>
 
 static char bad_path[] = "/bad-path/";
 /*
diff --git a/tools/perf/util/target.c b/tools/perf/util/target.c
index a53603b27e52..aef21a6549c0 100644
--- a/tools/perf/util/target.c
+++ b/tools/perf/util/target.c
@@ -7,6 +7,7 @@
  */
 
 #include "target.h"
+#include "util.h"
 #include "debug.h"
 
 #include <pwd.h>
