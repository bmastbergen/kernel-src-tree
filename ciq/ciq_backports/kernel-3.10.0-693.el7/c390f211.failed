mmc: sdhci-of-arasan: Add ability to export card clock

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [mmc] sdhci-of-arasan: Add ability to export card clock (Don Zickus) [1430497]
Rebuild_FUZZ: 95.15%
commit-author Douglas Anderson <dianders@chromium.org>
commit c390f2110adf1c8579b7693eb241b47add4976e6
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/c390f211.failed

Some SD/eMMC PHYs (like the PHY from Arasan that is designed to work
with arasan,sdhci-5.1) need to know the card clock in order to function
properly.  Let's add the ability to expose this clock.  Any PHY that
needs to know the clock rate can add a reference and query the clock
rate.

At the moment we register a CLK_GET_RATE_NOCACHE clock that simply
allows querying the clock.  This allows us to be less intrusive with
regards to the main SDHCI driver, which has complex logic for adjusting
the SD clock.  Right now we always fully power cycle the PHY when the
clock changes and that gives the PHY a good chance to query our clock.

	Signed-off-by: Douglas Anderson <dianders@chromium.org>
	Reviewed-by: Heiko Stuebner <heiko@sntech.de>
	Tested-by: Heiko Stuebner <heiko@sntech.de>
	Acked-by: Adrian Hunter <adrian.hunter@intel.com>
	Signed-off-by: Ulf Hansson <ulf.hansson@linaro.org>
(cherry picked from commit c390f2110adf1c8579b7693eb241b47add4976e6)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/mmc/host/Kconfig
#	drivers/mmc/host/sdhci-of-arasan.c
diff --cc drivers/mmc/host/Kconfig
index 2ecc2f5f10e1,5274f503a39a..000000000000
--- a/drivers/mmc/host/Kconfig
+++ b/drivers/mmc/host/Kconfig
@@@ -118,6 -118,27 +118,30 @@@ config MMC_SDHCI_PLTF
  
  	  If unsure, say N.
  
++<<<<<<< HEAD
++=======
+ config MMC_SDHCI_OF_ARASAN
+ 	tristate "SDHCI OF support for the Arasan SDHCI controllers"
+ 	depends on MMC_SDHCI_PLTFM
+ 	depends on OF
+ 	depends on COMMON_CLK
+ 	help
+ 	  This selects the Arasan Secure Digital Host Controller Interface
+ 	  (SDHCI). This hardware is found e.g. in Xilinx' Zynq SoC.
+ 
+ 	  If you have a controller with this interface, say Y or M here.
+ 
+ 	  If unsure, say N.
+ 
+ config MMC_SDHCI_OF_AT91
+ 	tristate "SDHCI OF support for the Atmel SDMMC controller"
+ 	depends on MMC_SDHCI_PLTFM
+ 	depends on OF
+ 	select MMC_SDHCI_IO_ACCESSORS
+ 	help
+ 	  This selects the Atmel SDMMC driver
+ 
++>>>>>>> c390f2110adf (mmc: sdhci-of-arasan: Add ability to export card clock)
  config MMC_SDHCI_OF_ESDHC
  	tristate "SDHCI OF support for the Freescale eSDHC controller"
  	depends on MMC_SDHCI_PLTFM
* Unmerged path drivers/mmc/host/sdhci-of-arasan.c
* Unmerged path drivers/mmc/host/Kconfig
* Unmerged path drivers/mmc/host/sdhci-of-arasan.c
