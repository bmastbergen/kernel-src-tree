md: Fix compilation warning

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [pinctrl] amd: fix compilation warning (Suravee Suthikulpanit) [1329005]
Rebuild_FUZZ: 98.18%
commit-author Damien Le Moal <damien.lemoal@wdc.com>
commit 5e3b8a8d59b2064f68ab349182f5dc5f5bb4fd30
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/5e3b8a8d.failed

Remove the if statement around the calls to sysfs_link_rdev() to avoid
the compilation warnings:

warning: suggest braces around empty body in an ‘if’ statement

when compiling with W=1. For the call to sysfs_create_link() generating
the same warning, use the err variable to store the function result,
avoiding triggering another warning as the function is declared
as 'warn_unused_result'.

	Signed-off-by: Damien Le Moal <damien.lemoal@wdc.com>
	Signed-off-by: Song Liu <songliubraving@fb.com>
(cherry picked from commit 5e3b8a8d59b2064f68ab349182f5dc5f5bb4fd30)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/md/md.c
diff --cc drivers/md/md.c
index a41d83a2b2c4,9d740e4181ff..000000000000
--- a/drivers/md/md.c
+++ b/drivers/md/md.c
@@@ -2114,9 -2469,13 +2114,9 @@@ static int bind_rdev_to_array(struct md
  		goto fail;
  
  	ko = &part_to_dev(rdev->bdev->bd_part)->kobj;
- 	if (sysfs_create_link(&rdev->kobj, ko, "block"))
- 		/* failure here is OK */;
+ 	/* failure here is OK */
+ 	err = sysfs_create_link(&rdev->kobj, ko, "block");
  	rdev->sysfs_state = sysfs_get_dirent_safe(rdev->kobj.sd, "state");
 -	rdev->sysfs_unack_badblocks =
 -		sysfs_get_dirent_safe(rdev->kobj.sd, "unacknowledged_bad_blocks");
 -	rdev->sysfs_badblocks =
 -		sysfs_get_dirent_safe(rdev->kobj.sd, "bad_blocks");
  
  	list_add_rcu(&rdev->same_set, &mddev->disks);
  	bd_link_disk_holder(rdev->bdev, mddev->gendisk);
@@@ -7983,10 -9112,9 +7983,16 @@@ static int remove_and_add_spares(struc
  
  			rdev->recovery_offset = 0;
  		}
++<<<<<<< HEAD
 +		if (mddev->pers->
 +		    hot_add_disk(mddev, rdev) == 0) {
 +			if (sysfs_link_rdev(mddev, rdev))
 +				/* failure here is OK */;
++=======
+ 		if (mddev->pers->hot_add_disk(mddev, rdev) == 0) {
+ 			/* failure here is OK */
+ 			sysfs_link_rdev(mddev, rdev);
++>>>>>>> 5e3b8a8d59b2 (md: Fix compilation warning)
  			if (!test_bit(Journal, &rdev->flags))
  				spares++;
  			md_new_event(mddev);
* Unmerged path drivers/md/md.c
