amd-xgbe: use netdev_rss_key_fill() helper

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Eric Dumazet <edumazet@google.com>
commit b23063034f1116a64b864e2cab1b238125096776
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/b2306303.failed

Use netdev_rss_key_fill() helper, as it provides better support for some
bonding setups.

	Signed-off-by: Eric Dumazet <edumazet@google.com>
	Cc: Lendacky, Thomas <Thomas.Lendacky@amd.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit b23063034f1116a64b864e2cab1b238125096776)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/amd/xgbe/xgbe-main.c
diff --cc drivers/net/ethernet/amd/xgbe/xgbe-main.c
index 5ad0a540825b,dbd3850b8b0a..000000000000
--- a/drivers/net/ethernet/amd/xgbe/xgbe-main.c
+++ b/drivers/net/ethernet/amd/xgbe/xgbe-main.c
@@@ -366,13 -337,16 +366,26 @@@ static int xgbe_probe(struct platform_d
  		goto err_io;
  	}
  
++<<<<<<< HEAD
 +	/* Allocate the rings for the DMA channels */
 +	pdata->channel = xgbe_alloc_rings(pdata);
 +	if (!pdata->channel) {
 +		dev_err(dev, "ring allocation failed\n");
 +		ret = -ENOMEM;
 +		goto err_io;
 +	}
++=======
+ 	/* Initialize RSS hash key and lookup table */
+ 	netdev_rss_key_fill(pdata->rss_key, sizeof(pdata->rss_key));
+ 
+ 	for (i = 0; i < XGBE_RSS_MAX_TABLE_SIZE; i++)
+ 		XGMAC_SET_BITS(pdata->rss_table[i], MAC_RSSDR, DMCH,
+ 			       i % pdata->rx_ring_count);
+ 
+ 	XGMAC_SET_BITS(pdata->rss_options, MAC_RSSCR, IP2TE, 1);
+ 	XGMAC_SET_BITS(pdata->rss_options, MAC_RSSCR, TCP4TE, 1);
+ 	XGMAC_SET_BITS(pdata->rss_options, MAC_RSSCR, UDP4TE, 1);
++>>>>>>> b23063034f11 (amd-xgbe: use netdev_rss_key_fill() helper)
  
  	/* Prepare to regsiter with MDIO */
  	pdata->mii_bus_id = kasprintf(GFP_KERNEL, "%s", pdev->name);
* Unmerged path drivers/net/ethernet/amd/xgbe/xgbe-main.c
