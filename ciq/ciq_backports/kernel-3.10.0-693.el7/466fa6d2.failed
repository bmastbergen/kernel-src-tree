IB/mlx5: Add support of more IPv6 fields to flow steering

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Maor Gottlieb <maorg@mellanox.com>
commit 466fa6d2e36408f697f9ff766f82003ef424bad1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/466fa6d2.failed

Add support to receive Traffic Class, specific IPv6 protocol
or IPv6 flow label.

	Signed-off-by: Maor Gottlieb <maorg@mellanox.com>
	Reviewed-by: Sagi Grimberg <sagi@grimberg.me>
	Signed-off-by: Leon Romanovsky <leon@kernel.org>
	Signed-off-by: Doug Ledford <dledford@redhat.com>
(cherry picked from commit 466fa6d2e36408f697f9ff766f82003ef424bad1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/hw/mlx5/main.c
diff --cc drivers/infiniband/hw/mlx5/main.c
index 0662b3b06b3e,98844c1db555..000000000000
--- a/drivers/infiniband/hw/mlx5/main.c
+++ b/drivers/infiniband/hw/mlx5/main.c
@@@ -1830,12 -1853,10 +1866,16 @@@ static struct mlx5_ib_flow_handler *cre
  		ib_flow += ((union ib_flow_spec *)ib_flow)->size;
  	}
  
++<<<<<<< HEAD
 +	/* Outer header support only */
 +	match_criteria_enable = (!outer_header_zero(match_c)) << 0;
++=======
+ 	spec->match_criteria_enable = get_match_criteria_enable(spec->match_criteria);
++>>>>>>> 466fa6d2e364 (IB/mlx5: Add support of more IPv6 fields to flow steering)
  	action = dst ? MLX5_FLOW_CONTEXT_ACTION_FWD_DEST :
  		MLX5_FLOW_CONTEXT_ACTION_FWD_NEXT_PRIO;
 -	handler->rule = mlx5_add_flow_rule(ft, spec,
 +	handler->rule = mlx5_add_flow_rule(ft, match_criteria_enable,
 +					   match_c, match_v,
  					   action,
  					   MLX5_FS_DEFAULT_FLOW_TAG,
  					   dst);
* Unmerged path drivers/infiniband/hw/mlx5/main.c
