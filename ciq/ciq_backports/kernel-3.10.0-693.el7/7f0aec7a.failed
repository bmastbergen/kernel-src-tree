bridge: mcast: use names for the different multicast_router types

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Nikolay Aleksandrov <nikolay@cumulusnetworks.com>
commit 7f0aec7a668419bdbff12de6e8016544f874e708
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/7f0aec7a.failed

Using raw values makes it difficult to extend and also understand the
code, give them names and do explicit per-option manipulation in
br_multicast_set_port_router.

	Signed-off-by: Nikolay Aleksandrov <nikolay@cumulusnetworks.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 7f0aec7a668419bdbff12de6e8016544f874e708)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/uapi/linux/if_bridge.h
#	net/bridge/br_multicast.c
diff --cc include/uapi/linux/if_bridge.h
index 8218dc361221,e47f3bc7f323..000000000000
--- a/include/uapi/linux/if_bridge.h
+++ b/include/uapi/linux/if_bridge.h
@@@ -164,6 -169,21 +164,24 @@@ enum 
  };
  #define MDBA_MDB_ENTRY_MAX (__MDBA_MDB_ENTRY_MAX - 1)
  
++<<<<<<< HEAD
++=======
+ /* per mdb entry additional attributes */
+ enum {
+ 	MDBA_MDB_EATTR_UNSPEC,
+ 	MDBA_MDB_EATTR_TIMER,
+ 	__MDBA_MDB_EATTR_MAX
+ };
+ #define MDBA_MDB_EATTR_MAX (__MDBA_MDB_EATTR_MAX - 1)
+ 
+ /* multicast router types */
+ enum {
+ 	MDB_RTR_TYPE_DISABLED,
+ 	MDB_RTR_TYPE_TEMP_QUERY,
+ 	MDB_RTR_TYPE_PERM,
+ };
+ 
++>>>>>>> 7f0aec7a6684 (bridge: mcast: use names for the different multicast_router types)
  enum {
  	MDBA_ROUTER_UNSPEC,
  	MDBA_ROUTER_PORT,
diff --cc net/bridge/br_multicast.c
index 4e9f0157e078,71c109b0943f..000000000000
--- a/net/bridge/br_multicast.c
+++ b/net/bridge/br_multicast.c
@@@ -1911,27 -1855,25 +1920,40 @@@ int br_multicast_set_port_router(struc
  	spin_lock(&br->multicast_lock);
  
  	switch (val) {
++<<<<<<< HEAD
 +	case 0:
 +	case 1:
 +	case 2:
 +		p->multicast_router = val;
 +		err = 0;
 +
 +		if (val < 2 && !hlist_unhashed(&p->rlist))
 +			hlist_del_init_rcu(&p->rlist);
 +
 +		if (val == 1)
 +			break;
 +
++=======
+ 	case MDB_RTR_TYPE_DISABLED:
+ 		p->multicast_router = MDB_RTR_TYPE_DISABLED;
+ 		__del_port_router(p);
+ 		del_timer(&p->multicast_router_timer);
+ 		break;
+ 	case MDB_RTR_TYPE_TEMP_QUERY:
+ 		p->multicast_router = MDB_RTR_TYPE_TEMP_QUERY;
+ 		__del_port_router(p);
+ 		break;
+ 	case MDB_RTR_TYPE_PERM:
+ 		p->multicast_router = MDB_RTR_TYPE_PERM;
++>>>>>>> 7f0aec7a6684 (bridge: mcast: use names for the different multicast_router types)
  		del_timer(&p->multicast_router_timer);
- 
- 		if (val == 0)
- 			break;
- 
  		br_multicast_add_router(br, p);
  		break;
+ 	default:
+ 		goto unlock;
  	}
- 
+ 	err = 0;
+ unlock:
  	spin_unlock(&br->multicast_lock);
  
  	return err;
* Unmerged path include/uapi/linux/if_bridge.h
* Unmerged path net/bridge/br_multicast.c
