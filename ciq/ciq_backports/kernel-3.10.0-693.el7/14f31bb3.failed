bridge: simplify the flush_store by calling store_bridge_parm

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Xin Long <lucien.xin@gmail.com>
commit 14f31bb39f5d4b69c179d219833d7edb9b36ebd9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/14f31bb3.failed

There are some repetitive codes in flush_store, we can remove
them by calling store_bridge_parm, also, it would send rtnl notification
after we add it in store_bridge_parm in the following patches.

	Signed-off-by: Xin Long <lucien.xin@gmail.com>
	Reviewed-by: Nikolay Aleksandrov <nikolay@cumulusnetworks.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 14f31bb39f5d4b69c179d219833d7edb9b36ebd9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/bridge/br_sysfs_br.c
diff --cc net/bridge/br_sysfs_br.c
index a3eb35988a8a,c48f6b0b2022..000000000000
--- a/net/bridge/br_sysfs_br.c
+++ b/net/bridge/br_sysfs_br.c
@@@ -324,25 -328,30 +324,29 @@@ static ssize_t store_group_addr(struct 
  	return len;
  }
  
 -static DEVICE_ATTR_RW(group_addr);
 +static DEVICE_ATTR(group_addr, S_IRUGO | S_IWUSR,
 +		   show_group_addr, store_group_addr);
  
++<<<<<<< HEAD
 +static ssize_t store_flush(struct device *d,
++=======
+ static int set_flush(struct net_bridge *br, unsigned long val)
+ {
+ 	br_fdb_flush(br);
+ 	return 0;
+ }
+ 
+ static ssize_t flush_store(struct device *d,
++>>>>>>> 14f31bb39f5d (bridge: simplify the flush_store by calling store_bridge_parm)
  			   struct device_attribute *attr,
  			   const char *buf, size_t len)
  {
- 	struct net_bridge *br = to_bridge(d);
- 
- 	if (!ns_capable(dev_net(br->dev)->user_ns, CAP_NET_ADMIN))
- 		return -EPERM;
- 
- 	br_fdb_flush(br);
- 	return len;
+ 	return store_bridge_parm(d, buf, len, set_flush);
  }
 -static DEVICE_ATTR_WO(flush);
 +static DEVICE_ATTR(flush, S_IWUSR, NULL, store_flush);
  
  #ifdef CONFIG_BRIDGE_IGMP_SNOOPING
 -static ssize_t multicast_router_show(struct device *d,
 +static ssize_t show_multicast_router(struct device *d,
  				     struct device_attribute *attr, char *buf)
  {
  	struct net_bridge *br = to_bridge(d);
* Unmerged path net/bridge/br_sysfs_br.c
