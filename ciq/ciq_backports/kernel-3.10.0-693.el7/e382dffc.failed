x86/PCI: VMD: Use x86_vector_domain as parent domain

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
Rebuild_CHGLOG: - [x86] pci: vmd: Use x86_vector_domain as parent domain (Myron Stowe) [1395404]
Rebuild_FUZZ: 96.00%
commit-author Keith Busch <keith.busch@intel.com>
commit e382dffc904d14cb6e2c31e2eefebdca41343943
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/e382dffc.failed

Otherwise APIC code assumes VMD's IRQ domain can be managed by the APIC,
resulting in an invalid cast of irq_data during irq_force_complete_move().

	Signed-off-by: Jon Derrick <jonathan.derrick@intel.com>
	Signed-off-by: Keith Busch <keith.busch@intel.com>
	Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
(cherry picked from commit e382dffc904d14cb6e2c31e2eefebdca41343943)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/pci/vmd.c
diff --cc arch/x86/pci/vmd.c
index c06f45a0a147,0f77cc1dbb4e..000000000000
--- a/arch/x86/pci/vmd.c
+++ b/arch/x86/pci/vmd.c
@@@ -574,7 -598,10 +574,14 @@@ static int vmd_enable_domain(struct vmd
  
  	sd->node = pcibus_to_node(vmd->dev->bus);
  
++<<<<<<< HEAD
 +	sd->msi_ops = &vmd_msi;
++=======
+ 	vmd->irq_domain = pci_msi_create_irq_domain(NULL, &vmd_msi_domain_info,
+ 						    x86_vector_domain);
+ 	if (!vmd->irq_domain)
+ 		return -ENODEV;
++>>>>>>> e382dffc904d (x86/PCI: VMD: Use x86_vector_domain as parent domain)
  
  	pci_add_resource(&resources, &vmd->resources[0]);
  	pci_add_resource(&resources, &vmd->resources[1]);
* Unmerged path arch/x86/pci/vmd.c
