hung_task: decrement sysctl_hung_task_warnings only if it is positive

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>
commit 4ca5ede07c9871c13ae422c96d6d08dbd0df5eda
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/4ca5ede0.failed

Since sysctl_hung_task_warnings == -1 is allowed (infinite warnings),
commit 48a6d64edadb ("hung_task: allow hung_task_panic when
hung_task_warnings is 0") should decrement it only when it is not -1.

This prevents the kernel from ceasing warnings after the first
4294967295 ;)

	Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>
	Cc: John Siddle <jsiddle@redhat.com>
	Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
	Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
(cherry picked from commit 4ca5ede07c9871c13ae422c96d6d08dbd0df5eda)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	kernel/hung_task.c
diff --cc kernel/hung_task.c
index 7630a4bd2bcf,40c07e4fa116..000000000000
--- a/kernel/hung_task.c
+++ b/kernel/hung_task.c
@@@ -103,12 -105,20 +103,25 @@@ static void check_hung_task(struct task
  	 * Ok, the task did not get scheduled for more than 2 minutes,
  	 * complain:
  	 */
++<<<<<<< HEAD
 +	printk(KERN_ERR "INFO: task %s:%d blocked for more than "
 +			"%ld seconds.\n", t->comm, t->pid, timeout);
 +	printk(KERN_ERR "\"echo 0 > /proc/sys/kernel/hung_task_timeout_secs\""
++=======
+ 	if (sysctl_hung_task_warnings) {
+ 		if (sysctl_hung_task_warnings > 0)
+ 			sysctl_hung_task_warnings--;
+ 		pr_err("INFO: task %s:%d blocked for more than %ld seconds.\n",
+ 			t->comm, t->pid, timeout);
+ 		pr_err("      %s %s %.*s\n",
+ 			print_tainted(), init_utsname()->release,
+ 			(int)strcspn(init_utsname()->version, " "),
+ 			init_utsname()->version);
+ 		pr_err("\"echo 0 > /proc/sys/kernel/hung_task_timeout_secs\""
++>>>>>>> 4ca5ede07c98 (hung_task: decrement sysctl_hung_task_warnings only if it is positive)
  			" disables this message.\n");
 -		sched_show_task(t);
 -		debug_show_all_locks();
 -	}
 +	sched_show_task(t);
 +	debug_show_held_locks(t);
  
  	touch_nmi_watchdog();
  
* Unmerged path kernel/hung_task.c
