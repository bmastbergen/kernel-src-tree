mlx5_en: Replace ndo_add/del_vxlan_port with ndo_add/del_udp_enc_port

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Alexander Duyck <aduyck@mirantis.com>
commit 974c3f3000d85a3504ce294bcae6472ff9040770
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/974c3f30.failed

This change replaces the network device operations for adding or removing a
VXLAN port with operations that are more generically defined to be used for
any UDP offload port but provide a type.  As such by just adding a line to
verify that the offload type is VXLAN we can maintain the same
functionality.

	Signed-off-by: Alexander Duyck <aduyck@mirantis.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 974c3f3000d85a3504ce294bcae6472ff9040770)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/en_main.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/en_main.c
index 3bc18a2b4cee,8b7c6f381706..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_main.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_main.c
@@@ -2492,9 -2519,8 +2492,9 @@@ static int mlx5e_get_vf_stats(struct ne
  					    vf_stats);
  }
  
 +#if IS_ENABLED(CONFIG_MLX5_CORE_EN_VXLAN)
  static void mlx5e_add_vxlan_port(struct net_device *netdev,
- 				 sa_family_t sa_family, __be16 port)
+ 				 struct udp_tunnel_info *ti)
  {
  	struct mlx5e_priv *priv = netdev_priv(netdev);
  
@@@ -2596,10 -2630,11 +2602,15 @@@ static const struct net_device_ops mlx5
  	.ndo_set_features        = mlx5e_set_features,
  	.ndo_change_mtu          = mlx5e_change_mtu,
  	.ndo_do_ioctl            = mlx5e_ioctl,
++<<<<<<< HEAD
 +#ifdef CONFIG_MLX5_CORE_EN_VXLAN
 +	.ndo_add_vxlan_port      = mlx5e_add_vxlan_port,
 +	.ndo_del_vxlan_port      = mlx5e_del_vxlan_port,
++=======
+ 	.ndo_udp_tunnel_add	 = mlx5e_add_vxlan_port,
+ 	.ndo_udp_tunnel_del	 = mlx5e_del_vxlan_port,
++>>>>>>> 974c3f3000d8 (mlx5_en: Replace ndo_add/del_vxlan_port with ndo_add/del_udp_enc_port)
  	.ndo_features_check      = mlx5e_features_check,
 -#ifdef CONFIG_RFS_ACCEL
 -	.ndo_rx_flow_steer	 = mlx5e_rx_flow_steer,
  #endif
  	.ndo_set_vf_mac          = mlx5e_set_vf_mac,
  	.ndo_set_vf_vlan         = mlx5e_set_vf_vlan,
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en_main.c
