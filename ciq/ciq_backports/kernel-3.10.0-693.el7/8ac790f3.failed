qstr: constify instances in autofs4

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Al Viro <viro@zeniv.linux.org.uk>
commit 8ac790f312c47bb378fb129d3832d401945a0ca3
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/8ac790f3.failed

	Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
(cherry picked from commit 8ac790f312c47bb378fb129d3832d401945a0ca3)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/autofs4/waitq.c
diff --cc fs/autofs4/waitq.c
index 71b3baf9aaca,432b0d5a3c75..000000000000
--- a/fs/autofs4/waitq.c
+++ b/fs/autofs4/waitq.c
@@@ -247,8 -249,8 +247,13 @@@ autofs4_find_wait(struct autofs_sb_inf
   */
  static int validate_request(struct autofs_wait_queue **wait,
  			    struct autofs_sb_info *sbi,
++<<<<<<< HEAD
 +			    struct qstr *qstr,
 +			    struct dentry*dentry, enum autofs_notify notify)
++=======
+ 			    const struct qstr *qstr,
+ 			    struct dentry *dentry, enum autofs_notify notify)
++>>>>>>> 8ac790f312c4 (qstr: constify instances in autofs4)
  {
  	struct autofs_wait_queue *wq;
  	struct autofs_info *ino;
diff --git a/fs/autofs4/root.c b/fs/autofs4/root.c
index c8ae501dec34..b53f0cd15c80 100644
--- a/fs/autofs4/root.c
+++ b/fs/autofs4/root.c
@@ -160,7 +160,7 @@ static struct dentry *autofs4_lookup_active(struct dentry *dentry)
 {
 	struct autofs_sb_info *sbi = autofs4_sbi(dentry->d_sb);
 	struct dentry *parent = dentry->d_parent;
-	struct qstr *name = &dentry->d_name;
+	const struct qstr *name = &dentry->d_name;
 	unsigned int len = name->len;
 	unsigned int hash = name->hash;
 	const unsigned char *str = name->name;
@@ -173,7 +173,7 @@ static struct dentry *autofs4_lookup_active(struct dentry *dentry)
 	list_for_each(p, head) {
 		struct autofs_info *ino;
 		struct dentry *active;
-		struct qstr *qstr;
+		const struct qstr *qstr;
 
 		ino = list_entry(p, struct autofs_info, active);
 		active = ino->dentry;
@@ -215,7 +215,7 @@ static struct dentry *autofs4_lookup_expiring(struct dentry *dentry,
 {
 	struct autofs_sb_info *sbi = autofs4_sbi(dentry->d_sb);
 	struct dentry *parent = dentry->d_parent;
-	struct qstr *name = &dentry->d_name;
+	const struct qstr *name = &dentry->d_name;
 	unsigned int len = name->len;
 	unsigned int hash = name->hash;
 	const unsigned char *str = name->name;
@@ -228,7 +228,7 @@ static struct dentry *autofs4_lookup_expiring(struct dentry *dentry,
 	list_for_each(p, head) {
 		struct autofs_info *ino;
 		struct dentry *expiring;
-		struct qstr *qstr;
+		const struct qstr *qstr;
 
 		if (rcu_walk) {
 			spin_unlock(&sbi->lookup_lock);
* Unmerged path fs/autofs4/waitq.c
