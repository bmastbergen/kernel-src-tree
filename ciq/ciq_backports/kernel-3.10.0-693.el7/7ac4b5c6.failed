i40e: Increase minimum number of allocated VSI

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-693.el7
commit-author Akeem Abodunrin <akeem.g.abodunrin@intel.com>
commit 7ac4b5c6fd351be8f849f687e290ca9724acfd33
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-693.el7/7ac4b5c6.failed

This patch increases minimum number of allocated VSIs, so as to resolve
failure adding VSI for VF when 64-VFs assigned to a PF. The driver
supports up to 128 VFs per device, users can decide to enable up to
64-VFs on a single PF, especially 2 X 40 devices. In that scenario, with
VMDq co-existence, there would be starvation of VSIs - with this patch,
supported features would have enough VSIs for configuration now.

Change-ID: If084f4cd823667af8fe7fdc11489c705b32039d5
	Signed-off-by: Akeem Abodunrin <akeem.g.abodunrin@intel.com>
	Tested-by: Andrew Bowers <andrewx.bowers@intel.com>
	Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
(cherry picked from commit 7ac4b5c6fd351be8f849f687e290ca9724acfd33)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/intel/i40e/i40e.h
diff --cc drivers/net/ethernet/intel/i40e/i40e.h
index e77c6ccea74b,6b22df62f018..000000000000
--- a/drivers/net/ethernet/intel/i40e/i40e.h
+++ b/drivers/net/ethernet/intel/i40e/i40e.h
@@@ -65,16 -65,16 +65,27 @@@
  #include "i40e_dcb.h"
  
  /* Useful i40e defaults */
 -#define I40E_MAX_VEB			16
 -
 +#define I40E_MAX_VEB          16
 +
++<<<<<<< HEAD
 +#define I40E_MAX_NUM_DESCRIPTORS      4096
 +#define I40E_MAX_CSR_SPACE (4 * 1024 * 1024 - 64 * 1024)
 +#define I40E_DEFAULT_NUM_DESCRIPTORS  512
 +#define I40E_REQ_DESCRIPTOR_MULTIPLE  32
 +#define I40E_MIN_NUM_DESCRIPTORS      64
 +#define I40E_MIN_MSIX                 2
 +#define I40E_DEFAULT_NUM_VMDQ_VSI     8 /* max 256 VSIs */
 +#define I40E_MIN_VSI_ALLOC            51 /* LAN, ATR, FCOE, 32 VF, 16 VMDQ */
++=======
+ #define I40E_MAX_NUM_DESCRIPTORS	4096
+ #define I40E_MAX_CSR_SPACE		(4 * 1024 * 1024 - 64 * 1024)
+ #define I40E_DEFAULT_NUM_DESCRIPTORS	512
+ #define I40E_REQ_DESCRIPTOR_MULTIPLE	32
+ #define I40E_MIN_NUM_DESCRIPTORS	64
+ #define I40E_MIN_MSIX			2
+ #define I40E_DEFAULT_NUM_VMDQ_VSI	8 /* max 256 VSIs */
+ #define I40E_MIN_VSI_ALLOC		83 /* LAN, ATR, FCOE, 64 VF */
++>>>>>>> 7ac4b5c6fd35 (i40e: Increase minimum number of allocated VSI)
  /* max 16 qps */
  #define i40e_default_queues_per_vmdq(pf) \
  		(((pf)->flags & I40E_FLAG_RSS_AQ_CAPABLE) ? 4 : 1)
* Unmerged path drivers/net/ethernet/intel/i40e/i40e.h
