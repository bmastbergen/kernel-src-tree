netlink: create helpers for checking type is an int

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-301.1.el8
commit-author Jakub Kicinski <kuba@kernel.org>
commit ddcf3b70c5ae8444e920d28e30e7ad4e866c8015
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-301.1.el8/ddcf3b70.failed

There's a number of policies which check if type is a uint or sint.
Factor the checking against the list of value sizes to a helper
for easier reuse.

v2: - new patch

	Signed-off-by: Jakub Kicinski <kuba@kernel.org>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit ddcf3b70c5ae8444e920d28e30e7ad4e866c8015)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/net/netlink.h
diff --cc include/net/netlink.h
index e9fce5130a10,c5aa46f379bc..000000000000
--- a/include/net/netlink.h
+++ b/include/net/netlink.h
@@@ -396,23 -359,26 +396,42 @@@ static_assert(offsetofend(struct nla_po
  	_NLA_POLICY_NESTED(ARRAY_SIZE(policy) - 1, policy)
  #define NLA_POLICY_NESTED_ARRAY(policy) \
  	_NLA_POLICY_NESTED_ARRAY(ARRAY_SIZE(policy) - 1, policy)
 -#define NLA_POLICY_BITFIELD32(valid) \
 -	{ .type = NLA_BITFIELD32, .bitfield32_valid = valid }
 +#define NLA_POLICY_BITFIELD32_PTR(valid) \
 +	{ .type = NLA_BITFIELD32, .bitfield32_valid_ptr = valid }
  
+ #define __NLA_IS_UINT_TYPE(tp)						\
+ 	(tp == NLA_U8 || tp == NLA_U16 || tp == NLA_U32 || tp == NLA_U64)
+ #define __NLA_IS_SINT_TYPE(tp)						\
+ 	(tp == NLA_S8 || tp == NLA_S16 || tp == NLA_S32 || tp == NLA_S64)
+ 
  #define __NLA_ENSURE(condition) BUILD_BUG_ON_ZERO(!(condition))
++<<<<<<< HEAD
 +#define NLA_ENSURE_UINT_TYPE(tp)			\
 +	(__NLA_ENSURE(tp == NLA_U8 || tp == NLA_U16 ||	\
 +		      tp == NLA_U32 || tp == NLA_U64 ||	\
 +		      tp == NLA_MSECS) + tp)
 +#define NLA_ENSURE_SINT_TYPE(tp)			\
 +	(__NLA_ENSURE(tp == NLA_S8 || tp == NLA_S16  ||	\
 +		      tp == NLA_S32 || tp == NLA_S64) + tp)
 +#define NLA_ENSURE_INT_TYPE(tp)				\
 +	(__NLA_ENSURE(tp == NLA_S8 || tp == NLA_U8 ||	\
 +		      tp == NLA_S16 || tp == NLA_U16 ||	\
 +		      tp == NLA_S32 || tp == NLA_U32 ||	\
 +		      tp == NLA_S64 || tp == NLA_U64 ||	\
 +		      tp == NLA_MSECS) + tp)
++=======
+ #define NLA_ENSURE_UINT_OR_BINARY_TYPE(tp)		\
+ 	(__NLA_ENSURE(__NLA_IS_UINT_TYPE(tp) ||	\
+ 		      tp == NLA_MSECS ||		\
+ 		      tp == NLA_BINARY) + tp)
+ #define NLA_ENSURE_SINT_TYPE(tp)			\
+ 	(__NLA_ENSURE(__NLA_IS_SINT_TYPE(tp)) + tp)
+ #define NLA_ENSURE_INT_OR_BINARY_TYPE(tp)		\
+ 	(__NLA_ENSURE(__NLA_IS_UINT_TYPE(tp) ||		\
+ 		      __NLA_IS_SINT_TYPE(tp) ||		\
+ 		      tp == NLA_MSECS ||		\
+ 		      tp == NLA_BINARY) + tp)
++>>>>>>> ddcf3b70c5ae (netlink: create helpers for checking type is an int)
  #define NLA_ENSURE_NO_VALIDATION_PTR(tp)		\
  	(__NLA_ENSURE(tp != NLA_BITFIELD32 &&		\
  		      tp != NLA_REJECT &&		\
* Unmerged path include/net/netlink.h
