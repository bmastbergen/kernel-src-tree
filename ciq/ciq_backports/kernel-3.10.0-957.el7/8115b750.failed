net/dim: use struct net_dim_sample as arg to net_dim

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [kernel] dim: use struct net_dim_sample as arg to net_dim (Alaa Hleihel) [1520297]
Rebuild_FUZZ: 96.00%
commit-author Andy Gospodarek <gospo@broadcom.com>
commit 8115b750dbcbeb3aa412f18b7a8b0aee4d35b079
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/8115b750.failed

Simplify the arguments net_dim() by formatting them into a struct
net_dim_sample before calling the function.

	Signed-off-by: Andy Gospodarek <gospo@broadcom.com>
	Suggested-by: Tal Gilboa <talgi@mellanox.com>
	Acked-by: Tal Gilboa <talgi@mellanox.com>
	Acked-by: Saeed Mahameed <saeedm@mellanox.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 8115b750dbcbeb3aa412f18b7a8b0aee4d35b079)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/en_txrx.c
#	include/linux/net_dim.h
diff --cc drivers/net/ethernet/mellanox/mlx5/core/en_txrx.c
index 1b8f9f1c72f5,f292bb346985..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_txrx.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_txrx.c
@@@ -77,11 -78,14 +77,22 @@@ int mlx5e_napi_poll(struct napi_struct 
  	for (i = 0; i < c->num_tc; i++)
  		mlx5e_cq_arm(&c->sq[i].cq);
  
++<<<<<<< HEAD
 +	if (MLX5E_TEST_BIT(c->rq.state, MLX5E_RQ_STATE_AM))
 +		mlx5e_rx_am(&c->rq.am,
 +			    c->rq.cq.event_ctr,
 +			    c->rq.stats.packets,
 +			    c->rq.stats.bytes);
++=======
+ 	if (MLX5E_TEST_BIT(c->rq.state, MLX5E_RQ_STATE_AM)) {
+ 		struct net_dim_sample dim_sample;
+ 		net_dim_sample(c->rq.cq.event_ctr,
+ 			       c->rq.stats.packets,
+ 			       c->rq.stats.bytes,
+ 			       &dim_sample);
+ 		net_dim(&c->rq.dim, dim_sample);
+ 	}
++>>>>>>> 8115b750dbcb (net/dim: use struct net_dim_sample as arg to net_dim)
  
  	mlx5e_cq_arm(&c->rq.cq);
  	mlx5e_cq_arm(&c->icosq.cq);
* Unmerged path include/linux/net_dim.h
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en_txrx.c
* Unmerged path include/linux/net_dim.h
