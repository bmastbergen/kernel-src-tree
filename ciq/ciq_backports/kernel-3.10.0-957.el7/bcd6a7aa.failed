Revert "xhci: Limit USB2 port wake support for AMD Promontory hosts"

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Kai-Heng Feng <kai.heng.feng@canonical.com>
commit bcd6a7aa13800afc1418e6b29d944d882214939a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/bcd6a7aa.failed

This reverts commit dec08194ffeccfa1cf085906b53d301930eae18f.

Commit dec08194ffec ("xhci: Limit USB2 port wake support for AMD Promontory
hosts") makes all high speed USB ports on ASUS PRIME B350M-A cease to
function after enabling runtime PM.

All boards with this chipsets will be affected, so revert the commit.

The original patch was added to stable 4.9, 4.11 and 4.12 and needs
to reverted from there as well

	Cc: <stable@vger.kernel.org> # 4.9+
	Signed-off-by: Kai-Heng Feng <kai.heng.feng@canonical.com>
	Signed-off-by: Mathias Nyman <mathias.nyman@linux.intel.com>
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit bcd6a7aa13800afc1418e6b29d944d882214939a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/usb/host/xhci-pci.c
#	drivers/usb/host/xhci.h
diff --cc drivers/usb/host/xhci-pci.c
index 18c60c57b808,76f392954733..000000000000
--- a/drivers/usb/host/xhci-pci.c
+++ b/drivers/usb/host/xhci-pci.c
@@@ -52,6 -52,8 +52,11 @@@
  #define PCI_DEVICE_ID_INTEL_BROXTON_M_XHCI		0x0aa8
  #define PCI_DEVICE_ID_INTEL_BROXTON_B_XHCI		0x1aa8
  #define PCI_DEVICE_ID_INTEL_APL_XHCI			0x5aa8
++<<<<<<< HEAD
++=======
+ #define PCI_DEVICE_ID_INTEL_DNV_XHCI			0x19d0
+ 
++>>>>>>> bcd6a7aa1380 (Revert "xhci: Limit USB2 port wake support for AMD Promontory hosts")
  #define PCI_DEVICE_ID_ASMEDIA_1042A_XHCI		0x1142
  
  static const char hcd_name[] = "xhci_hcd";
diff --cc drivers/usb/host/xhci.h
index 6afdefe12905,2b48aa4f6b76..000000000000
--- a/drivers/usb/host/xhci.h
+++ b/drivers/usb/host/xhci.h
@@@ -1829,6 -1827,8 +1829,11 @@@ struct xhci_hcd 
  #define XHCI_MISSING_CAS	(1 << 24)
  /* For controller with a broken Port Disable implementation */
  #define XHCI_BROKEN_PORT_PED	(1 << 25)
++<<<<<<< HEAD
++=======
+ #define XHCI_LIMIT_ENDPOINT_INTERVAL_7	(1 << 26)
+ /* Reserved. It was XHCI_U2_DISABLE_WAKE */
++>>>>>>> bcd6a7aa1380 (Revert "xhci: Limit USB2 port wake support for AMD Promontory hosts")
  #define XHCI_ASMEDIA_MODIFY_FLOWCONTROL	(1 << 28)
  
  	unsigned int		num_active_eps;
* Unmerged path drivers/usb/host/xhci-pci.c
* Unmerged path drivers/usb/host/xhci.h
