md: move two macros into md.h

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [md] move two macros into md.h (Nigel Croxon) [1494474]
Rebuild_FUZZ: 92.59%
commit-author Ming Lei <tom.leiming@gmail.com>
commit d8e29fbc3bed181f2653fb89ac8c34e40db39c30
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/d8e29fbc.failed

Both raid1 and raid10 share common resync
block size and page count, so move them into md.h.

	Signed-off-by: Ming Lei <tom.leiming@gmail.com>
	Signed-off-by: Shaohua Li <shli@fb.com>
(cherry picked from commit d8e29fbc3bed181f2653fb89ac8c34e40db39c30)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/md/md.h
diff --cc drivers/md/md.h
index 629c80ea88dd,31d2d70849b6..000000000000
--- a/drivers/md/md.h
+++ b/drivers/md/md.h
@@@ -723,4 -711,16 +723,19 @@@ static inline void mddev_clear_unsuppor
  {
  	mddev->flags &= ~unsupported_flags;
  }
++<<<<<<< HEAD
++=======
+ 
+ static inline void mddev_check_writesame(struct mddev *mddev, struct bio *bio)
+ {
+ 	if (bio_op(bio) == REQ_OP_WRITE_SAME &&
+ 	    !bdev_get_queue(bio->bi_bdev)->limits.max_write_same_sectors)
+ 		mddev->queue->limits.max_write_same_sectors = 0;
+ }
+ 
+ /* Maximum size of each resync request */
+ #define RESYNC_BLOCK_SIZE (64*1024)
+ #define RESYNC_PAGES ((RESYNC_BLOCK_SIZE + PAGE_SIZE-1) / PAGE_SIZE)
+ 
++>>>>>>> d8e29fbc3bed (md: move two macros into md.h)
  #endif /* _MD_MD_H */
* Unmerged path drivers/md/md.h
diff --git a/drivers/md/raid1.c b/drivers/md/raid1.c
index 206ef4ca65de..f13e6cec5174 100644
--- a/drivers/md/raid1.c
+++ b/drivers/md/raid1.c
@@ -89,10 +89,8 @@ static void r1bio_pool_free(void *r1_bio, void *data)
 	kfree(r1_bio);
 }
 
-#define RESYNC_BLOCK_SIZE (64*1024)
 #define RESYNC_DEPTH 32
 #define RESYNC_SECTORS (RESYNC_BLOCK_SIZE >> 9)
-#define RESYNC_PAGES ((RESYNC_BLOCK_SIZE + PAGE_SIZE-1) / PAGE_SIZE)
 #define RESYNC_WINDOW (RESYNC_BLOCK_SIZE * RESYNC_DEPTH)
 #define RESYNC_WINDOW_SECTORS (RESYNC_WINDOW >> 9)
 
diff --git a/drivers/md/raid10.c b/drivers/md/raid10.c
index e568b64df05f..bb37a905a6ae 100644
--- a/drivers/md/raid10.c
+++ b/drivers/md/raid10.c
@@ -121,9 +121,6 @@ static void r10bio_pool_free(void *r10_bio, void *data)
 	kfree(r10_bio);
 }
 
-/* Maximum size of each resync request */
-#define RESYNC_BLOCK_SIZE (64*1024)
-#define RESYNC_PAGES ((RESYNC_BLOCK_SIZE + PAGE_SIZE-1) / PAGE_SIZE)
 /* amount of memory to reserve for resync requests */
 #define RESYNC_WINDOW (1024*1024)
 /* maximum number of concurrent requests, memory permitting */
