usb: host: xhci: remove #ifdef around PM functions

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [usb] host: xhci: remove #ifdef around PM functions (Torez Smith) [1540721]
Rebuild_FUZZ: 94.74%
commit-author Arnd Bergmann <arnd@arndb.de>
commit d852ed98f62e0d44f594adb850b3d6cedb5c9292
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/d852ed98.failed

The #ifdef is slightly wrong as it doesn't cover the xhci_priv_resume_quirk()
function, causing a harmless warning:

drivers/usb/host/xhci-plat.c:58:12: error: 'xhci_priv_resume_quirk' defined but not used [-Werror=unused-function]
 static int xhci_priv_resume_quirk(struct usb_hcd *hcd)

A simpler way to do this correctly is to use __maybe_unused annotations
that let the compiler silently drop the functions when there is no
reference.

Fixes: b0c69b4bace3 ("usb: host: plat: Enable xHCI plat runtime PM")
	Signed-off-by: Arnd Bergmann <arnd@arndb.de>
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit d852ed98f62e0d44f594adb850b3d6cedb5c9292)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/usb/host/xhci-plat.c
diff --cc drivers/usb/host/xhci-plat.c
index 6a4cb93efaf5,7c2a9e7c8e0f..000000000000
--- a/drivers/usb/host/xhci-plat.c
+++ b/drivers/usb/host/xhci-plat.c
@@@ -199,16 -369,45 +198,35 @@@ static int __maybe_unused xhci_plat_sus
  	 * reconsider this when xhci_plat_suspend enlarges its scope, e.g.,
  	 * also applies to runtime suspend.
  	 */
 -	ret = xhci_suspend(xhci, device_may_wakeup(dev));
 -
 -	if (!device_may_wakeup(dev) && !IS_ERR(xhci->clk))
 -		clk_disable_unprepare(xhci->clk);
 -
 -	return ret;
 +	return xhci_suspend(xhci, device_may_wakeup(dev));
  }
  
- static int xhci_plat_resume(struct device *dev)
+ static int __maybe_unused xhci_plat_resume(struct device *dev)
  {
  	struct usb_hcd	*hcd = dev_get_drvdata(dev);
  	struct xhci_hcd	*xhci = hcd_to_xhci(hcd);
  
  	return xhci_resume(xhci, 0);
  }
++<<<<<<< HEAD
++=======
+ 
+ static int __maybe_unused xhci_plat_runtime_suspend(struct device *dev)
+ {
+ 	struct usb_hcd  *hcd = dev_get_drvdata(dev);
+ 	struct xhci_hcd *xhci = hcd_to_xhci(hcd);
+ 
+ 	return xhci_suspend(xhci, true);
+ }
+ 
+ static int __maybe_unused xhci_plat_runtime_resume(struct device *dev)
+ {
+ 	struct usb_hcd  *hcd = dev_get_drvdata(dev);
+ 	struct xhci_hcd *xhci = hcd_to_xhci(hcd);
+ 
+ 	return xhci_resume(xhci, 0);
+ }
++>>>>>>> d852ed98f62e (usb: host: xhci: remove #ifdef around PM functions)
  
  static const struct dev_pm_ops xhci_plat_pm_ops = {
  	SET_SYSTEM_SLEEP_PM_OPS(xhci_plat_suspend, xhci_plat_resume)
* Unmerged path drivers/usb/host/xhci-plat.c
diff --git a/drivers/usb/host/xhci.h b/drivers/usb/host/xhci.h
index 4b82c0545a79..ca1b251254f4 100644
--- a/drivers/usb/host/xhci.h
+++ b/drivers/usb/host/xhci.h
@@ -2006,13 +2006,8 @@ void xhci_init_driver(struct hc_driver *drv,
 int xhci_disable_slot(struct xhci_hcd *xhci,
 			struct xhci_command *command, u32 slot_id);
 
-#ifdef	CONFIG_PM
 int xhci_suspend(struct xhci_hcd *xhci, bool do_wakeup);
 int xhci_resume(struct xhci_hcd *xhci, bool hibernated);
-#else
-#define	xhci_suspend	NULL
-#define	xhci_resume	NULL
-#endif
 
 irqreturn_t xhci_irq(struct usb_hcd *hcd);
 irqreturn_t xhci_msi_irq(int irq, void *hcd);
