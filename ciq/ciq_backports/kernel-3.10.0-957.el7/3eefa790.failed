PCI: host: Mark PCIe/PCI (MSI) cascade ISR as IRQF_NO_THREAD

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Jisheng Zhang <jszhang@marvell.com>
commit 3eefa790c9681a2dcbc923542dcd85b6989e8855
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/3eefa790.failed

Similar as commit 8ff0ef996ca0 ("PCI: host: Mark PCIe/PCI (MSI) IRQ cascade
handlers as IRQF_NO_THREAD"), we should mark PCIe/PCI (MSI) IRQ cascade
handlers in designware, qcom, and vmd as IRQF_NO_THREAD explicitly.

	Signed-off-by: Jisheng Zhang <jszhang@marvell.com>
	Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
	Reviewed-by: Keith Busch <keith.busch@intel.com>	# vmd
	Acked-by: Jingoo Han <jingoohan1@gmail.com>	# pcie-designware-plat.c
(cherry picked from commit 3eefa790c9681a2dcbc923542dcd85b6989e8855)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/pci/vmd.c
#	drivers/pci/dwc/pcie-designware-plat.c
#	drivers/pci/dwc/pcie-qcom.c
diff --cc arch/x86/pci/vmd.c
index 3d2c011ee753,784f63beb487..000000000000
--- a/arch/x86/pci/vmd.c
+++ b/arch/x86/pci/vmd.c
@@@ -664,12 -698,14 +664,18 @@@ static int vmd_probe(struct pci_dev *de
  		return -ENOMEM;
  
  	for (i = 0; i < vmd->msix_count; i++) {
 -		err = init_srcu_struct(&vmd->irqs[i].srcu);
 -		if (err)
 -			return err;
 -
  		INIT_LIST_HEAD(&vmd->irqs[i].irq_list);
++<<<<<<< HEAD:arch/x86/pci/vmd.c
 +		vmd->irqs[i].vmd_vector = pci_irq_vector(dev, i);
 +		vmd->irqs[i].index = i;
 +
 +		err = devm_request_irq(&dev->dev, vmd->irqs[i].vmd_vector,
 +				       vmd_irq, 0, "vmd", &vmd->irqs[i]);
++=======
+ 		err = devm_request_irq(&dev->dev, pci_irq_vector(dev, i),
+ 				       vmd_irq, IRQF_NO_THREAD,
+ 				       "vmd", &vmd->irqs[i]);
++>>>>>>> 3eefa790c968 (PCI: host: Mark PCIe/PCI (MSI) cascade ISR as IRQF_NO_THREAD):drivers/pci/host/vmd.c
  		if (err)
  			return err;
  	}
* Unmerged path drivers/pci/dwc/pcie-designware-plat.c
* Unmerged path drivers/pci/dwc/pcie-qcom.c
* Unmerged path arch/x86/pci/vmd.c
* Unmerged path drivers/pci/dwc/pcie-designware-plat.c
* Unmerged path drivers/pci/dwc/pcie-qcom.c
