perf tools: Add perf_data_file__write function

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Jiri Olsa <jolsa@kernel.org>
commit e268687bfb73bb7bfe65f23f5cba5c8a0e5bb050
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/e268687b.failed

Adding perf_data_file__write function to provide single file write
operation.

	Signed-off-by: Jiri Olsa <jolsa@kernel.org>
	Cc: Andi Kleen <andi@firstfloor.org>
	Cc: Changbin Du <changbin.du@intel.com>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Jin Yao <yao.jin@linux.intel.com>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Peter Zijlstra <peterz@infradead.org>
	Cc: Wang Nan <wangnan0@huawei.com>
Link: http://lkml.kernel.org/n/tip-c3f9p4xzykr845ktqcek6p4t@git.kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit e268687bfb73bb7bfe65f23f5cba5c8a0e5bb050)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/util/data.c
diff --cc tools/perf/util/data.c
index 263f5a906ba5,f80a23d031d6..000000000000
--- a/tools/perf/util/data.c
+++ b/tools/perf/util/data.c
@@@ -144,12 -145,18 +144,24 @@@ void perf_data_file__close(struct perf_
  }
  
  ssize_t perf_data_file__write(struct perf_data_file *file,
++<<<<<<< HEAD
 +			      void *buf, size_t size)
 +{
 +	return writen(file->fd, buf, size);
++=======
+ 			      void *buf, size_t size)
+ {
+ 	return writen(file->fd, buf, size);
+ }
+ 
+ ssize_t perf_data__write(struct perf_data *data,
+ 			      void *buf, size_t size)
+ {
+ 	return perf_data_file__write(&data->file, buf, size);
++>>>>>>> e268687bfb73 (perf tools: Add perf_data_file__write function)
  }
  
 -int perf_data__switch(struct perf_data *data,
 +int perf_data_file__switch(struct perf_data_file *file,
  			   const char *postfix,
  			   size_t pos, bool at_exit)
  {
* Unmerged path tools/perf/util/data.c
diff --git a/tools/perf/util/data.h b/tools/perf/util/data.h
index ae510ce16cb1..c2602e979d0f 100644
--- a/tools/perf/util/data.h
+++ b/tools/perf/util/data.h
@@ -44,6 +44,8 @@ static inline unsigned long perf_data_file__size(struct perf_data_file *file)
 
 int perf_data_file__open(struct perf_data_file *file);
 void perf_data_file__close(struct perf_data_file *file);
+ssize_t perf_data_file__write(struct perf_data_file *file,
+			      void *buf, size_t size);
 ssize_t perf_data_file__write(struct perf_data_file *file,
 			      void *buf, size_t size);
 /*
