perf trace: Allow allocating sc->arg_fmt even without the syscall tracepoint

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Arnaldo Carvalho de Melo <acme@redhat.com>
commit 5e58fcfaf4c60795c241be739ad55c519d7f2aaa
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/5e58fcfa.failed

At least "clone" doesn't have (enter, exit) entries tracefs/events/syscalls/,
but we can provide a syscall_fmt and use it instead, as will be done for
"clone" in the next cset.

	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Jiri Olsa <jolsa@kernel.org>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Wang Nan <wangnan0@huawei.com>
Link: http://lkml.kernel.org/n/tip-o12kejgcxddyovn2hlg4gbim@git.kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 5e58fcfaf4c60795c241be739ad55c519d7f2aaa)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/builtin-trace.c
diff --cc tools/perf/builtin-trace.c
index 5114abbd2e32,1c5238af6d14..000000000000
--- a/tools/perf/builtin-trace.c
+++ b/tools/perf/builtin-trace.c
@@@ -1210,17 -1187,11 +1227,25 @@@ static int syscall__set_arg_fmts(struc
  	struct format_field *field;
  	int idx = 0, len;
  
++<<<<<<< HEAD
 +	sc->arg_scnprintf = calloc(sc->nr_args, sizeof(void *));
 +	if (sc->arg_scnprintf == NULL)
 +		return -1;
 +
 +	if (sc->fmt)
 +		sc->arg_parm = sc->fmt->arg_parm;
 +
 +	for (field = sc->args; field; field = field->next) {
 +		if (sc->fmt && sc->fmt->arg_scnprintf[idx])
 +			sc->arg_scnprintf[idx] = sc->fmt->arg_scnprintf[idx];
 +		else if (strcmp(field->type, "const char *") == 0 &&
++=======
+ 	for (field = sc->args; field; field = field->next, ++idx) {
+ 		if (sc->fmt && sc->fmt->arg[idx].scnprintf)
+ 			continue;
+ 
+ 		if (strcmp(field->type, "const char *") == 0 &&
++>>>>>>> 5e58fcfaf4c6 (perf trace: Allow allocating sc->arg_fmt even without the syscall tracepoint)
  			 (strcmp(field->name, "filename") == 0 ||
  			  strcmp(field->name, "path") == 0 ||
  			  strcmp(field->name, "pathname") == 0))
* Unmerged path tools/perf/builtin-trace.c
