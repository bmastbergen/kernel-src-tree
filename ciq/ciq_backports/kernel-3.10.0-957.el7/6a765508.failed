scsi: zfcp: fix missing REC trigger trace on enqueue without ERP thread

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Steffen Maier <maier@linux.ibm.com>
commit 6a76550841d412330bd86aed3238d1888ba70f0e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/6a765508.failed

Example trace record formatted with zfcpdbf from s390-tools:

Timestamp      : ...
Area           : REC
Subarea        : 00
Level          : 1
Exception      : -
CPU ID         : ..
Caller         : 0x...
Record ID      : 1                      ZFCP_DBF_REC_TRIG
Tag            : .......
LUN            : 0x...
WWPN           : 0x...
D_ID           : 0x...
Adapter status : 0x...
Port status    : 0x...
LUN status     : 0x...
Ready count    : 0x...
Running count  : 0x...
ERP want       : 0x0.                   ZFCP_ERP_ACTION_REOPEN_...
ERP need       : 0xc0                   ZFCP_ERP_ACTION_NONE

	Signed-off-by: Steffen Maier <maier@linux.ibm.com>
	Cc: <stable@vger.kernel.org> #2.6.38+
	Reviewed-by: Benjamin Block <bblock@linux.ibm.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit 6a76550841d412330bd86aed3238d1888ba70f0e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/s390/scsi/zfcp_erp.c
diff --cc drivers/s390/scsi/zfcp_erp.c
index dad45aba1cd3,69dfb328dba4..000000000000
--- a/drivers/s390/scsi/zfcp_erp.c
+++ b/drivers/s390/scsi/zfcp_erp.c
@@@ -248,8 -309,17 +248,22 @@@ static int zfcp_erp_action_enqueue(int 
  	int retval = 1, need;
  	struct zfcp_erp_action *act;
  
++<<<<<<< HEAD
 +	if (!adapter->erp_thread)
 +		return -EIO;
++=======
+ 	need = zfcp_erp_handle_failed(want, adapter, port, sdev);
+ 	if (!need) {
+ 		need = ZFCP_ERP_ACTION_FAILED; /* marker for trace */
+ 		goto out;
+ 	}
+ 
+ 	if (!adapter->erp_thread) {
+ 		need = ZFCP_ERP_ACTION_NONE; /* marker for trace */
+ 		retval = -EIO;
+ 		goto out;
+ 	}
++>>>>>>> 6a76550841d4 (scsi: zfcp: fix missing REC trigger trace on enqueue without ERP thread)
  
  	need = zfcp_erp_required_act(want, adapter, port, sdev);
  	if (!need)
* Unmerged path drivers/s390/scsi/zfcp_erp.c
