md: delete dead code

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [md] delete dead code (Nigel Croxon) [1494474]
Rebuild_FUZZ: 88.89%
commit-author Shaohua Li <shli@fb.com>
commit 99b3d74ec05c4a4c57766a90d65b53d78ab06404
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/99b3d74e.failed

Nobody is using mddev_check_plugged(), so delete the dead code

	Signed-off-by: Shaohua Li <shli@fb.com>
(cherry picked from commit 99b3d74ec05c4a4c57766a90d65b53d78ab06404)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/md/md.h
diff --cc drivers/md/md.h
index 629c80ea88dd,dde8ecb760c8..000000000000
--- a/drivers/md/md.h
+++ b/drivers/md/md.h
@@@ -698,15 -676,10 +698,22 @@@ extern struct bio *bio_clone_mddev(stru
  extern struct bio *bio_alloc_mddev(gfp_t gfp_mask, int nr_iovecs,
  				   struct mddev *mddev);
  
++<<<<<<< HEAD
 +extern void md_unplug(struct blk_plug_cb *cb, bool from_schedule);
 +struct md_rdev *md_find_rdev_nr_rcu(struct mddev *mddev, int nr);
 +extern void md_kick_rdev_from_array(struct md_rdev * rdev);
 +extern void md_update_sb(struct mddev *mddev, int force);
 +static inline int mddev_check_plugged(struct mddev *mddev)
 +{
 +	return !!blk_check_plugged(md_unplug, mddev,
 +				   sizeof(struct blk_plug_cb));
 +}
++=======
+ extern void md_reload_sb(struct mddev *mddev, int raid_disk);
+ extern void md_update_sb(struct mddev *mddev, int force);
+ extern void md_kick_rdev_from_array(struct md_rdev * rdev);
+ struct md_rdev *md_find_rdev_nr_rcu(struct mddev *mddev, int nr);
++>>>>>>> 99b3d74ec05c (md: delete dead code)
  
  static inline void rdev_dec_pending(struct md_rdev *rdev, struct mddev *mddev)
  {
diff --git a/drivers/md/md.c b/drivers/md/md.c
index 66ef0e2062f1..597789dd936f 100644
--- a/drivers/md/md.c
+++ b/drivers/md/md.c
@@ -498,14 +498,6 @@ void md_flush_request(struct mddev *mddev, struct bio *bio)
 }
 EXPORT_SYMBOL(md_flush_request);
 
-void md_unplug(struct blk_plug_cb *cb, bool from_schedule)
-{
-	struct mddev *mddev = cb->data;
-	md_wakeup_thread(mddev->thread);
-	kfree(cb);
-}
-EXPORT_SYMBOL(md_unplug);
-
 static inline struct mddev *mddev_get(struct mddev *mddev)
 {
 	atomic_inc(&mddev->active);
* Unmerged path drivers/md/md.h
