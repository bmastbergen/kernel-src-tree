x86/mm/pat: Export pat_enabled()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [x86] mm/pat: Export pat_enabled() (Jeff Moyer) [1539279]
Rebuild_FUZZ: 93.33%
commit-author Luis R. Rodriguez <mcgrof@suse.com>
commit fbe7193aa4787f27c84216d130ab877efc310d57
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/fbe7193a.failed

Two Linux device drivers cannot work with PAT and the work
required to make them work is significant. There is not enough
motivation to convert these drivers over to use PAT properly,
the compromise reached is to let drivers that cannot be ported
to PAT check if PAT was enabled and if so fail on probe with a
recommendation to boot with the "nopat" kernel parameter.

	Signed-off-by: Luis R. Rodriguez <mcgrof@suse.com>
	Signed-off-by: Borislav Petkov <bp@suse.de>
	Cc: Andy Lutomirski <luto@amacapital.net>
	Cc: Andy Walls <awalls@md.metrocast.net>
	Cc: Bjorn Helgaas <bhelgaas@google.com>
	Cc: Borislav Petkov <bp@alien8.de>
	Cc: Brian Gerst <brgerst@gmail.com>
	Cc: Daniel Vetter <daniel.vetter@ffwll.ch>
	Cc: Dave Airlie <airlied@redhat.com>
	Cc: Denys Vlasenko <dvlasenk@redhat.com>
	Cc: Doug Ledford <dledford@redhat.com>
	Cc: H. Peter Anvin <hpa@zytor.com>
	Cc: Juergen Gross <jgross@suse.com>
	Cc: Linus Torvalds <torvalds@linux-foundation.org>
	Cc: Michael S. Tsirkin <mst@redhat.com>
	Cc: Peter Zijlstra <peterz@infradead.org>
	Cc: Thomas Gleixner <tglx@linutronix.de>
Link: http://lkml.kernel.org/r/1430425520-22275-4-git-send-email-mcgrof@do-not-panic.com
Link: http://lkml.kernel.org/r/1432628901-18044-14-git-send-email-bp@alien8.de
	Signed-off-by: Ingo Molnar <mingo@kernel.org>
(cherry picked from commit fbe7193aa4787f27c84216d130ab877efc310d57)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/mm/pat.c
diff --cc arch/x86/mm/pat.c
index 4753c248a62d,a1c96544099d..000000000000
--- a/arch/x86/mm/pat.c
+++ b/arch/x86/mm/pat.c
@@@ -48,13 -50,12 +48,17 @@@ static int __init nopat(char *str
  	return 0;
  }
  early_param("nopat", nopat);
 -
 -bool pat_enabled(void)
 +#else
 +static inline void pat_disable(const char *reason)
  {
 -	return !!__pat_enabled;
 +	(void)reason;
  }
++<<<<<<< HEAD
 +#endif
 +
++=======
+ EXPORT_SYMBOL_GPL(pat_enabled);
++>>>>>>> fbe7193aa478 (x86/mm/pat: Export pat_enabled())
  
  int pat_debug_enable;
  
* Unmerged path arch/x86/mm/pat.c
