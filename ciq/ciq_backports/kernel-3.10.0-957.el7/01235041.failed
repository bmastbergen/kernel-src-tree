tools/power turbostat: Add Node in output

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [tools] power turbostat: Add Node in output (Prarit Bhargava) [1454489]
Rebuild_FUZZ: 92.11%
commit-author Prarit Bhargava <prarit@redhat.com>
commit 012350411b09a57e0f15eb438e3c9b877cdc66a1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/01235041.failed

Output a Node column if there is more than one node/socket.

	Signed-off-by: Prarit Bhargava <prarit@redhat.com>
	Signed-off-by: Len Brown <len.brown@intel.com>
(cherry picked from commit 012350411b09a57e0f15eb438e3c9b877cdc66a1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/power/x86/turbostat/turbostat.c
diff --cc tools/power/x86/turbostat/turbostat.c
index b87a8d9134f5,0049154929f0..000000000000
--- a/tools/power/x86/turbostat/turbostat.c
+++ b/tools/power/x86/turbostat/turbostat.c
@@@ -427,54 -438,62 +427,105 @@@ struct msr_counter bic[] = 
  
  
  #define MAX_BIC (sizeof(bic) / sizeof(struct msr_counter))
++<<<<<<< HEAD
 +#define	BIC_Package	(1ULL << 0)
 +#define	BIC_Avg_MHz	(1ULL << 1)
 +#define	BIC_Bzy_MHz	(1ULL << 2)
 +#define	BIC_TSC_MHz	(1ULL << 3)
 +#define	BIC_IRQ		(1ULL << 4)
 +#define	BIC_SMI		(1ULL << 5)
 +#define	BIC_Busy	(1ULL << 6)
 +#define	BIC_CPU_c1	(1ULL << 7)
 +#define	BIC_CPU_c3	(1ULL << 8)
 +#define	BIC_CPU_c6	(1ULL << 9)
 +#define	BIC_CPU_c7	(1ULL << 10)
 +#define	BIC_ThreadC	(1ULL << 11)
 +#define	BIC_CoreTmp	(1ULL << 12)
 +#define	BIC_CoreCnt	(1ULL << 13)
 +#define	BIC_PkgTmp	(1ULL << 14)
 +#define	BIC_GFX_rc6	(1ULL << 15)
 +#define	BIC_GFXMHz	(1ULL << 16)
 +#define	BIC_Pkgpc2	(1ULL << 17)
 +#define	BIC_Pkgpc3	(1ULL << 18)
 +#define	BIC_Pkgpc6	(1ULL << 19)
 +#define	BIC_Pkgpc7	(1ULL << 20)
 +#define	BIC_Pkgpc8	(1ULL << 21)
 +#define	BIC_Pkgpc9	(1ULL << 22)
 +#define	BIC_Pkgpc10	(1ULL << 23)
 +#define	BIC_PkgWatt	(1ULL << 24)
 +#define	BIC_CorWatt	(1ULL << 25)
 +#define	BIC_GFXWatt	(1ULL << 26)
 +#define	BIC_PkgCnt	(1ULL << 27)
 +#define	BIC_RAMWatt	(1ULL << 28)
 +#define	BIC_PKG__	(1ULL << 29)
 +#define	BIC_RAM__	(1ULL << 30)
 +#define	BIC_Pkg_J	(1ULL << 31)
 +#define	BIC_Cor_J	(1ULL << 32)
 +#define	BIC_GFX_J	(1ULL << 33)
 +#define	BIC_RAM_J	(1ULL << 34)
 +#define	BIC_Core	(1ULL << 35)
 +#define	BIC_CPU		(1ULL << 36)
 +#define	BIC_Mod_c6	(1ULL << 37)
 +#define	BIC_sysfs	(1ULL << 38)
 +#define	BIC_Totl_c0	(1ULL << 39)
 +#define	BIC_Any_c0	(1ULL << 40)
 +#define	BIC_GFX_c0	(1ULL << 41)
 +#define	BIC_CPUGFX	(1ULL << 42)
++=======
+ #define	BIC_USEC	(1ULL << 0)
+ #define	BIC_TOD		(1ULL << 1)
+ #define	BIC_Package	(1ULL << 2)
+ #define	BIC_Avg_MHz	(1ULL << 3)
+ #define	BIC_Bzy_MHz	(1ULL << 4)
+ #define	BIC_TSC_MHz	(1ULL << 5)
+ #define	BIC_IRQ		(1ULL << 6)
+ #define	BIC_SMI		(1ULL << 7)
+ #define	BIC_Busy	(1ULL << 8)
+ #define	BIC_CPU_c1	(1ULL << 9)
+ #define	BIC_CPU_c3	(1ULL << 10)
+ #define	BIC_CPU_c6	(1ULL << 11)
+ #define	BIC_CPU_c7	(1ULL << 12)
+ #define	BIC_ThreadC	(1ULL << 13)
+ #define	BIC_CoreTmp	(1ULL << 14)
+ #define	BIC_CoreCnt	(1ULL << 15)
+ #define	BIC_PkgTmp	(1ULL << 16)
+ #define	BIC_GFX_rc6	(1ULL << 17)
+ #define	BIC_GFXMHz	(1ULL << 18)
+ #define	BIC_Pkgpc2	(1ULL << 19)
+ #define	BIC_Pkgpc3	(1ULL << 20)
+ #define	BIC_Pkgpc6	(1ULL << 21)
+ #define	BIC_Pkgpc7	(1ULL << 22)
+ #define	BIC_Pkgpc8	(1ULL << 23)
+ #define	BIC_Pkgpc9	(1ULL << 24)
+ #define	BIC_Pkgpc10	(1ULL << 25)
+ #define BIC_CPU_LPI	(1ULL << 26)
+ #define BIC_SYS_LPI	(1ULL << 27)
+ #define	BIC_PkgWatt	(1ULL << 26)
+ #define	BIC_CorWatt	(1ULL << 27)
+ #define	BIC_GFXWatt	(1ULL << 28)
+ #define	BIC_PkgCnt	(1ULL << 29)
+ #define	BIC_RAMWatt	(1ULL << 30)
+ #define	BIC_PKG__	(1ULL << 31)
+ #define	BIC_RAM__	(1ULL << 32)
+ #define	BIC_Pkg_J	(1ULL << 33)
+ #define	BIC_Cor_J	(1ULL << 34)
+ #define	BIC_GFX_J	(1ULL << 35)
+ #define	BIC_RAM_J	(1ULL << 36)
+ #define	BIC_Core	(1ULL << 37)
+ #define	BIC_CPU		(1ULL << 38)
+ #define	BIC_Mod_c6	(1ULL << 39)
+ #define	BIC_sysfs	(1ULL << 40)
+ #define	BIC_Totl_c0	(1ULL << 41)
+ #define	BIC_Any_c0	(1ULL << 42)
+ #define	BIC_GFX_c0	(1ULL << 43)
+ #define	BIC_CPUGFX	(1ULL << 44)
+ #define	BIC_Node	(1ULL << 45)
++>>>>>>> 012350411b09 (tools/power turbostat: Add Node in output)
  
 -#define BIC_DISABLED_BY_DEFAULT	(BIC_USEC | BIC_TOD)
 -
 -unsigned long long bic_enabled = (0xFFFFFFFFFFFFFFFFULL & ~BIC_DISABLED_BY_DEFAULT);
 -unsigned long long bic_present = BIC_USEC | BIC_TOD | BIC_sysfs;
 +unsigned long long bic_enabled = 0xFFFFFFFFFFFFFFFFULL;
 +unsigned long long bic_present = BIC_sysfs;
  
  #define DO_BIC(COUNTER_NAME) (bic_enabled & bic_present & COUNTER_NAME)
 -#define ENABLE_BIC(COUNTER_NAME) (bic_enabled |= COUNTER_NAME)
  #define BIC_PRESENT(COUNTER_BIT) (bic_present |= COUNTER_BIT)
  #define BIC_NOT_PRESENT(COUNTER_BIT) (bic_present &= ~COUNTER_BIT)
  
@@@ -565,10 -589,14 +616,12 @@@ void print_header(char *delim
  	struct msr_counter *mp;
  	int printed = 0;
  
 -	if (DO_BIC(BIC_USEC))
 -		outp += sprintf(outp, "%susec", (printed++ ? delim : ""));
 -	if (DO_BIC(BIC_TOD))
 -		outp += sprintf(outp, "%sTime_Of_Day_Seconds", (printed++ ? delim : ""));
 +	if (debug)
 +		outp += sprintf(outp, "usec %s", delim);
  	if (DO_BIC(BIC_Package))
  		outp += sprintf(outp, "%sPackage", (printed++ ? delim : ""));
+ 	if (DO_BIC(BIC_Node))
+ 		outp += sprintf(outp, "%sNode", (printed++ ? delim : ""));
  	if (DO_BIC(BIC_Core))
  		outp += sprintf(outp, "%sCore", (printed++ ? delim : ""));
  	if (DO_BIC(BIC_CPU))
* Unmerged path tools/power/x86/turbostat/turbostat.c
