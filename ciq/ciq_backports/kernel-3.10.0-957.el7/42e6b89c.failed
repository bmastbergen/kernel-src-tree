net: ipmr: fix setsockopt error return

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [net] ipmr: fix setsockopt error return (Ivan Vecera) [1584232]
Rebuild_FUZZ: 92.96%
commit-author Nikolay Aleksandrov <nikolay@cumulusnetworks.com>
commit 42e6b89ce4e8a4f02a1e906694d81acf60db6f4d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/42e6b89c.failed

We can have both errors and we'll return the second one, fix it to
return an error at a time as it's normal. I've overlooked this in my
previous set.

	Signed-off-by: Nikolay Aleksandrov <nikolay@cumulusnetworks.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 42e6b89ce4e8a4f02a1e906694d81acf60db6f4d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv4/ipmr.c
diff --cc net/ipv4/ipmr.c
index 14e0af5a16ef,6c24a16299c7..000000000000
--- a/net/ipv4/ipmr.c
+++ b/net/ipv4/ipmr.c
@@@ -1285,13 -1284,13 +1285,23 @@@ int ip_mroute_setsockopt(struct sock *s
  
  	switch (optname) {
  	case MRT_INIT:
++<<<<<<< HEAD
 +		if (optlen != sizeof(int))
 +			return -EINVAL;
 +
 +		rtnl_lock();
 +		if (rtnl_dereference(mrt->mroute_sk)) {
 +			rtnl_unlock();
 +			return -EADDRINUSE;
++=======
+ 		if (optlen != sizeof(int)) {
+ 			ret = -EINVAL;
+ 			break;
+ 		}
+ 		if (rtnl_dereference(mrt->mroute_sk)) {
+ 			ret = -EADDRINUSE;
+ 			break;
++>>>>>>> 42e6b89ce4e8 (net: ipmr: fix setsockopt error return)
  		}
  
  		ret = ip_ra_control(sk, 1, mrtsock_destruct);
* Unmerged path net/ipv4/ipmr.c
