mlxsw: use tc_cls_can_offload_and_chain0()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Jakub Kicinski <jakub.kicinski@netronome.com>
commit 15f4edb3d9c60a0934b133aae9c915807138cb4d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/15f4edb3.failed

Make use of tc_cls_can_offload_and_chain0() to set extack msg in case
ethtool tc offload flag is not set or chain unsupported.

	Signed-off-by: Jakub Kicinski <jakub.kicinski@netronome.com>
	Reviewed-by: Simon Horman <simon.horman@netronome.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 15f4edb3d9c60a0934b133aae9c915807138cb4d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlxsw/spectrum.c
diff --cc drivers/net/ethernet/mellanox/mlxsw/spectrum.c
index 3c7b6a198882,3dcc58d61506..000000000000
--- a/drivers/net/ethernet/mellanox/mlxsw/spectrum.c
+++ b/drivers/net/ethernet/mellanox/mlxsw/spectrum.c
@@@ -1782,6 -1777,10 +1779,13 @@@ static int mlxsw_sp_setup_tc_block_cb(e
  
  	switch (type) {
  	case TC_SETUP_CLSMATCHALL:
++<<<<<<< HEAD
++=======
+ 		if (!tc_cls_can_offload_and_chain0(mlxsw_sp_port->dev,
+ 						   type_data))
+ 			return -EOPNOTSUPP;
+ 
++>>>>>>> 15f4edb3d9c6 (mlxsw: use tc_cls_can_offload_and_chain0())
  		return mlxsw_sp_setup_tc_cls_matchall(mlxsw_sp_port, type_data,
  						      ingress);
  	case TC_SETUP_CLSFLOWER:
* Unmerged path drivers/net/ethernet/mellanox/mlxsw/spectrum.c
