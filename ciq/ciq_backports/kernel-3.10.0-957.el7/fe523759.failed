scsi: aacraid: Skip schedule rescan in case of kdump

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [scsi] aacraid: Skip schedule rescan in case of kdump (Raghava Aditya Renukunta) [1519664]
Rebuild_FUZZ: 93.88%
commit-author Raghava Aditya Renukunta <RaghavaAditya.Renukunta@microsemi.com>
commit fe5237590bb033ad6b7312b0ef62a2d7d5c4141f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/fe523759.failed

There is a chance of the driver to be stuck in kdump if drives start
acting up in kdump discovery process and the kernel decides to send eh
resets, which would prompt rescan to be scheduled.

Do not perform a rescan in kdump context, since we do not expect a hotplug
event during kdump and all the devices are going to go away anyway.

	Signed-off-by: Raghava Aditya Renukunta <RaghavaAditya.Renukunta@microsemi.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit fe5237590bb033ad6b7312b0ef62a2d7d5c4141f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/aacraid/commsup.c
diff --cc drivers/scsi/aacraid/commsup.c
index 4be1a279f46f,f0c3e7dbf60a..000000000000
--- a/drivers/scsi/aacraid/commsup.c
+++ b/drivers/scsi/aacraid/commsup.c
@@@ -1642,6 -1672,15 +1643,18 @@@ out
  	aac->in_reset = 0;
  	scsi_unblock_requests(host);
  
++<<<<<<< HEAD
++=======
+ 	/*
+ 	 * Issue bus rescan to catch any configuration that might have
+ 	 * occurred
+ 	 */
+ 	if (!retval && !is_kdump_kernel()) {
+ 		dev_info(&aac->pdev->dev, "Scheduling bus rescan\n");
+ 		aac_schedule_safw_scan_worker(aac);
+ 	}
+ 
++>>>>>>> fe5237590bb0 (scsi: aacraid: Skip schedule rescan in case of kdump)
  	if (jafo) {
  		spin_lock_irq(host->host_lock);
  	}
* Unmerged path drivers/scsi/aacraid/commsup.c
