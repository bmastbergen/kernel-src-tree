block: fix a crash caused by wrong API

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [block] fix a crash caused by wrong API (Ming Lei) [1548261]
Rebuild_FUZZ: 89.86%
commit-author Shaohua Li <shli@fb.com>
commit f5c156c4c29a3d87176dd6e5c099388e187ec29b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/f5c156c4.failed

part_stat_show takes a part device not a disk, so we should use
part_to_disk.

Fixes: d62e26b3ffd2("block: pass in queue to inflight accounting")
	Cc: Bart Van Assche <bart.vanassche@wdc.com>
	Cc: Omar Sandoval <osandov@fb.com>
	Signed-off-by: Shaohua Li <shli@fb.com>
	Signed-off-by: Jens Axboe <axboe@kernel.dk>
(cherry picked from commit f5c156c4c29a3d87176dd6e5c099388e187ec29b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	block/partition-generic.c
diff --cc block/partition-generic.c
index 195b56c1be27,88c555db4e5d..000000000000
--- a/block/partition-generic.c
+++ b/block/partition-generic.c
@@@ -112,6 -112,8 +112,11 @@@ ssize_t part_stat_show(struct device *d
  		       struct device_attribute *attr, char *buf)
  {
  	struct hd_struct *p = dev_to_part(dev);
++<<<<<<< HEAD
++=======
+ 	struct request_queue *q = part_to_disk(p)->queue;
+ 	unsigned int inflight[2];
++>>>>>>> f5c156c4c29a (block: fix a crash caused by wrong API)
  	int cpu;
  
  	cpu = part_stat_lock();
* Unmerged path block/partition-generic.c
