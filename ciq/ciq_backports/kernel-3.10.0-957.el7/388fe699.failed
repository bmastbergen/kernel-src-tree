target: Fix cmd size for PR-OUT in passthrough_parse_cdb

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [target] Fix cmd size for PR-OUT in passthrough_parse_cdb (Maurizio Lombardi) [1585081]
Rebuild_FUZZ: 92.31%
commit-author Tang Wenji <tang.wenji@zte.com.cn>
commit 388fe6996bf658146e70c0df986981eae4be0385
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/388fe699.failed

The cmd size should be 4bytes form byte5 to byte8 when CDB opcode
is PERSISTENT_RESERVE_OUT in SPC3 and SPC4

(Also fix up the same in spc_parse_cdb - MNC)

	Signed-off-by: Tang Wenji <tang.wenji@zte.com.cn>
	Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>
(cherry picked from commit 388fe6996bf658146e70c0df986981eae4be0385)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/target/target_core_device.c
#	drivers/target/target_core_spc.c
diff --cc drivers/target/target_core_device.c
index da5d92ff4163,e8dd6da164b2..000000000000
--- a/drivers/target/target_core_device.c
+++ b/drivers/target/target_core_device.c
@@@ -1163,7 -1183,7 +1163,11 @@@ passthrough_parse_cdb(struct se_cmd *cm
  		}
  		if (cdb[0] == PERSISTENT_RESERVE_OUT) {
  			cmd->execute_cmd = target_scsi3_emulate_pr_out;
++<<<<<<< HEAD
 +			size = (cdb[7] << 8) + cdb[8];
++=======
+ 			size = get_unaligned_be32(&cdb[5]);
++>>>>>>> 388fe6996bf6 (target: Fix cmd size for PR-OUT in passthrough_parse_cdb)
  			return target_cmd_size_check(cmd, size);
  		}
  
diff --cc drivers/target/target_core_spc.c
index d87ab88d6ede,cb0461a10808..000000000000
--- a/drivers/target/target_core_spc.c
+++ b/drivers/target/target_core_spc.c
@@@ -1308,7 -1307,7 +1308,11 @@@ spc_parse_cdb(struct se_cmd *cmd, unsig
  		cmd->execute_cmd = target_scsi3_emulate_pr_in;
  		break;
  	case PERSISTENT_RESERVE_OUT:
++<<<<<<< HEAD
 +		*size = (cdb[7] << 8) + cdb[8];
++=======
+ 		*size = get_unaligned_be32(&cdb[5]);
++>>>>>>> 388fe6996bf6 (target: Fix cmd size for PR-OUT in passthrough_parse_cdb)
  		cmd->execute_cmd = target_scsi3_emulate_pr_out;
  		break;
  	case RELEASE:
* Unmerged path drivers/target/target_core_device.c
* Unmerged path drivers/target/target_core_spc.c
