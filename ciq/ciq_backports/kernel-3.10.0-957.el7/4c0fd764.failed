PCI/portdrv: Remove unnecessary "pcie_ports=auto" parameter

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [pci] portdrv: Remove unnecessary "pcie_ports=auto" parameter (Jarod Wilson) [1495223]
Rebuild_FUZZ: 96.49%
commit-author Bjorn Helgaas <bhelgaas@google.com>
commit 4c0fd7648d880d98add62552cffdf993bde65cf8
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/4c0fd764.failed

The "pcie_ports=auto" parameter set pcie_ports_disabled and pcie_ports_auto
to their compiled-in defaults, so specifying the parameter is the same as
not using it at all.

Remove the "pcie_ports=auto" parameter and update the documentation.

	Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
(cherry picked from commit 4c0fd7648d880d98add62552cffdf993bde65cf8)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	Documentation/kernel-parameters.txt
diff --cc Documentation/kernel-parameters.txt
index a0f1f1428af0,26565794a573..000000000000
--- a/Documentation/kernel-parameters.txt
+++ b/Documentation/kernel-parameters.txt
@@@ -2664,18 -3130,13 +2664,28 @@@ bytes respectively. Such letter suffixe
  		force	Enable ASPM even on devices that claim not to support it.
  			WARNING: Forcing ASPM on may cause system lockups.
  
++<<<<<<< HEAD:Documentation/kernel-parameters.txt
 +	pcie_hp=	[PCIE] PCI Express Hotplug driver options:
 +		nomsi	Do not use MSI for PCI Express Native Hotplug (this
 +			makes all PCIe ports use INTx for hotplug services).
 +
 +	pcie_ports=	[PCIE] PCIe ports handling:
 +		auto	Ask the BIOS whether or not to use native PCIe services
 +			associated with PCIe ports (PME, hot-plug, AER).  Use
 +			them only if that is allowed by the BIOS.
 +		native	Use native PCIe services associated with PCIe ports
 +			unconditionally.
 +		compat	Treat PCIe ports as PCI-to-PCI bridges, disable the PCIe
 +			ports driver.
++=======
+ 	pcie_ports=	[PCIE] PCIe port services handling:
+ 		native	Use native PCIe services (PME, AER, DPC, PCIe hotplug)
+ 			even if the platform doesn't give the OS permission to
+ 			use them.  This may cause conflicts if the platform
+ 			also tries to use these services.
+ 		compat	Disable native PCIe services (PME, AER, DPC, PCIe
+ 			hotplug).
++>>>>>>> 4c0fd7648d88 (PCI/portdrv: Remove unnecessary "pcie_ports=auto" parameter):Documentation/admin-guide/kernel-parameters.txt
  
  	pcie_port_pm=	[PCIE] PCIe port power management handling:
  		off	Disable power management of all PCIe ports
* Unmerged path Documentation/kernel-parameters.txt
diff --git a/drivers/pci/pcie/portdrv_pci.c b/drivers/pci/pcie/portdrv_pci.c
index 870bdb036ac1..58265721b028 100644
--- a/drivers/pci/pcie/portdrv_pci.c
+++ b/drivers/pci/pcie/portdrv_pci.c
@@ -47,9 +47,6 @@ static int __init pcie_port_setup(char *str)
 	} else if (!strncmp(str, "native", 6)) {
 		pcie_ports_disabled = false;
 		pcie_ports_auto = false;
-	} else if (!strncmp(str, "auto", 4)) {
-		pcie_ports_disabled = false;
-		pcie_ports_auto = true;
 	}
 
 	return 1;
