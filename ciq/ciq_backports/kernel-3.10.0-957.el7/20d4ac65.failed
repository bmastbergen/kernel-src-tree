drm/amd/display: Fix BUG_ON during CRTC atomic check update

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Leo (Sunpeng) Li <sunpeng.li@amd.com>
commit 20d4ac659c76034586a3ab79489b0940631a65de
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/20d4ac65.failed

For cases where the CRTC is inactive (DPMS off), where a modeset is not
required, yet the CRTC is still in the atomic state, we should not
attempt to update anything on it.

Previously, we were relying on the modereset_required() helper to check
the above condition. However, the function returns false immediately if
a modeset is not required, ignoring the CRTC's enable/active state
flags. The correct way to filter is by looking at these flags instead.

Fixes: e277adc5a06c "drm/amd/display: Hookup color management functions"
Bugzilla: https://bugs.freedesktop.org/106194

	Signed-off-by: Leo (Sunpeng) Li <sunpeng.li@amd.com>
	Reviewed-by: Harry Wentland <harry.wentland@amd.com>
	Tested-by: Michel DÃ¤nzer <michel.daenzer@amd.com>
	Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
(cherry picked from commit 20d4ac659c76034586a3ab79489b0940631a65de)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c
* Unmerged path drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c
* Unmerged path drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c
