cxgb4: do not fail vf instatiation in slave mode

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Arjun Vynipadath <arjun@chelsio.com>
commit 7cfac881660ac7b7229950e0a942201be63c15d1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/7cfac881.failed

We no longer require a check for cxgb4 to be MASTER
when configuring SRIOV, It was required when we had
module parameter to instantiate vf.

	Signed-off-by: Arjun Vynipadath <arjun@chelsio.com>
	Signed-off-by: Casey Leedom <leedom@chelsio.com>
	Signed-off-by: Ganesh Goudar <ganeshgr@chelsio.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 7cfac881660ac7b7229950e0a942201be63c15d1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
diff --cc drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
index f4141508eca3,130d1eed7993..000000000000
--- a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
+++ b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
@@@ -5032,12 -5276,9 +5032,18 @@@ static int cxgb4_iov_configure(struct p
  	u32 pcie_fw;
  
  	pcie_fw = readl(adap->regs + PCIE_FW_A);
++<<<<<<< HEAD
 +	/* Check if cxgb4 is the MASTER and fw is initialized */
 +	if (!(pcie_fw & PCIE_FW_INIT_F) ||
 +	    !(pcie_fw & PCIE_FW_MASTER_VLD_F) ||
 +	    PCIE_FW_MASTER_G(pcie_fw) != 4) {
 +		dev_warn(&pdev->dev,
 +			 "cxgb4 driver needs to be MASTER to support SRIOV\n");
++=======
+ 	/* Check if fw is initialized */
+ 	if (!(pcie_fw & PCIE_FW_INIT_F)) {
+ 		dev_warn(&pdev->dev, "Device not initialized\n");
++>>>>>>> 7cfac881660a (cxgb4: do not fail vf instatiation in slave mode)
  		return -EOPNOTSUPP;
  	}
  
* Unmerged path drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
