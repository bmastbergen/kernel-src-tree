md/raid5: simplify uninitialization of shrinker

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [md] raid5: simplify uninitialization of shrinker (Nigel Croxon) [1494474]
Rebuild_FUZZ: 96.70%
commit-author Aliaksei Karaliou <akaraliou.dev@gmail.com>
commit 565e0450129647df5112bff3df3ffd02b0c08e32
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/565e0450.failed

Don't use shrinker.nr_deferred to check whether shrinker was
initialized or not. Now this check was integrated into
unregister_shrinker(), so it is safe to call it against
unregistered shrinker.

	Signed-off-by: Aliaksei Karaliou <akaraliou.dev@gmail.com>
	Signed-off-by: Shaohua Li <sh.li@alibaba-inc.com>
(cherry picked from commit 565e0450129647df5112bff3df3ffd02b0c08e32)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/md/raid5.c
diff --cc drivers/md/raid5.c
index 93fd006ab93b,36e050678f5a..000000000000
--- a/drivers/md/raid5.c
+++ b/drivers/md/raid5.c
@@@ -6677,9 -6764,7 +6677,13 @@@ static void free_conf(struct r5conf *co
  
  	log_exit(conf);
  
++<<<<<<< HEAD
 +	if (conf->shrinker.seeks)
 +		unregister_shrinker(&conf->shrinker);
 +
++=======
+ 	unregister_shrinker(&conf->shrinker);
++>>>>>>> 565e04501296 (md/raid5: simplify uninitialization of shrinker)
  	free_thread_groups(conf);
  	shrink_stripes(conf);
  	raid5_free_percpu(conf);
* Unmerged path drivers/md/raid5.c
