mmc: core: change quirks.c to be a header file

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [mmc] core: change quirks.c to be a header file (Gopal Tiwari) [1549495]
Rebuild_FUZZ: 94.25%
commit-author Shawn Lin <shawn.lin@rock-chips.com>
commit 28fc64af63488d701184977481b263f31d856984
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/28fc64af.failed

Rename quirks.c to quirks.h, and include it for
individual C files which need it.

	Signed-off-by: Shawn Lin <shawn.lin@rock-chips.com>
	Signed-off-by: Ulf Hansson <ulf.hansson@linaro.org>
(cherry picked from commit 28fc64af63488d701184977481b263f31d856984)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/mmc/core/Makefile
#	drivers/mmc/core/block.c
#	drivers/mmc/core/card.h
diff --cc drivers/mmc/core/Makefile
index 638911e51d22,7e3ed1aeada2..000000000000
--- a/drivers/mmc/core/Makefile
+++ b/drivers/mmc/core/Makefile
@@@ -7,8 -7,11 +7,16 @@@ mmc_core-y			:= core.o bus.o host.o 
  				   mmc.o mmc_ops.o sd.o sd_ops.o \
  				   sdio.o sdio_ops.o sdio_bus.o \
  				   sdio_cis.o sdio_io.o sdio_irq.o \
++<<<<<<< HEAD
 +				   quirks.o slot-gpio.o
 +
++=======
+ 				   slot-gpio.o
+ mmc_core-$(CONFIG_OF)		+= pwrseq.o
+ obj-$(CONFIG_PWRSEQ_SIMPLE)	+= pwrseq_simple.o
+ obj-$(CONFIG_PWRSEQ_SD8787)	+= pwrseq_sd8787.o
+ obj-$(CONFIG_PWRSEQ_EMMC)	+= pwrseq_emmc.o
++>>>>>>> 28fc64af6348 (mmc: core: change quirks.c to be a header file)
  mmc_core-$(CONFIG_DEBUG_FS)	+= debugfs.o
  obj-$(CONFIG_MMC_BLOCK)		+= mmc_block.o
  mmc_block-objs			:= block.o queue.o
diff --cc drivers/mmc/core/block.c
index ce6b35d943ba,6f3a5ff85590..000000000000
--- a/drivers/mmc/core/block.c
+++ b/drivers/mmc/core/block.c
@@@ -47,6 -47,13 +47,16 @@@
  
  #include "queue.h"
  #include "block.h"
++<<<<<<< HEAD
++=======
+ #include "core.h"
+ #include "card.h"
+ #include "host.h"
+ #include "bus.h"
+ #include "mmc_ops.h"
+ #include "quirks.h"
+ #include "sd_ops.h"
++>>>>>>> 28fc64af6348 (mmc: core: change quirks.c to be a header file)
  
  MODULE_ALIAS("mmc:block");
  #ifdef MODULE_PARAM_PREFIX
* Unmerged path drivers/mmc/core/card.h
* Unmerged path drivers/mmc/core/Makefile
* Unmerged path drivers/mmc/core/block.c
* Unmerged path drivers/mmc/core/card.h
diff --git a/drivers/mmc/core/mmc.c b/drivers/mmc/core/mmc.c
index e3a6dd0fe5aa..400d4de05981 100644
--- a/drivers/mmc/core/mmc.c
+++ b/drivers/mmc/core/mmc.c
@@ -24,6 +24,7 @@
 #include "host.h"
 #include "bus.h"
 #include "mmc_ops.h"
+#include "quirks.h"
 #include "sd_ops.h"
 
 #define DEFAULT_CMD6_TIMEOUT_MS	500
diff --git a/drivers/mmc/core/quirks.c b/drivers/mmc/core/quirks.h
similarity index 90%
rename from drivers/mmc/core/quirks.c
rename to drivers/mmc/core/quirks.h
index ca9cade317c7..8d7266d1997a 100644
--- a/drivers/mmc/core/quirks.c
+++ b/drivers/mmc/core/quirks.h
@@ -9,10 +9,6 @@
  *
  */
 
-#include <linux/types.h>
-#include <linux/kernel.h>
-#include <linux/export.h>
-#include <linux/mmc/card.h>
 #include <linux/mmc/sdio_ids.h>
 
 #ifndef SDIO_VENDOR_ID_TI
@@ -51,7 +47,8 @@ static const struct mmc_fixup mmc_fixup_methods[] = {
 	END_FIXUP
 };
 
-void mmc_fixup_device(struct mmc_card *card, const struct mmc_fixup *table)
+static inline void mmc_fixup_device(struct mmc_card *card,
+				    const struct mmc_fixup *table)
 {
 	const struct mmc_fixup *f;
 	u64 rev = cid_rev_card(card);
@@ -80,4 +77,3 @@ void mmc_fixup_device(struct mmc_card *card, const struct mmc_fixup *table)
 		}
 	}
 }
-EXPORT_SYMBOL(mmc_fixup_device);
diff --git a/drivers/mmc/core/sdio.c b/drivers/mmc/core/sdio.c
index 53fe7083f6b0..231aa01bf388 100644
--- a/drivers/mmc/core/sdio.c
+++ b/drivers/mmc/core/sdio.c
@@ -21,6 +21,7 @@
 
 #include "core.h"
 #include "bus.h"
+#include "quirks.h"
 #include "sd.h"
 #include "sdio_bus.h"
 #include "mmc_ops.h"
