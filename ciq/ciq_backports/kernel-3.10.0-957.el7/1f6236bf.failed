genirq: Add irq_get_trigger_type() to get IRQ flags

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Javier Martinez Canillas <javier.martinez@collabora.co.uk>
commit 1f6236bfd7c38d5f9f7648fae7215e65274b9e63
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/1f6236bf.failed

Drivers that want to get the trigger edge/level type flags for a given
interrupt have to call irq_get_irq_data(irq) to get the struct
irq_data and then irqd_get_trigger_type(irq_data) to obtain the IRQ
flags.

This is not only error prone but also unnecessary exposes the struct
irq_data to callers.

It's better to have an irq_get_trigger_type() function to obtain the
edge/level flags for an IRQ.

	Signed-off-by: Javier Martinez Canillas <javier.martinez@collabora.co.uk>
	Acked-by: Grant Likely <grant.likely@linaro.org>
	Cc: Linus Walleij <linus.walleij@linaro.org>
	Cc: Samuel Ortiz <sameo@linux.intel.com>
	Cc: Jason Cooper <jason@lakedaemon.net>
	Cc: Andrew Lunn <andrew@lunn.ch>
	Cc: Russell King <linux@arm.linux.org.uk>
	Cc: Ralf Baechle <ralf@linux-mips.org>
	Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Cc: linux-arm-kernel@lists.infradead.org
	Cc: linux-mips@linux-mips.org
Link: http://lkml.kernel.org/r/1371228049-27080-2-git-send-email-javier.martinez@collabora.co.uk
	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
(cherry picked from commit 1f6236bfd7c38d5f9f7648fae7215e65274b9e63)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/linux/irq.h
diff --cc include/linux/irq.h
index ec1c9e3c8eac,f04d3ba335cb..000000000000
--- a/include/linux/irq.h
+++ b/include/linux/irq.h
@@@ -590,10 -584,14 +590,18 @@@ static inline struct msi_desc *irq_data
  	return d->msi_desc;
  }
  
++<<<<<<< HEAD
 +unsigned int arch_dynirq_lower_bound(unsigned int from);
++=======
+ static inline u32 irq_get_trigger_type(unsigned int irq)
+ {
+ 	struct irq_data *d = irq_get_irq_data(irq);
+ 	return d ? irqd_get_trigger_type(d) : 0;
+ }
++>>>>>>> 1f6236bfd7c3 (genirq: Add irq_get_trigger_type() to get IRQ flags)
  
  int __irq_alloc_descs(int irq, unsigned int from, unsigned int cnt, int node,
 -		struct module *owner);
 +		      struct module *owner, const struct cpumask *affinity);
  
  /* use macros to avoid needing export.h for THIS_MODULE */
  #define irq_alloc_descs(irq, from, cnt, node)	\
* Unmerged path include/linux/irq.h
