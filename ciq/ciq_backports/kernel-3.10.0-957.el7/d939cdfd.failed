md/linear: shutup lockdep warnning

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [md] linear: shutup lockdep warnning (Nigel Croxon) [1494474]
Rebuild_FUZZ: 95.38%
commit-author Shaohua Li <shli@fb.com>
commit d939cdfde34f50b95254b375f498447c82190b3e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/d939cdfd.failed

Commit 03a9e24(md linear: fix a race between linear_add() and
linear_congested()) introduces the warnning.

	Acked-by: Coly Li <colyli@suse.de>
	Signed-off-by: Shaohua Li <shli@fb.com>
(cherry picked from commit d939cdfde34f50b95254b375f498447c82190b3e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/md/linear.c
diff --cc drivers/md/linear.c
index 2d3f4228a31e,5b06b0ddf7a3..000000000000
--- a/drivers/md/linear.c
+++ b/drivers/md/linear.c
@@@ -237,10 -217,19 +237,15 @@@ static int linear_add(struct mddev *mdd
  	if (!newconf)
  		return -ENOMEM;
  
 -	/* newconf->raid_disks already keeps a copy of * the increased
 -	 * value of mddev->raid_disks, WARN_ONCE() is just used to make
 -	 * sure of this. It is possible that oldconf is still referenced
 -	 * in linear_congested(), therefore kfree_rcu() is used to free
 -	 * oldconf until no one uses it anymore.
 -	 */
  	mddev_suspend(mddev);
++<<<<<<< HEAD
 +	oldconf = mddev->private;
++=======
+ 	oldconf = rcu_dereference_protected(mddev->private,
+ 			lockdep_is_held(&mddev->reconfig_mutex));
++>>>>>>> d939cdfde34f (md/linear: shutup lockdep warnning)
  	mddev->raid_disks++;
 -	WARN_ONCE(mddev->raid_disks != newconf->raid_disks,
 -		"copied raid_disks doesn't match mddev->raid_disks");
 -	rcu_assign_pointer(mddev->private, newconf);
 +	mddev->private = newconf;
  	md_set_array_sectors(mddev, linear_size(mddev, 0, 0));
  	set_capacity(mddev->gendisk, mddev->array_sectors);
  	mddev_resume(mddev);
* Unmerged path drivers/md/linear.c
