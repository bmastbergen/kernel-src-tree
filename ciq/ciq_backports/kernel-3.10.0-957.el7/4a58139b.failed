bnxt: Add PCIe device IDs for bcm58802/bcm58808

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Ray Jui <ray.jui@broadcom.com>
commit 4a58139b8493624c6c6223b58a9e70ebbdf56338
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/4a58139b.failed

Add PCIe device ID for bcm58802 and bcm58808. Also add chip number
update to declare bcm588xx as chip class phase 4 and later

	Signed-off-by: Ray Jui <ray.jui@broadcom.com>
	Signed-off-by: Michael Chan <michael.chan@broadcom.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 4a58139b8493624c6c6223b58a9e70ebbdf56338)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/broadcom/bnxt/bnxt.c
diff --cc drivers/net/ethernet/broadcom/bnxt/bnxt.c
index 44d1856b10e5,500681da3c16..000000000000
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt.c
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt.c
@@@ -115,36 -114,38 +117,71 @@@ enum board_idx 
  static const struct {
  	char *name;
  } board_info[] = {
++<<<<<<< HEAD
 +	[BCM57301] = { "Broadcom BCM57301 NetXtreme-C 10Gb Ethernet" },
 +	[BCM57302] = { "Broadcom BCM57302 NetXtreme-C 10Gb/25Gb Ethernet" },
 +	[BCM57304] = { "Broadcom BCM57304 NetXtreme-C 10Gb/25Gb/40Gb/50Gb Ethernet" },
 +	[BCM57417_NPAR] = { "Broadcom BCM57417 NetXtreme-E Ethernet Partition" },
 +	[BCM58700] = { "Broadcom BCM58700 Nitro 1Gb/2.5Gb/10Gb Ethernet" },
 +	[BCM57311] = { "Broadcom BCM57311 NetXtreme-C 10Gb Ethernet" },
 +	[BCM57312] = { "Broadcom BCM57312 NetXtreme-C 10Gb/25Gb Ethernet" },
 +	[BCM57402] = { "Broadcom BCM57402 NetXtreme-E 10Gb Ethernet" },
 +	[BCM57404] = { "Broadcom BCM57404 NetXtreme-E 10Gb/25Gb Ethernet" },
 +	[BCM57406] = { "Broadcom BCM57406 NetXtreme-E 10GBase-T Ethernet" },
 +	[BCM57402_NPAR] = { "Broadcom BCM57402 NetXtreme-E Ethernet Partition" },
 +	[BCM57407] = { "Broadcom BCM57407 NetXtreme-E 10GBase-T Ethernet" },
 +	[BCM57412] = { "Broadcom BCM57412 NetXtreme-E 10Gb Ethernet" },
 +	[BCM57414] = { "Broadcom BCM57414 NetXtreme-E 10Gb/25Gb Ethernet" },
 +	[BCM57416] = { "Broadcom BCM57416 NetXtreme-E 10GBase-T Ethernet" },
 +	[BCM57417] = { "Broadcom BCM57417 NetXtreme-E 10GBase-T Ethernet" },
 +	[BCM57412_NPAR] = { "Broadcom BCM57412 NetXtreme-E Ethernet Partition" },
 +	[BCM57314] = { "Broadcom BCM57314 NetXtreme-C 10Gb/25Gb/40Gb/50Gb Ethernet" },
 +	[BCM57417_SFP] = { "Broadcom BCM57417 NetXtreme-E 10Gb/25Gb Ethernet" },
 +	[BCM57416_SFP] = { "Broadcom BCM57416 NetXtreme-E 10Gb Ethernet" },
 +	[BCM57404_NPAR] = { "Broadcom BCM57404 NetXtreme-E Ethernet Partition" },
 +	[BCM57406_NPAR] = { "Broadcom BCM57406 NetXtreme-E Ethernet Partition" },
 +	[BCM57407_SFP] = { "Broadcom BCM57407 NetXtreme-E 25Gb Ethernet" },
 +	[BCM57407_NPAR] = { "Broadcom BCM57407 NetXtreme-E Ethernet Partition" },
 +	[BCM57414_NPAR] = { "Broadcom BCM57414 NetXtreme-E Ethernet Partition" },
 +	[BCM57416_NPAR] = { "Broadcom BCM57416 NetXtreme-E Ethernet Partition" },
 +	[BCM57452] = { "Broadcom BCM57452 NetXtreme-E 10Gb/25Gb/40Gb/50Gb Ethernet" },
 +	[BCM57454] = { "Broadcom BCM57454 NetXtreme-E 10Gb/25Gb/40Gb/50Gb/100Gb Ethernet" },
 +	[NETXTREME_E_VF] = { "Broadcom NetXtreme-E Ethernet Virtual Function" },
 +	[NETXTREME_C_VF] = { "Broadcom NetXtreme-C Ethernet Virtual Function" },
++=======
+ 	{ "Broadcom BCM57301 NetXtreme-C 10Gb Ethernet" },
+ 	{ "Broadcom BCM57302 NetXtreme-C 10Gb/25Gb Ethernet" },
+ 	{ "Broadcom BCM57304 NetXtreme-C 10Gb/25Gb/40Gb/50Gb Ethernet" },
+ 	{ "Broadcom BCM57417 NetXtreme-E Ethernet Partition" },
+ 	{ "Broadcom BCM58700 Nitro 1Gb/2.5Gb/10Gb Ethernet" },
+ 	{ "Broadcom BCM57311 NetXtreme-C 10Gb Ethernet" },
+ 	{ "Broadcom BCM57312 NetXtreme-C 10Gb/25Gb Ethernet" },
+ 	{ "Broadcom BCM57402 NetXtreme-E 10Gb Ethernet" },
+ 	{ "Broadcom BCM57404 NetXtreme-E 10Gb/25Gb Ethernet" },
+ 	{ "Broadcom BCM57406 NetXtreme-E 10GBase-T Ethernet" },
+ 	{ "Broadcom BCM57402 NetXtreme-E Ethernet Partition" },
+ 	{ "Broadcom BCM57407 NetXtreme-E 10GBase-T Ethernet" },
+ 	{ "Broadcom BCM57412 NetXtreme-E 10Gb Ethernet" },
+ 	{ "Broadcom BCM57414 NetXtreme-E 10Gb/25Gb Ethernet" },
+ 	{ "Broadcom BCM57416 NetXtreme-E 10GBase-T Ethernet" },
+ 	{ "Broadcom BCM57417 NetXtreme-E 10GBase-T Ethernet" },
+ 	{ "Broadcom BCM57412 NetXtreme-E Ethernet Partition" },
+ 	{ "Broadcom BCM57314 NetXtreme-C 10Gb/25Gb/40Gb/50Gb Ethernet" },
+ 	{ "Broadcom BCM57417 NetXtreme-E 10Gb/25Gb Ethernet" },
+ 	{ "Broadcom BCM57416 NetXtreme-E 10Gb Ethernet" },
+ 	{ "Broadcom BCM57404 NetXtreme-E Ethernet Partition" },
+ 	{ "Broadcom BCM57406 NetXtreme-E Ethernet Partition" },
+ 	{ "Broadcom BCM57407 NetXtreme-E 25Gb Ethernet" },
+ 	{ "Broadcom BCM57407 NetXtreme-E Ethernet Partition" },
+ 	{ "Broadcom BCM57414 NetXtreme-E Ethernet Partition" },
+ 	{ "Broadcom BCM57416 NetXtreme-E Ethernet Partition" },
+ 	{ "Broadcom BCM57452 NetXtreme-E 10Gb/25Gb/40Gb/50Gb Ethernet" },
+ 	{ "Broadcom BCM57454 NetXtreme-E 10Gb/25Gb/40Gb/50Gb/100Gb Ethernet" },
+ 	{ "Broadcom BCM58802 NetXtreme-S 10Gb/25Gb/40Gb/50Gb Ethernet" },
+ 	{ "Broadcom BCM58808 NetXtreme-S 10Gb/25Gb/40Gb/50Gb/100Gb Ethernet" },
+ 	{ "Broadcom NetXtreme-E Ethernet Virtual Function" },
+ 	{ "Broadcom NetXtreme-C Ethernet Virtual Function" },
++>>>>>>> 4a58139b8493 (bnxt: Add PCIe device IDs for bcm58802/bcm58808)
  };
  
  static const struct pci_device_id bnxt_pci_tbl[] = {
* Unmerged path drivers/net/ethernet/broadcom/bnxt/bnxt.c
diff --git a/drivers/net/ethernet/broadcom/bnxt/bnxt.h b/drivers/net/ethernet/broadcom/bnxt/bnxt.h
index 126eea321718..de6da330d3dc 100644
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt.h
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt.h
@@ -1075,6 +1075,9 @@ struct bnxt {
 
 #define CHIP_NUM_5745X		0xd730
 
+#define CHIP_NUM_58802		0xd802
+#define CHIP_NUM_58808		0xd808
+
 #define BNXT_CHIP_NUM_5730X(chip_num)		\
 	((chip_num) >= CHIP_NUM_57301 &&	\
 	 (chip_num) <= CHIP_NUM_57304)
@@ -1106,6 +1109,10 @@ struct bnxt {
 #define BNXT_CHIP_NUM_57X1X(chip_num)		\
 	(BNXT_CHIP_NUM_5731X(chip_num) || BNXT_CHIP_NUM_5741X(chip_num))
 
+#define BNXT_CHIP_NUM_588XX(chip_num)		\
+	((chip_num) == CHIP_NUM_58802 ||	\
+	 (chip_num) == CHIP_NUM_58808)
+
 	struct net_device	*dev;
 	struct pci_dev		*pdev;
 
@@ -1166,6 +1173,7 @@ struct bnxt {
 #define BNXT_CHIP_P4_PLUS(bp)			\
 	(BNXT_CHIP_NUM_57X1X((bp)->chip_num) ||	\
 	 BNXT_CHIP_NUM_5745X((bp)->chip_num) ||	\
+	 BNXT_CHIP_NUM_588XX((bp)->chip_num) ||	\
 	 (BNXT_CHIP_NUM_58700((bp)->chip_num) &&	\
 	  !BNXT_CHIP_TYPE_NITRO_A0(bp)))
 
