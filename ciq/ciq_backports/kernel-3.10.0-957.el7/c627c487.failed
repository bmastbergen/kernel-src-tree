nvme: factor get log into a helper

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [nvme] factor get log into a helper (David Milburn) [1519689]
Rebuild_FUZZ: 90.32%
commit-author Keith Busch <keith.busch@intel.com>
commit c627c487ec727350c6aaa1cf217b666099e83ee2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/c627c487.failed

And fix the warning on a successful firmware log.

	Reviewed-by: Javier Gonz√°lez <javier@cnexlabs.com>
	Reviewed-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Keith Busch <keith.busch@intel.com>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Jens Axboe <axboe@kernel.dk>
(cherry picked from commit c627c487ec727350c6aaa1cf217b666099e83ee2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/nvme/host/core.c
diff --cc drivers/nvme/host/core.c
index 0864460d67b9,90b6375a9da5..000000000000
--- a/drivers/nvme/host/core.c
+++ b/drivers/nvme/host/core.c
@@@ -2404,11 -2597,7 +2415,15 @@@ static void nvme_get_fw_slot_info(struc
  	if (!log)
  		return;
  
++<<<<<<< HEAD
 +	c.common.opcode = nvme_admin_get_log_page;
 +	c.common.nsid = cpu_to_le32(0xffffffff);
 +	c.common.cdw10[0] = nvme_get_log_dw10(NVME_LOG_FW_SLOT, sizeof(*log));
 +
 +	if (!nvme_submit_sync_cmd(ctrl->admin_q, &c, log, sizeof(*log)))
++=======
+ 	if (nvme_get_log(ctrl, NVME_LOG_FW_SLOT, log, sizeof(*log)))
++>>>>>>> c627c487ec72 (nvme: factor get log into a helper)
  		dev_warn(ctrl->device,
  				"Get FW SLOT INFO log error\n");
  	kfree(log);
* Unmerged path drivers/nvme/host/core.c
