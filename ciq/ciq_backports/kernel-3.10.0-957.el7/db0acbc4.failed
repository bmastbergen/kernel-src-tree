IB: INFINIBAND should depend on HAS_DMA

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Geert Uytterhoeven <geert@linux-m68k.org>
commit db0acbc475f06c775682ba969ab338e1efa2ae96
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/db0acbc4.failed

If NO_DMA=y:

    ERROR: "bad_dma_ops" [net/sunrpc/xprtrdma/rpcrdma.ko] undefined!
    ERROR: "bad_dma_ops" [net/smc/smc.ko] undefined!
    ERROR: "bad_dma_ops" [net/rds/rds_rdma.ko] undefined!
    ERROR: "bad_dma_ops" [net/9p/9pnet_rdma.ko] undefined!
    ERROR: "bad_dma_ops" [drivers/nvme/target/nvmet-rdma.ko] undefined!
    ERROR: "bad_dma_ops" [drivers/nvme/host/nvme-rdma.ko] undefined!
    ERROR: "bad_dma_ops" [drivers/infiniband/ulp/srpt/ib_srpt.ko] undefined!
    ERROR: "bad_dma_ops" [drivers/infiniband/ulp/srp/ib_srp.ko] undefined!
    ERROR: "bad_dma_ops" [drivers/infiniband/ulp/isert/ib_isert.ko] undefined!
    ERROR: "bad_dma_ops" [drivers/infiniband/ulp/iser/ib_iser.ko] undefined!
    ERROR: "bad_dma_ops" [drivers/infiniband/ulp/ipoib/ib_ipoib.ko] undefined!
    ERROR: "bad_dma_ops" [drivers/infiniband/core/ib_core.ko] undefined!

Before, this was handled implicitly by the dependency on PCI.
Add an explicit dependency on HAS_DMA to fix this.

Fixes: 931bc0d91639f8fb ("IB: Move PCI dependency from root KConfig to HW's KConfigs")
	Signed-off-by: Geert Uytterhoeven <geert@linux-m68k.org>
	Reviewed-by: Leon Romanovsky <leonro@mellanox.com>
	Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
(cherry picked from commit db0acbc475f06c775682ba969ab338e1efa2ae96)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/Kconfig
diff --cc drivers/infiniband/Kconfig
index 7b4d18e6a981,cbf186522016..000000000000
--- a/drivers/infiniband/Kconfig
+++ b/drivers/infiniband/Kconfig
@@@ -1,7 -1,6 +1,11 @@@
  menuconfig INFINIBAND
  	tristate "InfiniBand support"
++<<<<<<< HEAD
 +	depends on PCI || BROKEN
 +	depends on HAS_IOMEM
++=======
+ 	depends on HAS_IOMEM && HAS_DMA
++>>>>>>> db0acbc475f0 (IB: INFINIBAND should depend on HAS_DMA)
  	depends on NET
  	depends on INET
  	depends on m || IPV6 != m
* Unmerged path drivers/infiniband/Kconfig
