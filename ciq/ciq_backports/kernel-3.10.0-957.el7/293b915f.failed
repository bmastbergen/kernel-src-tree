Input: trackpoint - assume 3 buttons when buttons detection fails

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [input] trackpoint - assume 3 buttons when buttons detection fails (Benjamin Tissoires) [1554926]
Rebuild_FUZZ: 94.31%
commit-author Oscar Campos <oscar.campos@member.fsf.org>
commit 293b915fd9bebf33cdc906516fb28d54649a25ac
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/293b915f.failed

Trackpoint buttons detection fails on ThinkPad 570 and 470 series,
this makes the middle button of the trackpoint to not being recogized.
As I don't believe there is any trackpoint with less than 3 buttons this
patch just assumes three buttons when the extended button information
read fails.

	Signed-off-by: Oscar Campos <oscar.campos@member.fsf.org>
	Acked-by: Peter Hutterer <peter.hutterer@who-t.net>
	Signed-off-by: Dmitry Torokhov <dmitry.torokhov@gmail.com>
(cherry picked from commit 293b915fd9bebf33cdc906516fb28d54649a25ac)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/input/mouse/trackpoint.c
diff --cc drivers/input/mouse/trackpoint.c
index 30c8b6998808,20b5b21c1bba..000000000000
--- a/drivers/input/mouse/trackpoint.c
+++ b/drivers/input/mouse/trackpoint.c
@@@ -375,9 -379,9 +375,15 @@@ int trackpoint_detect(struct psmouse *p
  	if (!set_properties)
  		return 0;
  
++<<<<<<< HEAD
 +	if (trackpoint_read(&psmouse->ps2dev, TP_EXT_BTN, &button_info)) {
 +		psmouse_warn(psmouse, "failed to get extended button data\n");
 +		button_info = 0;
++=======
+ 	if (trackpoint_read(ps2dev, TP_EXT_BTN, &button_info)) {
+ 		psmouse_warn(psmouse, "failed to get extended button data, assuming 3 buttons\n");
+ 		button_info = 0x33;
++>>>>>>> 293b915fd9be (Input: trackpoint - assume 3 buttons when buttons detection fails)
  	}
  
  	psmouse->private = kzalloc(sizeof(struct trackpoint_data), GFP_KERNEL);
* Unmerged path drivers/input/mouse/trackpoint.c
