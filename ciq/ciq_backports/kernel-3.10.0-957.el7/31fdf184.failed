nvme-rdma: reuse configure/destroy_admin_queue

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Sagi Grimberg <sagi@grimberg.me>
commit 31fdf18401703df246e20fc0382ed3594e6cf8d8
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/31fdf184.failed

No need to open-code it.

	Signed-off-by: Sagi Grimberg <sagi@grimberg.me>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
(cherry picked from commit 31fdf18401703df246e20fc0382ed3594e6cf8d8)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/nvme/host/rdma.c
diff --cc drivers/nvme/host/rdma.c
index 6d8e34242c5f,cdf14226bf07..000000000000
--- a/drivers/nvme/host/rdma.c
+++ b/drivers/nvme/host/rdma.c
@@@ -739,23 -857,8 +739,28 @@@ static void nvme_rdma_reconnect_ctrl_wo
  			goto requeue;
  	}
  
++<<<<<<< HEAD
 +	nvme_rdma_stop_and_free_queue(&ctrl->queues[0]);
 +
 +	ret = blk_mq_reinit_tagset(&ctrl->admin_tag_set);
 +	if (ret)
 +		goto requeue;
 +
 +	ret = nvme_rdma_init_queue(ctrl, 0, NVME_AQ_DEPTH);
 +	if (ret)
 +		goto requeue;
 +
 +	ret = nvmf_connect_admin_queue(&ctrl->ctrl);
 +	if (ret)
 +		goto requeue;
 +
 +	set_bit(NVME_RDMA_Q_LIVE, &ctrl->queues[0].flags);
 +
 +	ret = nvme_enable_ctrl(&ctrl->ctrl, ctrl->ctrl.cap);
++=======
+ 	nvme_rdma_destroy_admin_queue(ctrl, false);
+ 	ret = nvme_rdma_configure_admin_queue(ctrl, false);
++>>>>>>> 31fdf1840170 (nvme-rdma: reuse configure/destroy_admin_queue)
  	if (ret)
  		goto requeue;
  
* Unmerged path drivers/nvme/host/rdma.c
