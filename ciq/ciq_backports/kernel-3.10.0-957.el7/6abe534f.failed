Input: synaptics-rmi4 - unmask F03 interrupts when port is opened

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [input] synaptics-rmi4 - unmask F03 interrupts when port is opened (Benjamin Tissoires) [1554926]
Rebuild_FUZZ: 94.31%
commit-author Dmitry Torokhov <dmitry.torokhov@gmail.com>
commit 6abe534f0776d2437c8302f58d8eb5abd483e926
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/6abe534f.failed

Currently we register the pass-through serio port when we probe the F03 RMI
function, and then, in sensor configure phase, we unmask interrupts.
Unfortunately this is too late, as other drivers are free probe devices
attached to the serio port as soon as it is probed. Because interrupts are
masked, the IO times out, which may result in not being able to detect
trackpoints on the pass-through port.

To fix the issue we implement open() and close() methods for the
pass-through serio port and unmask interrupts from there. We also move
creation of the pass-through port form probe to configure stage, as RMI
driver does not enable transport interrupt until all functions are probed
(we should change this, but this is a separate topic).

We also try to clear the pending data before unmasking interrupts, because
some devices like to spam the system with multiple 0xaa 0x00 announcements,
which may interfere with us trying to query ID of the device.

Fixes: c5e8848fc98e ("Input: synaptics-rmi4 - add support for F03")
	Cc: stable@vger.kernel.org
	Reviewed-by: Lyude Paul <lyude@redhat.com>
	Signed-off-by: Dmitry Torokhov <dmitry.torokhov@gmail.com>
(cherry picked from commit 6abe534f0776d2437c8302f58d8eb5abd483e926)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/input/rmi4/rmi_f03.c
* Unmerged path drivers/input/rmi4/rmi_f03.c
* Unmerged path drivers/input/rmi4/rmi_f03.c
