perf trace: Fix an exit code of trace__symbols_init

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Andrei Vagin <avagin@openvz.org>
commit cbd5c1787bab4643e5959522275b46de94eba5ac
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/cbd5c178.failed

Currently if trace_event__register_resolver() fails, we return -errno,
but we can't be sure that errno isn't zero in this case.

	Signed-off-by: Andrei Vagin <avagin@openvz.org>
	Reviewed-by: Jiri Olsa <jolsa@redhat.com>
	Cc: Alexander Shishkin <alexander.shishkin@linux.intel.com>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Peter Zijlstra <peterz@infradead.org>
	Cc: Vasily Averin <vvs@virtuozzo.com>
Link: http://lkml.kernel.org/r/20171108002246.8924-2-avagin@openvz.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit cbd5c1787bab4643e5959522275b46de94eba5ac)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/builtin-trace.c
diff --cc tools/perf/builtin-trace.c
index 18490d4c3f3e,84debdbad327..000000000000
--- a/tools/perf/builtin-trace.c
+++ b/tools/perf/builtin-trace.c
@@@ -1215,7 -1158,8 +1216,12 @@@ static int trace__symbols_init(struct t
  
  	err = __machine__synthesize_threads(trace->host, &trace->tool, &trace->opts.target,
  					    evlist->threads, trace__tool_process, false,
++<<<<<<< HEAD
 +					    trace->opts.proc_map_timeout);
++=======
+ 					    trace->opts.proc_map_timeout, 1);
+ out:
++>>>>>>> cbd5c1787bab (perf trace: Fix an exit code of trace__symbols_init)
  	if (err)
  		symbol__exit();
  
* Unmerged path tools/perf/builtin-trace.c
