drm/nouveau/gr/gf100-: virtualise init_shader_exceptions

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Ben Skeggs <bskeggs@redhat.com>
commit 4615e9b4387f142e4ff495dc61525249a6926e91
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/4615e9b4.failed

	Signed-off-by: Ben Skeggs <bskeggs@redhat.com>
(cherry picked from commit 4615e9b4387f142e4ff495dc61525249a6926e91)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.c
#	drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.h
#	drivers/gpu/drm/nouveau/nvkm/engine/gr/gf104.c
#	drivers/gpu/drm/nouveau/nvkm/engine/gr/gf108.c
#	drivers/gpu/drm/nouveau/nvkm/engine/gr/gf110.c
#	drivers/gpu/drm/nouveau/nvkm/engine/gr/gf117.c
#	drivers/gpu/drm/nouveau/nvkm/engine/gr/gf119.c
#	drivers/gpu/drm/nouveau/nvkm/engine/gr/gk104.c
#	drivers/gpu/drm/nouveau/nvkm/engine/gr/gk110.c
#	drivers/gpu/drm/nouveau/nvkm/engine/gr/gk110b.c
#	drivers/gpu/drm/nouveau/nvkm/engine/gr/gk208.c
#	drivers/gpu/drm/nouveau/nvkm/engine/gr/gm107.c
#	drivers/gpu/drm/nouveau/nvkm/engine/gr/gm200.c
#	drivers/gpu/drm/nouveau/nvkm/engine/gr/gp100.c
#	drivers/gpu/drm/nouveau/nvkm/engine/gr/gp102.c
#	drivers/gpu/drm/nouveau/nvkm/engine/gr/gp107.c
#	drivers/gpu/drm/nouveau/nvkm/engine/gr/gp10b.c
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.c
index 1920743db345,071b3c1a93ab..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.c
@@@ -1903,8 -1914,57 +1903,62 @@@ gf100_gr_new_(const struct gf100_gr_fun
  	return 0;
  }
  
++<<<<<<< HEAD
 +int
 +gf100_gr_init(struct gf100_gr *gr)
++=======
+ void
+ gf100_gr_init_shader_exceptions(struct gf100_gr *gr, int gpc, int tpc)
+ {
+ 	struct nvkm_device *device = gr->base.engine.subdev.device;
+ 	nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x644), 0x001ffffe);
+ 	nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x64c), 0x0000000f);
+ }
+ 
+ void
+ gf100_gr_init_tex_hww_esr(struct gf100_gr *gr, int gpc, int tpc)
+ {
+ 	struct nvkm_device *device = gr->base.engine.subdev.device;
+ 	nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x224), 0xc0000000);
+ }
+ 
+ void
+ gf100_gr_init_419eb4(struct gf100_gr *gr)
+ {
+ 	struct nvkm_device *device = gr->base.engine.subdev.device;
+ 	nvkm_mask(device, 0x419eb4, 0x00001000, 0x00001000);
+ }
+ 
+ void
+ gf100_gr_init_419cc0(struct gf100_gr *gr)
+ {
+ 	struct nvkm_device *device = gr->base.engine.subdev.device;
+ 	int gpc, tpc;
+ 
+ 	nvkm_mask(device, 0x419cc0, 0x00000008, 0x00000008);
+ 
+ 	for (gpc = 0; gpc < gr->gpc_nr; gpc++) {
+ 		for (tpc = 0; tpc < gr->tpc_nr[gpc]; tpc++)
+ 			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x48c), 0xc0000000);
+ 	}
+ }
+ 
+ void
+ gf100_gr_init_40601c(struct gf100_gr *gr)
+ {
+ 	nvkm_wr32(gr->base.engine.subdev.device, 0x40601c, 0xc0000000);
+ }
+ 
+ void
+ gf100_gr_init_fecs_exceptions(struct gf100_gr *gr)
+ {
+ 	const u32 data = gr->firmware ? 0x000e0000 : 0x000e0001;
+ 	nvkm_wr32(gr->base.engine.subdev.device, 0x409c24, data);
+ }
+ 
+ void
+ gf100_gr_init_gpc_mmu(struct gf100_gr *gr)
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  {
  	struct nvkm_device *device = gr->base.engine.subdev.device;
  	struct nvkm_fb *fb = device->fb;
@@@ -1989,11 -2097,12 +2043,17 @@@
  		for (tpc = 0; tpc < gr->tpc_nr[gpc]; tpc++) {
  			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x508), 0xffffffff);
  			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x50c), 0xffffffff);
 -			if (gr->func->init_tex_hww_esr)
 -				gr->func->init_tex_hww_esr(gr, gpc, tpc);
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x224), 0xc0000000);
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x48c), 0xc0000000);
  			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x084), 0xc0000000);
++<<<<<<< HEAD
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x644), 0x001ffffe);
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x64c), 0x0000000f);
++=======
+ 			if (gr->func->init_504430)
+ 				gr->func->init_504430(gr, gpc, tpc);
+ 			gr->func->init_shader_exceptions(gr, gpc, tpc);
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  		}
  		nvkm_wr32(device, GPC_UNIT(gpc, 0x2c90), 0xffffffff);
  		nvkm_wr32(device, GPC_UNIT(gpc, 0x2c94), 0xffffffff);
@@@ -2043,6 -2152,16 +2103,19 @@@ gf100_gr_gpccs_ucode = 
  static const struct gf100_gr_func
  gf100_gr = {
  	.init = gf100_gr_init,
++<<<<<<< HEAD
++=======
+ 	.init_gpc_mmu = gf100_gr_init_gpc_mmu,
+ 	.init_vsc_stream_master = gf100_gr_init_vsc_stream_master,
+ 	.init_zcull = gf100_gr_init_zcull,
+ 	.init_num_active_ltcs = gf100_gr_init_num_active_ltcs,
+ 	.init_fecs_exceptions = gf100_gr_init_fecs_exceptions,
+ 	.init_40601c = gf100_gr_init_40601c,
+ 	.init_419cc0 = gf100_gr_init_419cc0,
+ 	.init_419eb4 = gf100_gr_init_419eb4,
+ 	.init_tex_hww_esr = gf100_gr_init_tex_hww_esr,
+ 	.init_shader_exceptions = gf100_gr_init_shader_exceptions,
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  	.mmio = gf100_gr_pack_mmio,
  	.fecs.ucode = &gf100_gr_fecs_ucode,
  	.gpccs.ucode = &gf100_gr_gpccs_ucode,
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.h
index a36e45a4a635,02505c020f6a..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.h
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.h
@@@ -122,10 -122,25 +122,16 @@@ struct gf100_gr_func 
  	void (*dtor)(struct gf100_gr *);
  	int (*init)(struct gf100_gr *);
  	void (*init_gpc_mmu)(struct gf100_gr *);
 -	void (*init_r405a14)(struct gf100_gr *);
 -	void (*init_bios)(struct gf100_gr *);
 -	void (*init_vsc_stream_master)(struct gf100_gr *);
 -	void (*init_zcull)(struct gf100_gr *);
 -	void (*init_num_active_ltcs)(struct gf100_gr *);
  	void (*init_rop_active_fbps)(struct gf100_gr *);
 -	void (*init_bios_2)(struct gf100_gr *);
 -	void (*init_swdx_pes_mask)(struct gf100_gr *);
 -	void (*init_fecs_exceptions)(struct gf100_gr *);
 -	void (*init_ds_hww_esr_2)(struct gf100_gr *);
 -	void (*init_40601c)(struct gf100_gr *);
 -	void (*init_sked_hww_esr)(struct gf100_gr *);
 -	void (*init_419cc0)(struct gf100_gr *);
 -	void (*init_419eb4)(struct gf100_gr *);
 -	void (*init_419c9c)(struct gf100_gr *);
  	void (*init_ppc_exceptions)(struct gf100_gr *);
++<<<<<<< HEAD
 +	void (*init_swdx_pes_mask)(struct gf100_gr *);
 +	void (*init_num_active_ltcs)(struct gf100_gr *);
++=======
+ 	void (*init_tex_hww_esr)(struct gf100_gr *, int gpc, int tpc);
+ 	void (*init_504430)(struct gf100_gr *, int gpc, int tpc);
+ 	void (*init_shader_exceptions)(struct gf100_gr *, int gpc, int tpc);
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  	void (*set_hww_esr_report_mask)(struct gf100_gr *);
  	const struct gf100_gr_pack *mmio;
  	struct {
@@@ -140,12 -155,31 +146,35 @@@
  	struct nvkm_sclass sclass[];
  };
  
 -int gf100_gr_rops(struct gf100_gr *);
  int gf100_gr_init(struct gf100_gr *);
++<<<<<<< HEAD
 +int gf100_gr_rops(struct gf100_gr *);
++=======
+ void gf100_gr_init_vsc_stream_master(struct gf100_gr *);
+ void gf100_gr_init_zcull(struct gf100_gr *);
+ void gf100_gr_init_num_active_ltcs(struct gf100_gr *);
+ void gf100_gr_init_fecs_exceptions(struct gf100_gr *);
+ void gf100_gr_init_40601c(struct gf100_gr *);
+ void gf100_gr_init_419cc0(struct gf100_gr *);
+ void gf100_gr_init_419eb4(struct gf100_gr *);
+ void gf100_gr_init_tex_hww_esr(struct gf100_gr *, int, int);
+ void gf100_gr_init_shader_exceptions(struct gf100_gr *, int, int);
+ 
+ void gf117_gr_init_zcull(struct gf100_gr *);
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  
  int gk104_gr_init(struct gf100_gr *);
 -void gk104_gr_init_vsc_stream_master(struct gf100_gr *);
  void gk104_gr_init_rop_active_fbps(struct gf100_gr *);
  void gk104_gr_init_ppc_exceptions(struct gf100_gr *);
++<<<<<<< HEAD
++=======
+ void gk104_gr_init_sked_hww_esr(struct gf100_gr *);
+ 
+ void gk110_gr_init_419eb4(struct gf100_gr *);
+ 
+ void gm107_gr_init_504430(struct gf100_gr *, int, int);
+ void gm107_gr_init_shader_exceptions(struct gf100_gr *, int, int);
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  
  int gk20a_gr_init(struct gf100_gr *);
  
@@@ -154,8 -187,15 +183,15 @@@ int gm200_gr_rops(struct gf100_gr *)
  
  int gp100_gr_init(struct gf100_gr *);
  void gp100_gr_init_rop_active_fbps(struct gf100_gr *);
++<<<<<<< HEAD
++=======
+ void gp100_gr_init_fecs_exceptions(struct gf100_gr *);
+ void gp100_gr_init_shader_exceptions(struct gf100_gr *, int, int);
+ 
+ void gp102_gr_init_swdx_pes_mask(struct gf100_gr *);
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  
  #define gf100_gr_chan(p) container_of((p), struct gf100_gr_chan, object)
 -#include <core/object.h>
  
  struct gf100_gr_chan {
  	struct nvkm_object object;
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/gr/gf104.c
index d736dcd55ea2,c61544487ed7..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf104.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf104.c
@@@ -115,6 -115,16 +115,19 @@@ gf104_gr_pack_mmio[] = 
  static const struct gf100_gr_func
  gf104_gr = {
  	.init = gf100_gr_init,
++<<<<<<< HEAD
++=======
+ 	.init_gpc_mmu = gf100_gr_init_gpc_mmu,
+ 	.init_vsc_stream_master = gf100_gr_init_vsc_stream_master,
+ 	.init_zcull = gf100_gr_init_zcull,
+ 	.init_num_active_ltcs = gf100_gr_init_num_active_ltcs,
+ 	.init_fecs_exceptions = gf100_gr_init_fecs_exceptions,
+ 	.init_40601c = gf100_gr_init_40601c,
+ 	.init_419cc0 = gf100_gr_init_419cc0,
+ 	.init_419eb4 = gf100_gr_init_419eb4,
+ 	.init_tex_hww_esr = gf100_gr_init_tex_hww_esr,
+ 	.init_shader_exceptions = gf100_gr_init_shader_exceptions,
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  	.mmio = gf104_gr_pack_mmio,
  	.fecs.ucode = &gf100_gr_fecs_ucode,
  	.gpccs.ucode = &gf100_gr_gpccs_ucode,
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/gr/gf108.c
index 2f0d24498427,8e8a99e54f56..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf108.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf108.c
@@@ -106,6 -106,23 +106,20 @@@ gf108_gr_pack_mmio[] = 
  static const struct gf100_gr_func
  gf108_gr = {
  	.init = gf100_gr_init,
++<<<<<<< HEAD
++=======
+ 	.init_gpc_mmu = gf100_gr_init_gpc_mmu,
+ 	.init_r405a14 = gf108_gr_init_r405a14,
+ 	.init_vsc_stream_master = gf100_gr_init_vsc_stream_master,
+ 	.init_zcull = gf100_gr_init_zcull,
+ 	.init_num_active_ltcs = gf100_gr_init_num_active_ltcs,
+ 	.init_fecs_exceptions = gf100_gr_init_fecs_exceptions,
+ 	.init_40601c = gf100_gr_init_40601c,
+ 	.init_419cc0 = gf100_gr_init_419cc0,
+ 	.init_419eb4 = gf100_gr_init_419eb4,
+ 	.init_tex_hww_esr = gf100_gr_init_tex_hww_esr,
+ 	.init_shader_exceptions = gf100_gr_init_shader_exceptions,
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  	.mmio = gf108_gr_pack_mmio,
  	.fecs.ucode = &gf100_gr_fecs_ucode,
  	.gpccs.ucode = &gf100_gr_gpccs_ucode,
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/gr/gf110.c
index d1d942eb86af,6496411b7dfe..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf110.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf110.c
@@@ -87,6 -87,16 +87,19 @@@ gf110_gr_pack_mmio[] = 
  static const struct gf100_gr_func
  gf110_gr = {
  	.init = gf100_gr_init,
++<<<<<<< HEAD
++=======
+ 	.init_gpc_mmu = gf100_gr_init_gpc_mmu,
+ 	.init_vsc_stream_master = gf100_gr_init_vsc_stream_master,
+ 	.init_zcull = gf100_gr_init_zcull,
+ 	.init_num_active_ltcs = gf100_gr_init_num_active_ltcs,
+ 	.init_fecs_exceptions = gf100_gr_init_fecs_exceptions,
+ 	.init_40601c = gf100_gr_init_40601c,
+ 	.init_419cc0 = gf100_gr_init_419cc0,
+ 	.init_419eb4 = gf100_gr_init_419eb4,
+ 	.init_tex_hww_esr = gf100_gr_init_tex_hww_esr,
+ 	.init_shader_exceptions = gf100_gr_init_shader_exceptions,
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  	.mmio = gf110_gr_pack_mmio,
  	.fecs.ucode = &gf100_gr_fecs_ucode,
  	.gpccs.ucode = &gf100_gr_gpccs_ucode,
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/gr/gf117.c
index 0124e468086e,21aa8e227002..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf117.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf117.c
@@@ -123,6 -123,44 +123,19 @@@ gf117_gr_gpccs_ucode = 
  static const struct gf100_gr_func
  gf117_gr = {
  	.init = gf100_gr_init,
++<<<<<<< HEAD
++=======
+ 	.init_gpc_mmu = gf100_gr_init_gpc_mmu,
+ 	.init_vsc_stream_master = gf100_gr_init_vsc_stream_master,
+ 	.init_zcull = gf117_gr_init_zcull,
+ 	.init_num_active_ltcs = gf100_gr_init_num_active_ltcs,
+ 	.init_fecs_exceptions = gf100_gr_init_fecs_exceptions,
+ 	.init_40601c = gf100_gr_init_40601c,
+ 	.init_419cc0 = gf100_gr_init_419cc0,
+ 	.init_419eb4 = gf100_gr_init_419eb4,
+ 	.init_tex_hww_esr = gf100_gr_init_tex_hww_esr,
+ 	.init_shader_exceptions = gf100_gr_init_shader_exceptions,
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  	.mmio = gf117_gr_pack_mmio,
  	.fecs.ucode = &gf117_gr_fecs_ucode,
  	.gpccs.ucode = &gf117_gr_gpccs_ucode,
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/gr/gf119.c
index 8d8e4cafe28f,7d73a9f8ca48..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf119.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf119.c
@@@ -178,6 -178,16 +178,19 @@@ gf119_gr_pack_mmio[] = 
  static const struct gf100_gr_func
  gf119_gr = {
  	.init = gf100_gr_init,
++<<<<<<< HEAD
++=======
+ 	.init_gpc_mmu = gf100_gr_init_gpc_mmu,
+ 	.init_vsc_stream_master = gf100_gr_init_vsc_stream_master,
+ 	.init_zcull = gf100_gr_init_zcull,
+ 	.init_num_active_ltcs = gf100_gr_init_num_active_ltcs,
+ 	.init_fecs_exceptions = gf100_gr_init_fecs_exceptions,
+ 	.init_40601c = gf100_gr_init_40601c,
+ 	.init_419cc0 = gf100_gr_init_419cc0,
+ 	.init_419eb4 = gf100_gr_init_419eb4,
+ 	.init_tex_hww_esr = gf100_gr_init_tex_hww_esr,
+ 	.init_shader_exceptions = gf100_gr_init_shader_exceptions,
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  	.mmio = gf119_gr_pack_mmio,
  	.fecs.ucode = &gf100_gr_fecs_ucode,
  	.gpccs.ucode = &gf100_gr_gpccs_ucode,
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/gr/gk104.c
index 3ed06dea433e,20735319e920..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gk104.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gk104.c
@@@ -286,11 -473,9 +286,10 @@@ gk104_gr_init(struct gf100_gr *gr
  		for (tpc = 0; tpc < gr->tpc_nr[gpc]; tpc++) {
  			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x508), 0xffffffff);
  			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x50c), 0xffffffff);
 -			gr->func->init_tex_hww_esr(gr, gpc, tpc);
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x224), 0xc0000000);
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x48c), 0xc0000000);
  			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x084), 0xc0000000);
- 			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x644), 0x001ffffe);
- 			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x64c), 0x0000000f);
+ 			gr->func->init_shader_exceptions(gr, gpc, tpc);
  		}
  		nvkm_wr32(device, GPC_UNIT(gpc, 0x2c90), 0xffffffff);
  		nvkm_wr32(device, GPC_UNIT(gpc, 0x2c94), 0xffffffff);
@@@ -340,8 -525,18 +339,13 @@@ gk104_gr_gpccs_ucode = 
  static const struct gf100_gr_func
  gk104_gr = {
  	.init = gk104_gr_init,
 -	.init_gpc_mmu = gf100_gr_init_gpc_mmu,
 -	.init_vsc_stream_master = gk104_gr_init_vsc_stream_master,
 -	.init_zcull = gf117_gr_init_zcull,
 -	.init_num_active_ltcs = gf100_gr_init_num_active_ltcs,
  	.init_rop_active_fbps = gk104_gr_init_rop_active_fbps,
 -	.init_fecs_exceptions = gk104_gr_init_fecs_exceptions,
 -	.init_sked_hww_esr = gk104_gr_init_sked_hww_esr,
 -	.init_419cc0 = gf100_gr_init_419cc0,
 -	.init_419eb4 = gf100_gr_init_419eb4,
  	.init_ppc_exceptions = gk104_gr_init_ppc_exceptions,
++<<<<<<< HEAD
++=======
+ 	.init_tex_hww_esr = gf100_gr_init_tex_hww_esr,
+ 	.init_shader_exceptions = gf100_gr_init_shader_exceptions,
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  	.mmio = gk104_gr_pack_mmio,
  	.fecs.ucode = &gk104_gr_fecs_ucode,
  	.gpccs.ucode = &gk104_gr_gpccs_ucode,
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/gr/gk110.c
index f31b171a4102,e52cc2423353..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gk110.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gk110.c
@@@ -183,8 -337,32 +183,13 @@@ gk110_gr_gpccs_ucode = 
  static const struct gf100_gr_func
  gk110_gr = {
  	.init = gk104_gr_init,
 -	.init_gpc_mmu = gf100_gr_init_gpc_mmu,
 -	.init_vsc_stream_master = gk104_gr_init_vsc_stream_master,
 -	.init_zcull = gf117_gr_init_zcull,
 -	.init_num_active_ltcs = gf100_gr_init_num_active_ltcs,
  	.init_rop_active_fbps = gk104_gr_init_rop_active_fbps,
 -	.init_fecs_exceptions = gf100_gr_init_fecs_exceptions,
 -	.init_sked_hww_esr = gk104_gr_init_sked_hww_esr,
 -	.init_419cc0 = gf100_gr_init_419cc0,
 -	.init_419eb4 = gk110_gr_init_419eb4,
  	.init_ppc_exceptions = gk104_gr_init_ppc_exceptions,
++<<<<<<< HEAD
++=======
+ 	.init_tex_hww_esr = gf100_gr_init_tex_hww_esr,
+ 	.init_shader_exceptions = gf100_gr_init_shader_exceptions,
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  	.mmio = gk110_gr_pack_mmio,
  	.fecs.ucode = &gk110_gr_fecs_ucode,
  	.gpccs.ucode = &gk110_gr_gpccs_ucode,
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/gr/gk110b.c
index d76dd178007f,35303818c4a2..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gk110b.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gk110b.c
@@@ -103,8 -103,18 +103,13 @@@ gk110b_gr_pack_mmio[] = 
  static const struct gf100_gr_func
  gk110b_gr = {
  	.init = gk104_gr_init,
 -	.init_gpc_mmu = gf100_gr_init_gpc_mmu,
 -	.init_vsc_stream_master = gk104_gr_init_vsc_stream_master,
 -	.init_zcull = gf117_gr_init_zcull,
 -	.init_num_active_ltcs = gf100_gr_init_num_active_ltcs,
  	.init_rop_active_fbps = gk104_gr_init_rop_active_fbps,
 -	.init_fecs_exceptions = gf100_gr_init_fecs_exceptions,
 -	.init_sked_hww_esr = gk104_gr_init_sked_hww_esr,
 -	.init_419cc0 = gf100_gr_init_419cc0,
 -	.init_419eb4 = gk110_gr_init_419eb4,
  	.init_ppc_exceptions = gk104_gr_init_ppc_exceptions,
++<<<<<<< HEAD
++=======
+ 	.init_tex_hww_esr = gf100_gr_init_tex_hww_esr,
+ 	.init_shader_exceptions = gf100_gr_init_shader_exceptions,
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  	.mmio = gk110b_gr_pack_mmio,
  	.fecs.ucode = &gk110_gr_fecs_ucode,
  	.gpccs.ucode = &gk110_gr_gpccs_ucode,
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/gr/gk208.c
index 14bbe6ed02a9,4e5cd540a321..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gk208.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gk208.c
@@@ -162,8 -162,17 +162,13 @@@ gk208_gr_gpccs_ucode = 
  static const struct gf100_gr_func
  gk208_gr = {
  	.init = gk104_gr_init,
 -	.init_gpc_mmu = gf100_gr_init_gpc_mmu,
 -	.init_vsc_stream_master = gk104_gr_init_vsc_stream_master,
 -	.init_zcull = gf117_gr_init_zcull,
 -	.init_num_active_ltcs = gf100_gr_init_num_active_ltcs,
  	.init_rop_active_fbps = gk104_gr_init_rop_active_fbps,
 -	.init_fecs_exceptions = gf100_gr_init_fecs_exceptions,
 -	.init_sked_hww_esr = gk104_gr_init_sked_hww_esr,
 -	.init_419cc0 = gf100_gr_init_419cc0,
  	.init_ppc_exceptions = gk104_gr_init_ppc_exceptions,
++<<<<<<< HEAD
++=======
+ 	.init_tex_hww_esr = gf100_gr_init_tex_hww_esr,
+ 	.init_shader_exceptions = gf100_gr_init_shader_exceptions,
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  	.mmio = gk208_gr_pack_mmio,
  	.fecs.ucode = &gk208_gr_fecs_ucode,
  	.gpccs.ucode = &gk208_gr_gpccs_ucode,
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/gr/gm107.c
index 2c67fac576d1,3b8ae137798f..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gm107.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gm107.c
@@@ -280,6 -282,46 +280,49 @@@ gm107_gr_pack_mmio[] = 
   ******************************************************************************/
  
  void
++<<<<<<< HEAD
++=======
+ gm107_gr_init_shader_exceptions(struct gf100_gr *gr, int gpc, int tpc)
+ {
+ 	struct nvkm_device *device = gr->base.engine.subdev.device;
+ 	nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x644), 0x00dffffe);
+ 	nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x64c), 0x00000005);
+ }
+ 
+ void
+ gm107_gr_init_504430(struct gf100_gr *gr, int gpc, int tpc)
+ {
+ 	struct nvkm_device *device = gr->base.engine.subdev.device;
+ 	nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x430), 0xc0000000);
+ }
+ 
+ static void
+ gm107_gr_init_bios_2(struct gf100_gr *gr)
+ {
+ 	struct nvkm_subdev *subdev = &gr->base.engine.subdev;
+ 	struct nvkm_device *device = subdev->device;
+ 	struct nvkm_bios *bios = device->bios;
+ 	struct bit_entry bit_P;
+ 	if (!bit_entry(bios, 'P', &bit_P) &&
+ 	    bit_P.version == 2 && bit_P.length >= 0x2c) {
+ 		u32 data = nvbios_rd32(bios, bit_P.offset + 0x28);
+ 		if (data) {
+ 			u8 ver = nvbios_rd08(bios, data + 0x00);
+ 			u8 hdr = nvbios_rd08(bios, data + 0x01);
+ 			if (ver == 0x20 && hdr >= 8) {
+ 				data = nvbios_rd32(bios, data + 0x04);
+ 				if (data) {
+ 					u32 save = nvkm_rd32(device, 0x619444);
+ 					nvbios_init(subdev, data);
+ 					nvkm_wr32(device, 0x619444, save);
+ 				}
+ 			}
+ 		}
+ 	}
+ }
+ 
+ void
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  gm107_gr_init_bios(struct gf100_gr *gr)
  {
  	static const struct {
@@@ -387,12 -408,10 +430,17 @@@ gm107_gr_init(struct gf100_gr *gr
  		for (tpc = 0; tpc < gr->tpc_nr[gpc]; tpc++) {
  			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x508), 0xffffffff);
  			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x50c), 0xffffffff);
 -			gr->func->init_tex_hww_esr(gr, gpc, tpc);
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x224), 0xc0000000);
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x48c), 0xc0000000);
  			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x084), 0xc0000000);
++<<<<<<< HEAD
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x430), 0xc0000000);
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x644), 0x00dffffe);
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x64c), 0x00000005);
++=======
+ 			gr->func->init_504430(gr, gpc, tpc);
+ 			gr->func->init_shader_exceptions(gr, gpc, tpc);
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  		}
  		nvkm_wr32(device, GPC_UNIT(gpc, 0x2c90), 0xffffffff);
  		nvkm_wr32(device, GPC_UNIT(gpc, 0x2c94), 0xffffffff);
@@@ -442,8 -461,20 +490,14 @@@ gm107_gr_gpccs_ucode = 
  static const struct gf100_gr_func
  gm107_gr = {
  	.init = gm107_gr_init,
 -	.init_gpc_mmu = gm107_gr_init_gpc_mmu,
 -	.init_bios = gm107_gr_init_bios,
 -	.init_vsc_stream_master = gk104_gr_init_vsc_stream_master,
 -	.init_zcull = gf117_gr_init_zcull,
 -	.init_num_active_ltcs = gf100_gr_init_num_active_ltcs,
  	.init_rop_active_fbps = gk104_gr_init_rop_active_fbps,
 -	.init_bios_2 = gm107_gr_init_bios_2,
 -	.init_fecs_exceptions = gf100_gr_init_fecs_exceptions,
 -	.init_sked_hww_esr = gk104_gr_init_sked_hww_esr,
 -	.init_419cc0 = gf100_gr_init_419cc0,
  	.init_ppc_exceptions = gk104_gr_init_ppc_exceptions,
++<<<<<<< HEAD
++=======
+ 	.init_tex_hww_esr = gf100_gr_init_tex_hww_esr,
+ 	.init_504430 = gm107_gr_init_504430,
+ 	.init_shader_exceptions = gm107_gr_init_shader_exceptions,
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  	.mmio = gm107_gr_pack_mmio,
  	.fecs.ucode = &gm107_gr_fecs_ucode,
  	.gpccs.ucode = &gm107_gr_gpccs_ucode,
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/gr/gm200.c
index 6435f1257572,3e2a78dfb1fd..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gm200.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gm200.c
@@@ -136,12 -121,10 +136,17 @@@ gm200_gr_init(struct gf100_gr *gr
  		for (tpc = 0; tpc < gr->tpc_nr[gpc]; tpc++) {
  			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x508), 0xffffffff);
  			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x50c), 0xffffffff);
 -			gr->func->init_tex_hww_esr(gr, gpc, tpc);
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x224), 0xc0000000);
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x48c), 0xc0000000);
  			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x084), 0xc0000000);
++<<<<<<< HEAD
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x430), 0xc0000000);
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x644), 0x00dffffe);
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x64c), 0x00000005);
++=======
+ 			gr->func->init_504430(gr, gpc, tpc);
+ 			gr->func->init_shader_exceptions(gr, gpc, tpc);
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  		}
  		nvkm_wr32(device, GPC_UNIT(gpc, 0x2c90), 0xffffffff);
  		nvkm_wr32(device, GPC_UNIT(gpc, 0x2c94), 0xffffffff);
@@@ -210,8 -193,19 +215,14 @@@ static const struct gf100_gr_fun
  gm200_gr = {
  	.init = gm200_gr_init,
  	.init_gpc_mmu = gm200_gr_init_gpc_mmu,
 -	.init_bios = gm107_gr_init_bios,
 -	.init_vsc_stream_master = gk104_gr_init_vsc_stream_master,
 -	.init_zcull = gf117_gr_init_zcull,
 -	.init_num_active_ltcs = gm200_gr_init_num_active_ltcs,
  	.init_rop_active_fbps = gm200_gr_init_rop_active_fbps,
 -	.init_fecs_exceptions = gf100_gr_init_fecs_exceptions,
 -	.init_ds_hww_esr_2 = gm200_gr_init_ds_hww_esr_2,
 -	.init_sked_hww_esr = gk104_gr_init_sked_hww_esr,
 -	.init_419cc0 = gf100_gr_init_419cc0,
  	.init_ppc_exceptions = gk104_gr_init_ppc_exceptions,
++<<<<<<< HEAD
++=======
+ 	.init_tex_hww_esr = gf100_gr_init_tex_hww_esr,
+ 	.init_504430 = gm107_gr_init_504430,
+ 	.init_shader_exceptions = gm107_gr_init_shader_exceptions,
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  	.rops = gm200_gr_rops,
  	.ppc_nr = 2,
  	.grctx = &gm200_grctx,
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/gr/gp100.c
index 867a5f7cc5bc,48a0e144d983..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gp100.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gp100.c
@@@ -30,6 -30,28 +30,31 @@@
   * PGRAPH engine/subdev functions
   ******************************************************************************/
  
++<<<<<<< HEAD
++=======
+ void
+ gp100_gr_init_shader_exceptions(struct gf100_gr *gr, int gpc, int tpc)
+ {
+ 	struct nvkm_device *device = gr->base.engine.subdev.device;
+ 	nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x644), 0x00dffffe);
+ 	nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x64c), 0x00000105);
+ }
+ 
+ static void
+ gp100_gr_init_419c9c(struct gf100_gr *gr)
+ {
+ 	struct nvkm_device *device = gr->base.engine.subdev.device;
+ 	nvkm_mask(device, 0x419c9c, 0x00010000, 0x00010000);
+ 	nvkm_mask(device, 0x419c9c, 0x00020000, 0x00020000);
+ }
+ 
+ void
+ gp100_gr_init_fecs_exceptions(struct gf100_gr *gr)
+ {
+ 	nvkm_wr32(gr->base.engine.subdev.device, 0x409c24, 0x000f0002);
+ }
+ 
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  void
  gp100_gr_init_rop_active_fbps(struct gf100_gr *gr)
  {
@@@ -126,12 -109,10 +151,17 @@@ gp100_gr_init(struct gf100_gr *gr
  		for (tpc = 0; tpc < gr->tpc_nr[gpc]; tpc++) {
  			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x508), 0xffffffff);
  			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x50c), 0xffffffff);
 -			gr->func->init_tex_hww_esr(gr, gpc, tpc);
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x224), 0xc0000000);
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x48c), 0xc0000000);
  			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x084), 0xc0000000);
++<<<<<<< HEAD
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x430), 0xc0000000);
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x644), 0x00dffffe);
 +			nvkm_wr32(device, TPC_UNIT(gpc, tpc, 0x64c), 0x00000105);
++=======
+ 			gr->func->init_504430(gr, gpc, gpc);
+ 			gr->func->init_shader_exceptions(gr, gpc, tpc);
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  		}
  		nvkm_wr32(device, GPC_UNIT(gpc, 0x2c90), 0xffffffff);
  		nvkm_wr32(device, GPC_UNIT(gpc, 0x2c94), 0xffffffff);
@@@ -160,9 -141,19 +190,15 @@@ static const struct gf100_gr_fun
  gp100_gr = {
  	.init = gp100_gr_init,
  	.init_gpc_mmu = gm200_gr_init_gpc_mmu,
 -	.init_vsc_stream_master = gk104_gr_init_vsc_stream_master,
 -	.init_zcull = gf117_gr_init_zcull,
 -	.init_num_active_ltcs = gm200_gr_init_num_active_ltcs,
  	.init_rop_active_fbps = gp100_gr_init_rop_active_fbps,
 -	.init_fecs_exceptions = gp100_gr_init_fecs_exceptions,
 -	.init_ds_hww_esr_2 = gm200_gr_init_ds_hww_esr_2,
 -	.init_sked_hww_esr = gk104_gr_init_sked_hww_esr,
 -	.init_419cc0 = gf100_gr_init_419cc0,
 -	.init_419c9c = gp100_gr_init_419c9c,
  	.init_ppc_exceptions = gk104_gr_init_ppc_exceptions,
++<<<<<<< HEAD
 +	.init_num_active_ltcs = gp100_gr_init_num_active_ltcs,
++=======
+ 	.init_tex_hww_esr = gf100_gr_init_tex_hww_esr,
+ 	.init_504430 = gm107_gr_init_504430,
+ 	.init_shader_exceptions = gp100_gr_init_shader_exceptions,
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  	.rops = gm200_gr_rops,
  	.ppc_nr = 2,
  	.grctx = &gp100_grctx,
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/gr/gp102.c
index 61e3a0b08559,7ce06520fdc9..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gp102.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gp102.c
@@@ -44,10 -44,19 +44,16 @@@ static const struct gf100_gr_fun
  gp102_gr = {
  	.init = gp100_gr_init,
  	.init_gpc_mmu = gm200_gr_init_gpc_mmu,
 -	.init_vsc_stream_master = gk104_gr_init_vsc_stream_master,
 -	.init_zcull = gf117_gr_init_zcull,
 -	.init_num_active_ltcs = gm200_gr_init_num_active_ltcs,
  	.init_rop_active_fbps = gp100_gr_init_rop_active_fbps,
 -	.init_swdx_pes_mask = gp102_gr_init_swdx_pes_mask,
 -	.init_fecs_exceptions = gp100_gr_init_fecs_exceptions,
 -	.init_ds_hww_esr_2 = gm200_gr_init_ds_hww_esr_2,
 -	.init_sked_hww_esr = gk104_gr_init_sked_hww_esr,
 -	.init_419cc0 = gf100_gr_init_419cc0,
  	.init_ppc_exceptions = gk104_gr_init_ppc_exceptions,
++<<<<<<< HEAD
 +	.init_swdx_pes_mask = gp102_gr_init_swdx_pes_mask,
 +	.init_num_active_ltcs = gp100_gr_init_num_active_ltcs,
++=======
+ 	.init_tex_hww_esr = gf100_gr_init_tex_hww_esr,
+ 	.init_504430 = gm107_gr_init_504430,
+ 	.init_shader_exceptions = gp100_gr_init_shader_exceptions,
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  	.rops = gm200_gr_rops,
  	.ppc_nr = 3,
  	.grctx = &gp102_grctx,
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/gr/gp107.c
index f7272323f694,dbb2d4e71442..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gp107.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gp107.c
@@@ -30,10 -30,19 +30,16 @@@ static const struct gf100_gr_fun
  gp107_gr = {
  	.init = gp100_gr_init,
  	.init_gpc_mmu = gm200_gr_init_gpc_mmu,
 -	.init_vsc_stream_master = gk104_gr_init_vsc_stream_master,
 -	.init_zcull = gf117_gr_init_zcull,
 -	.init_num_active_ltcs = gm200_gr_init_num_active_ltcs,
  	.init_rop_active_fbps = gp100_gr_init_rop_active_fbps,
 -	.init_swdx_pes_mask = gp102_gr_init_swdx_pes_mask,
 -	.init_fecs_exceptions = gp100_gr_init_fecs_exceptions,
 -	.init_ds_hww_esr_2 = gm200_gr_init_ds_hww_esr_2,
 -	.init_sked_hww_esr = gk104_gr_init_sked_hww_esr,
 -	.init_419cc0 = gf100_gr_init_419cc0,
  	.init_ppc_exceptions = gk104_gr_init_ppc_exceptions,
++<<<<<<< HEAD
 +	.init_swdx_pes_mask = gp102_gr_init_swdx_pes_mask,
 +	.init_num_active_ltcs = gp100_gr_init_num_active_ltcs,
++=======
+ 	.init_tex_hww_esr = gf100_gr_init_tex_hww_esr,
+ 	.init_504430 = gm107_gr_init_504430,
+ 	.init_shader_exceptions = gp100_gr_init_shader_exceptions,
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  	.rops = gm200_gr_rops,
  	.ppc_nr = 1,
  	.grctx = &gp107_grctx,
diff --cc drivers/gpu/drm/nouveau/nvkm/engine/gr/gp10b.c
index 5f3d161a0842,7f23d8bd977f..000000000000
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gp10b.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gp10b.c
@@@ -37,9 -29,18 +37,15 @@@ static const struct gf100_gr_fun
  gp10b_gr = {
  	.init = gp100_gr_init,
  	.init_gpc_mmu = gm200_gr_init_gpc_mmu,
 -	.init_vsc_stream_master = gk104_gr_init_vsc_stream_master,
 -	.init_zcull = gf117_gr_init_zcull,
 -	.init_num_active_ltcs = gf100_gr_init_num_active_ltcs,
  	.init_rop_active_fbps = gp100_gr_init_rop_active_fbps,
 -	.init_fecs_exceptions = gp100_gr_init_fecs_exceptions,
 -	.init_ds_hww_esr_2 = gm200_gr_init_ds_hww_esr_2,
 -	.init_sked_hww_esr = gk104_gr_init_sked_hww_esr,
 -	.init_419cc0 = gf100_gr_init_419cc0,
  	.init_ppc_exceptions = gk104_gr_init_ppc_exceptions,
++<<<<<<< HEAD
 +	.init_num_active_ltcs = gp10b_gr_init_num_active_ltcs,
++=======
+ 	.init_tex_hww_esr = gf100_gr_init_tex_hww_esr,
+ 	.init_504430 = gm107_gr_init_504430,
+ 	.init_shader_exceptions = gp100_gr_init_shader_exceptions,
++>>>>>>> 4615e9b4387f (drm/nouveau/gr/gf100-: virtualise init_shader_exceptions)
  	.rops = gm200_gr_rops,
  	.ppc_nr = 1,
  	.grctx = &gp102_grctx,
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.c
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.h
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/gr/gf104.c
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/gr/gf108.c
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/gr/gf110.c
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/gr/gf117.c
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/gr/gf119.c
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/gr/gk104.c
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/gr/gk110.c
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/gr/gk110b.c
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/gr/gk208.c
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/gr/gm107.c
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/gr/gm200.c
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/gr/gp100.c
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/gr/gp102.c
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/gr/gp107.c
* Unmerged path drivers/gpu/drm/nouveau/nvkm/engine/gr/gp10b.c
