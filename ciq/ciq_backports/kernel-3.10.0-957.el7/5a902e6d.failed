netfilter: ipset: Make sure element data size is a multiple of u32

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Jozsef Kadlecsik <kadlec@blackhole.kfki.hu>
commit 5a902e6d4b61de33f4a9d3fc5fbc9d339fee7ed3
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/5a902e6d.failed

Data for hashing required to be array of u32. Make sure that
element data always multiple of u32.

Ported from a patch proposed by Sergey Popovich <popovich_sergei@mail.ua>.

	Signed-off-by: Jozsef Kadlecsik <kadlec@blackhole.kfki.hu>
(cherry picked from commit 5a902e6d4b61de33f4a9d3fc5fbc9d339fee7ed3)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/netfilter/ipset/ip_set_hash_gen.h
diff --cc net/netfilter/ipset/ip_set_hash_gen.h
index 9ce28af662bf,34f115f874ab..000000000000
--- a/net/netfilter/ipset/ip_set_hash_gen.h
+++ b/net/netfilter/ipset/ip_set_hash_gen.h
@@@ -259,10 -260,19 +259,21 @@@ hbucket_elem_add(struct hbucket *n, u8 
  #endif
  
  #define HKEY(data, initval, htable_bits)			\
++<<<<<<< HEAD
 +(jhash2((u32 *)(data), HKEY_DATALEN/sizeof(u32), initval)	\
 +	& jhash_mask(htable_bits))
++=======
+ ({								\
+ 	const u32 *__k = (const u32 *)data;			\
+ 	u32 __l = HKEY_DATALEN / sizeof(u32);			\
+ 								\
+ 	BUILD_BUG_ON(HKEY_DATALEN % sizeof(u32) != 0);		\
+ 								\
+ 	jhash2(__k, __l, initval) & jhash_mask(htable_bits);	\
+ })
++>>>>>>> 5a902e6d4b61 (netfilter: ipset: Make sure element data size is a multiple of u32)
  
  #ifndef htype
 -#ifndef HTYPE
 -#error "HTYPE is not defined!"
 -#endif /* HTYPE */
  #define htype			HTYPE
  
  /* The generic hash structure */
* Unmerged path net/netfilter/ipset/ip_set_hash_gen.h
