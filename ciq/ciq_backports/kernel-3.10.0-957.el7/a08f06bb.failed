seq_file: Introduce DEFINE_SHOW_ATTRIBUTE() helper macro

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [sound] alsa: seq_file: Introduce DEFINE_SHOW_ATTRIBUTE() helper macro (Jaroslav Kysela) [1535427]
Rebuild_FUZZ: 94.92%
commit-author Andy Shevchenko <andriy.shevchenko@linux.intel.com>
commit a08f06bb7a0743a7fc8d571899c93d882468096e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/a08f06bb.failed

The DEFINE_SHOW_ATTRIBUTE() helper macro would be useful for current
users, which are many of them, and for new comers to decrease code
duplication.

	Acked-by: Lee Jones <lee.jones@linaro.org>
	Acked-by: Darren Hart (VMware) <dvhart@infradead.org>
	Signed-off-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
(cherry picked from commit a08f06bb7a0743a7fc8d571899c93d882468096e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/mfd/ab8500-debugfs.c
#	drivers/platform/x86/pmc_atom.c
#	net/bluetooth/hci_debugfs.c
diff --cc drivers/mfd/ab8500-debugfs.c
index 37b7ce4c7c3b,fcb3a92ae85f..000000000000
--- a/drivers/mfd/ab8500-debugfs.c
+++ b/drivers/mfd/ab8500-debugfs.c
@@@ -1262,7 -1258,6 +1262,10 @@@ struct ab8500_prcmu_ranges ab8540_debug
  	},
  };
  
++<<<<<<< HEAD
 +
++=======
++>>>>>>> a08f06bb7a07 (seq_file: Introduce DEFINE_SHOW_ATTRIBUTE() helper macro)
  static irqreturn_t ab8500_debug_handler(int irq, void *data)
  {
  	char buf[16];
diff --cc net/bluetooth/hci_debugfs.c
index 63df63ebfb24,418b76e557b0..000000000000
--- a/net/bluetooth/hci_debugfs.c
+++ b/net/bluetooth/hci_debugfs.c
@@@ -88,17 -88,7 +88,21 @@@ static int __name ## _show(struct seq_f
  	return 0;							      \
  }									      \
  									      \
++<<<<<<< HEAD
 +static int __name ## _open(struct inode *inode, struct file *file)	      \
 +{									      \
 +	return single_open(file, __name ## _show, inode->i_private);	      \
 +}									      \
 +									      \
 +static const struct file_operations __name ## _fops = {			      \
 +	.open		= __name ## _open,				      \
 +	.read		= seq_read,					      \
 +	.llseek		= seq_lseek,					      \
 +	.release	= single_release,				      \
 +}									      \
++=======
+ DEFINE_SHOW_ATTRIBUTE(__name)
++>>>>>>> a08f06bb7a07 (seq_file: Introduce DEFINE_SHOW_ATTRIBUTE() helper macro)
  
  static int features_show(struct seq_file *f, void *ptr)
  {
* Unmerged path drivers/platform/x86/pmc_atom.c
* Unmerged path drivers/mfd/ab8500-debugfs.c
* Unmerged path drivers/platform/x86/pmc_atom.c
diff --git a/include/linux/seq_file.h b/include/linux/seq_file.h
index 28e66ecbd95e..567be8299f26 100644
--- a/include/linux/seq_file.h
+++ b/include/linux/seq_file.h
@@ -153,6 +153,20 @@ int seq_put_decimal_ull(struct seq_file *m, char delimiter,
 int seq_put_decimal_ll(struct seq_file *m, char delimiter,
 			long long num);
 
+#define DEFINE_SHOW_ATTRIBUTE(__name)					\
+static int __name ## _open(struct inode *inode, struct file *file)	\
+{									\
+	return single_open(file, __name ## _show, inode->i_private);	\
+}									\
+									\
+static const struct file_operations __name ## _fops = {			\
+	.owner		= THIS_MODULE,					\
+	.open		= __name ## _open,				\
+	.read		= seq_read,					\
+	.llseek		= seq_lseek,					\
+	.release	= single_release,				\
+}
+
 static inline struct user_namespace *seq_user_ns(struct seq_file *seq)
 {
 #ifdef CONFIG_USER_NS
* Unmerged path net/bluetooth/hci_debugfs.c
