platform/x86: wmi: Fix error handling in acpi_wmi_init()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [platform] x86: wmi: Fix error handling in acpi_wmi_init() (Jarod Wilson) [1562200]
Rebuild_FUZZ: 91.26%
commit-author Alexey Khoroshilov <khoroshilov@ispras.ru>
commit 972777171f33f9932f51feebe42dbcc1b475d01a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/97277717.failed

The order of resource deallocations is messed up in acpi_wmi_init().
It should be vice versa.

Found by Linux Driver Verification project (linuxtesting.org).

	Signed-off-by: Alexey Khoroshilov <khoroshilov@ispras.ru>
	Signed-off-by: Darren Hart (VMware) <dvhart@infradead.org>
(cherry picked from commit 972777171f33f9932f51feebe42dbcc1b475d01a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/platform/x86/wmi.c
diff --cc drivers/platform/x86/wmi.c
index c0a608eedddf,e32ba575e8d9..000000000000
--- a/drivers/platform/x86/wmi.c
+++ b/drivers/platform/x86/wmi.c
@@@ -933,6 -1251,14 +933,17 @@@ static int __init acpi_wmi_init(void
  	}
  
  	return 0;
++<<<<<<< HEAD
++=======
+ 
+ err_unreg_bus:
+ 	bus_unregister(&wmi_bus_type);
+ 
+ err_unreg_class:
+ 	class_unregister(&wmi_bus_class);
+ 
+ 	return error;
++>>>>>>> 972777171f33 (platform/x86: wmi: Fix error handling in acpi_wmi_init())
  }
  
  static void __exit acpi_wmi_exit(void)
* Unmerged path drivers/platform/x86/wmi.c
