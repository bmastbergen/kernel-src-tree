mlxsw: spectrum_router: Handle MTU change of GRE netdevs

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Petr Machata <petrm@mellanox.com>
commit 68c3cd925597842c4744fd93d61f8cd2496cdfc8
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/68c3cd92.failed

Update MTU of overlay loopback in accordance with the setting on the
tunnel netdevice.

Fixes: 0063587d3587 ("mlxsw: spectrum: Support decap-only IP-in-IP tunnels")
	Signed-off-by: Petr Machata <petrm@mellanox.com>
	Signed-off-by: Ido Schimmel <idosch@mellanox.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 68c3cd925597842c4744fd93d61f8cd2496cdfc8)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlxsw/spectrum_router.c
diff --cc drivers/net/ethernet/mellanox/mlxsw/spectrum_router.c
index 8e14d6a3b011,997e24dcb053..000000000000
--- a/drivers/net/ethernet/mellanox/mlxsw/spectrum_router.c
+++ b/drivers/net/ethernet/mellanox/mlxsw/spectrum_router.c
@@@ -1433,10 -1698,19 +1455,19 @@@ mlxsw_sp_netdevice_ipip_ol_event(struc
  		mlxsw_sp_netdevice_ipip_ol_down_event(mlxsw_sp, ol_dev);
  		return 0;
  	case NETDEV_CHANGEUPPER:
 -		chup = container_of(info, typeof(*chup), info);
 -		extack = info->extack;
 -		if (netif_is_l3_master(chup->upper_dev))
 +		if (netif_is_l3_master(info->upper_dev))
  			return mlxsw_sp_netdevice_ipip_ol_vrf_event(mlxsw_sp,
 -								    ol_dev,
 -								    extack);
 +								    ol_dev);
  		return 0;
++<<<<<<< HEAD
++=======
+ 	case NETDEV_CHANGE:
+ 		extack = info->extack;
+ 		return mlxsw_sp_netdevice_ipip_ol_change_event(mlxsw_sp,
+ 							       ol_dev, extack);
+ 	case NETDEV_CHANGEMTU:
+ 		return mlxsw_sp_netdevice_ipip_ol_update_mtu(mlxsw_sp, ol_dev);
++>>>>>>> 68c3cd925597 (mlxsw: spectrum_router: Handle MTU change of GRE netdevs)
  	}
  	return 0;
  }
* Unmerged path drivers/net/ethernet/mellanox/mlxsw/spectrum_router.c
