perf script: Use event_format__fprintf()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Arnaldo Carvalho de Melo <acme@redhat.com>
commit 894f3f1732cb4ae543d406e4fca1585e8c303a1c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/894f3f17.failed

Another case where we a1a587073ccd ("perf script: Use fprintf like
printing uniformly") forgot to redirect output to the FILE descriptor,
fix this too.

	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Jiri Olsa <jolsa@kernel.org>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Wang Nan <wangnan0@huawei.com>
	Cc: yuzhoujian <yuzhoujian@didichuxing.com>
Link: http://lkml.kernel.org/n/tip-jmwx4pgfezw98ezfoj9t957s@git.kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 894f3f1732cb4ae543d406e4fca1585e8c303a1c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/builtin-script.c
diff --cc tools/perf/builtin-script.c
index d3f20cf9a358,b27f21638207..000000000000
--- a/tools/perf/builtin-script.c
+++ b/tools/perf/builtin-script.c
@@@ -1116,17 -1465,22 +1116,28 @@@ static void process_event(struct perf_s
  		return;
  	}
  
++<<<<<<< HEAD
 +	if (PRINT_FIELD(TRACE))
 +		event_format__print(evsel->tp_format, sample->cpu,
 +				    sample->raw_data, sample->raw_size);
++=======
+ 	if (PRINT_FIELD(TRACE)) {
+ 		event_format__fprintf(evsel->tp_format, sample->cpu,
+ 				      sample->raw_data, sample->raw_size, fp);
+ 	}
+ 
+ 	if (attr->type == PERF_TYPE_SYNTH && PRINT_FIELD(SYNTH))
+ 		perf_sample__fprintf_synth(sample, evsel, fp);
+ 
++>>>>>>> 894f3f1732cb (perf script: Use event_format__fprintf())
  	if (PRINT_FIELD(ADDR))
 -		perf_sample__fprintf_addr(sample, thread, attr, fp);
 +		print_sample_addr(sample, thread, attr);
  
  	if (PRINT_FIELD(DATA_SRC))
 -		data_src__fprintf(sample->data_src, fp);
 +		data_src__printf(sample->data_src);
  
  	if (PRINT_FIELD(WEIGHT))
 -		fprintf(fp, "%16" PRIu64, sample->weight);
 +		printf("%16" PRIu64, sample->weight);
  
  	if (PRINT_FIELD(IP)) {
  		struct callchain_cursor *cursor = NULL;
* Unmerged path tools/perf/builtin-script.c
