fw_cfg: fix sparse warnings with fw_cfg_file

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Marc-André Lureau <marcandre.lureau@redhat.com>
commit d174ea7d38bccb6a10aca036014ec74ea8f73d1c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/d174ea7d.failed

Modify fw_cfg_sysfs_entry to store entry values, instead of reusing
the restricted types.

Fixes warnings such as:

$ make C=1 CF=-D__CHECK_ENDIAN__ drivers/firmware/qemu_fw_cfg.o

drivers/firmware/qemu_fw_cfg.c:491:29: warning: incorrect type in assignment (different base types)
drivers/firmware/qemu_fw_cfg.c:491:29:    expected restricted __be32 [usertype] size
drivers/firmware/qemu_fw_cfg.c:491:29:    got unsigned int
drivers/firmware/qemu_fw_cfg.c:492:31: warning: incorrect type in assignment (different base types)
drivers/firmware/qemu_fw_cfg.c:492:31:    expected restricted __be16 [usertype] select
drivers/firmware/qemu_fw_cfg.c:492:31:    got int

	Signed-off-by: Marc-André Lureau <marcandre.lureau@redhat.com>
	Signed-off-by: Michael S. Tsirkin <mst@redhat.com>
(cherry picked from commit d174ea7d38bccb6a10aca036014ec74ea8f73d1c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/firmware/qemu_fw_cfg.c
diff --cc drivers/firmware/qemu_fw_cfg.c
index 0d0d7a831ec8,7978844f6b37..000000000000
--- a/drivers/firmware/qemu_fw_cfg.c
+++ b/drivers/firmware/qemu_fw_cfg.c
@@@ -529,13 -338,14 +531,18 @@@ static ssize_t fw_cfg_sysfs_read_raw(st
  {
  	struct fw_cfg_sysfs_entry *entry = to_entry(kobj);
  
- 	if (pos > entry->f.size)
+ 	if (pos > entry->size)
  		return -EINVAL;
  
- 	if (count > entry->f.size - pos)
- 		count = entry->f.size - pos;
+ 	if (count > entry->size - pos)
+ 		count = entry->size - pos;
  
++<<<<<<< HEAD
 +	return fw_cfg_read_blob(entry->f.select, buf, pos, count, true);
++=======
+ 	fw_cfg_read_blob(entry->select, buf, pos, count);
+ 	return count;
++>>>>>>> d174ea7d38bc (fw_cfg: fix sparse warnings with fw_cfg_file)
  }
  
  static struct bin_attribute fw_cfg_sysfs_attr_raw = {
@@@ -703,11 -508,9 +712,9 @@@ static int fw_cfg_register_dir_entries(
  	if (!dir)
  		return -ENOMEM;
  
 -	fw_cfg_read_blob(FW_CFG_FILE_DIR, dir, sizeof(count), dir_size);
 +	fw_cfg_read_blob(FW_CFG_FILE_DIR, dir, sizeof(count), dir_size, true);
  
  	for (i = 0; i < count; i++) {
- 		dir[i].size = be32_to_cpu(dir[i].size);
- 		dir[i].select = be16_to_cpu(dir[i].select);
  		ret = fw_cfg_register_file(&dir[i]);
  		if (ret)
  			break;
* Unmerged path drivers/firmware/qemu_fw_cfg.c
