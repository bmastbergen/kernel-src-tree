platform/x86: dell-smbios: Correct notation for filtering

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [platform] x86: dell-smbios: Correct notation for filtering (Jarod Wilson) [1517197]
Rebuild_FUZZ: 91.43%
commit-author Mario Limonciello <mario.limonciello@dell.com>
commit 7dc5ff66c2c1d42ea55800548e0e28cc0d206c98
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/7dc5ff66.failed

The class/select were mistakenly put into octal notation but
intended to be in decimal notation.

	Suggested-by: Pali Rohar <pali.rohar@gmail.com>
	Signed-off-by: Mario Limonciello <mario.limonciello@dell.com>
	Signed-off-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
(cherry picked from commit 7dc5ff66c2c1d42ea55800548e0e28cc0d206c98)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/platform/x86/dell-smbios.c
diff --cc drivers/platform/x86/dell-smbios.c
index 0fd8b868847b,8541cde4cb7d..000000000000
--- a/drivers/platform/x86/dell-smbios.c
+++ b/drivers/platform/x86/dell-smbios.c
@@@ -46,6 -31,100 +46,103 @@@ static struct calling_interface_token *
  static struct device_attribute *token_location_attrs;
  static struct device_attribute *token_value_attrs;
  static struct attribute **token_attrs;
++<<<<<<< HEAD
++=======
+ static DEFINE_MUTEX(smbios_mutex);
+ 
+ struct smbios_device {
+ 	struct list_head list;
+ 	struct device *device;
+ 	int (*call_fn)(struct calling_interface_buffer *);
+ };
+ 
+ struct smbios_call {
+ 	u32 need_capability;
+ 	int cmd_class;
+ 	int cmd_select;
+ };
+ 
+ /* calls that are whitelisted for given capabilities */
+ static struct smbios_call call_whitelist[] = {
+ 	/* generally tokens are allowed, but may be further filtered or
+ 	 * restricted by token blacklist or whitelist
+ 	 */
+ 	{CAP_SYS_ADMIN,	CLASS_TOKEN_READ,	SELECT_TOKEN_STD},
+ 	{CAP_SYS_ADMIN,	CLASS_TOKEN_READ,	SELECT_TOKEN_AC},
+ 	{CAP_SYS_ADMIN,	CLASS_TOKEN_READ,	SELECT_TOKEN_BAT},
+ 	{CAP_SYS_ADMIN,	CLASS_TOKEN_WRITE,	SELECT_TOKEN_STD},
+ 	{CAP_SYS_ADMIN,	CLASS_TOKEN_WRITE,	SELECT_TOKEN_AC},
+ 	{CAP_SYS_ADMIN,	CLASS_TOKEN_WRITE,	SELECT_TOKEN_BAT},
+ 	/* used by userspace: fwupdate */
+ 	{CAP_SYS_ADMIN, CLASS_ADMIN_PROP,	SELECT_ADMIN_PROP},
+ 	/* used by userspace: fwupd */
+ 	{CAP_SYS_ADMIN,	CLASS_INFO,		SELECT_DOCK},
+ 	{CAP_SYS_ADMIN,	CLASS_FLASH_INTERFACE,	SELECT_FLASH_INTERFACE},
+ };
+ 
+ /* calls that are explicitly blacklisted */
+ static struct smbios_call call_blacklist[] = {
+ 	{0x0000,  1,  7}, /* manufacturing use */
+ 	{0x0000,  6,  5}, /* manufacturing use */
+ 	{0x0000, 11,  3}, /* write once */
+ 	{0x0000, 11,  7}, /* write once */
+ 	{0x0000, 11, 11}, /* write once */
+ 	{0x0000, 19, -1}, /* diagnostics */
+ 	/* handled by kernel: dell-laptop */
+ 	{0x0000, CLASS_INFO, SELECT_RFKILL},
+ 	{0x0000, CLASS_KBD_BACKLIGHT, SELECT_KBD_BACKLIGHT},
+ };
+ 
+ struct token_range {
+ 	u32 need_capability;
+ 	u16 min;
+ 	u16 max;
+ };
+ 
+ /* tokens that are whitelisted for given capabilities */
+ static struct token_range token_whitelist[] = {
+ 	/* used by userspace: fwupdate */
+ 	{CAP_SYS_ADMIN,	CAPSULE_EN_TOKEN,	CAPSULE_DIS_TOKEN},
+ 	/* can indicate to userspace that WMI is needed */
+ 	{0x0000,	WSMT_EN_TOKEN,		WSMT_DIS_TOKEN}
+ };
+ 
+ /* tokens that are explicitly blacklisted */
+ static struct token_range token_blacklist[] = {
+ 	{0x0000, 0x0058, 0x0059}, /* ME use */
+ 	{0x0000, 0x00CD, 0x00D0}, /* raid shadow copy */
+ 	{0x0000, 0x013A, 0x01FF}, /* sata shadow copy */
+ 	{0x0000, 0x0175, 0x0176}, /* write once */
+ 	{0x0000, 0x0195, 0x0197}, /* diagnostics */
+ 	{0x0000, 0x01DC, 0x01DD}, /* manufacturing use */
+ 	{0x0000, 0x027D, 0x0284}, /* diagnostics */
+ 	{0x0000, 0x02E3, 0x02E3}, /* manufacturing use */
+ 	{0x0000, 0x02FF, 0x02FF}, /* manufacturing use */
+ 	{0x0000, 0x0300, 0x0302}, /* manufacturing use */
+ 	{0x0000, 0x0325, 0x0326}, /* manufacturing use */
+ 	{0x0000, 0x0332, 0x0335}, /* fan control */
+ 	{0x0000, 0x0350, 0x0350}, /* manufacturing use */
+ 	{0x0000, 0x0363, 0x0363}, /* manufacturing use */
+ 	{0x0000, 0x0368, 0x0368}, /* manufacturing use */
+ 	{0x0000, 0x03F6, 0x03F7}, /* manufacturing use */
+ 	{0x0000, 0x049E, 0x049F}, /* manufacturing use */
+ 	{0x0000, 0x04A0, 0x04A3}, /* disagnostics */
+ 	{0x0000, 0x04E6, 0x04E7}, /* manufacturing use */
+ 	{0x0000, 0x4000, 0x7FFF}, /* internal BIOS use */
+ 	{0x0000, 0x9000, 0x9001}, /* internal BIOS use */
+ 	{0x0000, 0xA000, 0xBFFF}, /* write only */
+ 	{0x0000, 0xEFF0, 0xEFFF}, /* internal BIOS use */
+ 	/* handled by kernel: dell-laptop */
+ 	{0x0000, BRIGHTNESS_TOKEN,	BRIGHTNESS_TOKEN},
+ 	{0x0000, KBD_LED_OFF_TOKEN,	KBD_LED_AUTO_TOKEN},
+ 	{0x0000, KBD_LED_AC_TOKEN,	KBD_LED_AC_TOKEN},
+ 	{0x0000, KBD_LED_AUTO_25_TOKEN,	KBD_LED_AUTO_75_TOKEN},
+ 	{0x0000, KBD_LED_AUTO_100_TOKEN,	KBD_LED_AUTO_100_TOKEN},
+ 	{0x0000, GLOBAL_MIC_MUTE_ENABLE,	GLOBAL_MIC_MUTE_DISABLE},
+ };
+ 
+ static LIST_HEAD(smbios_device_list);
++>>>>>>> 7dc5ff66c2c1 (platform/x86: dell-smbios: Correct notation for filtering)
  
  int dell_smbios_error(int value)
  {
* Unmerged path drivers/platform/x86/dell-smbios.c
