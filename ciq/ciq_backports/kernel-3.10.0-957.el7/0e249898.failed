cxgb4: Fix {vxlan/geneve}_port initialization

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [netdrv] cxgb4: Fix (vxlan/geneve)_port initialization (Arjun Vynipadath) [1579351]
Rebuild_FUZZ: 95.56%
commit-author Arjun Vynipadath <arjun@chelsio.com>
commit 0e249898cac811f833bdb4701b32385c1c272da5
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/0e249898.failed

adapter->rawf_cnt was not initialized, thereby
ndo_udp_tunnel_{add/del} was returning immediately
without initializing {vxlan/geneve}_port.
Also initializes mps_encap_entry refcnt.

Fixes: 846eac3fccec ("cxgb4: implement udp tunnel callbacks")
	Signed-off-by: Arjun Vynipadath <arjun@chelsio.com>
	Signed-off-by: Ganesh Goudar <ganeshgr@chelsio.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 0e249898cac811f833bdb4701b32385c1c272da5)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
#	drivers/net/ethernet/chelsio/cxgb4/t4fw_api.h
diff --cc drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
index df3df86da091,03767c0bfd5c..000000000000
--- a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
+++ b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
@@@ -4921,7 -5195,10 +4935,12 @@@ static void free_some_resources(struct 
  {
  	unsigned int i;
  
++<<<<<<< HEAD
++=======
+ 	kvfree(adapter->mps_encap);
+ 	kvfree(adapter->smt);
++>>>>>>> 0e249898cac8 (cxgb4: Fix {vxlan/geneve}_port initialization)
  	kvfree(adapter->l2t);
 -	kvfree(adapter->srq);
  	t4_cleanup_sched(adapter);
  	kvfree(adapter->tids.tid_tab);
  	cxgb4_cleanup_tc_flower(adapter);
diff --cc drivers/net/ethernet/chelsio/cxgb4/t4fw_api.h
index d80a41bdc371,0e007ee72318..000000000000
--- a/drivers/net/ethernet/chelsio/cxgb4/t4fw_api.h
+++ b/drivers/net/ethernet/chelsio/cxgb4/t4fw_api.h
@@@ -1256,6 -1303,10 +1256,13 @@@ enum fw_params_param_pfvf 
  	FW_PARAMS_PARAM_PFVF_CPLFW4MSG_ENCAP = 0x31,
  	FW_PARAMS_PARAM_PFVF_HPFILTER_START = 0x32,
  	FW_PARAMS_PARAM_PFVF_HPFILTER_END = 0x33,
++<<<<<<< HEAD
++=======
+ 	FW_PARAMS_PARAM_PFVF_TLS_START = 0x34,
+ 	FW_PARAMS_PARAM_PFVF_TLS_END = 0x35,
+ 	FW_PARAMS_PARAM_PFVF_RAWF_START = 0x36,
+ 	FW_PARAMS_PARAM_PFVF_RAWF_END = 0x37,
++>>>>>>> 0e249898cac8 (cxgb4: Fix {vxlan/geneve}_port initialization)
  	FW_PARAMS_PARAM_PFVF_NCRYPTO_LOOKASIDE = 0x39,
  	FW_PARAMS_PARAM_PFVF_PORT_CAPS32 = 0x3A,
  };
* Unmerged path drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
* Unmerged path drivers/net/ethernet/chelsio/cxgb4/t4fw_api.h
