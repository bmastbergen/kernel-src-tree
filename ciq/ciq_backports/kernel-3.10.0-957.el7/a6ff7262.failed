nvme-pci: Remove unused queue parameter

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Keith Busch <keith.busch@intel.com>
commit a6ff7262c26c190f2480721703211cb12d66d45a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/a6ff7262.failed

All the queue memory is allocated up front. We don't take the node
into consideration when creating queues anymore, so removing the unused
parameter.

	Signed-off-by: Keith Busch <keith.busch@intel.com>
	Reviewed-by: Christoph Hellwig <hch@lst.de>
	Reviewed-by: Ming Lei <ming.lei@redhat.com>
	Signed-off-by: Jens Axboe <axboe@kernel.dk>
(cherry picked from commit a6ff7262c26c190f2480721703211cb12d66d45a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/nvme/host/pci.c
diff --cc drivers/nvme/host/pci.c
index d8c88b8f2414,0b3b4d9fd423..000000000000
--- a/drivers/nvme/host/pci.c
+++ b/drivers/nvme/host/pci.c
@@@ -1140,12 -1380,9 +1140,16 @@@ static int nvme_alloc_sq_cmds(struct nv
  	return 0;
  }
  
++<<<<<<< HEAD
 +static struct nvme_queue *nvme_alloc_queue(struct nvme_dev *dev, int qid,
 +							int depth)
++=======
+ static int nvme_alloc_queue(struct nvme_dev *dev, int qid, int depth)
++>>>>>>> a6ff7262c26c (nvme-pci: Remove unused queue parameter)
  {
 -	struct nvme_queue *nvmeq = &dev->queues[qid];
 +	struct nvme_queue *nvmeq = kzalloc(sizeof(*nvmeq), GFP_KERNEL);
 +	if (!nvmeq)
 +		return NULL;
  
  	if (dev->ctrl.queue_count > qid)
  		return 0;
@@@ -1367,13 -1595,11 +1371,19 @@@ static int nvme_pci_configure_admin_que
  	if (result < 0)
  		return result;
  
++<<<<<<< HEAD
 +	nvmeq = dev->queues[0];
 +	if (!nvmeq) {
 +		nvmeq = nvme_alloc_queue(dev, 0, NVME_AQ_DEPTH);
 +		if (!nvmeq)
 +			return -ENOMEM;
 +	}
++=======
+ 	result = nvme_alloc_queue(dev, 0, NVME_AQ_DEPTH);
+ 	if (result)
+ 		return result;
++>>>>>>> a6ff7262c26c (nvme-pci: Remove unused queue parameter)
  
 -	nvmeq = &dev->queues[0];
  	aqa = nvmeq->q_depth - 1;
  	aqa |= aqa << 16;
  
@@@ -1402,7 -1628,7 +1412,11 @@@ static int nvme_create_io_queues(struc
  	int ret = 0;
  
  	for (i = dev->ctrl.queue_count; i <= dev->max_qid; i++) {
++<<<<<<< HEAD
 +		if (!nvme_alloc_queue(dev, i, dev->q_depth)) {
++=======
+ 		if (nvme_alloc_queue(dev, i, dev->q_depth)) {
++>>>>>>> a6ff7262c26c (nvme-pci: Remove unused queue parameter)
  			ret = -ENOMEM;
  			break;
  		}
* Unmerged path drivers/nvme/host/pci.c
