net/mlx5e: IPoIB, Initialize max_opened_tc in mlx5i_init flow

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [netdrv] mlx5e: IPoIB, Initialize max_opened_tc in mlx5i_init flow (Alaa Hleihel) [1618609]
Rebuild_FUZZ: 96.61%
commit-author Feras Daoud <ferasda@mellanox.com>
commit 6dae6f06f0fc0096213dde2203c335938d3bde99
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/6dae6f06.failed

Enhanced ipoib does not initialize max_opened_tc causing wrong ethtool
statistics. As mlx5e_grp_sw_update_stats relies on this variable, without
this change, the TX statistics will not be updated.

Fixes: 05909babce53 ("net/mlx5e: Avoid reset netdev stats on configuration changes")
	Signed-off-by: Feras Daoud <ferasda@mellanox.com>
	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
	Signed-off-by: Tariq Toukan <tariqt@mellanox.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 6dae6f06f0fc0096213dde2203c335938d3bde99)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib.c
index 2331dd9ef4d0,37a670b6a208..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib.c
@@@ -81,10 -83,14 +81,14 @@@ void mlx5i_init(struct mlx5_core_dev *m
  	priv->netdev      = netdev;
  	priv->profile     = profile;
  	priv->ppriv       = ppriv;
++<<<<<<< HEAD
 +	priv->hard_mtu = MLX5_IB_GRH_BYTES + MLX5_IPOIB_HARD_LEN;
++=======
+ 	priv->max_opened_tc = 1;
++>>>>>>> 6dae6f06f0fc (net/mlx5e: IPoIB, Initialize max_opened_tc in mlx5i_init flow)
  	mutex_init(&priv->state_lock);
  
 -	mlx5_query_port_max_mtu(mdev, &max_mtu, 1);
 -	netdev->mtu = max_mtu;
 -
 -	mlx5e_build_nic_params(mdev, &priv->channels.params,
 -			       profile->max_nch(mdev), netdev->mtu);
 +	mlx5e_build_nic_params(mdev, &priv->channels.params, profile->max_nch(mdev));
  	mlx5i_build_nic_params(mdev, &priv->channels.params);
  
  	mlx5e_timestamp_init(priv);
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib.c
