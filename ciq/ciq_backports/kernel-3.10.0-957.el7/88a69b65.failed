IB/hfi1: Refactor get_user() IOCTLs

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Michael J. Ruhl <michael.j.ruhl@intel.com>
commit 88a69b65f36fd5d8bcba712dd2bd8c689463ccbd
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/88a69b65.failed

The IOCTL is a bit unwieldy.  Refactor to a common pattern.
Refactor _RECV_CTRL, _POLL_TYPE, _ACK_EVENT and _SET_PKEY
IOCTLs to a common pattern.

	Reviewed-by: Ira Weiny <ira.weiny@intel.com>
	Signed-off-by: Michael J. Ruhl <michael.j.ruhl@intel.com>
	Signed-off-by: Dennis Dalessandro <dennis.dalessandro@intel.com>
	Signed-off-by: Doug Ledford <dledford@redhat.com>
(cherry picked from commit 88a69b65f36fd5d8bcba712dd2bd8c689463ccbd)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/hw/hfi1/file_ops.c
diff --cc drivers/infiniband/hw/hfi1/file_ops.c
index bf663d06d4e1,4e089f2e1fbd..000000000000
--- a/drivers/infiniband/hw/hfi1/file_ops.c
+++ b/drivers/infiniband/hw/hfi1/file_ops.c
@@@ -106,11 -105,11 +106,16 @@@ static void deallocate_ctxt(struct hfi1
  static unsigned int poll_urgent(struct file *fp, struct poll_table_struct *pt);
  static unsigned int poll_next(struct file *fp, struct poll_table_struct *pt);
  static int user_event_ack(struct hfi1_ctxtdata *uctxt, u16 subctxt,
- 			  unsigned long events);
- static int set_ctxt_pkey(struct hfi1_ctxtdata *uctxt, u16 subctxt, u16 pkey);
+ 			  unsigned long arg);
+ static int set_ctxt_pkey(struct hfi1_ctxtdata *uctxt, unsigned long arg);
  static int manage_rcvq(struct hfi1_ctxtdata *uctxt, u16 subctxt,
++<<<<<<< HEAD
 +		       int start_stop);
 +static int vma_fault(struct vm_area_struct *vma, struct vm_fault *vmf);
++=======
+ 		       unsigned long arg);
+ static int vma_fault(struct vm_fault *vmf);
++>>>>>>> 88a69b65f36f (IB/hfi1: Refactor get_user() IOCTLs)
  static long hfi1_file_ioctl(struct file *fp, unsigned int cmd,
  			    unsigned long arg);
  
* Unmerged path drivers/infiniband/hw/hfi1/file_ops.c
