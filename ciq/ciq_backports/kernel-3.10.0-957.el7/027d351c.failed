net: thunderbolt: Run disconnect flow asynchronously when logout is received

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [netdrv] thunderbolt: Run disconnect flow asynchronously when logout is received (Jarod Wilson) [1495229]
Rebuild_FUZZ: 96.60%
commit-author Mika Westerberg <mika.westerberg@linux.intel.com>
commit 027d351c541744c0c780dd5801c63e4b90750b90
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/027d351c.failed

The control channel calls registered callbacks when control messages
such as XDomain protocol messages are received. The control channel
handling is done in a worker running on system workqueue which means the
networking driver can't run tear down flow which includes sending
disconnect request and waiting for a reply in the same worker. Otherwise
reply is never received (as the work is already running) and the
operation times out.

To fix this run disconnect ThunderboltIP flow asynchronously once
ThunderboltIP logout message is received.

Fixes: e69b6c02b4c3 ("net: Add support for networking over Thunderbolt cable")
	Signed-off-by: Mika Westerberg <mika.westerberg@linux.intel.com>
	Cc: stable@vger.kernel.org
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 027d351c541744c0c780dd5801c63e4b90750b90)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/thunderbolt.c
* Unmerged path drivers/net/thunderbolt.c
* Unmerged path drivers/net/thunderbolt.c
