fw_cfg: fix sparse warnings around FW_CFG_FILE_DIR read

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Marc-André Lureau <marcandre.lureau@redhat.com>
commit 3d47a34ba6761a64b78a8b89f6bbe93b4e8455f1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/3d47a34b.failed

Use struct fw_cfg_files to read the directory size, fixing the sparse
warnings:

drivers/firmware/qemu_fw_cfg.c:485:17: warning: cast to restricted __be32

	Signed-off-by: Marc-André Lureau <marcandre.lureau@redhat.com>
	Signed-off-by: Michael S. Tsirkin <mst@redhat.com>
(cherry picked from commit 3d47a34ba6761a64b78a8b89f6bbe93b4e8455f1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/firmware/qemu_fw_cfg.c
diff --cc drivers/firmware/qemu_fw_cfg.c
index 0d0d7a831ec8,00ad9b862414..000000000000
--- a/drivers/firmware/qemu_fw_cfg.c
+++ b/drivers/firmware/qemu_fw_cfg.c
@@@ -695,19 -501,17 +696,28 @@@ static int fw_cfg_register_dir_entries(
  	struct fw_cfg_file *dir;
  	size_t dir_size;
  
++<<<<<<< HEAD
 +	fw_cfg_read_blob(FW_CFG_FILE_DIR, &count, 0, sizeof(count), false);
 +	count = be32_to_cpu(count);
++=======
+ 	fw_cfg_read_blob(FW_CFG_FILE_DIR, &files_count, 0, sizeof(files_count));
+ 	count = be32_to_cpu(files_count);
++>>>>>>> 3d47a34ba676 (fw_cfg: fix sparse warnings around FW_CFG_FILE_DIR read)
  	dir_size = count * sizeof(struct fw_cfg_file);
  
  	dir = kmalloc(dir_size, GFP_KERNEL);
  	if (!dir)
  		return -ENOMEM;
  
++<<<<<<< HEAD
 +	fw_cfg_read_blob(FW_CFG_FILE_DIR, dir, sizeof(count), dir_size, true);
++=======
+ 	fw_cfg_read_blob(FW_CFG_FILE_DIR, dir, sizeof(files_count), dir_size);
++>>>>>>> 3d47a34ba676 (fw_cfg: fix sparse warnings around FW_CFG_FILE_DIR read)
  
  	for (i = 0; i < count; i++) {
 +		dir[i].size = be32_to_cpu(dir[i].size);
 +		dir[i].select = be16_to_cpu(dir[i].select);
  		ret = fw_cfg_register_file(&dir[i]);
  		if (ret)
  			break;
* Unmerged path drivers/firmware/qemu_fw_cfg.c
