target: support XCOPY requests without parameters

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [target] support XCOPY requests without parameters (Maurizio Lombardi) [1585081]
Rebuild_FUZZ: 91.11%
commit-author David Disseldorp <ddiss@suse.de>
commit 87156518da94a696f2b27ab8945d531af2f1d339
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/87156518.failed

SPC4r37 6.4.1 EXTENDED COPY(LID4) states (also applying to LID1 reqs):
  A parameter list length of zero specifies that the copy manager shall
  not transfer any data or alter any internal state, and this shall not
  be considered an error.

This behaviour can be tested using the libiscsi ExtendedCopy.ParamHdr
test.

	Signed-off-by: David Disseldorp <ddiss@suse.de>
	Reviewed-by: Christoph Hellwig <hch@lst.de>
	Signed-off-by: Bart Van Assche <bart.vanassche@sandisk.com>
(cherry picked from commit 87156518da94a696f2b27ab8945d531af2f1d339)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/target/target_core_xcopy.c
diff --cc drivers/target/target_core_xcopy.c
index 70a04a8dc2fb,d828b3b5000b..000000000000
--- a/drivers/target/target_core_xcopy.c
+++ b/drivers/target/target_core_xcopy.c
@@@ -888,6 -888,16 +888,19 @@@ sense_reason_t target_do_xcopy(struct s
  		return TCM_UNSUPPORTED_SCSI_OPCODE;
  	}
  
++<<<<<<< HEAD
++=======
+ 	if (se_cmd->data_length == 0) {
+ 		target_complete_cmd(se_cmd, SAM_STAT_GOOD);
+ 		return TCM_NO_SENSE;
+ 	}
+ 	if (se_cmd->data_length < XCOPY_HDR_LEN) {
+ 		pr_err("XCOPY parameter truncation: length %u < hdr_len %u\n",
+ 				se_cmd->data_length, XCOPY_HDR_LEN);
+ 		return TCM_PARAMETER_LIST_LENGTH_ERROR;
+ 	}
+ 
++>>>>>>> 87156518da94 (target: support XCOPY requests without parameters)
  	xop = kzalloc(sizeof(struct xcopy_op), GFP_KERNEL);
  	if (!xop) {
  		pr_err("Unable to allocate xcopy_op\n");
* Unmerged path drivers/target/target_core_xcopy.c
