net: thunderbolt: Clear finished Tx frame bus address in tbnet_tx_callback()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [netdrv] thunderbolt: Clear finished Tx frame bus address in tbnet_tx_callback() (Jarod Wilson) [1495229]
Rebuild_FUZZ: 96.60%
commit-author Mika Westerberg <mika.westerberg@linux.intel.com>
commit 86dabda426ac33f4782854ef71f0c9adafd24134
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/86dabda4.failed

When Thunderbolt network interface is disabled or when the cable is
unplugged the driver releases all allocated buffers by calling
tbnet_free_buffers() for each ring. This function then calls
dma_unmap_page() for each buffer it finds where bus address is non-zero.
Now, we only clear this bus address when the Tx buffer is sent to the
hardware so it is possible that the function finds an entry that has
already been unmapped.

Enabling DMA-API debugging catches this as well:

  thunderbolt 0000:06:00.0: DMA-API: device driver tries to free DMA
    memory it has not allocated [device address=0x0000000068321000] [size=4096 bytes]

Fix this by clearing the bus address of a Tx frame right after we have
unmapped the buffer.

	Signed-off-by: Mika Westerberg <mika.westerberg@linux.intel.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 86dabda426ac33f4782854ef71f0c9adafd24134)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/thunderbolt.c
* Unmerged path drivers/net/thunderbolt.c
* Unmerged path drivers/net/thunderbolt.c
