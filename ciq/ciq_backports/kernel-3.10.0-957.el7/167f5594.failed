kernel/memremap: Remove stale devres_free() call

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [kernel] memremap: Remove stale devres_free() call (Jeff Moyer) [1505291]
Rebuild_FUZZ: 92.13%
commit-author Oliver O'Halloran <oohall@gmail.com>
commit 167f5594b5efa20a26ff03b3424f793887e6b448
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/167f5594.failed

devm_memremap_pages() was re-worked in e8d513483300 "memremap: change
devm_memremap_pages interface to use struct dev_pagemap" to take a
caller allocated struct dev_pagemap as a function parameter. A call to
devres_free() was left in the error cleanup path which results in a
kernel panic if the remap fails for some reason. Remove it to fix the
panic and let devm_memremap_pages() fail gracefully.

Fixes: e8d513483300 ("memremap: change devm_memremap_pages interface...")
	Signed-off-by: Oliver O'Halloran <oohall@gmail.com>
	Reviewed-by: Christoph Hellwig <hch@lst.de>
	Reviewed-by: Logan Gunthorpe <logang@deltatee.com>
	Signed-off-by: Dan Williams <dan.j.williams@intel.com>
(cherry picked from commit 167f5594b5efa20a26ff03b3424f793887e6b448)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	kernel/memremap.c
diff --cc kernel/memremap.c
index eca98ec515d8,895e6b76b25e..000000000000
--- a/kernel/memremap.c
+++ b/kernel/memremap.c
@@@ -462,8 -426,7 +462,12 @@@ void *devm_memremap_pages(struct devic
  	untrack_pfn(NULL, PHYS_PFN(align_start), align_size);
   err_pfn_remap:
   err_radix:
++<<<<<<< HEAD
 +	pgmap_radix_release(res);
 +	devres_free(page_map);
++=======
+ 	pgmap_radix_release(res, pgoff);
++>>>>>>> 167f5594b5ef (kernel/memremap: Remove stale devres_free() call)
  	return ERR_PTR(error);
  }
  EXPORT_SYMBOL(devm_memremap_pages);
* Unmerged path kernel/memremap.c
