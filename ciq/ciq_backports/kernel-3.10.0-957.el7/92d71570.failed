scsi: qla2xxx: Add XCB counters to debugfs

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [scsi] qla2xxx: Add XCB counters to debugfs (Himanshu Madhani) [1547714]
Rebuild_FUZZ: 92.31%
commit-author Anil Gurumurthy <anil.gurumurthy@cavium.com>
commit 92d71570b66a5d09cc6e50e88671a6828168857a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/92d71570.failed

	Signed-off-by: Anil Gurumurthy <anil.gurumurthy@cavium.com>
	Signed-off-by: Himanshu Madhani <himanshu.madhani@cavium.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit 92d71570b66a5d09cc6e50e88671a6828168857a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/qla2xxx/qla_dfs.c
diff --cc drivers/scsi/qla2xxx/qla_dfs.c
index 6d5a5cabfbe3,0b190082aa8d..000000000000
--- a/drivers/scsi/qla2xxx/qla_dfs.c
+++ b/drivers/scsi/qla2xxx/qla_dfs.c
@@@ -127,21 -127,32 +127,47 @@@ static in
  qla_dfs_fw_resource_cnt_show(struct seq_file *s, void *unused)
  {
  	struct scsi_qla_host *vha = s->private;
 -	uint16_t mb[MAX_IOCB_MB_REG];
 -	int rc;
 +	struct qla_hw_data *ha = vha->hw;
  
++<<<<<<< HEAD
 +	seq_puts(s, "FW Resource count\n\n");
 +	seq_printf(s, "Original TGT exchg count[%d]\n",
 +	    ha->orig_fw_tgt_xcb_count);
 +	seq_printf(s, "current TGT exchg count[%d]\n",
 +	    ha->cur_fw_tgt_xcb_count);
 +	seq_printf(s, "original Initiator Exchange count[%d]\n",
 +	    ha->orig_fw_xcb_count);
 +	seq_printf(s, "Current Initiator Exchange count[%d]\n",
 +	    ha->cur_fw_xcb_count);
 +	seq_printf(s, "Original IOCB count[%d]\n", ha->orig_fw_iocb_count);
 +	seq_printf(s, "Current IOCB count[%d]\n", ha->cur_fw_iocb_count);
 +	seq_printf(s, "MAX VP count[%d]\n", ha->max_npiv_vports);
 +	seq_printf(s, "MAX FCF count[%d]\n", ha->fw_max_fcf_count);
++=======
+ 	rc = qla24xx_res_count_wait(vha, mb, SIZEOF_IOCB_MB_REG);
+ 	if (rc != QLA_SUCCESS) {
+ 		seq_printf(s, "Mailbox Command failed %d, mb %#x", rc, mb[0]);
+ 	} else {
+ 		seq_puts(s, "FW Resource count\n\n");
+ 		seq_printf(s, "Original TGT exchg count[%d]\n", mb[1]);
+ 		seq_printf(s, "current TGT exchg count[%d]\n", mb[2]);
+ 		seq_printf(s, "original Initiator Exchange count[%d]\n", mb[3]);
+ 		seq_printf(s, "Current Initiator Exchange count[%d]\n", mb[6]);
+ 		seq_printf(s, "Original IOCB count[%d]\n", mb[7]);
+ 		seq_printf(s, "Current IOCB count[%d]\n", mb[10]);
+ 		seq_printf(s, "MAX VP count[%d]\n", mb[11]);
+ 		seq_printf(s, "MAX FCF count[%d]\n", mb[12]);
+ 		seq_printf(s, "Current free pageable XCB buffer cnt[%d]\n",
+ 		    mb[20]);
+ 		seq_printf(s, "Original Initiator fast XCB buffer cnt[%d]\n",
+ 		    mb[21]);
+ 		seq_printf(s, "Current free Initiator fast XCB buffer cnt[%d]\n",
+ 		    mb[22]);
+ 		seq_printf(s, "Original Target fast XCB buffer cnt[%d]\n",
+ 		    mb[23]);
+ 
+ 	}
++>>>>>>> 92d71570b66a (scsi: qla2xxx: Add XCB counters to debugfs)
  
  	return 0;
  }
* Unmerged path drivers/scsi/qla2xxx/qla_dfs.c
