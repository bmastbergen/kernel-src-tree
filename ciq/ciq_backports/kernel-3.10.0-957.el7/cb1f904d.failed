ASoC: Intel: Skylake: Refine skl widget type check

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [sound] alsa: asoc: intel: skylake: Refine skl widget type check (Jaroslav Kysela) [1535427]
Rebuild_FUZZ: 94.34%
commit-author Guneshwor Singh <guneshwor.o.singh@intel.com>
commit cb1f904d91c52bc4e03e11eb161288c40c655095
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/cb1f904d.failed

The current check is not effective when all the widgets of a card are
involved since other widgets also can be of same type. So, make widget
type check more stringent by checking dev pointer additionally.

	Signed-off-by: Guneshwor Singh <guneshwor.o.singh@intel.com>
	Signed-off-by: Mark Brown <broonie@kernel.org>
(cherry picked from commit cb1f904d91c52bc4e03e11eb161288c40c655095)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/soc/intel/skylake/skl-topology.c
diff --cc sound/soc/intel/skylake/skl-topology.c
index ff182bdb3d38,dbe6a19b84f5..000000000000
--- a/sound/soc/intel/skylake/skl-topology.c
+++ b/sound/soc/intel/skylake/skl-topology.c
@@@ -2833,8 -2756,8 +2837,13 @@@ void skl_cleanup_resources(struct skl *
  	skl->resource.mcps = 0;
  
  	list_for_each_entry(w, &card->widgets, list) {
++<<<<<<< HEAD
 +		if (is_skl_dsp_widget_type(w) && (w->priv != NULL))
 +			skl_clear_pin_config(soc_component, w);
++=======
+ 		if (is_skl_dsp_widget_type(w, ctx->dev) && w->priv != NULL)
+ 			skl_clear_pin_config(soc_platform, w);
++>>>>>>> cb1f904d91c5 (ASoC: Intel: Skylake: Refine skl widget type check)
  	}
  
  	skl_clear_module_cnt(ctx->dsp);
@@@ -3488,8 -3411,8 +3497,13 @@@ static int skl_tplg_create_pipe_widget_
  	struct skl_pipe_module *p_module = NULL;
  	struct skl_pipe *pipe;
  
++<<<<<<< HEAD
 +	list_for_each_entry(w, &component->card->widgets, list) {
 +		if (is_skl_dsp_widget_type(w) && w->priv != NULL) {
++=======
+ 	list_for_each_entry(w, &platform->component.card->widgets, list) {
+ 		if (is_skl_dsp_widget_type(w, platform->dev) && w->priv) {
++>>>>>>> cb1f904d91c5 (ASoC: Intel: Skylake: Refine skl widget type check)
  			mcfg = w->priv;
  			pipe = mcfg->pipe;
  
* Unmerged path sound/soc/intel/skylake/skl-topology.c
