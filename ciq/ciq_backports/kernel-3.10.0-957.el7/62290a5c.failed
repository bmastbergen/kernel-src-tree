watchdog: hpwdt: Claim NMIs generated by iLO5

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
Rebuild_CHGLOG: - [watchdog] hpwdt: Claim NMIs generated by iLO5 (Joseph Szczypek) [1555073]
Rebuild_FUZZ: 87.50%
commit-author Jerry Hoemann <jerry.hoemann@hpe.com>
commit 62290a5c194b30a096cbcc6bb8680a5a1e627714
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/62290a5c.failed

On iLO5 going forward we want to return and not claim the NMI, if
the NMI was NOT gnerated by the iLO as a result of the watchdog
timing out or an explicit generate NMI.

The sense of the test in is inverted and prevents hpwdt_pretimeout
from claiming NMIs when it should.

	Signed-off-by: Jerry Hoemann <jerry.hoemann@hpe.com>
Fixes: a042229a18ac ("watchdog: hpwdt: Update nmi_panic message.")
	Reviewed-by: Guenter Roeck <linux@roeck-us.net>
	Signed-off-by: Guenter Roeck <linux@roeck-us.net>
	Signed-off-by: Wim Van Sebroeck <wim@iguana.be>
(cherry picked from commit 62290a5c194b30a096cbcc6bb8680a5a1e627714)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/watchdog/hpwdt.c
diff --cc drivers/watchdog/hpwdt.c
index 059c4478bc3b,9dc62a461451..000000000000
--- a/drivers/watchdog/hpwdt.c
+++ b/drivers/watchdog/hpwdt.c
@@@ -507,7 -157,18 +507,22 @@@ static int hpwdt_pretimeout(unsigned in
  		"1. Integrated Management Log (IML)\n"
  		"2. OA Syslog\n"
  		"3. OA Forward Progress Log\n"
++<<<<<<< HEAD
 +		"4. iLO Event Log");
++=======
+ 		"4. iLO Event Log";
+ 
+ 	if (ilo5 && ulReason == NMI_UNKNOWN && !mynmi)
+ 		return NMI_DONE;
+ 
+ 	if (ilo5 && !pretimeout)
+ 		return NMI_DONE;
+ 
+ 	hpwdt_stop();
+ 
+ 	hex_byte_pack(panic_msg, mynmi);
+ 	nmi_panic(regs, panic_msg);
++>>>>>>> 62290a5c194b (watchdog: hpwdt: Claim NMIs generated by iLO5)
  
  	return NMI_HANDLED;
  }
* Unmerged path drivers/watchdog/hpwdt.c
