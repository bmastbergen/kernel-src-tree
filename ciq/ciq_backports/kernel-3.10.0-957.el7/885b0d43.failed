mlxsw: spectrum_span: Fix initialization of struct mlxsw_sp_span_parms

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Petr Machata <petrm@mellanox.com>
commit 885b0d4375a102d002bc654b4b68da46ba060032
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/885b0d43.failed

Since the first element of struct mlxsw_sp_span_parms is a pointer,
to zero-initialize this structure the correct notation is not = {0}, but
rather = {NULL}, as reported by sparse.

	Signed-off-by: Petr Machata <petrm@mellanox.com>
	Acked-by: Jiri Pirko <jiri@mellanox.com>
	Signed-off-by: Ido Schimmel <idosch@mellanox.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 885b0d4375a102d002bc654b4b68da46ba060032)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlxsw/spectrum_span.c
diff --cc drivers/net/ethernet/mellanox/mlxsw/spectrum_span.c
index a025a77a589d,ac24e52d74db..000000000000
--- a/drivers/net/ethernet/mellanox/mlxsw/spectrum_span.c
+++ b/drivers/net/ethernet/mellanox/mlxsw/spectrum_span.c
@@@ -329,11 -710,27 +329,16 @@@ mlxsw_sp_span_inspected_port_del(struc
  	kfree(inspected_port);
  }
  
 -static const struct mlxsw_sp_span_entry_ops *
 -mlxsw_sp_span_entry_ops(struct mlxsw_sp *mlxsw_sp,
 -			const struct net_device *to_dev)
 -{
 -	size_t i;
 -
 -	for (i = 0; i < ARRAY_SIZE(mlxsw_sp_span_entry_types); ++i)
 -		if (mlxsw_sp_span_entry_types[i]->can_handle(to_dev))
 -			return mlxsw_sp_span_entry_types[i];
 -
 -	return NULL;
 -}
 -
  int mlxsw_sp_span_mirror_add(struct mlxsw_sp_port *from,
 -			     const struct net_device *to_dev,
 -			     enum mlxsw_sp_span_type type, bool bind,
 -			     int *p_span_id)
 +			     struct mlxsw_sp_port *to,
 +			     enum mlxsw_sp_span_type type, bool bind)
  {
  	struct mlxsw_sp *mlxsw_sp = from->mlxsw_sp;
++<<<<<<< HEAD
++=======
+ 	const struct mlxsw_sp_span_entry_ops *ops;
+ 	struct mlxsw_sp_span_parms sparms = {NULL};
++>>>>>>> 885b0d4375a1 (mlxsw: spectrum_span: Fix initialization of struct mlxsw_sp_span_parms)
  	struct mlxsw_sp_span_entry *span_entry;
  	int err;
  
@@@ -371,3 -778,27 +376,30 @@@ void mlxsw_sp_span_mirror_del(struct ml
  		   span_entry->id);
  	mlxsw_sp_span_inspected_port_del(from, span_entry, type, bind);
  }
++<<<<<<< HEAD
++=======
+ 
+ void mlxsw_sp_span_respin(struct mlxsw_sp *mlxsw_sp)
+ {
+ 	int i;
+ 	int err;
+ 
+ 	ASSERT_RTNL();
+ 	for (i = 0; i < mlxsw_sp->span.entries_count; i++) {
+ 		struct mlxsw_sp_span_entry *curr = &mlxsw_sp->span.entries[i];
+ 		struct mlxsw_sp_span_parms sparms = {NULL};
+ 
+ 		if (!curr->ref_count)
+ 			continue;
+ 
+ 		err = curr->ops->parms(curr->to_dev, &sparms);
+ 		if (err)
+ 			continue;
+ 
+ 		if (memcmp(&sparms, &curr->parms, sizeof(sparms))) {
+ 			mlxsw_sp_span_entry_deconfigure(curr);
+ 			mlxsw_sp_span_entry_configure(mlxsw_sp, curr, sparms);
+ 		}
+ 	}
+ }
++>>>>>>> 885b0d4375a1 (mlxsw: spectrum_span: Fix initialization of struct mlxsw_sp_span_parms)
* Unmerged path drivers/net/ethernet/mellanox/mlxsw/spectrum_span.c
