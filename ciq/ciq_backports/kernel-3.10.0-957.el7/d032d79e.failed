perf trace: Use the syscall_fmt formatters without a tracepoint

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Arnaldo Carvalho de Melo <acme@redhat.com>
commit d032d79e2dcb56e13678bf2cc7b36957ef827c32
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/d032d79e.failed

Previously we only used the syscall_fmt when we had sc->tp_format set,
i.e. when we found the (enter, exit) pair in tracefs/events/syscalls/.

But we really only need to use what is in sc->arg_fmt to apply the arg
beautifiers to the syscall argument values, so do it.

With this we will be able to provide formatters to the "clone" syscall,
which doesn't have entries in tracefs/events/syscalls/.

	Cc: Adrian Hunter <adrian.hunter@intel.com>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Jiri Olsa <jolsa@kernel.org>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Wang Nan <wangnan0@huawei.com>
Link: http://lkml.kernel.org/n/tip-y41nl41jrayjo5ucnde2peix@git.kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit d032d79e2dcb56e13678bf2cc7b36957ef827c32)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/builtin-trace.c
diff --cc tools/perf/builtin-trace.c
index 5114abbd2e32,fc4d33a6aa58..000000000000
--- a/tools/perf/builtin-trace.c
+++ b/tools/perf/builtin-trace.c
@@@ -1425,16 -1410,7 +1437,20 @@@ static size_t syscall__scnprintf_args(s
  
  			printed += scnprintf(bf + printed, size - printed,
  					     "%s%s: ", printed ? ", " : "", field->name);
++<<<<<<< HEAD
 +			if (sc->arg_scnprintf && sc->arg_scnprintf[arg.idx]) {
 +				arg.val = val;
 +				if (sc->arg_parm)
 +					arg.parm = sc->arg_parm[arg.idx];
 +				printed += sc->arg_scnprintf[arg.idx](bf + printed,
 +								      size - printed, &arg);
 +			} else {
 +				printed += scnprintf(bf + printed, size - printed,
 +						     "%ld", val);
 +			}
++=======
+ 			printed += syscall__scnprintf_val(sc, bf + printed, size - printed, &arg, val);
++>>>>>>> d032d79e2dcb (perf trace: Use the syscall_fmt formatters without a tracepoint)
  		}
  	} else if (IS_ERR(sc->tp_format)) {
  		/*
* Unmerged path tools/perf/builtin-trace.c
