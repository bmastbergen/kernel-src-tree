drm/amd/display: release spinlock before committing updates to stream

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-957.el7
commit-author Shirish S <shirish.s@amd.com>
commit 4de9f38bb2cce3a4821ffb8a83d6b08f6e37d905
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-957.el7/4de9f38b.failed

Currently, amdgpu_do_flip() spinlocks crtc->dev->event_lock and
releases it only after committing updates to the stream.

dc_commit_updates_for_stream() should be moved out of
spinlock for the below reasons:

1. event_lock is supposed to protect access to acrct->pflip_status _only_
2. dc_commit_updates_for_stream() has potential sleep's
   and also its not appropriate to be  in an atomic state
   for such long sequences of code.

	Signed-off-by: Shirish S <shirish.s@amd.com>
	Suggested-by: Andrey Grodzovsky <andrey.grodzovsky@amd.com>
	Reviewed-by: Michel DÃ¤nzer <michel.daenzer@amd.com>
	Reviewed-by: Harry Wentland <harry.wentland@amd.com>
	Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
	Cc: stable@vger.kernel.org
(cherry picked from commit 4de9f38bb2cce3a4821ffb8a83d6b08f6e37d905)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c
* Unmerged path drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c
* Unmerged path drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c
