RDMA/uverbs: Make all the method functions in uverbs_cmd static

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Jason Gunthorpe <jgg@mellanox.com>
commit 1de751caf7d52debd9820dbcd0190c6306f3f7b0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/1de751ca.failed

Now that we use struct uverbs_uapi to link the method functions to the
dispatcher there is no reason to have them be extern symbols.

	Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
	Signed-off-by: Leon Romanovsky <leonro@mellanox.com>
(cherry picked from commit 1de751caf7d52debd9820dbcd0190c6306f3f7b0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/core/uverbs.h
#	drivers/infiniband/core/uverbs_cmd.c
diff --cc drivers/infiniband/core/uverbs.h
index f227bb6565ad,8b41c95300c6..000000000000
--- a/drivers/infiniband/core/uverbs.h
+++ b/drivers/infiniband/core/uverbs.h
@@@ -282,66 -290,8 +282,69 @@@ extern const struct uverbs_object_def U
  extern const struct uverbs_object_def UVERBS_OBJECT(UVERBS_OBJECT_WQ);
  extern const struct uverbs_object_def UVERBS_OBJECT(UVERBS_OBJECT_RWQ_IND_TBL);
  extern const struct uverbs_object_def UVERBS_OBJECT(UVERBS_OBJECT_XRCD);
 -extern const struct uverbs_object_def UVERBS_OBJECT(UVERBS_OBJECT_FLOW_ACTION);
 -extern const struct uverbs_object_def UVERBS_OBJECT(UVERBS_OBJECT_DM);
 -extern const struct uverbs_object_def UVERBS_OBJECT(UVERBS_OBJECT_COUNTERS);
  
++<<<<<<< HEAD
 +#define IB_UVERBS_DECLARE_CMD(name)					\
 +	ssize_t ib_uverbs_##name(struct ib_uverbs_file *file,		\
 +				 struct ib_device *ib_dev,              \
 +				 const char __user *buf, int in_len,	\
 +				 int out_len)
 +
 +IB_UVERBS_DECLARE_CMD(get_context);
 +IB_UVERBS_DECLARE_CMD(query_device);
 +IB_UVERBS_DECLARE_CMD(query_port);
 +IB_UVERBS_DECLARE_CMD(alloc_pd);
 +IB_UVERBS_DECLARE_CMD(dealloc_pd);
 +IB_UVERBS_DECLARE_CMD(reg_mr);
 +IB_UVERBS_DECLARE_CMD(rereg_mr);
 +IB_UVERBS_DECLARE_CMD(dereg_mr);
 +IB_UVERBS_DECLARE_CMD(alloc_mw);
 +IB_UVERBS_DECLARE_CMD(dealloc_mw);
 +IB_UVERBS_DECLARE_CMD(create_comp_channel);
 +IB_UVERBS_DECLARE_CMD(create_cq);
 +IB_UVERBS_DECLARE_CMD(resize_cq);
 +IB_UVERBS_DECLARE_CMD(poll_cq);
 +IB_UVERBS_DECLARE_CMD(req_notify_cq);
 +IB_UVERBS_DECLARE_CMD(destroy_cq);
 +IB_UVERBS_DECLARE_CMD(create_qp);
 +IB_UVERBS_DECLARE_CMD(open_qp);
 +IB_UVERBS_DECLARE_CMD(query_qp);
 +IB_UVERBS_DECLARE_CMD(modify_qp);
 +IB_UVERBS_DECLARE_CMD(destroy_qp);
 +IB_UVERBS_DECLARE_CMD(post_send);
 +IB_UVERBS_DECLARE_CMD(post_recv);
 +IB_UVERBS_DECLARE_CMD(post_srq_recv);
 +IB_UVERBS_DECLARE_CMD(create_ah);
 +IB_UVERBS_DECLARE_CMD(destroy_ah);
 +IB_UVERBS_DECLARE_CMD(attach_mcast);
 +IB_UVERBS_DECLARE_CMD(detach_mcast);
 +IB_UVERBS_DECLARE_CMD(create_srq);
 +IB_UVERBS_DECLARE_CMD(modify_srq);
 +IB_UVERBS_DECLARE_CMD(query_srq);
 +IB_UVERBS_DECLARE_CMD(destroy_srq);
 +IB_UVERBS_DECLARE_CMD(create_xsrq);
 +IB_UVERBS_DECLARE_CMD(open_xrcd);
 +IB_UVERBS_DECLARE_CMD(close_xrcd);
 +
 +#define IB_UVERBS_DECLARE_EX_CMD(name)				\
 +	int ib_uverbs_ex_##name(struct ib_uverbs_file *file,	\
 +				struct ib_device *ib_dev,		\
 +				struct ib_udata *ucore,		\
 +				struct ib_udata *uhw)
 +
 +IB_UVERBS_DECLARE_EX_CMD(create_flow);
 +IB_UVERBS_DECLARE_EX_CMD(destroy_flow);
 +IB_UVERBS_DECLARE_EX_CMD(query_device);
 +IB_UVERBS_DECLARE_EX_CMD(create_cq);
 +IB_UVERBS_DECLARE_EX_CMD(create_qp);
 +IB_UVERBS_DECLARE_EX_CMD(create_wq);
 +IB_UVERBS_DECLARE_EX_CMD(modify_wq);
 +IB_UVERBS_DECLARE_EX_CMD(destroy_wq);
 +IB_UVERBS_DECLARE_EX_CMD(create_rwq_ind_table);
 +IB_UVERBS_DECLARE_EX_CMD(destroy_rwq_ind_table);
 +IB_UVERBS_DECLARE_EX_CMD(modify_qp);
 +IB_UVERBS_DECLARE_EX_CMD(modify_cq);
 +
++=======
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  #endif /* UVERBS_H */
diff --cc drivers/infiniband/core/uverbs_cmd.c
index 507521d53e3f,7c7ec1575511..000000000000
--- a/drivers/infiniband/core/uverbs_cmd.c
+++ b/drivers/infiniband/core/uverbs_cmd.c
@@@ -60,15 -59,15 +60,21 @@@ ib_uverbs_lookup_comp_file(int fd, stru
  	uverbs_uobject_get(uobj);
  	uobj_put_read(uobj);
  
 -	return container_of(uobj, struct ib_uverbs_completion_event_file,
 -			    uobj);
 +	uobj_file = container_of(uobj, struct ib_uobject_file, uobj);
 +	return container_of(uobj_file, struct ib_uverbs_completion_event_file,
 +			    uobj_file);
  }
 -#define ib_uverbs_lookup_comp_file(_fd, _ufile)                                \
 -	_ib_uverbs_lookup_comp_file((_fd)*typecheck(s32, _fd), _ufile)
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_get_context(struct ib_uverbs_file *file,
 +			      struct ib_device *ib_dev,
 +			      const char __user *buf,
 +			      int in_len, int out_len)
++=======
+ static ssize_t ib_uverbs_get_context(struct ib_uverbs_file *file,
+ 				     const char __user *buf, int in_len,
+ 				     int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_get_context      cmd;
  	struct ib_uverbs_get_context_resp resp;
@@@ -211,10 -224,9 +217,16 @@@ static void copy_query_dev_fields(struc
  	resp->phys_port_cnt		= ib_dev->phys_port_cnt;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_query_device(struct ib_uverbs_file *file,
 +			       struct ib_device *ib_dev,
 +			       const char __user *buf,
 +			       int in_len, int out_len)
++=======
+ static ssize_t ib_uverbs_query_device(struct ib_uverbs_file *file,
+ 				      const char __user *buf, int in_len,
+ 				      int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_query_device      cmd;
  	struct ib_uverbs_query_device_resp resp;
@@@ -234,10 -251,30 +246,37 @@@
  	return in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_query_port(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     const char __user *buf,
 +			     int in_len, int out_len)
++=======
+ /*
+  * ib_uverbs_query_port_resp.port_cap_flags started out as just a copy of the
+  * PortInfo CapabilityMask, but was extended with unique bits.
+  */
+ static u32 make_port_cap_flags(const struct ib_port_attr *attr)
+ {
+ 	u32 res;
+ 
+ 	/* All IBA CapabilityMask bits are passed through here, except bit 26,
+ 	 * which is overridden with IP_BASED_GIDS. This is due to a historical
+ 	 * mistake in the implementation of IP_BASED_GIDS. Otherwise all other
+ 	 * bits match the IBA definition across all kernel versions.
+ 	 */
+ 	res = attr->port_cap_flags & ~(u32)IB_UVERBS_PCF_IP_BASED_GIDS;
+ 
+ 	if (attr->ip_gids)
+ 		res |= IB_UVERBS_PCF_IP_BASED_GIDS;
+ 
+ 	return res;
+ }
+ 
+ static ssize_t ib_uverbs_query_port(struct ib_uverbs_file *file,
+ 				    const char __user *buf, int in_len,
+ 				    int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_query_port      cmd;
  	struct ib_uverbs_query_port_resp resp;
@@@ -290,10 -337,9 +329,16 @@@
  	return in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_alloc_pd(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   const char __user *buf,
 +			   int in_len, int out_len)
++=======
+ static ssize_t ib_uverbs_alloc_pd(struct ib_uverbs_file *file,
+ 				  const char __user *buf, int in_len,
+ 				  int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_alloc_pd      cmd;
  	struct ib_uverbs_alloc_pd_resp resp;
@@@ -351,10 -396,9 +396,16 @@@ err
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_dealloc_pd(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     const char __user *buf,
 +			     int in_len, int out_len)
++=======
+ static ssize_t ib_uverbs_dealloc_pd(struct ib_uverbs_file *file,
+ 				    const char __user *buf, int in_len,
+ 				    int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_dealloc_pd cmd;
  
@@@ -450,10 -494,9 +501,16 @@@ static void xrcd_table_delete(struct ib
  	}
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_open_xrcd(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    const char __user *buf, int in_len,
 +			    int out_len)
++=======
+ static ssize_t ib_uverbs_open_xrcd(struct ib_uverbs_file *file,
+ 				   const char __user *buf, int in_len,
+ 				   int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_open_xrcd	cmd;
  	struct ib_uverbs_open_xrcd_resp	resp;
@@@ -573,10 -615,9 +630,16 @@@ err_tree_mutex_unlock
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_close_xrcd(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     const char __user *buf, int in_len,
 +			     int out_len)
++=======
+ static ssize_t ib_uverbs_close_xrcd(struct ib_uverbs_file *file,
+ 				    const char __user *buf, int in_len,
+ 				    int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_close_xrcd cmd;
  
@@@ -608,10 -653,8 +671,15 @@@ int ib_uverbs_dealloc_xrcd(struct ib_uv
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_reg_mr(struct ib_uverbs_file *file,
 +			 struct ib_device *ib_dev,
 +			 const char __user *buf, int in_len,
 +			 int out_len)
++=======
+ static ssize_t ib_uverbs_reg_mr(struct ib_uverbs_file *file,
+ 				const char __user *buf, int in_len, int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_reg_mr      cmd;
  	struct ib_uverbs_reg_mr_resp resp;
@@@ -700,10 -744,9 +768,16 @@@ err_free
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_rereg_mr(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   const char __user *buf, int in_len,
 +			   int out_len)
++=======
+ static ssize_t ib_uverbs_rereg_mr(struct ib_uverbs_file *file,
+ 				  const char __user *buf, int in_len,
+ 				  int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_rereg_mr      cmd;
  	struct ib_uverbs_rereg_mr_resp resp;
@@@ -792,10 -835,9 +866,16 @@@ put_uobjs
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_dereg_mr(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   const char __user *buf, int in_len,
 +			   int out_len)
++=======
+ static ssize_t ib_uverbs_dereg_mr(struct ib_uverbs_file *file,
+ 				  const char __user *buf, int in_len,
+ 				  int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_dereg_mr cmd;
  
@@@ -806,10 -848,9 +886,16 @@@
  				    in_len);
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_alloc_mw(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   const char __user *buf, int in_len,
 +			   int out_len)
++=======
+ static ssize_t ib_uverbs_alloc_mw(struct ib_uverbs_file *file,
+ 				  const char __user *buf, int in_len,
+ 				  int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_alloc_mw      cmd;
  	struct ib_uverbs_alloc_mw_resp resp;
@@@ -876,10 -916,9 +962,16 @@@ err_free
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_dealloc_mw(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     const char __user *buf, int in_len,
 +			     int out_len)
++=======
+ static ssize_t ib_uverbs_dealloc_mw(struct ib_uverbs_file *file,
+ 				    const char __user *buf, int in_len,
+ 				    int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_dealloc_mw cmd;
  
@@@ -890,10 -929,9 +982,16 @@@
  				    in_len);
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_create_comp_channel(struct ib_uverbs_file *file,
 +				      struct ib_device *ib_dev,
 +				      const char __user *buf, int in_len,
 +				      int out_len)
++=======
+ static ssize_t ib_uverbs_create_comp_channel(struct ib_uverbs_file *file,
+ 					     const char __user *buf, int in_len,
+ 					     int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_create_comp_channel	   cmd;
  	struct ib_uverbs_create_comp_channel_resp  resp;
@@@ -1033,10 -1073,9 +1131,16 @@@ static int ib_uverbs_create_cq_cb(struc
  	return 0;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_create_cq(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    const char __user *buf, int in_len,
 +			    int out_len)
++=======
+ static ssize_t ib_uverbs_create_cq(struct ib_uverbs_file *file,
+ 				   const char __user *buf, int in_len,
+ 				   int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_create_cq      cmd;
  	struct ib_uverbs_ex_create_cq	cmd_ex;
@@@ -1087,10 -1126,8 +1191,15 @@@ static int ib_uverbs_ex_create_cq_cb(st
  	return 0;
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_create_cq(struct ib_uverbs_file *file,
 +			 struct ib_device *ib_dev,
 +			   struct ib_udata *ucore,
 +			   struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_create_cq(struct ib_uverbs_file *file,
+ 				  struct ib_udata *ucore, struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_create_cq_resp resp;
  	struct ib_uverbs_ex_create_cq  cmd;
@@@ -1121,10 -1158,9 +1230,16 @@@
  	return PTR_ERR_OR_ZERO(obj);
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_resize_cq(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    const char __user *buf, int in_len,
 +			    int out_len)
++=======
+ static ssize_t ib_uverbs_resize_cq(struct ib_uverbs_file *file,
+ 				   const char __user *buf, int in_len,
+ 				   int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_resize_cq	cmd;
  	struct ib_uverbs_resize_cq_resp	resp = {};
@@@ -1189,10 -1225,9 +1304,16 @@@ static int copy_wc_to_user(struct ib_de
  	return 0;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_poll_cq(struct ib_uverbs_file *file,
 +			  struct ib_device *ib_dev,
 +			  const char __user *buf, int in_len,
 +			  int out_len)
++=======
+ static ssize_t ib_uverbs_poll_cq(struct ib_uverbs_file *file,
+ 				 const char __user *buf, int in_len,
+ 				 int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_poll_cq       cmd;
  	struct ib_uverbs_poll_cq_resp  resp;
@@@ -1241,10 -1276,9 +1362,16 @@@ out_put
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_req_notify_cq(struct ib_uverbs_file *file,
 +				struct ib_device *ib_dev,
 +				const char __user *buf, int in_len,
 +				int out_len)
++=======
+ static ssize_t ib_uverbs_req_notify_cq(struct ib_uverbs_file *file,
+ 				       const char __user *buf, int in_len,
+ 				       int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_req_notify_cq cmd;
  	struct ib_cq                  *cq;
@@@ -1264,10 -1298,9 +1391,16 @@@
  	return in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_destroy_cq(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     const char __user *buf, int in_len,
 +			     int out_len)
++=======
+ static ssize_t ib_uverbs_destroy_cq(struct ib_uverbs_file *file,
+ 				    const char __user *buf, int in_len,
+ 				    int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_destroy_cq      cmd;
  	struct ib_uverbs_destroy_cq_resp resp;
@@@ -1595,10 -1613,9 +1728,16 @@@ static int ib_uverbs_create_qp_cb(struc
  	return 0;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_create_qp(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    const char __user *buf, int in_len,
 +			    int out_len)
++=======
+ static ssize_t ib_uverbs_create_qp(struct ib_uverbs_file *file,
+ 				   const char __user *buf, int in_len,
+ 				   int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_create_qp      cmd;
  	struct ib_uverbs_ex_create_qp	cmd_ex;
@@@ -1656,10 -1673,8 +1795,15 @@@ static int ib_uverbs_ex_create_qp_cb(st
  	return 0;
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_create_qp(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   struct ib_udata *ucore,
 +			   struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_create_qp(struct ib_uverbs_file *file,
+ 				  struct ib_udata *ucore, struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_create_qp_resp resp;
  	struct ib_uverbs_ex_create_qp cmd = {0};
@@@ -1693,9 -1708,9 +1837,15 @@@
  	return 0;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_open_qp(struct ib_uverbs_file *file,
 +			  struct ib_device *ib_dev,
 +			  const char __user *buf, int in_len, int out_len)
++=======
+ static ssize_t ib_uverbs_open_qp(struct ib_uverbs_file *file,
+ 				 const char __user *buf, int in_len,
+ 				 int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_open_qp        cmd;
  	struct ib_uverbs_create_qp_resp resp;
@@@ -1804,10 -1816,9 +1954,16 @@@ static void copy_ah_attr_to_uverbs(stru
  	uverb_attr->port_num          = rdma_ah_get_port_num(rdma_attr);
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_query_qp(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   const char __user *buf, int in_len,
 +			   int out_len)
++=======
+ static ssize_t ib_uverbs_query_qp(struct ib_uverbs_file *file,
+ 				  const char __user *buf, int in_len,
+ 				  int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_query_qp      cmd;
  	struct ib_uverbs_query_qp_resp resp;
@@@ -2078,10 -2089,9 +2234,16 @@@ out
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_modify_qp(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    const char __user *buf, int in_len,
 +			    int out_len)
++=======
+ static ssize_t ib_uverbs_modify_qp(struct ib_uverbs_file *file,
+ 				   const char __user *buf, int in_len,
+ 				   int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_modify_qp cmd = {};
  	struct ib_udata udata;
@@@ -2105,10 -2115,8 +2267,15 @@@
  	return in_len;
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_modify_qp(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   struct ib_udata *ucore,
 +			   struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_modify_qp(struct ib_uverbs_file *file,
+ 				  struct ib_udata *ucore, struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_modify_qp cmd = {};
  	int ret;
@@@ -2141,10 -2149,9 +2308,16 @@@
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_destroy_qp(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     const char __user *buf, int in_len,
 +			     int out_len)
++=======
+ static ssize_t ib_uverbs_destroy_qp(struct ib_uverbs_file *file,
+ 				    const char __user *buf, int in_len,
+ 				    int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_destroy_qp      cmd;
  	struct ib_uverbs_destroy_qp_resp resp;
@@@ -2194,10 -2187,9 +2367,16 @@@ static void *alloc_wr(size_t wr_size, _
  			 num_sge * sizeof (struct ib_sge), GFP_KERNEL);
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_post_send(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    const char __user *buf, int in_len,
 +			    int out_len)
++=======
+ static ssize_t ib_uverbs_post_send(struct ib_uverbs_file *file,
+ 				   const char __user *buf, int in_len,
+ 				   int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_post_send      cmd;
  	struct ib_uverbs_post_send_resp resp;
@@@ -2474,10 -2467,9 +2653,16 @@@ err
  	return ERR_PTR(ret);
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_post_recv(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    const char __user *buf, int in_len,
 +			    int out_len)
++=======
+ static ssize_t ib_uverbs_post_recv(struct ib_uverbs_file *file,
+ 				   const char __user *buf, int in_len,
+ 				   int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_post_recv      cmd;
  	struct ib_uverbs_post_recv_resp resp;
@@@ -2523,10 -2516,9 +2708,16 @@@ out
  	return ret ? ret : in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_post_srq_recv(struct ib_uverbs_file *file,
 +				struct ib_device *ib_dev,
 +				const char __user *buf, int in_len,
 +				int out_len)
++=======
+ static ssize_t ib_uverbs_post_srq_recv(struct ib_uverbs_file *file,
+ 				       const char __user *buf, int in_len,
+ 				       int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_post_srq_recv      cmd;
  	struct ib_uverbs_post_srq_recv_resp resp;
@@@ -2573,10 -2566,9 +2764,16 @@@ out
  	return ret ? ret : in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_create_ah(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    const char __user *buf, int in_len,
 +			    int out_len)
++=======
+ static ssize_t ib_uverbs_create_ah(struct ib_uverbs_file *file,
+ 				   const char __user *buf, int in_len,
+ 				   int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_create_ah	 cmd;
  	struct ib_uverbs_create_ah_resp	 resp;
@@@ -2662,9 -2655,9 +2859,15 @@@ err
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_destroy_ah(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     const char __user *buf, int in_len, int out_len)
++=======
+ static ssize_t ib_uverbs_destroy_ah(struct ib_uverbs_file *file,
+ 				    const char __user *buf, int in_len,
+ 				    int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_destroy_ah cmd;
  
@@@ -2675,10 -2668,9 +2878,16 @@@
  				    in_len);
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_attach_mcast(struct ib_uverbs_file *file,
 +			       struct ib_device *ib_dev,
 +			       const char __user *buf, int in_len,
 +			       int out_len)
++=======
+ static ssize_t ib_uverbs_attach_mcast(struct ib_uverbs_file *file,
+ 				      const char __user *buf, int in_len,
+ 				      int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_attach_mcast cmd;
  	struct ib_qp                 *qp;
@@@ -2725,10 -2717,9 +2934,16 @@@ out_put
  	return ret ? ret : in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_detach_mcast(struct ib_uverbs_file *file,
 +			       struct ib_device *ib_dev,
 +			       const char __user *buf, int in_len,
 +			       int out_len)
++=======
+ static ssize_t ib_uverbs_detach_mcast(struct ib_uverbs_file *file,
+ 				      const char __user *buf, int in_len,
+ 				      int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_detach_mcast cmd;
  	struct ib_uqp_object         *obj;
@@@ -3094,10 -3079,8 +3309,15 @@@ static int kern_spec_to_ib_spec(struct 
  		return kern_spec_to_ib_spec_filter(kern_spec, ib_spec);
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_create_wq(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   struct ib_udata *ucore,
 +			   struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_create_wq(struct ib_uverbs_file *file,
+ 				  struct ib_udata *ucore, struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_create_wq	  cmd = {};
  	struct ib_uverbs_ex_create_wq_resp resp = {};
@@@ -3211,10 -3194,8 +3431,15 @@@ err_uobj
  	return err;
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_destroy_wq(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    struct ib_udata *ucore,
 +			    struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_destroy_wq(struct ib_uverbs_file *file,
+ 				   struct ib_udata *ucore, struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_destroy_wq	cmd = {};
  	struct ib_uverbs_ex_destroy_wq_resp	resp = {};
@@@ -3267,10 -3239,8 +3492,15 @@@
  	return ib_copy_to_udata(ucore, &resp, resp.response_length);
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_modify_wq(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   struct ib_udata *ucore,
 +			   struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_modify_wq(struct ib_uverbs_file *file,
+ 				  struct ib_udata *ucore, struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_modify_wq cmd = {};
  	struct ib_wq *wq;
@@@ -3317,10 -3287,9 +3547,16 @@@ out
  	return ret;
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_create_rwq_ind_table(struct ib_uverbs_file *file,
 +				      struct ib_device *ib_dev,
 +				      struct ib_udata *ucore,
 +				      struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_create_rwq_ind_table(struct ib_uverbs_file *file,
+ 					     struct ib_udata *ucore,
+ 					     struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_create_rwq_ind_table	  cmd = {};
  	struct ib_uverbs_ex_create_rwq_ind_table_resp  resp = {};
@@@ -3461,10 -3430,9 +3697,16 @@@ err_free
  	return err;
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_destroy_rwq_ind_table(struct ib_uverbs_file *file,
 +				       struct ib_device *ib_dev,
 +				       struct ib_udata *ucore,
 +				       struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_destroy_rwq_ind_table(struct ib_uverbs_file *file,
+ 					      struct ib_udata *ucore,
+ 					      struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_destroy_rwq_ind_table	cmd = {};
  	int			ret;
@@@ -3491,10 -3459,9 +3733,16 @@@
  				    cmd.ind_tbl_handle, file, 0);
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_create_flow(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     struct ib_udata *ucore,
 +			     struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_create_flow(struct ib_uverbs_file *file,
+ 				    struct ib_udata *ucore,
+ 				    struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_create_flow	  cmd;
  	struct ib_uverbs_create_flow_resp resp;
@@@ -3671,10 -3637,9 +3919,16 @@@ err_free_attr
  	return err;
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_destroy_flow(struct ib_uverbs_file *file,
 +			      struct ib_device *ib_dev,
 +			      struct ib_udata *ucore,
 +			      struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_destroy_flow(struct ib_uverbs_file *file,
+ 				     struct ib_udata *ucore,
+ 				     struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_destroy_flow	cmd;
  	int				ret;
@@@ -3831,10 -3794,9 +4085,16 @@@ err
  	return ret;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_create_srq(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     const char __user *buf, int in_len,
 +			     int out_len)
++=======
+ static ssize_t ib_uverbs_create_srq(struct ib_uverbs_file *file,
+ 				    const char __user *buf, int in_len,
+ 				    int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_create_srq      cmd;
  	struct ib_uverbs_create_xsrq     xcmd;
@@@ -3869,9 -3831,9 +4129,15 @@@
  	return in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_create_xsrq(struct ib_uverbs_file *file,
 +			      struct ib_device *ib_dev,
 +			      const char __user *buf, int in_len, int out_len)
++=======
+ static ssize_t ib_uverbs_create_xsrq(struct ib_uverbs_file *file,
+ 				     const char __user *buf, int in_len,
+ 				     int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_create_xsrq     cmd;
  	struct ib_uverbs_create_srq_resp resp;
@@@ -3896,10 -3858,9 +4162,16 @@@
  	return in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_modify_srq(struct ib_uverbs_file *file,
 +			     struct ib_device *ib_dev,
 +			     const char __user *buf, int in_len,
 +			     int out_len)
++=======
+ static ssize_t ib_uverbs_modify_srq(struct ib_uverbs_file *file,
+ 				    const char __user *buf, int in_len,
+ 				    int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_modify_srq cmd;
  	struct ib_udata             udata;
@@@ -3927,10 -3888,9 +4199,16 @@@
  	return ret ? ret : in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_query_srq(struct ib_uverbs_file *file,
 +			    struct ib_device *ib_dev,
 +			    const char __user *buf,
 +			    int in_len, int out_len)
++=======
+ static ssize_t ib_uverbs_query_srq(struct ib_uverbs_file *file,
+ 				   const char __user *buf, int in_len,
+ 				   int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_query_srq      cmd;
  	struct ib_uverbs_query_srq_resp resp;
@@@ -3967,10 -3927,9 +4245,16 @@@
  	return in_len;
  }
  
++<<<<<<< HEAD
 +ssize_t ib_uverbs_destroy_srq(struct ib_uverbs_file *file,
 +			      struct ib_device *ib_dev,
 +			      const char __user *buf, int in_len,
 +			      int out_len)
++=======
+ static ssize_t ib_uverbs_destroy_srq(struct ib_uverbs_file *file,
+ 				     const char __user *buf, int in_len,
+ 				     int out_len)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_destroy_srq      cmd;
  	struct ib_uverbs_destroy_srq_resp resp;
@@@ -4008,10 -3955,9 +4292,16 @@@
  	return in_len;
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_query_device(struct ib_uverbs_file *file,
 +			      struct ib_device *ib_dev,
 +			      struct ib_udata *ucore,
 +			      struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_query_device(struct ib_uverbs_file *file,
+ 				     struct ib_udata *ucore,
+ 				     struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_query_device_resp resp = { {0} };
  	struct ib_uverbs_ex_query_device  cmd;
@@@ -4129,10 -4082,8 +4419,15 @@@ end
  	return err;
  }
  
++<<<<<<< HEAD
 +int ib_uverbs_ex_modify_cq(struct ib_uverbs_file *file,
 +			   struct ib_device *ib_dev,
 +			   struct ib_udata *ucore,
 +			   struct ib_udata *uhw)
++=======
+ static int ib_uverbs_ex_modify_cq(struct ib_uverbs_file *file,
+ 				  struct ib_udata *ucore, struct ib_udata *uhw)
++>>>>>>> 1de751caf7d5 (RDMA/uverbs: Make all the method functions in uverbs_cmd static)
  {
  	struct ib_uverbs_ex_modify_cq cmd = {};
  	struct ib_cq *cq;
* Unmerged path drivers/infiniband/core/uverbs.h
* Unmerged path drivers/infiniband/core/uverbs_cmd.c
