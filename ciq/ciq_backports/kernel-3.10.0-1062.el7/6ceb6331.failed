RDMA/uverbs: Declare closing variable as boolean

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
Rebuild_CHGLOG: - [rdma] uverbs: Declare closing variable as boolean (Kamal Heib) [1655923]
Rebuild_FUZZ: 94.51%
commit-author Leon Romanovsky <leonro@mellanox.com>
commit 6ceb6331b3291694fb6ceba625219f51447c3fa2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/6ceb6331.failed

The "closing" variable is used as boolean and set to "true" in one
place, update the declaration of that variable and their other
assignment to proper type.

Fixes: e951747a087a ("IB/uverbs: Rework the locking for cleaning up the ucontext")
	Signed-off-by: Leon Romanovsky <leonro@mellanox.com>
	Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
(cherry picked from commit 6ceb6331b3291694fb6ceba625219f51447c3fa2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/core/uverbs_cmd.c
#	include/rdma/ib_verbs.h
diff --cc drivers/infiniband/core/uverbs_cmd.c
index 507521d53e3f,4b72851ade24..000000000000
--- a/drivers/infiniband/core/uverbs_cmd.c
+++ b/drivers/infiniband/core/uverbs_cmd.c
@@@ -109,10 -120,11 +109,15 @@@ ssize_t ib_uverbs_get_context(struct ib
  	rcu_read_lock();
  	ucontext->tgid = get_task_pid(current->group_leader, PIDTYPE_PID);
  	rcu_read_unlock();
++<<<<<<< HEAD
 +	ucontext->closing = 0;
++=======
+ 	ucontext->closing = false;
+ 	ucontext->cleanup_retryable = false;
++>>>>>>> 6ceb6331b329 (RDMA/uverbs: Declare closing variable as boolean)
  
  #ifdef CONFIG_INFINIBAND_ON_DEMAND_PAGING
 -	ucontext->umem_tree = RB_ROOT_CACHED;
 +	ucontext->umem_tree = RB_ROOT;
  	init_rwsem(&ucontext->umem_rwsem);
  	ucontext->odp_mrs_count = 0;
  	INIT_LIST_HEAD(&ucontext->no_private_counters);
diff --cc include/rdma/ib_verbs.h
index 685cc1cbef61,a4c3a09a91bc..000000000000
--- a/include/rdma/ib_verbs.h
+++ b/include/rdma/ib_verbs.h
@@@ -1457,14 -1481,14 +1457,23 @@@ enum rdma_remove_reason 
  struct ib_ucontext {
  	struct ib_device       *device;
  	struct ib_uverbs_file  *ufile;
++<<<<<<< HEAD
 +	int			closing;
++=======
+ 	/*
+ 	 * 'closing' can be read by the driver only during a destroy callback,
+ 	 * it is set when we are closing the file descriptor and indicates
+ 	 * that mm_sem may be locked.
+ 	 */
+ 	bool closing;
++>>>>>>> 6ceb6331b329 (RDMA/uverbs: Declare closing variable as boolean)
  
 -	bool cleanup_retryable;
 +	/* locking the uobjects_list */
 +	struct mutex		uobjects_lock;
 +	struct list_head	uobjects;
 +	/* protects cleanup process from other actions */
 +	struct rw_semaphore	cleanup_rwsem;
 +	enum rdma_remove_reason cleanup_reason;
  
  	struct pid             *tgid;
  #ifdef CONFIG_INFINIBAND_ON_DEMAND_PAGING
* Unmerged path drivers/infiniband/core/uverbs_cmd.c
* Unmerged path include/rdma/ib_verbs.h
