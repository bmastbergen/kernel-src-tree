ext4, dax: add ext4_bmap to ext4_dax_aops

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Toshi Kani <toshi.kani@hpe.com>
commit 94dbb63117e82253c9592816aa4465f0a9c94850
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/94dbb631.failed

Ext4 mount path calls .bmap to the journal inode. This currently
works for the DAX mount case because ext4_iget() always set
'ext4_da_aops' to any regular files.

In preparation to fix ext4_iget() to set 'ext4_dax_aops' for ext4
DAX files, add ext4_bmap() to 'ext4_dax_aops', since bmap works for
DAX inodes.

Fixes: 5f0663bb4a64 ("ext4, dax: introduce ext4_dax_aops")
	Signed-off-by: Toshi Kani <toshi.kani@hpe.com>
	Signed-off-by: Theodore Ts'o <tytso@mit.edu>
	Suggested-by: Jan Kara <jack@suse.cz>
	Cc: stable@vger.kernel.org
(cherry picked from commit 94dbb63117e82253c9592816aa4465f0a9c94850)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/ext4/inode.c
diff --cc fs/ext4/inode.c
index 30b44b54cee7,5be07f64ae0a..000000000000
--- a/fs/ext4/inode.c
+++ b/fs/ext4/inode.c
@@@ -3535,7 -3951,8 +3535,12 @@@ static const struct address_space_opera
  	.writepages		= ext4_dax_writepages,
  	.direct_IO		= noop_direct_IO,
  	.set_page_dirty		= noop_set_page_dirty,
++<<<<<<< HEAD
 +	.invalidatepage_range	= noop_invalidatepage_range,
++=======
+ 	.bmap			= ext4_bmap,
+ 	.invalidatepage		= noop_invalidatepage,
++>>>>>>> 94dbb63117e8 (ext4, dax: add ext4_bmap to ext4_dax_aops)
  };
  
  void ext4_set_aops(struct inode *inode)
* Unmerged path fs/ext4/inode.c
