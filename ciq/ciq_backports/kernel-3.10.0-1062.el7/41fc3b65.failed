s390/qeth: use LINK_MODE_* to report the link characteristics

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
Rebuild_CHGLOG: - [s390] qeth: use LINK_MODE_* to report the link characteristics (Hendrik Brueckner) [1640651]
Rebuild_FUZZ: 95.73%
commit-author Julian Wiedmann <jwi@linux.vnet.ibm.com>
commit 41fc3b6567a5b072b45f654fab767457a740c637
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/41fc3b65.failed

LINK_MODE_* replaces the u32-limited SUPPORTED_* / ENABLED_*
definitions.

	Signed-off-by: Julian Wiedmann <jwi@linux.vnet.ibm.com>
	Reviewed-by: Thomas Richter <tmricht@linux.vnet.ibm.com>
	Reviewed-by: Ursula Braun <ubraun@linux.vnet.ibm.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 41fc3b6567a5b072b45f654fab767457a740c637)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/s390/net/qeth_core_main.c
diff --cc drivers/s390/net/qeth_core_main.c
index 2a175c0e1f6b,88f4c6cff9a4..000000000000
--- a/drivers/s390/net/qeth_core_main.c
+++ b/drivers/s390/net/qeth_core_main.c
@@@ -5879,13 -6028,15 +5879,15 @@@ EXPORT_SYMBOL_GPL(qeth_core_get_drvinfo
  /* Autoneg and full-duplex are supported and advertised unconditionally.     */
  /* Always advertise and support all speeds up to specified, and only one     */
  /* specified port type.							     */
 -static void qeth_set_cmd_adv_sup(struct ethtool_link_ksettings *cmd,
 +static void qeth_set_ecmd_adv_sup(struct ethtool_cmd *ecmd,
  				int maxspeed, int porttype)
  {
- 	u32 sup, adv;
+ 	ethtool_link_ksettings_zero_link_mode(cmd, supported);
+ 	ethtool_link_ksettings_zero_link_mode(cmd, advertising);
+ 	ethtool_link_ksettings_zero_link_mode(cmd, lp_advertising);
  
- 	sup = SUPPORTED_Autoneg;
- 	adv = ADVERTISED_Autoneg;
+ 	ethtool_link_ksettings_add_link_mode(cmd, supported, Autoneg);
+ 	ethtool_link_ksettings_add_link_mode(cmd, advertising, Autoneg);
  
  	switch (porttype) {
  	case PORT_TP:
@@@ -5919,16 -6090,20 +5941,25 @@@
  		/* end fallthrough */
  		break;
  	default:
- 		sup |= SUPPORTED_10baseT_Half | SUPPORTED_10baseT_Full;
- 		adv |= ADVERTISED_10baseT_Half | ADVERTISED_10baseT_Full;
+ 		ethtool_link_ksettings_add_link_mode(cmd, supported,
+ 						     10baseT_Full);
+ 		ethtool_link_ksettings_add_link_mode(cmd, advertising,
+ 						     10baseT_Full);
+ 		ethtool_link_ksettings_add_link_mode(cmd, supported,
+ 						     10baseT_Half);
+ 		ethtool_link_ksettings_add_link_mode(cmd, advertising,
+ 						     10baseT_Half);
  		WARN_ON_ONCE(1);
  	}
++<<<<<<< HEAD
 +	ecmd->supported = sup;
 +	ecmd->advertising = adv;
++=======
++>>>>>>> 41fc3b6567a5 (s390/qeth: use LINK_MODE_* to report the link characteristics)
  }
  
 -int qeth_core_ethtool_get_link_ksettings(struct net_device *netdev,
 -		struct ethtool_link_ksettings *cmd)
 +int qeth_core_ethtool_get_settings(struct net_device *netdev,
 +					struct ethtool_cmd *ecmd)
  {
  	struct qeth_card *card = netdev->ml_priv;
  	enum qeth_link_types link_type;
* Unmerged path drivers/s390/net/qeth_core_main.c
