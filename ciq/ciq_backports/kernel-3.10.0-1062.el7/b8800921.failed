NFSDv4: use export cache flushtime for changeid on V4ROOT objects.

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
Rebuild_CHGLOG: - [fs] nfsdv4: use export cache flushtime for changeid on V4ROOT objects ("J. Bruce Fields") [1637101 1570022]
Rebuild_FUZZ: 99.24%
commit-author NeilBrown <neilb@suse.com>
commit b880092109323d1cc608c420fa712d3e19508e13
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/b8800921.failed

If you change the set of filesystems that are exported, then
the contents of various directories in the NFSv4 pseudo-root
is likely to change.  However the change-id of those
directories is currently tied to the underlying directory,
so the client may not see the changes in a timely fashion.

This patch changes the change-id number to be derived from the
"flush_time" of the export cache.  Whenever any changes are
made to the set of exported filesystems, this flush_time is
updated.  The result is that clients see changes to the set
of exported filesystems much more quickly, often immediately.

	Signed-off-by: NeilBrown <neilb@suse.com>
	Signed-off-by: J. Bruce Fields <bfields@redhat.com>
(cherry picked from commit b880092109323d1cc608c420fa712d3e19508e13)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/nfsd/nfs4xdr.c
diff --cc fs/nfsd/nfs4xdr.c
index c446c9b2ebf0,7e4df80456ff..000000000000
--- a/fs/nfsd/nfs4xdr.c
+++ b/fs/nfsd/nfs4xdr.c
@@@ -2516,7 -2497,7 +2520,11 @@@ nfsd4_encode_fattr(struct xdr_stream *x
  		p = xdr_reserve_space(xdr, 8);
  		if (!p)
  			goto out_resource;
++<<<<<<< HEAD
 +		p = encode_change(p, &stat, dentry->d_inode);
++=======
+ 		p = encode_change(p, &stat, d_inode(dentry), exp);
++>>>>>>> b88009210932 (NFSDv4: use export cache flushtime for changeid on V4ROOT objects.)
  	}
  	if (bmval0 & FATTR4_WORD0_SIZE) {
  		p = xdr_reserve_space(xdr, 8);
* Unmerged path fs/nfsd/nfs4xdr.c
