powerpc/pseries/mm: Introducing FW_FEATURE_BLOCK_REMOVE

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
Rebuild_CHGLOG: - [powerpc] pseries/mm: Introducing FW_FEATURE_BLOCK_REMOVE (Steve Best) [1650255]
Rebuild_FUZZ: 92.16%
commit-author Laurent Dufour <ldufour@linux.vnet.ibm.com>
commit 5600fbe340331e2a25d1b277f9c190f5c9948038
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/5600fbe3.failed

This feature tells if the hcall H_BLOCK_REMOVE is available.

	Cc: "Aneesh Kumar K.V" <aneesh.kumar@linux.ibm.com>
	Cc: Nicholas Piggin <npiggin@gmail.com>
	Cc: Michael Ellerman <mpe@ellerman.id.au>
	Cc: Paul Mackerras <paulus@samba.org>
	Cc: Benjamin Herrenschmidt <benh@kernel.crashing.org>
	Reviewed-by: Aneesh Kumar K.V <aneesh.kumar@linux.ibm.com>
	Signed-off-by: Laurent Dufour <ldufour@linux.vnet.ibm.com>
	Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
(cherry picked from commit 5600fbe340331e2a25d1b277f9c190f5c9948038)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/powerpc/include/asm/firmware.h
diff --cc arch/powerpc/include/asm/firmware.h
index 339f71d0ba0b,2aca2655fe30..000000000000
--- a/arch/powerpc/include/asm/firmware.h
+++ b/arch/powerpc/include/asm/firmware.h
@@@ -52,7 -50,9 +52,13 @@@
  #define FW_FEATURE_BEST_ENERGY	ASM_CONST(0x0000000080000000)
  #define FW_FEATURE_TYPE1_AFFINITY ASM_CONST(0x0000000100000000)
  #define FW_FEATURE_PRRN		ASM_CONST(0x0000000200000000)
++<<<<<<< HEAD
 +#define FW_FEATURE_OPALv3	ASM_CONST(0x0000000400000000)
++=======
+ #define FW_FEATURE_DRMEM_V2	ASM_CONST(0x0000000400000000)
+ #define FW_FEATURE_DRC_INFO	ASM_CONST(0x0000000800000000)
+ #define FW_FEATURE_BLOCK_REMOVE ASM_CONST(0x0000001000000000)
++>>>>>>> 5600fbe34033 (powerpc/pseries/mm: Introducing FW_FEATURE_BLOCK_REMOVE)
  
  #ifndef __ASSEMBLY__
  
@@@ -69,10 -69,10 +75,15 @@@ enum 
  		FW_FEATURE_CMO | FW_FEATURE_VPHN | FW_FEATURE_XCMO |
  		FW_FEATURE_SET_MODE | FW_FEATURE_BEST_ENERGY |
  		FW_FEATURE_TYPE1_AFFINITY | FW_FEATURE_PRRN |
++<<<<<<< HEAD
 +		FW_FEATURE_HPT_RESIZE,
++=======
+ 		FW_FEATURE_HPT_RESIZE | FW_FEATURE_DRMEM_V2 |
+ 		FW_FEATURE_DRC_INFO | FW_FEATURE_BLOCK_REMOVE,
++>>>>>>> 5600fbe34033 (powerpc/pseries/mm: Introducing FW_FEATURE_BLOCK_REMOVE)
  	FW_FEATURE_PSERIES_ALWAYS = 0,
 -	FW_FEATURE_POWERNV_POSSIBLE = FW_FEATURE_OPAL,
 +	FW_FEATURE_POWERNV_POSSIBLE = FW_FEATURE_OPAL | FW_FEATURE_OPALv2 |
 +		FW_FEATURE_OPALv3,
  	FW_FEATURE_POWERNV_ALWAYS = 0,
  	FW_FEATURE_PS3_POSSIBLE = FW_FEATURE_LPAR | FW_FEATURE_PS3_LV1,
  	FW_FEATURE_PS3_ALWAYS = FW_FEATURE_LPAR | FW_FEATURE_PS3_LV1,
* Unmerged path arch/powerpc/include/asm/firmware.h
diff --git a/arch/powerpc/platforms/pseries/firmware.c b/arch/powerpc/platforms/pseries/firmware.c
index 7b287be49331..ba95740b4e20 100644
--- a/arch/powerpc/platforms/pseries/firmware.c
+++ b/arch/powerpc/platforms/pseries/firmware.c
@@ -64,6 +64,7 @@ hypertas_fw_features_table[] = {
 	{FW_FEATURE_SET_MODE,		"hcall-set-mode"},
 	{FW_FEATURE_BEST_ENERGY,	"hcall-best-energy-1*"},
 	{FW_FEATURE_HPT_RESIZE,		"hcall-hpt-resize"},
+	{FW_FEATURE_BLOCK_REMOVE,	"hcall-block-remove"},
 };
 
 /* Build up the firmware features bitmask using the contents of
