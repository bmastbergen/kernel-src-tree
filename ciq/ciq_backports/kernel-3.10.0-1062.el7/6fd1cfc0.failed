nfp: return -EOPNOTSUPP from .ndo_get_phys_port_name for VFs

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Jakub Kicinski <jakub.kicinski@netronome.com>
commit 6fd1cfc0f0a5fec92cce8a5c3fbfd7fd82b82160
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/6fd1cfc0.failed

After recent change we started returning 0 from
ndo_get_phys_port_name for VFs.  The name parameter for
ndo_get_phys_port_name is not initialized by the stack so
this can lead to a crash.  We should have kept returning
-EOPNOTSUPP in the first place.

	Signed-off-by: Jakub Kicinski <jakub.kicinski@netronome.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 6fd1cfc0f0a5fec92cce8a5c3fbfd7fd82b82160)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/netronome/nfp/nfp_net_common.c
diff --cc drivers/net/ethernet/netronome/nfp/nfp_net_common.c
index 1b191a368eb3,1f572896d1ee..000000000000
--- a/drivers/net/ethernet/netronome/nfp/nfp_net_common.c
+++ b/drivers/net/ethernet/netronome/nfp/nfp_net_common.c
@@@ -3285,6 -3277,25 +3285,28 @@@ nfp_net_features_check(struct sk_buff *
  	return features;
  }
  
++<<<<<<< HEAD
++=======
+ static int
+ nfp_net_get_phys_port_name(struct net_device *netdev, char *name, size_t len)
+ {
+ 	struct nfp_net *nn = netdev_priv(netdev);
+ 	int n;
+ 
+ 	if (nn->port)
+ 		return nfp_port_get_phys_port_name(netdev, name, len);
+ 
+ 	if (nn->dp.is_vf)
+ 		return -EOPNOTSUPP;
+ 
+ 	n = snprintf(name, len, "%d", nn->id);
+ 	if (n >= len)
+ 		return -EINVAL;
+ 
+ 	return 0;
+ }
+ 
++>>>>>>> 6fd1cfc0f0a5 (nfp: return -EOPNOTSUPP from .ndo_get_phys_port_name for VFs)
  /**
   * nfp_net_set_vxlan_port() - set vxlan port in SW and reconfigure HW
   * @nn:   NFP Net device to reconfigure
* Unmerged path drivers/net/ethernet/netronome/nfp/nfp_net_common.c
