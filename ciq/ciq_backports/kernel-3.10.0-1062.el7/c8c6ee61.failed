ALSA: hda/realtek: Disable PC beep in passthrough on alc285

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Hui Wang <hui.wang@canonical.com>
commit c8c6ee611926685a7d753409e0a6e48b9e1b8748
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/c8c6ee61.failed

It is reported that there's a constant background "hum/whitenoise"
in the headset on the Lenovo X1 machines with the codec alc285, and it
is confirmed that if we run the command below, the noise will stop.
 sudo hda-verb /dev/snd/hwC0D0 0x1d SET_PIN_WIDGET_CONTROL 0x0

Then I consulted this issue with Kailang, he told me the pin 0x1d on
this codec is used for PC beep in, the noise probably comes from this
pin and we can also disable the PC beep in passthrough, then the PC
beep in will not affect other sound playback.

Fixes: c4cfcf6f4297 ("ALSA: hda/realtek - fix the pop noise on headphone for lenovo laptops")
Bugzilla: https://bugzilla.redhat.com/show_bug.cgi?id=1660581
	Cc: <stable@vger.kernel.org>
	Signed-off-by: Kailang Yang <kailang@realtek.com>
	Signed-off-by: Hui Wang <hui.wang@canonical.com>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit c8c6ee611926685a7d753409e0a6e48b9e1b8748)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/pci/hda/patch_realtek.c
diff --cc sound/pci/hda/patch_realtek.c
index b59b127f463b,1ffa36e987b4..000000000000
--- a/sound/pci/hda/patch_realtek.c
+++ b/sound/pci/hda/patch_realtek.c
@@@ -5571,6 -5658,9 +5571,12 @@@ enum 
  	ALC294_FIXUP_ASUS_MIC,
  	ALC294_FIXUP_ASUS_HEADSET_MIC,
  	ALC294_FIXUP_ASUS_SPK,
++<<<<<<< HEAD
++=======
+ 	ALC225_FIXUP_HEADSET_JACK,
+ 	ALC293_FIXUP_SYSTEM76_MIC_NO_PRESENCE,
+ 	ALC285_FIXUP_LENOVO_PC_BEEP_IN_NOISE,
++>>>>>>> c8c6ee611926 (ALSA: hda/realtek: Disable PC beep in passthrough on alc285)
  };
  
  static const struct hda_fixup alc269_fixups[] = {
@@@ -6507,6 -6603,30 +6513,33 @@@
  		.chained = true,
  		.chain_id = ALC294_FIXUP_ASUS_HEADSET_MIC
  	},
++<<<<<<< HEAD
++=======
+ 	[ALC225_FIXUP_HEADSET_JACK] = {
+ 		.type = HDA_FIXUP_FUNC,
+ 		.v.func = alc_fixup_headset_jack,
+ 	},
+ 	[ALC293_FIXUP_SYSTEM76_MIC_NO_PRESENCE] = {
+ 		.type = HDA_FIXUP_PINS,
+ 		.v.pins = (const struct hda_pintbl[]) {
+ 			{ 0x1a, 0x01a1913c }, /* use as headset mic, without its own jack detect */
+ 			{ }
+ 		},
+ 		.chained = true,
+ 		.chain_id = ALC269_FIXUP_HEADSET_MODE_NO_HP_MIC
+ 	},
+ 	[ALC285_FIXUP_LENOVO_PC_BEEP_IN_NOISE] = {
+ 		.type = HDA_FIXUP_VERBS,
+ 		.v.verbs = (const struct hda_verb[]) {
+ 			/* Disable PCBEEP-IN passthrough */
+ 			{ 0x20, AC_VERB_SET_COEF_INDEX, 0x36 },
+ 			{ 0x20, AC_VERB_SET_PROC_COEF, 0x57d7 },
+ 			{ }
+ 		},
+ 		.chained = true,
+ 		.chain_id = ALC285_FIXUP_LENOVO_HEADPHONE_NOISE
+ 	},
++>>>>>>> c8c6ee611926 (ALSA: hda/realtek: Disable PC beep in passthrough on alc285)
  };
  
  static const struct snd_pci_quirk alc269_fixup_tbl[] = {
* Unmerged path sound/pci/hda/patch_realtek.c
