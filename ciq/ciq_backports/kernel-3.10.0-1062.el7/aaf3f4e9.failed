usb: typec: function for checking cable plug orientation

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
Rebuild_CHGLOG: - [usb] typec: function for checking cable plug orientation (Torez Smith) [1657401]
Rebuild_FUZZ: 95.33%
commit-author Heikki Krogerus <heikki.krogerus@linux.intel.com>
commit aaf3f4e925dc2bdc4715142103660285632a245c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/aaf3f4e9.failed

This adds function typec_get_orientation() that can be used
for checking the current cable plug orientation.

	Signed-off-by: Heikki Krogerus <heikki.krogerus@linux.intel.com>
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit aaf3f4e925dc2bdc4715142103660285632a245c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/usb/typec/typec.c
#	include/linux/usb/typec.h
diff --cc drivers/usb/typec/typec.c
index a0a95ac4685a,3ef7b99b080f..000000000000
--- a/drivers/usb/typec/typec.c
+++ b/drivers/usb/typec/typec.c
@@@ -1249,6 -1258,103 +1249,106 @@@ void typec_set_pwr_opmode(struct typec_
  }
  EXPORT_SYMBOL_GPL(typec_set_pwr_opmode);
  
++<<<<<<< HEAD:drivers/usb/typec/typec.c
++=======
+ /**
+  * typec_find_port_power_role - Get the typec port power capability
+  * @name: port power capability string
+  *
+  * This routine is used to find the typec_port_type by its string name.
+  *
+  * Returns typec_port_type if success, otherwise negative error code.
+  */
+ int typec_find_port_power_role(const char *name)
+ {
+ 	return match_string(typec_port_power_roles,
+ 			    ARRAY_SIZE(typec_port_power_roles), name);
+ }
+ EXPORT_SYMBOL_GPL(typec_find_port_power_role);
+ 
+ /**
+  * typec_find_power_role - Find the typec one specific power role
+  * @name: power role string
+  *
+  * This routine is used to find the typec_role by its string name.
+  *
+  * Returns typec_role if success, otherwise negative error code.
+  */
+ int typec_find_power_role(const char *name)
+ {
+ 	return match_string(typec_roles, ARRAY_SIZE(typec_roles), name);
+ }
+ EXPORT_SYMBOL_GPL(typec_find_power_role);
+ 
+ /**
+  * typec_find_port_data_role - Get the typec port data capability
+  * @name: port data capability string
+  *
+  * This routine is used to find the typec_port_data by its string name.
+  *
+  * Returns typec_port_data if success, otherwise negative error code.
+  */
+ int typec_find_port_data_role(const char *name)
+ {
+ 	return match_string(typec_port_data_roles,
+ 			    ARRAY_SIZE(typec_port_data_roles), name);
+ }
+ EXPORT_SYMBOL_GPL(typec_find_port_data_role);
+ 
+ /* ------------------------------------------ */
+ /* API for Multiplexer/DeMultiplexer Switches */
+ 
+ /**
+  * typec_set_orientation - Set USB Type-C cable plug orientation
+  * @port: USB Type-C Port
+  * @orientation: USB Type-C cable plug orientation
+  *
+  * Set cable plug orientation for @port.
+  */
+ int typec_set_orientation(struct typec_port *port,
+ 			  enum typec_orientation orientation)
+ {
+ 	int ret;
+ 
+ 	if (port->sw) {
+ 		ret = port->sw->set(port->sw, orientation);
+ 		if (ret)
+ 			return ret;
+ 	}
+ 
+ 	port->orientation = orientation;
+ 
+ 	return 0;
+ }
+ EXPORT_SYMBOL_GPL(typec_set_orientation);
+ 
+ /**
+  * typec_get_orientation - Get USB Type-C cable plug orientation
+  * @port: USB Type-C Port
+  *
+  * Get current cable plug orientation for @port.
+  */
+ enum typec_orientation typec_get_orientation(struct typec_port *port)
+ {
+ 	return port->orientation;
+ }
+ EXPORT_SYMBOL_GPL(typec_get_orientation);
+ 
+ /**
+  * typec_set_mode - Set mode of operation for USB Type-C connector
+  * @port: USB Type-C port for the connector
+  * @mode: Operation mode for the connector
+  *
+  * Set mode @mode for @port. This function will configure the muxes needed to
+  * enter @mode.
+  */
+ int typec_set_mode(struct typec_port *port, int mode)
+ {
+ 	return port->mux ? port->mux->set(port->mux, mode) : 0;
+ }
+ EXPORT_SYMBOL_GPL(typec_set_mode);
+ 
++>>>>>>> aaf3f4e925dc (usb: typec: function for checking cable plug orientation):drivers/usb/typec/class.c
  /* --------------------------------------- */
  
  /**
diff --cc include/linux/usb/typec.h
index 0d44ce6af08f,6c33b53d1162..000000000000
--- a/include/linux/usb/typec.h
+++ b/include/linux/usb/typec.h
@@@ -245,4 -263,12 +245,15 @@@ void typec_set_pwr_role(struct typec_po
  void typec_set_vconn_role(struct typec_port *port, enum typec_role role);
  void typec_set_pwr_opmode(struct typec_port *port, enum typec_pwr_opmode mode);
  
++<<<<<<< HEAD
++=======
+ int typec_set_orientation(struct typec_port *port,
+ 			  enum typec_orientation orientation);
+ enum typec_orientation typec_get_orientation(struct typec_port *port);
+ int typec_set_mode(struct typec_port *port, int mode);
+ 
+ int typec_find_port_power_role(const char *name);
+ int typec_find_power_role(const char *name);
+ int typec_find_port_data_role(const char *name);
++>>>>>>> aaf3f4e925dc (usb: typec: function for checking cable plug orientation)
  #endif /* __LINUX_USB_TYPEC_H */
* Unmerged path drivers/usb/typec/typec.c
* Unmerged path include/linux/usb/typec.h
