net: phy: fix sign type error in genphy_config_eee_advert

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
Rebuild_CHGLOG: - [netdrv] phy: fix sign type error in genphy_config_eee_advert (Ivan Vecera) [1685646]
Rebuild_FUZZ: 95.41%
commit-author jbrunet <jbrunet@baylibre.com>
commit 3bb9ab63276696988d8224f52db20e87194deb4b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/3bb9ab63.failed

In genphy_config_eee_advert, the return value of phy_read_mmd_indirect is
checked to know if the register could be accessed but the result is
assigned to a 'u32'.
Changing to 'int' to correctly get errors from phy_read_mmd_indirect.

Fixes: d853d145ea3e ("net: phy: add an option to disable EEE advertisement")
	Reported-by: Julia Lawall <julia.lawall@lip6.fr>
	Signed-off-by: Jerome Brunet <jbrunet@baylibre.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 3bb9ab63276696988d8224f52db20e87194deb4b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/phy/phy_device.c
diff --cc drivers/net/phy/phy_device.c
index f7f4abfd4a6f,ee5ebadb1463..000000000000
--- a/drivers/net/phy/phy_device.c
+++ b/drivers/net/phy/phy_device.c
@@@ -831,6 -1178,43 +831,46 @@@ static int genphy_config_advert(struct 
  }
  
  /**
++<<<<<<< HEAD
++=======
+  * genphy_config_eee_advert - disable unwanted eee mode advertisement
+  * @phydev: target phy_device struct
+  *
+  * Description: Writes MDIO_AN_EEE_ADV after disabling unsupported energy
+  *   efficent ethernet modes. Returns 0 if the PHY's advertisement hasn't
+  *   changed, and 1 if it has changed.
+  */
+ static int genphy_config_eee_advert(struct phy_device *phydev)
+ {
+ 	int broken = phydev->eee_broken_modes;
+ 	int old_adv, adv;
+ 
+ 	/* Nothing to disable */
+ 	if (!broken)
+ 		return 0;
+ 
+ 	/* If the following call fails, we assume that EEE is not
+ 	 * supported by the phy. If we read 0, EEE is not advertised
+ 	 * In both case, we don't need to continue
+ 	 */
+ 	adv = phy_read_mmd_indirect(phydev, MDIO_AN_EEE_ADV, MDIO_MMD_AN);
+ 	if (adv <= 0)
+ 		return 0;
+ 
+ 	old_adv = adv;
+ 	adv &= ~broken;
+ 
+ 	/* Advertising remains unchanged with the broken mask */
+ 	if (old_adv == adv)
+ 		return 0;
+ 
+ 	phy_write_mmd_indirect(phydev, MDIO_AN_EEE_ADV, MDIO_MMD_AN, adv);
+ 
+ 	return 1;
+ }
+ 
+ /**
++>>>>>>> 3bb9ab632766 (net: phy: fix sign type error in genphy_config_eee_advert)
   * genphy_setup_forced - configures/forces speed/duplex from @phydev
   * @phydev: target phy_device struct
   *
* Unmerged path drivers/net/phy/phy_device.c
