net: phy: realtek: add suspend/resume callbacks for RTL8211B

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
Rebuild_CHGLOG: - [netdrv] phy: realtek: add suspend/resume callbacks for RTL8211B (Corinna Vinschen) [1706531]
Rebuild_FUZZ: 95.65%
commit-author Heiner Kallweit <hkallweit1@gmail.com>
commit 049ff57a2aa6ead1daf16b4d11da44ed17bdb0b5
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/049ff57a.failed

Add RTL8211B suspend / resume callbacks.

	Signed-off-by: Heiner Kallweit <hkallweit1@gmail.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 049ff57a2aa6ead1daf16b4d11da44ed17bdb0b5)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/phy/realtek.c
diff --cc drivers/net/phy/realtek.c
index a39ffab22f47,082fb40c656d..000000000000
--- a/drivers/net/phy/realtek.c
+++ b/drivers/net/phy/realtek.c
@@@ -169,17 -140,25 +169,31 @@@ static int rtl8211f_config_init(struct 
  	/* enable TX-delay for rgmii-id and rgmii-txid, otherwise disable it */
  	if (phydev->interface == PHY_INTERFACE_MODE_RGMII_ID ||
  	    phydev->interface == PHY_INTERFACE_MODE_RGMII_TXID)
 -		val = RTL8211F_TX_DELAY;
 +		val |= RTL8211F_TX_DELAY;
 +	else
 +		val &= ~RTL8211F_TX_DELAY;
 +
 +	ret = rtl8211x_page_write(phydev, 0xd08, 0x11, val);
 +	if (ret)
 +		return ret;
  
 -	return phy_modify_paged(phydev, 0xd08, 0x11, RTL8211F_TX_DELAY, val);
 +	return 0;
  }
  
+ static int rtl8211b_suspend(struct phy_device *phydev)
+ {
+ 	phy_write(phydev, MII_MMD_DATA, BIT(9));
+ 
+ 	return genphy_suspend(phydev);
+ }
+ 
+ static int rtl8211b_resume(struct phy_device *phydev)
+ {
+ 	phy_write(phydev, MII_MMD_DATA, 0);
+ 
+ 	return genphy_resume(phydev);
+ }
+ 
  static struct phy_driver realtek_drvs[] = {
  	{
  		.phy_id         = 0x00008201,
@@@ -208,11 -184,12 +222,18 @@@
  		.phy_id_mask	= 0x001fffff,
  		.features	= PHY_GBIT_FEATURES,
  		.flags		= PHY_HAS_INTERRUPT,
 +		.config_aneg	= &genphy_config_aneg,
 +		.read_status	= &genphy_read_status,
  		.ack_interrupt	= &rtl821x_ack_interrupt,
  		.config_intr	= &rtl8211b_config_intr,
++<<<<<<< HEAD
 +		.driver		= { .owner = THIS_MODULE,},
++=======
+ 		.read_mmd	= &genphy_read_mmd_unsupported,
+ 		.write_mmd	= &genphy_write_mmd_unsupported,
+ 		.suspend	= rtl8211b_suspend,
+ 		.resume		= rtl8211b_resume,
++>>>>>>> 049ff57a2aa6 (net: phy: realtek: add suspend/resume callbacks for RTL8211B)
  	}, {
  		.phy_id		= 0x001cc914,
  		.name		= "RTL8211DN Gigabit Ethernet",
* Unmerged path drivers/net/phy/realtek.c
