hv_uio_generic: map ringbuffer phys addr

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Stephen Hemminger <stephen@networkplumber.org>
commit 9da197f1df40c838f0f06abf94cd23b4ed81e522
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/9da197f1.failed

The ring buffer is contiguous IOVA and is mapped via phys addr
for sysfs file. Use same method for the UIO mapping.

	Signed-off-by: Stephen Hemminger <sthemmin@microsoft.com>
	Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
(cherry picked from commit 9da197f1df40c838f0f06abf94cd23b4ed81e522)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/uio/uio_hv_generic.c
diff --cc drivers/uio/uio_hv_generic.c
index d608865b1e1e,53f5610c6065..000000000000
--- a/drivers/uio/uio_hv_generic.c
+++ b/drivers/uio/uio_hv_generic.c
@@@ -127,10 -224,10 +127,14 @@@ hv_uio_probe(struct hv_device *dev
  	/* mem resources */
  	pdata->info.mem[TXRX_RING_MAP].name = "txrx_rings";
  	pdata->info.mem[TXRX_RING_MAP].addr
++<<<<<<< HEAD
 +		= (uintptr_t)dev->channel->ringbuffer_pages;
++=======
+ 		= (uintptr_t)virt_to_phys(page_address(dev->channel->ringbuffer_page));
++>>>>>>> 9da197f1df40 (hv_uio_generic: map ringbuffer phys addr)
  	pdata->info.mem[TXRX_RING_MAP].size
  		= dev->channel->ringbuffer_pagecount << PAGE_SHIFT;
- 	pdata->info.mem[TXRX_RING_MAP].memtype = UIO_MEM_LOGICAL;
+ 	pdata->info.mem[TXRX_RING_MAP].memtype = UIO_MEM_IOVA;
  
  	pdata->info.mem[INT_PAGE_MAP].name = "int_page";
  	pdata->info.mem[INT_PAGE_MAP].addr
* Unmerged path drivers/uio/uio_hv_generic.c
