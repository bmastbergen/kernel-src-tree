ixgbe: move common Rx functions to ixgbe_txrx_common.h

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Björn Töpel <bjorn.topel@intel.com>
commit 46515fdb1adff1cc0ac3d0656a7c3492017dfe4f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/46515fdb.failed

This patch prepares for the upcoming zero-copy Rx functionality, by
moving/changing linkage of common functions, used both by the regular
path and zero-copy path.

	Signed-off-by: Björn Töpel <bjorn.topel@intel.com>
	Tested-by: William Tu <u9012063@gmail.com>
	Tested-by: Andrew Bowers <andrewx.bowers@intel.com>
	Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
(cherry picked from commit 46515fdb1adff1cc0ac3d0656a7c3492017dfe4f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
diff --cc drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
index 7dcb8ca7aac8,681ed9f1ea35..000000000000
--- a/drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
+++ b/drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
@@@ -2222,13 -2187,6 +2223,16 @@@ static struct sk_buff *ixgbe_build_skb(
  	return skb;
  }
  
++<<<<<<< HEAD
 +#define IXGBE_XDP_PASS 0
 +#define IXGBE_XDP_CONSUMED 1
 +#define IXGBE_XDP_TX 2
 +
 +static int ixgbe_xmit_xdp_ring(struct ixgbe_adapter *adapter,
 +			       struct xdp_buff *xdp);
 +
++=======
++>>>>>>> 46515fdb1adf (ixgbe: move common Rx functions to ixgbe_txrx_common.h)
  static struct sk_buff *ixgbe_run_xdp(struct ixgbe_adapter *adapter,
  				     struct ixgbe_ring *rx_ring,
  				     struct xdp_buff *xdp)
@@@ -8468,13 -8459,11 +8472,19 @@@ static u16 ixgbe_select_queue(struct ne
  		txq -= f->indices;
  
  	return txq + f->offset;
 +#else
 +	return fallback(dev, skb);
 +#endif
  }
  
++<<<<<<< HEAD
 +static int ixgbe_xmit_xdp_ring(struct ixgbe_adapter *adapter,
 +			       struct xdp_buff *xdp)
++=======
+ #endif
+ int ixgbe_xmit_xdp_ring(struct ixgbe_adapter *adapter,
+ 			struct xdp_frame *xdpf)
++>>>>>>> 46515fdb1adf (ixgbe: move common Rx functions to ixgbe_txrx_common.h)
  {
  	struct ixgbe_ring *ring = adapter->xdp_ring[smp_processor_id()];
  	struct ixgbe_tx_buffer *tx_buffer;
* Unmerged path drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
diff --git a/drivers/net/ethernet/intel/ixgbe/ixgbe_txrx_common.h b/drivers/net/ethernet/intel/ixgbe/ixgbe_txrx_common.h
new file mode 100644
index 000000000000..3780d315b991
--- /dev/null
+++ b/drivers/net/ethernet/intel/ixgbe/ixgbe_txrx_common.h
@@ -0,0 +1,26 @@
+/* SPDX-License-Identifier: GPL-2.0 */
+/* Copyright(c) 2018 Intel Corporation. */
+
+#ifndef _IXGBE_TXRX_COMMON_H_
+#define _IXGBE_TXRX_COMMON_H_
+
+#define IXGBE_XDP_PASS		0
+#define IXGBE_XDP_CONSUMED	BIT(0)
+#define IXGBE_XDP_TX		BIT(1)
+#define IXGBE_XDP_REDIR		BIT(2)
+
+int ixgbe_xmit_xdp_ring(struct ixgbe_adapter *adapter,
+			struct xdp_frame *xdpf);
+bool ixgbe_cleanup_headers(struct ixgbe_ring *rx_ring,
+			   union ixgbe_adv_rx_desc *rx_desc,
+			   struct sk_buff *skb);
+void ixgbe_process_skb_fields(struct ixgbe_ring *rx_ring,
+			      union ixgbe_adv_rx_desc *rx_desc,
+			      struct sk_buff *skb);
+void ixgbe_rx_skb(struct ixgbe_q_vector *q_vector,
+		  struct sk_buff *skb);
+
+void ixgbe_txrx_ring_disable(struct ixgbe_adapter *adapter, int ring);
+void ixgbe_txrx_ring_enable(struct ixgbe_adapter *adapter, int ring);
+
+#endif /* #define _IXGBE_TXRX_COMMON_H_ */
