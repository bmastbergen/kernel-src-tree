perf annotate: Add percent_type to struct annotation_options

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Jiri Olsa <jolsa@kernel.org>
commit 796ca33d5ceb621f238021c34cff8cfaa1100623
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/796ca33d.failed

It will be used to carry user selection of percent type for annotation
output.

Passing the percent_type to the annotation_line__print function as the
first step and making it default to current percentage type
(PERCENT_HITS_LOCAL) value.

	Signed-off-by: Jiri Olsa <jolsa@kernel.org>
	Cc: Alexander Shishkin <alexander.shishkin@linux.intel.com>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Peter Zijlstra <peterz@infradead.org>
	Cc: Stephane Eranian <eranian@google.com>
Link: http://lkml.kernel.org/r/20180804130521.11408-13-jolsa@kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 796ca33d5ceb621f238021c34cff8cfaa1100623)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/util/annotate.c
#	tools/perf/util/annotate.h
diff --cc tools/perf/util/annotate.c
index ca7efa05b81c,91528a065768..000000000000
--- a/tools/perf/util/annotate.c
+++ b/tools/perf/util/annotate.c
@@@ -49,10 -49,9 +49,11 @@@ struct annotation_options annotation__d
  	.jump_arrows    = true,
  	.annotate_src	= true,
  	.offset_level	= ANNOTATION__OFFSET_JUMP_TARGETS,
+ 	.percent_type	= PERCENT_HITS_LOCAL,
  };
  
 +const char 	*disassembler_style;
 +const char	*objdump_path;
  static regex_t	 file_lineno;
  
  static struct ins_ops *ins__find(struct arch *arch, const char *name);
@@@ -2075,8 -2077,8 +2078,13 @@@ int symbol__annotate_printf(struct symb
  		}
  
  		err = annotation_line__print(pos, sym, start, evsel, len,
++<<<<<<< HEAD
 +					     min_pcnt, printed, max_lines,
 +					     queue, addr_fmt_width);
++=======
+ 					     opts->min_pcnt, printed, opts->max_lines,
+ 					     queue, addr_fmt_width, opts->percent_type);
++>>>>>>> 796ca33d5ceb (perf annotate: Add percent_type to struct annotation_options)
  
  		switch (err) {
  		case 0:
diff --cc tools/perf/util/annotate.h
index ec867ef2ccd8,145dec845f33..000000000000
--- a/tools/perf/util/annotate.h
+++ b/tools/perf/util/annotate.h
@@@ -74,6 -77,12 +74,15 @@@ struct annotation_options 
  	     show_asm_raw,
  	     annotate_src;
  	u8   offset_level;
++<<<<<<< HEAD
++=======
+ 	int  min_pcnt;
+ 	int  max_lines;
+ 	int  context;
+ 	const char *objdump_path;
+ 	const char *disassembler_style;
+ 	unsigned int percent_type;
++>>>>>>> 796ca33d5ceb (perf annotate: Add percent_type to struct annotation_options)
  };
  
  enum {
* Unmerged path tools/perf/util/annotate.c
* Unmerged path tools/perf/util/annotate.h
