ext4: fix buffer leak in __ext4_read_dirblock() on error path

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Vasily Averin <vvs@virtuozzo.com>
commit de59fae0043f07de5d25e02ca360f7d57bfa5866
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/de59fae0.failed

Fixes: dc6982ff4db1 ("ext4: refactor code to read directory blocks ...")
	Signed-off-by: Vasily Averin <vvs@virtuozzo.com>
	Signed-off-by: Theodore Ts'o <tytso@mit.edu>
	Cc: stable@kernel.org # 3.9
(cherry picked from commit de59fae0043f07de5d25e02ca360f7d57bfa5866)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/ext4/namei.c
diff --cc fs/ext4/namei.c
index 604020e336e0,6a6b90363ef1..000000000000
--- a/fs/ext4/namei.c
+++ b/fs/ext4/namei.c
@@@ -120,9 -124,10 +120,14 @@@ static struct buffer_head *__ext4_read_
  			is_dx_block = 1;
  	}
  	if (!is_dx_block && type == INDEX) {
 -		ext4_error_inode(inode, func, line, block,
 +		ext4_error_inode(inode, __func__, line, block,
  		       "directory leaf block found instead of index block");
++<<<<<<< HEAD
 +		return ERR_PTR(-EIO);
++=======
+ 		brelse(bh);
+ 		return ERR_PTR(-EFSCORRUPTED);
++>>>>>>> de59fae0043f (ext4: fix buffer leak in __ext4_read_dirblock() on error path)
  	}
  	if (!ext4_has_metadata_csum(inode->i_sb) ||
  	    buffer_verified(bh))
* Unmerged path fs/ext4/namei.c
