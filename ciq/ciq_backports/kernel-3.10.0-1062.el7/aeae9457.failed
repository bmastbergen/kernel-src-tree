IB/mlx5: Add DEVX support for memory registration

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Yishai Hadas <yishaih@mellanox.com>
commit aeae94579caf77406a8a235ea33fdb67abe9a57e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/aeae9457.failed

Add support to register a memory with the firmware via the DEVX
interface.

The driver translates a given user address to ib_umem then it will
register the physical addresses with the firmware and get a unique id
for this registration to be used for this virtual address.

	Signed-off-by: Yishai Hadas <yishaih@mellanox.com>
	Signed-off-by: Leon Romanovsky <leonro@mellanox.com>
	Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
(cherry picked from commit aeae94579caf77406a8a235ea33fdb67abe9a57e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/hw/mlx5/devx.c
#	include/linux/mlx5/mlx5_ifc.h
#	include/uapi/rdma/mlx5_user_ioctl_cmds.h
diff --cc include/linux/mlx5/mlx5_ifc.h
index c57762dc5bf3,00b539303f5d..000000000000
--- a/include/linux/mlx5/mlx5_ifc.h
+++ b/include/linux/mlx5/mlx5_ifc.h
@@@ -76,6 -76,16 +76,19 @@@ enum 
  };
  
  enum {
++<<<<<<< HEAD
++=======
+ 	MLX5_GENERAL_OBJ_TYPES_CAP_UCTX = (1ULL << 4),
+ 	MLX5_GENERAL_OBJ_TYPES_CAP_UMEM = (1ULL << 5),
+ };
+ 
+ enum {
+ 	MLX5_OBJ_TYPE_UCTX = 0x0004,
+ 	MLX5_OBJ_TYPE_UMEM = 0x0005,
+ };
+ 
+ enum {
++>>>>>>> aeae94579caf (IB/mlx5: Add DEVX support for memory registration)
  	MLX5_CMD_OP_QUERY_HCA_CAP                 = 0x100,
  	MLX5_CMD_OP_QUERY_ADAPTER                 = 0x101,
  	MLX5_CMD_OP_INIT_HCA                      = 0x102,
* Unmerged path drivers/infiniband/hw/mlx5/devx.c
* Unmerged path include/uapi/rdma/mlx5_user_ioctl_cmds.h
* Unmerged path drivers/infiniband/hw/mlx5/devx.c
* Unmerged path include/linux/mlx5/mlx5_ifc.h
* Unmerged path include/uapi/rdma/mlx5_user_ioctl_cmds.h
