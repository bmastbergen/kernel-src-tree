qede: VF XDP support

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Mintz, Yuval <Yuval.Mintz@cavium.com>
commit e7b80dece83b86f8f630a47a9e0419051c7b1005
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/e7b80dec.failed

This introduces 2 changes needed for XDP to be supported for VFs:

 a. On VF-side, publish the NDO based on qed outputs

 b. On PF-side, request qed to allocate sufficient cids per-VF
    to allow the child vfs to support it

	Signed-off-by: Yuval Mintz <Yuval.Mintz@cavium.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit e7b80dece83b86f8f630a47a9e0419051c7b1005)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/qlogic/qede/qede_main.c
diff --cc drivers/net/ethernet/qlogic/qede/qede_main.c
index c31a55ea287f,fdf04bc5406e..000000000000
--- a/drivers/net/ethernet/qlogic/qede/qede_main.c
+++ b/drivers/net/ethernet/qlogic/qede/qede_main.c
@@@ -873,10 -865,18 +895,21 @@@ static void qede_update_pf_params(struc
  {
  	struct qed_pf_params pf_params;
  
 -	/* 64 rx + 64 tx + 64 XDP */
 +	/* 64 rx + 64 tx */
  	memset(&pf_params, 0, sizeof(struct qed_pf_params));
++<<<<<<< HEAD
 +	pf_params.eth_pf_params.num_cons = (MAX_SB_PER_PF_MIMD - 1) * 2;
++=======
+ 	pf_params.eth_pf_params.num_cons = (MAX_SB_PER_PF_MIMD - 1) * 3;
+ 
+ 	/* Same for VFs - make sure they'll have sufficient connections
+ 	 * to support XDP Tx queues.
+ 	 */
+ 	pf_params.eth_pf_params.num_vf_cons = 48;
+ 
+ #ifdef CONFIG_RFS_ACCEL
++>>>>>>> e7b80dece83b (qede: VF XDP support)
  	pf_params.eth_pf_params.num_arfs_filters = QEDE_RFS_MAX_FLTR;
 -#endif
  	qed_ops->common->update_pf_params(cdev, &pf_params);
  }
  
* Unmerged path drivers/net/ethernet/qlogic/qede/qede_main.c
