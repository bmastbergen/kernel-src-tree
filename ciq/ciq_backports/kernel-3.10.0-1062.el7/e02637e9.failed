IB: Fix RDMA_RXE and INFINIBAND_RDMAVT dependencies for DMA_VIRT_OPS

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Ben Hutchings <ben@decadent.org.uk>
commit e02637e97d68a54b1527bc654bf8377eda310226
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/e02637e9.failed

DMA_VIRT_OPS requires that dma_addr_t is at least as wide as a
pointer, which is expressed as a dependency on !64BIT ||
ARCH_DMA_ADDR_T_64BIT.

For parisc64 this is not true, and if these IB modules are enabled,
kconfig warns:

WARNING: unmet direct dependencies detected for DMA_VIRT_OPS
  Depends on [n]: HAS_DMA [=y] && (!64BIT [=y] || ARCH_DMA_ADDR_T_64BIT)
  Selected by [m]:
  - INFINIBAND_RDMAVT [=m] && INFINIBAND [=m] && 64BIT [=y] && PCI [=y]
  - RDMA_RXE [=m] && INET [=y] && PCI [=y] && INFINIBAND [=m]

Add dependencies to fix this.

	Signed-off-by: Ben Hutchings <ben@decadent.org.uk>
	Signed-off-by: Doug Ledford <dledford@redhat.com>
(cherry picked from commit e02637e97d68a54b1527bc654bf8377eda310226)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/sw/rxe/Kconfig
diff --cc drivers/infiniband/sw/rxe/Kconfig
index 374faf38d180,67ae960ab523..000000000000
--- a/drivers/infiniband/sw/rxe/Kconfig
+++ b/drivers/infiniband/sw/rxe/Kconfig
@@@ -1,7 -1,7 +1,11 @@@
  config RDMA_RXE
  	tristate "Software RDMA over Ethernet (RoCE) driver"
  	depends on INET && PCI && INFINIBAND
++<<<<<<< HEAD
 +	default n
++=======
+ 	depends on !64BIT || ARCH_DMA_ADDR_T_64BIT
++>>>>>>> e02637e97d68 (IB: Fix RDMA_RXE and INFINIBAND_RDMAVT dependencies for DMA_VIRT_OPS)
  	select NET_UDP_TUNNEL
  	select CRYPTO_CRC32
  	select DMA_VIRT_OPS
diff --git a/drivers/infiniband/sw/rdmavt/Kconfig b/drivers/infiniband/sw/rdmavt/Kconfig
index 0cbf8ecc6d58..d578ecac2f77 100644
--- a/drivers/infiniband/sw/rdmavt/Kconfig
+++ b/drivers/infiniband/sw/rdmavt/Kconfig
@@ -1,6 +1,6 @@
 config INFINIBAND_RDMAVT
 	tristate "RDMA verbs transport library"
-	depends on 64BIT
+	depends on 64BIT && ARCH_DMA_ADDR_T_64BIT
 	depends on PCI
 	select DMA_VIRT_OPS
 	default m
* Unmerged path drivers/infiniband/sw/rxe/Kconfig
