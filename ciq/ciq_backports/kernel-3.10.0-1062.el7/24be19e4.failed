net/mlx4_en: Change min MTU size to ETH_MIN_MTU

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
Rebuild_CHGLOG: - [netdrv] mlx4_en: Change min MTU size to ETH_MIN_MTU (Alaa Hleihel) [1641912 1642498]
Rebuild_FUZZ: 95.56%
commit-author Eran Ben Elisha <eranbe@mellanox.com>
commit 24be19e47779d604d1492c114459dca9a92acf78
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/24be19e4.failed

NIC driver minimal MTU size shall be set to ETH_MIN_MTU, as defined in
the RFC791 and in the network stack. Remove old mlx4_en only define for
it, which was set to wrong value.

Fixes: b80f71f5816f ("ethernet/mellanox: use core min/max MTU checking")
	Signed-off-by: Eran Ben Elisha <eranbe@mellanox.com>
	Signed-off-by: Tariq Toukan <tariqt@mellanox.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 24be19e47779d604d1492c114459dca9a92acf78)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx4/en_netdev.c
#	drivers/net/ethernet/mellanox/mlx4/mlx4_en.h
diff --cc drivers/net/ethernet/mellanox/mlx4/en_netdev.c
index 3d60d5c2c905,6b88881b8e35..000000000000
--- a/drivers/net/ethernet/mellanox/mlx4/en_netdev.c
+++ b/drivers/net/ethernet/mellanox/mlx4/en_netdev.c
@@@ -3488,9 -3493,9 +3488,15 @@@ int mlx4_en_init_netdev(struct mlx4_en_
  		dev->gso_partial_features = NETIF_F_GSO_UDP_TUNNEL_CSUM;
  	}
  
++<<<<<<< HEAD
 +	/* MTU range: 46 - hw-specific max */
 +	dev->extended->min_mtu = MLX4_EN_MIN_MTU;
 +	dev->extended->max_mtu = priv->max_mtu;
++=======
+ 	/* MTU range: 68 - hw-specific max */
+ 	dev->min_mtu = ETH_MIN_MTU;
+ 	dev->max_mtu = priv->max_mtu;
++>>>>>>> 24be19e47779 (net/mlx4_en: Change min MTU size to ETH_MIN_MTU)
  
  	mdev->pndev[port] = dev;
  	mdev->upper[port] = NULL;
diff --cc drivers/net/ethernet/mellanox/mlx4/mlx4_en.h
index b340ef3e20b2,8137454e2534..000000000000
--- a/drivers/net/ethernet/mellanox/mlx4/mlx4_en.h
+++ b/drivers/net/ethernet/mellanox/mlx4/mlx4_en.h
@@@ -167,7 -161,10 +167,14 @@@
  #define MLX4_SELFTEST_LB_MIN_MTU (MLX4_LOOPBACK_TEST_PAYLOAD + NET_IP_ALIGN + \
  				  ETH_HLEN + PREAMBLE_LEN)
  
++<<<<<<< HEAD
 +#define MLX4_EN_MIN_MTU		46
++=======
+ /* VLAN_HLEN is added twice,to support skb vlan tagged with multiple
+  * headers. (For example: ETH_P_8021Q and ETH_P_8021AD).
+  */
+ #define MLX4_EN_EFF_MTU(mtu)	((mtu) + ETH_HLEN + (2 * VLAN_HLEN))
++>>>>>>> 24be19e47779 (net/mlx4_en: Change min MTU size to ETH_MIN_MTU)
  #define ETH_BCAST		0xffffffffffffULL
  
  #define MLX4_EN_LOOPBACK_RETRIES	5
* Unmerged path drivers/net/ethernet/mellanox/mlx4/en_netdev.c
* Unmerged path drivers/net/ethernet/mellanox/mlx4/mlx4_en.h
