nfp: remove ndo_poll_controller

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Eric Dumazet <edumazet@google.com>
commit 0825ce70318e9c576acbdd5ceb4a8d563263cf8f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/0825ce70.failed

As diagnosed by Song Liu, ndo_poll_controller() can
be very dangerous on loaded hosts, since the cpu
calling ndo_poll_controller() might steal all NAPI
contexts (for all RX/TX queues of the NIC). This capture
can last for unlimited amount of time, since one
cpu is generally not able to drain all the queues under load.

nfp uses NAPI for TX completions, so we better let core
networking stack call the napi->poll() to avoid the capture.

	Signed-off-by: Eric Dumazet <edumazet@google.com>
	Cc: Jakub Kicinski <jakub.kicinski@netronome.com>
	Acked-by: Jakub Kicinski <jakub.kicinski@netronome.com>
	Tested-by: Jakub Kicinski <jakub.kicinski@netronome.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 0825ce70318e9c576acbdd5ceb4a8d563263cf8f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/netronome/nfp/nfp_net_common.c
diff --cc drivers/net/ethernet/netronome/nfp/nfp_net_common.c
index d18771887c0c,8ed38fd5a852..000000000000
--- a/drivers/net/ethernet/netronome/nfp/nfp_net_common.c
+++ b/drivers/net/ethernet/netronome/nfp/nfp_net_common.c
@@@ -3526,9 -3504,8 +3526,12 @@@ const struct net_device_ops nfp_net_net
  	.ndo_get_stats64	= nfp_net_stat64,
  	.ndo_vlan_rx_add_vid	= nfp_net_vlan_rx_add_vid,
  	.ndo_vlan_rx_kill_vid	= nfp_net_vlan_rx_kill_vid,
++<<<<<<< HEAD
 +	.extended.ndo_setup_tc_rh		= nfp_port_setup_tc,
++=======
++>>>>>>> 0825ce70318e (nfp: remove ndo_poll_controller)
  	.ndo_set_vf_mac         = nfp_app_set_vf_mac,
 -	.ndo_set_vf_vlan        = nfp_app_set_vf_vlan,
 +	.extended.ndo_set_vf_vlan        = nfp_app_set_vf_vlan,
  	.ndo_set_vf_spoofchk    = nfp_app_set_vf_spoofchk,
  	.ndo_get_vf_config	= nfp_app_get_vf_config,
  	.ndo_set_vf_link_state  = nfp_app_set_vf_link_state,
* Unmerged path drivers/net/ethernet/netronome/nfp/nfp_net_common.c
