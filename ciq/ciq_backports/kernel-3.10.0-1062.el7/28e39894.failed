RDMA/core: Remove ib_find_cached_gid() and ib_find_cached_gid_by_port()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Bart Van Assche <bart.vanassche@wdc.com>
commit 28e39894ed4fecd19956ae672a312f65419bd703
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/28e39894.failed

Remove these two functions since all their callers have been removed.
See also commit ea8c2d8f6014 ("RDMA/core: Remove unused ib cache
functions").

	Signed-off-by: Bart Van Assche <bart.vanassche@wdc.com>
	Reviewed-by: Parav Pandit <parav@mellanox.com>
	Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
(cherry picked from commit 28e39894ed4fecd19956ae672a312f65419bd703)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/core/cache.c
diff --cc drivers/infiniband/core/cache.c
index 36d3478f5cc1,c5fa67c72f23..000000000000
--- a/drivers/infiniband/core/cache.c
+++ b/drivers/infiniband/core/cache.c
@@@ -552,30 -747,9 +552,10 @@@ const struct ib_gid_attr *rdma_find_gid
  	return res;
  }
  
- int ib_find_cached_gid_by_port(struct ib_device *ib_dev,
- 			       const union ib_gid *gid,
- 			       enum ib_gid_type gid_type,
- 			       u8 port, struct net_device *ndev,
- 			       u16 *index)
- {
- 	const struct ib_gid_attr *res;
- 
- 	res = rdma_find_gid_by_port(ib_dev, gid, gid_type, port, ndev);
- 	if (IS_ERR(res))
- 		return PTR_ERR(res);
- 
- 	if (index)
- 		*index = res->index;
- 	rdma_put_gid_attr(res);
- 	return 0;
- 
- }
- EXPORT_SYMBOL(ib_find_cached_gid_by_port);
- 
  static struct ib_gid_table *alloc_gid_table(int sz)
  {
 -	struct ib_gid_table *table = kzalloc(sizeof(*table), GFP_KERNEL);
 +	struct ib_gid_table *table =
 +		kzalloc(sizeof(struct ib_gid_table), GFP_KERNEL);
  
  	if (!table)
  		return NULL;
@@@ -892,50 -1018,6 +872,53 @@@ const struct ib_gid_attr *rdma_find_gid
  }
  EXPORT_SYMBOL(rdma_find_gid);
  
++<<<<<<< HEAD
 +int ib_find_cached_gid(struct ib_device *device, const union ib_gid *gid,
 +		       enum ib_gid_type gid_type, struct net_device *ndev,
 +		       u8 *port_num, u16 *index)
 +{
 +	const struct ib_gid_attr *res;
 +
 +	res = rdma_find_gid(device, gid, gid_type, ndev);
 +	if (IS_ERR(res))
 +		return PTR_ERR(res);
 +	if (port_num)
 +		*port_num = res->port_num;
 +	if (index)
 +		*index = res->index;
 +	rdma_put_gid_attr(res);
 +	return 0;
 +}
 +EXPORT_SYMBOL(ib_find_cached_gid);
 +
 +int ib_find_gid_by_filter(struct ib_device *device,
 +			  const union ib_gid *gid,
 +			  u8 port_num,
 +			  bool (*filter)(const union ib_gid *gid,
 +					 const struct ib_gid_attr *,
 +					 void *),
 +			  void *context, u16 *index)
 +{
 +	const struct ib_gid_attr *res;
 +
 +	/* Only RoCE GID table supports filter function */
 +	if (!rdma_cap_roce_gid_table(device, port_num) && filter)
 +		return -EPROTONOSUPPORT;
 +
 +	res = rdma_find_gid_by_filter(device, gid, port_num, filter,
 +				      context);
 +	if (IS_ERR(res))
 +		return PTR_ERR(res);
 +
 +	if (index)
 +		*index = res->index;
 +
 +	rdma_put_gid_attr(res);
 +	return 0;
 +}
 +
++=======
++>>>>>>> 28e39894ed4f (RDMA/core: Remove ib_find_cached_gid() and ib_find_cached_gid_by_port())
  int ib_get_cached_pkey(struct ib_device *device,
  		       u8                port_num,
  		       int               index,
* Unmerged path drivers/infiniband/core/cache.c
