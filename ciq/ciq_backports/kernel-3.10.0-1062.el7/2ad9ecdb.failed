net/mlx5e: Add counter for total num of NOP operations

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
Rebuild_CHGLOG: - [netdrv] mlx5e: Add counter for total num of NOP operations (Alaa Hleihel) [1642498]
Rebuild_FUZZ: 96.15%
commit-author Tariq Toukan <tariqt@mellanox.com>
commit 2ad9ecdbe7d482867000d3da7cbccc63689a7f70
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/2ad9ecdb.failed

A per-ring counter for NOP operations already exists.
Here I add a counter that sums them up.

	Signed-off-by: Tariq Toukan <tariqt@mellanox.com>
	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
(cherry picked from commit 2ad9ecdbe7d482867000d3da7cbccc63689a7f70)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/en_stats.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/en_stats.c
index 764a2db65154,c0507fada0be..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_stats.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_stats.c
@@@ -43,6 -44,13 +43,16 @@@ static const struct counter_desc sw_sta
  	{ MLX5E_DECLARE_STAT(struct mlx5e_sw_stats, tx_tso_inner_packets) },
  	{ MLX5E_DECLARE_STAT(struct mlx5e_sw_stats, tx_tso_inner_bytes) },
  	{ MLX5E_DECLARE_STAT(struct mlx5e_sw_stats, tx_added_vlan_packets) },
++<<<<<<< HEAD
++=======
+ 	{ MLX5E_DECLARE_STAT(struct mlx5e_sw_stats, tx_nop) },
+ 
+ #ifdef CONFIG_MLX5_EN_TLS
+ 	{ MLX5E_DECLARE_STAT(struct mlx5e_sw_stats, tx_tls_ooo) },
+ 	{ MLX5E_DECLARE_STAT(struct mlx5e_sw_stats, tx_tls_resync_bytes) },
+ #endif
+ 
++>>>>>>> 2ad9ecdbe7d4 (net/mlx5e: Add counter for total num of NOP operations)
  	{ MLX5E_DECLARE_STAT(struct mlx5e_sw_stats, rx_lro_packets) },
  	{ MLX5E_DECLARE_STAT(struct mlx5e_sw_stats, rx_lro_bytes) },
  	{ MLX5E_DECLARE_STAT(struct mlx5e_sw_stats, rx_removed_vlan_packets) },
@@@ -153,10 -174,13 +163,11 @@@ static void mlx5e_grp_sw_update_stats(s
  			s->tx_tso_inner_packets	+= sq_stats->tso_inner_packets;
  			s->tx_tso_inner_bytes	+= sq_stats->tso_inner_bytes;
  			s->tx_added_vlan_packets += sq_stats->added_vlan_packets;
+ 			s->tx_nop               += sq_stats->nop;
  			s->tx_queue_stopped	+= sq_stats->stopped;
  			s->tx_queue_wake	+= sq_stats->wake;
 -			s->tx_udp_seg_rem	+= sq_stats->udp_seg_rem;
  			s->tx_queue_dropped	+= sq_stats->dropped;
  			s->tx_cqe_err		+= sq_stats->cqe_err;
 -			s->tx_recover		+= sq_stats->recover;
  			s->tx_xmit_more		+= sq_stats->xmit_more;
  			s->tx_csum_partial_inner += sq_stats->csum_partial_inner;
  			s->tx_csum_none		+= sq_stats->csum_none;
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/en_stats.c
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en_stats.h b/drivers/net/ethernet/mellanox/mlx5/core/en_stats.h
index 9c603217203a..6bfeb7ffa83c 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_stats.h
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_stats.h
@@ -61,6 +61,7 @@ struct mlx5e_sw_stats {
 	u64 tx_tso_inner_packets;
 	u64 tx_tso_inner_bytes;
 	u64 tx_added_vlan_packets;
+	u64 tx_nop;
 	u64 rx_lro_packets;
 	u64 rx_lro_bytes;
 	u64 rx_removed_vlan_packets;
