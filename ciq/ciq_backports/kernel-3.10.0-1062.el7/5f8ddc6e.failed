ALSA: hda/ca0132: Restore PCM Analog Mic-In2

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Alastair Bridgewater <alastair.bridgewater@gmail.com>
commit 5f8ddc6ee63a9057522923a6b2eb8c51993e1db0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/5f8ddc6e.failed

Commit 009b8f979bf8cb5f7ec6d3dd7683585122ed10f8 conditionalized
adding the "CA0132 Analog Mic-In2" PCM with a comment to the
effect that, "desktops don't use this ADC", but the test was set
up such that the ADC was only created for desktops.  Invert the
test.

Fixes: 009b8f979bf8 ("ALSA: hda/ca0132: update core functions for sbz + r3di")
	Signed-off-by: Alastair Bridgewater <alastair.bridgewater@gmail.com>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit 5f8ddc6ee63a9057522923a6b2eb8c51993e1db0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/pci/hda/patch_ca0132.c
diff --cc sound/pci/hda/patch_ca0132.c
index 2b8dca7fa057,09ff85c622bb..000000000000
--- a/sound/pci/hda/patch_ca0132.c
+++ b/sound/pci/hda/patch_ca0132.c
@@@ -4119,12 -5965,16 +4119,25 @@@ static int ca0132_build_pcms(struct hda
  	info->stream[SNDRV_PCM_STREAM_CAPTURE].substreams = 1;
  	info->stream[SNDRV_PCM_STREAM_CAPTURE].nid = spec->adcs[0];
  
++<<<<<<< HEAD
 +	info = snd_hda_codec_pcm_new(codec, "CA0132 Analog Mic-In2");
 +	if (!info)
 +		return -ENOMEM;
 +	info->stream[SNDRV_PCM_STREAM_CAPTURE] = ca0132_pcm_analog_capture;
 +	info->stream[SNDRV_PCM_STREAM_CAPTURE].substreams = 1;
 +	info->stream[SNDRV_PCM_STREAM_CAPTURE].nid = spec->adcs[1];
++=======
+ 	/* With the DSP enabled, desktops don't use this ADC. */
+ 	if (!spec->use_alt_functions) {
+ 		info = snd_hda_codec_pcm_new(codec, "CA0132 Analog Mic-In2");
+ 		if (!info)
+ 			return -ENOMEM;
+ 		info->stream[SNDRV_PCM_STREAM_CAPTURE] =
+ 			ca0132_pcm_analog_capture;
+ 		info->stream[SNDRV_PCM_STREAM_CAPTURE].substreams = 1;
+ 		info->stream[SNDRV_PCM_STREAM_CAPTURE].nid = spec->adcs[1];
+ 	}
++>>>>>>> 5f8ddc6ee63a (ALSA: hda/ca0132: Restore PCM Analog Mic-In2)
  
  	info = snd_hda_codec_pcm_new(codec, "CA0132 What U Hear");
  	if (!info)
* Unmerged path sound/pci/hda/patch_ca0132.c
