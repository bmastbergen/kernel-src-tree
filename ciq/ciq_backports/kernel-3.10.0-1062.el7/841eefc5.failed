RDMA/uverbs: Add generic function to fill in flow action object

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
Rebuild_CHGLOG: - [rdma] uverbs: Add generic function to fill in flow action object (Kamal Heib) [1655923]
Rebuild_FUZZ: 95.87%
commit-author Mark Bloch <markb@mellanox.com>
commit 841eefc5cb57030ad05a0c4bc285f93ffa668ad9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/841eefc5.failed

Refactor the initialization of a flow action object to a common function.

	Signed-off-by: Mark Bloch <markb@mellanox.com>
	Signed-off-by: Leon Romanovsky <leonro@mellanox.com>
	Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
(cherry picked from commit 841eefc5cb57030ad05a0c4bc285f93ffa668ad9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/core/uverbs_std_types_flow_action.c
#	drivers/infiniband/hw/mlx5/flow.c
* Unmerged path drivers/infiniband/core/uverbs_std_types_flow_action.c
* Unmerged path drivers/infiniband/hw/mlx5/flow.c
* Unmerged path drivers/infiniband/core/uverbs_std_types_flow_action.c
* Unmerged path drivers/infiniband/hw/mlx5/flow.c
diff --git a/include/rdma/uverbs_std_types.h b/include/rdma/uverbs_std_types.h
index 6e389a6b0382..d219cfe8ba5a 100644
--- a/include/rdma/uverbs_std_types.h
+++ b/include/rdma/uverbs_std_types.h
@@ -113,4 +113,16 @@ static inline struct ib_uobject *__uobj_alloc(const struct uverbs_obj_type *type
 #define uobj_alloc(_type, ucontext)	\
 	__uobj_alloc(uobj_get_type(_type), ucontext)
 
+static inline void uverbs_flow_action_fill_action(struct ib_flow_action *action,
+						  struct ib_uobject *uobj,
+						  struct ib_device *ib_dev,
+						  enum ib_flow_action_type type)
+{
+	atomic_set(&action->usecnt, 0);
+	action->device = ib_dev;
+	action->type = type;
+	action->uobject = uobj;
+	uobj->object = action;
+}
+
 #endif
