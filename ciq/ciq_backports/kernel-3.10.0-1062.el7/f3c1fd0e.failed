svcrdma: Reduce max_send_sges

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Chuck Lever <chuck.lever@oracle.com>
commit f3c1fd0ee294abd4367dfa72d89f016c682202f0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/f3c1fd0e.failed

There's no need to request a large number of send SGEs because the
inline threshold already constrains the number of SGEs per Send.

	Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
	Reviewed-by: Sagi Grimberg <sagi@grimberg.me>
	Signed-off-by: J. Bruce Fields <bfields@redhat.com>
(cherry picked from commit f3c1fd0ee294abd4367dfa72d89f016c682202f0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/sunrpc/xprtrdma/svc_rdma_transport.c
diff --cc net/sunrpc/xprtrdma/svc_rdma_transport.c
index d3dc1550457a,2f7ec8912f49..000000000000
--- a/net/sunrpc/xprtrdma/svc_rdma_transport.c
+++ b/net/sunrpc/xprtrdma/svc_rdma_transport.c
@@@ -722,8 -475,15 +722,20 @@@ static struct svc_xprt *svc_rdma_accept
  
  	/* Qualify the transport resource defaults with the
  	 * capabilities of this particular device */
++<<<<<<< HEAD
 +	newxprt->sc_max_sge = min((size_t)dev->attrs.max_sge,
 +				  (size_t)RPCSVC_MAXPAGES);
++=======
+ 	/* Transport header, head iovec, tail iovec */
+ 	newxprt->sc_max_send_sges = 3;
+ 	/* Add one SGE per page list entry */
+ 	newxprt->sc_max_send_sges += svcrdma_max_req_size / PAGE_SIZE;
+ 	if (newxprt->sc_max_send_sges > dev->attrs.max_send_sge) {
+ 		pr_err("svcrdma: too few Send SGEs available (%d needed)\n",
+ 		       newxprt->sc_max_send_sges);
+ 		goto errout;
+ 	}
++>>>>>>> f3c1fd0ee294 (svcrdma: Reduce max_send_sges)
  	newxprt->sc_max_req_size = svcrdma_max_req_size;
  	newxprt->sc_max_requests = svcrdma_max_requests;
  	newxprt->sc_max_bc_requests = svcrdma_max_bc_requests;
* Unmerged path net/sunrpc/xprtrdma/svc_rdma_transport.c
