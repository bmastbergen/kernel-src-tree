perf script: Add --show-round-event to display PERF_RECORD_FINISHED_ROUND

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Jiri Olsa <jolsa@kernel.org>
commit 3233b37a71c794e25a0a794185df8d6abd9f277e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/3233b37a.failed

Adding --show-round-event to display PERF_RECORD_FINISHED_ROUND events
like:

  # perf script --show-round-events 2>/dev/null
               yes  8591 [002] 124177.397597:         18         cpu/mem-stores/P: ff...
               yes  8591 [002] 124177.397615:          1 cpu/mem-loads,ldlat=30/P: ff...
  PERF_RECORD_FINISHED_ROUND
              perf 10380 [001] 124177.397622:          6 cpu/mem-loads,ldlat=30/P: ff...
  PERF_RECORD_FINISHED_ROUND
           swapper     0 [000] 124177.400518:         88         cpu/mem-stores/P: ff...
           swapper     0 [000] 124177.400521:         88         cpu/mem-stores/P: ff...

	Signed-off-by: Jiri Olsa <jolsa@kernel.org>
	Tested-by: Arnaldo Carvalho de Melo <acme@redhat.com>
	Cc: Alexander Shishkin <alexander.shishkin@linux.intel.com>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Peter Zijlstra <peterz@infradead.org>
Link: http://lkml.kernel.org/r/20180206181813.10943-4-jolsa@kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 3233b37a71c794e25a0a794185df8d6abd9f277e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/Documentation/perf-script.txt
#	tools/perf/builtin-script.c
diff --cc tools/perf/Documentation/perf-script.txt
index a5c8259c4832,36ec0257f8d3..000000000000
--- a/tools/perf/Documentation/perf-script.txt
+++ b/tools/perf/Documentation/perf-script.txt
@@@ -271,6 -300,12 +271,15 @@@ OPTION
  	Display context switch events i.e. events of type PERF_RECORD_SWITCH or
  	PERF_RECORD_SWITCH_CPU_WIDE.
  
++<<<<<<< HEAD
++=======
+ --show-lost-events
+ 	Display lost events i.e. events of type PERF_RECORD_LOST.
+ 
+ --show-round-events
+ 	Display finished round events i.e. events of type PERF_RECORD_FINISHED_ROUND.
+ 
++>>>>>>> 3233b37a71c7 (perf script: Add --show-round-event to display PERF_RECORD_FINISHED_ROUND)
  --demangle::
  	Demangle symbol names to human readable form. It's enabled by default,
  	disable with --no-demangle.
diff --cc tools/perf/builtin-script.c
index da013e8d9612,cce926aeb0c0..000000000000
--- a/tools/perf/builtin-script.c
+++ b/tools/perf/builtin-script.c
@@@ -1349,6 -1487,9 +1349,12 @@@ struct perf_script 
  	bool			show_task_events;
  	bool			show_mmap_events;
  	bool			show_switch_events;
++<<<<<<< HEAD
++=======
+ 	bool			show_namespace_events;
+ 	bool			show_lost_events;
+ 	bool			show_round_events;
++>>>>>>> 3233b37a71c7 (perf script: Add --show-round-event to display PERF_RECORD_FINISHED_ROUND)
  	bool			allocated;
  	bool			per_event_dump;
  	struct cpu_map		*cpus;
@@@ -1903,6 -2207,14 +1919,17 @@@ static int __cmd_script(struct perf_scr
  	}
  	if (script->show_switch_events)
  		script->tool.context_switch = process_switch_event;
++<<<<<<< HEAD
++=======
+ 	if (script->show_namespace_events)
+ 		script->tool.namespaces = process_namespaces_event;
+ 	if (script->show_lost_events)
+ 		script->tool.lost = process_lost_event;
+ 	if (script->show_round_events) {
+ 		script->tool.ordered_events = false;
+ 		script->tool.finished_round = process_finished_round_event;
+ 	}
++>>>>>>> 3233b37a71c7 (perf script: Add --show-round-event to display PERF_RECORD_FINISHED_ROUND)
  
  	if (perf_script__setup_per_event_dump(script)) {
  		pr_err("Couldn't create the per event dump files\n");
@@@ -2837,6 -3150,12 +2864,15 @@@ int cmd_script(int argc, const char **a
  		    "Show the mmap events"),
  	OPT_BOOLEAN('\0', "show-switch-events", &script.show_switch_events,
  		    "Show context switch events (if recorded)"),
++<<<<<<< HEAD
++=======
+ 	OPT_BOOLEAN('\0', "show-namespace-events", &script.show_namespace_events,
+ 		    "Show namespace events (if recorded)"),
+ 	OPT_BOOLEAN('\0', "show-lost-events", &script.show_lost_events,
+ 		    "Show lost events (if recorded)"),
+ 	OPT_BOOLEAN('\0', "show-round-events", &script.show_round_events,
+ 		    "Show round events (if recorded)"),
++>>>>>>> 3233b37a71c7 (perf script: Add --show-round-event to display PERF_RECORD_FINISHED_ROUND)
  	OPT_BOOLEAN('\0', "per-event-dump", &script.per_event_dump,
  		    "Dump trace output to files named by the monitored events"),
  	OPT_BOOLEAN('f', "force", &symbol_conf.force, "don't complain, do it"),
* Unmerged path tools/perf/Documentation/perf-script.txt
* Unmerged path tools/perf/builtin-script.c
