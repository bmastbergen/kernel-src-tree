cxgb4: fix thermal zone build error

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Ganesh Goudar <ganeshgr@chelsio.com>
commit ebcd210e93b2a984b7a7b82d45f7f0d21b7ec2d2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/ebcd210e.failed

with CONFIG_THERMAL=m and cxgb4 as built-in build fails, and
'commit e70a57fa59bb ("cxgb4: fix thermal configuration dependencies")'
tries to fix it but when cxgb4i is made built-in build fails again,
use IS_REACHABLE instead of IS_ENABLED to fix the issue.

Fixes: e70a57fa59bb (cxgb4: fix thermal configuration dependencies)
	Reported-by: Randy Dunlap <rdunlap@infradead.org>
	Signed-off-by: Ganesh Goudar <ganeshgr@chelsio.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit ebcd210e93b2a984b7a7b82d45f7f0d21b7ec2d2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/chelsio/cxgb4/Makefile
#	drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
diff --cc drivers/net/ethernet/chelsio/cxgb4/Makefile
index 745d519615b6,91d8a885deba..000000000000
--- a/drivers/net/ethernet/chelsio/cxgb4/Makefile
+++ b/drivers/net/ethernet/chelsio/cxgb4/Makefile
@@@ -9,4 -10,6 +9,8 @@@ cxgb4-objs := cxgb4_main.o l2t.o smt.o 
  	      cxgb4_ptp.o cxgb4_tc_flower.o cxgb4_cudbg.o \
  	      cudbg_common.o cudbg_lib.o cudbg_zlib.o
  cxgb4-$(CONFIG_CHELSIO_T4_DCB) +=  cxgb4_dcb.o
 -cxgb4-$(CONFIG_CHELSIO_T4_FCOE) +=  cxgb4_fcoe.o
  cxgb4-$(CONFIG_DEBUG_FS) += cxgb4_debugfs.o
++<<<<<<< HEAD
++=======
+ cxgb4-$(CONFIG_THERMAL) += cxgb4_thermal.o
++>>>>>>> ebcd210e93b2 (cxgb4: fix thermal zone build error)
diff --cc drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
index 9a80803a276d,d49db46254cd..000000000000
--- a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
+++ b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
@@@ -5793,6 -5863,10 +5793,13 @@@ static int init_one(struct pci_dev *pde
  	if (!is_t4(adapter->params.chip))
  		cxgb4_ptp_init(adapter);
  
++<<<<<<< HEAD
++=======
+ 	if (IS_REACHABLE(CONFIG_THERMAL) &&
+ 	    !is_t4(adapter->params.chip) && (adapter->flags & FW_OK))
+ 		cxgb4_thermal_init(adapter);
+ 
++>>>>>>> ebcd210e93b2 (cxgb4: fix thermal zone build error)
  	print_adapter_info(adapter);
  	return 0;
  
@@@ -5858,6 -5932,8 +5865,11 @@@ static void remove_one(struct pci_dev *
  
  		if (!is_t4(adapter->params.chip))
  			cxgb4_ptp_stop(adapter);
++<<<<<<< HEAD
++=======
+ 		if (IS_REACHABLE(CONFIG_THERMAL))
+ 			cxgb4_thermal_remove(adapter);
++>>>>>>> ebcd210e93b2 (cxgb4: fix thermal zone build error)
  
  		/* If we allocated filters, free up state associated with any
  		 * valid filters ...
* Unmerged path drivers/net/ethernet/chelsio/cxgb4/Makefile
* Unmerged path drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
