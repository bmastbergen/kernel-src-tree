nvme-rdma: fix double freeing of async event data

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
Rebuild_CHGLOG: - [nvme] rdma: fix double freeing of async event data (David Milburn) [1655786]
Rebuild_FUZZ: 94.62%
commit-author Prabhath Sajeepa <psajeepa@purestorage.com>
commit 6344d02dc8f886b6bbcd922ae1a17e4a41500f2d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/6344d02d.failed

Some error paths in configuration of admin queue free data buffer
associated with async request SQE without resetting the data buffer
pointer to NULL, This buffer is also freed up again if the controller
is shutdown or reset.

	Signed-off-by: Prabhath Sajeepa <psajeepa@purestorage.com>
	Reviewed-by: Roland Dreier <roland@purestorage.com>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
(cherry picked from commit 6344d02dc8f886b6bbcd922ae1a17e4a41500f2d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/nvme/host/rdma.c
diff --cc drivers/nvme/host/rdma.c
index f2010b41a624,ab6ec7295bf9..000000000000
--- a/drivers/nvme/host/rdma.c
+++ b/drivers/nvme/host/rdma.c
@@@ -832,6 -821,10 +833,13 @@@ out_cleanup_queue
  out_free_tagset:
  	if (new)
  		nvme_rdma_free_tagset(&ctrl->ctrl, ctrl->ctrl.admin_tagset);
++<<<<<<< HEAD
++=======
+ out_free_async_qe:
+ 	nvme_rdma_free_qe(ctrl->device->dev, &ctrl->async_event_sqe,
+ 		sizeof(struct nvme_command), DMA_TO_DEVICE);
+ 	ctrl->async_event_sqe.data = NULL;
++>>>>>>> 6344d02dc8f8 (nvme-rdma: fix double freeing of async event data)
  out_free_queue:
  	nvme_rdma_free_queue(&ctrl->queues[0]);
  	return error;
* Unmerged path drivers/nvme/host/rdma.c
