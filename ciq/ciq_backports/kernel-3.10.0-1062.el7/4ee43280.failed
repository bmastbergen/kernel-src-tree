nvmet: keep a port pointer in nvmet_ctrl

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Christoph Hellwig <hch@lst.de>
commit 4ee43280488b0f6cbd74702725a32f47d03d690b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/4ee43280.failed

This will be needed for the ANA AEN code.

	Signed-off-by: Christoph Hellwig <hch@lst.de>
	Reviewed-by: Keith Busch <keith.busch@intel.com>
	Reviewed-by: Martin K. Petersen <martin.petersen@oracle.com>
	Reviewed-by: Hannes Reinecke <hare@suse.com>
	Reviewed-by: Johannes Thumshirn <jthumshirn@suse.de>
(cherry picked from commit 4ee43280488b0f6cbd74702725a32f47d03d690b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/nvme/target/nvmet.h
diff --cc drivers/nvme/target/nvmet.h
index 292d4d16ab7f,de12dcbfd3f3..000000000000
--- a/drivers/nvme/target/nvmet.h
+++ b/drivers/nvme/target/nvmet.h
@@@ -120,6 -140,10 +120,13 @@@ struct nvmet_ctrl 
  	u16			cntlid;
  	u32			kato;
  
++<<<<<<< HEAD
++=======
+ 	struct nvmet_port	*port;
+ 
+ 	u32			aen_enabled;
+ 	unsigned long		aen_masked;
++>>>>>>> 4ee43280488b (nvmet: keep a port pointer in nvmet_ctrl)
  	struct nvmet_req	*async_event_cmds[NVMET_ASYNC_EVENTS];
  	unsigned int		nr_async_event_cmds;
  	struct list_head	async_events;
diff --git a/drivers/nvme/target/core.c b/drivers/nvme/target/core.c
index 40af36940957..46799f5f302d 100644
--- a/drivers/nvme/target/core.c
+++ b/drivers/nvme/target/core.c
@@ -810,6 +810,8 @@ u16 nvmet_alloc_ctrl(const char *subsysnqn, const char *hostnqn,
 
 	nvmet_init_cap(ctrl);
 
+	ctrl->port = req->port;
+
 	INIT_WORK(&ctrl->async_event_work, nvmet_async_event_work);
 	INIT_LIST_HEAD(&ctrl->async_events);
 
* Unmerged path drivers/nvme/target/nvmet.h
