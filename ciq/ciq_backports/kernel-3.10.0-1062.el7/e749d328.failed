ipmi/powernv: Fix error return code in ipmi_powernv_probe()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Wei Yongjun <weiyongjun1@huawei.com>
commit e749d328b0b450aa78d562fa26a0cd8872325dd9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/e749d328.failed

Fix to return a negative error code from the request_irq() error
handling case instead of 0, as done elsewhere in this function.

Fixes: dce143c3381c ("ipmi/powernv: Convert to irq event interface")
	Signed-off-by: Wei Yongjun <weiyongjun1@huawei.com>
	Reviewed-by: Alexey Kardashevskiy <aik@ozlabs.ru>
	Signed-off-by: Corey Minyard <cminyard@mvista.com>
(cherry picked from commit e749d328b0b450aa78d562fa26a0cd8872325dd9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/char/ipmi/ipmi_powernv.c
diff --cc drivers/char/ipmi/ipmi_powernv.c
index c5bb7c531191,bcf493d8e238..000000000000
--- a/drivers/char/ipmi/ipmi_powernv.c
+++ b/drivers/char/ipmi/ipmi_powernv.c
@@@ -241,13 -244,17 +241,21 @@@ static int ipmi_powernv_probe(struct pl
  		goto err_free;
  	}
  
 -	ipmi->irq = irq_of_parse_and_map(dev->of_node, 0);
 -	if (!ipmi->irq) {
 -		dev_info(dev, "Unable to map irq from device tree\n");
 -		ipmi->irq = opal_event_request(prop);
 -	}
 +	ipmi->event = 1ull << prop;
 +	ipmi->event_nb.notifier_call = ipmi_opal_event;
  
++<<<<<<< HEAD
 +	rc = opal_notifier_register(&ipmi->event_nb);
 +	if (rc) {
 +		dev_warn(dev, "OPAL notifier registration failed (%d)\n", rc);
 +		goto err_free;
++=======
+ 	rc = request_irq(ipmi->irq, ipmi_opal_event, IRQ_TYPE_LEVEL_HIGH,
+ 			 "opal-ipmi", ipmi);
+ 	if (rc) {
+ 		dev_warn(dev, "Unable to request irq\n");
+ 		goto err_dispose;
++>>>>>>> e749d328b0b4 (ipmi/powernv: Fix error return code in ipmi_powernv_probe())
  	}
  
  	ipmi->opal_msg = devm_kmalloc(dev,
* Unmerged path drivers/char/ipmi/ipmi_powernv.c
