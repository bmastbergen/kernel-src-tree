intel-ethernet: rename i40evf to iavf

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Jesse Brandeburg <jesse.brandeburg@intel.com>
commit 8062b2263a9fc294ddeb4024b113e8e26b82d5de
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/8062b226.failed

Rename the Intel Ethernet Adaptive Virtual Function driver
(i40evf) to a new name (iavf) that is more consistent with
the ongoing maintenance of the driver as the universal VF driver
for multiple product lines.

This first patch fixes up the directory names and the .ko name,
intentionally ignoring the function names inside the driver
for now.  Basically this is the simplest patch that gets
the rename done and will be followed by other patches that
rename the internal functions.

This patch also addresses a couple of string/name issues
and updates the Copyright year.

Also, made sure to add a MODULE_ALIAS to the old name.

	Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
	Tested-by: Andrew Bowers <andrewx.bowers@intel.com>
	Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
(cherry picked from commit 8062b2263a9fc294ddeb4024b113e8e26b82d5de)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	Documentation/networking/00-INDEX
#	Documentation/networking/iavf.txt
#	MAINTAINERS
#	drivers/net/ethernet/intel/Kconfig
diff --cc Documentation/networking/00-INDEX
index 17c95c1ed92e,f4f2b5d6c8d8..000000000000
--- a/Documentation/networking/00-INDEX
+++ b/Documentation/networking/00-INDEX
@@@ -92,10 -94,10 +92,15 @@@ gianfar.tx
  	- Gianfar Ethernet Driver.
  i40e.txt
  	- README for the Intel Ethernet Controller XL710 Driver (i40e).
++<<<<<<< HEAD
++=======
+ iavf.txt
+ 	- README for the Intel Ethernet Adaptive Virtual Function Driver (iavf).
++>>>>>>> 8062b2263a9f (intel-ethernet: rename i40evf to iavf)
  ieee802154.txt
  	- Linux IEEE 802.15.4 implementation, API and drivers
 +ifenslave.c
 +	- Configure network interfaces for parallel routing (bonding).
  igb.txt
  	- README for the Intel Gigabit Ethernet Driver (igb).
  igbvf.txt
diff --cc Documentation/networking/iavf.txt
index 21e41271af79,cc902a2369d6..000000000000
--- a/Documentation/networking/iavf.txt
+++ b/Documentation/networking/iavf.txt
@@@ -1,8 -1,8 +1,13 @@@
  Linux* Base Driver for Intel(R) Network Connection
  ==================================================
  
++<<<<<<< HEAD:Documentation/networking/i40evf.txt
 +Intel XL710 X710 Virtual Function Linux driver.
 +Copyright(c) 2013 Intel Corporation.
++=======
+ Intel Ethernet Adaptive Virtual Function Linux driver.
+ Copyright(c) 2013-2018 Intel Corporation.
++>>>>>>> 8062b2263a9f (intel-ethernet: rename i40evf to iavf):Documentation/networking/iavf.txt
  
  Contents
  ========
@@@ -11,21 -11,30 +16,41 @@@
  - Known Issues/Troubleshooting
  - Support
  
++<<<<<<< HEAD:Documentation/networking/i40evf.txt
 +This file describes the i40evf Linux* Base Driver for the Intel(R) XL710
 +X710 Virtual Function.
 +
 +The i40evf driver supports XL710 and X710 virtual function devices that
 +can only be activated on kernels with CONFIG_PCI_IOV enabled.
++=======
+ This file describes the iavf Linux* Base Driver. This driver
+ was formerly called i40evf.
+ 
+ The iavf driver supports the below mentioned virtual function
+ devices and can only be activated on kernels running the i40e or
+ newer Physical Function (PF) driver compiled with CONFIG_PCI_IOV.
+ The iavf driver requires CONFIG_PCI_MSI to be enabled.
++>>>>>>> 8062b2263a9f (intel-ethernet: rename i40evf to iavf):Documentation/networking/iavf.txt
  
- The guest OS loading the i40evf driver must support MSI-X interrupts.
+ The guest OS loading the iavf driver must support MSI-X interrupts.
  
++<<<<<<< HEAD:Documentation/networking/i40evf.txt
++=======
+ Supported Hardware
+ ==================
+ Intel XL710 X710 Virtual Function
+ Intel X722 Virtual Function
+ Intel Ethernet Adaptive Virtual Function
+ 
++>>>>>>> 8062b2263a9f (intel-ethernet: rename i40evf to iavf):Documentation/networking/iavf.txt
  Identifying Your Adapter
  ========================
  
 -For more information on how to identify your adapter, go to the
 -Adapter & Driver ID Guide at:
 +For more information on how to identify your adapter, go to the Adapter &
 +Driver ID Guide at:
  
-     http://support.intel.com/support/go/network/adapter/idguide.htm
+     https://www.intel.com/content/www/us/en/support/articles/000005584/network-and-i-o/ethernet-products.html
+ 
  
  Known Issues/Troubleshooting
  ============================
diff --cc MAINTAINERS
index fe4f04bf548a,720389e6ea8e..000000000000
--- a/MAINTAINERS
+++ b/MAINTAINERS
@@@ -4405,6 -7298,63 +4405,66 @@@ T:	git git://git.code.sf.net/p/intel-sa
  S:	Supported
  F:	drivers/scsi/isci/
  
++<<<<<<< HEAD
++=======
+ INTEL DRM DRIVERS (excluding Poulsbo, Moorestown and derivative chipsets)
+ M:	Jani Nikula <jani.nikula@linux.intel.com>
+ M:	Joonas Lahtinen <joonas.lahtinen@linux.intel.com>
+ M:	Rodrigo Vivi <rodrigo.vivi@intel.com>
+ L:	intel-gfx@lists.freedesktop.org
+ W:	https://01.org/linuxgraphics/
+ B:	https://01.org/linuxgraphics/documentation/how-report-bugs
+ C:	irc://chat.freenode.net/intel-gfx
+ Q:	http://patchwork.freedesktop.org/project/intel-gfx/
+ T:	git git://anongit.freedesktop.org/drm-intel
+ S:	Supported
+ F:	drivers/gpu/drm/i915/
+ F:	include/drm/i915*
+ F:	include/uapi/drm/i915_drm.h
+ F:	Documentation/gpu/i915.rst
+ 
+ INTEL ETHERNET DRIVERS
+ M:	Jeff Kirsher <jeffrey.t.kirsher@intel.com>
+ L:	intel-wired-lan@lists.osuosl.org (moderated for non-subscribers)
+ W:	http://www.intel.com/support/feedback.htm
+ W:	http://e1000.sourceforge.net/
+ Q:	http://patchwork.ozlabs.org/project/intel-wired-lan/list/
+ T:	git git://git.kernel.org/pub/scm/linux/kernel/git/jkirsher/net-queue.git
+ T:	git git://git.kernel.org/pub/scm/linux/kernel/git/jkirsher/next-queue.git
+ S:	Supported
+ F:	Documentation/networking/e100.rst
+ F:	Documentation/networking/e1000.rst
+ F:	Documentation/networking/e1000e.txt
+ F:	Documentation/networking/igb.txt
+ F:	Documentation/networking/igbvf.txt
+ F:	Documentation/networking/ixgb.txt
+ F:	Documentation/networking/ixgbe.txt
+ F:	Documentation/networking/ixgbevf.txt
+ F:	Documentation/networking/i40e.txt
+ F:	Documentation/networking/iavf.txt
+ F:	Documentation/networking/ice.txt
+ F:	drivers/net/ethernet/intel/
+ F:	drivers/net/ethernet/intel/*/
+ F:	include/linux/avf/virtchnl.h
+ 
+ INTEL FRAMEBUFFER DRIVER (excluding 810 and 815)
+ M:	Maik Broemme <mbroemme@libmpq.org>
+ L:	linux-fbdev@vger.kernel.org
+ S:	Maintained
+ F:	Documentation/fb/intelfb.txt
+ F:	drivers/video/fbdev/intelfb/
+ 
+ INTEL GVT-g DRIVERS (Intel GPU Virtualization)
+ M:	Zhenyu Wang <zhenyuw@linux.intel.com>
+ M:	Zhi Wang <zhi.a.wang@intel.com>
+ L:	intel-gvt-dev@lists.freedesktop.org
+ L:	intel-gfx@lists.freedesktop.org
+ W:	https://01.org/igvt-g
+ T:	git https://github.com/intel/gvt-linux.git
+ S:	Supported
+ F:	drivers/gpu/drm/i915/gvt/
+ 
++>>>>>>> 8062b2263a9f (intel-ethernet: rename i40evf to iavf)
  INTEL HID EVENT DRIVER
  M:	Alex Hung <alex.hung@canonical.com>
  L:	platform-driver-x86@vger.kernel.org
diff --cc drivers/net/ethernet/intel/Kconfig
index 22551eef3498,b542aba6f0e8..000000000000
--- a/drivers/net/ethernet/intel/Kconfig
+++ b/drivers/net/ethernet/intel/Kconfig
@@@ -301,17 -250,28 +306,23 @@@ config I40EV
  	  information on how to identify your adapter, go to the Adapter
  	  & Driver ID Guide that can be located at:
  
++<<<<<<< HEAD
 +	  <http://support.intel.com/support/network/sb/CS-008441.htm>
 +
 +	  For general information and support, go to the Intel support
 +	  website at:
 +
 +	  <http://support.intel.com>
++=======
+ 	  <https://support.intel.com>
+ 
+ 	  This driver was formerly named i40evf.
++>>>>>>> 8062b2263a9f (intel-ethernet: rename i40evf to iavf)
  
  	  To compile this driver as a module, choose M here. The module
- 	  will be called i40evf.  MSI-X interrupt support is required
+ 	  will be called iavf.  MSI-X interrupt support is required
  	  for this driver to work correctly.
  
 -config ICE
 -	tristate "Intel(R) Ethernet Connection E800 Series Support"
 -	default n
 -	depends on PCI_MSI
 -	---help---
 -	  This driver supports Intel(R) Ethernet Connection E800 Series of
 -	  devices.  For more information on how to identify your adapter, go
 -	  to the Adapter & Driver ID Guide that can be located at:
 -
 -	  <http://support.intel.com>
 -
 -	  To compile this driver as a module, choose M here. The module
 -	  will be called ice.
 -
  config FM10K
  	tristate "Intel(R) FM10000 Ethernet Switch Host Interface Support"
  	default n
* Unmerged path Documentation/networking/00-INDEX
diff --git a/Documentation/networking/i40evf.txt b/Documentation/networking/i40evf.txt
deleted file mode 100644
index 21e41271af79..000000000000
--- a/Documentation/networking/i40evf.txt
+++ /dev/null
@@ -1,47 +0,0 @@
-Linux* Base Driver for Intel(R) Network Connection
-==================================================
-
-Intel XL710 X710 Virtual Function Linux driver.
-Copyright(c) 2013 Intel Corporation.
-
-Contents
-========
-
-- Identifying Your Adapter
-- Known Issues/Troubleshooting
-- Support
-
-This file describes the i40evf Linux* Base Driver for the Intel(R) XL710
-X710 Virtual Function.
-
-The i40evf driver supports XL710 and X710 virtual function devices that
-can only be activated on kernels with CONFIG_PCI_IOV enabled.
-
-The guest OS loading the i40evf driver must support MSI-X interrupts.
-
-Identifying Your Adapter
-========================
-
-For more information on how to identify your adapter, go to the Adapter &
-Driver ID Guide at:
-
-    http://support.intel.com/support/go/network/adapter/idguide.htm
-
-Known Issues/Troubleshooting
-============================
-
-
-Support
-=======
-
-For general information, go to the Intel support website at:
-
-    http://support.intel.com
-
-or the Intel Wired Networking project hosted by Sourceforge at:
-
-    http://sourceforge.net/projects/e1000
-
-If an issue is identified with the released source code on the supported
-kernel with a supported adapter, email the specific information related
-to the issue to e1000-devel@lists.sf.net
* Unmerged path Documentation/networking/iavf.txt
* Unmerged path MAINTAINERS
* Unmerged path drivers/net/ethernet/intel/Kconfig
diff --git a/drivers/net/ethernet/intel/Makefile b/drivers/net/ethernet/intel/Makefile
index 5ea764d85ec3..51cbee13e8ef 100644
--- a/drivers/net/ethernet/intel/Makefile
+++ b/drivers/net/ethernet/intel/Makefile
@@ -11,5 +11,5 @@ obj-$(CONFIG_IXGBE) += ixgbe/
 obj-$(CONFIG_IXGBEVF) += ixgbevf/
 obj-$(CONFIG_I40E) += i40e/
 obj-$(CONFIG_IXGB) += ixgb/
-obj-$(CONFIG_I40EVF) += i40evf/
+obj-$(CONFIG_IAVF) += iavf/
 obj-$(CONFIG_FM10K) += fm10k/
diff --git a/drivers/net/ethernet/intel/i40evf/Makefile b/drivers/net/ethernet/intel/i40evf/Makefile
deleted file mode 100644
index 3c5c6e962280..000000000000
--- a/drivers/net/ethernet/intel/i40evf/Makefile
+++ /dev/null
@@ -1,16 +0,0 @@
-# SPDX-License-Identifier: GPL-2.0
-# Copyright(c) 2013 - 2018 Intel Corporation.
-
-#
-## Makefile for the Intel(R) 40GbE VF driver
-#
-#
-
-ccflags-y += -I$(src)
-subdir-ccflags-y += -I$(src)
-
-obj-$(CONFIG_I40EVF) += i40evf.o
-
-i40evf-objs :=	i40evf_main.o i40evf_ethtool.o i40evf_virtchnl.o \
-		i40e_txrx.o i40e_common.o i40e_adminq.o i40evf_client.o
-
diff --git a/drivers/net/ethernet/intel/iavf/Makefile b/drivers/net/ethernet/intel/iavf/Makefile
new file mode 100644
index 000000000000..1b050d9d5f49
--- /dev/null
+++ b/drivers/net/ethernet/intel/iavf/Makefile
@@ -0,0 +1,15 @@
+# SPDX-License-Identifier: GPL-2.0
+# Copyright(c) 2013 - 2018 Intel Corporation.
+#
+# Makefile for the Intel(R) Ethernet Adaptive Virtual Function (iavf)
+# driver
+#
+#
+
+ccflags-y += -I$(src)
+subdir-ccflags-y += -I$(src)
+
+obj-$(CONFIG_IAVF) += iavf.o
+
+iavf-objs := i40evf_main.o i40evf_ethtool.o i40evf_virtchnl.o \
+	      i40e_txrx.o i40e_common.o i40e_adminq.o i40evf_client.o
diff --git a/drivers/net/ethernet/intel/i40evf/i40e_adminq.c b/drivers/net/ethernet/intel/iavf/i40e_adminq.c
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40e_adminq.c
rename to drivers/net/ethernet/intel/iavf/i40e_adminq.c
diff --git a/drivers/net/ethernet/intel/i40evf/i40e_adminq.h b/drivers/net/ethernet/intel/iavf/i40e_adminq.h
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40e_adminq.h
rename to drivers/net/ethernet/intel/iavf/i40e_adminq.h
diff --git a/drivers/net/ethernet/intel/i40evf/i40e_adminq_cmd.h b/drivers/net/ethernet/intel/iavf/i40e_adminq_cmd.h
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40e_adminq_cmd.h
rename to drivers/net/ethernet/intel/iavf/i40e_adminq_cmd.h
diff --git a/drivers/net/ethernet/intel/i40evf/i40e_alloc.h b/drivers/net/ethernet/intel/iavf/i40e_alloc.h
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40e_alloc.h
rename to drivers/net/ethernet/intel/iavf/i40e_alloc.h
diff --git a/drivers/net/ethernet/intel/i40evf/i40e_common.c b/drivers/net/ethernet/intel/iavf/i40e_common.c
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40e_common.c
rename to drivers/net/ethernet/intel/iavf/i40e_common.c
diff --git a/drivers/net/ethernet/intel/i40evf/i40e_devids.h b/drivers/net/ethernet/intel/iavf/i40e_devids.h
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40e_devids.h
rename to drivers/net/ethernet/intel/iavf/i40e_devids.h
diff --git a/drivers/net/ethernet/intel/i40evf/i40e_hmc.h b/drivers/net/ethernet/intel/iavf/i40e_hmc.h
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40e_hmc.h
rename to drivers/net/ethernet/intel/iavf/i40e_hmc.h
diff --git a/drivers/net/ethernet/intel/i40evf/i40e_lan_hmc.h b/drivers/net/ethernet/intel/iavf/i40e_lan_hmc.h
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40e_lan_hmc.h
rename to drivers/net/ethernet/intel/iavf/i40e_lan_hmc.h
diff --git a/drivers/net/ethernet/intel/i40evf/i40e_osdep.h b/drivers/net/ethernet/intel/iavf/i40e_osdep.h
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40e_osdep.h
rename to drivers/net/ethernet/intel/iavf/i40e_osdep.h
diff --git a/drivers/net/ethernet/intel/i40evf/i40e_prototype.h b/drivers/net/ethernet/intel/iavf/i40e_prototype.h
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40e_prototype.h
rename to drivers/net/ethernet/intel/iavf/i40e_prototype.h
diff --git a/drivers/net/ethernet/intel/i40evf/i40e_register.h b/drivers/net/ethernet/intel/iavf/i40e_register.h
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40e_register.h
rename to drivers/net/ethernet/intel/iavf/i40e_register.h
diff --git a/drivers/net/ethernet/intel/i40evf/i40e_status.h b/drivers/net/ethernet/intel/iavf/i40e_status.h
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40e_status.h
rename to drivers/net/ethernet/intel/iavf/i40e_status.h
diff --git a/drivers/net/ethernet/intel/i40evf/i40e_trace.h b/drivers/net/ethernet/intel/iavf/i40e_trace.h
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40e_trace.h
rename to drivers/net/ethernet/intel/iavf/i40e_trace.h
diff --git a/drivers/net/ethernet/intel/i40evf/i40e_txrx.c b/drivers/net/ethernet/intel/iavf/i40e_txrx.c
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40e_txrx.c
rename to drivers/net/ethernet/intel/iavf/i40e_txrx.c
diff --git a/drivers/net/ethernet/intel/i40evf/i40e_txrx.h b/drivers/net/ethernet/intel/iavf/i40e_txrx.h
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40e_txrx.h
rename to drivers/net/ethernet/intel/iavf/i40e_txrx.h
diff --git a/drivers/net/ethernet/intel/i40evf/i40e_type.h b/drivers/net/ethernet/intel/iavf/i40e_type.h
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40e_type.h
rename to drivers/net/ethernet/intel/iavf/i40e_type.h
diff --git a/drivers/net/ethernet/intel/i40evf/i40evf.h b/drivers/net/ethernet/intel/iavf/i40evf.h
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40evf.h
rename to drivers/net/ethernet/intel/iavf/i40evf.h
diff --git a/drivers/net/ethernet/intel/i40evf/i40evf_client.c b/drivers/net/ethernet/intel/iavf/i40evf_client.c
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40evf_client.c
rename to drivers/net/ethernet/intel/iavf/i40evf_client.c
diff --git a/drivers/net/ethernet/intel/i40evf/i40evf_client.h b/drivers/net/ethernet/intel/iavf/i40evf_client.h
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40evf_client.h
rename to drivers/net/ethernet/intel/iavf/i40evf_client.h
diff --git a/drivers/net/ethernet/intel/i40evf/i40evf_ethtool.c b/drivers/net/ethernet/intel/iavf/i40evf_ethtool.c
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40evf_ethtool.c
rename to drivers/net/ethernet/intel/iavf/i40evf_ethtool.c
diff --git a/drivers/net/ethernet/intel/i40evf/i40evf_main.c b/drivers/net/ethernet/intel/iavf/i40evf_main.c
similarity index 99%
rename from drivers/net/ethernet/intel/i40evf/i40evf_main.c
rename to drivers/net/ethernet/intel/iavf/i40evf_main.c
index 950c8aeb0fc9..6003fe927845 100644
--- a/drivers/net/ethernet/intel/i40evf/i40evf_main.c
+++ b/drivers/net/ethernet/intel/iavf/i40evf_main.c
@@ -17,20 +17,20 @@ static int i40evf_close(struct net_device *netdev);
 
 char i40evf_driver_name[] = "i40evf";
 static const char i40evf_driver_string[] =
-	"Intel(R) 40-10 Gigabit Virtual Function Network Driver";
+	"Intel(R) Ethernet Adaptive Virtual Function Network Driver";
 
 #define DRV_KERN "-k"
 
 #define DRV_VERSION_MAJOR 3
 #define DRV_VERSION_MINOR 2
-#define DRV_VERSION_BUILD 2
+#define DRV_VERSION_BUILD 3
 #define DRV_VERSION __stringify(DRV_VERSION_MAJOR) "." \
 	     __stringify(DRV_VERSION_MINOR) "." \
 	     __stringify(DRV_VERSION_BUILD) \
 	     DRV_KERN
 const char i40evf_driver_version[] = DRV_VERSION;
 static const char i40evf_copyright[] =
-	"Copyright (c) 2013 - 2015 Intel Corporation.";
+	"Copyright (c) 2013 - 2018 Intel Corporation.";
 
 /* i40evf_pci_tbl - PCI Device ID Table
  *
@@ -51,6 +51,7 @@ static const struct pci_device_id i40evf_pci_tbl[] = {
 
 MODULE_DEVICE_TABLE(pci, i40evf_pci_tbl);
 
+MODULE_ALIAS("i40evf");
 MODULE_AUTHOR("Intel Corporation, <linux.nics@intel.com>");
 MODULE_DESCRIPTION("Intel(R) XL710 X710 Virtual Function Network Driver");
 MODULE_LICENSE("GPL");
diff --git a/drivers/net/ethernet/intel/i40evf/i40evf_virtchnl.c b/drivers/net/ethernet/intel/iavf/i40evf_virtchnl.c
similarity index 100%
rename from drivers/net/ethernet/intel/i40evf/i40evf_virtchnl.c
rename to drivers/net/ethernet/intel/iavf/i40evf_virtchnl.c
