Documentation: Move L1TF to separate directory

jira LE-1907
cve CVE-2019-11091
cve CVE-2018-12130
cve CVE-2018-12127
cve CVE-2018-12126
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Thomas Gleixner <tglx@linutronix.de>
commit 65fd4cb65b2dad97feb8330b6690445910b56d6a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/65fd4cb6.failed

Move L!TF to a separate directory so the MDS stuff can be added at the
side. Otherwise the all hardware vulnerabilites have their own top level
entry. Should have done that right away.

	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Reviewed-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
	Reviewed-by: Jon Masters <jcm@redhat.com>
(cherry picked from commit 65fd4cb65b2dad97feb8330b6690445910b56d6a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	Documentation/admin-guide/index.rst
#	arch/x86/kernel/cpu/bugs.c
#	arch/x86/kvm/vmx/vmx.c
diff --cc arch/x86/kernel/cpu/bugs.c
index 6ec1d2da76d1,373ae1dcd301..000000000000
--- a/arch/x86/kernel/cpu/bugs.c
+++ b/arch/x86/kernel/cpu/bugs.c
@@@ -533,14 -1100,14 +533,21 @@@ static void __init l1tf_select_mitigati
  	return;
  #endif
  
 +	/*
 +	 * This is extremely unlikely to happen because almost all
 +	 * systems have far more MAX_PA/2 than RAM can be fit into
 +	 * DIMM slots.
 +	 */
  	half_pa = (u64)l1tf_pfn_limit() << PAGE_SHIFT;
 -	if (l1tf_mitigation != L1TF_MITIGATION_OFF &&
 -			e820__mapped_any(half_pa, ULLONG_MAX - half_pa, E820_TYPE_RAM)) {
 +	if (e820_any_mapped(half_pa, ULLONG_MAX - half_pa, E820_RAM)) {
  		pr_warn("System has more than MAX_PA/2 memory. L1TF mitigation not effective.\n");
++<<<<<<< HEAD
++=======
+ 		pr_info("You may make it effective by booting the kernel with mem=%llu parameter.\n",
+ 				half_pa);
+ 		pr_info("However, doing so will make a part of your RAM unusable.\n");
+ 		pr_info("Reading https://www.kernel.org/doc/html/latest/admin-guide/hw-vuln/l1tf.html might help you decide.\n");
++>>>>>>> 65fd4cb65b2d (Documentation: Move L1TF to separate directory)
  		return;
  	}
  
* Unmerged path Documentation/admin-guide/index.rst
* Unmerged path arch/x86/kvm/vmx/vmx.c
diff --git a/Documentation/ABI/testing/sysfs-devices-system-cpu b/Documentation/ABI/testing/sysfs-devices-system-cpu
index ff65f15670cd..0d1f1790ec33 100644
--- a/Documentation/ABI/testing/sysfs-devices-system-cpu
+++ b/Documentation/ABI/testing/sysfs-devices-system-cpu
@@ -289,7 +289,7 @@ Description:	Information about CPU vulnerabilities
 		"Mitigation: $M"  CPU is affetcted and mitigation $M is in effect
 
 		Details about the l1tf file can be found in
-		Documentation/admin-guide/l1tf.rst
+		Documentation/admin-guide/hw-vuln/l1tf.rst
 
 What:		/sys/devices/system/cpu/smt
 		/sys/devices/system/cpu/smt/active
diff --git a/Documentation/admin-guide/hw-vuln/index.rst b/Documentation/admin-guide/hw-vuln/index.rst
new file mode 100644
index 000000000000..8ce2009f1981
--- /dev/null
+++ b/Documentation/admin-guide/hw-vuln/index.rst
@@ -0,0 +1,12 @@
+========================
+Hardware vulnerabilities
+========================
+
+This section describes CPU vulnerabilities and provides an overview of the
+possible mitigations along with guidance for selecting mitigations if they
+are configurable at compile, boot or run time.
+
+.. toctree::
+   :maxdepth: 1
+
+   l1tf
diff --git a/Documentation/admin-guide/l1tf.rst b/Documentation/admin-guide/hw-vuln/l1tf.rst
similarity index 100%
rename from Documentation/admin-guide/l1tf.rst
rename to Documentation/admin-guide/hw-vuln/l1tf.rst
* Unmerged path Documentation/admin-guide/index.rst
diff --git a/Documentation/kernel-parameters.txt b/Documentation/kernel-parameters.txt
index f6852ae416ce..e147bdb54b24 100644
--- a/Documentation/kernel-parameters.txt
+++ b/Documentation/kernel-parameters.txt
@@ -1662,7 +1662,7 @@ bytes respectively. Such letter suffixes can also be entirely omitted.
 
 			Default is 'flush'.
 
-			For details see: Documentation/admin-guide/l1tf.rst
+			For details see: Documentation/admin-guide/hw-vuln/l1tf.rst
 
 	l2cr=		[PPC]
 
* Unmerged path arch/x86/kernel/cpu/bugs.c
* Unmerged path arch/x86/kvm/vmx/vmx.c
