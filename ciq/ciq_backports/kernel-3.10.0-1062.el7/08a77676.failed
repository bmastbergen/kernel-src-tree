string: drop __must_check from strscpy() and restore strscpy() usages in cgroup

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Tejun Heo <tj@kernel.org>
commit 08a77676f9c5fc69a681ccd2cd8140e65dcb26c7
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/08a77676.failed

e7fd37ba1217 ("cgroup: avoid copying strings longer than the buffers")
converted possibly unsafe strncpy() usages in cgroup to strscpy().
However, although the callsites are completely fine with truncated
copied, because strscpy() is marked __must_check, it led to the
following warnings.

  kernel/cgroup/cgroup.c: In function ‘cgroup_file_name’:
  kernel/cgroup/cgroup.c:1400:10: warning: ignoring return value of ‘strscpy’, declared with attribute warn_unused_result [-Wunused-result]
     strscpy(buf, cft->name, CGROUP_FILE_NAME_MAX);
	       ^

To avoid the warnings, 50034ed49645 ("cgroup: use strlcpy() instead of
strscpy() to avoid spurious warning") switched them to strlcpy().

strlcpy() is worse than strlcpy() because it unconditionally runs
strlen() on the source string, and the only reason we switched to
strlcpy() here was because it was lacking __must_check, which doesn't
reflect any material differences between the two function.  It's just
that someone added __must_check to strscpy() and not to strlcpy().

These basic string copy operations are used in variety of ways, and
one of not-so-uncommon use cases is safely handling truncated copies,
where the caller naturally doesn't care about the return value.  The
__must_check doesn't match the actual use cases and forces users to
opt for inferior variants which lack __must_check by happenstance or
spread ugly (void) casts.

Remove __must_check from strscpy() and restore strscpy() usages in
cgroup.

	Signed-off-by: Tejun Heo <tj@kernel.org>
	Suggested-by: Linus Torvalds <torvalds@linux-foundation.org>
	Cc: Ma Shimiao <mashimiao.fnst@cn.fujitsu.com>
	Cc: Arnd Bergmann <arnd@arndb.de>
	Cc: Chris Metcalf <cmetcalf@ezchip.com>
(cherry picked from commit 08a77676f9c5fc69a681ccd2cd8140e65dcb26c7)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/linux/string.h
#	kernel/cgroup/cgroup.c
diff --cc include/linux/string.h
index 31c64befcec8,dfdf8afeac64..000000000000
--- a/include/linux/string.h
+++ b/include/linux/string.h
@@@ -26,6 -27,9 +26,12 @@@ extern char * strncpy(char *,const cha
  #ifndef __HAVE_ARCH_STRLCPY
  size_t strlcpy(char *, const char *, size_t);
  #endif
++<<<<<<< HEAD
++=======
+ #ifndef __HAVE_ARCH_STRSCPY
+ ssize_t strscpy(char *, const char *, size_t);
+ #endif
++>>>>>>> 08a77676f9c5 (string: drop __must_check from strscpy() and restore strscpy() usages in cgroup)
  #ifndef __HAVE_ARCH_STRCAT
  extern char * strcat(char *, const char *);
  #endif
* Unmerged path kernel/cgroup/cgroup.c
* Unmerged path include/linux/string.h
* Unmerged path kernel/cgroup/cgroup.c
