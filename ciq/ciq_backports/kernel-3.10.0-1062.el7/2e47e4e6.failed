scsi: megaraid_sas: Fail init if heartbeat timer fails

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
Rebuild_CHGLOG: - [scsi] megaraid_sas: Fail init if heartbeat timer fails (Tomas Henzl) [1642946]
Rebuild_FUZZ: 94.12%
commit-author Shivasharan S <shivasharan.srikanteshwara@broadcom.com>
commit 2e47e4e62e403340f5ea718ac2b0836ab9271134
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/2e47e4e6.failed

When driver fails to start the heartbeat timer, exit from FW init.

	Signed-off-by: Shivasharan S <shivasharan.srikanteshwara@broadcom.com>
	Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
(cherry picked from commit 2e47e4e62e403340f5ea718ac2b0836ab9271134)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/megaraid/megaraid_sas_base.c
diff --cc drivers/scsi/megaraid/megaraid_sas_base.c
index 966185bf809c,85c7d9912eea..000000000000
--- a/drivers/scsi/megaraid/megaraid_sas_base.c
+++ b/drivers/scsi/megaraid/megaraid_sas_base.c
@@@ -5714,13 -5694,12 +5714,21 @@@ static int megasas_init_fw(struct megas
  
  	/* Launch SR-IOV heartbeat timer */
  	if (instance->requestorId) {
++<<<<<<< HEAD
 +		if (!megasas_sriov_start_heartbeat(instance, 1))
 +			megasas_start_timer(instance,
 +					    &instance->sriov_heartbeat_timer,
 +					    megasas_sriov_heartbeat_handler,
 +					    MEGASAS_SRIOV_HEARTBEAT_INTERVAL_VF);
 +		else
++=======
+ 		if (!megasas_sriov_start_heartbeat(instance, 1)) {
+ 			megasas_start_timer(instance);
+ 		} else {
++>>>>>>> 2e47e4e62e40 (scsi: megaraid_sas: Fail init if heartbeat timer fails)
  			instance->skip_heartbeat_timer_del = 1;
+ 			goto fail_get_ld_pd_list;
+ 		}
  	}
  
  	/*
* Unmerged path drivers/scsi/megaraid/megaraid_sas_base.c
