IB/uverbs: Fix uverbs_attr_get_obj

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Jason Gunthorpe <jgg@mellanox.com>
commit f4602cbb0a2478dda8238a4f382867da425daa8e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/f4602cbb.failed

The err pointer comes from uverbs_attr_get, not from the uobject member,
which does not store an ERR_PTR.

Fixes: be934cca9e98 ("IB/uverbs: Add device memory registration ioctl support")
	Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
	Reviewed-by: Leon Romanovsky <leonro@mellanox.com>
(cherry picked from commit f4602cbb0a2478dda8238a4f382867da425daa8e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	include/rdma/uverbs_ioctl.h
diff --cc include/rdma/uverbs_ioctl.h
index 3d6ac684b8f0,095383a4bd1a..000000000000
--- a/include/rdma/uverbs_ioctl.h
+++ b/include/rdma/uverbs_ioctl.h
@@@ -408,6 -408,18 +408,21 @@@ static inline int uverbs_attr_get_enum_
  	return attr->ptr_attr.enum_id;
  }
  
++<<<<<<< HEAD
++=======
+ static inline void *uverbs_attr_get_obj(const struct uverbs_attr_bundle *attrs_bundle,
+ 					u16 idx)
+ {
+ 	const struct uverbs_attr *attr;
+ 
+ 	attr = uverbs_attr_get(attrs_bundle, idx);
+ 	if (IS_ERR(attr))
+ 		return ERR_CAST(attr);
+ 
+ 	return attr->obj_attr.uobject->object;
+ }
+ 
++>>>>>>> f4602cbb0a24 (IB/uverbs: Fix uverbs_attr_get_obj)
  static inline int uverbs_copy_to(const struct uverbs_attr_bundle *attrs_bundle,
  				 size_t idx, const void *from, size_t size)
  {
* Unmerged path include/rdma/uverbs_ioctl.h
