sfc-falcon: remove ndo_poll_controller

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Eric Dumazet <edumazet@google.com>
commit a4f570be654de779eaf626a79c4e0aa5a790505f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/a4f570be.failed

As diagnosed by Song Liu, ndo_poll_controller() can
be very dangerous on loaded hosts, since the cpu
calling ndo_poll_controller() might steal all NAPI
contexts (for all RX/TX queues of the NIC). This capture
can last for unlimited amount of time, since one
cpu is generally not able to drain all the queues under load.

sfc-falcon uses NAPI for TX completions, so we better let core
networking stack call the napi->poll() to avoid the capture.

	Signed-off-by: Eric Dumazet <edumazet@google.com>
	Cc: Solarflare linux maintainers <linux-net-drivers@solarflare.com>
	Cc: Edward Cree <ecree@solarflare.com>
	Cc: Bert Kenward <bkenward@solarflare.com>
Acked-By: Bert Kenward <bkenward@solarflare.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit a4f570be654de779eaf626a79c4e0aa5a790505f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/sfc/falcon/efx.c
diff --cc drivers/net/ethernet/sfc/falcon/efx.c
index 2a3f97b8ff95,03e2455c502e..000000000000
--- a/drivers/net/ethernet/sfc/falcon/efx.c
+++ b/drivers/net/ethernet/sfc/falcon/efx.c
@@@ -2264,10 -2227,7 +2241,14 @@@ static const struct net_device_ops ef4_
  	.ndo_set_mac_address	= ef4_set_mac_address,
  	.ndo_set_rx_mode	= ef4_set_rx_mode,
  	.ndo_set_features	= ef4_set_features,
++<<<<<<< HEAD
 +#ifdef CONFIG_NET_POLL_CONTROLLER
 +	.ndo_poll_controller = ef4_netpoll,
 +#endif
 +	.extended.ndo_setup_tc_rh = ef4_setup_tc,
++=======
+ 	.ndo_setup_tc		= ef4_setup_tc,
++>>>>>>> a4f570be654d (sfc-falcon: remove ndo_poll_controller)
  #ifdef CONFIG_RFS_ACCEL
  	.ndo_rx_flow_steer	= ef4_filter_rfs,
  #endif
* Unmerged path drivers/net/ethernet/sfc/falcon/efx.c
