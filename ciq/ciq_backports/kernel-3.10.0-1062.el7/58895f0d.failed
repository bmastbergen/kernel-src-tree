IB/mlx5: Set uid upon PD allocation

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Yishai Hadas <yishaih@mellanox.com>
commit 58895f0d18df09a6be82e6e4141e4609dd12f84f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/58895f0d.failed

Set uid as part of PD allocation, this uid is used for other mlx5
objects upon calling the firmware.

	Signed-off-by: Yishai Hadas <yishaih@mellanox.com>
	Signed-off-by: Leon Romanovsky <leonro@mellanox.com>
	Signed-off-by: Jason Gunthorpe <jgg@mellanox.com>
(cherry picked from commit 58895f0d18df09a6be82e6e4141e4609dd12f84f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/hw/mlx5/main.c
diff --cc drivers/infiniband/hw/mlx5/main.c
index b529cb4f76e1,0df397fee94f..000000000000
--- a/drivers/infiniband/hw/mlx5/main.c
+++ b/drivers/infiniband/hw/mlx5/main.c
@@@ -2210,7 -2262,11 +2210,15 @@@ static struct ib_pd *mlx5_ib_alloc_pd(s
  	if (!pd)
  		return ERR_PTR(-ENOMEM);
  
++<<<<<<< HEAD
 +	err = mlx5_core_alloc_pd(to_mdev(ibdev)->mdev, &pd->pdn);
++=======
+ 	uid = context ? to_mucontext(context)->devx_uid : 0;
+ 	MLX5_SET(alloc_pd_in, in, opcode, MLX5_CMD_OP_ALLOC_PD);
+ 	MLX5_SET(alloc_pd_in, in, uid, uid);
+ 	err = mlx5_cmd_exec(to_mdev(ibdev)->mdev, in, sizeof(in),
+ 			    out, sizeof(out));
++>>>>>>> 58895f0d18df (IB/mlx5: Set uid upon PD allocation)
  	if (err) {
  		kfree(pd);
  		return ERR_PTR(err);
* Unmerged path drivers/infiniband/hw/mlx5/main.c
