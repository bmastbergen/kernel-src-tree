fuse: decrement NR_WRITEBACK_TEMP on the right page

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Miklos Szeredi <mszeredi@redhat.com>
commit a2ebba824106dabe79937a9f29a875f837e1b6d4
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/a2ebba82.failed

NR_WRITEBACK_TEMP is accounted on the temporary page in the request, not
the page cache page.

Fixes: 8b284dc47291 ("fuse: writepages: handle same page rewrites")
	Cc: <stable@vger.kernel.org> # v3.13
	Signed-off-by: Miklos Szeredi <mszeredi@redhat.com>
(cherry picked from commit a2ebba824106dabe79937a9f29a875f837e1b6d4)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/fuse/file.c
diff --cc fs/fuse/file.c
index d851e606d416,a59c16bd90ac..000000000000
--- a/fs/fuse/file.c
+++ b/fs/fuse/file.c
@@@ -1820,9 -1781,9 +1820,15 @@@ static bool fuse_writepage_in_flight(st
  		copy_highpage(old_req->pages[0], page);
  		spin_unlock(&fc->lock);
  
++<<<<<<< HEAD
 +		dec_bdi_stat(bdi, BDI_WRITEBACK);
 +		dec_zone_page_state(page, NR_WRITEBACK_TEMP);
 +		bdi_writeout_inc(bdi);
++=======
+ 		dec_wb_stat(&bdi->wb, WB_WRITEBACK);
+ 		dec_node_page_state(new_req->pages[0], NR_WRITEBACK_TEMP);
+ 		wb_writeout_inc(&bdi->wb);
++>>>>>>> a2ebba824106 (fuse: decrement NR_WRITEBACK_TEMP on the right page)
  		fuse_writepage_free(fc, new_req);
  		fuse_request_free(new_req);
  		goto out;
* Unmerged path fs/fuse/file.c
