perf s390: Rework system call table creation by using syscall.tbl

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Hendrik Brueckner <brueckner@linux.vnet.ibm.com>
commit 690d22d9d4423b4522fb44a71145403eef2df834
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/690d22d9.failed

Recently, s390 uses a syscall.tbl input file to generate its system call
table and unistd uapi header files.  Hence, update mksyscalltbl to use
it as input to create the system table for perf.

	Signed-off-by: Hendrik Brueckner <brueckner@linux.vnet.ibm.com>
	Cc: Jiri Olsa <jolsa@redhat.com>
	Cc: Michael Petlan <mpetlan@redhat.com>
	Cc: Thomas Richter <tmricht@linux.vnet.ibm.com>
	Cc: linux-s390@vger.kernel.org
LPU-Reference: 1518090470-2899-4-git-send-email-brueckner@linux.vnet.ibm.com
Link: https://lkml.kernel.org/n/tip-bdyhllhsq1zgxv2qx4m377y6@git.kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 690d22d9d4423b4522fb44a71145403eef2df834)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/arch/s390/Makefile
#	tools/perf/arch/s390/entry/syscalls/mksyscalltbl
diff --cc tools/perf/arch/s390/Makefile
index 7fbca175099e,dfa6e3103437..000000000000
--- a/tools/perf/arch/s390/Makefile
+++ b/tools/perf/arch/s390/Makefile
@@@ -1,3 -1,30 +1,33 @@@
  ifndef NO_DWARF
  PERF_HAVE_DWARF_REGS := 1
  endif
++<<<<<<< HEAD
++=======
+ HAVE_KVM_STAT_SUPPORT := 1
+ PERF_HAVE_ARCH_REGS_QUERY_REGISTER_OFFSET := 1
+ 
+ #
+ # Syscall table generation for perf
+ #
+ 
+ out    := $(OUTPUT)arch/s390/include/generated/asm
+ header := $(out)/syscalls_64.c
+ syskrn := $(srctree)/arch/s390/kernel/syscalls/syscall.tbl
+ sysprf := $(srctree)/tools/perf/arch/s390/entry/syscalls
+ sysdef := $(sysprf)/syscall.tbl
+ systbl := $(sysprf)/mksyscalltbl
+ 
+ # Create output directory if not already present
+ _dummy := $(shell [ -d '$(out)' ] || mkdir -p '$(out)')
+ 
+ $(header): $(sysdef) $(systbl)
+ 	@(test -d ../../kernel -a -d ../../tools -a -d ../perf && ( \
+         (diff -B $(sysdef) $(syskrn) >/dev/null) \
+         || echo "Warning: Kernel ABI header at '$(sysdef)' differs from latest version at '$(syskrn)'" >&2 )) || true
+ 	$(Q)$(SHELL) '$(systbl)' $(sysdef) > $@
+ 
+ clean::
+ 	$(call QUIET_CLEAN, s390) $(RM) $(header)
+ 
+ archheaders: $(header)
++>>>>>>> 690d22d9d442 (perf s390: Rework system call table creation by using syscall.tbl)
* Unmerged path tools/perf/arch/s390/entry/syscalls/mksyscalltbl
* Unmerged path tools/perf/arch/s390/Makefile
* Unmerged path tools/perf/arch/s390/entry/syscalls/mksyscalltbl
