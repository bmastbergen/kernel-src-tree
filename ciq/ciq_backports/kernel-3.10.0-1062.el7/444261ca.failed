RDMA/mlx5: Properly check return value of mlx5_get_uars_page

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1062.el7
commit-author Leon Romanovsky <leonro@mellanox.com>
commit 444261ca6ff201fa03de97a5041237e67a9d8d31
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1062.el7/444261ca.failed

Starting from commit 72f36be06138 ("net/mlx5: Fix mlx5_get_uars_page to
return error code") the mlx5_get_uars_page() call returns error in case
of failure, but it was mistakenly overlooked in the merge commit.

Fixes: e7996a9a77fc ("Merge tag v4.15 of git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux-2.6.git")
	Reported-by: Alaa Hleihel <alaa@mellanox.com>
	Signed-off-by: Leon Romanovsky <leonro@mellanox.com>
	Signed-off-by: Doug Ledford <dledford@redhat.com>
(cherry picked from commit 444261ca6ff201fa03de97a5041237e67a9d8d31)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/infiniband/hw/mlx5/main.c
diff --cc drivers/infiniband/hw/mlx5/main.c
index 4f81c1afc033,a42c6b1cdb5a..000000000000
--- a/drivers/infiniband/hw/mlx5/main.c
+++ b/drivers/infiniband/hw/mlx5/main.c
@@@ -5027,9 -5426,7 +5027,13 @@@ static void mlx5_ib_stage_cong_debugfs_
  static int mlx5_ib_stage_uar_init(struct mlx5_ib_dev *dev)
  {
  	dev->mdev->priv.uar = mlx5_get_uars_page(dev->mdev);
++<<<<<<< HEAD
 +	if (IS_ERR(dev->mdev->priv.uar))
 +		return -ENOMEM;
 +	return 0;
++=======
+ 	return PTR_ERR_OR_ZERO(dev->mdev->priv.uar);
++>>>>>>> 444261ca6ff2 (RDMA/mlx5: Properly check return value of mlx5_get_uars_page)
  }
  
  static void mlx5_ib_stage_uar_cleanup(struct mlx5_ib_dev *dev)
* Unmerged path drivers/infiniband/hw/mlx5/main.c
