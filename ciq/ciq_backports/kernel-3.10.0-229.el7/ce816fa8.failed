Kconfig: rename HAS_IOPORT to HAS_IOPORT_MAP

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
commit-author Uwe Kleine-König <u.kleine-koenig@pengutronix.de>
commit ce816fa88cca083c47ab9000b2138a83043a78be
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/ce816fa8.failed

If the renamed symbol is defined lib/iomap.c implements ioport_map and
ioport_unmap and currently (nearly) all platforms define the port
accessor functions outb/inb and friend unconditionally.  So
HAS_IOPORT_MAP is the better name for this.

Consequently NO_IOPORT is renamed to NO_IOPORT_MAP.

The motivation for this change is to reintroduce a symbol HAS_IOPORT
that signals if outb/int et al are available.  I will address that at
least one merge window later though to keep surprises to a minimum and
catch new introductions of (HAS|NO)_IOPORT.

The changes in this commit were done using:

	$ git grep -l -E '(NO|HAS)_IOPORT' | xargs perl -p -i -e 's/\b((?:CONFIG_)?(?:NO|HAS)_IOPORT)\b/$1_MAP/'

	Signed-off-by: Uwe Kleine-König <u.kleine-koenig@pengutronix.de>
	Acked-by: Arnd Bergmann <arnd@arndb.de>
	Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
	Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>
(cherry picked from commit ce816fa88cca083c47ab9000b2138a83043a78be)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/arm/Kconfig
#	arch/arm/mach-picoxcell/Kconfig
#	arch/arm/mach-prima2/Kconfig
#	arch/arm/mach-shmobile/Kconfig
#	arch/arm/mach-vexpress/Kconfig
#	arch/arm/plat-samsung/Kconfig
#	drivers/net/ethernet/3com/Kconfig
diff --cc arch/arm/Kconfig
index d1387fc4470a,5db05f6a0412..000000000000
--- a/arch/arm/Kconfig
+++ b/arch/arm/Kconfig
@@@ -399,6 -417,24 +399,27 @@@ config ARCH_EBSA11
  	  Ethernet interface, two PCMCIA sockets, two serial ports and a
  	  parallel port.
  
++<<<<<<< HEAD
++=======
+ config ARCH_EFM32
+ 	bool "Energy Micro efm32"
+ 	depends on !MMU
+ 	select ARCH_REQUIRE_GPIOLIB
+ 	select AUTO_ZRELADDR
+ 	select ARM_NVIC
+ 	select CLKSRC_OF
+ 	select COMMON_CLK
+ 	select CPU_V7M
+ 	select GENERIC_CLOCKEVENTS
+ 	select NO_DMA
+ 	select NO_IOPORT_MAP
+ 	select SPARSE_IRQ
+ 	select USE_OF
+ 	help
+ 	  Support for Energy Micro's (now Silicon Labs) efm32 Giant Gecko
+ 	  processors.
+ 
++>>>>>>> ce816fa88cca (Kconfig: rename HAS_IOPORT to HAS_IOPORT_MAP)
  config ARCH_EP93XX
  	bool "EP93xx-based"
  	select ARCH_HAS_HOLES_MEMORYMODEL
@@@ -644,9 -677,8 +665,14 @@@ config ARCH_SHMOBIL
  	select HAVE_SMP
  	select MIGHT_HAVE_CACHE_L2X0
  	select MULTI_IRQ_HANDLER
++<<<<<<< HEAD
 +	select NEED_MACH_MEMORY_H
 +	select NO_IOPORT
 +	select PINCTRL if ARCH_WANT_OPTIONAL_GPIOLIB
++=======
+ 	select NO_IOPORT_MAP
+ 	select PINCTRL
++>>>>>>> ce816fa88cca (Kconfig: rename HAS_IOPORT to HAS_IOPORT_MAP)
  	select PM_GENERIC_DOMAINS if PM
  	select SPARSE_IRQ
  	help
@@@ -722,15 -760,14 +748,19 @@@ config ARCH_S3C64X
  	select HAVE_S3C2410_I2C if I2C
  	select HAVE_S3C2410_WATCHDOG if WATCHDOG
  	select HAVE_TCM
++<<<<<<< HEAD
 +	select NEED_MACH_GPIO_H
 +	select NO_IOPORT
++=======
+ 	select NO_IOPORT_MAP
++>>>>>>> ce816fa88cca (Kconfig: rename HAS_IOPORT to HAS_IOPORT_MAP)
  	select PLAT_SAMSUNG
 -	select PM_GENERIC_DOMAINS if PM
  	select S3C_DEV_NAND
  	select S3C_GPIO_TRACK
 -	select SAMSUNG_ATAGS
 -	select SAMSUNG_WAKEMASK
 -	select SAMSUNG_WDT_RESET
 +	select SAMSUNG_CLKSRC
 +	select SAMSUNG_GPIOLIB_4BIT
 +	select SAMSUNG_IRQ_VIC_TIMER
 +	select USB_ARCH_HAS_OHCI
  	help
  	  Samsung S3C64XX series based systems
  
diff --cc arch/arm/mach-picoxcell/Kconfig
index 13bae78b215a,62240f69b4ee..000000000000
--- a/arch/arm/mach-picoxcell/Kconfig
+++ b/arch/arm/mach-picoxcell/Kconfig
@@@ -1,13 -1,7 +1,17 @@@
  config ARCH_PICOXCELL
  	bool "Picochip PicoXcell" if ARCH_MULTI_V6
  	select ARCH_REQUIRE_GPIOLIB
 +	select ARM_PATCH_PHYS_VIRT
  	select ARM_VIC
 +	select CPU_V6K
 +	select DW_APB_TIMER
  	select DW_APB_TIMER_OF
 +	select GENERIC_CLOCKEVENTS
  	select HAVE_TCM
++<<<<<<< HEAD
 +	select NO_IOPORT
 +	select SPARSE_IRQ
 +	select USE_OF
++=======
+ 	select NO_IOPORT_MAP
++>>>>>>> ce816fa88cca (Kconfig: rename HAS_IOPORT to HAS_IOPORT_MAP)
diff --cc arch/arm/mach-prima2/Kconfig
index 6988b117fc17,e4e505f52ba0..000000000000
--- a/arch/arm/mach-prima2/Kconfig
+++ b/arch/arm/mach-prima2/Kconfig
@@@ -1,10 -1,9 +1,14 @@@
  config ARCH_SIRF
  	bool "CSR SiRF" if ARCH_MULTI_V7
 -	select ARCH_HAS_RESET_CONTROLLER
  	select ARCH_REQUIRE_GPIOLIB
 +	select GENERIC_CLOCKEVENTS
  	select GENERIC_IRQ_CHIP
++<<<<<<< HEAD
 +	select MIGHT_HAVE_CACHE_L2X0
 +	select NO_IOPORT
++=======
+ 	select NO_IOPORT_MAP
++>>>>>>> ce816fa88cca (Kconfig: rename HAS_IOPORT to HAS_IOPORT_MAP)
  	select PINCTRL
  	select PINCTRL_SIRF
  	help
diff --cc arch/arm/mach-shmobile/Kconfig
index 1a517e2fe449,0f92ba8e7884..000000000000
--- a/arch/arm/mach-shmobile/Kconfig
+++ b/arch/arm/mach-shmobile/Kconfig
@@@ -1,6 -1,63 +1,66 @@@
 -config ARCH_SHMOBILE
 -	bool
 +if ARCH_SHMOBILE
  
++<<<<<<< HEAD
 +comment "SH-Mobile System Type"
++=======
+ config ARCH_SHMOBILE_MULTI
+ 	bool "Renesas ARM SoCs" if ARCH_MULTI_V7
+ 	depends on MMU
+ 	select ARCH_SHMOBILE
+ 	select HAVE_ARM_SCU if SMP
+ 	select HAVE_ARM_TWD if SMP
+ 	select ARM_GIC
+ 	select MIGHT_HAVE_PCI
+ 	select ARCH_DMA_ADDR_T_64BIT if ARM_LPAE
+ 	select NO_IOPORT_MAP
+ 	select PINCTRL
+ 	select ARCH_REQUIRE_GPIOLIB
+ 
+ if ARCH_SHMOBILE_MULTI
+ 
+ comment "Renesas ARM SoCs System Type"
+ 
+ config ARCH_EMEV2
+ 	bool "Emma Mobile EV2"
+ 	select SYS_SUPPORTS_EM_STI
+ 
+ config ARCH_R7S72100
+ 	bool "RZ/A1H (R7S72100)"
+ 	select SYS_SUPPORTS_SH_MTU2
+ 
+ config ARCH_R8A7790
+ 	bool "R-Car H2 (R8A77900)"
+ 	select RENESAS_IRQC
+ 	select SYS_SUPPORTS_SH_CMT
+ 
+ config ARCH_R8A7791
+ 	bool "R-Car M2 (R8A77910)"
+ 	select RENESAS_IRQC
+ 	select SYS_SUPPORTS_SH_CMT
+ 
+ comment "Renesas ARM SoCs Board Type"
+ 
+ config MACH_GENMAI
+ 	bool "Genmai board"
+ 	depends on ARCH_R7S72100
+ 
+ config MACH_KOELSCH
+ 	bool "Koelsch board"
+ 	depends on ARCH_R8A7791
+ 	select MICREL_PHY if SH_ETH
+ 
+ config MACH_LAGER
+ 	bool "Lager board"
+ 	depends on ARCH_R8A7790
+ 	select MICREL_PHY if SH_ETH
+ 
+ comment "Renesas ARM SoCs System Configuration"
+ endif
+ 
+ if ARCH_SHMOBILE_LEGACY
+ 
+ comment "Renesas ARM SoCs System Type"
++>>>>>>> ce816fa88cca (Kconfig: rename HAS_IOPORT to HAS_IOPORT_MAP)
  
  config ARCH_SH7372
  	bool "SH-Mobile AP4 (SH7372)"
diff --cc arch/arm/mach-vexpress/Kconfig
index 5907e10c37fd,657d52d0391f..000000000000
--- a/arch/arm/mach-vexpress/Kconfig
+++ b/arch/arm/mach-vexpress/Kconfig
@@@ -4,19 -4,13 +4,23 @@@ config ARCH_VEXPRES
  	select ARM_AMBA
  	select ARM_GIC
  	select ARM_TIMER_SP804
 +	select CLKDEV_LOOKUP
 +	select COMMON_CLK
  	select COMMON_CLK_VERSATILE
 +	select CPU_V7
 +	select GENERIC_CLOCKEVENTS
  	select HAVE_ARM_SCU if SMP
 -	select HAVE_ARM_TWD if SMP
 +	select HAVE_ARM_TWD if LOCAL_TIMERS
 +	select HAVE_CLK
  	select HAVE_PATA_PLATFORM
 +	select HAVE_SMP
  	select ICST
++<<<<<<< HEAD
 +	select MIGHT_HAVE_CACHE_L2X0
 +	select NO_IOPORT
++=======
+ 	select NO_IOPORT_MAP
++>>>>>>> ce816fa88cca (Kconfig: rename HAS_IOPORT to HAS_IOPORT_MAP)
  	select PLAT_VERSATILE
  	select PLAT_VERSATILE_CLCD
  	select POWER_RESET
diff --cc arch/arm/plat-samsung/Kconfig
index f8ed2de0a678,243dfcb2ca0e..000000000000
--- a/arch/arm/plat-samsung/Kconfig
+++ b/arch/arm/plat-samsung/Kconfig
@@@ -6,22 -6,20 +6,27 @@@
  
  config PLAT_SAMSUNG
  	bool
 -	depends on PLAT_S3C24XX || ARCH_S3C64XX || PLAT_S5P || ARCH_EXYNOS
 +	depends on PLAT_S3C24XX || ARCH_S3C64XX || PLAT_S5P
  	default y
  	select GENERIC_IRQ_CHIP
- 	select NO_IOPORT
+ 	select NO_IOPORT_MAP
  	help
  	  Base platform code for all Samsung SoC based systems
  
  config PLAT_S5P
  	bool
 -	depends on (ARCH_S5P64X0 || ARCH_S5PC100 || ARCH_S5PV210)
 +	depends on (ARCH_S5P64X0 || ARCH_S5PC100 || ARCH_S5PV210 || ARCH_EXYNOS)
  	default y
  	select ARCH_REQUIRE_GPIOLIB
++<<<<<<< HEAD
 +	select ARM_GIC if ARCH_EXYNOS
 +	select ARM_VIC if !ARCH_EXYNOS
 +	select GIC_NON_BANKED if ARCH_EXYNOS4
 +	select NO_IOPORT
++=======
+ 	select ARM_VIC
+ 	select NO_IOPORT_MAP
++>>>>>>> ce816fa88cca (Kconfig: rename HAS_IOPORT to HAS_IOPORT_MAP)
  	select PLAT_SAMSUNG
  	select S3C_GPIO_TRACK
  	select S5P_GPIO_DRVSTR
diff --cc drivers/net/ethernet/3com/Kconfig
index 1c71c763f680,afaab4b2333f..000000000000
--- a/drivers/net/ethernet/3com/Kconfig
+++ b/drivers/net/ethernet/3com/Kconfig
@@@ -66,8 -66,7 +66,12 @@@ config PCMCIA_3C58
  
  config VORTEX
  	tristate "3c590/3c900 series (592/595/597) \"Vortex/Boomerang\" support"
++<<<<<<< HEAD
 +	depends on (PCI || EISA) && HAS_IOPORT
 +	select NET_CORE
++=======
+ 	depends on (PCI || EISA) && HAS_IOPORT_MAP
++>>>>>>> ce816fa88cca (Kconfig: rename HAS_IOPORT to HAS_IOPORT_MAP)
  	select MII
  	---help---
  	  This option enables driver support for a large number of 10Mbps and
diff --git a/arch/arc/Kconfig b/arch/arc/Kconfig
index 5917099470ea..e3f8f13a29cc 100644
--- a/arch/arc/Kconfig
+++ b/arch/arc/Kconfig
@@ -50,7 +50,7 @@ config ARCH_FLATMEM_ENABLE
 config MMU
 	def_bool y
 
-config NO_IOPORT
+config NO_IOPORT_MAP
 	def_bool y
 
 config GENERIC_CALIBRATE_DELAY
* Unmerged path arch/arm/Kconfig
* Unmerged path arch/arm/mach-picoxcell/Kconfig
* Unmerged path arch/arm/mach-prima2/Kconfig
diff --git a/arch/arm/mach-s3c24xx/Kconfig b/arch/arm/mach-s3c24xx/Kconfig
index f2f7088bfd22..611235bafef3 100644
--- a/arch/arm/mach-s3c24xx/Kconfig
+++ b/arch/arm/mach-s3c24xx/Kconfig
@@ -12,7 +12,7 @@ if ARCH_S3C24XX
 config PLAT_S3C24XX
 	def_bool y
 	select ARCH_REQUIRE_GPIOLIB
-	select NO_IOPORT
+	select NO_IOPORT_MAP
 	select S3C_DEV_NAND
 	select IRQ_DOMAIN
 	help
* Unmerged path arch/arm/mach-shmobile/Kconfig
* Unmerged path arch/arm/mach-vexpress/Kconfig
* Unmerged path arch/arm/plat-samsung/Kconfig
diff --git a/arch/arm64/Kconfig b/arch/arm64/Kconfig
index 56b3f6d447ae..a0951d6b0317 100644
--- a/arch/arm64/Kconfig
+++ b/arch/arm64/Kconfig
@@ -49,7 +49,7 @@ config ARCH_PHYS_ADDR_T_64BIT
 config MMU
 	def_bool y
 
-config NO_IOPORT
+config NO_IOPORT_MAP
 	def_bool y
 
 config STACKTRACE_SUPPORT
diff --git a/arch/cris/Kconfig b/arch/cris/Kconfig
index 8769a9045a54..c563810e1bf9 100644
--- a/arch/cris/Kconfig
+++ b/arch/cris/Kconfig
@@ -29,7 +29,7 @@ config GENERIC_CALIBRATE_DELAY
 	bool
 	default y
 
-config NO_IOPORT
+config NO_IOPORT_MAP
 	def_bool y
 
 config FORCE_MAX_ZONEORDER
diff --git a/arch/hexagon/Kconfig b/arch/hexagon/Kconfig
index 33a97929d055..faa3f363975f 100644
--- a/arch/hexagon/Kconfig
+++ b/arch/hexagon/Kconfig
@@ -21,7 +21,7 @@ config HEXAGON
 	select GENERIC_IRQ_SHOW
 	select HAVE_ARCH_KGDB
 	select HAVE_ARCH_TRACEHOOK
-	select NO_IOPORT
+	select NO_IOPORT_MAP
 	select GENERIC_IOMAP
 	select GENERIC_SMP_IDLE_THREAD
 	select STACKTRACE_SUPPORT
diff --git a/arch/m32r/Kconfig b/arch/m32r/Kconfig
index bcd17b206571..21b510f82510 100644
--- a/arch/m32r/Kconfig
+++ b/arch/m32r/Kconfig
@@ -28,7 +28,7 @@ config ZONE_DMA
 	bool
 	default y
 
-config NO_IOPORT
+config NO_IOPORT_MAP
 	def_bool y
 
 config NO_DMA
diff --git a/arch/m68k/Kconfig b/arch/m68k/Kconfig
index 821170e5f6ed..4fea2cb3488f 100644
--- a/arch/m68k/Kconfig
+++ b/arch/m68k/Kconfig
@@ -50,7 +50,7 @@ config TIME_LOW_RES
 	bool
 	default y
 
-config NO_IOPORT
+config NO_IOPORT_MAP
 	def_bool y
 
 config NO_DMA
diff --git a/arch/metag/Kconfig b/arch/metag/Kconfig
index dcd94406030e..e7b615daebd9 100644
--- a/arch/metag/Kconfig
+++ b/arch/metag/Kconfig
@@ -52,7 +52,7 @@ config GENERIC_HWEIGHT
 config GENERIC_CALIBRATE_DELAY
 	def_bool y
 
-config NO_IOPORT
+config NO_IOPORT_MAP
 	def_bool y
 
 source "init/Kconfig"
diff --git a/arch/mips/Kconfig b/arch/mips/Kconfig
index e53e2b40d695..1d1b421d9555 100644
--- a/arch/mips/Kconfig
+++ b/arch/mips/Kconfig
@@ -168,7 +168,7 @@ config MACH_DECSTATION
 	select CPU_R4000_WORKAROUNDS if 64BIT
 	select CPU_R4400_WORKAROUNDS if 64BIT
 	select DMA_NONCOHERENT
-	select NO_IOPORT
+	select NO_IOPORT_MAP
 	select IRQ_CPU
 	select SYS_HAS_CPU_R3000
 	select SYS_HAS_CPU_R4X00
@@ -992,7 +992,7 @@ config SYNC_R4K
 config MIPS_MACHINE
 	def_bool n
 
-config NO_IOPORT
+config NO_IOPORT_MAP
 	def_bool n
 
 config GENERIC_ISA_DMA
diff --git a/arch/openrisc/Kconfig b/arch/openrisc/Kconfig
index 1072bfd18c50..dea72414c594 100644
--- a/arch/openrisc/Kconfig
+++ b/arch/openrisc/Kconfig
@@ -41,7 +41,7 @@ config RWSEM_XCHGADD_ALGORITHM
 config GENERIC_HWEIGHT
 	def_bool y
 
-config NO_IOPORT
+config NO_IOPORT_MAP
 	def_bool y
 
 config TRACE_IRQFLAGS_SUPPORT
diff --git a/arch/s390/Kconfig b/arch/s390/Kconfig
index 06696565d623..f0419f402309 100644
--- a/arch/s390/Kconfig
+++ b/arch/s390/Kconfig
@@ -52,7 +52,7 @@ config KEXEC
 config AUDIT_ARCH
 	def_bool y
 
-config NO_IOPORT
+config NO_IOPORT_MAP
 	def_bool y
 
 config PCI_QUIRKS
diff --git a/arch/sh/Kconfig b/arch/sh/Kconfig
index e9c648c550c1..ea59f3887e16 100644
--- a/arch/sh/Kconfig
+++ b/arch/sh/Kconfig
@@ -3,7 +3,7 @@ config SUPERH
 	select ARCH_MIGHT_HAVE_PC_PARPORT
 	select EXPERT
 	select CLKDEV_LOOKUP
-	select HAVE_IDE if HAS_IOPORT
+	select HAVE_IDE if HAS_IOPORT_MAP
 	select HAVE_MEMBLOCK
 	select HAVE_MEMBLOCK_NODE_MAP
 	select ARCH_DISCARD_MEMBLOCK
@@ -147,7 +147,7 @@ config ARCH_HAS_ILOG2_U32
 config ARCH_HAS_ILOG2_U64
 	def_bool n
 
-config NO_IOPORT
+config NO_IOPORT_MAP
 	def_bool !PCI
 	depends on !SH_CAYMAN && !SH_SH4202_MICRODEV && !SH_SHMIN && \
 		   !SH_HP6XX && !SH_SOLUTION_ENGINE
diff --git a/arch/sh/boards/Kconfig b/arch/sh/boards/Kconfig
index fb5805745ace..28d99c042b64 100644
--- a/arch/sh/boards/Kconfig
+++ b/arch/sh/boards/Kconfig
@@ -158,7 +158,7 @@ config SH_SDK7786
 	bool "SDK7786"
 	depends on CPU_SUBTYPE_SH7786
 	select SYS_SUPPORTS_PCI
-	select NO_IOPORT if !PCI
+	select NO_IOPORT_MAP if !PCI
 	select ARCH_WANT_OPTIONAL_GPIOLIB
 	select HAVE_SRAM_POOL
 	select REGULATOR_FIXED_VOLTAGE if REGULATOR
@@ -204,7 +204,7 @@ config SH_URQUELL
 	depends on CPU_SUBTYPE_SH7786
 	select ARCH_REQUIRE_GPIOLIB
 	select SYS_SUPPORTS_PCI
-	select NO_IOPORT if !PCI
+	select NO_IOPORT_MAP if !PCI
 
 config SH_MIGOR
 	bool "Migo-R"
@@ -306,7 +306,7 @@ config SH_LBOX_RE2
 config SH_X3PROTO
 	bool "SH-X3 Prototype board"
 	depends on CPU_SUBTYPE_SHX3
-	select NO_IOPORT if !PCI
+	select NO_IOPORT_MAP if !PCI
 	select IRQ_DOMAIN
 
 config SH_MAGIC_PANEL_R2
@@ -332,7 +332,7 @@ config SH_POLARIS
 
 config SH_SH2007
 	bool "SH-2007 board"
-	select NO_IOPORT
+	select NO_IOPORT_MAP
 	select REGULATOR_FIXED_VOLTAGE if REGULATOR
 	depends on CPU_SUBTYPE_SH7780
 	help
diff --git a/arch/sh/include/asm/io.h b/arch/sh/include/asm/io.h
index 629db2ad7916..728c4c571f40 100644
--- a/arch/sh/include/asm/io.h
+++ b/arch/sh/include/asm/io.h
@@ -122,7 +122,7 @@ __BUILD_MEMORY_STRING(__raw_, l, u32)
 
 __BUILD_MEMORY_STRING(__raw_, q, u64)
 
-#ifdef CONFIG_HAS_IOPORT
+#ifdef CONFIG_HAS_IOPORT_MAP
 
 /*
  * Slowdown I/O port space accesses for antique hardware.
@@ -218,7 +218,7 @@ __BUILD_IOPORT_STRING(w, u16)
 __BUILD_IOPORT_STRING(l, u32)
 __BUILD_IOPORT_STRING(q, u64)
 
-#else /* !CONFIG_HAS_IOPORT */
+#else /* !CONFIG_HAS_IOPORT_MAP */
 
 #include <asm/io_noioport.h>
 
diff --git a/arch/sh/include/asm/io_trapped.h b/arch/sh/include/asm/io_trapped.h
index f1251d4f0ba9..4ab94ef51071 100644
--- a/arch/sh/include/asm/io_trapped.h
+++ b/arch/sh/include/asm/io_trapped.h
@@ -36,7 +36,7 @@ __ioremap_trapped(unsigned long offset, unsigned long size)
 #define __ioremap_trapped(offset, size) NULL
 #endif
 
-#ifdef CONFIG_HAS_IOPORT
+#ifdef CONFIG_HAS_IOPORT_MAP
 extern struct list_head trapped_io;
 
 static inline void __iomem *
diff --git a/arch/sh/include/asm/machvec.h b/arch/sh/include/asm/machvec.h
index eb9c20d971dd..d3324e4f372e 100644
--- a/arch/sh/include/asm/machvec.h
+++ b/arch/sh/include/asm/machvec.h
@@ -21,7 +21,7 @@ struct sh_machine_vector {
 	int (*mv_irq_demux)(int irq);
 	void (*mv_init_irq)(void);
 
-#ifdef CONFIG_HAS_IOPORT
+#ifdef CONFIG_HAS_IOPORT_MAP
 	void __iomem *(*mv_ioport_map)(unsigned long port, unsigned int size);
 	void (*mv_ioport_unmap)(void __iomem *);
 #endif
diff --git a/arch/sh/kernel/Makefile b/arch/sh/kernel/Makefile
index 261c8bfd75ce..2ccf36c824c6 100644
--- a/arch/sh/kernel/Makefile
+++ b/arch/sh/kernel/Makefile
@@ -22,7 +22,7 @@ obj-y	:= debugtraps.o dma-nommu.o dumpstack.o 		\
 
 ifndef CONFIG_GENERIC_IOMAP
 obj-y				+= iomap.o
-obj-$(CONFIG_HAS_IOPORT)	+= ioport.o
+obj-$(CONFIG_HAS_IOPORT_MAP)	+= ioport.o
 endif
 
 obj-$(CONFIG_SUPERH32)		+= sys_sh32.o
diff --git a/arch/sh/kernel/io_trapped.c b/arch/sh/kernel/io_trapped.c
index c0a9761f2f8a..f8ce36286cea 100644
--- a/arch/sh/kernel/io_trapped.c
+++ b/arch/sh/kernel/io_trapped.c
@@ -22,7 +22,7 @@
 
 #define TRAPPED_PAGES_MAX 16
 
-#ifdef CONFIG_HAS_IOPORT
+#ifdef CONFIG_HAS_IOPORT_MAP
 LIST_HEAD(trapped_io);
 EXPORT_SYMBOL_GPL(trapped_io);
 #endif
@@ -90,7 +90,7 @@ int register_trapped_io(struct trapped_io *tiop)
 	tiop->magic = IO_TRAPPED_MAGIC;
 	INIT_LIST_HEAD(&tiop->list);
 	spin_lock_irq(&trapped_lock);
-#ifdef CONFIG_HAS_IOPORT
+#ifdef CONFIG_HAS_IOPORT_MAP
 	if (flags & IORESOURCE_IO)
 		list_add(&tiop->list, &trapped_io);
 #endif
diff --git a/arch/tile/Kconfig b/arch/tile/Kconfig
index 3aa37669ff8c..8c41110a6361 100644
--- a/arch/tile/Kconfig
+++ b/arch/tile/Kconfig
@@ -392,7 +392,7 @@ config PCI_DOMAINS
 config NO_IOMEM
 	def_bool !PCI
 
-config NO_IOPORT
+config NO_IOPORT_MAP
 	def_bool !PCI
 
 source "drivers/pci/Kconfig"
diff --git a/arch/unicore32/Kconfig b/arch/unicore32/Kconfig
index 41bcc0013442..cce12593e003 100644
--- a/arch/unicore32/Kconfig
+++ b/arch/unicore32/Kconfig
@@ -26,7 +26,7 @@ config UNICORE32
 config GENERIC_CSUM
 	def_bool y
 
-config NO_IOPORT
+config NO_IOPORT_MAP
 	bool
 
 config STACKTRACE_SUPPORT
diff --git a/arch/xtensa/Kconfig b/arch/xtensa/Kconfig
index 0a1b95f81a32..0423743a280d 100644
--- a/arch/xtensa/Kconfig
+++ b/arch/xtensa/Kconfig
@@ -37,7 +37,7 @@ config ARCH_HAS_ILOG2_U32
 config ARCH_HAS_ILOG2_U64
 	def_bool n
 
-config NO_IOPORT
+config NO_IOPORT_MAP
 	def_bool n
 
 config HZ
@@ -190,7 +190,7 @@ config XTENSA_PLATFORM_XT2000
 config XTENSA_PLATFORM_S6105
 	bool "S6105"
 	select SERIAL_CONSOLE
-	select NO_IOPORT
+	select NO_IOPORT_MAP
 
 config XTENSA_PLATFORM_XTFPGA
 	bool "XTFPGA"
diff --git a/arch/xtensa/configs/iss_defconfig b/arch/xtensa/configs/iss_defconfig
index 77c52f80187a..54c557c15bb0 100644
--- a/arch/xtensa/configs/iss_defconfig
+++ b/arch/xtensa/configs/iss_defconfig
@@ -12,7 +12,7 @@ CONFIG_GENERIC_HWEIGHT=y
 CONFIG_GENERIC_HARDIRQS=y
 # CONFIG_ARCH_HAS_ILOG2_U32 is not set
 # CONFIG_ARCH_HAS_ILOG2_U64 is not set
-CONFIG_NO_IOPORT=y
+CONFIG_NO_IOPORT_MAP=y
 CONFIG_HZ=100
 CONFIG_DEFCONFIG_LIST="/lib/modules/$UNAME_RELEASE/.config"
 CONFIG_CONSTRUCTORS=y
diff --git a/arch/xtensa/configs/s6105_defconfig b/arch/xtensa/configs/s6105_defconfig
index 4799c6a526b5..1464d72e49f9 100644
--- a/arch/xtensa/configs/s6105_defconfig
+++ b/arch/xtensa/configs/s6105_defconfig
@@ -12,7 +12,7 @@ CONFIG_GENERIC_HWEIGHT=y
 CONFIG_GENERIC_HARDIRQS=y
 # CONFIG_ARCH_HAS_ILOG2_U32 is not set
 # CONFIG_ARCH_HAS_ILOG2_U64 is not set
-CONFIG_NO_IOPORT=y
+CONFIG_NO_IOPORT_MAP=y
 CONFIG_HZ=100
 CONFIG_DEFCONFIG_LIST="/lib/modules/$UNAME_RELEASE/.config"
 
diff --git a/drivers/char/tpm/Kconfig b/drivers/char/tpm/Kconfig
index dbfd56446c31..6da362af2310 100644
--- a/drivers/char/tpm/Kconfig
+++ b/drivers/char/tpm/Kconfig
@@ -55,7 +55,7 @@ config TCG_NSC
 
 config TCG_ATMEL
 	tristate "Atmel TPM Interface"
-	depends on PPC64 || HAS_IOPORT
+	depends on PPC64 || HAS_IOPORT_MAP
 	---help---
 	  If you have a TPM security chip from Atmel say Yes and it 
 	  will be accessible from within Linux.  To compile this driver 
diff --git a/drivers/i2c/busses/Kconfig b/drivers/i2c/busses/Kconfig
index 0c1db5c344d1..6c2e21f8ed54 100644
--- a/drivers/i2c/busses/Kconfig
+++ b/drivers/i2c/busses/Kconfig
@@ -880,7 +880,7 @@ config I2C_ACORN
 
 config I2C_ELEKTOR
 	tristate "Elektor ISA card"
-	depends on ISA && HAS_IOPORT && BROKEN_ON_SMP
+	depends on ISA && HAS_IOPORT_MAP && BROKEN_ON_SMP
 	select I2C_ALGOPCF
 	help
 	  This supports the PCF8584 ISA bus I2C adapter.  Say Y if you own
diff --git a/drivers/net/can/sja1000/Kconfig b/drivers/net/can/sja1000/Kconfig
index ff2ba86cd4a4..833ee8c9168e 100644
--- a/drivers/net/can/sja1000/Kconfig
+++ b/drivers/net/can/sja1000/Kconfig
@@ -46,7 +46,7 @@ config CAN_EMS_PCI
 config CAN_PEAK_PCMCIA
 	tristate "PEAK PCAN-PC Card"
 	depends on PCMCIA
-	depends on HAS_IOPORT
+	depends on HAS_IOPORT_MAP
 	---help---
 	  This driver is for the PCAN-PC Card PCMCIA adapter (1 or 2 channels)
 	  from PEAK-System (http://www.peak-system.com). To compile this
* Unmerged path drivers/net/ethernet/3com/Kconfig
diff --git a/include/asm-generic/io.h b/include/asm-generic/io.h
index d5afe96adba6..975e1cc75edb 100644
--- a/include/asm-generic/io.h
+++ b/include/asm-generic/io.h
@@ -327,7 +327,7 @@ static inline void iounmap(void __iomem *addr)
 }
 #endif /* CONFIG_MMU */
 
-#ifdef CONFIG_HAS_IOPORT
+#ifdef CONFIG_HAS_IOPORT_MAP
 #ifndef CONFIG_GENERIC_IOMAP
 static inline void __iomem *ioport_map(unsigned long port, unsigned int nr)
 {
@@ -341,7 +341,7 @@ static inline void ioport_unmap(void __iomem *p)
 extern void __iomem *ioport_map(unsigned long port, unsigned int nr);
 extern void ioport_unmap(void __iomem *p);
 #endif /* CONFIG_GENERIC_IOMAP */
-#endif /* CONFIG_HAS_IOPORT */
+#endif /* CONFIG_HAS_IOPORT_MAP */
 
 #ifndef xlate_dev_kmem_ptr
 #define xlate_dev_kmem_ptr(p)	p
diff --git a/include/asm-generic/iomap.h b/include/asm-generic/iomap.h
index 6afd7d6a9899..1b41011643a5 100644
--- a/include/asm-generic/iomap.h
+++ b/include/asm-generic/iomap.h
@@ -56,7 +56,7 @@ extern void iowrite8_rep(void __iomem *port, const void *buf, unsigned long coun
 extern void iowrite16_rep(void __iomem *port, const void *buf, unsigned long count);
 extern void iowrite32_rep(void __iomem *port, const void *buf, unsigned long count);
 
-#ifdef CONFIG_HAS_IOPORT
+#ifdef CONFIG_HAS_IOPORT_MAP
 /* Create a virtual mapping cookie for an IO port range */
 extern void __iomem *ioport_map(unsigned long port, unsigned int nr);
 extern void ioport_unmap(void __iomem *);
diff --git a/include/linux/io.h b/include/linux/io.h
index f4f42faec686..3e35c183dca4 100644
--- a/include/linux/io.h
+++ b/include/linux/io.h
@@ -41,7 +41,7 @@ static inline int ioremap_page_range(unsigned long addr, unsigned long end,
 /*
  * Managed iomap interface
  */
-#ifdef CONFIG_HAS_IOPORT
+#ifdef CONFIG_HAS_IOPORT_MAP
 void __iomem * devm_ioport_map(struct device *dev, unsigned long port,
 			       unsigned int nr);
 void devm_ioport_unmap(struct device *dev, void __iomem *addr);
diff --git a/lib/Kconfig b/lib/Kconfig
index c1d7cab4b6de..2f9f2695d342 100644
--- a/lib/Kconfig
+++ b/lib/Kconfig
@@ -333,9 +333,9 @@ config HAS_IOMEM
 	select GENERIC_IO
 	default y
 
-config HAS_IOPORT
+config HAS_IOPORT_MAP
 	boolean
-	depends on HAS_IOMEM && !NO_IOPORT
+	depends on HAS_IOMEM && !NO_IOPORT_MAP
 	default y
 
 config HAS_DMA
diff --git a/lib/devres.c b/lib/devres.c
index 823533138fa0..10231287fbcc 100644
--- a/lib/devres.c
+++ b/lib/devres.c
@@ -168,7 +168,7 @@ void __iomem *devm_request_and_ioremap(struct device *device,
 }
 EXPORT_SYMBOL(devm_request_and_ioremap);
 
-#ifdef CONFIG_HAS_IOPORT
+#ifdef CONFIG_HAS_IOPORT_MAP
 /*
  * Generic iomap devres
  */
@@ -227,7 +227,7 @@ void devm_ioport_unmap(struct device *dev, void __iomem *addr)
 			       devm_ioport_map_match, (void *)addr));
 }
 EXPORT_SYMBOL(devm_ioport_unmap);
-#endif /* CONFIG_HAS_IOPORT */
+#endif /* CONFIG_HAS_IOPORT_MAP */
 
 #ifdef CONFIG_PCI
 /*
diff --git a/lib/iomap.c b/lib/iomap.c
index 2c08f36862eb..fc3dcb4b238e 100644
--- a/lib/iomap.c
+++ b/lib/iomap.c
@@ -224,7 +224,7 @@ EXPORT_SYMBOL(iowrite8_rep);
 EXPORT_SYMBOL(iowrite16_rep);
 EXPORT_SYMBOL(iowrite32_rep);
 
-#ifdef CONFIG_HAS_IOPORT
+#ifdef CONFIG_HAS_IOPORT_MAP
 /* Create a virtual mapping cookie for an IO port range */
 void __iomem *ioport_map(unsigned long port, unsigned int nr)
 {
@@ -239,7 +239,7 @@ void ioport_unmap(void __iomem *addr)
 }
 EXPORT_SYMBOL(ioport_map);
 EXPORT_SYMBOL(ioport_unmap);
-#endif /* CONFIG_HAS_IOPORT */
+#endif /* CONFIG_HAS_IOPORT_MAP */
 
 #ifdef CONFIG_PCI
 /* Hide the details if this is a MMIO or PIO address space and just do what
diff --git a/sound/isa/Kconfig b/sound/isa/Kconfig
index affa13480659..0216475fc759 100644
--- a/sound/isa/Kconfig
+++ b/sound/isa/Kconfig
@@ -191,7 +191,7 @@ config SND_ES18XX
 
 config SND_SC6000
 	tristate "Gallant SC-6000/6600/7000 and Audio Excel DSP 16"
-	depends on HAS_IOPORT
+	depends on HAS_IOPORT_MAP
 	select SND_WSS_LIB
 	select SND_OPL3_LIB
 	select SND_MPU401_UART
diff --git a/sound/pci/Kconfig b/sound/pci/Kconfig
index fb5e713f8022..40a6aaaad4ed 100644
--- a/sound/pci/Kconfig
+++ b/sound/pci/Kconfig
@@ -687,7 +687,7 @@ config SND_LOLA
 
 config SND_LX6464ES
 	tristate "Digigram LX6464ES"
-	depends on HAS_IOPORT
+	depends on HAS_IOPORT_MAP
 	select SND_PCM
 	help
 	  Say Y here to include support for Digigram LX6464ES boards.
