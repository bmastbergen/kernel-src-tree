iommu/vt-d: Remove pdev from intel_iommu_attach_device()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [iommu] vt-d: Remove pdev from intel_iommu_attach_device() (Myron Stowe) [1129880 1087643]
Rebuild_FUZZ: 94.34%
commit-author David Woodhouse <David.Woodhouse@intel.com>
commit 7207d8f925a74578a544f5beff8f840cfeebd12e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/7207d8f9.failed

	Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
(cherry picked from commit 7207d8f925a74578a544f5beff8f840cfeebd12e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/iommu/intel-iommu.c
diff --cc drivers/iommu/intel-iommu.c
index bd20ea6166e6,37ce54b188f3..000000000000
--- a/drivers/iommu/intel-iommu.c
+++ b/drivers/iommu/intel-iommu.c
@@@ -4110,12 -4147,12 +4110,16 @@@ static int intel_iommu_attach_device(st
  				     struct device *dev)
  {
  	struct dmar_domain *dmar_domain = domain->priv;
- 	struct pci_dev *pdev = to_pci_dev(dev);
  	struct intel_iommu *iommu;
  	int addr_width;
 -	u8 bus, devfn;
  
++<<<<<<< HEAD
 +	/* normally pdev is not mapped */
 +	if (unlikely(domain_context_mapped(pdev))) {
++=======
+ 	/* normally dev is not mapped */
+ 	if (unlikely(domain_context_mapped(dev))) {
++>>>>>>> 7207d8f925a7 (iommu/vt-d: Remove pdev from intel_iommu_attach_device())
  		struct dmar_domain *old_domain;
  
  		old_domain = find_domain(dev);
* Unmerged path drivers/iommu/intel-iommu.c
