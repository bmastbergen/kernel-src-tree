vti4: Don't count header length twice.

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [net] vti4: Don't count header length twice (Jiri Pirko) [1091561]
Rebuild_FUZZ: 98.67%
commit-author Steffen Klassert <steffen.klassert@secunet.com>
commit a32452366b7250c42e96a18ffc3ad8db9e0ca3c2
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/a3245236.failed

We currently count the size of LL_MAX_HEADER and struct iphdr
twice for vti4 devices, this leads to a wrong device mtu.
The size of LL_MAX_HEADER and struct iphdr is already counted in
ip_tunnel_bind_dev(), so don't do it again in vti_tunnel_init().

Fixes: b9959fd3 ("vti: switch to new ip tunnel code")
	Signed-off-by: Steffen Klassert <steffen.klassert@secunet.com>
(cherry picked from commit a32452366b7250c42e96a18ffc3ad8db9e0ca3c2)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv4/ip_vti.c
diff --cc net/ipv4/ip_vti.c
index 797275dcfe0f,cd62596e9a87..000000000000
--- a/net/ipv4/ip_vti.c
+++ b/net/ipv4/ip_vti.c
@@@ -219,7 -348,7 +219,11 @@@ static int vti_tunnel_init(struct net_d
  	memcpy(dev->dev_addr, &iph->saddr, 4);
  	memcpy(dev->broadcast, &iph->daddr, 4);
  
++<<<<<<< HEAD
 +	dev->hard_header_len	= LL_MAX_HEADER + sizeof(struct iphdr);
++=======
+ 	dev->type		= ARPHRD_TUNNEL;
++>>>>>>> a32452366b72 (vti4: Don't count header length twice.)
  	dev->mtu		= ETH_DATA_LEN;
  	dev->flags		= IFF_NOARP;
  	dev->iflink		= 0;
* Unmerged path net/ipv4/ip_vti.c
