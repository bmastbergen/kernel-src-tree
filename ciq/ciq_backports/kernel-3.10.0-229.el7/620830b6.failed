perf tools: Allow building for tile

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [tools] perf: Allow building for tile (Jiri Olsa) [1134356]
Rebuild_FUZZ: 90.62%
commit-author Zhigang Lu <zlu@tilera.com>
commit 620830b6954913647b7c7f68920cf48eddf6ad92
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/620830b6.failed

Tested by building perf:
- Cross-compiled for tile on x86_64
- Built natively on tile

	Signed-off-by: Zhigang Lu <zlu@tilera.com>
	Signed-off-by: Chris Metcalf <cmetcalf@tilera.com>
(cherry picked from commit 620830b6954913647b7c7f68920cf48eddf6ad92)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/config/Makefile.arch
* Unmerged path tools/perf/config/Makefile.arch
* Unmerged path tools/perf/config/Makefile.arch
diff --git a/tools/perf/perf.h b/tools/perf/perf.h
index 6898ad0e199f..7961a466d733 100644
--- a/tools/perf/perf.h
+++ b/tools/perf/perf.h
@@ -139,6 +139,14 @@
 #define CPUINFO_PROC	"core ID"
 #endif
 
+#ifdef __tile__
+#define mb()		asm volatile ("mf" ::: "memory")
+#define wmb()		asm volatile ("mf" ::: "memory")
+#define rmb()		asm volatile ("mf" ::: "memory")
+#define cpu_relax()	asm volatile ("mfspr zero, PASS" ::: "memory")
+#define CPUINFO_PROC    "model name"
+#endif
+
 #define barrier() asm volatile ("" ::: "memory")
 
 #ifndef cpu_relax
