ALSA: Merge memalloc code into snd-pcm module

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [alsa] Merge memalloc code into snd-pcm module (Jaroslav Kysela) [1112200]
Rebuild_FUZZ: 92.86%
commit-author Takashi Iwai <tiwai@suse.de>
commit 2d82ea2005624a80b18916e37bce921d6e868b59
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/2d82ea20.failed

Instead of keeping a separate snd-page-alloc module, merge into the
core snd-pcm module, as we don't need to keep it as an individual
module due to the drop of page reservation.

	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit 2d82ea2005624a80b18916e37bce921d6e868b59)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/core/Makefile
diff --cc sound/core/Makefile
index 43d4117428ac,394a38909f6b..000000000000
--- a/sound/core/Makefile
+++ b/sound/core/Makefile
@@@ -10,11 -10,11 +10,16 @@@ snd-$(CONFIG_SND_VMASTER) += vmaster.
  snd-$(CONFIG_SND_KCTL_JACK) += ctljack.o
  snd-$(CONFIG_SND_JACK)	  += jack.o
  
- snd-pcm-objs := pcm.o pcm_native.o pcm_lib.o pcm_timer.o pcm_misc.o \
- 		pcm_memory.o
+ snd-pcm-y := pcm.o pcm_native.o pcm_lib.o pcm_timer.o pcm_misc.o \
+ 		pcm_memory.o memalloc.o
+ snd-pcm-$(CONFIG_SND_DMA_SGBUF) += sgbuf.o
  
++<<<<<<< HEAD
 +snd-page-alloc-y := memalloc.o
 +snd-page-alloc-$(CONFIG_SND_DMA_SGBUF) += sgbuf.o
++=======
+ snd-pcm-dmaengine-objs := pcm_dmaengine.o
++>>>>>>> 2d82ea200562 (ALSA: Merge memalloc code into snd-pcm module)
  
  snd-rawmidi-objs  := rawmidi.o
  snd-timer-objs    := timer.o
@@@ -29,7 -29,8 +34,12 @@@ obj-$(CONFIG_SND_HWDEP)		+= snd-hwdep.
  obj-$(CONFIG_SND_TIMER)		+= snd-timer.o
  obj-$(CONFIG_SND_HRTIMER)	+= snd-hrtimer.o
  obj-$(CONFIG_SND_RTCTIMER)	+= snd-rtctimer.o
++<<<<<<< HEAD
 +obj-$(CONFIG_SND_PCM)		+= snd-pcm.o snd-page-alloc.o
++=======
+ obj-$(CONFIG_SND_PCM)		+= snd-pcm.o
+ obj-$(CONFIG_SND_DMAENGINE_PCM)	+= snd-pcm-dmaengine.o
++>>>>>>> 2d82ea200562 (ALSA: Merge memalloc code into snd-pcm module)
  obj-$(CONFIG_SND_RAWMIDI)	+= snd-rawmidi.o
  
  obj-$(CONFIG_SND_OSSEMUL)	+= oss/
* Unmerged path sound/core/Makefile
diff --git a/sound/core/memalloc.c b/sound/core/memalloc.c
index 5d7c0d04f5cc..578b2e91057a 100644
--- a/sound/core/memalloc.c
+++ b/sound/core/memalloc.c
@@ -21,22 +21,12 @@
  *
  */
 
-#include <linux/module.h>
-#include <linux/init.h>
 #include <linux/slab.h>
 #include <linux/mm.h>
-#include <asm/uaccess.h>
 #include <linux/dma-mapping.h>
 #include <linux/genalloc.h>
-#include <linux/moduleparam.h>
 #include <sound/memalloc.h>
 
-
-MODULE_AUTHOR("Takashi Iwai <tiwai@suse.de>, Jaroslav Kysela <perex@perex.cz>");
-MODULE_DESCRIPTION("Memory allocator for ALSA system.");
-MODULE_LICENSE("GPL");
-
-
 /*
  *
  *  Generic memory allocators
