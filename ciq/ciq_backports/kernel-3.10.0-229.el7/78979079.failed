tools/perf/build: Fix install dependency

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [tools] perf/build: Fix install dependency (Jiri Olsa) [1133083]
Rebuild_FUZZ: 91.89%
commit-author Jiri Olsa <jolsa@redhat.com>
commit 789790791ad254408267eb6a216ae7a90973c05a
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/78979079.failed

The traceevents-plugins install targets needs a proper dependency,
otherwise it might be executed prematurely and in parallel to an
actual build.

	Signed-off-by: Jiri Olsa <jolsa@redhat.com>
	Cc: Arnaldo Carvalho de Melo <acme@redhat.com>
	Cc: Peter Zijlstra <a.p.zijlstra@chello.nl>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: David Ahern <dsahern@gmail.com>
Link: http://lkml.kernel.org/n/tip-rvlbzena4ovzgqiPm6teBofz@git.kernel.org
	Signed-off-by: Ingo Molnar <mingo@kernel.org>
(cherry picked from commit 789790791ad254408267eb6a216ae7a90973c05a)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/Makefile.perf
diff --cc tools/perf/Makefile.perf
index 625febd7e8c5,9a8cf376f874..000000000000
--- a/tools/perf/Makefile.perf
+++ b/tools/perf/Makefile.perf
@@@ -693,11 -711,19 +693,19 @@@ $(LIB_FILE): $(LIB_OBJS
  # libtraceevent.a
  TE_SOURCES = $(wildcard $(TRACE_EVENT_DIR)*.[ch])
  
 -LIBTRACEEVENT_FLAGS  = $(QUIET_SUBDIR1) O=$(OUTPUT)
 -LIBTRACEEVENT_FLAGS += CFLAGS="-g -Wall $(EXTRA_CFLAGS)"
 -LIBTRACEEVENT_FLAGS += plugin_dir=$(plugindir_SQ)
 -
 -$(LIBTRACEEVENT): $(TE_SOURCES) $(OUTPUT)PERF-CFLAGS
 -	$(QUIET_SUBDIR0)$(TRACE_EVENT_DIR) $(LIBTRACEEVENT_FLAGS) libtraceevent.a plugins
 +$(LIBTRACEEVENT): $(TE_SOURCES)
 +	$(QUIET_SUBDIR0)$(TRACE_EVENT_DIR) $(QUIET_SUBDIR1) O=$(OUTPUT) libtraceevent.a
  
  $(LIBTRACEEVENT)-clean:
++<<<<<<< HEAD
 +	$(QUIET_SUBDIR0)$(TRACE_EVENT_DIR) $(QUIET_SUBDIR1) O=$(OUTPUT) clean
++=======
+ 	$(call QUIET_CLEAN, libtraceevent)
+ 	@$(MAKE) -C $(TRACE_EVENT_DIR) O=$(OUTPUT) clean >/dev/null
+ 
+ install-traceevent-plugins: $(LIBTRACEEVENT)
+ 	$(QUIET_SUBDIR0)$(TRACE_EVENT_DIR) $(LIBTRACEEVENT_FLAGS) install_plugins
++>>>>>>> 789790791ad2 (tools/perf/build: Fix install dependency)
  
  LIBLK_SOURCES = $(wildcard $(LK_PATH)*.[ch])
  
* Unmerged path tools/perf/Makefile.perf
