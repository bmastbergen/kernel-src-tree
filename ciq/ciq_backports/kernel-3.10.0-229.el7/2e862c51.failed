ACPI / hotplug / PCI: Always return success after adding a function

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [acpi] hotplug/pci: Always return success after adding a function (Myron Stowe) [1114228]
Rebuild_FUZZ: 92.80%
commit-author Rafael J. Wysocki <rafael.j.wysocki@intel.com>
commit 2e862c51904ddd12be2d256513160e1f87beafee
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/2e862c51.failed

When a new ACPIPHP function is added by register_slot() and the
notify handler cannot be installed for it, register_slot() returns an
error status without cleaning up, which causes the entire namespace
walk in acpiphp_enumerate_slots() to be aborted, although it still
may be possible to successfully install the function notify handler
for other device objects under the given brigde.

To address this issue make register_slot() return success after
a new function has been added, even if the addition of the notify
handler for it has failed.

	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
	Tested-by: Mika Westerberg <mika.westerberg@linux.intel.com>
(cherry picked from commit 2e862c51904ddd12be2d256513160e1f87beafee)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/pci/hotplug/acpiphp_glue.c
diff --cc drivers/pci/hotplug/acpiphp_glue.c
index 7d4cb0d082b8,d75ba7e0ca8d..000000000000
--- a/drivers/pci/hotplug/acpiphp_glue.c
+++ b/drivers/pci/hotplug/acpiphp_glue.c
@@@ -334,11 -324,10 +334,16 @@@ register_slot(acpi_handle handle, u32 l
  					     newfunc);
  
  		if (ACPI_FAILURE(status))
++<<<<<<< HEAD
 +			pr_err("failed to register interrupt notify handler\n");
 +	} else
 +		status = AE_OK;
++=======
+ 			err("failed to register interrupt notify handler\n");
+ 	}
++>>>>>>> 2e862c51904d (ACPI / hotplug / PCI: Always return success after adding a function)
  
- 	return status;
+ 	return AE_OK;
  
   err_exit:
  	bridge->nr_slots--;
* Unmerged path drivers/pci/hotplug/acpiphp_glue.c
