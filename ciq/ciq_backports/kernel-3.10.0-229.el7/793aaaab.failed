perf report: Add --children option

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [tools] perf/report: Add --children option (Jiri Olsa) [1134356]
Rebuild_FUZZ: 97.06%
commit-author Namhyung Kim <namhyung@kernel.org>
commit 793aaaabb79803a0154fc6a98c472a29bb6d5cc9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/793aaaab.failed

The --children option is for showing accumulated overhead (period)
value as well as self overhead.

	Signed-off-by: Namhyung Kim <namhyung@kernel.org>
	Tested-by: Arun Sharma <asharma@fb.com>
	Tested-by: Rodrigo Campos <rodrigo@sdfg.com.ar>
	Cc: Frederic Weisbecker <fweisbec@gmail.com>
Link: http://lkml.kernel.org/r/1401335910-16832-16-git-send-email-namhyung@kernel.org
	Signed-off-by: Jiri Olsa <jolsa@kernel.org>
(cherry picked from commit 793aaaabb79803a0154fc6a98c472a29bb6d5cc9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/Documentation/perf-report.txt
#	tools/perf/builtin-report.c
diff --cc tools/perf/Documentation/perf-report.txt
index 9babe915b6c4,cefdf430d1b4..000000000000
--- a/tools/perf/Documentation/perf-report.txt
+++ b/tools/perf/Documentation/perf-report.txt
@@@ -107,6 -107,16 +107,19 @@@ OPTION
  	And default sort keys are changed to comm, dso_from, symbol_from, dso_to
  	and symbol_to, see '--branch-stack'.
  
++<<<<<<< HEAD
++=======
+ -F::
+ --fields=::
+ 	Specify output field - multiple keys can be specified in CSV format.
+ 	Following fields are available:
+ 	overhead, overhead_sys, overhead_us, overhead_children, sample and period.
+ 	Also it can contain any sort key(s).
+ 
+ 	By default, every sort keys not specified in -F will be appended
+ 	automatically.
+ 
++>>>>>>> 793aaaabb798 (perf report: Add --children option)
  -p::
  --parent=<regex>::
          A regex filter to identify parent. The parent is a caller of this
diff --cc tools/perf/builtin-report.c
index 899259cddfcd,f27a8aad6a3f..000000000000
--- a/tools/perf/builtin-report.c
+++ b/tools/perf/builtin-report.c
@@@ -786,33 -670,18 +796,39 @@@ repeat
  	has_br_stack = perf_header__has_feat(&session->header,
  					     HEADER_BRANCH_STACK);
  
- 	if (branch_mode == -1 && has_br_stack)
+ 	if (branch_mode == -1 && has_br_stack) {
  		sort__mode = SORT_MODE__BRANCH;
+ 		symbol_conf.cumulate_callchain = false;
+ 	}
  
 +	/* sort__mode could be NORMAL if --no-branch-stack */
 +	if (sort__mode == SORT_MODE__BRANCH) {
 +		/*
 +		 * if no sort_order is provided, then specify
 +		 * branch-mode specific order
 +		 */
 +		if (sort_order == default_sort_order)
 +			sort_order = "comm,dso_from,symbol_from,"
 +				     "dso_to,symbol_to";
 +
 +	}
  	if (report.mem_mode) {
  		if (sort__mode == SORT_MODE__BRANCH) {
  			pr_err("branch and mem mode incompatible\n");
  			goto error;
  		}
  		sort__mode = SORT_MODE__MEMORY;
++<<<<<<< HEAD
 +
 +		/*
 +		 * if no sort_order is provided, then specify
 +		 * branch-mode specific order
 +		 */
 +		if (sort_order == default_sort_order)
 +			sort_order = "local_weight,mem,sym,dso,symbol_daddr,dso_daddr,snoop,tlb,locked";
++=======
+ 		symbol_conf.cumulate_callchain = false;
++>>>>>>> 793aaaabb798 (perf report: Add --children option)
  	}
  
  	if (setup_sorting() < 0) {
* Unmerged path tools/perf/Documentation/perf-report.txt
* Unmerged path tools/perf/builtin-report.c
