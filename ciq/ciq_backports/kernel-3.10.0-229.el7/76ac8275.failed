trace, RAS: Add basic RAS trace event

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [trace] ras: Add basic RAS trace event (Rui Wang) [1085141]
Rebuild_FUZZ: 89.55%
commit-author Chen, Gong <gong.chen@linux.intel.com>
commit 76ac8275f296b49c58f684825543bf4eb85d43d0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/76ac8275.failed

To avoid confuision and conflict of usage for RAS related trace event,
add an unified RAS trace event stub.

Start a RAS subsystem menu which will be fleshed out in time, when more
features get added to it.

	Signed-off-by: Chen, Gong <gong.chen@linux.intel.com>
Link: http://lkml.kernel.org/r/1402475691-30045-2-git-send-email-gong.chen@linux.intel.com
	Signed-off-by: Borislav Petkov <bp@suse.de>
	Signed-off-by: Tony Luck <tony.luck@intel.com>
(cherry picked from commit 76ac8275f296b49c58f684825543bf4eb85d43d0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/Kconfig
#	drivers/Makefile
diff --cc drivers/Kconfig
index 9953a42809ec,4e6e66c3c8d6..000000000000
--- a/drivers/Kconfig
+++ b/drivers/Kconfig
@@@ -166,4 -168,14 +166,17 @@@ source "drivers/ipack/Kconfig
  
  source "drivers/reset/Kconfig"
  
++<<<<<<< HEAD
++=======
+ source "drivers/fmc/Kconfig"
+ 
+ source "drivers/phy/Kconfig"
+ 
+ source "drivers/powercap/Kconfig"
+ 
+ source "drivers/mcb/Kconfig"
+ 
+ source "drivers/ras/Kconfig"
+ 
++>>>>>>> 76ac8275f296 (trace, RAS: Add basic RAS trace event)
  endmenu
diff --cc drivers/Makefile
index 130abc1dfd65,65c32b1cea3d..000000000000
--- a/drivers/Makefile
+++ b/drivers/Makefile
@@@ -152,3 -155,7 +152,10 @@@ obj-$(CONFIG_IIO)		+= iio
  obj-$(CONFIG_VME_BUS)		+= vme/
  obj-$(CONFIG_IPACK_BUS)		+= ipack/
  obj-$(CONFIG_NTB)		+= ntb/
++<<<<<<< HEAD
++=======
+ obj-$(CONFIG_FMC)		+= fmc/
+ obj-$(CONFIG_POWERCAP)		+= powercap/
+ obj-$(CONFIG_MCB)		+= mcb/
+ obj-$(CONFIG_RAS)		+= ras/
++>>>>>>> 76ac8275f296 (trace, RAS: Add basic RAS trace event)
* Unmerged path drivers/Kconfig
* Unmerged path drivers/Makefile
diff --git a/drivers/edac/Kconfig b/drivers/edac/Kconfig
index 4a221b7a677d..60b057d5f244 100644
--- a/drivers/edac/Kconfig
+++ b/drivers/edac/Kconfig
@@ -72,6 +72,7 @@ config EDAC_MCE_INJ
 
 config EDAC_MM_EDAC
 	tristate "Main Memory EDAC (Error Detection And Correction) reporting"
+	select RAS
 	help
 	  Some systems are able to detect and correct errors in main
 	  memory.  EDAC can report statistics on memory error
diff --git a/drivers/edac/edac_mc.c b/drivers/edac/edac_mc.c
index a9d98cdd11f4..ef4a46bea9b8 100644
--- a/drivers/edac/edac_mc.c
+++ b/drivers/edac/edac_mc.c
@@ -33,9 +33,6 @@
 #include <asm/edac.h>
 #include "edac_core.h"
 #include "edac_module.h"
-
-#define CREATE_TRACE_POINTS
-#define TRACE_INCLUDE_PATH ../../include/ras
 #include <ras/ras_event.h>
 
 /* lock to memory controller's control array */
diff --git a/drivers/ras/Kconfig b/drivers/ras/Kconfig
new file mode 100644
index 000000000000..f9da613052c2
--- /dev/null
+++ b/drivers/ras/Kconfig
@@ -0,0 +1,2 @@
+config RAS
+	bool
diff --git a/drivers/ras/Makefile b/drivers/ras/Makefile
new file mode 100644
index 000000000000..223e806fa5bf
--- /dev/null
+++ b/drivers/ras/Makefile
@@ -0,0 +1 @@
+obj-$(CONFIG_RAS) += ras.o
diff --git a/drivers/ras/ras.c b/drivers/ras/ras.c
new file mode 100644
index 000000000000..b0c6ed1d8e77
--- /dev/null
+++ b/drivers/ras/ras.c
@@ -0,0 +1,12 @@
+/*
+ * Copyright (C) 2014 Intel Corporation
+ *
+ * Authors:
+ *	Chen, Gong <gong.chen@linux.intel.com>
+ */
+
+#define CREATE_TRACE_POINTS
+#define TRACE_INCLUDE_PATH ../../include/ras
+#include <ras/ras_event.h>
+
+EXPORT_TRACEPOINT_SYMBOL_GPL(mc_event);
