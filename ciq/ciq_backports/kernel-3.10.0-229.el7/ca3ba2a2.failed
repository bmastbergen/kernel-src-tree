x86, hyperv: Bypass the timer_irq_works() check

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [x86] hyperv: Bypass the timer_irq_works() check (Jason Wang) [1058105]
Rebuild_FUZZ: 94.38%
commit-author Jason Wang <jasowang@redhat.com>
commit ca3ba2a2f4a49a308e7d78c784d51b2332064f15
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/ca3ba2a2.failed

This patch bypass the timer_irq_works() check for hyperv guest since:

- It was guaranteed to work.
- timer_irq_works() may fail sometime due to the lpj calibration were inaccurate
  in a hyperv guest or a buggy host.

In the future, we should get the tsc frequency from hypervisor and use preset
lpj instead.

[ hpa: I would prefer to not defer things to "the future" in the future... ]

	Cc: K. Y. Srinivasan <kys@microsoft.com>
	Cc: Haiyang Zhang <haiyangz@microsoft.com>
	Cc: <stable@vger.kernel.org>
	Acked-by: K. Y. Srinivasan <kys@microsoft.com>
	Signed-off-by: Jason Wang <jasowang@redhat.com>
Link: http://lkml.kernel.org/r/1393558229-14755-1-git-send-email-jasowang@redhat.com
	Signed-off-by: H. Peter Anvin <hpa@linux.intel.com>
(cherry picked from commit ca3ba2a2f4a49a308e7d78c784d51b2332064f15)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/kernel/cpu/mshyperv.c
diff --cc arch/x86/kernel/cpu/mshyperv.c
index d15a4c4ef4dd,832d05a914ba..000000000000
--- a/arch/x86/kernel/cpu/mshyperv.c
+++ b/arch/x86/kernel/cpu/mshyperv.c
@@@ -25,6 -25,8 +25,11 @@@
  #include <asm/idle.h>
  #include <asm/irq_regs.h>
  #include <asm/i8259.h>
++<<<<<<< HEAD
++=======
+ #include <asm/apic.h>
+ #include <asm/timer.h>
++>>>>>>> ca3ba2a2f4a4 (x86, hyperv: Bypass the timer_irq_works() check)
  
  struct ms_hyperv_info ms_hyperv;
  EXPORT_SYMBOL_GPL(ms_hyperv);
* Unmerged path arch/x86/kernel/cpu/mshyperv.c
