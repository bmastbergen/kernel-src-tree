openvswitch: Fix memory leak in ovs_vport_alloc() error path

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
commit-author Christoph Jaeger <cj@linux.com>
commit 3791b3f6fb74d265c93d493d9bbf29c1e769ceae
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/3791b3f6.failed

ovs_vport_alloc() bails out without freeing the memory 'vport' points to.

Picked up by Coverity - CID 1230503.

Fixes: 5cd667b0a4 ("openvswitch: Allow each vport to have an array of 'port_id's.")
	Signed-off-by: Christoph Jaeger <cj@linux.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 3791b3f6fb74d265c93d493d9bbf29c1e769ceae)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/openvswitch/vport.c
diff --cc net/openvswitch/vport.c
index 6f65dbe13812,6d8f2ec481d9..000000000000
--- a/net/openvswitch/vport.c
+++ b/net/openvswitch/vport.c
@@@ -135,7 -137,12 +135,16 @@@ struct vport *ovs_vport_alloc(int priv_
  	vport->ops = ops;
  	INIT_HLIST_NODE(&vport->dp_hash_node);
  
++<<<<<<< HEAD
 +	vport->percpu_stats = alloc_percpu(struct pcpu_tstats);
++=======
+ 	if (ovs_vport_set_upcall_portids(vport, parms->upcall_portids)) {
+ 		kfree(vport);
+ 		return ERR_PTR(-EINVAL);
+ 	}
+ 
+ 	vport->percpu_stats = netdev_alloc_pcpu_stats(struct pcpu_sw_netstats);
++>>>>>>> 3791b3f6fb74 (openvswitch: Fix memory leak in ovs_vport_alloc() error path)
  	if (!vport->percpu_stats) {
  		kfree(vport);
  		return ERR_PTR(-ENOMEM);
* Unmerged path net/openvswitch/vport.c
