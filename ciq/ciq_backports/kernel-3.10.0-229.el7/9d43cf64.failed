NVMe: Make admin timeout a module parameter

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
commit-author Keith Busch <keith.busch@intel.com>
commit 9d43cf646eab948db81913379dacb1dcecacb1eb
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/9d43cf64.failed

	Signed-off-by: Keith Busch <keith.busch@intel.com>
[made admin_timeout static]
	Signed-off-by: Matthew Wilcox <matthew.r.wilcox@intel.com>
(cherry picked from commit 9d43cf646eab948db81913379dacb1dcecacb1eb)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/block/nvme-core.c
diff --cc drivers/block/nvme-core.c
index 4f8521eb298a,12c57eb7c915..000000000000
--- a/drivers/block/nvme-core.c
+++ b/drivers/block/nvme-core.c
@@@ -40,10 -42,17 +40,24 @@@
  #include <scsi/sg.h>
  #include <asm-generic/io-64-nonatomic-lo-hi.h>
  
++<<<<<<< HEAD
 +#define NVME_Q_DEPTH 1024
 +#define SQ_SIZE(depth)		(depth * sizeof(struct nvme_command))
 +#define CQ_SIZE(depth)		(depth * sizeof(struct nvme_completion))
 +#define ADMIN_TIMEOUT	(60 * HZ)
++=======
+ #include <trace/events/block.h>
+ 
+ #define NVME_Q_DEPTH		1024
+ #define SQ_SIZE(depth)		(depth * sizeof(struct nvme_command))
+ #define CQ_SIZE(depth)		(depth * sizeof(struct nvme_completion))
+ #define ADMIN_TIMEOUT		(admin_timeout * HZ)
+ #define IOD_TIMEOUT		(retry_time * HZ)
+ 
+ static unsigned char admin_timeout = 60;
+ module_param(admin_timeout, byte, 0644);
+ MODULE_PARM_DESC(admin_timeout, "timeout in seconds for admin commands");
++>>>>>>> 9d43cf646eab (NVMe: Make admin timeout a module parameter)
  
  unsigned char io_timeout = 30;
  module_param(io_timeout, byte, 0644);
* Unmerged path drivers/block/nvme-core.c
