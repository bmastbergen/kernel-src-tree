drm/i915: drop WaSetupGtModeTdRowDispatch:snb

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [drm] i915: drop WaSetupGtModeTdRowDispatch:snb (Rob Clark) [1173317]
Rebuild_FUZZ: 95.35%
commit-author Daniel Vetter <daniel.vetter@ffwll.ch>
commit 2208d655a91f9879bd9a39ff9df05dd668b3512c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/2208d655.failed

This reverts the regressing

commit 6547fbdbfff62c99e4f7b4f985ff8b3454f33b0f
Author: Daniel Vetter <daniel.vetter@ffwll.ch>
Date:   Fri Dec 14 23:38:29 2012 +0100

    drm/i915: Implement WaSetupGtModeTdRowDispatch

that causes GPU hangs immediately on boot.

	Reported-by: Leo Wolf <jclw@ymail.com>
Bugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=79996
	Cc: stable@vger.kernel.org (v3.8+)
	Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>
[Jani: amended the commit message slightly.]
	Signed-off-by: Jani Nikula <jani.nikula@intel.com>
(cherry picked from commit 2208d655a91f9879bd9a39ff9df05dd668b3512c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/intel_pm.c
diff --cc drivers/gpu/drm/i915/intel_pm.c
index 26c2ea3e985c,ad2fd605f76b..000000000000
--- a/drivers/gpu/drm/i915/intel_pm.c
+++ b/drivers/gpu/drm/i915/intel_pm.c
@@@ -4813,14 -5469,21 +4813,32 @@@ static void gen6_init_clock_gating(stru
  	I915_WRITE(_3D_CHICKEN,
  		   _MASKED_BIT_ENABLE(_3D_CHICKEN_HIZ_PLANE_DISABLE_MSAA_4X_SNB));
  
++<<<<<<< HEAD
 +	/* WaSetupGtModeTdRowDispatch:snb */
 +	if (IS_SNB_GT1(dev))
 +		I915_WRITE(GEN6_GT_MODE,
 +			   _MASKED_BIT_ENABLE(GEN6_TD_FOUR_ROW_DISPATCH_DISABLE));
 +
 +	I915_WRITE(WM3_LP_ILK, 0);
 +	I915_WRITE(WM2_LP_ILK, 0);
 +	I915_WRITE(WM1_LP_ILK, 0);
++=======
+ 	/* WaDisable_RenderCache_OperationalFlush:snb */
+ 	I915_WRITE(CACHE_MODE_0, _MASKED_BIT_DISABLE(RC_OP_FLUSH_ENABLE));
+ 
+ 	/*
+ 	 * BSpec recoomends 8x4 when MSAA is used,
+ 	 * however in practice 16x4 seems fastest.
+ 	 *
+ 	 * Note that PS/WM thread counts depend on the WIZ hashing
+ 	 * disable bit, which we don't touch here, but it's good
+ 	 * to keep in mind (see 3DSTATE_PS and 3DSTATE_WM).
+ 	 */
+ 	I915_WRITE(GEN6_GT_MODE,
+ 		   GEN6_WIZ_HASHING_MASK | GEN6_WIZ_HASHING_16x4);
+ 
+ 	ilk_init_lp_watermarks(dev);
++>>>>>>> 2208d655a91f (drm/i915: drop WaSetupGtModeTdRowDispatch:snb)
  
  	I915_WRITE(CACHE_MODE_0,
  		   _MASKED_BIT_DISABLE(CM0_STC_EVICT_DISABLE_LRA_SNB));
* Unmerged path drivers/gpu/drm/i915/intel_pm.c
