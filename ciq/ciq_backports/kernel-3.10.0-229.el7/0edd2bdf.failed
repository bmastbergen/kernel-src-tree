ixgbe: Fix up some ethtool results when adapter is removed

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
commit-author Mark Rustad <mark.d.rustad@intel.com>
commit 0edd2bdf63b10d0b6715f2fc4a9e598d6b8ca58f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/0edd2bdf.failed

Some ethtool tests returned apparently good results when the
adapter was in a removed state. Fix that by checking for removal.
This also fixes two paths that could return uninitialized memory
in data[4].

	Signed-off-by: Mark Rustad <mark.d.rustad@intel.com>
	Tested-by: Phil Schmitt <phillip.j.schmitt@intel.com>
	Signed-off-by: Aaron Brown <aaron.f.brown@intel.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 0edd2bdf63b10d0b6715f2fc4a9e598d6b8ca58f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/intel/ixgbe/ixgbe_ethtool.c
diff --cc drivers/net/ethernet/intel/ixgbe/ixgbe_ethtool.c
index 0e1b973659b0,f2d35c04159c..000000000000
--- a/drivers/net/ethernet/intel/ixgbe/ixgbe_ethtool.c
+++ b/drivers/net/ethernet/intel/ixgbe/ixgbe_ethtool.c
@@@ -1884,6 -1968,16 +1889,19 @@@ static void ixgbe_diag_test(struct net_
  	struct ixgbe_adapter *adapter = netdev_priv(netdev);
  	bool if_running = netif_running(netdev);
  
++<<<<<<< HEAD
++=======
+ 	if (ixgbe_removed(adapter->hw.hw_addr)) {
+ 		e_err(hw, "Adapter removed - test blocked\n");
+ 		data[0] = 1;
+ 		data[1] = 1;
+ 		data[2] = 1;
+ 		data[3] = 1;
+ 		data[4] = 1;
+ 		eth_test->flags |= ETH_TEST_FL_FAILED;
+ 		return;
+ 	}
++>>>>>>> 0edd2bdf63b1 (ixgbe: Fix up some ethtool results when adapter is removed)
  	set_bit(__IXGBE_TESTING, &adapter->state);
  	if (eth_test->flags == ETH_TEST_FL_OFFLINE) {
  		struct ixgbe_hw *hw = &adapter->hw;
* Unmerged path drivers/net/ethernet/intel/ixgbe/ixgbe_ethtool.c
