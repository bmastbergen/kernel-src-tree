PCI: Log IDE resource quirk in dmesg

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [pci] Log IDE resource quirk in dmesg (Myron Stowe) [1110896]
Rebuild_FUZZ: 92.54%
commit-author Bjorn Helgaas <bhelgaas@google.com>
commit 075eb9e35578c23ee2414f87d97d2e5065aa1bc1
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/075eb9e3.failed

Make a note in dmesg when we overwrite legacy IDE BAR info.  We previously
logged something like this:

  pci 0000:00:1f.1: reg 0x10: [io  0x0000-0x0007]

and then silently overwrote the resource.  There's an example in the
bugzilla below.  This doesn't fix the bugzilla; it just makes what's going
on more obvious.

No functional change; merely adds some dev_info() calls.

Link: https://bugzilla.kernel.org/show_bug.cgi?id=48451
	Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
(cherry picked from commit 075eb9e35578c23ee2414f87d97d2e5065aa1bc1)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/pci/probe.c
diff --cc drivers/pci/probe.c
index 650e4c3be09d,93dad114eaef..000000000000
--- a/drivers/pci/probe.c
+++ b/drivers/pci/probe.c
@@@ -1110,24 -1139,32 +1110,48 @@@ int pci_setup_device(struct pci_dev *de
  				region.end = 0x1F7;
  				res = &dev->resource[0];
  				res->flags = LEGACY_IO_RESOURCE;
++<<<<<<< HEAD
 +				pcibios_bus_to_resource(dev, res, &region);
++=======
+ 				pcibios_bus_to_resource(dev->bus, res, &region);
+ 				dev_info(&dev->dev, "legacy IDE quirk: reg 0x10: %pR\n",
+ 					 res);
++>>>>>>> 075eb9e35578 (PCI: Log IDE resource quirk in dmesg)
  				region.start = 0x3F6;
  				region.end = 0x3F6;
  				res = &dev->resource[1];
  				res->flags = LEGACY_IO_RESOURCE;
++<<<<<<< HEAD
 +				pcibios_bus_to_resource(dev, res, &region);
++=======
+ 				pcibios_bus_to_resource(dev->bus, res, &region);
+ 				dev_info(&dev->dev, "legacy IDE quirk: reg 0x14: %pR\n",
+ 					 res);
++>>>>>>> 075eb9e35578 (PCI: Log IDE resource quirk in dmesg)
  			}
  			if ((progif & 4) == 0) {
  				region.start = 0x170;
  				region.end = 0x177;
  				res = &dev->resource[2];
  				res->flags = LEGACY_IO_RESOURCE;
++<<<<<<< HEAD
 +				pcibios_bus_to_resource(dev, res, &region);
++=======
+ 				pcibios_bus_to_resource(dev->bus, res, &region);
+ 				dev_info(&dev->dev, "legacy IDE quirk: reg 0x18: %pR\n",
+ 					 res);
++>>>>>>> 075eb9e35578 (PCI: Log IDE resource quirk in dmesg)
  				region.start = 0x376;
  				region.end = 0x376;
  				res = &dev->resource[3];
  				res->flags = LEGACY_IO_RESOURCE;
++<<<<<<< HEAD
 +				pcibios_bus_to_resource(dev, res, &region);
++=======
+ 				pcibios_bus_to_resource(dev->bus, res, &region);
+ 				dev_info(&dev->dev, "legacy IDE quirk: reg 0x1c: %pR\n",
+ 					 res);
++>>>>>>> 075eb9e35578 (PCI: Log IDE resource quirk in dmesg)
  			}
  		}
  		break;
* Unmerged path drivers/pci/probe.c
