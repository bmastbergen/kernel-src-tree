qlcnic: Fix TSS/RSS validation for 83xx/84xx series adapter.

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [ethernet] qlcnic: Fix TSS/RSS validation for 83xx/84xx series adapter (Chad Dupuis) [1089352]
Rebuild_FUZZ: 99.16%
commit-author Himanshu Madhani <himanshu.madhani@qlogic.com>
commit b17a44d8b86f48e34011b884a934231ae2928d66
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/b17a44d8.failed

o Current code was not allowing the user to configure more
  than one Tx ring using ethtool for 83xx/84xx adapter.
  This regression was introduced by commit id
  18afc102fdcb95d6c7d57f2967a06f2f8fe3ba4c ("qlcnic: Enable
  multiple Tx queue support for 83xx/84xx Series adapter.")

	Signed-off-by: Himanshu Madhani <himanshu.madhani@qlogic.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit b17a44d8b86f48e34011b884a934231ae2928d66)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/qlogic/qlcnic/qlcnic_ethtool.c
diff --cc drivers/net/ethernet/qlogic/qlcnic/qlcnic_ethtool.c
index b37ff7828969,e3be2760665c..000000000000
--- a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_ethtool.c
+++ b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_ethtool.c
@@@ -664,6 -664,33 +664,36 @@@ qlcnic_set_ringparam(struct net_device 
  	return qlcnic_reset_context(adapter);
  }
  
++<<<<<<< HEAD
++=======
+ static int qlcnic_validate_ring_count(struct qlcnic_adapter *adapter,
+ 				      u8 rx_ring, u8 tx_ring)
+ {
+ 	if (rx_ring == 0 || tx_ring == 0)
+ 		return -EINVAL;
+ 
+ 	if (rx_ring != 0) {
+ 		if (rx_ring > adapter->max_sds_rings) {
+ 			netdev_err(adapter->netdev,
+ 				   "Invalid ring count, SDS ring count %d should not be greater than max %d driver sds rings.\n",
+ 				   rx_ring, adapter->max_sds_rings);
+ 			return -EINVAL;
+ 		}
+ 	}
+ 
+ 	 if (tx_ring != 0) {
+ 		if (tx_ring > adapter->max_tx_rings) {
+ 			netdev_err(adapter->netdev,
+ 				   "Invalid ring count, Tx ring count %d should not be greater than max %d driver Tx rings.\n",
+ 				   tx_ring, adapter->max_tx_rings);
+ 			return -EINVAL;
+ 		}
+ 	}
+ 
+ 	return 0;
+ }
+ 
++>>>>>>> b17a44d8b86f (qlcnic: Fix TSS/RSS validation for 83xx/84xx series adapter.)
  static void qlcnic_get_channels(struct net_device *dev,
  		struct ethtool_channels *channel)
  {
* Unmerged path drivers/net/ethernet/qlogic/qlcnic/qlcnic_ethtool.c
