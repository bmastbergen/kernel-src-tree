rtnetlink: fix VF info size

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
commit-author Jiri Benc <jbenc@redhat.com>
commit 945a36761fd7877660f630bbdeb4ff9ff80d1935
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/945a3676.failed

Commit 1d8faf48c74b8 ("net/core: Add VF link state control") added new
attribute to IFLA_VF_INFO group in rtnl_fill_ifinfo but did not adjust size
of the allocated memory in if_nlmsg_size/rtnl_vfinfo_size. As the result, we
may trigger warnings in rtnl_getlink and similar functions when many VF
links are enabled, as the information does not fit into the allocated skb.

Fixes: 1d8faf48c74b8 ("net/core: Add VF link state control")
	Reported-by: Yulong Pei <ypei@redhat.com>
	Signed-off-by: Jiri Benc <jbenc@redhat.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 945a36761fd7877660f630bbdeb4ff9ff80d1935)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/core/rtnetlink.c
diff --cc net/core/rtnetlink.c
index 58cc593f9f44,f0493e3b7471..000000000000
--- a/net/core/rtnetlink.c
+++ b/net/core/rtnetlink.c
@@@ -707,8 -803,9 +707,14 @@@ static inline int rtnl_vfinfo_size(cons
  		size += num_vfs *
  			(nla_total_size(sizeof(struct ifla_vf_mac)) +
  			 nla_total_size(sizeof(struct ifla_vf_vlan)) +
++<<<<<<< HEAD
 +			 nla_total_size(sizeof(struct ifla_vf_tx_rate)) +
 +			 nla_total_size(sizeof(struct ifla_vf_spoofchk)));
++=======
+ 			 nla_total_size(sizeof(struct ifla_vf_spoofchk)) +
+ 			 nla_total_size(sizeof(struct ifla_vf_rate)) +
+ 			 nla_total_size(sizeof(struct ifla_vf_link_state)));
++>>>>>>> 945a36761fd7 (rtnetlink: fix VF info size)
  		return size;
  	} else
  		return 0;
* Unmerged path net/core/rtnetlink.c
