perf probe: Use dwarf_getcfi_elf() instead of dwarf_getcfi()

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [tools] perf/probe: Use dwarf_getcfi_elf() instead of dwarf_getcfi() (Jiri Olsa) [1134356]
Rebuild_FUZZ: 98.33%
commit-author Namhyung Kim <namhyung@kernel.org>
commit 03d89412981a7681971bc77edba1669595763030
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/03d89412.failed

The dwarf_getcfi() only checks .debug_frame section for CFI, but as
most binaries only have .eh_frame it'd return NULL and it makes
some variables inaccessible.

Using dwarf_getcfi_elf (along with dwarf_getelf()) allows to show and
add probe to more variables.

	Signed-off-by: Namhyung Kim <namhyung@kernel.org>
	Acked-by: Masami Hiramatsu <masami.hiramatsu.pt@hitachi.com>
	Cc: Masami Hiramatsu <masami.hiramatsu.pt@hitachi.com>
Link: http://lkml.kernel.org/r/1396854348-9296-1-git-send-email-namhyung@kernel.org
	Signed-off-by: Jiri Olsa <jolsa@redhat.com>
(cherry picked from commit 03d89412981a7681971bc77edba1669595763030)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/util/probe-finder.c
diff --cc tools/perf/util/probe-finder.c
index c1f4fab66048,562762117639..000000000000
--- a/tools/perf/util/probe-finder.c
+++ b/tools/perf/util/probe-finder.c
@@@ -1036,7 -985,7 +1036,11 @@@ static int debuginfo__find_probes(struc
  
  #if _ELFUTILS_PREREQ(0, 142)
  	/* Get the call frame information from this dwarf */
++<<<<<<< HEAD
 +	pf->cfi = dwarf_getcfi(self->dbg);
++=======
+ 	pf->cfi = dwarf_getcfi_elf(dwarf_getelf(dbg->dbg));
++>>>>>>> 03d89412981a (perf probe: Use dwarf_getcfi_elf() instead of dwarf_getcfi())
  #endif
  
  	off = 0;
* Unmerged path tools/perf/util/probe-finder.c
