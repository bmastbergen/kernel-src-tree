net/mlx4_en: IRQ affinity hint is not cleared on port down

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [ethernet] mlx4: IRQ affinity hint is not cleared on port down (Amir Vadai) [1107617 1107618 1107619 1107620]
Rebuild_FUZZ: 93.58%
commit-author Amir Vadai <amirv@mellanox.com>
commit bb273617a65b9ed75f8cf9417206cbfcfb41fc48
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/bb273617.failed

Need to remove affinity hint at mlx4_en_deactivate_cq() and not at
mlx4_en_destroy_cq() - since affinity_mask might be free'd while still
being used by procfs.

	Signed-off-by: Amir Vadai <amirv@mellanox.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit bb273617a65b9ed75f8cf9417206cbfcfb41fc48)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx4/en_cq.c
diff --cc drivers/net/ethernet/mellanox/mlx4/en_cq.c
index ea30fab1d290,14c00048bbec..000000000000
--- a/drivers/net/ethernet/mellanox/mlx4/en_cq.c
+++ b/drivers/net/ethernet/mellanox/mlx4/en_cq.c
@@@ -183,8 -190,9 +183,12 @@@ void mlx4_en_destroy_cq(struct mlx4_en_
  
  	mlx4_en_unmap_buffer(&cq->wqres.buf);
  	mlx4_free_hwq_res(mdev->dev, &cq->wqres, cq->buf_size);
++<<<<<<< HEAD
 +	if (priv->mdev->dev->caps.comp_pool && cq->vector)
++=======
+ 	if (priv->mdev->dev->caps.comp_pool && cq->vector) {
++>>>>>>> bb273617a65b (net/mlx4_en: IRQ affinity hint is not cleared on port down)
  		mlx4_release_eq(priv->mdev->dev, cq->vector);
 -	}
  	cq->vector = 0;
  	cq->buf_size = 0;
  	cq->buf = NULL;
* Unmerged path drivers/net/ethernet/mellanox/mlx4/en_cq.c
