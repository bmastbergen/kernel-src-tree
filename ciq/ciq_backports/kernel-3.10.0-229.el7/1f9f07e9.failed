blk-mq: fix leak of hctx->ctx_map

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
commit-author Ming Lei <tom.leiming@gmail.com>
commit 1f9f07e917f43af420f8cb3afc2b3fa703cea6e9
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/1f9f07e9.failed

hctx->ctx_map should have been freed inside blk_mq_free_queue().

	Signed-off-by: Ming Lei <tom.leiming@gmail.com>
	Signed-off-by: Jens Axboe <axboe@fb.com>
(cherry picked from commit 1f9f07e917f43af420f8cb3afc2b3fa703cea6e9)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	block/blk-mq.c
diff --cc block/blk-mq.c
index a6fc109357ae,dad22a9abe49..000000000000
--- a/block/blk-mq.c
+++ b/block/blk-mq.c
@@@ -1410,10 -1841,12 +1410,14 @@@ void blk_mq_free_queue(struct request_q
  	struct blk_mq_hw_ctx *hctx;
  	int i;
  
 -	blk_mq_del_queue_tag_set(q);
 -
  	queue_for_each_hw_ctx(q, hctx, i) {
 -		blk_mq_tag_idle(hctx);
 +		kfree(hctx->ctx_map);
  		kfree(hctx->ctxs);
++<<<<<<< HEAD
 +		blk_mq_free_rq_map(hctx);
++=======
+ 		blk_mq_free_bitmap(&hctx->ctx_map);
++>>>>>>> 1f9f07e917f4 (blk-mq: fix leak of hctx->ctx_map)
  		blk_mq_unregister_cpu_notifier(&hctx->cpu_notifier);
  		if (q->mq_ops->exit_hctx)
  			q->mq_ops->exit_hctx(hctx, i);
* Unmerged path block/blk-mq.c
