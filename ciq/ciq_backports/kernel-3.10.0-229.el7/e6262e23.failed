tools lib traceevent: Use global QUIET_LINK build output

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [tools] lib/traceevent: Use global QUIET_LINK build output (Jiri Olsa) [1133083]
Rebuild_FUZZ: 92.45%
commit-author Jiri Olsa <jolsa@redhat.com>
commit e6262e23134f575ae07ecc25bb69ddb63caebc95
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/e6262e23.failed

Using global QUIET_LINK build output variable and getting rid of local
print_static_lib_build, print_plugin_build and print_shared_lib_compile.

We no longer distinguish between shared and static library in the build
message. It's differenced by the built file suffix, like:

  $ make
    ...
    LINK     libtraceevent.a
    LINK     libtraceevent.so

	Signed-off-by: Jiri Olsa <jolsa@redhat.com>
	Cc: Corey Ashford <cjashfor@linux.vnet.ibm.com>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Frederic Weisbecker <fweisbec@gmail.com>
	Cc: Ingo Molnar <mingo@kernel.org>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Paul Mackerras <paulus@samba.org>
	Cc: Peter Zijlstra <a.p.zijlstra@chello.nl>
	Cc: Steven Rostedt <rostedt@goodmis.org>
Link: http://lkml.kernel.org/r/1387460527-15030-7-git-send-email-jolsa@redhat.com
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit e6262e23134f575ae07ecc25bb69ddb63caebc95)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/lib/traceevent/Makefile
diff --cc tools/lib/traceevent/Makefile
index cef7f77bcdc9,51be8ab76f9f..000000000000
--- a/tools/lib/traceevent/Makefile
+++ b/tools/lib/traceevent/Makefile
@@@ -125,33 -152,12 +125,40 @@@ override CFLAGS += $(udis86-flags) -D_G
  
  ifeq ($(VERBOSE),1)
    Q =
++<<<<<<< HEAD
 +  print_compile =
 +  print_app_build =
 +  print_fpic_compile =
 +  print_shared_lib_compile =
 +  print_plugin_obj_compile =
 +  print_plugin_build =
 +  print_install =
 +else
 +  Q = @
 +  print_compile =		echo '  CC                 '$(OBJ);
 +  print_app_build =		echo '  BUILD              '$(OBJ);
 +  print_fpic_compile =		echo '  CC FPIC            '$(OBJ);
 +  print_shared_lib_compile =	echo '  BUILD SHARED LIB   '$(OBJ);
 +  print_plugin_obj_compile =	echo '  CC PLUGIN OBJ      '$(OBJ);
 +  print_plugin_build =		echo '  CC PLUGI           '$(OBJ);
 +  print_static_lib_build =	echo '  BUILD STATIC LIB   '$(OBJ);
 +  print_install =		echo '  INSTALL     '$1'	to	$(DESTDIR_SQ)$2';
++=======
+   print_install =
+ else
+   Q = @
+   print_install =		echo '  INSTALL  '$1;
++>>>>>>> e6262e23134f (tools lib traceevent: Use global QUIET_LINK build output)
  endif
  
 +do_fpic_compile =					\
 +	($(print_fpic_compile)				\
 +	$(CC) -c $(CFLAGS) $(EXT) -fPIC $< -o $@)
 +
 +do_app_build =						\
 +	($(print_app_build)				\
 +	$(CC) $^ -rdynamic -o $@ $(CONFIG_LIBS) $(LIBS))
 +
  do_compile_shared_library =			\
  	($(print_shared_lib_compile)		\
  	$(CC) --shared $^ -o $@)
@@@ -199,13 -211,21 +206,23 @@@ all: all_cm
  all_cmd: $(CMD_TARGETS)
  
  libtraceevent.so: $(PEVENT_LIB_OBJS)
- 	$(Q)$(do_compile_shared_library)
+ 	$(QUIET_LINK)$(CC) --shared $^ -o $@
  
  libtraceevent.a: $(PEVENT_LIB_OBJS)
- 	$(Q)$(do_build_static_lib)
+ 	$(QUIET_LINK)$(RM) $@; $(AR) rcs $@ $^
  
 -plugins: $(PLUGINS)
 -
  $(PEVENT_LIB_OBJS): %.o: $(src)/%.c TRACEEVENT-CFLAGS
++<<<<<<< HEAD
 +	$(Q)$(do_fpic_compile)
++=======
+ 	$(QUIET_CC_FPIC)$(CC) -c $(CFLAGS) $(EXT) -fPIC $< -o $@
+ 
+ $(PLUGIN_OBJS): %.o : $(src)/%.c
+ 	$(QUIET_CC_FPIC)$(CC) -c $(CFLAGS) -fPIC -o $@ $<
+ 
+ $(PLUGINS): %.so: %.o
+ 	$(QUIET_LINK)$(CC) $(CFLAGS) -shared -nostartfiles -o $@ $<
++>>>>>>> e6262e23134f (tools lib traceevent: Use global QUIET_LINK build output)
  
  define make_version.h
  	(echo '/* This file is automatically generated. Do not modify. */';		\
* Unmerged path tools/lib/traceevent/Makefile
