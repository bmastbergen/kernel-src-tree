tools lib traceevent: Add plugin build support

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [tools] lib/traceevent: Add plugin build support (Jiri Olsa) [1133083]
Rebuild_FUZZ: 90.70%
commit-author Jiri Olsa <jolsa@redhat.com>
commit e0e96d03f004e8953a731053b61e275f276fff01
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/e0e96d03.failed

Backporting missing pieces of plugin building infrastructure:

  - Adding Makefile 'plugins' target to build all
    defined plugins

  - Adding Makefile 'install_plugins' target as 'install_lib'
    target dependency

  - Link plugin objects with shared object building

Backported from Steven Rostedt's trace-cmd repo (HEAD 0f2c2fb):
git://git.kernel.org/pub/scm/linux/kernel/git/rostedt/trace-cmd.git

Plugins are by default installed into following locations:

  '$(HOME)/.traceevent/plugins'
     - If we are installing under $(HOME)

  '$(prefix)/lib/traceevent/plugins'
     - Otherwise

This path is propagated to the plugin object as a plugins search path.

	Signed-off-by: Jiri Olsa <jolsa@redhat.com>
	Cc: Corey Ashford <cjashfor@linux.vnet.ibm.com>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Frederic Weisbecker <fweisbec@gmail.com>
	Cc: Ingo Molnar <mingo@elte.hu>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Paul Mackerras <paulus@samba.org>
	Cc: Peter Zijlstra <a.p.zijlstra@chello.nl>
	Cc: Steven Rostedt <rostedt@goodmis.org>
Link: http://lkml.kernel.org/r/1386076182-14484-4-git-send-email-jolsa@redhat.com
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit e0e96d03f004e8953a731053b61e275f276fff01)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/lib/traceevent/Makefile
diff --cc tools/lib/traceevent/Makefile
index cef7f77bcdc9,15267988f6b6..000000000000
--- a/tools/lib/traceevent/Makefile
+++ b/tools/lib/traceevent/Makefile
@@@ -134,14 -159,14 +159,25 @@@ ifeq ($(VERBOSE),1
    print_install =
  else
    Q = @
++<<<<<<< HEAD
 +  print_compile =		echo '  CC                 '$(OBJ);
 +  print_app_build =		echo '  BUILD              '$(OBJ);
 +  print_fpic_compile =		echo '  CC FPIC            '$(OBJ);
 +  print_shared_lib_compile =	echo '  BUILD SHARED LIB   '$(OBJ);
 +  print_plugin_obj_compile =	echo '  CC PLUGIN OBJ      '$(OBJ);
 +  print_plugin_build =		echo '  CC PLUGI           '$(OBJ);
 +  print_static_lib_build =	echo '  BUILD STATIC LIB   '$(OBJ);
 +  print_install =		echo '  INSTALL     '$1'	to	$(DESTDIR_SQ)$2';
++=======
+   print_compile =		echo '  CC       '$(OBJ);
+   print_app_build =		echo '  BUILD    '$(OBJ);
+   print_fpic_compile =		echo '  CC FPIC  '$(OBJ);
+   print_shared_lib_compile =	echo '  BUILD    SHARED LIB '$(OBJ);
+   print_plugin_obj_compile =	echo '  CC FPIC  '$(OBJ);
+   print_plugin_build =		echo '  BUILD    PLUGIN '$(OBJ);
+   print_static_lib_build =	echo '  BUILD    STATIC LIB '$(OBJ);
+   print_install =		echo '  INSTALL  '$1'	to	$(DESTDIR_SQ)$2';
++>>>>>>> e0e96d03f004 (tools lib traceevent: Add plugin build support)
  endif
  
  do_fpic_compile =					\
* Unmerged path tools/lib/traceevent/Makefile
