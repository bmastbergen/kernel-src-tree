gre: call skb_gro_checksum_simple_validate

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
commit-author Tom Herbert <therbert@google.com>
commit 758f75d1ffa9ef482ae095f40087cf217e1f41b0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/758f75d1.failed

	Signed-off-by: Tom Herbert <therbert@google.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 758f75d1ffa9ef482ae095f40087cf217e1f41b0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ipv4/gre_offload.c
diff --cc net/ipv4/gre_offload.c
index 24deb3928b9e,d1bd16937d93..000000000000
--- a/net/ipv4/gre_offload.c
+++ b/net/ipv4/gre_offload.c
@@@ -119,26 -119,6 +119,29 @@@ out
  	return segs;
  }
  
++<<<<<<< HEAD
 +/* Compute the whole skb csum in s/w and store it, then verify GRO csum
 + * starting from gro_offset.
 + */
 +static __sum16 gro_skb_checksum(struct sk_buff *skb)
 +{
 +	__sum16 sum;
 +
 +	skb->csum = skb_checksum(skb, 0, skb->len, 0);
 +	NAPI_GRO_CB(skb)->csum = csum_sub(skb->csum,
 +		csum_partial(skb->data, skb_gro_offset(skb), 0));
 +	sum = csum_fold(NAPI_GRO_CB(skb)->csum);
 +	if (unlikely(skb->ip_summed == CHECKSUM_COMPLETE)) {
 +		if (unlikely(!sum))
 +			netdev_rx_csum_fault(skb->dev);
 +	} else
 +		skb->ip_summed = CHECKSUM_COMPLETE;
 +
 +	return sum;
 +}
 +
++=======
++>>>>>>> 758f75d1ffa9 (gre: call skb_gro_checksum_simple_validate)
  static struct sk_buff **gre_gro_receive(struct sk_buff **head,
  					struct sk_buff *skb)
  {
* Unmerged path net/ipv4/gre_offload.c
