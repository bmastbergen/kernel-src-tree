perf tools: Fix bison OUTPUT directories dependency

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [tools] perf: Fix bison OUTPUT directories dependency (Jiri Olsa) [1134356]
Rebuild_FUZZ: 93.75%
commit-author Jiri Olsa <jolsa@redhat.com>
commit da237ed07c5144b0330a38b9b68be167231255d0
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/da237ed0.failed

The bison and flex C objects don't have dependency for creating output
directories.

This could lead to build failure if the one of those objects is picked
up by make to be build as the first one (reported by Arnaldo).

Also following make fails:
  $ rm -rf /tmp/krava; mkdir /tmp/krava; make O=/tmp/krava util/pmu-bison.o
  BUILD:   Doing 'make -j4' parallel build
  [ SNIP ]
  BISON    /tmp/krava/util/pmu-bison.c
  FLAGS:   * new build flags or prefix
bison: /tmp/krava/util/pmu-bison.output: cannot open: No such file or directory
make[1]: *** [/tmp/krava/util/pmu-bison.c] Error 1
make[1]: *** Waiting for unfinished jobs....
make: *** [util/pmu-bison.o] Error 2

Adding bison objects dependency for output directories (flex objects
depends on bisons').

This fixies the make_util_pmu_bison_o_O make test.

	Reported-by: Arnaldo Carvalho de Melo <acme@redhat.com>
	Signed-off-by: Jiri Olsa <jolsa@redhat.com>
	Cc: Corey Ashford <cjashfor@linux.vnet.ibm.com>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Frederic Weisbecker <fweisbec@gmail.com>
	Cc: Ingo Molnar <mingo@elte.hu>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Paul Mackerras <paulus@samba.org>
	Cc: Peter Zijlstra <a.p.zijlstra@chello.nl>
Link: http://lkml.kernel.org/r/1392805300-14610-3-git-send-email-jolsa@redhat.com
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit da237ed07c5144b0330a38b9b68be167231255d0)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/Makefile.perf
diff --cc tools/perf/Makefile.perf
index dbeeebbaa04f,5fedd6946f32..000000000000
--- a/tools/perf/Makefile.perf
+++ b/tools/perf/Makefile.perf
@@@ -686,10 -710,17 +686,22 @@@ $(patsubst perf-%,%.o,$(PROGRAMS)): $(L
  
  # we compile into subdirectories. if the target directory is not the source directory, they might not exists. So
  # we depend the various files onto their directories.
++<<<<<<< HEAD
 +DIRECTORY_DEPS = $(LIB_OBJS) $(BUILTIN_OBJS) $(OUTPUT)PERF-VERSION-FILE $(OUTPUT)common-cmds.h
 +$(DIRECTORY_DEPS): | $(sort $(dir $(DIRECTORY_DEPS)))
++=======
+ DIRECTORY_DEPS = $(LIB_OBJS) $(BUILTIN_OBJS) $(GTK_OBJS)
+ DIRECTORY_DEPS += $(OUTPUT)PERF-VERSION-FILE $(OUTPUT)common-cmds.h
+ # no need to add flex objects, because they depend on bison ones
+ DIRECTORY_DEPS += $(OUTPUT)util/parse-events-bison.c
+ DIRECTORY_DEPS += $(OUTPUT)util/pmu-bison.c
+ 
+ OUTPUT_DIRECTORIES := $(sort $(dir $(DIRECTORY_DEPS)))
+ 
+ $(DIRECTORY_DEPS): | $(OUTPUT_DIRECTORIES)
++>>>>>>> da237ed07c51 (perf tools: Fix bison OUTPUT directories dependency)
  # In the second step, we make a rule to actually create these directories
- $(sort $(dir $(DIRECTORY_DEPS))):
+ $(OUTPUT_DIRECTORIES):
  	$(QUIET_MKDIR)$(MKDIR) -p $@ 2>/dev/null
  
  $(LIB_FILE): $(LIB_OBJS)
* Unmerged path tools/perf/Makefile.perf
