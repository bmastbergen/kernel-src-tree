perf callchain: Separate libunwind code to special object

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [tools] perf/callchain: Separate libunwind code to special object (Jiri Olsa) [1134356]
Rebuild_FUZZ: 98.25%
commit-author Jiri Olsa <jolsa@redhat.com>
commit 436aa749bb193385f6a3b741ddc6bfba61770a6e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/436aa749.failed

We are going to add libdw library support to do dwarf post unwind.

Making the code ready by moving libunwind dwarf post unwind stuff into
separate object.

	Signed-off-by: Jiri Olsa <jolsa@redhat.com>
	Acked-by: Jean Pihet <jean.pihet@linaro.org>
	Cc: Corey Ashford <cjashfor@linux.vnet.ibm.com>
	Cc: David Ahern <dsahern@gmail.com>
	Cc: Frederic Weisbecker <fweisbec@gmail.com>
	Cc: Ingo Molnar <mingo@kernel.org>
	Cc: Jean Pihet <jean.pihet@linaro.org>
	Cc: Namhyung Kim <namhyung@kernel.org>
	Cc: Paul Mackerras <paulus@samba.org>
	Cc: Peter Zijlstra <a.p.zijlstra@chello.nl>
Link: http://lkml.kernel.org/r/1389098853-14466-10-git-send-email-jolsa@redhat.com
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 436aa749bb193385f6a3b741ddc6bfba61770a6e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/arch/arm/Makefile
#	tools/perf/arch/arm/util/unwind-libunwind.c
#	tools/perf/arch/x86/Makefile
diff --cc tools/perf/arch/arm/Makefile
index 15130b50dfe3,67e9b3d38e89..000000000000
--- a/tools/perf/arch/arm/Makefile
+++ b/tools/perf/arch/arm/Makefile
@@@ -2,3 -2,6 +2,9 @@@ ifndef NO_DWAR
  PERF_HAVE_DWARF_REGS := 1
  LIB_OBJS += $(OUTPUT)arch/$(ARCH)/util/dwarf-regs.o
  endif
++<<<<<<< HEAD
++=======
+ ifndef NO_LIBUNWIND
+ LIB_OBJS += $(OUTPUT)arch/$(ARCH)/util/unwind-libunwind.o
+ endif
++>>>>>>> 436aa749bb19 (perf callchain: Separate libunwind code to special object)
diff --cc tools/perf/arch/x86/Makefile
index 8801fe02f206,4fa9be983ad1..000000000000
--- a/tools/perf/arch/x86/Makefile
+++ b/tools/perf/arch/x86/Makefile
@@@ -3,7 -3,9 +3,13 @@@ PERF_HAVE_DWARF_REGS := 
  LIB_OBJS += $(OUTPUT)arch/$(ARCH)/util/dwarf-regs.o
  endif
  ifndef NO_LIBUNWIND
++<<<<<<< HEAD
 +LIB_OBJS += $(OUTPUT)arch/$(ARCH)/util/unwind.o
++=======
+ LIB_OBJS += $(OUTPUT)arch/$(ARCH)/util/unwind-libunwind.o
+ LIB_OBJS += $(OUTPUT)arch/$(ARCH)/tests/regs_load.o
+ LIB_OBJS += $(OUTPUT)arch/$(ARCH)/tests/dwarf-unwind.o
++>>>>>>> 436aa749bb19 (perf callchain: Separate libunwind code to special object)
  endif
  LIB_OBJS += $(OUTPUT)arch/$(ARCH)/util/header.o
  LIB_OBJS += $(OUTPUT)arch/$(ARCH)/util/tsc.o
* Unmerged path tools/perf/arch/arm/util/unwind-libunwind.c
diff --git a/tools/perf/Makefile.perf b/tools/perf/Makefile.perf
index 469a631cb69a..0ddaf9fb3b31 100644
--- a/tools/perf/Makefile.perf
+++ b/tools/perf/Makefile.perf
@@ -474,7 +474,7 @@ endif # NO_DWARF
 endif # NO_LIBELF
 
 ifndef NO_LIBUNWIND
-  LIB_OBJS += $(OUTPUT)util/unwind.o
+  LIB_OBJS += $(OUTPUT)util/unwind-libunwind.o
 endif
 LIB_OBJS += $(OUTPUT)tests/keep-tracking.o
 
* Unmerged path tools/perf/arch/arm/Makefile
* Unmerged path tools/perf/arch/arm/util/unwind-libunwind.c
* Unmerged path tools/perf/arch/x86/Makefile
diff --git a/tools/perf/arch/x86/util/unwind.c b/tools/perf/arch/x86/util/unwind-libunwind.c
similarity index 100%
rename from tools/perf/arch/x86/util/unwind.c
rename to tools/perf/arch/x86/util/unwind-libunwind.c
diff --git a/tools/perf/util/unwind.c b/tools/perf/util/unwind-libunwind.c
similarity index 100%
rename from tools/perf/util/unwind.c
rename to tools/perf/util/unwind-libunwind.c
