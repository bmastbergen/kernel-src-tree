ACPI, x86: Fix extended error log driver to depend on CONFIG_X86_LOCAL_APIC

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [acpi] x86: Fix extended error log driver to depend on CONFIG_X86_LOCAL_APIC (Rui Wang) [1076655]
Rebuild_FUZZ: 95.83%
commit-author Tony Luck <tony.luck@intel.com>
commit 9ebddac7ea2a1f4b4ce3335a78312a58dfaadb4d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/9ebddac7.failed

Randconfig build by Fengguang's robot army reported:

   drivers/built-in.o: In function `extlog_print':
   >> acpi_extlog.c:(.text+0xcc719): undefined reference to `boot_cpu_physical_apicid'

The config had CONFIG_SMP=n so we picked up this definition from:

  <asm/cpu.h>: #define cpu_physical_id(cpu) boot_cpu_physical_apicid

But boot_cpu_physical_apicid is defined in arch/x86/kernel/apic/apic.c
which is only built if CONFIG_X86_LOCAL_APIC=y.

	Reported-by: Fengguang Wu <fengguang.wu@intel.com>
	Signed-off-by: Tony Luck <tony.luck@intel.com>
	Cc: Chen Gong <gong.chen@linux.intel.com>
	Cc: Rafael J. Wysocki <rjw@rjwysocki.net>
Link: http://lkml.kernel.org/r/6be3afdcad7968f7fb7c0b681e547b3e872e44dd.1383947368.git.tony.luck@intel.com
	Signed-off-by: Ingo Molnar <mingo@kernel.org>
(cherry picked from commit 9ebddac7ea2a1f4b4ce3335a78312a58dfaadb4d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/acpi/Kconfig
diff --cc drivers/acpi/Kconfig
index 100bd724f648,e11faae81ed9..000000000000
--- a/drivers/acpi/Kconfig
+++ b/drivers/acpi/Kconfig
@@@ -396,4 -372,25 +396,28 @@@ config ACPI_BGR
  
  source "drivers/acpi/apei/Kconfig"
  
++<<<<<<< HEAD
++=======
+ config ACPI_EXTLOG
+ 	tristate "Extended Error Log support"
+ 	depends on X86_MCE && X86_LOCAL_APIC
+ 	select EFI
+ 	select UEFI_CPER
+ 	default n
+ 	help
+ 	  Certain usages such as Predictive Failure Analysis (PFA) require
+ 	  more information about the error than what can be described in
+ 	  processor machine check banks. Most server processors log
+ 	  additional information about the error in processor uncore
+ 	  registers. Since the addresses and layout of these registers vary
+ 	  widely from one processor to another, system software cannot
+ 	  readily make use of them. To complicate matters further, some of
+ 	  the additional error information cannot be constructed without
+ 	  detailed knowledge about platform topology.
+ 
+ 	  Enhanced MCA Logging allows firmware to provide additional error
+ 	  information to system software, synchronous with MCE or CMCI. This
+ 	  driver adds support for that functionality.
+ 
++>>>>>>> 9ebddac7ea2a (ACPI, x86: Fix extended error log driver to depend on CONFIG_X86_LOCAL_APIC)
  endif	# ACPI
* Unmerged path drivers/acpi/Kconfig
