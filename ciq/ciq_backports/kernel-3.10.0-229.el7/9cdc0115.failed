ALSA: hda - Keep pointer to bdl_pos_fix in chip struct

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [alsa] hda: Keep pointer to bdl_pos_fix in chip struct (Jaroslav Kysela) [1112200]
Rebuild_FUZZ: 91.09%
commit-author Dylan Reid <dgreid@chromium.org>
commit 9cdc0115e444108cfa7339386eee46ed2c84a2eb
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/9cdc0115.failed

This will allow for a platform hda driver to use it as well.  It
removes the dependency on the module param from hda_intel, which will
allow for azx_setup_periods to be shared.

	Signed-off-by: Dylan Reid <dgreid@chromium.org>
	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit 9cdc0115e444108cfa7339386eee46ed2c84a2eb)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/pci/hda/hda_intel.c
diff --cc sound/pci/hda/hda_intel.c
index 279d03c7126a,9fcd1d128464..000000000000
--- a/sound/pci/hda/hda_intel.c
+++ b/sound/pci/hda/hda_intel.c
@@@ -1176,8 -1174,8 +1178,13 @@@ static int azx_setup_periods(struct az
  				pos_align;
  		pos_adj = frames_to_bytes(runtime, pos_adj);
  		if (pos_adj >= period_bytes) {
++<<<<<<< HEAD
 +			snd_printk(KERN_WARNING SFX "%s: Too big adjustment %d\n",
 +				   pci_name(chip->pci), bdl_pos_adj[chip->dev_index]);
++=======
+ 			dev_warn(chip->card->dev,"Too big adjustment %d\n",
+ 				 pos_adj);
++>>>>>>> 9cdc0115e444 (ALSA: hda - Keep pointer to bdl_pos_fix in chip struct)
  			pos_adj = 0;
  		} else {
  			ofs = setup_bdle(chip, snd_pcm_get_dma_buf(substream),
* Unmerged path sound/pci/hda/hda_intel.c
diff --git a/sound/pci/hda/hda_priv.h b/sound/pci/hda/hda_priv.h
index 6d082d65baed..17afe90e90de 100644
--- a/sound/pci/hda/hda_priv.h
+++ b/sound/pci/hda/hda_priv.h
@@ -357,6 +357,7 @@ struct azx {
 
 	/* flags */
 	int position_fix[2]; /* for both playback/capture streams */
+	const int *bdl_pos_adj;
 	int poll_count;
 	unsigned int running:1;
 	unsigned int initialized:1;
