cxgb4i: use set_wr_txq() to set tx queues

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
commit-author Karen Xie <kxie@chelsio.com>
commit 2126bc5e872cefd808a6590c5cec797997a6490d
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/2126bc5e.failed

use cxgb4's set_wr_txq() for setting of the tx queue for a outgoing packet.
remove the similar function in cxgb4i.

	Signed-off-by: Karen Xie <kxie@chelsio.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit 2126bc5e872cefd808a6590c5cec797997a6490d)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/cxgbi/cxgb4i/cxgb4i.c
diff --cc drivers/scsi/cxgbi/cxgb4i/cxgb4i.c
index 951cbabb0160,a83d2ceded83..000000000000
--- a/drivers/scsi/cxgbi/cxgb4i/cxgb4i.c
+++ b/drivers/scsi/cxgbi/cxgb4i/cxgb4i.c
@@@ -568,12 -548,10 +562,19 @@@ static inline void send_tx_flowc_wr(str
  	flowc->mnemval[7].val = htonl(csk->advmss);
  	flowc->mnemval[8].mnemonic = 0;
  	flowc->mnemval[8].val = 0;
++<<<<<<< HEAD
 +	for (i = 0; i < 9; i++) {
 +		flowc->mnemval[i].r4[0] = 0;
 +		flowc->mnemval[i].r4[1] = 0;
 +		flowc->mnemval[i].r4[2] = 0;
 +	}
 +	set_queue(skb, CPL_PRIORITY_DATA, csk);
++=======
+ 	flowc->mnemval[8].mnemonic = FW_FLOWC_MNEM_TXDATAPLEN_MAX;
+ 	flowc->mnemval[8].val = 16384;
+ 
+ 	set_wr_txq(skb, CPL_PRIORITY_DATA, csk->port_id);
++>>>>>>> 2126bc5e872c (cxgb4i: use set_wr_txq() to set tx queues)
  
  	log_debug(1 << CXGBI_DBG_TOE | 1 << CXGBI_DBG_SOCK,
  		"csk 0x%p, tid 0x%x, %u,%u,%u,%u,%u,%u,%u.\n",
@@@ -663,8 -657,8 +664,13 @@@ static int push_tx_frames(struct cxgbi_
  			break;
  		}
  		__skb_unlink(skb, &csk->write_queue);
++<<<<<<< HEAD
 +		set_queue(skb, CPL_PRIORITY_DATA, csk);
 +		skb->csum = credits_needed;
++=======
+ 		set_wr_txq(skb, CPL_PRIORITY_DATA, csk->port_id);
+ 		skb->csum = credits_needed + flowclen16;
++>>>>>>> 2126bc5e872c (cxgb4i: use set_wr_txq() to set tx queues)
  		csk->wr_cred -= credits_needed;
  		csk->wr_una_cred += credits_needed;
  		cxgbi_sock_enqueue_wr(csk, skb);
* Unmerged path drivers/scsi/cxgbi/cxgb4i/cxgb4i.c
