qla2xxx: Remove unnecessary delays from fw dump code path.

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [scsi] qla2xxx: Remove unnecessary delays from fw dump code path (Chad Dupuis) [1089346]
Rebuild_FUZZ: 99.13%
commit-author Hiral Patel <hiral.patel@qlogic.com>
commit 2f389fc47281dc5f0cfed1306ed22eba51bcc980
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/2f389fc4.failed

	Signed-off-by: Hiral Patel <hiral.patel@qlogic.com>
	Signed-off-by: Saurav Kashyap <saurav.kashyap@qlogic.com>
	Signed-off-by: Christoph Hellwig <hch@lst.de>
(cherry picked from commit 2f389fc47281dc5f0cfed1306ed22eba51bcc980)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/scsi/qla2xxx/qla_dbg.c
#	drivers/scsi/qla2xxx/qla_dbg.h
diff --cc drivers/scsi/qla2xxx/qla_dbg.c
index 87b75bfa0c9c,16939a98b8f8..000000000000
--- a/drivers/scsi/qla2xxx/qla_dbg.c
+++ b/drivers/scsi/qla2xxx/qla_dbg.c
@@@ -208,26 -296,16 +208,20 @@@ qla24xx_read_window(struct device_reg_2
  	return buf;
  }
  
++<<<<<<< HEAD
 +static inline int
++=======
+ void
++>>>>>>> 2f389fc47281 (qla2xxx: Remove unnecessary delays from fw dump code path.)
  qla24xx_pause_risc(struct device_reg_24xx __iomem *reg)
  {
- 	int rval = QLA_SUCCESS;
- 	uint32_t cnt;
- 
  	WRT_REG_DWORD(&reg->hccr, HCCRX_SET_RISC_PAUSE);
- 	for (cnt = 30000;
- 	    ((RD_REG_DWORD(&reg->host_status) & HSRX_RISC_PAUSED) == 0) &&
- 	    rval == QLA_SUCCESS; cnt--) {
- 		if (cnt)
- 			udelay(100);
- 		else
- 			rval = QLA_FUNCTION_TIMEOUT;
- 	}
  
- 	return rval;
+ 	/* 100 usec delay is sufficient enough for hardware to pause RISC */
+ 	udelay(100);
  }
  
 -int
 +static int
  qla24xx_soft_reset(struct qla_hw_data *ha)
  {
  	int rval = QLA_SUCCESS;
diff --cc drivers/scsi/qla2xxx/qla_dbg.h
index 35e20b4f8b6c,3679b73ee8c9..000000000000
--- a/drivers/scsi/qla2xxx/qla_dbg.h
+++ b/drivers/scsi/qla2xxx/qla_dbg.h
@@@ -348,3 -348,10 +348,13 @@@ ql_log_pci(uint32_t, struct pci_dev *pd
  #define ql_dbg_tgt	0x00004000 /* Target mode */
  #define ql_dbg_tgt_mgt	0x00002000 /* Target mode management */
  #define ql_dbg_tgt_tmr	0x00001000 /* Target mode task management */
++<<<<<<< HEAD
++=======
+ 
+ extern int qla27xx_dump_mpi_ram(struct qla_hw_data *, uint32_t, uint32_t *,
+ 	uint32_t, void **);
+ extern int qla24xx_dump_ram(struct qla_hw_data *, uint32_t, uint32_t *,
+ 	uint32_t, void **);
+ extern void qla24xx_pause_risc(struct device_reg_24xx __iomem *);
+ extern int qla24xx_soft_reset(struct qla_hw_data *);
++>>>>>>> 2f389fc47281 (qla2xxx: Remove unnecessary delays from fw dump code path.)
* Unmerged path drivers/scsi/qla2xxx/qla_dbg.c
* Unmerged path drivers/scsi/qla2xxx/qla_dbg.h
