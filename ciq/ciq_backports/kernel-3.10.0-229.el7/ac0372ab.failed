rt2x00: support Ralink 5362.

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [wireless] rt2x00: support Ralink 5362 (Stanislaw Gruszka) [1155538]
Rebuild_FUZZ: 98.18%
commit-author Canek Peláez Valdés <canek@ciencias.unam.mx>
commit ac0372abf8524a7572a9cdaac6495eb2eba20457
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/ac0372ab.failed

	Signed-off-by: Canek Peláez Valdés <canek@ciencias.unam.mx>
	Signed-off-by: John W. Linville <linville@tuxdriver.com>
(cherry picked from commit ac0372abf8524a7572a9cdaac6495eb2eba20457)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/wireless/rt2x00/rt2800lib.c
diff --cc drivers/net/wireless/rt2x00/rt2800lib.c
index f281971919f5,9f57a2db791c..000000000000
--- a/drivers/net/wireless/rt2x00/rt2800lib.c
+++ b/drivers/net/wireless/rt2x00/rt2800lib.c
@@@ -2597,7 -3184,9 +2597,8 @@@ static void rt2800_config_channel(struc
  	case RF3322:
  		rt2800_config_channel_rf3322(rt2x00dev, conf, rf, info);
  		break;
 -	case RF3070:
  	case RF5360:
+ 	case RF5362:
  	case RF5370:
  	case RF5372:
  	case RF5390:
@@@ -2611,9 -3200,11 +2612,10 @@@
  		rt2800_config_channel_rf2xxx(rt2x00dev, conf, rf, info);
  	}
  
 -	if (rt2x00_rf(rt2x00dev, RF3070) ||
 -	    rt2x00_rf(rt2x00dev, RF3290) ||
 +	if (rt2x00_rf(rt2x00dev, RF3290) ||
  	    rt2x00_rf(rt2x00dev, RF3322) ||
  	    rt2x00_rf(rt2x00dev, RF5360) ||
+ 	    rt2x00_rf(rt2x00dev, RF5362) ||
  	    rt2x00_rf(rt2x00dev, RF5370) ||
  	    rt2x00_rf(rt2x00dev, RF5372) ||
  	    rt2x00_rf(rt2x00dev, RF5390) ||
@@@ -3203,8 -4315,11 +3205,9 @@@ void rt2800_vco_calibration(struct rt2x
  		rt2x00_set_field8(&rfcsr, RFCSR7_RF_TUNING, 1);
  		rt2800_rfcsr_write(rt2x00dev, 7, rfcsr);
  		break;
 -	case RF3053:
 -	case RF3070:
  	case RF3290:
  	case RF5360:
+ 	case RF5362:
  	case RF5370:
  	case RF5372:
  	case RF5390:
@@@ -5955,39 -7531,46 +5959,58 @@@ static int rt2800_probe_hw_mode(struct 
  	/*
  	 * Initialize hw_mode information.
  	 */
 +	spec->supported_bands = SUPPORT_BAND_2GHZ;
  	spec->supported_rates = SUPPORT_RATE_CCK | SUPPORT_RATE_OFDM;
  
 -	switch (rt2x00dev->chip.rf) {
 -	case RF2720:
 -	case RF2820:
 +	if (rt2x00_rf(rt2x00dev, RF2820) ||
 +	    rt2x00_rf(rt2x00dev, RF2720)) {
  		spec->num_channels = 14;
  		spec->channels = rf_vals;
 -		break;
 -
 -	case RF2750:
 -	case RF2850:
 +	} else if (rt2x00_rf(rt2x00dev, RF2850) ||
 +		   rt2x00_rf(rt2x00dev, RF2750)) {
 +		spec->supported_bands |= SUPPORT_BAND_5GHZ;
  		spec->num_channels = ARRAY_SIZE(rf_vals);
  		spec->channels = rf_vals;
++<<<<<<< HEAD
 +	} else if (rt2x00_rf(rt2x00dev, RF3020) ||
 +		   rt2x00_rf(rt2x00dev, RF2020) ||
 +		   rt2x00_rf(rt2x00dev, RF3021) ||
 +		   rt2x00_rf(rt2x00dev, RF3022) ||
 +		   rt2x00_rf(rt2x00dev, RF3290) ||
 +		   rt2x00_rf(rt2x00dev, RF3320) ||
 +		   rt2x00_rf(rt2x00dev, RF3322) ||
 +		   rt2x00_rf(rt2x00dev, RF5360) ||
 +		   rt2x00_rf(rt2x00dev, RF5370) ||
 +		   rt2x00_rf(rt2x00dev, RF5372) ||
 +		   rt2x00_rf(rt2x00dev, RF5390) ||
 +		   rt2x00_rf(rt2x00dev, RF5392)) {
++=======
+ 		break;
+ 
+ 	case RF2020:
+ 	case RF3020:
+ 	case RF3021:
+ 	case RF3022:
+ 	case RF3070:
+ 	case RF3290:
+ 	case RF3320:
+ 	case RF3322:
+ 	case RF5360:
+ 	case RF5362:
+ 	case RF5370:
+ 	case RF5372:
+ 	case RF5390:
+ 	case RF5392:
++>>>>>>> ac0372abf852 (rt2x00: support Ralink 5362.)
  		spec->num_channels = 14;
  		spec->channels = rf_vals_3x;
 -		break;
 -
 -	case RF3052:
 -	case RF3053:
 +	} else if (rt2x00_rf(rt2x00dev, RF3052)) {
 +		spec->supported_bands |= SUPPORT_BAND_5GHZ;
  		spec->num_channels = ARRAY_SIZE(rf_vals_3x);
  		spec->channels = rf_vals_3x;
 -		break;
 +	} else if (rt2x00_rf(rt2x00dev, RF5592)) {
 +		spec->supported_bands |= SUPPORT_BAND_5GHZ;
  
 -	case RF5592:
  		rt2800_register_read(rt2x00dev, MAC_DEBUG_INDEX, &reg);
  		if (rt2x00_get_field32(reg, MAC_DEBUG_INDEX_XTAL)) {
  			spec->num_channels = ARRAY_SIZE(rf_vals_5592_xtal40);
@@@ -6075,8 -7681,11 +6098,9 @@@
  	case RF3022:
  	case RF3320:
  	case RF3052:
 -	case RF3053:
 -	case RF3070:
  	case RF3290:
  	case RF5360:
+ 	case RF5362:
  	case RF5370:
  	case RF5372:
  	case RF5390:
diff --git a/drivers/net/wireless/rt2x00/rt2800.h b/drivers/net/wireless/rt2x00/rt2800.h
index a629313dd98a..32e88e74037b 100644
--- a/drivers/net/wireless/rt2x00/rt2800.h
+++ b/drivers/net/wireless/rt2x00/rt2800.h
@@ -53,6 +53,7 @@
  * RF3053 2.4G/5G 3T3R(RT3883/RT3563/RT3573/RT3593/RT3662)
  * RF5592 2.4G/5G 2T2R
  * RF5360 2.4G 1T1R
+ * RF5362 2.4G 1T1R
  * RF5370 2.4G 1T1R
  * RF5390 2.4G 1T1R
  */
@@ -72,6 +73,7 @@
 #define RF5592				0x000f
 #define RF3290				0x3290
 #define RF5360				0x5360
+#define RF5362				0x5362
 #define RF5370				0x5370
 #define RF5372				0x5372
 #define RF5390				0x5390
@@ -2022,7 +2024,7 @@ struct mac_iveiv_entry {
 /* Bits [7-4] for RF3320 (RT3370/RT3390), on other chipsets reserved */
 #define RFCSR3_PA1_BIAS_CCK		FIELD8(0x70)
 #define RFCSR3_PA2_CASCODE_BIAS_CCKK	FIELD8(0x80)
-/* Bits for RF3290/RF5360/RF5370/RF5372/RF5390/RF5392 */
+/* Bits for RF3290/RF5360/RF5362/RF5370/RF5372/RF5390/RF5392 */
 #define RFCSR3_VCOCAL_EN		FIELD8(0x80)
 
 /*
* Unmerged path drivers/net/wireless/rt2x00/rt2800lib.c
