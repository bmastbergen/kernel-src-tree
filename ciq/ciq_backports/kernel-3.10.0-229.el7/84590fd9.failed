i40evf: tweak Tx rate params and de-magic-ify

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
commit-author Mitch Williams <mitch.a.williams@intel.com>
commit 84590fd90ee423fb815abc8301d277f0b693b2f6
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/84590fd9.failed

In order for the VF to achieve its programmed Tx rate, we need to set
the max credits value to 4. While we're at it, get rid of some magic
numbers.

Change-ID: I4f17b4d3a90f1e069bdd134a543f0aa22feac3a9
	Signed-off-by: Mitch Williams <mitch.a.williams@intel.com>
	Tested-by: Sibai Li <sibai.li@intel.com>
	Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
(cherry picked from commit 84590fd90ee423fb815abc8301d277f0b693b2f6)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/intel/i40e/i40e_virtchnl_pf.c
diff --cc drivers/net/ethernet/intel/i40e/i40e_virtchnl_pf.c
index 0deb3c118439,4e7634c83685..000000000000
--- a/drivers/net/ethernet/intel/i40e/i40e_virtchnl_pf.c
+++ b/drivers/net/ethernet/intel/i40e/i40e_virtchnl_pf.c
@@@ -2253,10 -2266,11 +2255,16 @@@ int i40e_ndo_set_vf_bw(struct net_devic
  	}
  
  	/* Tx rate credits are in values of 50Mbps, 0 is disabled*/
++<<<<<<< HEAD
 +	ret = i40e_aq_config_vsi_bw_limit(&pf->hw, vsi->seid, tx_rate / 50, 0,
 +					  NULL);
++=======
+ 	ret = i40e_aq_config_vsi_bw_limit(&pf->hw, vsi->seid,
+ 					  max_tx_rate / I40E_BW_CREDIT_DIVISOR,
+ 					  I40E_MAX_BW_INACTIVE_ACCUM, NULL);
++>>>>>>> 84590fd90ee4 (i40evf: tweak Tx rate params and de-magic-ify)
  	if (ret) {
 -		dev_err(&pf->pdev->dev, "Unable to set max tx rate, error code %d.\n",
 +		dev_err(&pf->pdev->dev, "Unable to set tx rate, error code %d.\n",
  			ret);
  		ret = -EIO;
  		goto error;
* Unmerged path drivers/net/ethernet/intel/i40e/i40e_virtchnl_pf.c
