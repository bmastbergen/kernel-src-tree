ceph: refactor readpage_nounlock() to make the logic clearer

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
commit-author Zhang Zhen <zhenzhang.zhang@huawei.com>
commit 23cd573b46c1f90645023ca2989bc041a0fcf38c
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/23cd573b.failed

If the return value of ceph_osdc_readpages() is not negative,
it is certainly greater than or equal to zero.

Remove the useless condition judgment and redundant braces.

	Signed-off-by: Zhang Zhen <zhenzhang.zhang@huawei.com>
	Reviewed-by: Yan, Zheng <zheng.z.yan@intel.com>
(cherry picked from commit 23cd573b46c1f90645023ca2989bc041a0fcf38c)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	fs/ceph/addr.c
diff --cc fs/ceph/addr.c
index ccca11fb31fb,6aa2e3ffd224..000000000000
--- a/fs/ceph/addr.c
+++ b/fs/ceph/addr.c
@@@ -193,17 -209,18 +193,20 @@@ static int readpage_nounlock(struct fil
  		err = 0;
  	if (err < 0) {
  		SetPageError(page);
 -		ceph_fscache_readpage_cancel(inode, page);
  		goto out;
- 	} else {
- 		if (err < PAGE_CACHE_SIZE) {
- 		/* zero fill remainder of page */
- 			zero_user_segment(page, err, PAGE_CACHE_SIZE);
- 		} else {
- 			flush_dcache_page(page);
- 		}
  	}
+ 	if (err < PAGE_CACHE_SIZE)
+ 		/* zero fill remainder of page */
+ 		zero_user_segment(page, err, PAGE_CACHE_SIZE);
+ 	else
+ 		flush_dcache_page(page);
+ 
++<<<<<<< HEAD
++=======
  	SetPageUptodate(page);
+ 	ceph_readpage_to_fscache(inode, page);
  
++>>>>>>> 23cd573b46c1 (ceph: refactor readpage_nounlock() to make the logic clearer)
  out:
  	return err < 0 ? err : 0;
  }
* Unmerged path fs/ceph/addr.c
