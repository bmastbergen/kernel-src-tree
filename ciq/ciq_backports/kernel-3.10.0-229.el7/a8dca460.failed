ALSA: hda - Make snd_hda_gen_spec_free() static

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [alsa] hda: Make snd_hda_gen_spec_free() static (Jaroslav Kysela) [1112200]
Rebuild_FUZZ: 89.66%
commit-author Takashi Iwai <tiwai@suse.de>
commit a8dca4604a13469892c77c25638691d7757e7a47
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/a8dca460.failed

The last user of snd_hda_gen_spec_free() is patch_via.c, and we can
rewrite it safely with snd_hda_gen_free(), so that
snd_hda_gen_spec_free() can be a local function in hda_generic.c.

	Signed-off-by: Takashi Iwai <tiwai@suse.de>
(cherry picked from commit a8dca4604a13469892c77c25638691d7757e7a47)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	sound/pci/hda/hda_generic.c
diff --cc sound/pci/hda/hda_generic.c
index 5820a74b5781,842ebe93ec19..000000000000
--- a/sound/pci/hda/hda_generic.c
+++ b/sound/pci/hda/hda_generic.c
@@@ -87,7 -87,6 +87,10 @@@ static void snd_hda_gen_spec_free(struc
  	snd_array_free(&spec->paths);
  	snd_array_free(&spec->loopback_list);
  }
++<<<<<<< HEAD
 +EXPORT_SYMBOL_HDA(snd_hda_gen_spec_free);
++=======
++>>>>>>> a8dca4604a13 (ALSA: hda - Make snd_hda_gen_spec_free() static)
  
  /*
   * store user hints
* Unmerged path sound/pci/hda/hda_generic.c
diff --git a/sound/pci/hda/hda_generic.h b/sound/pci/hda/hda_generic.h
index c908afbe4d94..bb2dea743986 100644
--- a/sound/pci/hda/hda_generic.h
+++ b/sound/pci/hda/hda_generic.h
@@ -297,7 +297,6 @@ struct hda_gen_spec {
 };
 
 int snd_hda_gen_spec_init(struct hda_gen_spec *spec);
-void snd_hda_gen_spec_free(struct hda_gen_spec *spec);
 
 int snd_hda_gen_init(struct hda_codec *codec);
 void snd_hda_gen_free(struct hda_codec *codec);
diff --git a/sound/pci/hda/patch_via.c b/sound/pci/hda/patch_via.c
index f84195f3ea31..778166259b3e 100644
--- a/sound/pci/hda/patch_via.c
+++ b/sound/pci/hda/patch_via.c
@@ -465,14 +465,8 @@ static void via_playback_pcm_hook(struct hda_pcm_stream *hinfo,
 
 static void via_free(struct hda_codec *codec)
 {
-	struct via_spec *spec = codec->spec;
-
-	if (!spec)
-		return;
-
 	vt1708_stop_hp_work(codec);
-	snd_hda_gen_spec_free(&spec->gen);
-	kfree(spec);
+	snd_hda_gen_free(codec);
 }
 
 #ifdef CONFIG_PM
