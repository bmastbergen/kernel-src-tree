s390/uaccess: remove dead kernel parameter 'user_mode='

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [s390] uaccess: remove dead kernel parameter 'user_mode=' (Hendrik Brueckner) [1099147]
Rebuild_FUZZ: 95.24%
commit-author Heiko Carstens <heiko.carstens@de.ibm.com>
commit 7385d0a550813c912094c5df22aeeb463712300e
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/7385d0a5.failed

Remove another leftover from the time when we supported running
user space in either home or primary address space.

	Signed-off-by: Heiko Carstens <heiko.carstens@de.ibm.com>
	Signed-off-by: Martin Schwidefsky <schwidefsky@de.ibm.com>
(cherry picked from commit 7385d0a550813c912094c5df22aeeb463712300e)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/s390/kernel/setup.c
diff --cc arch/s390/kernel/setup.c
index 77adf32d5eaa,f70f2489fa5f..000000000000
--- a/arch/s390/kernel/setup.c
+++ b/arch/s390/kernel/setup.c
@@@ -300,43 -287,6 +300,46 @@@ static int __init parse_vmalloc(char *a
  }
  early_param("vmalloc", parse_vmalloc);
  
++<<<<<<< HEAD
 +unsigned int s390_user_mode = PRIMARY_SPACE_MODE;
 +EXPORT_SYMBOL_GPL(s390_user_mode);
 +
 +static void __init set_user_mode_primary(void)
 +{
 +	psw_kernel_bits = (psw_kernel_bits & ~PSW_MASK_ASC) | PSW_ASC_HOME;
 +	psw_user_bits = (psw_user_bits & ~PSW_MASK_ASC) | PSW_ASC_PRIMARY;
 +#ifdef CONFIG_COMPAT
 +	psw32_user_bits =
 +		(psw32_user_bits & ~PSW32_MASK_ASC) | PSW32_ASC_PRIMARY;
 +#endif
 +	uaccess = MACHINE_HAS_MVCOS ? uaccess_mvcos_switch : uaccess_pt;
 +}
 +
 +static int __init early_parse_user_mode(char *p)
 +{
 +	if (p && strcmp(p, "primary") == 0)
 +		s390_user_mode = PRIMARY_SPACE_MODE;
 +	else if (!p || strcmp(p, "home") == 0)
 +		s390_user_mode = HOME_SPACE_MODE;
 +	else
 +		return 1;
 +	return 0;
 +}
 +early_param("user_mode", early_parse_user_mode);
 +
 +static void __init setup_addressing_mode(void)
 +{
 +	if (s390_user_mode != PRIMARY_SPACE_MODE)
 +		return;
 +	set_user_mode_primary();
 +	if (MACHINE_HAS_MVCOS)
 +		pr_info("Address spaces switched, mvcos available\n");
 +	else
 +		pr_info("Address spaces switched, mvcos not available\n");
 +}
 +
++=======
++>>>>>>> 7385d0a55081 (s390/uaccess: remove dead kernel parameter 'user_mode=')
  void *restart_stack __attribute__((__section__(".data")));
  
  static void __init setup_lowcore(void)
* Unmerged path arch/s390/kernel/setup.c
