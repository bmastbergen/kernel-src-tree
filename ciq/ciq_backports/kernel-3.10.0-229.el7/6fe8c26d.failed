perf top: Add --fields option to specify output fields

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-229.el7
Rebuild_CHGLOG: - [tools] perf/top: Add --fields option to specify output fields (Jiri Olsa) [1134356]
Rebuild_FUZZ: 98.15%
commit-author Namhyung Kim <namhyung@kernel.org>
commit 6fe8c26d7ab9fbd6748fc40ca5fea1e3131e7236
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-229.el7/6fe8c26d.failed

The --fields option is to allow user setup output field in any order.
It can receive any sort keys and following (hpp) fields:

  overhead, overhead_sys, overhead_us, sample and period

If guest profiling is enabled, overhead_guest_{sys,us} will be
available too.

More more information, please see previous patch "perf report:
Add -F option to specify output fields"

	Signed-off-by: Namhyung Kim <namhyung@kernel.org>
Link: http://lkml.kernel.org/r/1400480762-22852-15-git-send-email-namhyung@kernel.org
	Signed-off-by: Jiri Olsa <jolsa@kernel.org>
(cherry picked from commit 6fe8c26d7ab9fbd6748fc40ca5fea1e3131e7236)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/builtin-top.c
diff --cc tools/perf/builtin-top.c
index 610f8ed9ce3e,5b389ce4cd15..000000000000
--- a/tools/perf/builtin-top.c
+++ b/tools/perf/builtin-top.c
@@@ -1138,14 -1139,7 +1140,18 @@@ int cmd_top(int argc, const char **argv
  	if (argc)
  		usage_with_options(top_usage, options);
  
++<<<<<<< HEAD
 +	if (sort_order == default_sort_order)
 +		sort_order = "dso,symbol";
 +
 +	if (setup_sorting() < 0) {
 +		parse_options_usage(top_usage, options, "s", 1);
 +		goto out_delete_evlist;
 +	}
 +
++=======
+ 	sort__mode = SORT_MODE__TOP;
++>>>>>>> 6fe8c26d7ab9 (perf top: Add --fields option to specify output fields)
  	/* display thread wants entries to be collapsed in a different tree */
  	sort__need_collapse = 1;
  
diff --git a/tools/perf/Documentation/perf-top.txt b/tools/perf/Documentation/perf-top.txt
index 4f15a524d84b..298feb05751f 100644
--- a/tools/perf/Documentation/perf-top.txt
+++ b/tools/perf/Documentation/perf-top.txt
@@ -116,6 +116,15 @@ Default is to monitor all CPUS.
 	local_weight, abort, in_tx, transaction, overhead, sample, period.
 	Please see description of --sort in the perf-report man page.
 
+--fields=::
+	Specify output field - multiple keys can be specified in CSV format.
+	Following fields are available:
+	overhead, overhead_sys, overhead_us, sample and period.
+	Also it can contain any sort key(s).
+
+	By default, every sort keys not specified in --field will be appended
+	automatically.
+
 -n::
 --show-nr-samples::
 	Show a column with the number of samples.
* Unmerged path tools/perf/builtin-top.c
