net/mlx5: Change teardown with force mode failure message to warning

jira LE-1907
Rebuild_History Non-Buildable kernel-3.10.0-1160.80.1.el7
commit-author Alaa Hleihel <alaa@mellanox.com>
commit 6c75062823d8aa340615962bf261187bafa8d795
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1160.80.1.el7/6c750628.failed

With ConnectX-4, we expect the force teardown to fail in case that
DC was enabled, therefore change the message from error to warning.

	Signed-off-by: Alaa Hleihel <alaa@mellanox.com>
	Signed-off-by: Saeed Mahameed <saeedm@mellanox.com>
(cherry picked from commit 6c75062823d8aa340615962bf261187bafa8d795)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/mellanox/mlx5/core/fw.c
diff --cc drivers/net/ethernet/mellanox/mlx5/core/fw.c
index d537e62e868a,70066975f1b5..000000000000
--- a/drivers/net/ethernet/mellanox/mlx5/core/fw.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/fw.c
@@@ -231,6 -224,34 +231,37 @@@ int mlx5_cmd_teardown_hca(struct mlx5_c
  	return mlx5_cmd_exec(dev, in, sizeof(in), out, sizeof(out));
  }
  
++<<<<<<< HEAD
++=======
+ int mlx5_cmd_force_teardown_hca(struct mlx5_core_dev *dev)
+ {
+ 	u32 out[MLX5_ST_SZ_DW(teardown_hca_out)] = {0};
+ 	u32 in[MLX5_ST_SZ_DW(teardown_hca_in)] = {0};
+ 	int force_state;
+ 	int ret;
+ 
+ 	if (!MLX5_CAP_GEN(dev, force_teardown)) {
+ 		mlx5_core_dbg(dev, "force teardown is not supported in the firmware\n");
+ 		return -EOPNOTSUPP;
+ 	}
+ 
+ 	MLX5_SET(teardown_hca_in, in, opcode, MLX5_CMD_OP_TEARDOWN_HCA);
+ 	MLX5_SET(teardown_hca_in, in, profile, MLX5_TEARDOWN_HCA_IN_PROFILE_FORCE_CLOSE);
+ 
+ 	ret = mlx5_cmd_exec_polling(dev, in, sizeof(in), out, sizeof(out));
+ 	if (ret)
+ 		return ret;
+ 
+ 	force_state = MLX5_GET(teardown_hca_out, out, force_state);
+ 	if (force_state == MLX5_TEARDOWN_HCA_OUT_FORCE_STATE_FAIL) {
+ 		mlx5_core_warn(dev, "teardown with force mode failed, doing normal teardown\n");
+ 		return -EIO;
+ 	}
+ 
+ 	return 0;
+ }
+ 
++>>>>>>> 6c75062823d8 (net/mlx5: Change teardown with force mode failure message to warning)
  enum mlxsw_reg_mcc_instruction {
  	MLX5_REG_MCC_INSTRUCTION_LOCK_UPDATE_HANDLE = 0x01,
  	MLX5_REG_MCC_INSTRUCTION_RELEASE_UPDATE_HANDLE = 0x02,
* Unmerged path drivers/net/ethernet/mellanox/mlx5/core/fw.c
