perf evsel: Add missing cloning of evsel->use_config_name

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-348.el8
commit-author Namhyung Kim <namhyung@kernel.org>
commit 2dc065eae56df804e4da5f8a9e4139033f7ea605
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-348.el8/2dc065ea.failed

The evsel__clone() should copy all fields in the evsel which are set
during the event parsing.  But it missed the use_config_name field.

Fixes: 12279429d862 ("perf stat: Uniquify hybrid event name")
	Signed-off-by: Namhyung Kim <namhyung@kernel.org>
	Acked-by: Ian Rogers <irogers@google.com>
	Cc: Alexander Shishkin <alexander.shishkin@linux.intel.com>
	Cc: Andi Kleen <ak@linux.intel.com>
	Cc: Jin Yao <yao.jin@linux.intel.com>
	Cc: Jiri Olsa <jolsa@redhat.com>
	Cc: Mark Rutland <mark.rutland@arm.com>
	Cc: Peter Zijlstra <peterz@infradead.org>
Link: http://lore.kernel.org/lkml/20210602212241.2175005-2-namhyung@kernel.org
	Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
(cherry picked from commit 2dc065eae56df804e4da5f8a9e4139033f7ea605)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	tools/perf/util/evsel.h
diff --cc tools/perf/util/evsel.h
index 0aeec6e2ddf7,bdad52a06438..000000000000
--- a/tools/perf/util/evsel.h
+++ b/tools/perf/util/evsel.h
@@@ -80,8 -82,11 +80,14 @@@ struct evsel 
  		bool			auto_merge_stats;
  		bool			collect_stat;
  		bool			weak_group;
++<<<<<<< HEAD
++=======
+ 		bool			bpf_counter;
+ 		bool			use_config_name;
++>>>>>>> 2dc065eae56d (perf evsel: Add missing cloning of evsel->use_config_name)
  		int			bpf_fd;
  		struct bpf_object	*bpf_obj;
+ 		struct list_head	config_terms;
  	};
  
  	/*
diff --git a/tools/perf/util/evsel.c b/tools/perf/util/evsel.c
index beadb191eaa2..ace899e0740d 100644
--- a/tools/perf/util/evsel.c
+++ b/tools/perf/util/evsel.c
@@ -429,6 +429,7 @@ struct evsel *evsel__clone(struct evsel *orig)
 	evsel->auto_merge_stats = orig->auto_merge_stats;
 	evsel->collect_stat = orig->collect_stat;
 	evsel->weak_group = orig->weak_group;
+	evsel->use_config_name = orig->use_config_name;
 
 	if (evsel__copy_config_terms(evsel, orig) < 0)
 		goto out_err;
* Unmerged path tools/perf/util/evsel.h
