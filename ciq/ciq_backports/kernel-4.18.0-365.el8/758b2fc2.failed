drm/i915/pm: drop get_fifo_size vfunc.

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-365.el8
commit-author Dave Airlie <airlied@redhat.com>
commit 758b2fc26640c3641fb145cf61bc79a255dae5ea
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-365.el8/758b2fc2.failed

The i845_update_wm code was always calling the i845 variant,
and the i9xx_update_wm had only a choice between i830 and i9xx
paths, hardly worth the vfunc overhead.

	Reviewed-by: Jani Nikula <jani.nikula@intel.com>
	Signed-off-by: Dave Airlie <airlied@redhat.com>
	Signed-off-by: Jani Nikula <jani.nikula@intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/07523b1e46cd10adb2991ed4d2619b542a48c1ce.1632869550.git.jani.nikula@intel.com
(cherry picked from commit 758b2fc26640c3641fb145cf61bc79a255dae5ea)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/intel_pm.c
diff --cc drivers/gpu/drm/i915/intel_pm.c
index 7f3ec682595b,0e0309733c79..000000000000
--- a/drivers/gpu/drm/i915/intel_pm.c
+++ b/drivers/gpu/drm/i915/intel_pm.c
@@@ -2369,10 -2369,13 +2372,13 @@@ static void i9xx_update_wm(struct intel
  			planea_wm = wm_info->max_wm;
  	}
  
 -	if (DISPLAY_VER(dev_priv) == 2)
 +	if (IS_GEN(dev_priv, 2))
  		wm_info = &i830_bc_wm_info;
  
- 	fifo_size = dev_priv->display.get_fifo_size(dev_priv, PLANE_B);
+ 	if (DISPLAY_VER(dev_priv) == 2)
+ 		fifo_size = i830_get_fifo_size(dev_priv, PLANE_B);
+ 	else
+ 		fifo_size = i9xx_get_fifo_size(dev_priv, PLANE_B);
  	crtc = intel_get_crtc_for_plane(dev_priv, PLANE_B);
  	if (intel_crtc_active(crtc)) {
  		const struct drm_display_mode *pipe_mode =
@@@ -7677,19 -8054,15 +7683,21 @@@ void intel_init_pm(struct drm_i915_priv
  			dev_priv->display.update_wm = NULL;
  		} else
  			dev_priv->display.update_wm = pnv_update_wm;
 -	} else if (DISPLAY_VER(dev_priv) == 4) {
 +	} else if (IS_GEN(dev_priv, 4)) {
  		dev_priv->display.update_wm = i965_update_wm;
 -	} else if (DISPLAY_VER(dev_priv) == 3) {
 +	} else if (IS_GEN(dev_priv, 3)) {
  		dev_priv->display.update_wm = i9xx_update_wm;
++<<<<<<< HEAD
 +		dev_priv->display.get_fifo_size = i9xx_get_fifo_size;
 +	} else if (IS_GEN(dev_priv, 2)) {
 +		if (INTEL_NUM_PIPES(dev_priv) == 1) {
++=======
+ 	} else if (DISPLAY_VER(dev_priv) == 2) {
+ 		if (INTEL_NUM_PIPES(dev_priv) == 1)
++>>>>>>> 758b2fc26640 (drm/i915/pm: drop get_fifo_size vfunc.)
  			dev_priv->display.update_wm = i845_update_wm;
- 			dev_priv->display.get_fifo_size = i845_get_fifo_size;
- 		} else {
+ 		else
  			dev_priv->display.update_wm = i9xx_update_wm;
- 			dev_priv->display.get_fifo_size = i830_get_fifo_size;
- 		}
  	} else {
  		drm_err(&dev_priv->drm,
  			"unexpected fall-through in %s\n", __func__);
diff --git a/drivers/gpu/drm/i915/i915_drv.h b/drivers/gpu/drm/i915/i915_drv.h
index 6638c0aec2d4..c7df8990c1ea 100644
--- a/drivers/gpu/drm/i915/i915_drv.h
+++ b/drivers/gpu/drm/i915/i915_drv.h
@@ -266,8 +266,6 @@ struct drm_i915_display_funcs {
 			  const struct intel_cdclk_config *cdclk_config,
 			  enum pipe pipe);
 	int (*bw_calc_min_cdclk)(struct intel_atomic_state *state);
-	int (*get_fifo_size)(struct drm_i915_private *dev_priv,
-			     enum i9xx_plane_id i9xx_plane);
 	int (*compute_pipe_wm)(struct intel_atomic_state *state,
 			       struct intel_crtc *crtc);
 	int (*compute_intermediate_wm)(struct intel_atomic_state *state,
* Unmerged path drivers/gpu/drm/i915/intel_pm.c
