bnxt_en: remove legacy HWRM interface

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-365.el8
commit-author Edwin Peer <edwin.peer@broadcom.com>
commit b34695a894b88e50e16dd3dcb1098fe919023f14
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-365.el8/b34695a8.failed

There are no longer any callers relying on the old API.

	Signed-off-by: Edwin Peer <edwin.peer@broadcom.com>
	Signed-off-by: Michael Chan <michael.chan@broadcom.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit b34695a894b88e50e16dd3dcb1098fe919023f14)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/broadcom/bnxt/bnxt.c
#	drivers/net/ethernet/broadcom/bnxt/bnxt.h
#	drivers/net/ethernet/broadcom/bnxt/bnxt_hwrm.c
#	drivers/net/ethernet/broadcom/bnxt/bnxt_hwrm.h
diff --cc drivers/net/ethernet/broadcom/bnxt/bnxt.c
index 8cfaddda9936,ddec1163748d..000000000000
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt.c
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt.c
@@@ -3935,52 -3956,16 +3935,64 @@@ out
  
  static void bnxt_free_hwrm_resources(struct bnxt *bp)
  {
++<<<<<<< HEAD
 +	struct pci_dev *pdev = bp->pdev;
 +
 +	if (bp->hwrm_cmd_resp_addr) {
 +		dma_free_coherent(&pdev->dev, PAGE_SIZE, bp->hwrm_cmd_resp_addr,
 +				  bp->hwrm_cmd_resp_dma_addr);
 +		bp->hwrm_cmd_resp_addr = NULL;
 +	}
++=======
+ 	dma_pool_destroy(bp->hwrm_dma_pool);
+ 	bp->hwrm_dma_pool = NULL;
++>>>>>>> b34695a894b8 (bnxt_en: remove legacy HWRM interface)
  }
  
  static int bnxt_alloc_hwrm_resources(struct bnxt *bp)
  {
++<<<<<<< HEAD
 +	struct pci_dev *pdev = bp->pdev;
 +
 +	bp->hwrm_cmd_resp_addr = dma_alloc_coherent(&pdev->dev, PAGE_SIZE,
 +						   &bp->hwrm_cmd_resp_dma_addr,
 +						   GFP_KERNEL);
 +	if (!bp->hwrm_cmd_resp_addr)
 +		return -ENOMEM;
 +
 +	return 0;
 +}
 +
 +static void bnxt_free_hwrm_short_cmd_req(struct bnxt *bp)
 +{
 +	if (bp->hwrm_short_cmd_req_addr) {
 +		struct pci_dev *pdev = bp->pdev;
 +
 +		dma_free_coherent(&pdev->dev, bp->hwrm_max_ext_req_len,
 +				  bp->hwrm_short_cmd_req_addr,
 +				  bp->hwrm_short_cmd_req_dma_addr);
 +		bp->hwrm_short_cmd_req_addr = NULL;
 +	}
 +}
 +
 +static int bnxt_alloc_hwrm_short_cmd_req(struct bnxt *bp)
 +{
 +	struct pci_dev *pdev = bp->pdev;
 +
 +	if (bp->hwrm_short_cmd_req_addr)
 +		return 0;
 +
 +	bp->hwrm_short_cmd_req_addr =
 +		dma_alloc_coherent(&pdev->dev, bp->hwrm_max_ext_req_len,
 +				   &bp->hwrm_short_cmd_req_dma_addr,
 +				   GFP_KERNEL);
 +	if (!bp->hwrm_short_cmd_req_addr)
++=======
+ 	bp->hwrm_dma_pool = dma_pool_create("bnxt_hwrm", &bp->pdev->dev,
+ 					    BNXT_HWRM_DMA_SIZE,
+ 					    BNXT_HWRM_DMA_ALIGN, 0);
+ 	if (!bp->hwrm_dma_pool)
++>>>>>>> b34695a894b8 (bnxt_en: remove legacy HWRM interface)
  		return -ENOMEM;
  
  	return 0;
diff --cc drivers/net/ethernet/broadcom/bnxt/bnxt.h
index 50326e2ad60e,f343e87bef0b..000000000000
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt.h
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt.h
@@@ -1894,10 -1881,7 +1894,14 @@@ struct bnxt 
  	u16			hwrm_cmd_seq;
  	u16                     hwrm_cmd_kong_seq;
  	u16			hwrm_intr_seq_id;
++<<<<<<< HEAD
 +	void			*hwrm_short_cmd_req_addr;
 +	dma_addr_t		hwrm_short_cmd_req_dma_addr;
 +	void			*hwrm_cmd_resp_addr;
 +	dma_addr_t		hwrm_cmd_resp_dma_addr;
++=======
+ 	struct dma_pool		*hwrm_dma_pool;
++>>>>>>> b34695a894b8 (bnxt_en: remove legacy HWRM interface)
  
  	struct rtnl_link_stats64	net_stats_prev;
  	struct bnxt_stats_mem	port_stats;
* Unmerged path drivers/net/ethernet/broadcom/bnxt/bnxt_hwrm.c
* Unmerged path drivers/net/ethernet/broadcom/bnxt/bnxt_hwrm.h
* Unmerged path drivers/net/ethernet/broadcom/bnxt/bnxt.c
* Unmerged path drivers/net/ethernet/broadcom/bnxt/bnxt.h
* Unmerged path drivers/net/ethernet/broadcom/bnxt/bnxt_hwrm.c
* Unmerged path drivers/net/ethernet/broadcom/bnxt/bnxt_hwrm.h
