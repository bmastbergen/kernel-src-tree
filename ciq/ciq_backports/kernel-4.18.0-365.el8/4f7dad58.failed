drm/i915/adlp/tc: Fix PHY connected check for Thunderbolt mode

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-365.el8
commit-author Imre Deak <imre.deak@intel.com>
commit 4f7dad584fdce914d698233179a1188481789884
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-365.el8/4f7dad58.failed

On ADL-P the PHY ready (aka status complete on other platforms) flag is
always set, besides when a DP-alt, legacy sink is connected also when a
TBT sink is connected or nothing is connected. So assume the PHY to be
connected when both the TBT live status and PHY ready flags are set.

	Cc: José Roberto de Souza <jose.souza@intel.com>
	Signed-off-by: Imre Deak <imre.deak@intel.com>
	Reviewed-by: José Roberto de Souza <jose.souza@intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20210921002313.1132357-3-imre.deak@intel.com
(cherry picked from commit 4f7dad584fdce914d698233179a1188481789884)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/display/intel_tc.c
diff --cc drivers/gpu/drm/i915/display/intel_tc.c
index 2cefc13535a0,7dc3696085c7..000000000000
--- a/drivers/gpu/drm/i915/display/intel_tc.c
+++ b/drivers/gpu/drm/i915/display/intel_tc.c
@@@ -401,8 -509,12 +401,17 @@@ static bool icl_tc_phy_is_connected(str
  		return dig_port->tc_mode == TC_PORT_TBT_ALT;
  	}
  
++<<<<<<< HEAD
 +	if (icl_tc_phy_is_in_safe_mode(dig_port)) {
 +		drm_dbg_kms(&i915->drm, "Port %s: PHY still in safe mode\n",
++=======
+ 	/* On ADL-P the PHY complete flag is set in TBT mode as well. */
+ 	if (IS_ALDERLAKE_P(i915) && dig_port->tc_mode == TC_PORT_TBT_ALT)
+ 		return true;
+ 
+ 	if (!tc_phy_is_owned(dig_port)) {
+ 		drm_dbg_kms(&i915->drm, "Port %s: PHY not owned\n",
++>>>>>>> 4f7dad584fdc (drm/i915/adlp/tc: Fix PHY connected check for Thunderbolt mode)
  			    dig_port->tc_port_name);
  
  		return false;
* Unmerged path drivers/gpu/drm/i915/display/intel_tc.c
