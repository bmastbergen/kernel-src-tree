swiotlb-xen: avoid double free

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-365.el8
commit-author Jan Beulich <jbeulich@suse.com>
commit ce6a80d1b2f923b1839655a1cda786293feaa085
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-365.el8/ce6a80d1.failed

Of the two paths leading to the "error" label in xen_swiotlb_init() one
didn't allocate anything, while the other did already free what was
allocated.

Fixes: b82776005369 ("xen/swiotlb: Use the swiotlb_late_init_with_tbl to init Xen-SWIOTLB late when PV PCI is used")
	Signed-off-by: Jan Beulich <jbeulich@suse.com>
	Cc: stable@vger.kernel.org
	Reviewed-by: Christoph Hellwig <hch@lst.de>

Link: https://lore.kernel.org/r/ce9c2adb-8a52-6293-982a-0d6ece943ac6@suse.com
	Signed-off-by: Juergen Gross <jgross@suse.com>
(cherry picked from commit ce6a80d1b2f923b1839655a1cda786293feaa085)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/xen/swiotlb-xen.c
diff --cc drivers/xen/swiotlb-xen.c
index 8ccd85660984,99d518526eaf..000000000000
--- a/drivers/xen/swiotlb-xen.c
+++ b/drivers/xen/swiotlb-xen.c
@@@ -248,10 -216,6 +248,13 @@@ error
  		goto retry;
  	}
  	pr_err("%s (rc:%d)\n", xen_swiotlb_error(m_ret), rc);
++<<<<<<< HEAD
 +	if (early)
 +		panic("%s (rc:%d)", xen_swiotlb_error(m_ret), rc);
 +	else
 +		free_pages((unsigned long)start, order);
++=======
++>>>>>>> ce6a80d1b2f9 (swiotlb-xen: avoid double free)
  	return rc;
  }
  
* Unmerged path drivers/xen/swiotlb-xen.c
