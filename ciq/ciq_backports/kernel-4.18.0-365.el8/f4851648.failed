igc: Refactor igc_clean_rx_ring()

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-365.el8
commit-author Andre Guedes <andre.guedes@intel.com>
commit f485164867d3b960e811d94fc83e12d5a687ef05
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-365.el8/f4851648.failed

Refactor igc_clean_rx_ring() helper, preparing the code for AF_XDP
zero-copy support which is added by upcoming patches.

The refactor consists of encapsulating page-shared specific code into
its own helper, leaving common code that will be shared by both
page-shared and xsk pool in igc_clean_rx_ring().

	Signed-off-by: Andre Guedes <andre.guedes@intel.com>
	Signed-off-by: Vedang Patel <vedang.patel@intel.com>
	Signed-off-by: Jithu Joseph <jithu.joseph@intel.com>
	Reviewed-by: Maciej Fijalkowski <maciej.fijalkowski@intel.com>
	Tested-by: Dvora Fuxbrumer <dvorax.fuxbrumer@linux.intel.com>
	Signed-off-by: Tony Nguyen <anthony.l.nguyen@intel.com>
(cherry picked from commit f485164867d3b960e811d94fc83e12d5a687ef05)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/ethernet/intel/igc/igc_main.c
diff --cc drivers/net/ethernet/intel/igc/igc_main.c
index 261f28037c1a,5024f8dc98f9..000000000000
--- a/drivers/net/ethernet/intel/igc/igc_main.c
+++ b/drivers/net/ethernet/intel/igc/igc_main.c
@@@ -376,10 -379,21 +372,27 @@@ static void igc_clean_rx_ring_page_shar
  		if (i == rx_ring->count)
  			i = 0;
  	}
+ }
  
++<<<<<<< HEAD
 +	rx_ring->next_to_alloc = 0;
 +	rx_ring->next_to_clean = 0;
 +	rx_ring->next_to_use = 0;
++=======
+ /**
+  * igc_clean_rx_ring - Free Rx Buffers per Queue
+  * @ring: ring to free buffers from
+  */
+ static void igc_clean_rx_ring(struct igc_ring *ring)
+ {
+ 	igc_clean_rx_ring_page_shared(ring);
+ 
+ 	clear_ring_uses_large_buffer(ring);
+ 
+ 	ring->next_to_alloc = 0;
+ 	ring->next_to_clean = 0;
+ 	ring->next_to_use = 0;
++>>>>>>> f485164867d3 (igc: Refactor igc_clean_rx_ring())
  }
  
  /**
* Unmerged path drivers/net/ethernet/intel/igc/igc_main.c
