devlink: append split port number to the port name

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-365.el8
commit-author Jiri Pirko <jiri@nvidia.com>
commit f285f37cb1e6b29e7dc732c81510aa115463730f
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-365.el8/f285f37c.failed

Instead of doing sprintf twice in case the port is split or not, append
the split port suffix in case the port is split.

	Signed-off-by: Jiri Pirko <jiri@nvidia.com>
Link: https://lore.kernel.org/r/20210527104819.789840-1-jiri@resnulli.us
	Signed-off-by: Jakub Kicinski <kuba@kernel.org>
(cherry picked from commit f285f37cb1e6b29e7dc732c81510aa115463730f)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/core/devlink.c
diff --cc net/core/devlink.c
index 05c4afebf2f8,69681f19388e..000000000000
--- a/net/core/devlink.c
+++ b/net/core/devlink.c
@@@ -8484,12 -8631,11 +8484,20 @@@ static int __devlink_port_phys_port_nam
  
  	switch (attrs->flavour) {
  	case DEVLINK_PORT_FLAVOUR_PHYSICAL:
++<<<<<<< HEAD
 +		if (!attrs->split)
 +			n = snprintf(name, len, "p%u", attrs->phys.port_number);
 +		else
 +			n = snprintf(name, len, "p%us%u",
 +				     attrs->phys.port_number,
 +				     attrs->phys.split_subport_number);
++=======
+ 	case DEVLINK_PORT_FLAVOUR_VIRTUAL:
+ 		n = snprintf(name, len, "p%u", attrs->phys.port_number);
+ 		if (n < len && attrs->split)
+ 			n += snprintf(name + n, len - n, "s%u",
+ 				      attrs->phys.split_subport_number);
++>>>>>>> f285f37cb1e6 (devlink: append split port number to the port name)
  		break;
  	case DEVLINK_PORT_FLAVOUR_CPU:
  	case DEVLINK_PORT_FLAVOUR_DSA:
* Unmerged path net/core/devlink.c
