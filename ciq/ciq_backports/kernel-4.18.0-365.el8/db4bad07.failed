net: ethernet: improve eth_platform_get_mac_address

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-365.el8
commit-author Heiner Kallweit <hkallweit1@gmail.com>
commit db4bad07371b53dbce34e8ae54d4aa93096841d6
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-365.el8/db4bad07.failed

pci_device_to_OF_node(to_pci_dev(dev)) is the same as dev->of_node,
so we can simplify the code. In addition add an empty line before
the return statement.

	Signed-off-by: Heiner Kallweit <hkallweit1@gmail.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit db4bad07371b53dbce34e8ae54d4aa93096841d6)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	net/ethernet/eth.c
diff --cc net/ethernet/eth.c
index e7ecb2faf936,b70d5482997a..000000000000
--- a/net/ethernet/eth.c
+++ b/net/ethernet/eth.c
@@@ -542,18 -549,11 +542,23 @@@ unsigned char * __weak arch_get_platfor
  
  int eth_platform_get_mac_address(struct device *dev, u8 *mac_addr)
  {
- 	const unsigned char *addr;
- 	struct device_node *dp;
+ 	const unsigned char *addr = NULL;
  
++<<<<<<< HEAD
 +	if (dev_is_pci(dev))
 +		dp = pci_device_to_OF_node(to_pci_dev(dev));
 +	else
 +		dp = dev->of_node;
 +
 +	addr = NULL;
 +	if (dp)
 +		addr = of_get_mac_address(dp);
 +	if (!addr)
++=======
+ 	if (dev->of_node)
+ 		addr = of_get_mac_address(dev->of_node);
+ 	if (IS_ERR_OR_NULL(addr))
++>>>>>>> db4bad07371b (net: ethernet: improve eth_platform_get_mac_address)
  		addr = arch_get_platform_mac_address();
  
  	if (!addr)
* Unmerged path net/ethernet/eth.c
