drm/i915: Fix Memory BW formulae for ADL-P

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-365.el8
commit-author Radhakrishna Sripada <radhakrishna.sripada@intel.com>
commit cf9420cb122d055840848b039cbbc303882bc445
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-365.el8/cf9420cb.failed

The earlier update to BW formulae broke ADL-P. Include
display 13 to use TGL path for BW parameters.

Fixes: c64a9a7c05be ("drm/i915: Update memory bandwidth formulae")
	Cc: Matt Roper <matthew.d.roper@intel.com>
	Reported-by: José Roberto de Souza <jose.souza@intel.com>
	Signed-off-by: Radhakrishna Sripada <radhakrishna.sripada@intel.com>
	Reviewed-by: Caz Yokoyama <caz.yokoyama@intel.com>
	Reviewed-by: José Roberto de Souza <jose.souza@intel.com>
	Signed-off-by: José Roberto de Souza <jose.souza@intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20211106003714.17894-1-radhakrishna.sripada@intel.com
(cherry picked from commit cf9420cb122d055840848b039cbbc303882bc445)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/display/intel_bw.c
diff --cc drivers/gpu/drm/i915/display/intel_bw.c
index a682be05da88,abec394f6869..000000000000
--- a/drivers/gpu/drm/i915/display/intel_bw.c
+++ b/drivers/gpu/drm/i915/display/intel_bw.c
@@@ -76,14 -145,36 +76,18 @@@ static int icl_get_qgv_points(struct dr
  	int i, ret;
  
  	qi->num_points = dram_info->num_qgv_points;
 -	qi->num_psf_points = dram_info->num_psf_gv_points;
  
++<<<<<<< HEAD
 +	if (IS_GEN(dev_priv, 12))
++=======
+ 	if (DISPLAY_VER(dev_priv) >= 12)
++>>>>>>> cf9420cb122d (drm/i915: Fix Memory BW formulae for ADL-P)
  		switch (dram_info->type) {
  		case INTEL_DRAM_DDR4:
 -			qi->t_bl = is_y_tile ? 8 : 4;
 -			qi->max_numchannels = 2;
 -			qi->channel_width = 64;
 -			qi->deinterleave = is_y_tile ? 1 : 2;
 +			qi->t_bl = 4;
  			break;
  		case INTEL_DRAM_DDR5:
 -			qi->t_bl = is_y_tile ? 16 : 8;
 -			qi->max_numchannels = 4;
 -			qi->channel_width = 32;
 -			qi->deinterleave = is_y_tile ? 1 : 2;
 -			break;
 -		case INTEL_DRAM_LPDDR4:
 -			if (IS_ROCKETLAKE(dev_priv)) {
 -				qi->t_bl = 8;
 -				qi->max_numchannels = 4;
 -				qi->channel_width = 32;
 -				qi->deinterleave = 2;
 -				break;
 -			}
 -			fallthrough;
 -		case INTEL_DRAM_LPDDR5:
 -			qi->t_bl = 16;
 -			qi->max_numchannels = 8;
 -			qi->channel_width = 16;
 -			qi->deinterleave = is_y_tile ? 2 : 4;
 +			qi->t_bl = 8;
  			break;
  		default:
  			qi->t_bl = 16;
* Unmerged path drivers/gpu/drm/i915/display/intel_bw.c
