drm/i915/tc: Remove waiting for PHY complete during releasing ownership

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-365.el8
commit-author Imre Deak <imre.deak@intel.com>
commit 62e1e308ffd7a867ef82375f3cff7f8789ce6721
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-365.el8/62e1e308.failed

Waiting for the PHY complete flag to clear when releasing the PHY
ownership was add in

commit ddec362724f9 ("drm/i915: Wait for TypeC PHY complete flag to clear in safe mode")

This isn't required by the spec, the vague idea was to make the
handshake with the firmware more robust, without actual evidence for
when it would be needed. Checking this again, the flag doesn't clear on
ICL until after the PHY's PLL is disabled and the flag is permanently
set on ADL-P. To avoid the spurious timeout messages in dmesg, just
remove this wait.

	Cc: José Roberto de Souza <jose.souza@intel.com>
	Signed-off-by: Imre Deak <imre.deak@intel.com>
	Reviewed-by: José Roberto de Souza <jose.souza@intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20210921002313.1132357-4-imre.deak@intel.com
(cherry picked from commit 62e1e308ffd7a867ef82375f3cff7f8789ce6721)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/display/intel_tc.c
diff --cc drivers/gpu/drm/i915/display/intel_tc.c
index 2cefc13535a0,0d3555437b0b..000000000000
--- a/drivers/gpu/drm/i915/display/intel_tc.c
+++ b/drivers/gpu/drm/i915/display/intel_tc.c
@@@ -280,11 -339,24 +280,14 @@@ static bool icl_tc_phy_set_safe_mode(st
  	intel_uncore_write(uncore,
  			   PORT_TX_DFLEXDPCSSS(dig_port->tc_phy_fia), val);
  
 -	return true;
 -}
 -
 -static bool adl_tc_phy_take_ownership(struct intel_digital_port *dig_port,
 -				      bool take)
 -{
 -	struct drm_i915_private *i915 = to_i915(dig_port->base.base.dev);
 -	struct intel_uncore *uncore = &i915->uncore;
 -	enum port port = dig_port->base.port;
 -	u32 val;
 -
 -	val = intel_uncore_read(uncore, DDI_BUF_CTL(port));
 -	if (take)
 -		val |= DDI_BUF_CTL_TC_PHY_OWNERSHIP;
 -	else
 -		val &= ~DDI_BUF_CTL_TC_PHY_OWNERSHIP;
 -	intel_uncore_write(uncore, DDI_BUF_CTL(port), val);
++<<<<<<< HEAD
 +	if (enable && wait_for(!icl_tc_phy_status_complete(dig_port), 10))
 +		drm_dbg_kms(&i915->drm,
 +			    "Port %s: PHY complete clear timed out\n",
 +			    dig_port->tc_port_name);
  
++=======
++>>>>>>> 62e1e308ffd7 (drm/i915/tc: Remove waiting for PHY complete during releasing ownership)
  	return true;
  }
  
* Unmerged path drivers/gpu/drm/i915/display/intel_tc.c
