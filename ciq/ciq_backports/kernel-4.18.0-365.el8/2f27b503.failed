x86/fpu: Remove fpu::state

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-365.el8
commit-author Thomas Gleixner <tglx@linutronix.de>
commit 2f27b5034244c4ebd70c90066defa771a99a5320
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-365.el8/2f27b503.failed

All users converted. Remove it along with the sanity checks.

	Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
	Signed-off-by: Borislav Petkov <bp@suse.de>
Link: https://lkml.kernel.org/r/20211013145322.765063318@linutronix.de
(cherry picked from commit 2f27b5034244c4ebd70c90066defa771a99a5320)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	arch/x86/include/asm/fpu/types.h
diff --cc arch/x86/include/asm/fpu/types.h
index 90d18383879a,297e3b4920cb..000000000000
--- a/arch/x86/include/asm/fpu/types.h
+++ b/arch/x86/include/asm/fpu/types.h
@@@ -331,20 -336,32 +331,23 @@@ struct fpu 
  	 */
  	unsigned int			last_cpu;
  
 -	/*
 -	 * @avx512_timestamp:
 -	 *
 -	 * Records the timestamp of AVX512 use during last context switch.
 -	 */
 -	unsigned long			avx512_timestamp;
 -
 -	/*
 -	 * @fpstate:
 -	 *
 -	 * Pointer to the active struct fpstate. Initialized to
 -	 * point at @__fpstate below.
 -	 */
 -	struct fpstate			*fpstate;
 +	RH_KABI_DEPRECATE(unsigned char, initialized)
  
  	/*
- 	 * @state:
+ 	 * @__fpstate:
  	 *
- 	 * In-memory copy of all FPU registers that we save/restore
- 	 * over context switches. If the task is using the FPU then
- 	 * the registers in the FPU are more recent than this state
- 	 * copy. If the task context-switches away then they get
- 	 * saved here and represent the FPU state.
+ 	 * Initial in-memory storage for FPU registers which are saved in
+ 	 * context switch and when the kernel uses the FPU. The registers
+ 	 * are restored from this storage on return to user space if they
+ 	 * are not longer containing the tasks FPU register state.
  	 */
++<<<<<<< HEAD
 +	union fpregs_state		state;
++=======
+ 	struct fpstate			__fpstate;
++>>>>>>> 2f27b5034244 (x86/fpu: Remove fpu::state)
  	/*
- 	 * WARNING: 'state' is dynamically-sized.  Do not put
+ 	 * WARNING: '__fpstate' is dynamically-sized.  Do not put
  	 * anything after it here.
  	 */
  };
* Unmerged path arch/x86/include/asm/fpu/types.h
