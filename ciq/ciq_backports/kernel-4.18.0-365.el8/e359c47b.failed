drm/i915: Move is_ccs_modifier() to intel_fb.c

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-365.el8
commit-author Imre Deak <imre.deak@intel.com>
commit e359c47bfa6155b56d378864b7cc4a0d4e680c1b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-365.el8/e359c47b.failed

Move the function to intel_fb.c and rename it adding the intel_fb_
prefix following the naming of exported functions.

	Cc: Juha-Pekka Heikkila <juhapekka.heikkila@gmail.com>
	Signed-off-by: Imre Deak <imre.deak@intel.com>
	Reviewed-by: Juha-Pekka Heikkila <juhapekka.heikkila@gmail.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20211020195138.1841242-11-imre.deak@intel.com
(cherry picked from commit e359c47bfa6155b56d378864b7cc4a0d4e680c1b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/gpu/drm/i915/display/intel_display_types.h
#	drivers/gpu/drm/i915/display/intel_fb.c
#	drivers/gpu/drm/i915/display/intel_fb.h
#	drivers/gpu/drm/i915/display/skl_universal_plane.c
diff --cc drivers/gpu/drm/i915/display/intel_display_types.h
index 421b07aecc99,85cb55034bb0..000000000000
--- a/drivers/gpu/drm/i915/display/intel_display_types.h
+++ b/drivers/gpu/drm/i915/display/intel_display_types.h
@@@ -1870,37 -2021,25 +1870,40 @@@ intel_wait_for_vblank_if_active(struct 
  		intel_wait_for_vblank(dev_priv, pipe);
  }
  
 -static inline bool intel_modifier_uses_dpt(struct drm_i915_private *i915, u64 modifier)
 +static inline u32 intel_plane_ggtt_offset(const struct intel_plane_state *state)
  {
 -	return DISPLAY_VER(i915) >= 13 && modifier != DRM_FORMAT_MOD_LINEAR;
 +	return i915_ggtt_offset(state->vma);
  }
  
 -static inline bool intel_fb_uses_dpt(const struct drm_framebuffer *fb)
 +static inline struct intel_frontbuffer *
 +to_intel_frontbuffer(struct drm_framebuffer *fb)
  {
 -	return fb && intel_modifier_uses_dpt(to_i915(fb->dev), fb->modifier);
 +	return fb ? to_intel_framebuffer(fb)->frontbuffer : NULL;
  }
  
 -static inline u32 intel_plane_ggtt_offset(const struct intel_plane_state *plane_state)
++<<<<<<< HEAD
 +static inline bool intel_panel_use_ssc(struct drm_i915_private *dev_priv)
  {
 -	return i915_ggtt_offset(plane_state->ggtt_vma);
 +	if (dev_priv->params.panel_use_ssc >= 0)
 +		return dev_priv->params.panel_use_ssc != 0;
 +	return dev_priv->vbt.lvds_use_ssc
 +		&& !(dev_priv->quirks & QUIRK_LVDS_SSC_DISABLE);
  }
  
 -static inline struct intel_frontbuffer *
 -to_intel_frontbuffer(struct drm_framebuffer *fb)
 +static inline u32 i9xx_dpll_compute_fp(struct dpll *dpll)
  {
 -	return fb ? to_intel_framebuffer(fb)->frontbuffer : NULL;
 +	return dpll->n << 16 | dpll->m1 << 8 | dpll->m2;
 +}
 +
 +static inline u32 intel_fdi_link_freq(struct drm_i915_private *dev_priv,
 +				      const struct intel_crtc_state *pipe_config)
 +{
 +	if (HAS_DDI(dev_priv))
 +		return pipe_config->port_clock; /* SPLL */
 +	else
 +		return dev_priv->fdi_pll_freq;
  }
  
++=======
++>>>>>>> e359c47bfa61 (drm/i915: Move is_ccs_modifier() to intel_fb.c)
  #endif /*  __INTEL_DISPLAY_TYPES_H__ */
* Unmerged path drivers/gpu/drm/i915/display/intel_fb.c
* Unmerged path drivers/gpu/drm/i915/display/intel_fb.h
* Unmerged path drivers/gpu/drm/i915/display/skl_universal_plane.c
* Unmerged path drivers/gpu/drm/i915/display/intel_display_types.h
* Unmerged path drivers/gpu/drm/i915/display/intel_fb.c
* Unmerged path drivers/gpu/drm/i915/display/intel_fb.h
* Unmerged path drivers/gpu/drm/i915/display/skl_universal_plane.c
