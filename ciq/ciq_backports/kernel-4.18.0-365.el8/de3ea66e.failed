md: add comments in md_integrity_register

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-365.el8
commit-author Guoqing Jiang <jgq516@gmail.com>
commit de3ea66e9d23a34eef5e17f960d6473f78a1c54b
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-365.el8/de3ea66e.failed

Given it is not obvious for the error handling, let's try to add some
comments here to make it clear.

	Signed-off-by: Guoqing Jiang <jiangguoqing@kylinos.cn>
	Signed-off-by: Song Liu <song@kernel.org>
(cherry picked from commit de3ea66e9d23a34eef5e17f960d6473f78a1c54b)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/md/md.c
diff --cc drivers/md/md.c
index 20d98e2f9902,2c69905dd5c0..000000000000
--- a/drivers/md/md.c
+++ b/drivers/md/md.c
@@@ -2384,7 -2340,15 +2384,19 @@@ int md_integrity_register(struct mddev 
  			       bdev_get_integrity(reference->bdev));
  
  	pr_debug("md: data integrity enabled on %s\n", mdname(mddev));
++<<<<<<< HEAD
 +	if (bioset_integrity_create(&mddev->bio_set, BIO_POOL_SIZE)) {
++=======
+ 	if (bioset_integrity_create(&mddev->bio_set, BIO_POOL_SIZE) ||
+ 	    (mddev->level != 1 && mddev->level != 10 &&
+ 	     bioset_integrity_create(&mddev->io_acct_set, BIO_POOL_SIZE))) {
+ 		/*
+ 		 * No need to handle the failure of bioset_integrity_create,
+ 		 * because the function is called by md_run() -> pers->run(),
+ 		 * md_run calls bioset_exit -> bioset_integrity_free in case
+ 		 * of failure case.
+ 		 */
++>>>>>>> de3ea66e9d23 (md: add comments in md_integrity_register)
  		pr_err("md: failed to create integrity pool for %s\n",
  		       mdname(mddev));
  		return -EINVAL;
* Unmerged path drivers/md/md.c
