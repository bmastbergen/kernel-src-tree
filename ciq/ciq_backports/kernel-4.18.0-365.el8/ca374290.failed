wwan: core: support default netdev creation

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-365.el8
commit-author Sergey Ryazanov <ryazanov.s.a@gmail.com>
commit ca374290aaade741a4781ae5f6e1ba7515e4e5fa
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-365.el8/ca374290.failed

Most, if not each WWAN device driver will create a netdev for the
default data channel. Therefore, add an option for the WWAN netdev ops
registration function to create a default netdev for the WWAN device.

A WWAN device driver should pass a default data channel link id to the
ops registering function to request the creation of a default netdev, or
a special value WWAN_NO_DEFAULT_LINK to inform the WWAN core that the
default netdev should not be created.

For now, only wwan_hwsim utilize the default link creation option. Other
drivers will be reworked next.

	Signed-off-by: Sergey Ryazanov <ryazanov.s.a@gmail.com>
CC: M Chetan Kumar <m.chetan.kumar@intel.com>
CC: Intel Corporation <linuxwwan@intel.com>
	Signed-off-by: David S. Miller <davem@davemloft.net>
(cherry picked from commit ca374290aaade741a4781ae5f6e1ba7515e4e5fa)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/net/wwan/iosm/iosm_ipc_wwan.c
#	drivers/net/wwan/wwan_core.c
#	drivers/net/wwan/wwan_hwsim.c
#	include/linux/wwan.h
* Unmerged path drivers/net/wwan/iosm/iosm_ipc_wwan.c
* Unmerged path drivers/net/wwan/wwan_core.c
* Unmerged path drivers/net/wwan/wwan_hwsim.c
* Unmerged path include/linux/wwan.h
diff --git a/drivers/net/mhi/net.c b/drivers/net/mhi/net.c
index 6aa753387372..3b2aec0d3320 100644
--- a/drivers/net/mhi/net.c
+++ b/drivers/net/mhi/net.c
@@ -398,7 +398,8 @@ static int mhi_net_probe(struct mhi_device *mhi_dev,
 	struct net_device *ndev;
 	int err;
 
-	err = wwan_register_ops(&cntrl->mhi_dev->dev, &mhi_wwan_ops, mhi_dev);
+	err = wwan_register_ops(&cntrl->mhi_dev->dev, &mhi_wwan_ops, mhi_dev,
+				WWAN_NO_DEFAULT_LINK);
 	if (err)
 		return err;
 
* Unmerged path drivers/net/wwan/iosm/iosm_ipc_wwan.c
* Unmerged path drivers/net/wwan/wwan_core.c
* Unmerged path drivers/net/wwan/wwan_hwsim.c
* Unmerged path include/linux/wwan.h
