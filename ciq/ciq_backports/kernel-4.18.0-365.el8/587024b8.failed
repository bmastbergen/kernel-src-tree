ACPI: power: Use u8 as the power resource state data type

jira LE-1907
Rebuild_History Non-Buildable kernel-4.18.0-365.el8
commit-author Rafael J. Wysocki <rafael.j.wysocki@intel.com>
commit 587024b8210d4eeeab457323141c92e134cd3dbf
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-4.18.0-365.el8/587024b8.failed

Use u8 as the data type for representing the state of an ACPI
power resource.

It is s not necessary to use int for that and because subsequent
changes are going to use ACPI_POWER_RESOURCE_STATE_UNKNOWN, it is
better to adjust the data type so that the "unknown" state is
represented by the "all ones" value.

While at it, clean up acpi_power_get_state() somewhat.

No intentional functional impact.

	Tested-by: Dave Olsthoorn <dave@bewaar.me>
	Tested-by: Shujun Wang <wsj20369@163.com>
	Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
(cherry picked from commit 587024b8210d4eeeab457323141c92e134cd3dbf)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/acpi/power.c
diff --cc drivers/acpi/power.c
index 3fdfde3a851a,106a5d37486c..000000000000
--- a/drivers/acpi/power.c
+++ b/drivers/acpi/power.c
@@@ -199,9 -186,7 +199,13 @@@ static int acpi_power_get_state(acpi_ha
  {
  	acpi_status status = AE_OK;
  	unsigned long long sta = 0;
++<<<<<<< HEAD
 +	char node_name[5];
 +	struct acpi_buffer buffer = { sizeof(node_name), node_name };
 +
++=======
+ 	u8 cur_state;
++>>>>>>> 587024b8210d (ACPI: power: Use u8 as the power resource state data type)
  
  	if (!handle || !state)
  		return -EINVAL;
@@@ -210,15 -195,12 +214,20 @@@
  	if (ACPI_FAILURE(status))
  		return -ENODEV;
  
- 	*state = (sta & 0x01)?ACPI_POWER_RESOURCE_STATE_ON:
- 			      ACPI_POWER_RESOURCE_STATE_OFF;
+ 	cur_state = sta & ACPI_POWER_RESOURCE_STATE_ON;
  
++<<<<<<< HEAD
 +	acpi_get_name(handle, ACPI_SINGLE_NAME, &buffer);
 +
 +	ACPI_DEBUG_PRINT((ACPI_DB_INFO, "Resource [%s] is %s\n",
 +			  node_name,
 +				*state ? "on" : "off"));
++=======
+ 	acpi_handle_debug(handle, "Power resource is %s\n",
+ 			  cur_state ? "on" : "off");
++>>>>>>> 587024b8210d (ACPI: power: Use u8 as the power resource state data type)
  
+ 	*state = cur_state;
  	return 0;
  }
  
* Unmerged path drivers/acpi/power.c
