HID: microsoft: Convert private data to be a proper struct

jira LE-1907
cve CVE-2019-19532
Rebuild_History Non-Buildable kernel-3.10.0-1160.21.1.el7
Rebuild_CHGLOG: - [hid] microsoft: Convert private data to be a proper struct (Chris von Recklinghausen) [1821870] {CVE-2019-19532}
Rebuild_FUZZ: 95.50%
commit-author Andrey Smirnov <andrew.smirnov@gmail.com>
commit f2d3b625dae10cdf14bcfcacb965b02f5c0acc01
Empty-Commit: Cherry-Pick Conflicts during history rebuild.
Will be included in final tarball splat. Ref for failed cherry-pick at:
ciq/ciq_backports/kernel-3.10.0-1160.21.1.el7/f2d3b625.failed

In order to be able to have more than just an unsigned long worth of
private data, convert the code to allocate and use a dedicated struct.

	Cc: Dmitry Torokhov <dmitry.torokhov@gmail.com>
	Cc: Jiri Kosina <jikos@kernel.org>
	Cc: Benjamin Tissoires <benjamin.tissoires@redhat.com>
	Cc: linux-input@vger.kernel.org
	Cc: linux-kernel@vger.kernel.org
	Cc: Pierre-Loup A. Griffais <pgriffais@valvesoftware.com>
	Signed-off-by: Juha Kuikka <juha.kuikka@gmail.com>
	Signed-off-by: Andrey Smirnov <andrew.smirnov@gmail.com>
	Signed-off-by: Jiri Kosina <jkosina@suse.cz>
(cherry picked from commit f2d3b625dae10cdf14bcfcacb965b02f5c0acc01)
	Signed-off-by: Jonathan Maple <jmaple@ciq.com>

# Conflicts:
#	drivers/hid/hid-microsoft.c
diff --cc drivers/hid/hid-microsoft.c
index 52cd311293fe,1cbeeeabd2dd..000000000000
--- a/drivers/hid/hid-microsoft.c
+++ b/drivers/hid/hid-microsoft.c
@@@ -22,14 -22,18 +22,18 @@@
  
  #include "hid-ids.h"
  
 -#define MS_HIDINPUT		BIT(0)
 -#define MS_ERGONOMY		BIT(1)
 -#define MS_PRESENTER		BIT(2)
 -#define MS_RDESC		BIT(3)
 -#define MS_NOGET		BIT(4)
 -#define MS_DUPLICATE_USAGES	BIT(5)
 -#define MS_SURFACE_DIAL		BIT(6)
 +#define MS_HIDINPUT		0x01
 +#define MS_ERGONOMY		0x02
 +#define MS_PRESENTER		0x04
 +#define MS_RDESC		0x08
 +#define MS_NOGET		0x10
 +#define MS_DUPLICATE_USAGES	0x20
 +#define MS_RDESC_3K		0x40
  
+ struct ms_data {
+ 	unsigned long quirks;
+ };
+ 
  static __u8 *ms_report_fixup(struct hid_device *hdev, __u8 *rdesc,
  		unsigned int *rsize)
  {
@@@ -135,7 -203,9 +142,13 @@@ static int ms_input_mapped(struct hid_d
  static int ms_event(struct hid_device *hdev, struct hid_field *field,
  		struct hid_usage *usage, __s32 value)
  {
++<<<<<<< HEAD
 +	unsigned long quirks = (unsigned long)hid_get_drvdata(hdev);
++=======
+ 	struct ms_data *ms = hid_get_drvdata(hdev);
+ 	unsigned long quirks = ms->quirks;
+ 	struct input_dev *input;
++>>>>>>> f2d3b625dae1 (HID: microsoft: Convert private data to be a proper struct)
  
  	if (!(hdev->claimed & HID_CLAIMED_INPUT) || !field->hidinput ||
  			!usage->type)
* Unmerged path drivers/hid/hid-microsoft.c
