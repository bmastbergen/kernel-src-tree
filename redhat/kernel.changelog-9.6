* Wed Sep 18 2024 Rado Vrbovsky <rvrbovsk@redhat.com> [5.14.0-511.el9]
- ipv4: Set scope explicitly in ip_route_output(). (CKI Backport Bot) [RHEL-57748]
- ACPI: thermal_lib: Initialize temp_decik to zero (Mark Langsdorf) [RHEL-54149]
- ACPI: thermal_lib: include "internal.h" for function prototypes (Mark Langsdorf) [RHEL-54149]
- ACPI: thermal: Register thermal zones without valid trip points (Mark Langsdorf) [RHEL-54149]
- ACPI: thermal: Use library functions to obtain trip point temperature values (Mark Langsdorf) [RHEL-54149]
- ACPI: thermal_lib: Add functions returning temperature in deci-Kelvin (Mark Langsdorf) [RHEL-54149]
- ACPI: bus: Don't use "proxy" headers (Mark Langsdorf) [RHEL-54149]
- ACPI: bus: Make container_of() no-op where it makes sense (Mark Langsdorf) [RHEL-54149]
- ACPI: NHLT: Drop redundant types (Mark Langsdorf) [RHEL-54149]
- ACPI: NHLT: Streamline struct naming (Mark Langsdorf) [RHEL-54149]
- ACPI: NHLT: Reintroduce types the table consists of (Mark Langsdorf) [RHEL-54149]
- ACPI: NHLT: Introduce API for the table (Mark Langsdorf) [RHEL-54149]
- ACPI: bus: allow _UID matching for integer zero (Mark Langsdorf) [RHEL-54149]
- ACPI: processor_idle: Fix invalid comparison with insertion sort for latency (Mark Langsdorf) [RHEL-54149]
- ACPI: scan: Ignore camera graph port nodes on all Dell Tiger, Alder and Raptor Lake models (Mark Langsdorf) [RHEL-54149]
- ACPI: x86: Force StorageD3Enable on more products (Mark Langsdorf) [RHEL-54149]
- ACPI: scan: Avoid enumerating devices with clearly invalid _STA values (Mark Langsdorf) [RHEL-54149]
- ACPI: resource: Skip IRQ override on Asus Vivobook Pro N6506MV (Mark Langsdorf) [RHEL-54149]
- hwmon: (acpi_power_meter) Ensure IPMI space handler is ready on Dell systems (Mark Langsdorf) [RHEL-54149]
- ACPI: IPMI: Add helper to wait for when SMI is selected (Mark Langsdorf) [RHEL-54149]
- ACPI: property: Add reference to UEFI DSD Guide (Mark Langsdorf) [RHEL-54149]
- ACPI/IORT: Handle memory address size limits as limits (Mark Langsdorf) [RHEL-54149]
- ACPI: PM: s2idle: Evaluate all Low-Power S0 Idle _DSM functions (Mark Langsdorf) [RHEL-54149]
- ACPI: resource: Do IRQ override on TongFang GXxHRXx and GMxHGxx (Mark Langsdorf) [RHEL-54149]
- ACPI: resource: Do IRQ override on GMxBGxx (XMG APEX 17 M23) (Mark Langsdorf) [RHEL-54149]
- ACPICA: Detect FACS even for hardware reduced platforms (Mark Langsdorf) [RHEL-54149]
- ACPI: AC: Properly notify powermanagement core about changes (Mark Langsdorf) [RHEL-54149]
- ACPI: EC: Avoid returning AE_OK on errors in address space handler (Mark Langsdorf) [RHEL-54149]
- ACPI: EC: Abort address space access upon error (Mark Langsdorf) [RHEL-54149]
- ACPI: APEI: EINJ: Fix einj_dev release leak (Mark Langsdorf) [RHEL-54149]
- ACPI: EC: Evaluate _REG outside the EC scope more carefully (Mark Langsdorf) [RHEL-54149]
- ACPICA: Add a depth argument to acpi_execute_reg_methods() (Mark Langsdorf) [RHEL-54149]
- ACPI: EC: Install address space handler at the namespace root (Mark Langsdorf) [RHEL-54149]
- ACPI/NUMA: Squash acpi_numa_memory_affinity_init() into acpi_parse_memory_affinity() (Mark Langsdorf) [RHEL-54149]
- ACPI/NUMA: Squash acpi_numa_slit_init() into acpi_parse_slit() (Mark Langsdorf) [RHEL-54149]
- ACPI/NUMA: Remove architecture dependent remainings (Mark Langsdorf) [RHEL-54149]
- x86/numa: Fix SRAT lookup of CFMWS ranges with numa_fill_memblks() (Mark Langsdorf) [RHEL-54149]
- ACPI: video: Add backlight=native quirk for Lenovo Slim 7 16ARH7 (Mark Langsdorf) [RHEL-54149]
- ACPI: platform-profile: add platform_profile_cycle() (Mark Langsdorf) [RHEL-54149]
- ACPICA: events/evgpeinit: don't forget to increment registered GPE count (Mark Langsdorf) [RHEL-54149]
- ACPICA: Modify ACPI_OBJECT_COMMON_HEADER (Mark Langsdorf) [RHEL-54149]
- ACPICA: Fix various spelling mistakes in text files and code comments (Mark Langsdorf) [RHEL-54149]
- ACPI: disable -Wstringop-truncation (Mark Langsdorf) [RHEL-54149]
- ACPI: x86: Add PNP_UART1_SKIP quirk for Lenovo Blade2 tablets (Mark Langsdorf) [RHEL-54149]
- ACPI: x86: utils: Mark SMO8810 accel on Dell XPS 15 9550 as always present (Mark Langsdorf) [RHEL-54149]
- ACPI: scan: Do not increase dep_unmet for already met dependencies (Mark Langsdorf) [RHEL-54149]
- ACPI: x86: Move LPSS to x86 folder (Mark Langsdorf) [RHEL-54149]
- ACPI: x86: Move blacklist to x86 folder (Mark Langsdorf) [RHEL-54149]
- ACPI: x86: Move acpi_cmos_rtc to x86 folder (Mark Langsdorf) [RHEL-54149]
- ACPI: x86: Introduce a Makefile (Mark Langsdorf) [RHEL-54149]
- ACPI: LPSS: Remove nested ifdeffery for CONFIG_PM (Mark Langsdorf) [RHEL-54149]
- ACPI: LPSS: Advertise number of chip selects via property (Mark Langsdorf) [RHEL-54149]
- ACPI: APEI: EINJ: mark remove callback as __exit (Mark Langsdorf) [RHEL-54149]
- ACPI: store owner from modules with acpi_bus_register_driver() (Mark Langsdorf) [RHEL-54149]
- ACPI: DPTF: Add Lunar Lake support (Mark Langsdorf) [RHEL-54149]
- ACPI: scan: Introduce typedef:s for struct acpi_hotplug_context members (Mark Langsdorf) [RHEL-54149]
- ACPI: scan: Use standard error checking pattern (Mark Langsdorf) [RHEL-54149]
- ACPI: scan: Move misleading comment to acpi_dma_configure_id() (Mark Langsdorf) [RHEL-54149]
- ACPI: scan: Use list_first_entry_or_null() in acpi_device_hid() (Mark Langsdorf) [RHEL-54149]
- ACPI: bus: Indicate support for IRQ ResourceSource thru _OSC (Mark Langsdorf) [RHEL-54149]
- ACPI: Fix Generic Initiator Affinity _OSC bit (Mark Langsdorf) [RHEL-54149]
- ACPI: bus: Indicate support for the Generic Event Device thru _OSC (Mark Langsdorf) [RHEL-54149]
- ACPI: bus: Indicate support for more than 16 p-states thru _OSC (Mark Langsdorf) [RHEL-54149]
- ACPI: bus: Indicate support for _TFP thru _OSC (Mark Langsdorf) [RHEL-54149]
- ACPICA: debugger: check status of acpi_evaluate_object() in acpi_db_walk_for_fields() (Mark Langsdorf) [RHEL-54149]
- ACPI: APEI: EINJ: mark remove callback as non-__exit (Mark Langsdorf) [RHEL-54149]
- ACPI: PM: Improve kerneldoc comments for suspend and hibernation functions (Mark Langsdorf) [RHEL-54149]
- ACPI: Document handle_eject_request() arguments (Mark Langsdorf) [RHEL-54149]
- EINJ: Add CXL error type support (Mark Langsdorf) [RHEL-54149]
- redhat/configs: Support for CXL protocol Error INJection (Mark Langsdorf) [RHEL-54149]
- EINJ: Migrate to a platform driver (Mark Langsdorf) [RHEL-54149]
- ACPI: HMAT: Introduce 2 levels of generic port access class (Mark Langsdorf) [RHEL-54149]
- base/node / ACPI: Enumerate node access class for 'struct access_coordinate' (Mark Langsdorf) [RHEL-54149]
- ACPI: HMAT: Remove register of memory node for generic target (Mark Langsdorf) [RHEL-54149]
- ACPI: resource: Use IRQ override on Maibenben X565 (Mark Langsdorf) [RHEL-54149]
- ACPI: CPPC: enable AMD CPPC V2 support for family 17h processors (Mark Langsdorf) [RHEL-54149]
- ACPI: APEI: Skip initialization of GHES_ASSIST structures for Machine Check Architecture (Mark Langsdorf) [RHEL-54149]
- ACPI: scan: Consolidate Device Check and Bus Check notification handling (Mark Langsdorf) [RHEL-54149]
- ACPI: scan: Rework Device Check and Bus Check notification handling (Mark Langsdorf) [RHEL-54149]
- ACPI: scan: Make acpi_processor_add() check the device enabled bit (Mark Langsdorf) [RHEL-54149]
- ACPI: scan: Relocate acpi_bus_trim_one() (Mark Langsdorf) [RHEL-54149]
- ACPI: scan: Fix device check notification handling (Mark Langsdorf) [RHEL-54149]
- ACPI: resource: Add MAIBENBEN X577 to irq1_edge_low_force_override (Mark Langsdorf) [RHEL-54149]
- ACPI: pfr_update: Convert to platform remove callback returning void (Mark Langsdorf) [RHEL-54149]
- ACPI: pfr_telemetry: Convert to platform remove callback returning void (Mark Langsdorf) [RHEL-54149]
- ACPI: fan: Convert to platform remove callback returning void (Mark Langsdorf) [RHEL-54149]
- ACPI: GED: Convert to platform remove callback returning void (Mark Langsdorf) [RHEL-54149]
- ACPI: DPTF: Convert to platform remove callback returning void (Mark Langsdorf) [RHEL-54149]
- ACPI: AGDI: Convert to platform remove callback returning void (Mark Langsdorf) [RHEL-54149]
- ACPI: TAD: Convert to platform remove callback returning void (Mark Langsdorf) [RHEL-54149]
- ACPI: APEI: GHES: Convert to platform remove callback returning void (Mark Langsdorf) [RHEL-54149]
- ACPI: property: Polish ignoring bad data nodes (Mark Langsdorf) [RHEL-54149]
- ACPI: x86: Add DELL0501 handling to acpi_quirk_skip_serdev_enumeration() (Mark Langsdorf) [RHEL-54149]
- ACPI: x86: Move acpi_quirk_skip_serdev_enumeration() out of CONFIG_X86_ANDROID_TABLETS (Mark Langsdorf) [RHEL-54149]
- ACPI: resource: Do IRQ override on Lunnen Ground laptops (Mark Langsdorf) [RHEL-54149]
- ACPI: use %%pe for better readability of errors while printing (Mark Langsdorf) [RHEL-54149]
- ACPI: property: Ignore bad graph port nodes on Dell XPS 9315 (Mark Langsdorf) [RHEL-54149]
- ACPI: utils: Make acpi_handle_path() not static (Mark Langsdorf) [RHEL-54149]
- ACPI: resource: Add IRQ override quirk for ASUS ExpertBook B2502FBA (Mark Langsdorf) [RHEL-54149]
- ACPI: scan: Defer enumeration of devices with a _DEP pointing to IVSC device (Mark Langsdorf) [RHEL-54149]
- ACPI: bus: make acpi_bus_type const (Mark Langsdorf) [RHEL-54149]
- ACPI: resource: Skip IRQ override on ASUS ExpertBook B1502CVA (Mark Langsdorf) [RHEL-54149]
- ACPI: video: Handle fetching EDID that is longer than 256 bytes (Mark Langsdorf) [RHEL-54149]
- ACPI: cpufreq: Add highest perf change notification (Mark Langsdorf) [RHEL-54149]
- ACPI: resource: Skip IRQ override on ASUS ExpertBook B1502CGA (Mark Langsdorf) [RHEL-54149]
- ACPI: resource: Add DMI quirks for ASUS Vivobook E1504GA and E1504GAB (Mark Langsdorf) [RHEL-54149]
- ACPI: resource: Add Infinity laptops to irq1_edge_low_force_override (Mark Langsdorf) [RHEL-54149]
- ACPI: button: trigger wakeup key events (Mark Langsdorf) [RHEL-54149]
- ACPI: resource: Add another DMI match for the TongFang GMxXGxx (Mark Langsdorf) [RHEL-54149]
- ACPI: EC: Use a threaded handler for dedicated IRQ (Mark Langsdorf) [RHEL-54149]
- ACPI: OSL: Use spin locks without disabling interrupts (Mark Langsdorf) [RHEL-54149]
- acpi: numa: Add helper function to retrieve the performance attributes (Mark Langsdorf) [RHEL-54149]
- acpi: numa: Add setting of generic port system locality attributes (Mark Langsdorf) [RHEL-54149]
- acpi: Break out nesting for hmat_parse_locality() (Mark Langsdorf) [RHEL-54149]
- acpi: numa: Add genport target allocation to the HMAT parsing (Mark Langsdorf) [RHEL-54149]
- acpi: numa: Create enum for memory_target access coordinates indexing (Mark Langsdorf) [RHEL-54149]
- base/node / acpi: Change 'node_hmem_attrs' to 'access_coordinates' (Mark Langsdorf) [RHEL-54149]
- acpi, hmat: calculate abstract distance with HMAT (Mark Langsdorf) [RHEL-54149]
- memory tiering: add abstract distance calculation algorithms management (Mark Langsdorf) [RHEL-54149]
- lib/firmware_table: tables: Add CDAT table parsing support (Mark Langsdorf) [RHEL-54149]
- ACPICA: Add a define for size of struct acpi_srat_generic_affinity device_handle (Mark Langsdorf) [RHEL-54149]
- ACPI: APEI: set memory failure flags as MF_ACTION_REQUIRED on synchronous events (Mark Langsdorf) [RHEL-54149]
- ACPI: utils: Introduce helper for _DEP list lookup (Mark Langsdorf) [RHEL-54149]
- ACPI: LPSS: Fix the fractional clock divider flags (Mark Langsdorf) [RHEL-54149]
- ACPI: NUMA: Fix the logic of getting the fake_pxm value (Mark Langsdorf) [RHEL-54149]
- ACPI: NUMA: Optimize the check for the availability of node values (Mark Langsdorf) [RHEL-54149]
- ACPI: NUMA: Remove unnecessary check in acpi_parse_gi_affinity() (Mark Langsdorf) [RHEL-54149]
- ACPI: watchdog: fix kernel-doc warnings (Mark Langsdorf) [RHEL-54149]
- acpi: property: Let args be NULL in __acpi_node_get_property_reference (Mark Langsdorf) [RHEL-54149]
- ACPI: extlog: fix NULL pointer dereference check (Mark Langsdorf) [RHEL-54149]
- ACPI: OSL: Allow Notify () handlers to run on all CPUs (Mark Langsdorf) [RHEL-54149]
- ACPI: OSL: Rearrange workqueue selection in acpi_os_execute() (Mark Langsdorf) [RHEL-54149]
- ACPI: OSL: Rework error handling in acpi_os_execute() (Mark Langsdorf) [RHEL-54149]
- PNP: ACPI: fix fortify warning (Mark Langsdorf) [RHEL-54149]
- ACPI: video: Add quirk for the Colorful X15 AT 23 Laptop (Mark Langsdorf) [RHEL-54149]
- ACPI: LPSS: use acpi_dev_uid_match() for matching _UID (Mark Langsdorf) [RHEL-54149]
- ACPI: bus: update acpi_dev_hid_uid_match() to support multiple types (Mark Langsdorf) [RHEL-54149]
- ACPI: bus: update acpi_dev_uid_match() to support multiple types (Mark Langsdorf) [RHEL-54149]
- drivers: base: Implement weak arch_unregister_cpu() (Mark Langsdorf) [RHEL-54149]
- drivers: base: Allow parts of GENERIC_CPU_DEVICES to be overridden (Mark Langsdorf) [RHEL-54149]
- drivers: base: Use present CPUs in GENERIC_CPU_DEVICES (Mark Langsdorf) [RHEL-54149]
- ACPI: Move ACPI_HOTPLUG_CPU to be disabled on arm64 and riscv (Mark Langsdorf) [RHEL-54149]
- hwmon: (acpi_power_meter) Fix 4.29 MW bug (Mark Langsdorf) [RHEL-54149]
- x86/acpi: Use %%rip-relative addressing in wakeup_64.S (Mark Langsdorf) [RHEL-54149]
- genirq: Set IRQF_COND_ONESHOT in request_irq() (Mark Langsdorf) [RHEL-54149]
- genirq: Introduce IRQF_COND_ONESHOT and use it in pinctrl-amd (Mark Langsdorf) [RHEL-54149]
- platform/x86: intel: int0002_vgpio: Pass IRQF_ONESHOT to request_irq() (Mark Langsdorf) [RHEL-54149]
- pinctrl: amd: Add IRQF_ONESHOT to the interrupt request (Mark Langsdorf) [RHEL-54149]
- ACPI: OSL: Use a threaded interrupt handler for SCI (Mark Langsdorf) [RHEL-54149]
- ACPI: video: check for error while searching for backlight device parent (Mark Langsdorf) [RHEL-54149]
- ACPI: scan: Fix an error message in DisCo for Imaging support (Mark Langsdorf) [RHEL-54149]
- ACPI: Run USB4 _OSC() first with query bit set (Mark Langsdorf) [RHEL-54149]
- ACPI: video: Drop should_check_lcd_flag() (Mark Langsdorf) [RHEL-54149]
- ACPI: property: Replicate DT-aligned u32 properties from DisCo for Imaging (Mark Langsdorf) [RHEL-54149]
- ACPI: property: Dig "rotation" property for devices with CSI2 _CRS (Mark Langsdorf) [RHEL-54149]
- ACPI: scan: Extract MIPI DisCo for Imaging data into swnodes (Mark Langsdorf) [RHEL-54149]
- ACPI: scan: Extract _CRS CSI-2 connection information into swnodes (Mark Langsdorf) [RHEL-54149]
- ACPI: scan: Extract CSI-2 connection graph from _CRS (Mark Langsdorf) [RHEL-54149]
- device property: Add SOFTWARE_NODE() macro for defining software nodes (Mark Langsdorf) [RHEL-54149]
- ACPI: property: Support using strings in reference properties (Mark Langsdorf) [RHEL-54149]
- hwmon: (acpi_power_meter) replace open-coded kmemdup_nul (Mark Langsdorf) [RHEL-54149]
- PNP: ACPI: replace deprecated strncpy() with strscpy() (Mark Langsdorf) [RHEL-54149]
- ACPI: AC: Rename ACPI device from device to adev (Mark Langsdorf) [RHEL-54149]
- acpi, hmat: refactor hmat_register_target_initiators() (Mark Langsdorf) [RHEL-54149]
- ACPI: AC: Replace acpi_driver with platform_driver (Mark Langsdorf) [RHEL-54149]
- PNP: ACPI: Fix string truncation warning (Mark Langsdorf) [RHEL-54149]
- ACPI: tiny-power-button: Eliminate the driver notify callback (Mark Langsdorf) [RHEL-54149]
- ACPI: resource: Skip IRQ override on ASUS ExpertBook B1502CBA (Mark Langsdorf) [RHEL-54149]
- ACPI: x86: utils: Add Picasso to the list for forcing StorageD3Enable (Mark Langsdorf) [RHEL-54149]
- PM: ACPI: reboot: Reinstate S5 for reboot (Mark Langsdorf) [RHEL-54149]
- kernel/reboot: Add SYS_OFF_MODE_RESTART_PREPARE mode (Mark Langsdorf) [RHEL-54149]
- hwmon: (acpi_power_meter) Switch to DEFINE_SIMPLE_DEV_PM_OPS() and pm_sleep_ptr() (Mark Langsdorf) [RHEL-54149]
- ACPI: video: Add Toshiba Satellite/Portege Z830 quirk (Mark Langsdorf) [RHEL-54149]
- ACPI: video: Simplify acpi_video_unregister_backlight() (Mark Langsdorf) [RHEL-54149]
- ACPI: video: Remove acpi_video_bus from list before tearing it down (Mark Langsdorf) [RHEL-54149]
- ACPI: OSI: Remove Linux-HPI-Hybrid-Graphics _OSI string (Mark Langsdorf) [RHEL-54149]
- ACPI: OSI: Remove Linux-Dell-Video _OSI string (Mark Langsdorf) [RHEL-54149]
- ACPI: OSI: Remove Linux-Lenovo-NV-HDMI-Audio _OSI string (Mark Langsdorf) [RHEL-54149]
- ACPICA: executer/exsystem: Fix some typo mistakes (Mark Langsdorf) [RHEL-54149]
- hwmon: (acpi_power_meter) Fix style issues (Mark Langsdorf) [RHEL-54149]
- arm64: Use do_kernel_power_off() (Mark Langsdorf) [RHEL-54149]
- efi: Fix efi_power_off() not being run before acpi_power_off() when necessary (Mark Langsdorf) [RHEL-54149]
- ACPI: power: Switch to sys-off handler API (Mark Langsdorf) [RHEL-54149]
- ACPICA: executer/exsystem: Inform users about ACPI spec violation (Mark Langsdorf) [RHEL-54149]
- ACPICA: executer/exsystem: Add units to time variable names (Mark Langsdorf) [RHEL-54149]
- s390/dasd: Remove DMA alignment (Mete Durlu) [RHEL-58207]
- pipe: wakeup wr_wait after setting max_usage (Brian Foster) [RHEL-37087] {CVE-2023-52672}
- fs/pipe: use spinlock in pipe_read() only if there is a watch_queue (Brian Foster) [RHEL-37087]
- fs/pipe: remove unnecessary spinlock from pipe_write() (Brian Foster) [RHEL-37087]
- fs/pipe: move check to pipe_has_watch_queue() (Brian Foster) [RHEL-37087]
- pipe: reduce padding in struct pipe_inode_info (Brian Foster) [RHEL-37087]
- pipe: make poll_usage boolean and annotate its access (Brian Foster) [RHEL-37087]
- bonding: fix xfrm real_dev null pointer dereference (CKI Backport Bot) [RHEL-57241] {CVE-2024-44989}
- bonding: fix null pointer deref in bond_ipsec_offload_ok (CKI Backport Bot) [RHEL-57235] {CVE-2024-44990}
- ibmveth: Recycle buffers during replenish phase (Mamatha Inamdar) [RHEL-52913]
- ibmveth: Optimize poll rescheduling process (Mamatha Inamdar) [RHEL-52913]
- gpio: pca953x: fix pca953x_irq_bus_sync_unlock race (CKI Backport Bot) [RHEL-53831] {CVE-2024-42253}
Resolves: RHEL-37087, RHEL-52913, RHEL-53831, RHEL-54149, RHEL-57235, RHEL-57241, RHEL-57748, RHEL-58207

* Mon Sep 16 2024 Rado Vrbovsky <rvrbovsk@redhat.com> [5.14.0-510.el9]
- perf: Fix event leak upon exec and file release (Michael Petlan) [RHEL-55606] {CVE-2024-43869}
- perf: Fix event leak upon exit (Michael Petlan) [RHEL-55603] {CVE-2024-43870}
- task_work: Introduce task_work_cancel() again (Michael Petlan) [RHEL-55603]
- task_work: s/task_work_cancel()/task_work_cancel_func()/ (Michael Petlan) [RHEL-55603]
- net: openvswitch: fix overwriting ct original tuple for ICMPv6 (cki-backport-bot) [RHEL-44213] {CVE-2024-38558}
- net: drop bad gso csum_start and offset in virtio_net_hdr (Laurent Vivier) [RHEL-54891] {CVE-2024-43817}
- net: change maximum number of UDP segments to 128 (Laurent Vivier) [RHEL-54891] {CVE-2024-43817}
- net: more strict VIRTIO_NET_HDR_GSO_UDP_L4 validation (Laurent Vivier) [RHEL-54891] {CVE-2024-43817}
- net: missing check virtio (Laurent Vivier) [RHEL-54891] {CVE-2024-43817}
- fuse: Initialize beyond-EOF page contents before setting uptodate (CKI Backport Bot) [RHEL-56932] {CVE-2024-44947}
- wifi: mac80211: Avoid address calculations via out of bounds array indexing (CKI Backport Bot) [RHEL-51285] {CVE-2024-41071}
- nvme-pci: add missing condition check for existence of mapped data (Maurizio Lombardi) [RHEL-55099] {CVE-2024-42276}
- sctp: fix association labeling in the duplicate COOKIE-ECHO case (Ondrej Mosnacek) [RHEL-48647]
- s390/ap: Refine AP bus bindings complete processing (Cédric Le Goater) [RHEL-50373]
- ice: Add netif_device_attach/detach into PF reset flow (Michal Schmidt) [RHEL-56084]
- ext4: make sure the first directory block is not a hole (CKI Backport Bot) [RHEL-54975] {CVE-2024-42304}
- ext4: check dot and dotdot of dx_root before making dir indexed (CKI Backport Bot) [RHEL-54964] {CVE-2024-42305}
Resolves: RHEL-44213, RHEL-48647, RHEL-50373, RHEL-51285, RHEL-54891, RHEL-54964, RHEL-54975, RHEL-55099, RHEL-55603, RHEL-55606, RHEL-56084, RHEL-56932

* Fri Sep 13 2024 Rado Vrbovsky <rvrbovsk@redhat.com> [5.14.0-509.el9]
- RDMA/mana_ib: Set correct device into ib (Maxim Levitsky) [RHEL-54330]
- net: mana: Fix possible double free in error handling path (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Ignore optional access flags for MRs (Maxim Levitsky) [RHEL-54330]
- net: mana: Add support for page sizes other than 4KB on ARM64 (Maxim Levitsky) [RHEL-54330]
- net: mana: Use mana_cleanup_port_context() for rxq cleanup (Maxim Levitsky) [RHEL-54330]
- net: mana: Allow variable size indirection table (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Process QP error events in mana_ib (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: extend query device (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: set node_guid (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Modify QP state (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Implement uapi to create and destroy RC QP (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Create and destroy RC QP (Maxim Levitsky) [RHEL-54330]
- net: mana: Fix the extra HZ in mana_hwc_send_request (Maxim Levitsky) [RHEL-54330]
- net: mana: Enable MANA driver on ARM64 with 4K page size (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: implement uapi for creation of rnic cq (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: boundary check before installing cq callbacks (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: introduce a helper to remove cq callbacks (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: create and destroy RNIC cqs (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: create EQs for RNIC CQs (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Fix missing ret value (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Configure mac address in RNIC (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Adding and deleting GIDs (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Enable RoCE on port 1 (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Implement port parameters (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Create and destroy rnic adapter (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Add EQ creation for rnic adapter (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Use num_comp_vectors of ib_device (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: remove useless return values from dbg prints (Maxim Levitsky) [RHEL-54330]
- net: mana: Avoid open coded arithmetic (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Prefer struct_size over open coded arithmetic (Maxim Levitsky) [RHEL-54330]
- net: mana: Add flex array to struct mana_cfg_rx_steer_req_v2 (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Use struct mana_ib_queue for RAW QPs (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Use struct mana_ib_queue for WQs (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Use struct mana_ib_queue for CQs (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Introduce helpers to create and destroy mana queues (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Use virtual address in dma regions for MRs (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Fix bug in creation of dma regions (Maxim Levitsky) [RHEL-54330]
- net: mana: Assigning IRQ affinity on HT cores (Maxim Levitsky) [RHEL-54330]
- net: mana: add a function to spread IRQs per CPUs (Maxim Levitsky) [RHEL-54330]
- cpumask: define cleanup function for cpumasks (Maxim Levitsky) [RHEL-54330]
- cpumask: add cpumask_weight_andnot() (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Introduce mana_ib_install_cq_cb helper function (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Introduce mana_ib_get_netdev helper function (Maxim Levitsky) [RHEL-54330]
- RDMA/mana_ib: Introduce mdev_to_gc helper function (Maxim Levitsky) [RHEL-54330]
- ping: fix address binding wrt vrf (Antoine Tenart) [RHEL-50920]
- mtd: spi-nor: core: Introduce method for RDID op (Joel Slebodnick) [RHEL-40636]
- mtd: spi-nor: core: Use auto-detection only once (Joel Slebodnick) [RHEL-40636]
- mtd: spi-nor: Introduce spi_nor_match_id() (Joel Slebodnick) [RHEL-40636]
- mtd: spi-nor: Rename method, s/spi_nor_match_id/spi_nor_match_name (Joel Slebodnick) [RHEL-40636]
Resolves: RHEL-40636, RHEL-50920, RHEL-54330

* Thu Sep 12 2024 Rado Vrbovsky <rvrbovsk@redhat.com> [5.14.0-508.el9]
- usb: xhci: prevent potential failure in handle_tx_event() for Transfer events without TRB (Desnes Nunes) [RHEL-52378] {CVE-2024-42226}
- redhat: set defaults for RHEL 9.5 (Lucas Zampieri)
- redhat/configs: Make CONFIG_REGULATOR_GPIO built-in (Luiz Capitulino) [RHEL-21095]
- redhat/configs: enable a bunch of regulators (Luiz Capitulino) [RHEL-21095]
- md-cluster: fix no recovery job when adding/re-adding a disk (Nigel Croxon) [RHEL-46615]
- md-cluster: fix hanging issue while a new disk adding (Nigel Croxon) [RHEL-46615]
- md/raid5: recheck if reshape has finished with device_lock held (Nigel Croxon) [RHEL-46615]
- md: Don't wait for MD_RECOVERY_NEEDED for HOT_REMOVE_DISK ioctl (Nigel Croxon) [RHEL-46615]
- md-cluster: Constify struct md_cluster_operations (Nigel Croxon) [RHEL-46615]
- md/raid5: fix spares errors about rcu usage (Nigel Croxon) [RHEL-46615]
- md: pass in max_sectors for pers->sync_request() (Nigel Croxon) [RHEL-46615]
- md: factor out helpers for different sync_action in md_do_sync() (Nigel Croxon) [RHEL-46615]
- md: replace last_sync_action with new enum type (Nigel Croxon) [RHEL-46615]
- md: use new helpers in md_do_sync() (Nigel Croxon) [RHEL-46615]
- md: don't fail action_store() if sync_thread is not registered (Nigel Croxon) [RHEL-46615]
- md: remove parameter check_seq for stop_sync_thread() (Nigel Croxon) [RHEL-46615]
- md: replace sysfs api sync_action with new helpers (Nigel Croxon) [RHEL-46615]
- md: factor out helper to start reshape from action_store() (Nigel Croxon) [RHEL-46615]
- md: add new helpers for sync_action (Nigel Croxon) [RHEL-46615]
- md: add a new enum type sync_action (Nigel Croxon) [RHEL-46615]
- md: rearrange recovery_flags (Nigel Croxon) [RHEL-46615]
- md/md-bitmap: fix writing non bitmap pages (Nigel Croxon) [RHEL-46615]
- md: make md_flush_request() more readable (Nigel Croxon) [RHEL-46615]
- md: change the return value type of md_write_start to void (Nigel Croxon) [RHEL-46615]
- md: do not delete safemode_timer in mddev_suspend (Nigel Croxon) [RHEL-46615]
- lib: objagg: Fix general protection fault (Waiman Long) [RHEL-54790 RHEL-54793] {CVE-2024-43846}
- Revert "x86/topology: Switch over to GENERIC_CPU_DEVICES" (David Arcari) [RHEL-58031]
- Revert "x86/topology: use weak version of arch_unregister_cpu()" (David Arcari) [RHEL-58031]
- Revert "x86/topology: convert to use arch_cpu_is_hotpluggable()" (David Arcari) [RHEL-58031]
- Revert "x86/cpu: Move leftover contents of topology.c to setup.c" (David Arcari) [RHEL-58031]
- x86/resctrl: Remove redundant variable in mbm_config_write_domain() (David Arcari) [RHEL-57701]
- x86/resctrl: Read supported bandwidth sources from CPUID (David Arcari) [RHEL-57701]
- x86/resctrl: Remove hard-coded memory bandwidth limit (David Arcari) [RHEL-57701]
Resolves: RHEL-21095, RHEL-46615, RHEL-52378, RHEL-54790, RHEL-54793, RHEL-57701, RHEL-58031

* Wed Sep 11 2024 Rado Vrbovsky <rvrbovsk@redhat.com> [5.14.0-507.el9]
- block: fix deadlock between sd_remove & sd_release (CKI Backport Bot) [RHEL-54997] {CVE-2024-42294}
- gpio: prevent potential speculation leaks in gpio_device_get_desc() (CKI Backport Bot) [RHEL-56213] {CVE-2024-44931}
- redhat: hmac sign the UKI for FIPS (Vitaly Kuznetsov)
- Also make vmlinuz-virt.efi world readable (Vitaly Kuznetsov)
- ice: fix truesize operations for PAGE_SIZE >= 8192 (Petr Oros) [RHEL-37905]
- ice: fix ICE_LAST_OFFSET formula (Petr Oros) [RHEL-37905]
- ice: fix page reuse when PAGE_SIZE is over 8k (Petr Oros) [RHEL-37905]
- usb: cdns3: Fix spelling mistake "supporte" -> "supported" (Martin McConnell) [RHEL-54566]
- usb: cdns3: fixed memory use after free at cdns3_gadget_ep_disable() (Martin McConnell) [RHEL-54566]
- usb: cdns3: fix memory double free when handle zero packet (Martin McConnell) [RHEL-54566]
- usb: cdnsp: fixed issue with incorrect detecting CDNSP family controllers (Martin McConnell) [RHEL-54566]
- usb: cdnsp: blocked some cdns3 specific code (Martin McConnell) [RHEL-54566]
- usb: cdns3: Fix uvc fail when DMA cross 4k boundery since sg enabled (Martin McConnell) [RHEL-54566]
- usb: cdns3: fix iso transfer error when mult is not zero (Martin McConnell) [RHEL-54566]
- usb: cdns3: fix uvc failure work since sg support enabled (Martin McConnell) [RHEL-54566]
- usb: cdns3: Use dev_err_probe (Martin McConnell) [RHEL-54566]
- usb: cdns3: starfive: don't misuse /** comment (Martin McConnell) [RHEL-54566]
- usb: cdnsp: Replace snprintf() with the safer scnprintf() variant (Martin McConnell) [RHEL-54566]
- usb: cdns3: skip set TRB_IOC when usb_request: no_interrupt is true (Martin McConnell) [RHEL-54566]
- usb: cdnsp: Fix deadlock issue during using NCM gadget (Martin McConnell) [RHEL-54566]
- usb:cdnsp: remove TRB_FLUSH_ENDPOINT command (Martin McConnell) [RHEL-54566]
- usb: cdns3: Modify the return value of cdns_set_active () to void when CONFIG_PM_SLEEP is disabled (Martin McConnell) [RHEL-54566]
- usb: cdnsp: Fixes issue with dequeuing not queued requests (Martin McConnell) [RHEL-54566]
- usb: cdns3: Add PHY mode switch to usb2 PHY (Martin McConnell) [RHEL-54566]
- usb: cdns3: starfive: Convert to platform remove callback returning void (Martin McConnell) [RHEL-54566]
- usb: cdns3: Put the cdns set active part outside the spin lock (Martin McConnell) [RHEL-54566]
- usb: cdns3: fix incorrect calculation of ep_buf_size when more than one config (Martin McConnell) [RHEL-54566]
- usb: cdns3: imx: Rework system PM to avoid duplicated operations (Martin McConnell) [RHEL-54566]
- usb: cdns3: optimize OUT transfer by copying only actual received data (Martin McConnell) [RHEL-54566]
- usb: cdns3: improve handling of unaligned address case (Martin McConnell) [RHEL-54566]
- usb: cdns3: Add StarFive JH7110 USB driver (Martin McConnell) [RHEL-54566]
- usb: cdns3: imx: simplify clock name usage (Martin McConnell) [RHEL-54566]
- usb: cdns3: fix NCM gadget RX speed 20x slow than expection at iMX8QM (Martin McConnell) [RHEL-54566]
- usb: cdns3-ti: Convert to platform remove callback returning void (Martin McConnell) [RHEL-54566]
- usb: cdns3-plat: Convert to platform remove callback returning void (Martin McConnell) [RHEL-54566]
- usb: cdns3-imx: Convert to platform remove callback returning void (Martin McConnell) [RHEL-54566]
- usb: cdnsp: Fixes error: uninitialized symbol 'len' (Martin McConnell) [RHEL-54566]
- usb: cdnsp: changes PCI Device ID to fix conflict with CNDS3 driver (Martin McConnell) [RHEL-54566]
- usb: cdns3: Fix issue with using incorrect PCI device function (Martin McConnell) [RHEL-54566]
- usb: cdnsp: Fixes issue with redundant Status Stage (Martin McConnell) [RHEL-54566]
- usb: cdns3: change some trace event __dynamic_array() to __get_buf() (Martin McConnell) [RHEL-54566]
- usb: cdns3: change trace event cdns3_ring() operation (Martin McConnell) [RHEL-54566]
- usb: cdnsp: : add scatter gather support for ISOC endpoint (Martin McConnell) [RHEL-54566]
- usb: cdns3: remove fetched trb from cache before dequeuing (Martin McConnell) [RHEL-54566]
- usb: cdnsp: fix lack of ZLP for ep0 (Martin McConnell) [RHEL-54566]
- usb: cdnsp: fix issue with ZLP - added TD_SIZE = 1 (Martin McConnell) [RHEL-54566]
- usb: cdnsp: Fix issue with Clear Feature Halt Endpoint (Martin McConnell) [RHEL-54566]
- usb: cdns3: host: fix endless superspeed hub port reset (Martin McConnell) [RHEL-54566]
- usb: cdns3: adjust the partial logic of cdnsp_pci_remove (Martin McConnell) [RHEL-54566]
- usb: cdns3: remove dead code (Martin McConnell) [RHEL-54566]
- Bluetooth: MGMT: Add error handling to pair_device() (CKI Backport Bot) [RHEL-56148] {CVE-2024-43884}
- PCI/DPC: Fix use-after-free on concurrent DPC and hot-removal (Myron Stowe) [RHEL-54981] {CVE-2024-42302}
- ASoC: TAS2781: Fix tasdev_load_calibrated_data() (CKI Backport Bot) [RHEL-55177] {CVE-2024-42278}
- cgroup/cpuset: Prevent UAF in proc_cpuset_show() (Waiman Long) [RHEL-54775 RHEL-54779] {CVE-2024-43853}
- net: add and use __skb_get_hash_symmetric_net (Hangbin Liu) [RHEL-54921]
- net: add and use skb_get_hash_net (Hangbin Liu) [RHEL-54921]
- net: flow_dissector: use DEBUG_NET_WARN_ON_ONCE (CKI Backport Bot) [RHEL-54921] {CVE-2024-42321}
- ice: Adjust PTP init for 2x50G E825C devices (Petr Oros) [RHEL-29210]
- ice: Add NAC Topology device capability parser (Petr Oros) [RHEL-29210]
- ice: Add support for E825-C TS PLL handling (Petr Oros) [RHEL-29210]
- ice: Change CGU regs struct to anonymous (Petr Oros) [RHEL-29210]
- ice: Introduce ETH56G PHY model for E825C products (Petr Oros) [RHEL-29210]
- ice: Introduce ice_get_base_incval() helper (Petr Oros) [RHEL-29210]
- ice: Move CGU block (Petr Oros) [RHEL-29210]
- ice: Add PHY OFFSET_READY register clearing (Petr Oros) [RHEL-29210]
- ice: Implement Tx interrupt enablement functions (Petr Oros) [RHEL-29210]
- ice: Introduce helper to get tmr_cmd_reg values (Petr Oros) [RHEL-29210]
- ice: Introduce ice_ptp_hw struct (Petr Oros) [RHEL-29210]
- Bluetooth: Fix use-after-free bugs caused by sco_sock_timeout (CKI Backport Bot) [RHEL-17953 RHEL-36378] {CVE-2024-27398}
- Bluetooth: btintel: Fixe build regression (Bastien Nocera) [RHEL-37353] {CVE-2024-35933}
- Bluetooth: btintel: Fix null ptr deref in btintel_read_version (CKI Backport Bot) [RHEL-37353] {CVE-2024-35933}
- Bluetooth: fix connection setup in l2cap_connect (Bastien Nocera) [RHEL-38459] {CVE-2024-36013}
- Bluetooth: HCI: Remove HCI_AMP support (Bastien Nocera) [RHEL-38459] {CVE-2024-36013}
- Bluetooth: Remove HCI_POWER_OFF_TIMEOUT (Bastien Nocera) [RHEL-38459] {CVE-2024-36013}
- Bluetooth: hci_event: Remove code to removed CONFIG_BT_HS (Bastien Nocera) [RHEL-38459] {CVE-2024-36013}
- Bluetooth: Remove usage of the deprecated ida_simple_xx() API (Bastien Nocera) [RHEL-38459] {CVE-2024-36013}
- Bluetooth: L2CAP: Fix slab-use-after-free in l2cap_connect() (Bastien Nocera) [RHEL-38459] {CVE-2024-36013}
- Bluetooth: Remove BT_HS (Bastien Nocera) [RHEL-38459] {CVE-2024-36013}
- Bluetooth: qca: add missing firmware sanity checks (CKI Backport Bot) [RHEL-39643] {CVE-2024-36880}
- Bluetooth: hci_sock: Fix not validating setsockopt user input (Bastien Nocera) [RHEL-37411] {CVE-2024-35963}
- Bluetooth: SCO: Fix not validating setsockopt user input (Bastien Nocera) [RHEL-37396] {CVE-2024-35967}
- Bluetooth: L2CAP: Fix not validating setsockopt user input (Bastien Nocera) [RHEL-37404] {CVE-2024-35965}
- Bluetooth: ISO: Fix not validating setsockopt user input (Bastien Nocera) [RHEL-37406] {CVE-2024-35964}
- Bluetooth: RFCOMM: Fix not validating setsockopt user input (Bastien Nocera) [RHEL-37400] {CVE-2024-35966}
- Bluetooth: Fix memory leak in hci_req_sync_complete() (CKI Backport Bot) [RHEL-37378] {CVE-2024-35978}
- Bluetooth: msft: fix slab-use-after-free in msft_do_close() (CKI Backport Bot) [RHEL-38463] {CVE-2024-36012}
- rtc: tps6594: Fix memleak in probe (Joel Slebodnick) [RHEL-45915]
- redhat/configs: add config file for tps6594 pfsm (Joel Slebodnick) [RHEL-45915]
- redhat/configs: add config file for tps6594 esm (Joel Slebodnick) [RHEL-45915]
- redhat/configs: add config file for tps6594 rtc drv (Joel Slebodnick) [RHEL-45915]
- redhat/configs: add config file for tps6594 regulator (Joel Slebodnick) [RHEL-45915]
- redhat/configs: add config file for tps6594 pinctrl (Joel Slebodnick) [RHEL-45915]
- redhat/configs: add config file for tps6594 spi (Joel Slebodnick) [RHEL-45915]
- redhat/configs: add config file for tps6594 i2c (Joel Slebodnick) [RHEL-45915]
- regulator: tps6594-regulator: Correct multi-phase configuration (Joel Slebodnick) [RHEL-45915]
- rtc: tps6594: Add driver for TPS6594 RTC (Joel Slebodnick) [RHEL-45915]
- pinctrl: tps6594: Add driver for TPS6594 pinctrl and GPIOs (Joel Slebodnick) [RHEL-45915]
- regulator: tps6594-regulator: Fix random kernel crash (Joel Slebodnick) [RHEL-45915]
- misc: tps6594: Remove redundant dev_err_probe() for platform_get_irq_byname() (Joel Slebodnick) [RHEL-45915]
- misc: tps6594-esm: Disable ESM for rev 1 PMIC (Joel Slebodnick) [RHEL-45915]
- misc: tps6594-esm: Convert to platform remove callback returning void (Joel Slebodnick) [RHEL-45915]
- misc: tps6594-pfsm: Convert to platform remove callback returning void (Joel Slebodnick) [RHEL-45915]
- misc: tps6594-pfsm: Add driver for TI TPS6594 PFSM (Joel Slebodnick) [RHEL-45915]
- misc: tps6594-esm: Add driver for TI TPS6594 ESM (Joel Slebodnick) [RHEL-45915]
- regulator: tps6594-regulator: Add driver for TI TPS6594 regulators (Joel Slebodnick) [RHEL-45915]
- mfd: tps6594: Add null pointer check to tps6594_device_init() (Joel Slebodnick) [RHEL-45915]
- mfd: tps6594: Fix an error code in probe() (Joel Slebodnick) [RHEL-45915]
- mfd: tps6594: Add driver for TI TPS6594 PMIC (Joel Slebodnick) [RHEL-45915]
- mfd: tps80031: Remove driver (Joel Slebodnick) [RHEL-45915]
- dt-bindings: mfd: Add TI TPS6594 PMIC (Joel Slebodnick) [RHEL-45915]
- x86/mce: Implement recovery for errors in TDX/SEAM non-root mode (David Arcari) [RHEL-28497]
Resolves: RHEL-17953, RHEL-28497, RHEL-29210, RHEL-36378, RHEL-37353, RHEL-37378, RHEL-37396, RHEL-37400, RHEL-37404, RHEL-37406, RHEL-37411, RHEL-37905, RHEL-38459, RHEL-38463, RHEL-39643, RHEL-45915, RHEL-54566, RHEL-54775, RHEL-54779, RHEL-54921, RHEL-54981, RHEL-54997, RHEL-55177, RHEL-56148, RHEL-56213

* Fri Sep 06 2024 Rado Vrbovsky <rvrbovsk@redhat.com> [5.14.0-506.el9]
- powercap: idle_inject: Simplify if condition (David Arcari) [RHEL-53594]
- powercap: intel_rapl: Switch to new Intel CPU model defines (David Arcari) [RHEL-53594]
- powercap: intel_rapl_msr: Switch to new Intel CPU model defines (David Arcari) [RHEL-53594]
- powercap: intel_rapl_tpmi: Enable PMU support (David Arcari) [RHEL-53594]
- powercap: intel_rapl: Introduce APIs for PMU support (David Arcari) [RHEL-53594]
- powercap: intel_rapl: Sort header files (David Arcari) [RHEL-53594]
- powercap: intel_rapl: Add support for ArrowLake-H platform (David Arcari) [RHEL-53594]
- Update 9.6 selt-tests (Lucas Zampieri)
Resolves: RHEL-53594

* Wed Sep 04 2024 Rado Vrbovsky <rvrbovsk@redhat.com> [5.14.0-505.el9]
- PCI: Revert the cfg_access_lock lockdep mechanism (Myron Stowe) [RHEL-50255]
- PCI: Make pcie_bandwidth_capable() static (Myron Stowe) [RHEL-50255]
- x86/pci: Remove OLPC dead code (Myron Stowe) [RHEL-50255]
- PCI: Clean up accessor macro formatting (Myron Stowe) [RHEL-50255]
- PCI/ERR: Cleanup misleading indentation inside if conditions (Myron Stowe) [RHEL-50255]
- PCI: Annotate pci_cache_line_size variables as __ro_after_init (Myron Stowe) [RHEL-50255]
- PCI: Constify pcibus_class (Myron Stowe) [RHEL-50255]
- Revert "genirq/msi: Provide constants for PCI/IMS support" (Myron Stowe) [RHEL-50255]
- Revert "x86/apic/msi: Enable PCI/IMS" (Myron Stowe) [RHEL-50255]
- Revert "iommu/vt-d: Enable PCI/IMS" (Myron Stowe) [RHEL-50255]
- Revert "iommu/amd: Enable PCI/IMS" (Myron Stowe) [RHEL-50255]
- Revert "PCI/MSI: Provide IMS (Interrupt Message Store) support" (Myron Stowe) [RHEL-50255]
- Revert "PCI/MSI: Provide pci_ims_alloc/free_irq()" (Myron Stowe) [RHEL-50255]
- PCI: endpoint: pci-epf-test: Clean up pci_epf_test_unbind() (Myron Stowe) [RHEL-50255]
- PCI: endpoint: pci-epf-test: Simplify pci_epf_test_set_bar() loop (Myron Stowe) [RHEL-50255]
- PCI: endpoint: pci-epf-test: Remove superfluous code (Myron Stowe) [RHEL-50255]
- PCI: endpoint: Allocate a 64-bit BAR if that is the only option (Myron Stowe) [RHEL-50255]
- PCI: endpoint: pci-epf-test: Simplify pci_epf_test_alloc_space() loop (Myron Stowe) [RHEL-50255]
- PCI: tegra194: Fix probe path for Endpoint mode (Myron Stowe) [RHEL-50255]
- PCI: rockchip-ep: Remove wrong mask on subsys_vendor_id (Myron Stowe) [RHEL-50255]
- PCI: rockchip-ep: Set a 64-bit BAR if requested (Myron Stowe) [RHEL-50255]
- PCI: mt7621: Fix string truncation in mt7621_pcie_parse_port() (Myron Stowe) [RHEL-50255]
- PCI: endpoint: Remove "core_init_notifier" flag (Myron Stowe) [RHEL-50255]
- PCI: dwc: ep: Call dw_pcie_ep_init_registers() API directly from all glue drivers (Myron Stowe) [RHEL-50255]
- PCI: dwc: ep: Rename dw_pcie_ep_init_complete() to dw_pcie_ep_init_registers() (Myron Stowe) [RHEL-50255]
- PCI: dwc: ep: Introduce dw_pcie_ep_cleanup() API for drivers supporting PERST# (Myron Stowe) [RHEL-50255]
- PCI: dwc: ep: Rename dw_pcie_ep_exit() to dw_pcie_ep_deinit() (Myron Stowe) [RHEL-50255]
- PCI: dwc: ep: Remove deinit() callback from struct dw_pcie_ep_ops (Myron Stowe) [RHEL-50255]
- PCI: dwc: ep: Add Kernel-doc comments for APIs (Myron Stowe) [RHEL-50255]
- PCI: dwc: ep: Fix DBI access failure for drivers requiring refclk from host (Myron Stowe) [RHEL-50255]
- PCI: cadence: Set a 64-bit BAR if requested (Myron Stowe) [RHEL-50255]
- dt-bindings: PCI: rockchip,rk3399-pcie: Add missing maxItems to ep-gpios (Myron Stowe) [RHEL-50255]
- dt-bindings: PCI: rcar-gen4-pci-ep: Add R-Car V4H compatible (Myron Stowe) [RHEL-50255]
- dt-bindings: PCI: rcar-gen4-pci-host: Add R-Car V4H compatible (Myron Stowe) [RHEL-50255]
- dt-bindings: PCI: layerscape-pci: Convert to YAML format (Myron Stowe) [RHEL-50255]
- dt-bindings: PCI: mediatek,mt7621: Add missing child node reg (Myron Stowe) [RHEL-50255]
- dt-bindings: PCI: cdns,cdns-pcie-host: Drop redundant msi-parent and pci-bus.yaml (Myron Stowe) [RHEL-50255]
- dt-bindings: PCI: ti,am65: Fix remaining binding warnings (Myron Stowe) [RHEL-50255]
- dt-bindings: PCI: ti,j721e-pci-host: Add support for J722S SoC (Myron Stowe) [RHEL-50255]
- dt-bindings: PCI: rcar-pci-host: Add missing IOMMU properties (Myron Stowe) [RHEL-50255]
- dt-bindings: PCI: ti,j721e-pci-host: Add device-id for TI's J784S4 SoC (Myron Stowe) [RHEL-50255]
- PCI/PM: Avoid D3cold for HP Pavilion 17 PC/1972 PCIe Ports (Myron Stowe) [RHEL-50255]
- PCI: of_property: Return error for int_map allocation failure (Myron Stowe) [RHEL-50255]
- PCI/MSI: Make error path handling follow the standard pattern (Myron Stowe) [RHEL-50255]
- PCI: hotplug: Remove obsolete sgi_hotplug TODO notes (Myron Stowe) [RHEL-50255]
- PCI: hotplug: Document unchecked return value of pci_hp_add_bridge() (Myron Stowe) [RHEL-50255]
- PCI: Do not wait for disconnected devices when resuming (Myron Stowe) [RHEL-50255]
- x86/pci: Skip early E820 check for ECAM region (Myron Stowe) [RHEL-50255]
- PCI: Remove unused pci_enable_device_io() (Myron Stowe) [RHEL-50255]
- ata: pata_cs5520: Remove unnecessary call to pci_enable_device_io() (Myron Stowe) [RHEL-50255]
- PCI: Update pci_find_capability() stub return types (Myron Stowe) [RHEL-50255]
- PCI: Remove PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- scsi: vmw_pvscsi: Do not use PCI_IRQ_LEGACY instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- scsi: pmcraid: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- scsi: mpt3sas: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- scsi: megaraid_sas: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- scsi: ipr: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- scsi: hpsa: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- scsi: arcmsr: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- wifi: rtw89: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- wifi: rtw88: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- wifi: ath10k: Refer to INTX instead of LEGACY (Myron Stowe) [RHEL-50255]
- r8169: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- net: alx: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- net: atlantic: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- net: amd-xgbe: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- VMCI: Use PCI_IRQ_ALL_TYPES to remove PCI_IRQ_LEGACY use (Myron Stowe) [RHEL-50255]
- RDMA/vmw_pvrdma: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- IB/qib: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- drm/amdgpu: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- mfd: intel-lpss: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- ntb: idt: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- platform/x86: intel_ips: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- tty: 8250_pci: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- usb: hcd-pci: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- ASoC: Intel: avs: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- Documentation: PCI: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- PCI/portdrv: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- PCI/MSI: Use PCI_IRQ_INTX instead of PCI_IRQ_LEGACY (Myron Stowe) [RHEL-50255]
- PCI: Clarify intent of LT wait (Myron Stowe) [RHEL-50255]
- PCI: Wait for Link Training==0 before starting Link retrain (Myron Stowe) [RHEL-50255]
- PCI/EDR: Align EDR_PORT_LOCATE_DSM with PCI Firmware r3.3 (Myron Stowe) [RHEL-50255]
- PCI/EDR: Align EDR_PORT_DPC_ENABLE_DSM with PCI Firmware r3.3 (Myron Stowe) [RHEL-50255]
- PCI/DOE: Support discovery version 2 (Myron Stowe) [RHEL-50255]
- PCI: Lock upstream bridge for pci_reset_function() (Myron Stowe) [RHEL-50255]
- PCI/ASPM: Clean up ASPM disable/enable mask calculation (Myron Stowe) [RHEL-50255]
- PCI/ASPM: Consolidate link state defines (Myron Stowe) [RHEL-50255]
- PCI/AER: Update aer-inject tool source URL (Myron Stowe) [RHEL-50255]
- PCI: Mask Replay Timer Timeout errors for Genesys GL975x SD host controller (Myron Stowe) [RHEL-50255]
- of: unittest: Add tests for address translations (Myron Stowe) [RHEL-50255]
- of: address: Fix address translation when address-size is greater than 2 (Myron Stowe) [RHEL-50255]
- PCI: of: Destroy changeset when adding PCI device node fails (Myron Stowe) [RHEL-50255]
- PCI: of_property: Handle interrupt parsing failures (Myron Stowe) [RHEL-50255]
- PCI: Create device tree node for bridge (Myron Stowe) [RHEL-50255]
- dt-bindings: PCI: Drop unneeded quotes (Myron Stowe) [RHEL-50255]
- PCI/DOE: Relax restrictions on request and response size (Myron Stowe) [RHEL-50255]
- PCI/DOE: Make mailbox creation API private (Myron Stowe) [RHEL-50255]
- dt-bindings: PCI: ti,j721e-pci-host: Simplify 'device-id' schema (Myron Stowe) [RHEL-50255]
- dt-bindings: PCI: cdns-ep: Fix 'unevaluatedProperties' warnings (Myron Stowe) [RHEL-50255]
- dt-bindings: PCI: Fix 'unevaluatedProperties' warnings (Myron Stowe) [RHEL-50255]
- ptp: annotate data-race around q->head and q->tail (Hangbin Liu) [RHEL-38600]
- Input: gpio_keys_polled - suppress deferred probe error for gpio (Luiz Capitulino) [RHEL-52234]
- Input: gpio_keys_polled - simplify with dev_err_probe() (Luiz Capitulino) [RHEL-52234]
- redhat/configs: enable CONFIG_KEYBOARD_GPIO_POLLED driver (Luiz Capitulino) [RHEL-52234]
- net/smc: reduce rtnl pressure in smc_pnet_create_pnetids_list() (Mete Durlu) [RHEL-37349] {CVE-2024-35934}
- net/iucv: fix use after free in iucv_sock_close() (Mete Durlu) [RHEL-53992]
- tools/virtio: Add dma sync api for virtio test (Eric Auger) [RHEL-3230]
- virtio_ring: fix syncs DMA memory with different direction (Eric Auger) [RHEL-3230]
- virtio: packed: fix unmap leak for indirect desc table (Eric Auger) [RHEL-3230]
- virtio_net: fix missing dma unmap for resize (Eric Auger) [RHEL-3230]
- virtio_net: avoid data-races on dev->stats fields (Eric Auger) [RHEL-3230]
- virtio_net: fix the missing of the dma cpu sync (Eric Auger) [RHEL-3230]
- virtio_net: merge dma operations when filling mergeable buffers (Eric Auger) [RHEL-3230]
- virtio_ring: introduce dma sync api for virtqueue (Eric Auger) [RHEL-3230]
- virtio_ring: introduce dma map api for virtqueue (Eric Auger) [RHEL-3230]
- virtio_ring: introduce virtqueue_reset() (Eric Auger) [RHEL-3230]
- virtio_ring: separate the logic of reset/enable from virtqueue_resize (Eric Auger) [RHEL-3230]
- virtio_ring: correct the expression of the description of virtqueue_resize() (Eric Auger) [RHEL-3230]
- virtio_ring: skip unmap for premapped (Eric Auger) [RHEL-3230]
- virtio_ring: introduce virtqueue_dma_dev() (Eric Auger) [RHEL-3230]
- virtio_ring: support add premapped buf (Eric Auger) [RHEL-3230]
- virtio_ring: introduce virtqueue_set_dma_premapped() (Eric Auger) [RHEL-3230]
- virtio_ring: put mapping error check in vring_map_one_sg (Eric Auger) [RHEL-3230]
- virtio_ring: check use_dma_api before unmap desc for indirect (Eric Auger) [RHEL-3230]
- s390/dasd: fix error recovery leading to data corruption on ESE devices (Mete Durlu) [RHEL-55873]
Resolves: RHEL-3230, RHEL-37349, RHEL-38600, RHEL-50255, RHEL-52234, RHEL-53992, RHEL-55873

* Mon Sep 02 2024 Rado Vrbovsky <rvrbovsk@redhat.com> [5.14.0-504.el9]
- Bump RHEL MINOR to 9.6 (Rado Vrbovsky)
- block: initialize integrity buffer to zero before writing it to media (Ming Lei) [RHEL-54768] {CVE-2024-43854}
- perf/x86/amd/uncore: Fix DF and UMC domain identification (David Arcari) [RHEL-43147]
- x86/mm/numa: Move early mptable evaluation into common code (David Arcari) [RHEL-43147]
- x86/cpu: Move leftover contents of topology.c to setup.c (David Arcari) [RHEL-43147]
- x86/topology: convert to use arch_cpu_is_hotpluggable() (David Arcari) [RHEL-43147]
- x86/topology: use weak version of arch_unregister_cpu() (David Arcari) [RHEL-43147]
- x86/topology: Switch over to GENERIC_CPU_DEVICES (David Arcari) [RHEL-43147]
- x86/topology: remove arch_*register_cpu() exports (David Arcari) [RHEL-43147]
- x86/topology/intel: Unlock CPUID before evaluating anything (David Arcari) [RHEL-43147]
- x86/topology/amd: Evaluate SMT in CPUID leaf 0x8000001e only on family 0x17 and greater (David Arcari) [RHEL-43147]
- x86/topology: Handle bogus ACPI tables correctly (David Arcari) [RHEL-43147]
- x86/topology/amd: Ensure that LLC ID is initialized (David Arcari) [RHEL-43147]
- x86/xen: return a sane initial apic id when running as PV guest (David Arcari) [RHEL-43147]
- x86/cpu/amd: Move TOPOEXT enablement into the topology parser (David Arcari) [RHEL-43147]
- x86/cpu/amd: Make the NODEID_MSR union actually work (David Arcari) [RHEL-43147]
- x86/cpu/amd: Make the CPUID 0x80000008 parser correct (David Arcari) [RHEL-43147]
- x86/topology: Don't update cpu_possible_map in topo_set_cpuids() (David Arcari) [RHEL-43147]
- x86/topology: Handle the !APIC case gracefully (David Arcari) [RHEL-43147]
- x86/topology: Don't evaluate logical IDs during early boot (David Arcari) [RHEL-43147]
- x86/cpu/topology: Add support for the AMD 0x80000026 leaf (David Arcari) [RHEL-43147]
- x86/topology: Ignore non-present APIC IDs in a present package (David Arcari) [RHEL-43147]
- x86/apic: Build the x86 topology enumeration functions on UP APIC builds too (David Arcari) [RHEL-43147]
- x86/cpu/topology: Get rid of cpuinfo::x86_max_cores (David Arcari) [RHEL-43147]
- docs: move x86 documentation into Documentation/arch/ [partial] (David Arcari) [RHEL-43147]
- x86/cpu: Remove x86_coreid_bits (David Arcari) [RHEL-43147]
- x86/mm/numa: Use core domain size on AMD (David Arcari) [RHEL-43147]
- x86/cpu/topology: Provide __num_[cores|threads]_per_package (David Arcari) [RHEL-43147]
- x86/cpu/topology: Rename smp_num_siblings (David Arcari) [RHEL-43147]
- arch/x86/kernel/setup.c: fixup rh_check_supported (David Arcari) [RHEL-43147]
- x86/cpu/topology: Retrieve cores per package from topology bitmaps (David Arcari) [RHEL-43147]
- x86/cpu/topology: Use topology logical mapping mechanism (David Arcari) [RHEL-43147]
- x86/smpboot: Change smp_store_boot_cpu_info() to static (David Arcari) [RHEL-43147]
- x86/cpu/topology: Provide logical pkg/die mapping (David Arcari) [RHEL-43147]
- x86/cpu/topology: Simplify cpu_mark_primary_thread() (David Arcari) [RHEL-43147]
- x86/cpu/topology: Mop up primary thread mask handling (David Arcari) [RHEL-43147]
- x86/cpu/topology: Use topology bitmaps for sizing (David Arcari) [RHEL-43147]
- x86/xen/smp_pv: Register the boot CPU APIC properly (David Arcari) [RHEL-43147]
- x86/cpu/topology: Let XEN/PV use topology from CPUID/MADT (David Arcari) [RHEL-43147]
- x86/acpi: Dont invoke topology_register_apic() for XEN PV (David Arcari) [RHEL-43147]
- x86/xen/smp_pv: Count number of vCPUs early (David Arcari) [RHEL-43147]
- x86/xen/smp_pv: Register fake APICs (David Arcari) [RHEL-43147]
- x86/mpparse: Switch to new init callbacks (David Arcari) [RHEL-43147]
- x86/mpparse: Provide separate early/late callbacks (David Arcari) [RHEL-43147]
- x86/dtb: Rename x86_dtb_init() (David Arcari) [RHEL-43147]
- x86/mpparse: Prepare for callback separation (David Arcari) [RHEL-43147]
- x86/xen/smp_pv: Prepare for separate mpparse callbacks (David Arcari) [RHEL-43147]
- x86/mpparse: Rename default_find_smp_config() (David Arcari) [RHEL-43147]
- x86/xen/smp_pv: Remove cpudata fiddling (David Arcari) [RHEL-43147]
- x86/cpu/topology: Assign hotpluggable CPUIDs during init (David Arcari) [RHEL-43147]
- x86/cpu/topology: Reject unknown APIC IDs on ACPI hotplug (David Arcari) [RHEL-43147]
- x86/topology: Add a mechanism to track topology via APIC IDs (David Arcari) [RHEL-43147]
- x86/cpu: Detect real BSP on crash kernels (David Arcari) [RHEL-43147]
- x86/cpu/topology: Rework possible CPU management (David Arcari) [RHEL-43147]
- x86/cpu/topology: Sanitize the APIC admission logic (David Arcari) [RHEL-43147]
- x86/cpu/topology: Use a data structure for topology info (David Arcari) [RHEL-43147]
- x86/cpu/topology: Simplify APIC registration (David Arcari) [RHEL-43147]
- x86/cpu/topology: Confine topology information (David Arcari) [RHEL-43147]
- x86/mpparse: Use new APIC registration function (David Arcari) [RHEL-43147]
- x86/acpi: Use new APIC registration functions (David Arcari) [RHEL-43147]
- x86/cpu/topology: Provide separate APIC registration functions (David Arcari) [RHEL-43147]
- x86/cpu/topology: Move registration out of APIC code (David Arcari) [RHEL-43147]
- x86/apic/msi: Use DOMAIN_BUS_GENERIC_MSI for HPET/IO-APIC domain search (David Arcari) [RHEL-43147]
- x86/apic: Use a proper define for invalid ACPI CPU ID (David Arcari) [RHEL-43147]
- x86/apic: Remove yet another dubious callback (David Arcari) [RHEL-43147]
- x86/apic: Remove the pointless writeback of boot_cpu_physical_apicid (David Arcari) [RHEL-43147]
- x86/mpparse: Remove the physid_t bitmap wrapper (David Arcari) [RHEL-43147]
- x86/apic: Remove check_apicid_used() and ioapic_phys_id_map() (David Arcari) [RHEL-43147]
- x86/ioapic: Simplify setup_ioapic_ids_from_mpc_nocheck() (David Arcari) [RHEL-43147]
- x86/ioapic: Make io_apic_get_unique_id() simpler (David Arcari) [RHEL-43147]
- x86/apic: Get rid of get_physical_broadcast() (David Arcari) [RHEL-43147]
- x86/ioapic: Replace some more set bit nonsense (David Arcari) [RHEL-43147]
- x86/platform/ce4100: Dont override x86_init.mpparse.setup_ioapic_ids (David Arcari) [RHEL-43147]
- x86/apic: Remove unused phys_pkg_id() callback (David Arcari) [RHEL-43147]
- arch/x86: Fix typos (David Arcari) [RHEL-43147]
- x86/cpu/topology: Make the APIC mismatch warnings complete (David Arcari) [RHEL-43147]
- x86/cpu: Remove topology.c (David Arcari) [RHEL-43147]
- x86/cpu: Make topology_amd_node_id() use the actual node info (David Arcari) [RHEL-43147]
- x86/cpu: Use common topology code for HYGON (David Arcari) [RHEL-43147]
- x86/cpu: Use common topology code for AMD (David Arcari) [RHEL-43147]
- x86/cpu: Provide an AMD/HYGON specific topology parser (David Arcari) [RHEL-43147]
- x86/cpu: Provide cpuid_read() et al. (David Arcari) [RHEL-43147]
- x86/cpu: Use common topology code for Intel (David Arcari) [RHEL-43147]
- x86/cpu: Provide a sane leaf 0xb/0x1f parser (David Arcari) [RHEL-43147]
- x86/cpu: Move __max_die_per_package to common.c (David Arcari) [RHEL-43147]
- x86/cpu: Use common topology code for Centaur and Zhaoxin (David Arcari) [RHEL-43147]
- x86/cpu: Add legacy topology parser (David Arcari) [RHEL-43147]
- x86/cpu: Provide cpu_init/parse_topology() (David Arcari) [RHEL-43147]
- drivers: base: Move cpu_dev_init() after node_dev_init() (David Arcari) [RHEL-43147]
- base/node.c: initialize the accessor list before registering (David Arcari) [RHEL-43147]
- Revert "x86/topology: Fix max_siblings calculation for some hybrid cpus" (David Arcari) [RHEL-43147]
Resolves: RHEL-43147, RHEL-54768

